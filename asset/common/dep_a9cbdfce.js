if(define("inf-ria-page/region/places",["exports","module"],function(exports,module){module.exports={name:"区域",location:[{name:"bj",log:"116.3",lat:"39.9",toolTip:"top"},{name:"gz",log:"113.23",lat:"23.17",toolTip:"top"},{name:"hk",log:"114.1",lat:"22.2",toolTip:"right",group:"hk"},{name:"hk02",log:"114.1",lat:"22.2",toolTip:"bottom",group:"hk"}]}}),define("d3/d3",[],function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function i(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function n(e){return null===e?NaN:+e}function r(e){return!isNaN(e)}function a(e){return{left:function(t,i,n,r){if(arguments.length<3)n=0;if(arguments.length<4)r=t.length;for(;r>n;){var a=n+r>>>1;if(e(t[a],i)<0)n=a+1;else r=a}return n},right:function(t,i,n,r){if(arguments.length<3)n=0;if(arguments.length<4)r=t.length;for(;r>n;){var a=n+r>>>1;if(e(t[a],i)>0)r=a;else n=a+1}return n}}}function o(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var i in t)Object.defineProperty(e.prototype,i,{value:t[i],enumerable:!1})}function u(){this._=Object.create(null)}function A(e){return(e+="")===mo||e[0]===go?go+e:e}function B(e){return(e+="")[0]===go?e.slice(1):e}function c(e){return A(e)in this._}function C(e){return(e=A(e))in this._&&delete this._[e]}function D(){var e=[];for(var t in this._)e.push(B(t));return e}function d(){var e=0;for(var t in this._)++e;return e}function f(){for(var e in this._)return!1;return!0}function h(){this._=Object.create(null)}function E(e){return e}function p(e,t,i){return function(){var n=i.apply(t,arguments);return n===t?e:n}}function F(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var i=0,n=Ho.length;n>i;++i){var r=Ho[i]+t;if(r in e)return r}}function m(){}function g(){}function H(e){function t(){for(var t,n=i,r=-1,a=n.length;++r<a;)if(t=n[r].on)t.apply(this,arguments);return e}var i=[],n=new u;return t.on=function(t,r){var a,o=n.get(t);if(arguments.length<2)return o&&o.on;if(o)o.on=null,i=i.slice(0,a=i.indexOf(o)).concat(i.slice(a+1)),n.remove(t);if(r)i.push(n.set(t,{on:r}));return e},t}function G(){so.event.preventDefault()}function I(){for(var e,t=so.event;e=t.sourceEvent;)t=e;return t}function v(e){for(var t=new g,i=0,n=arguments.length;++i<n;)t[arguments[i]]=H(t);return t.of=function(i,n){return function(r){try{var a=r.sourceEvent=so.event;r.target=e,so.event=r,t[r.type].apply(i,n)}finally{so.event=a}}},t}function y(e){return Io(e,Lo),e}function J(e){return"function"==typeof e?e:function(){return vo(e,this)}}function L(e){return"function"==typeof e?e:function(){return yo(e,this)}}function M(e,t){function i(){this.removeAttribute(e)}function n(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var i=t.apply(this,arguments);if(null==i)this.removeAttribute(e);else this.setAttribute(e,i)}function s(){var i=t.apply(this,arguments);if(null==i)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,i)}return e=so.ns.qualify(e),null==t?e.local?n:i:"function"==typeof t?e.local?s:o:e.local?a:r}function b(e){return e.trim().replace(/\s+/g," ")}function N(e){return new RegExp("(?:^|\\s+)"+so.requote(e)+"(?:\\s+|$)","g")}function K(e){return(e+"").trim().split(/^|\s+/)}function x(e,t){function i(){for(var i=-1;++i<r;)e[i](this,t)}function n(){for(var i=-1,n=t.apply(this,arguments);++i<r;)e[i](this,n)}e=K(e).map(P);var r=e.length;return"function"==typeof t?n:i}function P(e){var t=N(e);return function(i,n){if(r=i.classList)return n?r.add(e):r.remove(e);var r=i.getAttribute("class")||"";if(n){if(t.lastIndex=0,!t.test(r))i.setAttribute("class",b(r+" "+e))}else i.setAttribute("class",b(r.replace(t," ")))}}function _(e,t,i){function n(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,i)}function a(){var n=t.apply(this,arguments);if(null==n)this.style.removeProperty(e);else this.style.setProperty(e,n,i)}return null==t?n:"function"==typeof t?a:r}function O(e,t){function i(){delete this[e]}function n(){this[e]=t}function r(){var i=t.apply(this,arguments);if(null==i)delete this[e];else this[e]=i}return null==t?i:"function"==typeof t?r:n}function T(e){function t(){var t=this.ownerDocument,i=this.namespaceURI;return i===Mo&&t.documentElement.namespaceURI===Mo?t.createElement(e):t.createElementNS(i,e)}function i(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=so.ns.qualify(e)).local?i:t}function S(){var e=this.parentNode;if(e)e.removeChild(this)}function w(e){return{__data__:e}}function R(e){return function(){return Jo(this,e)}}function k(e){if(!arguments.length)e=i;return function(t,i){return t&&i?e(t.__data__,i.__data__):!t-!i}}function Q(e,t){for(var i=0,n=e.length;n>i;i++)for(var r,a=e[i],o=0,s=a.length;s>o;o++)if(r=a[o])t(r,o,i);return e}function V(e){return Io(e,No),e}function U(e){var t,i;return function(n,r,a){var o,s=e[a].update,l=s.length;if(a!=i)i=a,t=0;if(r>=t)t=r+1;for(;!(o=s[t])&&++t<l;);return o}}function W(e,t,i){function n(){var t=this[o];if(t)this.removeEventListener(e,t,t.$),delete this[o]}function r(){var r=l(t,uo(arguments));n.call(this),this.addEventListener(e,this[o]=r,r.$=i),r._=t}function a(){var t,i=new RegExp("^__on([^.]+)"+so.requote(e)+"$");for(var n in this)if(t=n.match(i)){var r=this[n];this.removeEventListener(t[1],r,r.$),delete this[n]}}var o="__on"+e,s=e.indexOf("."),l=z;if(s>0)e=e.slice(0,s);var u=Ko.get(e);if(u)e=u,l=Y;return s?t?r:n:t?m:a}function z(e,t){return function(i){var n=so.event;so.event=i,t[0]=this.__data__;try{e.apply(this,t)}finally{so.event=n}}}function Y(e,t){var i=z(e,t);return function(e){var t=this,n=e.relatedTarget;if(!n||n!==t&&!(8&n.compareDocumentPosition(t)))i.call(t,e)}}function X(i){var n=".dragsuppress-"+ ++Po,r="click"+n,a=so.select(t(i)).on("touchmove"+n,G).on("dragstart"+n,G).on("selectstart"+n,G);if(null==xo)xo="onselectstart"in i?!1:F(i.style,"userSelect");if(xo){var o=e(i).style,s=o[xo];o[xo]="none"}return function(e){if(a.on(n,null),xo)o[xo]=s;if(e){var t=function(){a.on(r,null)};a.on(r,function(){G(),t()},!0),setTimeout(t,0)}}}function j(e,i){if(i.changedTouches)i=i.changedTouches[0];var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>_o){var a=t(e);if(a.scrollX||a.scrollY){n=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();_o=!(o.f||o.e),n.remove()}}if(_o)r.x=i.pageX,r.y=i.pageY;else r.x=i.clientX,r.y=i.clientY;return r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[i.clientX-s.left-e.clientLeft,i.clientY-s.top-e.clientTop]}function Z(){return so.event.changedTouches[0].identifier}function q(e){return e>0?1:0>e?-1:0}function $(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0])}function ee(e){return e>1?0:-1>e?So:Math.acos(e)}function te(e){return e>1?ko:-1>e?-ko:Math.asin(e)}function ie(e){return((e=Math.exp(e))-1/e)/2}function ne(e){return((e=Math.exp(e))+1/e)/2}function re(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,i){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+i)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):me(""+e,ge,se):new se(e,t,i)}function le(e,t,i){function n(e){if(e>360)e-=360;else if(0>e)e+=360;if(60>e)return a+(o-a)*e/60;if(180>e)return o;if(240>e)return a+(o-a)*(240-e)/60;else return a}function r(e){return Math.round(255*n(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,i=0>i?0:i>1?1:i,o=.5>=i?i*(1+t):i+t-i*t,a=2*i-o,new he(r(e+120),r(e),r(e-120))}function ue(e,t,i){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+i)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof Be?Ce(e.l,e.a,e.b):Ce((e=He((e=so.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,i)}function Ae(e,t,i){if(isNaN(e))e=0;if(isNaN(t))t=0;return new Be(i,Math.cos(e*=Qo)*t,Math.sin(e)*t)}function Be(e,t,i){return this instanceof Be?(this.l=+e,this.a=+t,void(this.b=+i)):arguments.length<2?e instanceof Be?new Be(e.l,e.a,e.b):e instanceof ue?Ae(e.h,e.c,e.l):He((e=he(e)).r,e.g,e.b):new Be(e,t,i)}function ce(e,t,i){var n=(e+16)/116,r=n+t/500,a=n-i/200;return r=De(r)*es,n=De(n)*ts,a=De(a)*is,new he(fe(3.2404542*r-1.5371385*n-.4985314*a),fe(-.969266*r+1.8760108*n+.041556*a),fe(.0556434*r-.2040259*n+1.0572252*a))}function Ce(e,t,i){return e>0?new ue(Math.atan2(i,t)*Vo,Math.sqrt(t*t+i*i),e):new ue(NaN,NaN,e)}function De(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function de(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function fe(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function he(e,t,i){return this instanceof he?(this.r=~~e,this.g=~~t,void(this.b=~~i)):arguments.length<2?e instanceof he?new he(e.r,e.g,e.b):me(""+e,he,le):new he(e,t,i)}function Ee(e){return new he(e>>16,e>>8&255,255&e)}function pe(e){return Ee(e)+""}function Fe(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function me(e,t,i){var n,r,a,o=0,s=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Ie(r[0]),Ie(r[1]),Ie(r[2]))}if(a=as.get(e))return t(a.r,a.g,a.b);if(null!=e&&"#"===e.charAt(0)&&!isNaN(a=parseInt(e.slice(1),16)))if(4===e.length)o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l;else if(7===e.length)o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a;return t(o,s,l)}function ge(e,t,i){var n,r,a=Math.min(e/=255,t/=255,i/=255),o=Math.max(e,t,i),s=o-a,l=(o+a)/2;if(s){if(r=.5>l?s/(o+a):s/(2-o-a),e==o)n=(t-i)/s+(i>t?6:0);else if(t==o)n=(i-e)/s+2;else n=(e-t)/s+4;n*=60}else n=NaN,r=l>0&&1>l?0:n;return new se(n,r,l)}function He(e,t,i){e=Ge(e),t=Ge(t),i=Ge(i);var n=de((.4124564*e+.3575761*t+.1804375*i)/es),r=de((.2126729*e+.7151522*t+.072175*i)/ts),a=de((.0193339*e+.119192*t+.9503041*i)/is);return Be(116*r-16,500*(n-r),200*(r-a))}function Ge(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ie(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ve(e){return"function"==typeof e?e:function(){return e}}function ye(e){return function(t,i,n){if(2===arguments.length&&"function"==typeof i)n=i,i=null;return Je(t,i,e,n)}}function Je(e,t,i,n){function r(){var e,t=l.status;if(!t&&Me(l)||t>=200&&300>t||304===t){try{e=i.call(a,l)}catch(n){return void o.error.call(a,n)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=so.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;if(this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e))l=new XDomainRequest;return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=so.event;so.event=e;try{o.progress.call(a,l)}finally{so.event=t}},a.header=function(e,t){if(e=(e+"").toLowerCase(),arguments.length<2)return s[e];if(null==t)delete s[e];else s[e]=t+"";return a},a.mimeType=function(e){if(!arguments.length)return t;else return t=null==e?null:e+"",a},a.responseType=function(e){if(!arguments.length)return u;else return u=e,a},a.response=function(e){return i=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(uo(arguments)))}}),a.send=function(i,n,r){if(2===arguments.length&&"function"==typeof n)r=n,n=null;if(l.open(i,e,!0),null!=t&&!("accept"in s))s.accept=t+",*/*";if(l.setRequestHeader)for(var A in s)l.setRequestHeader(A,s[A]);if(null!=t&&l.overrideMimeType)l.overrideMimeType(t);if(null!=u)l.responseType=u;if(null!=r)a.on("error",r).on("load",function(e){r(null,e)});return o.beforesend.call(a,l),l.send(null==n?null:n),a},a.abort=function(){return l.abort(),a},so.rebind(a,o,"on"),null==n?a:a.get(Le(n))}function Le(e){return 1===e.length?function(t,i){e(null==t?i:null)}:e}function Me(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function be(e,t,i){var n=arguments.length;if(2>n)t=0;if(3>n)i=Date.now();var r=i+t,a={c:e,t:r,n:null};if(ss)ss.n=a;else os=a;if(ss=a,!ls)us=clearTimeout(us),ls=1,As(Ne);return a}function Ne(){var e=Ke(),t=xe()-e;if(t>24){if(isFinite(t))clearTimeout(us),us=setTimeout(Ne,t);ls=0}else ls=1,As(Ne)}function Ke(){for(var e=Date.now(),t=os;t;){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function xe(){for(var e,t=os,i=1/0;t;)if(t.c){if(t.t<i)i=t.t;t=(e=t).n}else t=e?e.n=t.n:os=t.n;return ss=e,i}function Pe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function _e(e,t){var i=Math.pow(10,3*Fo(8-t));return{scale:t>8?function(e){return e/i}:function(e){return e*i},symbol:e}}function Oe(e){var t=e.decimal,i=e.thousands,n=e.grouping,r=e.currency,a=n&&i?function(e,t){for(var r=e.length,a=[],o=0,s=n[0],l=0;r>0&&s>0;){if(l+s+1>t)s=Math.max(1,t-l);if(a.push(e.substring(r-=s,r+s)),(l+=s+1)>t)break;s=n[o=(o+1)%n.length]}return a.reverse().join(i)}:E;return function(e){var i=cs.exec(e),n=i[1]||" ",o=i[2]||">",s=i[3]||"-",l=i[4]||"",u=i[5],A=+i[6],B=i[7],c=i[8],C=i[9],D=1,d="",f="",h=!1,E=!0;if(c)c=+c.substring(1);if(u||"0"===n&&"="===o)u=n="0",o="=";switch(C){case"n":B=!0,C="g";break;case"%":D=100,f="%",C="f";break;case"p":D=100,f="%",C="r";break;case"b":case"o":case"x":case"X":if("#"===l)d="0"+C.toLowerCase();case"c":E=!1;case"d":h=!0,c=0;break;case"s":D=-1,C="r"}if("$"===l)d=r[0],f=r[1];if("r"==C&&!c)C="g";if(null!=c)if("g"==C)c=Math.max(1,Math.min(21,c));else if("e"==C||"f"==C)c=Math.max(0,Math.min(20,c));C=Cs.get(C)||Te;var p=u&&B;return function(e){var i=f;if(h&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>D){var l=so.formatPrefix(e,c);e=l.scale(e),i=l.symbol+f}else e*=D;e=C(e,c);var F,m,g=e.lastIndexOf(".");if(0>g){var H=E?e.lastIndexOf("e"):-1;if(0>H)F=e,m="";else F=e.substring(0,H),m=e.substring(H)}else F=e.substring(0,g),m=t+e.substring(g+1);if(!u&&B)F=a(F,1/0);var G=d.length+F.length+m.length+(p?0:r.length),I=A>G?new Array(G=A-G+1).join(n):"";if(p)F=a(I+F,I.length?A-m.length:1/0);return r+=d,e=F+m,("<"===o?r+e+I:">"===o?I+r+e:"^"===o?I.substring(0,G>>=1)+r+e+I.substring(G):r+(p?e:I+e))+i}}}function Te(e){return e+""}function Se(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function we(e,t,i){function n(t){var i=e(t),n=a(i,1);return n-t>t-i?i:n}function r(i){return t(i=e(new ds(i-1)),1),i}function a(e,i){return t(e=new ds(+e),i),e}function o(e,n,a){var o=r(e),s=[];if(a>1)for(;n>o;){if(!(i(o)%a))s.push(new Date(+o));t(o,1)}else for(;n>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,i){try{ds=Se;var n=new Se;return n._=e,o(n,t,i)}finally{ds=Date}}e.floor=e,e.round=n,e.ceil=r,e.offset=a,e.range=o;var l=e.utc=Re(e);return l.floor=l,l.round=Re(n),l.ceil=Re(r),l.offset=Re(a),l.range=s,e}function Re(e){return function(t,i){try{ds=Se;var n=new Se;return n._=t,e(n,i)._}finally{ds=Date}}}function ke(e){function t(e){function t(t){for(var i,r,a,o=[],s=-1,l=0;++s<n;)if(37===e.charCodeAt(s)){if(o.push(e.slice(l,s)),null!=(r=hs[i=e.charAt(++s)]))i=e.charAt(++s);if(a=J[i])i=a(t,null==r?"e"===i?" ":"0":r);o.push(i),l=s+1}return o.push(e.slice(l,s)),o.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=i(n,e,t,0);if(r!=t.length)return null;if("p"in n)n.H=n.H%12+12*n.p;var a=null!=n.Z&&ds!==Se,o=new(a?Se:ds);if("j"in n)o.setFullYear(n.y,0,n.j);else if("W"in n||"U"in n){if(!("w"in n))n.w="W"in n?1:0;o.setFullYear(n.y,0,1),o.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(o.getDay()+5)%7:n.w+7*n.U-(o.getDay()+6)%7)}else o.setFullYear(n.y,n.m,n.d);return o.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),a?o._:o},t.toString=function(){return e},t}function i(e,t,i,n){for(var r,a,o,s=0,l=t.length,u=i.length;l>s;){if(n>=u)return-1;if(r=t.charCodeAt(s++),37===r){if(o=t.charAt(s++),a=L[o in hs?t.charAt(s++):o],!a||(n=a(e,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}function n(e,t,i){g.lastIndex=0;var n=g.exec(t.slice(i));return n?(e.w=H.get(n[0].toLowerCase()),i+n[0].length):-1}function r(e,t,i){F.lastIndex=0;var n=F.exec(t.slice(i));return n?(e.w=m.get(n[0].toLowerCase()),i+n[0].length):-1}function a(e,t,i){v.lastIndex=0;var n=v.exec(t.slice(i));return n?(e.m=y.get(n[0].toLowerCase()),i+n[0].length):-1}function o(e,t,i){G.lastIndex=0;var n=G.exec(t.slice(i));return n?(e.m=I.get(n[0].toLowerCase()),i+n[0].length):-1}function s(e,t,n){return i(e,J.c.toString(),t,n)}function l(e,t,n){return i(e,J.x.toString(),t,n)}function u(e,t,n){return i(e,J.X.toString(),t,n)}function A(e,t,i){var n=p.get(t.slice(i,i+=2).toLowerCase());return null==n?-1:(e.p=n,i)}var B=e.dateTime,c=e.date,C=e.time,D=e.periods,d=e.days,f=e.shortDays,h=e.months,E=e.shortMonths;t.utc=function(e){function i(e){try{ds=Se;var t=new ds;return t._=e,n(t)}finally{ds=Date}}var n=t(e);return i.parse=function(e){try{ds=Se;var t=n.parse(e);return t&&t._}finally{ds=Date}},i.toString=n.toString,i},t.multi=t.utc.multi=lt;var p=so.map(),F=Ve(d),m=Ue(d),g=Ve(f),H=Ue(f),G=Ve(h),I=Ue(h),v=Ve(E),y=Ue(E);D.forEach(function(e,t){p.set(e.toLowerCase(),t)});var J={a:function(e){return f[e.getDay()]},A:function(e){return d[e.getDay()]},b:function(e){return E[e.getMonth()]},B:function(e){return h[e.getMonth()]},c:t(B),d:function(e,t){return Qe(e.getDate(),t,2)},e:function(e,t){return Qe(e.getDate(),t,2)},H:function(e,t){return Qe(e.getHours(),t,2)},I:function(e,t){return Qe(e.getHours()%12||12,t,2)},j:function(e,t){return Qe(1+Ds.dayOfYear(e),t,3)},L:function(e,t){return Qe(e.getMilliseconds(),t,3)},m:function(e,t){return Qe(e.getMonth()+1,t,2)},M:function(e,t){return Qe(e.getMinutes(),t,2)},p:function(e){return D[+(e.getHours()>=12)]},S:function(e,t){return Qe(e.getSeconds(),t,2)},U:function(e,t){return Qe(Ds.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Qe(Ds.mondayOfYear(e),t,2)},x:t(c),X:t(C),y:function(e,t){return Qe(e.getFullYear()%100,t,2)},Y:function(e,t){return Qe(e.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},L={a:n,A:r,b:a,B:o,c:s,d:et,e:et,H:it,I:it,j:tt,L:at,m:$e,M:nt,p:A,S:rt,U:ze,w:We,W:Ye,x:l,X:u,y:je,Y:Xe,Z:Ze,"%":st};return t}function Qe(e,t,i){var n=0>e?"-":"",r=(n?-e:e)+"",a=r.length;return n+(i>a?new Array(i-a+1).join(t)+r:r)}function Ve(e){return new RegExp("^(?:"+e.map(so.requote).join("|")+")","i")}function Ue(e){for(var t=new u,i=-1,n=e.length;++i<n;)t.set(e[i].toLowerCase(),i);return t}function We(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+1));return n?(e.w=+n[0],i+n[0].length):-1}function ze(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i));return n?(e.U=+n[0],i+n[0].length):-1}function Ye(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i));return n?(e.W=+n[0],i+n[0].length):-1}function Xe(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1}function je(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+2));return n?(e.y=qe(+n[0]),i+n[0].length):-1}function Ze(e,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(e.Z=-t,i+5):-1}function qe(e){return e+(e>68?1900:2e3)}function $e(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+2));return n?(e.m=n[0]-1,i+n[0].length):-1}function et(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1}function tt(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+3));return n?(e.j=+n[0],i+n[0].length):-1}function it(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1}function nt(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1}function rt(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1}function at(e,t,i){Es.lastIndex=0;var n=Es.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1}function ot(e){var t=e.getTimezoneOffset(),i=t>0?"-":"+",n=Fo(t)/60|0,r=Fo(t)%60;return i+Qe(n,"0",2)+Qe(r,"0",2)}function st(e,t,i){ps.lastIndex=0;var n=ps.exec(t.slice(i,i+1));return n?i+n[0].length:-1}function lt(e){for(var t=e.length,i=-1;++i<t;)e[i][0]=this(e[i][0]);return function(t){for(var i=0,n=e[i];!n[1](t);)n=e[++i];return n[0](t)}}function ut(){}function At(e,t,i){var n=i.s=e+t,r=n-e,a=n-r;i.t=e-a+(t-r)}function Bt(e,t){if(e&&Hs.hasOwnProperty(e.type))Hs[e.type](e,t)}function ct(e,t,i){var n,r=-1,a=e.length-i;for(t.lineStart();++r<a;)n=e[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function Ct(e,t){var i=-1,n=e.length;for(t.polygonStart();++i<n;)ct(e[i],t,1);t.polygonEnd()}function Dt(){function e(e,t){e*=Qo,t=t*Qo/2+So/4;var i=e-n,o=i>=0?1:-1,s=o*i,l=Math.cos(t),u=Math.sin(t),A=a*u,B=r*l+A*Math.cos(s),c=A*o*Math.sin(s);Is.add(Math.atan2(c,B)),n=e,r=l,a=u}var t,i,n,r,a;vs.point=function(o,s){vs.point=e,n=(t=o)*Qo,r=Math.cos(s=(i=s)*Qo/2+So/4),a=Math.sin(s)},vs.lineEnd=function(){e(t,i)}}function dt(e){var t=e[0],i=e[1],n=Math.cos(i);return[n*Math.cos(t),n*Math.sin(t),Math.sin(i)]}function ft(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ht(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Et(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function pt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ft(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function mt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function gt(e,t){return Fo(e[0]-t[0])<Oo&&Fo(e[1]-t[1])<Oo}function Ht(e,t){e*=Qo;var i=Math.cos(t*=Qo);Gt(i*Math.cos(e),i*Math.sin(e),Math.sin(t))}function Gt(e,t,i){++ys,Ls+=(e-Ls)/ys,Ms+=(t-Ms)/ys,bs+=(i-bs)/ys}function It(){function e(e,r){e*=Qo;var a=Math.cos(r*=Qo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=i*l-n*s)*u+(u=n*o-t*l)*u+(u=t*s-i*o)*u),t*o+i*s+n*l);Js+=u,Ns+=u*(t+(t=o)),Ks+=u*(i+(i=s)),xs+=u*(n+(n=l)),Gt(t,i,n)}var t,i,n;Ts.point=function(r,a){r*=Qo;var o=Math.cos(a*=Qo);t=o*Math.cos(r),i=o*Math.sin(r),n=Math.sin(a),Ts.point=e,Gt(t,i,n)}}function vt(){Ts.point=Ht}function yt(){function e(e,t){e*=Qo;var i=Math.cos(t*=Qo),o=i*Math.cos(e),s=i*Math.sin(e),l=Math.sin(t),u=r*l-a*s,A=a*o-n*l,B=n*s-r*o,c=Math.sqrt(u*u+A*A+B*B),C=n*o+r*s+a*l,D=c&&-ee(C)/c,d=Math.atan2(c,C);Ps+=D*u,_s+=D*A,Os+=D*B,Js+=d,Ns+=d*(n+(n=o)),Ks+=d*(r+(r=s)),xs+=d*(a+(a=l)),Gt(n,r,a)}var t,i,n,r,a;Ts.point=function(o,s){t=o,i=s,Ts.point=e,o*=Qo;var l=Math.cos(s*=Qo);n=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),Gt(n,r,a)},Ts.lineEnd=function(){e(t,i),Ts.lineEnd=vt,Ts.point=Ht}}function Jt(e,t){function i(i,n){return i=e(i,n),t(i[0],i[1])}if(e.invert&&t.invert)i.invert=function(i,n){return i=t.invert(i,n),i&&e.invert(i[0],i[1])};return i}function Lt(){return!0}function Mt(e,t,i,n,r){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,i=e[0],n=e[t];if(gt(i,n)){r.lineStart();for(var s=0;t>s;++s)r.point((i=e[s])[0],i[1]);return void r.lineEnd()}var l=new Nt(i,e,null,!0),u=new Nt(i,null,l,!1);l.o=u,a.push(l),o.push(u),l=new Nt(n,e,null,!1),u=new Nt(n,null,l,!0),l.o=u,a.push(l),o.push(u)}}),o.sort(t),bt(a),bt(o),a.length){for(var s=0,l=i,u=o.length;u>s;++s)o[s].e=l=!l;for(var A,B,c=a[0];;){for(var C=c,D=!0;C.v;)if((C=C.n)===c)return;A=C.z,r.lineStart();do{if(C.v=C.o.v=!0,C.e){if(D)for(var s=0,u=A.length;u>s;++s)r.point((B=A[s])[0],B[1]);else n(C.x,C.n.x,1,r);C=C.n}else{if(D){A=C.p.z;for(var s=A.length-1;s>=0;--s)r.point((B=A[s])[0],B[1])}else n(C.x,C.p.x,-1,r);C=C.p}C=C.o,A=C.z,D=!D}while(!C.v);r.lineEnd()}}}function bt(e){if(t=e.length){for(var t,i,n=0,r=e[0];++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Nt(e,t,i,n){this.x=e,this.z=t,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function Kt(e,t,i,n){return function(r,a){function o(t,i){var n=r(t,i);if(e(t=n[0],i=n[1]))a.point(t,i)}function s(e,t){var i=r(e,t);f.point(i[0],i[1])}function l(){E.point=s,f.lineStart()}function u(){E.point=o,f.lineEnd()}function A(e,t){d.push([e,t]);var i=r(e,t);F.point(i[0],i[1])}function B(){F.lineStart(),d=[]}function c(){A(d[0][0],d[0][1]),F.lineEnd();var e,t=F.clean(),i=p.buffer(),n=i.length;if(d.pop(),D.push(d),d=null,n)if(!(1&t)){if(n>1&&2&t)i.push(i.pop().concat(i.shift()));C.push(i.filter(xt))}else{e=i[0];var r,n=e.length-1,o=-1;if(n>0){if(!m)a.polygonStart(),m=!0;for(a.lineStart();++o<n;)a.point((r=e[o])[0],r[1]);a.lineEnd()}}}var C,D,d,f=t(a),h=r.invert(n[0],n[1]),E={point:o,lineStart:l,lineEnd:u,polygonStart:function(){E.point=A,E.lineStart=B,E.lineEnd=c,C=[],D=[]},polygonEnd:function(){E.point=o,E.lineStart=l,E.lineEnd=u,C=so.merge(C);var e=wt(h,D);if(C.length){if(!m)a.polygonStart(),m=!0;Mt(C,_t,e,i,a)}else if(e){if(!m)a.polygonStart(),m=!0;a.lineStart(),i(null,null,1,a),a.lineEnd()}if(m)a.polygonEnd(),m=!1;C=D=null},sphere:function(){a.polygonStart(),a.lineStart(),i(null,null,1,a),a.lineEnd(),a.polygonEnd()}},p=Pt(),F=t(p),m=!1;return E}}function xt(e){return e.length>1}function Pt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,i){e.push([t,i])},lineEnd:m,buffer:function(){var i=t;return t=[],e=null,i},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function _t(e,t){return((e=e.x)[0]<0?e[1]-ko-Oo:ko-e[1])-((t=t.x)[0]<0?t[1]-ko-Oo:ko-t[1])}function Ot(e){var t,i=NaN,n=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?So:-So,l=Fo(a-i);if(Fo(l-So)<Oo)e.point(i,n=(n+o)/2>0?ko:-ko),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),t=0;else if(r!==s&&l>=So){if(Fo(i-r)<Oo)i-=r*Oo;if(Fo(a-s)<Oo)a-=s*Oo;n=Tt(i,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),t=0}e.point(i=a,n=o),r=s},lineEnd:function(){e.lineEnd(),i=n=NaN},clean:function(){return 2-t}}}function Tt(e,t,i,n){var r,a,o=Math.sin(e-i);return Fo(o)>Oo?Math.atan((Math.sin(t)*(a=Math.cos(n))*Math.sin(i)-Math.sin(n)*(r=Math.cos(t))*Math.sin(e))/(r*a*o)):(t+n)/2}function St(e,t,i,n){var r;if(null==e)r=i*ko,n.point(-So,r),n.point(0,r),n.point(So,r),n.point(So,0),n.point(So,-r),n.point(0,-r),n.point(-So,-r),n.point(-So,0),n.point(-So,r);else if(Fo(e[0]-t[0])>Oo){var a=e[0]<t[0]?So:-So;r=i*a/2,n.point(-a,r),n.point(0,r),n.point(a,r)}else n.point(t[0],t[1])}function wt(e,t){var i=e[0],n=e[1],r=[Math.sin(i),-Math.cos(i),0],a=0,o=0;Is.reset();for(var s=0,l=t.length;l>s;++s){var u=t[s],A=u.length;if(A)for(var B=u[0],c=B[0],C=B[1]/2+So/4,D=Math.sin(C),d=Math.cos(C),f=1;;){if(f===A)f=0;e=u[f];var h=e[0],E=e[1]/2+So/4,p=Math.sin(E),F=Math.cos(E),m=h-c,g=m>=0?1:-1,H=g*m,G=H>So,I=D*p;if(Is.add(Math.atan2(I*g*Math.sin(H),d*F+I*Math.cos(H))),a+=G?m+g*wo:m,G^c>=i^h>=i){var v=ht(dt(B),dt(e));Ft(v);var y=ht(r,v);Ft(y);var J=(G^m>=0?-1:1)*te(y[2]);if(n>J||n===J&&(v[0]||v[1]))o+=G^m>=0?1:-1}if(!f++)break;c=h,D=p,d=F,B=e}else;}return(-Oo>a||Oo>a&&-Oo>Is)^1&o}function Rt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function i(e){var i,a,l,u,A;return{lineStart:function(){u=l=!1,A=1},point:function(B,c){var C,D=[B,c],d=t(B,c),f=o?d?0:r(B,c):d?r(B+(0>B?So:-So),c):0;if(!i&&(u=l=d))e.lineStart();if(d!==l)if(C=n(i,D),gt(i,C)||gt(D,C))D[0]+=Oo,D[1]+=Oo,d=t(D[0],D[1]);if(d!==l){if(A=0,d)e.lineStart(),C=n(D,i),e.point(C[0],C[1]);else C=n(i,D),e.point(C[0],C[1]),e.lineEnd();i=C}else if(s&&i&&o^d){var h;if(!(f&a)&&(h=n(D,i,!0)))if(A=0,o)e.lineStart(),e.point(h[0][0],h[0][1]),e.point(h[1][0],h[1][1]),e.lineEnd();else e.point(h[1][0],h[1][1]),e.lineEnd(),e.lineStart(),e.point(h[0][0],h[0][1])}if(d&&(!i||!gt(i,D)))e.point(D[0],D[1]);i=D,l=d,a=f},lineEnd:function(){if(l)e.lineEnd();i=null},clean:function(){return A|(u&&l)<<1}}}function n(e,t,i){var n=dt(e),r=dt(t),o=[1,0,0],s=ht(n,r),l=ft(s,s),u=s[0],A=l-u*u;if(!A)return!i&&e;var B=a*l/A,c=-a*u/A,C=ht(o,s),D=pt(o,B),d=pt(s,c);Et(D,d);var f=C,h=ft(D,f),E=ft(f,f),p=h*h-E*(ft(D,D)-1);if(!(0>p)){var F=Math.sqrt(p),m=pt(f,(-h-F)/E);if(Et(m,D),m=mt(m),!i)return m;var g,H=e[0],G=t[0],I=e[1],v=t[1];if(H>G)g=H,H=G,G=g;var y=G-H,J=Fo(y-So)<Oo,L=J||Oo>y;if(!J&&I>v)g=I,I=v,v=g;if(L?J?I+v>0^m[1]<(Fo(m[0]-H)<Oo?I:v):I<=m[1]&&m[1]<=v:y>So^(H<=m[0]&&m[0]<=G)){var M=pt(f,(-h+F)/E);return Et(M,D),[m,mt(M)]}}}function r(t,i){var n=o?e:So-e,r=0;if(-n>t)r|=1;else if(t>n)r|=2;if(-n>i)r|=4;else if(i>n)r|=8;return r}var a=Math.cos(e),o=a>0,s=Fo(a)>Oo,l=Di(e,6*Qo);return Kt(t,i,l,o?[0,-e]:[-So,e-So])}function kt(e,t,i,n){return function(r){var a,o=r.a,s=r.b,l=o.x,u=o.y,A=s.x,B=s.y,c=0,C=1,D=A-l,d=B-u;if(a=e-l,D||!(a>0)){if(a/=D,0>D){if(c>a)return;if(C>a)C=a}else if(D>0){if(a>C)return;if(a>c)c=a}if(a=i-l,D||!(0>a)){if(a/=D,0>D){if(a>C)return;if(a>c)c=a}else if(D>0){if(c>a)return;if(C>a)C=a}if(a=t-u,d||!(a>0)){if(a/=d,0>d){if(c>a)return;if(C>a)C=a}else if(d>0){if(a>C)return;if(a>c)c=a}if(a=n-u,d||!(0>a)){if(a/=d,0>d){if(a>C)return;if(a>c)c=a}else if(d>0){if(c>a)return;if(C>a)C=a}if(c>0)r.a={x:l+c*D,y:u+c*d};if(1>C)r.b={x:l+C*D,y:u+C*d};return r}}}}}}function Qt(e,t,i,n){function r(n,r){return Fo(n[0]-e)<Oo?r>0?0:3:Fo(n[0]-i)<Oo?r>0?2:1:Fo(n[1]-t)<Oo?r>0?1:0:r>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var i=r(e,1),n=r(t,1);return i!==n?i-n:0===i?t[1]-e[1]:1===i?e[0]-t[0]:2===i?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,i=f.length,n=e[1],r=0;i>r;++r)for(var a,o=1,s=f[r],l=s.length,u=s[0];l>o;++o){if(a=s[o],u[1]<=n){if(a[1]>n&&$(u,a,e)>0)++t}else if(a[1]<=n&&$(u,a,e)<0)--t;u=a}return 0!==t}function u(a,s,l,u){var A=0,B=0;if(null==a||(A=r(a,l))!==(B=r(s,l))||o(a,s)<0^l>0){do u.point(0===A||3===A?e:i,A>1?n:t);while((A=(A+l+4)%4)!==B)}else u.point(s[0],s[1])}function A(r,a){return r>=e&&i>=r&&a>=t&&n>=a}function B(e,t){if(A(e,t))s.point(e,t)}function c(){if(L.point=D,f)f.push(h=[]);G=!0,H=!1,m=g=NaN}function C(){if(d){if(D(E,p),F&&H)y.rejoin();d.push(y.buffer())}if(L.point=B,H)s.lineEnd()}function D(e,t){e=Math.max(-ws,Math.min(ws,e)),t=Math.max(-ws,Math.min(ws,t));var i=A(e,t);if(f)h.push([e,t]);if(G){if(E=e,p=t,F=i,G=!1,i)s.lineStart(),s.point(e,t)}else if(i&&H)s.point(e,t);else{var n={a:{x:m,y:g},b:{x:e,y:t}};if(J(n)){if(!H)s.lineStart(),s.point(n.a.x,n.a.y);if(s.point(n.b.x,n.b.y),!i)s.lineEnd();I=!1}else if(i)s.lineStart(),s.point(e,t),I=!1}m=e,g=t,H=i}var d,f,h,E,p,F,m,g,H,G,I,v=s,y=Pt(),J=kt(e,t,i,n),L={point:B,lineStart:c,lineEnd:C,polygonStart:function(){s=y,d=[],f=[],I=!0},polygonEnd:function(){s=v,d=so.merge(d);var t=l([e,n]),i=I&&t,r=d.length;if(i||r){if(s.polygonStart(),i)s.lineStart(),u(null,null,1,s),s.lineEnd();if(r)Mt(d,a,t,u,s);s.polygonEnd()}d=f=h=null}};return L}}function Vt(e){var t=0,i=So/3,n=oi(e),r=n(t,i);return r.parallels=function(e){if(!arguments.length)return[t/So*180,i/So*180];else return n(t=e[0]*So/180,i=e[1]*So/180)},r}function Ut(e,t){function i(e,t){var i=Math.sqrt(a-2*r*Math.sin(t))/r;return[i*Math.sin(e*=r),o-i*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,a=1+n*(2*r-n),o=Math.sqrt(a)/r;return i.invert=function(e,t){var i=o-t;return[Math.atan2(e,i)/r,te((a-(e*e+i*i)*r*r)/(2*r))]},i}function Wt(){function e(e,t){ks+=r*e-n*t,n=e,r=t}var t,i,n,r;zs.point=function(a,o){zs.point=e,t=n=a,i=r=o},zs.lineEnd=function(){e(t,i)}}function zt(e,t){if(Qs>e)Qs=e;if(e>Us)Us=e;if(Vs>t)Vs=t;if(t>Ws)Ws=t}function Yt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=i}function i(e,t){o.push("L",e,",",t)}function n(){s.point=e}function r(){o.push("Z")}var a=Xt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:n,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=n,s.point=e},pointRadius:function(e){return a=Xt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Xt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function jt(e,t){Ls+=e,Ms+=t,++bs}function Zt(){function e(e,n){var r=e-t,a=n-i,o=Math.sqrt(r*r+a*a);Ns+=o*(t+e)/2,Ks+=o*(i+n)/2,xs+=o,jt(t=e,i=n)}var t,i;Xs.point=function(n,r){Xs.point=e,jt(t=n,i=r)}}function qt(){Xs.point=jt}function $t(){function e(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);Ns+=o*(n+e)/2,Ks+=o*(r+t)/2,xs+=o,o=r*e-n*t,Ps+=o*(n+e),_s+=o*(r+t),Os+=3*o,jt(n=e,r=t)}var t,i,n,r;Xs.point=function(a,o){Xs.point=e,jt(t=n=a,i=r=o)},Xs.lineEnd=function(){
e(t,i)}}function ei(e){function t(t,i){e.moveTo(t+o,i),e.arc(t,i,o,0,wo)}function i(t,i){e.moveTo(t,i),s.point=n}function n(t,i){e.lineTo(t,i)}function r(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=i},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return o=e,s},result:m};return s}function ti(e){function t(e){return(s?n:i)(e)}function i(t){return ri(t,function(i,n){i=e(i,n),t.point(i[0],i[1])})}function n(t){function i(i,n){i=e(i,n),t.point(i[0],i[1])}function n(){p=NaN,G.point=a,t.lineStart()}function a(i,n){var a=dt([i,n]),o=e(i,n);r(p,F,E,m,g,H,p=o[0],F=o[1],E=i,m=a[0],g=a[1],H=a[2],s,t),t.point(p,F)}function o(){G.point=i,t.lineEnd()}function l(){n(),G.point=u,G.lineEnd=A}function u(e,t){a(B=e,c=t),C=p,D=F,d=m,f=g,h=H,G.point=a}function A(){r(p,F,E,m,g,H,C,D,B,d,f,h,s,t),G.lineEnd=o,o()}var B,c,C,D,d,f,h,E,p,F,m,g,H,G={point:i,lineStart:n,lineEnd:o,polygonStart:function(){t.polygonStart(),G.lineStart=l},polygonEnd:function(){t.polygonEnd(),G.lineStart=n}};return G}function r(t,i,n,s,l,u,A,B,c,C,D,d,f,h){var E=A-t,p=B-i,F=E*E+p*p;if(F>4*a&&f--){var m=s+C,g=l+D,H=u+d,G=Math.sqrt(m*m+g*g+H*H),I=Math.asin(H/=G),v=Fo(Fo(H)-1)<Oo||Fo(n-c)<Oo?(n+c)/2:Math.atan2(g,m),y=e(v,I),J=y[0],L=y[1],M=J-t,b=L-i,N=p*M-E*b;if(N*N/F>a||Fo((E*M+p*b)/F-.5)>.3||o>s*C+l*D+u*d)r(t,i,n,s,l,u,J,L,v,m/=G,g/=G,H,f,h),h.point(J,L),r(J,L,v,m,g,H,A,B,c,C,D,d,f,h)}}var a=.5,o=Math.cos(30*Qo),s=16;return t.precision=function(e){if(!arguments.length)return Math.sqrt(a);else return s=(a=e*e)>0&&16,t},t}function ii(e){var t=ti(function(t,i){return e([t*Vo,i*Vo])});return function(e){return si(t(e))}}function ni(e){this.stream=e}function ri(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function ai(e){return oi(function(){return e})()}function oi(e){function t(e){return e=s(e[0]*Qo,e[1]*Qo),[e[0]*c+l,u-e[1]*c]}function i(e){return e=s.invert((e[0]-l)/c,(u-e[1])/c),e&&[e[0]*Vo,e[1]*Vo]}function n(){s=Jt(o=Ai(h,p,F),a);var e=a(d,f);return l=C-e[0]*c,u=D+e[1]*c,r()}function r(){if(A)A.valid=!1,A=null;return t}var a,o,s,l,u,A,B=ti(function(e,t){return e=a(e,t),[e[0]*c+l,u-e[1]*c]}),c=150,C=480,D=250,d=0,f=0,h=0,p=0,F=0,m=Ss,g=E,H=null,G=null;return t.stream=function(e){if(A)A.valid=!1;return A=si(m(o,B(g(e)))),A.valid=!0,A},t.clipAngle=function(e){if(!arguments.length)return H;else return m=null==e?(H=e,Ss):Rt((H=+e)*Qo),r()},t.clipExtent=function(e){if(!arguments.length)return G;else return G=e,g=e?Qt(e[0][0],e[0][1],e[1][0],e[1][1]):E,r()},t.scale=function(e){if(!arguments.length)return c;else return c=+e,n()},t.translate=function(e){if(!arguments.length)return[C,D];else return C=+e[0],D=+e[1],n()},t.center=function(e){if(!arguments.length)return[d*Vo,f*Vo];else return d=e[0]%360*Qo,f=e[1]%360*Qo,n()},t.rotate=function(e){if(!arguments.length)return[h*Vo,p*Vo,F*Vo];else return h=e[0]%360*Qo,p=e[1]%360*Qo,F=e.length>2?e[2]%360*Qo:0,n()},so.rebind(t,B,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&i,n()}}function si(e){return ri(e,function(t,i){e.point(t*Qo,i*Qo)})}function li(e,t){return[e,t]}function ui(e,t){return[e>So?e-wo:-So>e?e+wo:e,t]}function Ai(e,t,i){return e?t||i?Jt(ci(e),Ci(t,i)):ci(e):t||i?Ci(t,i):ui}function Bi(e){return function(t,i){return t+=e,[t>So?t-wo:-So>t?t+wo:t,i]}}function ci(e){var t=Bi(e);return t.invert=Bi(-e),t}function Ci(e,t){function i(e,t){var i=Math.cos(t),s=Math.cos(e)*i,l=Math.sin(e)*i,u=Math.sin(t),A=u*n+s*r;return[Math.atan2(l*a-A*o,s*n-u*r),te(A*a+l*o)]}var n=Math.cos(e),r=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return i.invert=function(e,t){var i=Math.cos(t),s=Math.cos(e)*i,l=Math.sin(e)*i,u=Math.sin(t),A=u*a-l*o;return[Math.atan2(l*a+u*o,s*n+A*r),te(A*n-s*r)]},i}function Di(e,t){var i=Math.cos(e),n=Math.sin(e);return function(r,a,o,s){var l=o*t;if(null!=r){if(r=di(i,r),a=di(i,a),o>0?a>r:r>a)r+=o*wo}else r=e+o*wo,a=e-.5*l;for(var u,A=r;o>0?A>a:a>A;A-=l)s.point((u=mt([i,-n*Math.cos(A),-n*Math.sin(A)]))[0],u[1])}}function di(e,t){var i=dt(t);i[0]-=e,Ft(i);var n=ee(-i[1]);return((-i[2]<0?-n:n)+2*Math.PI-Oo)%(2*Math.PI)}function fi(e,t,i){var n=so.range(e,t-Oo,i).concat(t);return function(e){return n.map(function(t){return[e,t]})}}function hi(e,t,i){var n=so.range(e,t-Oo,i).concat(t);return function(e){return n.map(function(t){return[t,e]})}}function Ei(e){return e.source}function pi(e){return e.target}function Fi(e,t,i,n){var r=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),l=r*Math.cos(e),u=r*Math.sin(e),A=o*Math.cos(i),B=o*Math.sin(i),c=2*Math.asin(Math.sqrt(ae(n-t)+r*o*ae(i-e))),C=1/Math.sin(c),D=c?function(e){var t=Math.sin(e*=c)*C,i=Math.sin(c-e)*C,n=i*l+t*A,r=i*u+t*B,o=i*a+t*s;return[Math.atan2(r,n)*Vo,Math.atan2(o,Math.sqrt(n*n+r*r))*Vo]}:function(){return[e*Vo,t*Vo]};return D.distance=c,D}function mi(){function e(e,r){var a=Math.sin(r*=Qo),o=Math.cos(r),s=Fo((e*=Qo)-t),l=Math.cos(s);js+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-i*o*l)*s),i*a+n*o*l),t=e,i=a,n=o}var t,i,n;Zs.point=function(r,a){t=r*Qo,i=Math.sin(a*=Qo),n=Math.cos(a),Zs.point=e},Zs.lineEnd=function(){Zs.point=Zs.lineEnd=m}}function gi(e,t){function i(t,i){var n=Math.cos(t),r=Math.cos(i),a=e(n*r);return[a*r*Math.sin(t),a*Math.sin(i)]}return i.invert=function(e,i){var n=Math.sqrt(e*e+i*i),r=t(n),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(e*a,n*o),Math.asin(n&&i*a/n)]},i}function Hi(e,t){function i(e,t){if(o>0){if(-ko+Oo>t)t=-ko+Oo}else if(t>ko-Oo)t=ko-Oo;var i=o/Math.pow(r(t),a);return[i*Math.sin(a*e),o-i*Math.cos(a*e)]}var n=Math.cos(e),r=function(e){return Math.tan(So/4+e/2)},a=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),o=n*Math.pow(r(e),a)/a;if(!a)return Ii;else return i.invert=function(e,t){var i=o-t,n=q(a)*Math.sqrt(e*e+i*i);return[Math.atan2(e,i)/a,2*Math.atan(Math.pow(o/n,1/a))-ko]},i}function Gi(e,t){function i(e,t){var i=a-t;return[i*Math.sin(r*e),a-i*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;if(Fo(r)<Oo)return li;else return i.invert=function(e,t){var i=a-t;return[Math.atan2(e,i)/r,a-q(r)*Math.sqrt(e*e+i*i)]},i}function Ii(e,t){return[e,Math.log(Math.tan(So/4+t/2))]}function vi(e){var t,i=ai(e),n=i.scale,r=i.translate,a=i.clipExtent;return i.scale=function(){var e=n.apply(i,arguments);return e===i?t?i.clipExtent(null):i:e},i.translate=function(){var e=r.apply(i,arguments);return e===i?t?i.clipExtent(null):i:e},i.clipExtent=function(e){var o=a.apply(i,arguments);if(o===i){if(t=null==e){var s=So*n(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else if(t)o=null;return o},i.clipExtent(null)}function yi(e,t){return[Math.log(Math.tan(So/4+t/2)),-e]}function Ji(e){return e[0]}function Li(e){return e[1]}function Mi(e){for(var t=e.length,i=[0,1],n=2,r=2;t>r;r++){for(;n>1&&$(e[i[n-2]],e[i[n-1]],e[r])<=0;)--n;i[n++]=r}return i.slice(0,n)}function bi(e,t){return e[0]-t[0]||e[1]-t[1]}function Ni(e,t,i){return(i[0]-t[0])*(e[1]-t[1])<(i[1]-t[1])*(e[0]-t[0])}function Ki(e,t,i,n){var r=e[0],a=i[0],o=t[0]-r,s=n[0]-a,l=e[1],u=i[1],A=t[1]-l,B=n[1]-u,c=(s*(l-u)-B*(r-a))/(B*o-s*A);return[r+c*o,l+c*A]}function xi(e){var t=e[0],i=e[e.length-1];return!(t[0]-i[0]||t[1]-i[1])}function Pi(){nn(this),this.edge=this.site=this.circle=null}function _i(e){var t=ul.pop()||new Pi;return t.site=e,t}function Oi(e){zi(e),ol.remove(e),ul.push(e),nn(e)}function Ti(e){var t=e.circle,i=t.x,n=t.cy,r={x:i,y:n},a=e.P,o=e.N,s=[e];Oi(e);for(var l=a;l.circle&&Fo(i-l.circle.x)<Oo&&Fo(n-l.circle.cy)<Oo;)a=l.P,s.unshift(l),Oi(l),l=a;s.unshift(l),zi(l);for(var u=o;u.circle&&Fo(i-u.circle.x)<Oo&&Fo(n-u.circle.cy)<Oo;)o=u.N,s.push(u),Oi(u),u=o;s.push(u),zi(u);var A,B=s.length;for(A=1;B>A;++A)u=s[A],l=s[A-1],$i(u.edge,l.site,u.site,r);l=s[0],u=s[B-1],u.edge=Zi(l.site,u.site,null,r),Wi(l),Wi(u)}function Si(e){for(var t,i,n,r,a=e.x,o=e.y,s=ol._;s;)if(n=wi(s,o)-a,n>Oo)s=s.L;else if(r=a-Ri(s,o),r>Oo){if(!s.R){t=s;break}s=s.R}else{if(n>-Oo)t=s.P,i=s;else if(r>-Oo)t=s,i=s.N;else t=i=s;break}var l=_i(e);if(ol.insert(t,l),t||i){if(t===i)return zi(t),i=_i(t.site),ol.insert(l,i),l.edge=i.edge=Zi(t.site,l.site),Wi(t),void Wi(i);if(!i)return void(l.edge=Zi(t.site,l.site));zi(t),zi(i);var u=t.site,A=u.x,B=u.y,c=e.x-A,C=e.y-B,D=i.site,d=D.x-A,f=D.y-B,h=2*(c*f-C*d),E=c*c+C*C,p=d*d+f*f,F={x:(f*E-C*p)/h+A,y:(c*p-d*E)/h+B};$i(i.edge,u,D,F),l.edge=Zi(u,e,null,F),i.edge=Zi(e,D,null,F),Wi(t),Wi(i)}}function wi(e,t){var i=e.site,n=i.x,r=i.y,a=r-t;if(!a)return n;var o=e.P;if(!o)return-(1/0);i=o.site;var s=i.x,l=i.y,u=l-t;if(!u)return s;var A=s-n,B=1/a-1/u,c=A/u;if(B)return(-c+Math.sqrt(c*c-2*B*(A*A/(-2*u)-l+u/2+r-a/2)))/B+n;else return(n+s)/2}function Ri(e,t){var i=e.N;if(i)return wi(i,t);var n=e.site;return n.y===t?n.x:1/0}function ki(e){this.site=e,this.edges=[]}function Qi(e){for(var t,i,n,r,a,o,s,l,u,A,B=e[0][0],c=e[1][0],C=e[0][1],D=e[1][1],d=al,f=d.length;f--;)if(a=d[f],a&&a.prepare()){for(s=a.edges,l=s.length,o=0;l>o;)if(A=s[o].end(),n=A.x,r=A.y,u=s[++o%l].start(),t=u.x,i=u.y,Fo(n-t)>Oo||Fo(r-i)>Oo)s.splice(o,0,new en(qi(a.site,A,Fo(n-B)<Oo&&D-r>Oo?{x:B,y:Fo(t-B)<Oo?i:D}:Fo(r-D)<Oo&&c-n>Oo?{x:Fo(i-D)<Oo?t:c,y:D}:Fo(n-c)<Oo&&r-C>Oo?{x:c,y:Fo(t-c)<Oo?i:C}:Fo(r-C)<Oo&&n-B>Oo?{x:Fo(i-C)<Oo?t:B,y:C}:null),a.site,null)),++l}else;}function Vi(e,t){return t.angle-e.angle}function Ui(){nn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wi(e){var t=e.P,i=e.N;if(t&&i){var n=t.site,r=e.site,a=i.site;if(n!==a){var o=r.x,s=r.y,l=n.x-o,u=n.y-s,A=a.x-o,B=a.y-s,c=2*(l*B-u*A);if(!(c>=-To)){var C=l*l+u*u,D=A*A+B*B,d=(B*C-u*D)/c,f=(l*D-A*C)/c,B=f+s,h=Al.pop()||new Ui;h.arc=e,h.site=r,h.x=d+o,h.y=B+Math.sqrt(d*d+f*f),h.cy=B,e.circle=h;for(var E=null,p=ll._;p;)if(h.y<p.y||h.y===p.y&&h.x<=p.x)if(p.L)p=p.L;else{E=p.P;break}else if(p.R)p=p.R;else{E=p;break}if(ll.insert(E,h),!E)sl=h}}}}function zi(e){var t=e.circle;if(t){if(!t.P)sl=t.N;ll.remove(t),Al.push(t),nn(t),e.circle=null}}function Yi(e){for(var t,i=rl,n=kt(e[0][0],e[0][1],e[1][0],e[1][1]),r=i.length;r--;)if(t=i[r],!Xi(t,e)||!n(t)||Fo(t.a.x-t.b.x)<Oo&&Fo(t.a.y-t.b.y)<Oo)t.a=t.b=null,i.splice(r,1)}function Xi(e,t){var i=e.b;if(i)return!0;var n,r,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],A=e.l,B=e.r,c=A.x,C=A.y,D=B.x,d=B.y,f=(c+D)/2,h=(C+d)/2;if(d===C){if(o>f||f>=s)return;if(c>D){if(!a)a={x:f,y:l};else if(a.y>=u)return;i={x:f,y:u}}else{if(!a)a={x:f,y:u};else if(a.y<l)return;i={x:f,y:l}}}else if(n=(c-D)/(d-C),r=h-n*f,-1>n||n>1)if(c>D){if(!a)a={x:(l-r)/n,y:l};else if(a.y>=u)return;i={x:(u-r)/n,y:u}}else{if(!a)a={x:(u-r)/n,y:u};else if(a.y<l)return;i={x:(l-r)/n,y:l}}else if(d>C){if(!a)a={x:o,y:n*o+r};else if(a.x>=s)return;i={x:s,y:n*s+r}}else{if(!a)a={x:s,y:n*s+r};else if(a.x<o)return;i={x:o,y:n*o+r}}return e.a=a,e.b=i,!0}function ji(e,t){this.l=e,this.r=t,this.a=this.b=null}function Zi(e,t,i,n){var r=new ji(e,t);if(rl.push(r),i)$i(r,e,t,i);if(n)$i(r,t,e,n);return al[e.i].edges.push(new en(r,e,t)),al[t.i].edges.push(new en(r,t,e)),r}function qi(e,t,i){var n=new ji(e,null);return n.a=t,n.b=i,rl.push(n),n}function $i(e,t,i,n){if(!e.a&&!e.b)e.a=n,e.l=t,e.r=i;else if(e.l===i)e.b=n;else e.a=n}function en(e,t,i){var n=e.a,r=e.b;this.edge=e,this.site=t,this.angle=i?Math.atan2(i.y-t.y,i.x-t.x):e.l===t?Math.atan2(r.x-n.x,n.y-r.y):Math.atan2(n.x-r.x,r.y-n.y)}function tn(){this._=null}function nn(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function rn(e,t){var i=t,n=t.R,r=i.U;if(r)if(r.L===i)r.L=n;else r.R=n;else e._=n;if(n.U=r,i.U=n,i.R=n.L,i.R)i.R.U=i;n.L=i}function an(e,t){var i=t,n=t.L,r=i.U;if(r)if(r.L===i)r.L=n;else r.R=n;else e._=n;if(n.U=r,i.U=n,i.L=n.R,i.L)i.L.U=i;n.R=i}function on(e){for(;e.L;)e=e.L;return e}function sn(e,t){var i,n,r,a=e.sort(ln).pop();for(rl=[],al=new Array(e.length),ol=new tn,ll=new tn;;)if(r=sl,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x)){if(a.x!==i||a.y!==n)al[a.i]=new ki(a),Si(a),i=a.x,n=a.y;a=e.pop()}else if(r)Ti(r.arc);else break;if(t)Yi(t),Qi(t);var o={cells:al,edges:rl};return ol=ll=rl=al=null,o}function ln(e,t){return t.y-e.y||t.x-e.x}function un(e,t,i){return(e.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-e.y)}function An(e){return e.x}function Bn(e){return e.y}function cn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Cn(e,t,i,n,r,a){if(!e(t,i,n,r,a)){var o=.5*(i+r),s=.5*(n+a),l=t.nodes;if(l[0])Cn(e,l[0],i,n,o,s);if(l[1])Cn(e,l[1],o,n,r,s);if(l[2])Cn(e,l[2],i,s,o,a);if(l[3])Cn(e,l[3],o,s,r,a)}}function Dn(e,t,i,n,r,a,o){var s,l=1/0;return function u(e,A,B,c,C){if(!(A>a||B>o||n>c||r>C)){if(D=e.point){var D,d=t-e.x,f=i-e.y,h=d*d+f*f;if(l>h){var E=Math.sqrt(l=h);n=t-E,r=i-E,a=t+E,o=i+E,s=D}}for(var p=e.nodes,F=.5*(A+c),m=.5*(B+C),g=t>=F,H=i>=m,G=H<<1|g,I=G+4;I>G;++G)if(e=p[3&G])switch(3&G){case 0:u(e,A,B,F,m);break;case 1:u(e,F,B,c,m);break;case 2:u(e,A,m,F,C);break;case 3:u(e,F,m,c,C)}}}(e,n,r,a,o),s}function dn(e,t){e=so.rgb(e),t=so.rgb(t);var i=e.r,n=e.g,r=e.b,a=t.r-i,o=t.g-n,s=t.b-r;return function(e){return"#"+Fe(Math.round(i+a*e))+Fe(Math.round(n+o*e))+Fe(Math.round(r+s*e))}}function fn(e,t){var i,n={},r={};for(i in e)if(i in t)n[i]=pn(e[i],t[i]);else r[i]=e[i];for(i in t)if(!(i in e))r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}function hn(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function En(e,t){var i,n,r,a=cl.lastIndex=Cl.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(i=cl.exec(e))&&(n=Cl.exec(t));){if((r=n.index)>a)if(r=t.slice(a,r),s[o])s[o]+=r;else s[++o]=r;if((i=i[0])===(n=n[0]))if(s[o])s[o]+=n;else s[++o]=n;else s[++o]=null,l.push({i:o,x:hn(i,n)});a=Cl.lastIndex}if(a<t.length)if(r=t.slice(a),s[o])s[o]+=r;else s[++o]=r;return s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var i,n=0;t>n;++n)s[(i=l[n]).i]=i.x(e);return s.join("")})}function pn(e,t){for(var i,n=so.interpolators.length;--n>=0&&!(i=so.interpolators[n](e,t)););return i}function Fn(e,t){var i,n=[],r=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(i=0;s>i;++i)n.push(pn(e[i],t[i]));for(;a>i;++i)r[i]=e[i];for(;o>i;++i)r[i]=t[i];return function(e){for(i=0;s>i;++i)r[i]=n[i](e);return r}}function mn(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function gn(e){return function(t){return 1-e(1-t)}}function Hn(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Gn(e){return e*e}function In(e){return e*e*e}function vn(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(.5>e?i:3*(e-t)+i-.75)}function yn(e){return function(t){return Math.pow(t,e)}}function Jn(e){return 1-Math.cos(e*ko)}function Ln(e){return Math.pow(2,10*(e-1))}function Mn(e){return 1-Math.sqrt(1-e*e)}function bn(e,t){var i;if(arguments.length<2)t=.45;if(arguments.length)i=t/wo*Math.asin(1/e);else e=1,i=t/4;return function(n){return 1+e*Math.pow(2,-10*n)*Math.sin((n-i)*wo/t)}}function Nn(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Kn(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function xn(e,t){e=so.hcl(e),t=so.hcl(t);var i=e.h,n=e.c,r=e.l,a=t.h-i,o=t.c-n,s=t.l-r;if(isNaN(o))o=0,n=isNaN(n)?t.c:n;if(isNaN(a))a=0,i=isNaN(i)?t.h:i;else if(a>180)a-=360;else if(-180>a)a+=360;return function(e){return Ae(i+a*e,n+o*e,r+s*e)+""}}function Pn(e,t){e=so.hsl(e),t=so.hsl(t);var i=e.h,n=e.s,r=e.l,a=t.h-i,o=t.s-n,s=t.l-r;if(isNaN(o))o=0,n=isNaN(n)?t.s:n;if(isNaN(a))a=0,i=isNaN(i)?t.h:i;else if(a>180)a-=360;else if(-180>a)a+=360;return function(e){return le(i+a*e,n+o*e,r+s*e)+""}}function _n(e,t){e=so.lab(e),t=so.lab(t);var i=e.l,n=e.a,r=e.b,a=t.l-i,o=t.a-n,s=t.b-r;return function(e){return ce(i+a*e,n+o*e,r+s*e)+""}}function On(e,t){return t-=e,function(i){return Math.round(e+t*i)}}function Tn(e){var t=[e.a,e.b],i=[e.c,e.d],n=wn(t),r=Sn(t,i),a=wn(Rn(i,t,-r))||0;if(t[0]*i[1]<i[0]*t[1])t[0]*=-1,t[1]*=-1,n*=-1,r*=-1;this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*Vo,this.translate=[e.e,e.f],this.scale=[n,a],this.skew=a?Math.atan2(r,a)*Vo:0}function Sn(e,t){return e[0]*t[0]+e[1]*t[1]}function wn(e){var t=Math.sqrt(Sn(e,e));if(t)e[0]/=t,e[1]/=t;return t}function Rn(e,t,i){return e[0]+=i*t[0],e[1]+=i*t[1],e}function kn(e){return e.length?e.pop()+",":""}function Qn(e,t,i,n){if(e[0]!==t[0]||e[1]!==t[1]){var r=i.push("translate(",null,",",null,")");n.push({i:r-4,x:hn(e[0],t[0])},{i:r-2,x:hn(e[1],t[1])})}else if(t[0]||t[1])i.push("translate("+t+")")}function Vn(e,t,i,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:i.push(kn(i)+"rotate(",null,")")-2,x:hn(e,t)})}else if(t)i.push(kn(i)+"rotate("+t+")")}function Un(e,t,i,n){if(e!==t)n.push({i:i.push(kn(i)+"skewX(",null,")")-2,x:hn(e,t)});else if(t)i.push(kn(i)+"skewX("+t+")")}function Wn(e,t,i,n){if(e[0]!==t[0]||e[1]!==t[1]){var r=i.push(kn(i)+"scale(",null,",",null,")");n.push({i:r-4,x:hn(e[0],t[0])},{i:r-2,x:hn(e[1],t[1])})}else if(1!==t[0]||1!==t[1])i.push(kn(i)+"scale("+t+")")}function zn(e,t){var i=[],n=[];return e=so.transform(e),t=so.transform(t),Qn(e.translate,t.translate,i,n),Vn(e.rotate,t.rotate,i,n),Un(e.skew,t.skew,i,n),Wn(e.scale,t.scale,i,n),e=t=null,function(e){for(var t,r=-1,a=n.length;++r<a;)i[(t=n[r]).i]=t.x(e);return i.join("")}}function Yn(e,t){return t=(t-=e=+e)||1/t,function(i){return(i-e)/t}}function Xn(e,t){return t=(t-=e=+e)||1/t,function(i){return Math.max(0,Math.min(1,(i-e)/t))}}function jn(e){for(var t=e.source,i=e.target,n=qn(t,i),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;i!==n;)r.splice(a,0,i),i=i.parent;return r}function Zn(e){for(var t=[],i=e.parent;null!=i;)t.push(e),e=i,i=i.parent;return t.push(e),t}function qn(e,t){if(e===t)return e;for(var i=Zn(e),n=Zn(t),r=i.pop(),a=n.pop(),o=null;r===a;)o=r,r=i.pop(),a=n.pop();return o}function $n(e){e.fixed|=2}function er(e){e.fixed&=-7}function tr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ir(e){e.fixed&=-5}function nr(e,t,i){var n=0,r=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)if(a=o[l],null!=a)nr(a,t,i),e.charge+=a.charge,n+=a.charge*a.cx,r+=a.charge*a.cy;else;if(e.point){if(!e.leaf)e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5;var u=t*i[e.point.index];e.charge+=e.pointCharge=u,n+=u*e.point.x,r+=u*e.point.y}e.cx=n/e.charge,e.cy=r/e.charge}function rr(e,t){return so.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Ar,e}function ar(e,t){for(var i=[e];null!=(e=i.pop());)if(t(e),(r=e.children)&&(n=r.length))for(var n,r;--n>=0;)i.push(r[n])}function or(e,t){for(var i=[e],n=[];null!=(e=i.pop());)if(n.push(e),(a=e.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)i.push(a[o]);for(;null!=(e=n.pop());)t(e)}function sr(e){return e.children}function lr(e){return e.value}function ur(e,t){return t.value-e.value}function Ar(e){return so.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Br(e){return e.x}function cr(e){return e.y}function Cr(e,t,i){e.y0=t,e.y=i}function Dr(e){return so.range(e.length)}function dr(e){for(var t=-1,i=e[0].length,n=[];++t<i;)n[t]=0;return n}function fr(e){for(var t,i=1,n=0,r=e[0][1],a=e.length;a>i;++i)if((t=e[i][1])>r)n=i,r=t;return n}function hr(e){return e.reduce(Er,0)}function Er(e,t){return e+t[1]}function pr(e,t){return Fr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Fr(e,t){for(var i=-1,n=+e[0],r=(e[1]-n)/t,a=[];++i<=t;)a[i]=r*i+n;return a}function mr(e){return[so.min(e),so.max(e)]}function gr(e,t){return e.value-t.value}function Hr(e,t){var i=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=i,i._pack_prev=t}function Gr(e,t){e._pack_next=t,t._pack_prev=e}function Ir(e,t){var i=t.x-e.x,n=t.y-e.y,r=e.r+t.r;return.999*r*r>i*i+n*n}function vr(e){function t(e){A=Math.min(e.x-e.r,A),B=Math.max(e.x+e.r,B),c=Math.min(e.y-e.r,c),C=Math.max(e.y+e.r,C)}if((i=e.children)&&(u=i.length)){var i,n,r,a,o,s,l,u,A=1/0,B=-(1/0),c=1/0,C=-(1/0);if(i.forEach(yr),n=i[0],n.x=-n.r,n.y=0,t(n),u>1)if(r=i[1],r.x=r.r,r.y=0,t(r),u>2)for(a=i[2],Mr(n,r,a),t(a),Hr(n,a),n._pack_prev=a,Hr(a,r),r=n._pack_next,o=3;u>o;o++){Mr(n,r,a=i[o]);var D=0,d=1,f=1;for(s=r._pack_next;s!==r;s=s._pack_next,d++)if(Ir(s,a)){D=1;break}if(1==D)for(l=n._pack_prev;l!==s._pack_prev&&!Ir(l,a);l=l._pack_prev,f++);if(D){if(f>d||d==f&&r.r<n.r)Gr(n,r=s);else Gr(n=l,r);o--}else Hr(n,a),r=a,t(a)}var h=(A+B)/2,E=(c+C)/2,p=0;for(o=0;u>o;o++)a=i[o],a.x-=h,a.y-=E,p=Math.max(p,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=p,i.forEach(Jr)}}function yr(e){e._pack_next=e._pack_prev=e}function Jr(e){delete e._pack_next,delete e._pack_prev}function Lr(e,t,i,n){var r=e.children;if(e.x=t+=n*e.x,e.y=i+=n*e.y,e.r*=n,r)for(var a=-1,o=r.length;++a<o;)Lr(r[a],t,i,n)}function Mr(e,t,i){var n=e.r+i.r,r=t.x-e.x,a=t.y-e.y;if(n&&(r||a)){var o=t.r+i.r,s=r*r+a*a;o*=o,n*=n;var l=.5+(n-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);i.x=e.x+l*r+u*a,i.y=e.y+l*a-u*r}else i.x=e.x+n,i.y=e.y}function br(e,t){return e.parent==t.parent?1:2}function Nr(e){var t=e.children;return t.length?t[0]:e.t}function Kr(e){var t,i=e.children;return(t=i.length)?i[t-1]:e.t}function xr(e,t,i){var n=i/(t.i-e.i);t.c-=n,t.s+=i,e.c+=n,t.z+=i,t.m+=i}function Pr(e){for(var t,i=0,n=0,r=e.children,a=r.length;--a>=0;)t=r[a],t.z+=i,t.m+=i,i+=t.s+(n+=t.c)}function _r(e,t,i){return e.a.parent===t.parent?e.a:i}function Or(e){return 1+so.max(e,function(e){return e.y})}function Tr(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Sr(e){var t=e.children;return t&&t.length?Sr(t[0]):e}function wr(e){var t,i=e.children;return i&&(t=i.length)?wr(i[t-1]):e}function Rr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function kr(e,t){var i=e.x+t[3],n=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];if(0>r)i+=r/2,r=0;if(0>a)n+=a/2,a=0;return{x:i,y:n,dx:r,dy:a}}function Qr(e){var t=e[0],i=e[e.length-1];return i>t?[t,i]:[i,t]}function Vr(e){return e.rangeExtent?e.rangeExtent():Qr(e.range())}function Ur(e,t,i,n){var r=i(e[0],e[1]),a=n(t[0],t[1]);return function(e){return a(r(e))}}function Wr(e,t){var i,n=0,r=e.length-1,a=e[n],o=e[r];if(a>o)i=n,n=r,r=i,i=a,a=o,o=i;return e[n]=t.floor(a),e[r]=t.ceil(o),e}function zr(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Gl}function Yr(e,t,i,n){var r=[],a=[],o=0,s=Math.min(e.length,t.length)-1;if(e[s]<e[0])e=e.slice().reverse(),t=t.slice().reverse();for(;++o<=s;)r.push(i(e[o-1],e[o])),a.push(n(t[o-1],t[o]));return function(t){var i=so.bisect(e,t,1,s)-1;return a[i](r[i](t))}}function Xr(e,t,i,n){function r(){var r=Math.min(e.length,t.length)>2?Yr:Ur,l=n?Xn:Yn;return o=r(e,t,l,i),s=r(t,e,l,pn),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){if(!arguments.length)return e;else return e=t.map(Number),r()},a.range=function(e){if(!arguments.length)return t;else return t=e,r()},a.rangeRound=function(e){return a.range(e).interpolate(On)},a.clamp=function(e){if(!arguments.length)return n;else return n=e,r()},a.interpolate=function(e){if(!arguments.length)return i;else return i=e,r()},a.ticks=function(t){return $r(e,t)},a.tickFormat=function(t,i){return ea(e,t,i)},a.nice=function(t){return Zr(e,t),r()},a.copy=function(){return Xr(e,t,i,n)},r()}function jr(e,t){return so.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Zr(e,t){return Wr(e,zr(qr(e,t)[2])),Wr(e,zr(qr(e,t)[2])),e}function qr(e,t){if(null==t)t=10;var i=Qr(e),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),a=t/n*r;if(.15>=a)r*=10;else if(.35>=a)r*=5;else if(.75>=a)r*=2;return i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function $r(e,t){return so.range.apply(so,qr(e,t))}function ea(e,t,i){var n=qr(e,t);if(i){var r=cs.exec(i);if(r.shift(),"s"===r[8]){var a=so.formatPrefix(Math.max(Fo(n[0]),Fo(n[1])));if(!r[7])r[7]="."+ta(a.scale(n[2]));return r[8]="f",i=so.format(r.join("")),function(e){return i(a.scale(e))+a.symbol}}if(!r[7])r[7]="."+ia(r[8],n);i=r.join("")}else i=",."+ta(n[2])+"f";return so.format(i)}function ta(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ia(e,t){var i=ta(t[2]);return e in Il?Math.abs(i-ta(Math.max(Fo(t[0]),Fo(t[1]))))+ +("e"!==e):i-2*("%"===e)}function na(e,t,i,n){function r(e){return(i?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return i?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(r(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){if(!arguments.length)return n;else return i=t[0]>=0,e.domain((n=t.map(Number)).map(r)),o},o.base=function(i){if(!arguments.length)return t;else return t=+i,e.domain(n.map(r)),o},o.nice=function(){var t=Wr(n.map(r),i?Math:yl);return e.domain(t),n=t.map(a),o},o.ticks=function(){var e=Qr(n),o=[],s=e[0],l=e[1],u=Math.floor(r(s)),A=Math.ceil(r(l)),B=t%1?2:t;if(isFinite(A-u)){if(i){for(;A>u;u++)for(var c=1;B>c;c++)o.push(a(u)*c);o.push(a(u))}else for(o.push(a(u));u++<A;)for(var c=B-1;c>0;c--)o.push(a(u)*c);for(u=0;o[u]<s;u++);for(A=o.length;o[A-1]>l;A--);o=o.slice(u,A)}return o},o.tickFormat=function(e,i){if(!arguments.length)return vl;if(arguments.length<2)i=vl;else if("function"!=typeof i)i=so.format(i);var n=Math.max(1,t*e/o.ticks().length);return function(e){var o=e/a(Math.round(r(e)));if(t-.5>o*t)o*=t;return n>=o?i(e):""}},o.copy=function(){return na(e.copy(),t,i,n)},jr(o,e)}function ra(e,t,i){function n(t){return e(r(t))}var r=aa(t),a=aa(1/t);return n.invert=function(t){return a(e.invert(t))},n.domain=function(t){if(!arguments.length)return i;else return e.domain((i=t.map(Number)).map(r)),n},n.ticks=function(e){return $r(i,e)},n.tickFormat=function(e,t){return ea(i,e,t)},n.nice=function(e){return n.domain(Zr(i,e))},n.exponent=function(o){if(!arguments.length)return t;else return r=aa(t=o),a=aa(1/t),e.domain(i.map(r)),n},n.copy=function(){return ra(e.copy(),t,i)},jr(n,e)}function aa(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function oa(e,t){function i(i){return a[((r.get(i)||("range"===t.t?r.set(i,e.push(i)):NaN))-1)%a.length]}function n(t,i){return so.range(e.length).map(function(e){return t+i*e})}var r,a,o;return i.domain=function(n){if(!arguments.length)return e;e=[],r=new u;for(var a,o=-1,s=n.length;++o<s;)if(!r.has(a=n[o]))r.set(a,e.push(a));return i[t.t].apply(i,t.a)},i.range=function(e){if(!arguments.length)return a;else return a=e,o=0,t={t:"range",a:arguments},i},i.rangePoints=function(r,s){if(arguments.length<2)s=0;var l=r[0],u=r[1],A=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return a=n(l+A*s/2,A),o=0,t={t:"rangePoints",a:arguments},i},i.rangeRoundPoints=function(r,s){if(arguments.length<2)s=0;var l=r[0],u=r[1],A=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return a=n(l+Math.round(A*s/2+(u-l-(e.length-1+s)*A)/2),A),o=0,t={t:"rangeRoundPoints",a:arguments},i},i.rangeBands=function(r,s,l){if(arguments.length<2)s=0;if(arguments.length<3)l=s;var u=r[1]<r[0],A=r[u-0],B=r[1-u],c=(B-A)/(e.length-s+2*l);if(a=n(A+c*l,c),u)a.reverse();return o=c*(1-s),t={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(r,s,l){if(arguments.length<2)s=0;if(arguments.length<3)l=s;var u=r[1]<r[0],A=r[u-0],B=r[1-u],c=Math.floor((B-A)/(e.length-s+2*l));if(a=n(A+Math.round((B-A-(e.length-s)*c)/2),c),u)a.reverse();return o=Math.round(c*(1-s)),t={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return o},i.rangeExtent=function(){return Qr(t.a[0])},i.copy=function(){return oa(e,t)},i.domain(e)}function sa(e,t){function a(){var i=0,n=t.length;for(s=[];++i<n;)s[i-1]=so.quantile(e,i/n);return o}function o(e){if(!isNaN(e=+e))return t[so.bisect(s,e)];else return void 0}var s;return o.domain=function(t){if(!arguments.length)return e;else return e=t.map(n).filter(r).sort(i),a()},o.range=function(e){if(!arguments.length)return t;else return t=e,a()},o.quantiles=function(){return s},o.invertExtent=function(i){return i=t.indexOf(i),0>i?[NaN,NaN]:[i>0?s[i-1]:e[0],i<s.length?s[i]:e[e.length-1]]},o.copy=function(){return sa(e,t)},a()}function la(e,t,i){function n(t){return i[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function r(){return a=i.length/(t-e),o=i.length-1,n}var a,o;return n.domain=function(i){if(!arguments.length)return[e,t];else return e=+i[0],t=+i[i.length-1],r()},n.range=function(e){if(!arguments.length)return i;else return i=e,r()},n.invertExtent=function(t){return t=i.indexOf(t),t=0>t?NaN:t/a+e,[t,t+1/a]},n.copy=function(){return la(e,t,i)},r()}function ua(e,t){function i(i){if(i>=i)return t[so.bisect(e,i)];else return void 0}return i.domain=function(t){if(!arguments.length)return e;else return e=t,i},i.range=function(e){if(!arguments.length)return t;else return t=e,i},i.invertExtent=function(i){return i=t.indexOf(i),[e[i-1],e[i]]},i.copy=function(){return ua(e,t)},i}function Aa(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(i){if(!arguments.length)return e;else return e=i.map(t),t},t.ticks=function(t){return $r(e,t)},t.tickFormat=function(t,i){return ea(e,t,i)},t.copy=function(){return Aa(e)},t}function Ba(){return 0}function ca(e){return e.innerRadius}function Ca(e){return e.outerRadius}function Da(e){return e.startAngle}function da(e){return e.endAngle}function fa(e){return e&&e.padAngle}function ha(e,t,i,n){return(e-i)*t-(t-n)*e>0?0:1}function Ea(e,t,i,n,r){var a=e[0]-t[0],o=e[1]-t[1],s=(r?n:-n)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,A=e[0]+l,B=e[1]+u,c=t[0]+l,C=t[1]+u,D=(A+c)/2,d=(B+C)/2,f=c-A,h=C-B,E=f*f+h*h,p=i-n,F=A*C-c*B,m=(0>h?-1:1)*Math.sqrt(Math.max(0,p*p*E-F*F)),g=(F*h-f*m)/E,H=(-F*f-h*m)/E,G=(F*h+f*m)/E,I=(-F*f+h*m)/E,v=g-D,y=H-d,J=G-D,L=I-d;if(v*v+y*y>J*J+L*L)g=G,H=I;return[[g-l,H-u],[g*i/p,H*i/p]]}function pa(e){function t(t){function o(){u.push("M",a(e(A),s))}for(var l,u=[],A=[],B=-1,c=t.length,C=ve(i),D=ve(n);++B<c;)if(r.call(this,l=t[B],B))A.push([+C.call(this,l,B),+D.call(this,l,B)]);else if(A.length)o(),A=[];if(A.length)o();return u.length?u.join(""):null}var i=Ji,n=Li,r=Lt,a=Fa,o=a.key,s=.7;return t.x=function(e){if(!arguments.length)return i;else return i=e,t},t.y=function(e){if(!arguments.length)return n;else return n=e,t},t.defined=function(e){if(!arguments.length)return r;else return r=e,t},t.interpolate=function(e){if(!arguments.length)return o;if("function"==typeof e)o=a=e;else o=(a=Kl.get(e)||Fa).key;return t},t.tension=function(e){if(!arguments.length)return s;else return s=e,t},t}function Fa(e){return e.length>1?e.join("L"):e+"Z"}function ma(e){return e.join("L")+"Z"}function ga(e){for(var t=0,i=e.length,n=e[0],r=[n[0],",",n[1]];++t<i;)r.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(i>1)r.push("H",n[0]);return r.join("")}function Ha(e){for(var t=0,i=e.length,n=e[0],r=[n[0],",",n[1]];++t<i;)r.push("V",(n=e[t])[1],"H",n[0]);return r.join("")}function Ga(e){for(var t=0,i=e.length,n=e[0],r=[n[0],",",n[1]];++t<i;)r.push("H",(n=e[t])[0],"V",n[1]);return r.join("")}function Ia(e,t){return e.length<4?Fa(e):e[1]+Ja(e.slice(1,-1),La(e,t))}function va(e,t){return e.length<3?ma(e):e[0]+Ja((e.push(e[0]),e),La([e[e.length-2]].concat(e,[e[1]]),t))}function ya(e,t){return e.length<3?Fa(e):e[0]+Ja(e,La(e,t))}function Ja(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Fa(e);var i=e.length!=t.length,n="",r=e[0],a=e[1],o=t[0],s=o,l=1;if(i)n+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=e[1],l=2;if(t.length>1){s=t[1],a=e[l],l++,n+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],s=t[u],n+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(i){var A=e[l];n+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+A[0]+","+A[1]}return n}function La(e,t){for(var i,n=[],r=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)i=a,a=o,o=e[s],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function Ma(e){if(e.length<3)return Fa(e);var t=1,i=e.length,n=e[0],r=n[0],a=n[1],o=[r,r,r,(n=e[1])[0]],s=[a,a,a,n[1]],l=[r,",",a,"L",xa(_l,o),",",xa(_l,s)];for(e.push(e[i-1]);++t<=i;)n=e[t],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Pa(l,o,s);return e.pop(),l.push("L",n),l.join("")}function ba(e){if(e.length<4)return Fa(e);for(var t,i=[],n=-1,r=e.length,a=[0],o=[0];++n<3;)t=e[n],a.push(t[0]),
o.push(t[1]);for(i.push(xa(_l,a)+","+xa(_l,o)),--n;++n<r;)t=e[n],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Pa(i,a,o);return i.join("")}function Na(e){for(var t,i,n=-1,r=e.length,a=r+4,o=[],s=[];++n<4;)i=e[n%r],o.push(i[0]),s.push(i[1]);for(t=[xa(_l,o),",",xa(_l,s)],--n;++n<a;)i=e[n%r],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Pa(t,o,s);return t.join("")}function Ka(e,t){var i=e.length-1;if(i)for(var n,r,a=e[0][0],o=e[0][1],s=e[i][0]-a,l=e[i][1]-o,u=-1;++u<=i;)n=e[u],r=u/i,n[0]=t*n[0]+(1-t)*(a+r*s),n[1]=t*n[1]+(1-t)*(o+r*l);return Ma(e)}function xa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Pa(e,t,i){e.push("C",xa(xl,t),",",xa(xl,i),",",xa(Pl,t),",",xa(Pl,i),",",xa(_l,t),",",xa(_l,i))}function _a(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Oa(e){for(var t=0,i=e.length-1,n=[],r=e[0],a=e[1],o=n[0]=_a(r,a);++t<i;)n[t]=(o+(o=_a(r=a,a=e[t+1])))/2;return n[t]=o,n}function Ta(e){for(var t,i,n,r,a=[],o=Oa(e),s=-1,l=e.length-1;++s<l;)if(t=_a(e[s],e[s+1]),Fo(t)<Oo)o[s]=o[s+1]=0;else if(i=o[s]/t,n=o[s+1]/t,r=i*i+n*n,r>9)r=3*t/Math.sqrt(r),o[s]=r*i,o[s+1]=r*n;for(s=-1;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Sa(e){return e.length<3?Fa(e):e[0]+Ja(e,Ta(e))}function wa(e){for(var t,i,n,r=-1,a=e.length;++r<a;)t=e[r],i=t[0],n=t[1]-ko,t[0]=i*Math.cos(n),t[1]=i*Math.sin(n);return e}function Ra(e){function t(t){function l(){d.push("M",s(e(h),B),A,u(e(f.reverse()),B),"Z")}for(var c,C,D,d=[],f=[],h=[],E=-1,p=t.length,F=ve(i),m=ve(r),g=i===n?function(){return C}:ve(n),H=r===a?function(){return D}:ve(a);++E<p;)if(o.call(this,c=t[E],E))f.push([C=+F.call(this,c,E),D=+m.call(this,c,E)]),h.push([+g.call(this,c,E),+H.call(this,c,E)]);else if(f.length)l(),f=[],h=[];if(f.length)l();return d.length?d.join(""):null}var i=Ji,n=Ji,r=0,a=Li,o=Lt,s=Fa,l=s.key,u=s,A="L",B=.7;return t.x=function(e){if(!arguments.length)return n;else return i=n=e,t},t.x0=function(e){if(!arguments.length)return i;else return i=e,t},t.x1=function(e){if(!arguments.length)return n;else return n=e,t},t.y=function(e){if(!arguments.length)return a;else return r=a=e,t},t.y0=function(e){if(!arguments.length)return r;else return r=e,t},t.y1=function(e){if(!arguments.length)return a;else return a=e,t},t.defined=function(e){if(!arguments.length)return o;else return o=e,t},t.interpolate=function(e){if(!arguments.length)return l;if("function"==typeof e)l=s=e;else l=(s=Kl.get(e)||Fa).key;return u=s.reverse||s,A=s.closed?"M":"L",t},t.tension=function(e){if(!arguments.length)return B;else return B=e,t},t}function ka(e){return e.radius}function Qa(e){return[e.x,e.y]}function Va(e){return function(){var t=e.apply(this,arguments),i=t[0],n=t[1]-ko;return[i*Math.cos(n),i*Math.sin(n)]}}function Ua(){return 64}function Wa(){return"circle"}function za(e){var t=Math.sqrt(e/So);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ya(e){return function(){var t,i,n;if((t=this[e])&&(n=t[i=t.active])){if(n.timer.c=null,n.timer.t=NaN,--t.count)delete t[i];else delete this[e];t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index)}}}function Xa(e,t,i){return Io(e,Ql),e.namespace=t,e.id=i,e}function ja(e,t,i,n){var r=e.id,a=e.namespace;return Q(e,"function"==typeof i?function(e,o,s){e[a][r].tween.set(t,n(i.call(e,e.__data__,o,s)))}:(i=n(i),function(e){e[a][r].tween.set(t,i)}))}function Za(e){if(null==e)e="";return function(){this.textContent=e}}function qa(e){return null==e?"__transition__":"__transition_"+e+"__"}function $a(e,t,i,n,r){function a(e){var t=d.delay;if(A.t=t+l,e>=t)return o(e-t);else return void(A.c=o)}function o(i){var r=D.active,a=D[r];if(a)a.timer.c=null,a.timer.t=NaN,--D.count,delete D[r],a.event&&a.event.interrupt.call(e,e.__data__,a.index);for(var o in D)if(n>+o){var u=D[o];u.timer.c=null,u.timer.t=NaN,--D.count,delete D[o]}A.c=s,be(function(){if(A.c&&s(i||1))A.c=null,A.t=NaN;return 1},0,l),D.active=n,d.event&&d.event.start.call(e,e.__data__,t),C=[],d.tween.forEach(function(i,n){if(n=n.call(e,e.__data__,t))C.push(n)}),c=d.ease,B=d.duration}function s(r){for(var a=r/B,o=c(a),s=C.length;s>0;)C[--s].call(e,o);if(a>=1){if(d.event&&d.event.end.call(e,e.__data__,t),--D.count)delete D[n];else delete e[i];return 1}}var l,A,B,c,C,D=e[i]||(e[i]={active:0,count:0}),d=D[n];if(!d)l=r.time,A=be(a,0,l),d=D[n]={tween:new u,time:l,timer:A,delay:r.delay,duration:r.duration,ease:r.ease,index:t},r=null,++D.count}function eo(e,t,i){e.attr("transform",function(e){var n=t(e);return"translate("+(isFinite(n)?n:i(e))+",0)"})}function to(e,t,i){e.attr("transform",function(e){var n=t(e);return"translate(0,"+(isFinite(n)?n:i(e))+")"})}function io(e){return e.toISOString()}function no(e,t,i){function n(t){return e(t)}function r(e,i){var n=e[1]-e[0],r=n/i,a=so.bisect(ql,r);return a==ql.length?[t.year,qr(e.map(function(e){return e/31536e6}),i)[2]]:!a?[tu,qr(e,i)[2]]:t[r/ql[a-1]<ql[a]/r?a-1:a]}return n.invert=function(t){return ro(e.invert(t))},n.domain=function(t){if(!arguments.length)return e.domain().map(ro);else return e.domain(t),n},n.nice=function(e,t){function i(i){return!isNaN(i)&&!e.range(i,ro(+i+1),t).length}var a=n.domain(),o=Qr(a),s=null==e?r(o,10):"number"==typeof e&&r(o,e);if(s)e=s[0],t=s[1];return n.domain(Wr(a,t>1?{floor:function(t){for(;i(t=e.floor(t));)t=ro(t-1);return t},ceil:function(t){for(;i(t=e.ceil(t));)t=ro(+t+1);return t}}:e))},n.ticks=function(e,t){var i=Qr(n.domain()),a=null==e?r(i,10):"number"==typeof e?r(i,e):!e.range&&[{range:e},t];if(a)e=a[0],t=a[1];return e.range(i[0],ro(+i[1]+1),1>t?1:t)},n.tickFormat=function(){return i},n.copy=function(){return no(e.copy(),t,i)},jr(n,e)}function ro(e){return new Date(e)}function ao(e){return JSON.parse(e.responseText)}function oo(e){var t=Ao.createRange();return t.selectNode(Ao.body),t.createContextualFragment(e.responseText)}var so={version:"3.5.17"},lo=[].slice,uo=function(e){return lo.call(e)},Ao=this.document;if(Ao)try{uo(Ao.documentElement.childNodes)[0].nodeType}catch(Bo){uo=function(e){for(var t=e.length,i=new Array(t);t--;)i[t]=e[t];return i}}if(!Date.now)Date.now=function(){return+new Date};if(Ao)try{Ao.createElement("DIV").style.setProperty("opacity",0,"")}catch(co){var Co=this.Element.prototype,Do=Co.setAttribute,fo=Co.setAttributeNS,ho=this.CSSStyleDeclaration.prototype,Eo=ho.setProperty;Co.setAttribute=function(e,t){Do.call(this,e,t+"")},Co.setAttributeNS=function(e,t,i){fo.call(this,e,t,i+"")},ho.setProperty=function(e,t,i){Eo.call(this,e,t+"",i)}}so.ascending=i,so.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},so.min=function(e,t){var i,n,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=e[r])&&n>=n){i=n;break}for(;++r<a;)if(null!=(n=e[r])&&i>n)i=n}else{for(;++r<a;)if(null!=(n=t.call(e,e[r],r))&&n>=n){i=n;break}for(;++r<a;)if(null!=(n=t.call(e,e[r],r))&&i>n)i=n}return i},so.max=function(e,t){var i,n,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=e[r])&&n>=n){i=n;break}for(;++r<a;)if(null!=(n=e[r])&&n>i)i=n}else{for(;++r<a;)if(null!=(n=t.call(e,e[r],r))&&n>=n){i=n;break}for(;++r<a;)if(null!=(n=t.call(e,e[r],r))&&n>i)i=n}return i},so.extent=function(e,t){var i,n,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(n=e[a])&&n>=n){i=r=n;break}for(;++a<o;)if(null!=(n=e[a])){if(i>n)i=n;if(n>r)r=n}}else{for(;++a<o;)if(null!=(n=t.call(e,e[a],a))&&n>=n){i=r=n;break}for(;++a<o;)if(null!=(n=t.call(e,e[a],a))){if(i>n)i=n;if(n>r)r=n}}return[i,r]},so.sum=function(e,t){var i,n=0,a=e.length,o=-1;if(1===arguments.length){for(;++o<a;)if(r(i=+e[o]))n+=i}else for(;++o<a;)if(r(i=+t.call(e,e[o],o)))n+=i;return n},so.mean=function(e,t){var i,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)if(r(i=n(e[s])))a+=i;else--l;else for(;++s<o;)if(r(i=n(t.call(e,e[s],s))))a+=i;else--l;if(l)return a/l;else return void 0},so.quantile=function(e,t){var i=(e.length-1)*t+1,n=Math.floor(i),r=+e[n-1],a=i-n;return a?r+a*(e[n]-r):r},so.median=function(e,t){var a,o=[],s=e.length,l=-1;if(1===arguments.length){for(;++l<s;)if(r(a=n(e[l])))o.push(a)}else for(;++l<s;)if(r(a=n(t.call(e,e[l],l))))o.push(a);if(o.length)return so.quantile(o.sort(i),.5);else return void 0},so.variance=function(e,t){var i,a,o=e.length,s=0,l=0,u=-1,A=0;if(1===arguments.length){for(;++u<o;)if(r(i=n(e[u])))a=i-s,s+=a/++A,l+=a*(i-s)}else for(;++u<o;)if(r(i=n(t.call(e,e[u],u))))a=i-s,s+=a/++A,l+=a*(i-s);if(A>1)return l/(A-1);else return void 0},so.deviation=function(){var e=so.variance.apply(this,arguments);return e?Math.sqrt(e):e};var po=a(i);so.bisectLeft=po.left,so.bisect=so.bisectRight=po.right,so.bisector=function(e){return a(1===e.length?function(t,n){return i(e(t),n)}:e)},so.shuffle=function(e,t,i){if((a=arguments.length)<3)if(i=e.length,2>a)t=0;for(var n,r,a=i-t;a;)r=Math.random()*a--|0,n=e[a+t],e[a+t]=e[r+t],e[r+t]=n;return e},so.permute=function(e,t){for(var i=t.length,n=new Array(i);i--;)n[i]=e[t[i]];return n},so.pairs=function(e){for(var t,i=0,n=e.length-1,r=e[0],a=new Array(0>n?0:n);n>i;)a[i]=[t=r,r=e[++i]];return a},so.transpose=function(e){if(!(r=e.length))return[];for(var t=-1,i=so.min(e,o),n=new Array(i);++t<i;)for(var r,a=-1,s=n[t]=new Array(r);++a<r;)s[a]=e[a][t];return n},so.zip=function(){return so.transpose(arguments)},so.keys=function(e){var t=[];for(var i in e)t.push(i);return t},so.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},so.entries=function(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t},so.merge=function(e){for(var t,i,n,r=e.length,a=-1,o=0;++a<r;)o+=e[a].length;for(i=new Array(o);--r>=0;)for(n=e[r],t=n.length;--t>=0;)i[--o]=n[t];return i};var Fo=Math.abs;so.range=function(e,t,i){if(arguments.length<3)if(i=1,arguments.length<2)t=e,e=0;if((t-e)/i===1/0)throw new Error("infinite range");var n,r=[],a=s(Fo(i)),o=-1;if(e*=a,t*=a,i*=a,0>i)for(;(n=e+i*++o)>t;)r.push(n/a);else for(;(n=e+i*++o)<t;)r.push(n/a);return r},so.map=function(e,t){var i=new u;if(e instanceof u)e.forEach(function(e,t){i.set(e,t)});else if(Array.isArray(e)){var n,r=-1,a=e.length;if(1===arguments.length)for(;++r<a;)i.set(r,e[r]);else for(;++r<a;)i.set(t.call(e,n=e[r],r),n)}else for(var o in e)i.set(o,e[o]);return i};var mo="__proto__",go="\x00";l(u,{has:c,get:function(e){return this._[A(e)]},set:function(e,t){return this._[A(e)]=t},remove:C,keys:D,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:B(t),value:this._[t]});return e},size:d,empty:f,forEach:function(e){for(var t in this._)e.call(this,B(t),this._[t])}}),so.nest=function(){function e(t,o,s){if(s>=a.length)return n?n.call(r,o):i?o.sort(i):o;for(var l,A,B,c,C=-1,D=o.length,d=a[s++],f=new u;++C<D;)if(c=f.get(l=d(A=o[C])))c.push(A);else f.set(l,[A]);if(t)A=t(),B=function(i,n){A.set(i,e(t,n,s))};else A={},B=function(i,n){A[i]=e(t,n,s)};return f.forEach(B),A}function t(e,i){if(i>=a.length)return e;var n=[],r=o[i++];return e.forEach(function(e,r){n.push({key:e,values:t(r,i)})}),r?n.sort(function(e,t){return r(e.key,t.key)}):n}var i,n,r={},a=[],o=[];return r.map=function(t,i){return e(i,t,0)},r.entries=function(i){return t(e(so.map,i,0),0)},r.key=function(e){return a.push(e),r},r.sortKeys=function(e){return o[a.length-1]=e,r},r.sortValues=function(e){return i=e,r},r.rollup=function(e){return n=e,r},r},so.set=function(e){var t=new h;if(e)for(var i=0,n=e.length;n>i;++i)t.add(e[i]);return t},l(h,{has:c,add:function(e){return this._[A(e+="")]=!0,e},remove:C,values:D,size:d,empty:f,forEach:function(e){for(var t in this._)e.call(this,B(t))}}),so.behavior={},so.rebind=function(e,t){for(var i,n=1,r=arguments.length;++n<r;)e[i=arguments[n]]=p(e,t,t[i]);return e};var Ho=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var e=new g,t=-1,i=arguments.length;++t<i;)e[arguments[t]]=H(e);return e},g.prototype.on=function(e,t){var i=e.indexOf("."),n="";if(i>=0)n=e.slice(i+1),e=e.slice(0,i);if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(2===arguments.length){if(null==t)for(e in this)if(this.hasOwnProperty(e))this[e].on(n,null);return this}},so.event=null,so.requote=function(e){return e.replace(Go,"\\$&")};var Go=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Io={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)e[i]=t[i]},vo=function(e,t){return t.querySelector(e)},yo=function(e,t){return t.querySelectorAll(e)},Jo=function(e,t){var i=e.matches||e[F(e,"matchesSelector")];return(Jo=function(e,t){return i.call(e,t)})(e,t)};if("function"==typeof Sizzle)vo=function(e,t){return Sizzle(e,t)[0]||null},yo=Sizzle,Jo=Sizzle.matchesSelector;so.selection=function(){return so.select(Ao.documentElement)};var Lo=so.selection.prototype=[];Lo.select=function(e){var t,i,n,r,a=[];e=J(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var l=-1,u=n.length;++l<u;)if(r=n[l]){if(t.push(i=e.call(r,r.__data__,l,o)),i&&"__data__"in r)i.__data__=r.__data__}else t.push(null)}return y(a)},Lo.selectAll=function(e){var t,i,n=[];e=L(e);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)if(i=o[s])n.push(t=uo(e.call(i,i.__data__,s,r))),t.parentNode=i;return y(n)};var Mo="http://www.w3.org/1999/xhtml",bo={svg:"http://www.w3.org/2000/svg",xhtml:Mo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:bo,qualify:function(e){var t=e.indexOf(":"),i=e;if(t>=0&&"xmlns"!==(i=e.slice(0,t)))e=e.slice(t+1);return bo.hasOwnProperty(i)?{space:bo[i],local:e}:e}},Lo.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var i=this.node();return e=so.ns.qualify(e),e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}for(t in e)this.each(M(t,e[t]));return this}return this.each(M(e,t))},Lo.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var i=this.node(),n=(e=K(e)).length,r=-1;if(t=i.classList){for(;++r<n;)if(!t.contains(e[r]))return!1}else for(t=i.getAttribute("class");++r<n;)if(!N(e[r]).test(t))return!1;return!0}for(t in e)this.each(x(t,e[t]));return this}return this.each(x(e,t))},Lo.style=function(e,i,n){var r=arguments.length;if(3>r){if("string"!=typeof e){if(2>r)i="";for(n in e)this.each(_(n,e[n],i));return this}if(2>r){var a=this.node();return t(a).getComputedStyle(a,null).getPropertyValue(e)}n=""}return this.each(_(e,i,n))},Lo.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(O(t,e[t]));return this}return this.each(O(e,t))},Lo.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Lo.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Lo.append=function(e){return e=T(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Lo.insert=function(e,t){return e=T(e),t=J(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Lo.remove=function(){return this.each(S)},Lo.data=function(e,t){function i(e,i){var n,r,a,o=e.length,B=i.length,c=Math.min(o,B),C=new Array(B),D=new Array(B),d=new Array(o);if(t){var f,h=new u,E=new Array(o);for(n=-1;++n<o;)if(r=e[n]){if(h.has(f=t.call(r,r.__data__,n)))d[n]=r;else h.set(f,r);E[n]=f}for(n=-1;++n<B;){if(!(r=h.get(f=t.call(i,a=i[n],n))))D[n]=w(a);else if(r!==!0)C[n]=r,r.__data__=a;h.set(f,!0)}for(n=-1;++n<o;)if(n in E&&h.get(E[n])!==!0)d[n]=e[n]}else{for(n=-1;++n<c;)if(r=e[n],a=i[n],r)r.__data__=a,C[n]=r;else D[n]=w(a);for(;B>n;++n)D[n]=w(i[n]);for(;o>n;++n)d[n]=e[n]}D.update=C,D.parentNode=C.parentNode=d.parentNode=e.parentNode,s.push(D),l.push(C),A.push(d)}var n,r,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(n=this[0]).length);++a<o;)if(r=n[a])e[a]=r.__data__;return e}var s=V([]),l=y([]),A=y([]);if("function"==typeof e)for(;++a<o;)i(n=this[a],e.call(n,n.parentNode.__data__,a));else for(;++a<o;)i(n=this[a],e);return l.enter=function(){return s},l.exit=function(){return A},l},Lo.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Lo.filter=function(e){var t,i,n,r=[];if("function"!=typeof e)e=R(e);for(var a=0,o=this.length;o>a;a++){r.push(t=[]),t.parentNode=(i=this[a]).parentNode;for(var s=0,l=i.length;l>s;s++)if((n=i[s])&&e.call(n,n.__data__,s,a))t.push(n)}return y(r)},Lo.order=function(){for(var e=-1,t=this.length;++e<t;)for(var i,n=this[e],r=n.length-1,a=n[r];--r>=0;)if(i=n[r]){if(a&&a!==i.nextSibling)a.parentNode.insertBefore(i,a);a=i}return this},Lo.sort=function(e){e=k.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(e);return this.order()},Lo.each=function(e){return Q(this,function(t,i,n){e.call(t,t.__data__,i,n)})},Lo.call=function(e){var t=uo(arguments);return e.apply(t[0]=this,t),this},Lo.empty=function(){return!this.node()},Lo.node=function(){for(var e=0,t=this.length;t>e;e++)for(var i=this[e],n=0,r=i.length;r>n;n++){var a=i[n];if(a)return a}return null},Lo.size=function(){var e=0;return Q(this,function(){++e}),e};var No=[];so.selection.enter=V,so.selection.enter.prototype=No,No.append=Lo.append,No.empty=Lo.empty,No.node=Lo.node,No.call=Lo.call,No.size=Lo.size,No.select=function(e){for(var t,i,n,r,a,o=[],s=-1,l=this.length;++s<l;){n=(r=this[s]).update,o.push(t=[]),t.parentNode=r.parentNode;for(var u=-1,A=r.length;++u<A;)if(a=r[u])t.push(n[u]=i=e.call(r.parentNode,a.__data__,u,s)),i.__data__=a.__data__;else t.push(null)}return y(o)},No.insert=function(e,t){if(arguments.length<2)t=U(this);return Lo.insert.call(this,e,t)},so.select=function(t){var i;if("string"==typeof t)i=[vo(t,Ao)],i.parentNode=Ao.documentElement;else i=[t],i.parentNode=e(t);return y([i])},so.selectAll=function(e){var t;if("string"==typeof e)t=uo(yo(e,Ao)),t.parentNode=Ao.documentElement;else t=uo(e),t.parentNode=null;return y([t])},Lo.on=function(e,t,i){var n=arguments.length;if(3>n){if("string"!=typeof e){if(2>n)t=!1;for(i in e)this.each(W(i,e[i],t));return this}if(2>n)return(n=this.node()["__on"+e])&&n._;i=!1}return this.each(W(e,t,i))};var Ko=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(Ao)Ko.forEach(function(e){if("on"+e in Ao)Ko.remove(e)});var xo,Po=0;so.mouse=function(e){return j(e,I())};var _o=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(e,t,i){if(arguments.length<3)i=t,t=I().changedTouches;if(t)for(var n,r=0,a=t.length;a>r;++r)if((n=t[r]).identifier===i)return j(e,n)},so.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function i(e,t,i,a,o){return function(){function s(){var e,i,n=t(c,d);if(n)e=n[0]-p[0],i=n[1]-p[1],D|=e|i,p=n,C({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:i})}function l(){if(t(c,d))h.on(a+f,null).on(o+f,null),E(D),C({type:"dragend"})}var u,A=this,B=so.event.target.correspondingElement||so.event.target,c=A.parentNode,C=n.of(A,arguments),D=0,d=e(),f=".drag"+(null==d?"":"-"+d),h=so.select(i(B)).on(a+f,s).on(o+f,l),E=X(B),p=t(c,d);if(r)u=r.apply(A,arguments),u=[u.x-p[0],u.y-p[1]];else u=[0,0];C({type:"dragstart"})}}var n=v(e,"drag","dragstart","dragend"),r=null,a=i(m,so.mouse,t,"mousemove","mouseup"),o=i(Z,so.touch,E,"touchmove","touchend");return e.origin=function(t){if(!arguments.length)return r;else return r=t,e},so.rebind(e,n,"on")},so.touches=function(e,t){if(arguments.length<2)t=I().touches;return t?uo(t).map(function(t){var i=j(e,t);return i.identifier=t.identifier,i}):[]};var Oo=1e-6,To=Oo*Oo,So=Math.PI,wo=2*So,Ro=wo-Oo,ko=So/2,Qo=So/180,Vo=180/So,Uo=Math.SQRT2,Wo=2,zo=4;so.interpolateZoom=function(e,t){var i,n,r=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],A=s-r,B=l-a,c=A*A+B*B;if(To>c)n=Math.log(u/o)/Uo,i=function(e){return[r+e*A,a+e*B,o*Math.exp(Uo*e*n)]};else{var C=Math.sqrt(c),D=(u*u-o*o+zo*c)/(2*o*Wo*C),d=(u*u-o*o-zo*c)/(2*u*Wo*C),f=Math.log(Math.sqrt(D*D+1)-D),h=Math.log(Math.sqrt(d*d+1)-d);n=(h-f)/Uo,i=function(e){var t=e*n,i=ne(f),s=o/(Wo*C)*(i*re(Uo*t+f)-ie(f));return[r+s*A,a+s*B,o*i/ne(Uo*t+f)]}}return i.duration=1e3*n,i},so.behavior.zoom=function(){function e(e){e.on(b,B).on(Xo+".zoom",C).on("dblclick.zoom",D).on(x,c)}function i(e){return[(e[0]-I.x)/I.k,(e[1]-I.y)/I.k]}function n(e){return[e[0]*I.k+I.x,e[1]*I.k+I.y]}function r(e){I.k=Math.max(J[0],Math.min(J[1],e))}function a(e,t){t=n(t),I.x+=e[0]-t[0],I.y+=e[1]-t[1]}function o(t,i,n,o){if(t.__chart__={x:I.x,y:I.y,k:I.k},r(Math.pow(2,o)),a(f=i,n),t=so.select(t),L>0)t=t.transition().duration(L);t.call(e.event)}function s(){if(m)m.domain(F.range().map(function(e){return(e-I.x)/I.k}).map(F.invert));if(H)H.domain(g.range().map(function(e){return(e-I.y)/I.k}).map(g.invert))}function l(e){if(!M++)e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:I.k,translate:[I.x,I.y]})}function A(e){if(!--M)e({type:"zoomend"}),f=null}function B(){function e(){s=1,a(so.mouse(r),c),u(o)}function n(){B.on(N,null).on(K,null),C(s),A(o)}var r=this,o=P.of(r,arguments),s=0,B=so.select(t(r)).on(N,e).on(K,n),c=i(so.mouse(r)),C=X(r);kl.call(r),l(o)}function c(){function e(){var e=so.touches(D);return C=I.k,e.forEach(function(e){if(e.identifier in f)f[e.identifier]=i(e)}),e}function t(){var t=so.event.target;so.select(t).on(F,n).on(m,s),g.push(t);for(var i=so.event.changedTouches,r=0,a=i.length;a>r;++r)f[i[r].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(500>u-p){var A=l[0];o(D,A,f[A.identifier],Math.floor(Math.log(I.k)/Math.LN2)+1),G()}p=u}else if(l.length>1){var A=l[0],B=l[1],c=A[0]-B[0],C=A[1]-B[1];h=c*c+C*C}}function n(){var e,t,i,n,o=so.touches(D);kl.call(D);for(var s=0,l=o.length;l>s;++s,n=null)if(i=o[s],n=f[i.identifier]){if(t)break;e=i,t=n}if(n){var A=(A=i[0]-e[0])*A+(A=i[1]-e[1])*A,B=h&&Math.sqrt(A/h);e=[(e[0]+i[0])/2,(e[1]+i[1])/2],t=[(t[0]+n[0])/2,(t[1]+n[1])/2],r(B*C)}p=null,a(e,t),u(d)}function s(){if(so.event.touches.length){for(var t=so.event.changedTouches,i=0,n=t.length;n>i;++i)delete f[t[i].identifier];for(var r in f)return void e()}so.selectAll(g).on(E,null),H.on(b,B).on(x,c),v(),A(d)}var C,D=this,d=P.of(D,arguments),f={},h=0,E=".zoom-"+so.event.changedTouches[0].identifier,F="touchmove"+E,m="touchend"+E,g=[],H=so.select(D),v=X(D);t(),l(d),H.on(b,null).on(x,t)}function C(){var e=P.of(this,arguments);if(E)clearTimeout(E);else kl.call(this),d=i(f=h||so.mouse(this)),l(e);E=setTimeout(function(){E=null,A(e)},50),G(),r(Math.pow(2,.002*Yo())*I.k),a(f,d),u(e)}function D(){var e=so.mouse(this),t=Math.log(I.k)/Math.LN2;o(this,e,i(e),so.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var d,f,h,E,p,F,m,g,H,I={x:0,y:0,k:1},y=[960,500],J=jo,L=250,M=0,b="mousedown.zoom",N="mousemove.zoom",K="mouseup.zoom",x="touchstart.zoom",P=v(e,"zoomstart","zoom","zoomend");if(!Xo)Xo="onwheel"in Ao?(Yo=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ao?(Yo=function(){return so.event.wheelDelta},"mousewheel"):(Yo=function(){return-so.event.detail},"MozMousePixelScroll");return e.event=function(e){e.each(function(){var e=P.of(this,arguments),t=I;if(wl)so.select(this).transition().each("start.zoom",function(){I=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var i=y[0],n=y[1],r=f?f[0]:i/2,a=f?f[1]:n/2,o=so.interpolateZoom([(r-I.x)/I.k,(a-I.y)/I.k,i/I.k],[(r-t.x)/t.k,(a-t.y)/t.k,i/t.k]);return function(t){var n=o(t),s=i/n[2];this.__chart__=I={x:r-n[0]*s,y:a-n[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){A(e)}).each("end.zoom",function(){A(e)});else this.__chart__=I,l(e),u(e),A(e)})},e.translate=function(t){if(!arguments.length)return[I.x,I.y];else return I={x:+t[0],y:+t[1],k:I.k},s(),e},e.scale=function(t){if(!arguments.length)return I.k;else return I={x:I.x,y:I.y,k:null},r(+t),s(),e},e.scaleExtent=function(t){if(!arguments.length)return J;else return J=null==t?jo:[+t[0],+t[1]],e},e.center=function(t){if(!arguments.length)return h;else return h=t&&[+t[0],+t[1]],e},e.size=function(t){if(!arguments.length)return y;else return y=t&&[+t[0],+t[1]],e},e.duration=function(t){if(!arguments.length)return L;else return L=+t,e},e.x=function(t){if(!arguments.length)return m;else return m=t,F=t.copy(),I={x:0,y:0,k:1},e},e.y=function(t){if(!arguments.length)return H;else return H=t,g=t.copy(),I={x:0,y:0,k:1},e},so.rebind(e,P,"on")};var Yo,Xo,jo=[0,1/0];so.color=oe,oe.prototype.toString=function(){return this.rgb()+""},so.hsl=se;var Zo=se.prototype=new oe;Zo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Zo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Zo.rgb=function(){return le(this.h,this.s,this.l)},so.hcl=ue;var qo=ue.prototype=new oe;qo.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+$o*(arguments.length?e:1)))},qo.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-$o*(arguments.length?e:1)))},qo.rgb=function(){return Ae(this.h,this.c,this.l).rgb()},so.lab=Be;var $o=18,es=.95047,ts=1,is=1.08883,ns=Be.prototype=new oe;ns.brighter=function(e){return new Be(Math.min(100,this.l+$o*(arguments.length?e:1)),this.a,this.b)},ns.darker=function(e){return new Be(Math.max(0,this.l-$o*(arguments.length?e:1)),this.a,this.b)},ns.rgb=function(){return ce(this.l,this.a,this.b)},so.rgb=he;var rs=he.prototype=new oe;rs.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,i=this.g,n=this.b,r=30;if(!t&&!i&&!n)return new he(r,r,r);if(t&&r>t)t=r;if(i&&r>i)i=r;if(n&&r>n)n=r;return new he(Math.min(255,t/e),Math.min(255,i/e),Math.min(255,n/e))},rs.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new he(e*this.r,e*this.g,e*this.b)},rs.hsl=function(){return ge(this.r,this.g,this.b)},rs.toString=function(){return"#"+Fe(this.r)+Fe(this.g)+Fe(this.b)};var as=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});as.forEach(function(e,t){as.set(e,Ee(t))}),so.functor=ve,so.xhr=ye(E),so.dsv=function(e,t){function i(e,i,a){if(arguments.length<3)a=i,i=null;var o=Je(e,t,null==i?n:r(i),a);return o.row=function(e){return arguments.length?o.response(null==(i=e)?n:r(e)):i},o}function n(e){return i.parse(e.responseText)}function r(e){return function(t){return i.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return i.parse=function(e,t){var n;return i.parseRows(e,function(e,i){if(n)return n(e,i-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,i){return t(r(e),i)}:r})},i.parseRows=function(e,t){function i(){if(A>=u)return o;if(r)return r=!1,a;var t=A;if(34===e.charCodeAt(t)){for(var i=t;i++<u;)if(34===e.charCodeAt(i)){if(34!==e.charCodeAt(i+1))break;++i}A=i+2;var n=e.charCodeAt(i+1);if(13===n){if(r=!0,10===e.charCodeAt(i+2))++A}else if(10===n)r=!0;return e.slice(t+1,i).replace(/""/g,'"')}for(;u>A;){var n=e.charCodeAt(A++),s=1;if(10===n)r=!0;else if(13===n){if(r=!0,10===e.charCodeAt(A))++A,++s}else if(n!==l)continue;return e.slice(t,A-s)}return e.slice(t)}for(var n,r,a={},o={},s=[],u=e.length,A=0,B=0;(n=i())!==o;){for(var c=[];n!==a&&n!==o;)c.push(n),n=i();if(!t||null!=(c=t(c,B++)))s.push(c);else;}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new h,r=[];return t.forEach(function(e){for(var t in e)if(!n.has(t))r.push(n.add(t))}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(a).join("\n")},i},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("	","text/tab-separated-values");var os,ss,ls,us,As=this[F(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};so.timer=function(){be.apply(this,arguments)},so.timer.flush=function(){Ke(),xe()},so.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Bs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(_e);so.formatPrefix=function(e,t){var i=0;if(e=+e){if(0>e)e*=-1;if(t)e=so.round(e,Pe(e,t));i=1+Math.floor(1e-12+Math.log(e)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))}return Bs[8+i/3]};var cs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Cs=so.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=so.round(e,Pe(e,t))).toFixed(Math.max(0,Math.min(20,Pe(e*(1+1e-15),t))))}}),Ds=so.time={},ds=Date;Se.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0;
},valueOf:function(){return this._.valueOf()},setDate:function(){fs.setUTCDate.apply(this._,arguments)},setDay:function(){fs.setUTCDay.apply(this._,arguments)},setFullYear:function(){fs.setUTCFullYear.apply(this._,arguments)},setHours:function(){fs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fs.setUTCSeconds.apply(this._,arguments)},setTime:function(){fs.setTime.apply(this._,arguments)}};var fs=Date.prototype;Ds.year=we(function(e){return e=Ds.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Ds.years=Ds.year.range,Ds.years.utc=Ds.year.utc.range,Ds.day=we(function(e){var t=new ds(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Ds.days=Ds.day.range,Ds.days.utc=Ds.day.utc.range,Ds.dayOfYear=function(e){var t=Ds.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var i=Ds[e]=we(function(e){return(e=Ds.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var i=Ds.year(e).getDay();return Math.floor((Ds.dayOfYear(e)+(i+t)%7)/7)-(i!==t)});Ds[e+"s"]=i.range,Ds[e+"s"].utc=i.utc.range,Ds[e+"OfYear"]=function(e){var i=Ds.year(e).getDay();return Math.floor((Ds.dayOfYear(e)+(i+t)%7)/7)}}),Ds.week=Ds.sunday,Ds.weeks=Ds.sunday.range,Ds.weeks.utc=Ds.sunday.utc.range,Ds.weekOfYear=Ds.sundayOfYear;var hs={"-":"",_:" ",0:"0"},Es=/^\s*\d+/,ps=/^%/;so.locale=function(e){return{numberFormat:Oe(e),timeFormat:ke(e)}};var Fs=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=Fs.numberFormat,so.geo={},ut.prototype={s:0,t:0,add:function(e){if(At(e,this.t,ms),At(ms.s,this.s,this),this.s)this.t+=ms.t;else this.s=ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ms=new ut;so.geo.stream=function(e,t){if(e&&gs.hasOwnProperty(e.type))gs[e.type](e,t);else Bt(e,t)};var gs={Feature:function(e,t){Bt(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,r=i.length;++n<r;)Bt(i[n].geometry,t)}},Hs={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){ct(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)ct(i[n],t,0)},Polygon:function(e,t){Ct(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)Ct(i[n],t)},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,r=i.length;++n<r;)Bt(i[n],t)}};so.geo.area=function(e){return Gs=0,so.geo.stream(e,vs),Gs};var Gs,Is=new ut,vs={sphere:function(){Gs+=4*So},point:m,lineStart:m,lineEnd:m,polygonStart:function(){Is.reset(),vs.lineStart=Dt},polygonEnd:function(){var e=2*Is;Gs+=0>e?4*So+e:e,vs.lineStart=vs.lineEnd=vs.point=m}};so.geo.bounds=function(){function e(e,t){if(p.push(F=[A=e,c=e]),B>t)B=t;if(t>C)C=t}function t(t,i){var n=dt([t*Qo,i*Qo]);if(h){var r=ht(h,n),a=[r[1],-r[0],0],o=ht(a,r);Ft(o),o=mt(o);var l=t-D,u=l>0?1:-1,d=o[0]*Vo*u,f=Fo(l)>180;if(f^(d>u*D&&u*t>d)){var E=o[1]*Vo;if(E>C)C=E}else if(d=(d+360)%360-180,f^(d>u*D&&u*t>d)){var E=-o[1]*Vo;if(B>E)B=E}else{if(B>i)B=i;if(i>C)C=i}if(f){if(D>t){if(s(A,t)>s(A,c))c=t}else if(s(t,c)>s(A,c))A=t}else if(c>=A){if(A>t)A=t;if(t>c)c=t}else if(t>D){if(s(A,t)>s(A,c))c=t}else if(s(t,c)>s(A,c))A=t}else e(t,i);h=n,D=t}function i(){m.point=t}function n(){F[0]=A,F[1]=c,m.point=e,h=null}function r(e,i){if(h){var n=e-D;E+=Fo(n)>180?n+(n>0?360:-360):n}else d=e,f=i;vs.point(e,i),t(e,i)}function a(){vs.lineStart()}function o(){if(r(d,f),vs.lineEnd(),Fo(E)>Oo)A=-(c=180);F[0]=A,F[1]=c,h=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var A,B,c,C,D,d,f,h,E,p,F,m={point:e,lineStart:i,lineEnd:n,polygonStart:function(){m.point=r,m.lineStart=a,m.lineEnd=o,E=0,vs.polygonStart()},polygonEnd:function(){if(vs.polygonEnd(),m.point=e,m.lineStart=i,m.lineEnd=n,0>Is)A=-(c=180),B=-(C=90);else if(E>Oo)C=90;else if(-Oo>E)B=-90;F[0]=A,F[1]=c}};return function(e){C=c=-(A=B=1/0),p=[],so.geo.stream(e,m);var t=p.length;if(t){p.sort(l);for(var i,n=1,r=p[0],a=[r];t>n;++n)if(i=p[n],u(i[0],r)||u(i[1],r)){if(s(r[0],i[1])>s(r[0],r[1]))r[1]=i[1];if(s(i[0],r[1])>s(r[0],r[1]))r[0]=i[0]}else a.push(r=i);for(var o,i,D=-(1/0),t=a.length-1,n=0,r=a[t];t>=n;r=i,++n)if(i=a[n],(o=s(r[1],i[0]))>D)D=o,A=i[0],c=r[1]}return p=F=null,A===1/0||B===1/0?[[NaN,NaN],[NaN,NaN]]:[[A,B],[c,C]]}}(),so.geo.centroid=function(e){ys=Js=Ls=Ms=bs=Ns=Ks=xs=Ps=_s=Os=0,so.geo.stream(e,Ts);var t=Ps,i=_s,n=Os,r=t*t+i*i+n*n;if(To>r){if(t=Ns,i=Ks,n=xs,Oo>Js)t=Ls,i=Ms,n=bs;if(r=t*t+i*i+n*n,To>r)return[NaN,NaN]}return[Math.atan2(i,t)*Vo,te(n/Math.sqrt(r))*Vo]};var ys,Js,Ls,Ms,bs,Ns,Ks,xs,Ps,_s,Os,Ts={sphere:m,point:Ht,lineStart:It,lineEnd:vt,polygonStart:function(){Ts.lineStart=yt},polygonEnd:function(){Ts.lineStart=It}},Ss=Kt(Lt,Ot,St,[-So,-So/2]),ws=1e9;so.geo.clipExtent=function(){var e,t,i,n,r,a,o={stream:function(e){if(r)r.valid=!1;return r=a(e),r.valid=!0,r},extent:function(s){if(!arguments.length)return[[e,t],[i,n]];if(a=Qt(e=+s[0][0],t=+s[0][1],i=+s[1][0],n=+s[1][1]),r)r.valid=!1,r=null;return o}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return Vt(Ut)}).raw=Ut,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,i(a,o),t||(n(a,o),t)||r(a,o),t}var t,i,n,r,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,i){t=[e,i]}};return e.invert=function(e){var t=a.scale(),i=a.translate(),n=(e[0]-i[0])/t,r=(e[1]-i[1])/t;return(r>=.12&&.234>r&&n>=-.425&&-.214>n?o:r>=.166&&.234>r&&n>=-.214&&-.115>n?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),i=o.stream(e),n=s.stream(e);return{point:function(e,r){t.point(e,r),i.point(e,r),n.point(e,r)},sphere:function(){t.sphere(),i.sphere(),n.sphere()},lineStart:function(){t.lineStart(),i.lineStart(),n.lineStart()},lineEnd:function(){t.lineEnd(),i.lineEnd(),n.lineEnd()},polygonStart:function(){t.polygonStart(),i.polygonStart(),n.polygonStart()},polygonEnd:function(){t.polygonEnd(),i.polygonEnd(),n.polygonEnd()}}},e.precision=function(t){if(!arguments.length)return a.precision();else return a.precision(t),o.precision(t),s.precision(t),e},e.scale=function(t){if(!arguments.length)return a.scale();else return a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),A=+t[0],B=+t[1];return i=a.translate(t).clipExtent([[A-.455*u,B-.238*u],[A+.455*u,B+.238*u]]).stream(l).point,n=o.translate([A-.307*u,B+.201*u]).clipExtent([[A-.425*u+Oo,B+.12*u+Oo],[A-.214*u-Oo,B+.234*u-Oo]]).stream(l).point,r=s.translate([A-.205*u,B+.212*u]).clipExtent([[A-.214*u+Oo,B+.166*u+Oo],[A-.115*u-Oo,B+.234*u-Oo]]).stream(l).point,e},e.scale(1070)};var Rs,ks,Qs,Vs,Us,Ws,zs={point:m,lineStart:m,lineEnd:m,polygonStart:function(){ks=0,zs.lineStart=Wt},polygonEnd:function(){zs.lineStart=zs.lineEnd=zs.point=m,Rs+=Fo(ks/2)}},Ys={point:zt,lineStart:m,lineEnd:m,polygonStart:m,polygonEnd:m},Xs={point:jt,lineStart:Zt,lineEnd:qt,polygonStart:function(){Xs.lineStart=$t},polygonEnd:function(){Xs.point=jt,Xs.lineStart=Zt,Xs.lineEnd=qt}};so.geo.path=function(){function e(e){if(e){if("function"==typeof s)a.pointRadius(+s.apply(this,arguments));if(!o||!o.valid)o=r(a);so.geo.stream(e,o)}return a.result()}function t(){return o=null,e}var i,n,r,a,o,s=4.5;return e.area=function(e){return Rs=0,so.geo.stream(e,r(zs)),Rs},e.centroid=function(e){return Ls=Ms=bs=Ns=Ks=xs=Ps=_s=Os=0,so.geo.stream(e,r(Xs)),Os?[Ps/Os,_s/Os]:xs?[Ns/xs,Ks/xs]:bs?[Ls/bs,Ms/bs]:[NaN,NaN]},e.bounds=function(e){return Us=Ws=-(Qs=Vs=1/0),so.geo.stream(e,r(Ys)),[[Qs,Vs],[Us,Ws]]},e.projection=function(e){if(!arguments.length)return i;else return r=(i=e)?e.stream||ii(e):E,t()},e.context=function(e){if(!arguments.length)return n;if(a=null==(n=e)?new Yt:new ei(e),"function"!=typeof s)a.pointRadius(s);return t()},e.pointRadius=function(t){if(!arguments.length)return s;else return s="function"==typeof t?t:(a.pointRadius(+t),+t),e},e.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(e){return{stream:function(t){var i=new ni(t);for(var n in e)i[n]=e[n];return i}}},ni.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=ai,so.geo.projectionMutator=oi,(so.geo.equirectangular=function(){return ai(li)}).raw=li.invert=li,so.geo.rotation=function(e){function t(t){return t=e(t[0]*Qo,t[1]*Qo),t[0]*=Vo,t[1]*=Vo,t}return e=Ai(e[0]%360*Qo,e[1]*Qo,e.length>2?e[2]*Qo:0),t.invert=function(t){return t=e.invert(t[0]*Qo,t[1]*Qo),t[0]*=Vo,t[1]*=Vo,t},t},ui.invert=li,so.geo.circle=function(){function e(){var e="function"==typeof n?n.apply(this,arguments):n,t=Ai(-e[0]*Qo,-e[1]*Qo,0).invert,r=[];return i(null,null,1,{point:function(e,i){r.push(e=t(e,i)),e[0]*=Vo,e[1]*=Vo}}),{type:"Polygon",coordinates:[r]}}var t,i,n=[0,0],r=6;return e.origin=function(t){if(!arguments.length)return n;else return n=t,e},e.angle=function(n){if(!arguments.length)return t;else return i=Di((t=+n)*Qo,r*Qo),e},e.precision=function(n){if(!arguments.length)return r;else return i=Di(t*Qo,(r=+n)*Qo),e},e.angle(90)},so.geo.distance=function(e,t){var i,n=(t[0]-e[0])*Qo,r=e[1]*Qo,a=t[1]*Qo,o=Math.sin(n),s=Math.cos(n),l=Math.sin(r),u=Math.cos(r),A=Math.sin(a),B=Math.cos(a);return Math.atan2(Math.sqrt((i=B*o)*i+(i=u*A-l*B*s)*i),l*A+u*B*s)},so.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return so.range(Math.ceil(a/f)*f,r,f).map(c).concat(so.range(Math.ceil(u/h)*h,l,h).map(C)).concat(so.range(Math.ceil(n/D)*D,i,D).filter(function(e){return Fo(e%f)>Oo}).map(A)).concat(so.range(Math.ceil(s/d)*d,o,d).filter(function(e){return Fo(e%h)>Oo}).map(B))}var i,n,r,a,o,s,l,u,A,B,c,C,D=10,d=D,f=90,h=360,E=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[c(a).concat(C(l).slice(1),c(r).reverse().slice(1),C(u).reverse().slice(1))]}},e.extent=function(t){if(!arguments.length)return e.minorExtent();else return e.majorExtent(t).minorExtent(t)},e.majorExtent=function(t){if(!arguments.length)return[[a,u],[r,l]];if(a=+t[0][0],r=+t[1][0],u=+t[0][1],l=+t[1][1],a>r)t=a,a=r,r=t;if(u>l)t=u,u=l,l=t;return e.precision(E)},e.minorExtent=function(t){if(!arguments.length)return[[n,s],[i,o]];if(n=+t[0][0],i=+t[1][0],s=+t[0][1],o=+t[1][1],n>i)t=n,n=i,i=t;if(s>o)t=s,s=o,o=t;return e.precision(E)},e.step=function(t){if(!arguments.length)return e.minorStep();else return e.majorStep(t).minorStep(t)},e.majorStep=function(t){if(!arguments.length)return[f,h];else return f=+t[0],h=+t[1],e},e.minorStep=function(t){if(!arguments.length)return[D,d];else return D=+t[0],d=+t[1],e},e.precision=function(t){if(!arguments.length)return E;else return E=+t,A=fi(s,o,90),B=hi(n,i,E),c=fi(u,l,90),C=hi(a,r,E),e},e.majorExtent([[-180,-90+Oo],[180,90-Oo]]).minorExtent([[-180,-80-Oo],[180,80+Oo]])},so.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),i||r.apply(this,arguments)]}}var t,i,n=Ei,r=pi;return e.distance=function(){return so.geo.distance(t||n.apply(this,arguments),i||r.apply(this,arguments))},e.source=function(i){if(!arguments.length)return n;else return n=i,t="function"==typeof i?null:i,e},e.target=function(t){if(!arguments.length)return r;else return r=t,i="function"==typeof t?null:t,e},e.precision=function(){return arguments.length?e:0},e},so.geo.interpolate=function(e,t){return Fi(e[0]*Qo,e[1]*Qo,t[0]*Qo,t[1]*Qo)},so.geo.length=function(e){return js=0,so.geo.stream(e,Zs),js};var js,Zs={sphere:m,point:m,lineStart:mi,lineEnd:m,polygonStart:m,polygonEnd:m},qs=gi(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(so.geo.azimuthalEqualArea=function(){return ai(qs)}).raw=qs;var $s=gi(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},E);(so.geo.azimuthalEquidistant=function(){return ai($s)}).raw=$s,(so.geo.conicConformal=function(){return Vt(Hi)}).raw=Hi,(so.geo.conicEquidistant=function(){return Vt(Gi)}).raw=Gi;var el=gi(function(e){return 1/e},Math.atan);(so.geo.gnomonic=function(){return ai(el)}).raw=el,Ii.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-ko]},(so.geo.mercator=function(){return vi(Ii)}).raw=Ii;var tl=gi(function(){return 1},Math.asin);(so.geo.orthographic=function(){return ai(tl)}).raw=tl;var il=gi(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(so.geo.stereographic=function(){return ai(il)}).raw=il,yi.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-ko]},(so.geo.transverseMercator=function(){var e=vi(yi),t=e.center,i=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?i([e[0],e[1],e.length>2?e[2]+90:90]):(e=i(),[e[0],e[1],e[2]-90])},i([0,0,90])}).raw=yi,so.geom={},so.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=ve(i),a=ve(n),o=e.length,s=[],l=[];for(t=0;o>t;t++)s.push([+r.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(bi),t=0;o>t;t++)l.push([s[t][0],-s[t][1]]);var u=Mi(s),A=Mi(l),B=A[0]===u[0],c=A[A.length-1]===u[u.length-1],C=[];for(t=u.length-1;t>=0;--t)C.push(e[s[u[t]][2]]);for(t=+B;t<A.length-c;++t)C.push(e[s[A[t]][2]]);return C}var i=Ji,n=Li;if(arguments.length)return t(e);else return t.x=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(n=e,t):n},t},so.geom.polygon=function(e){return Io(e,nl),e};var nl=so.geom.polygon.prototype=[];nl.area=function(){for(var e,t=-1,i=this.length,n=this[i-1],r=0;++t<i;)e=n,n=this[t],r+=e[1]*n[0]-e[0]*n[1];return.5*r},nl.centroid=function(e){var t,i,n=-1,r=this.length,a=0,o=0,s=this[r-1];if(!arguments.length)e=-1/(6*this.area());for(;++n<r;)t=s,s=this[n],i=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*i,o+=(t[1]+s[1])*i;return[a*e,o*e]},nl.clip=function(e){for(var t,i,n,r,a,o,s=xi(e),l=-1,u=this.length-xi(this),A=this[u-1];++l<u;){for(t=e.slice(),e.length=0,r=this[l],a=t[(n=t.length-s)-1],i=-1;++i<n;){if(o=t[i],Ni(o,A,r)){if(!Ni(a,A,r))e.push(Ki(a,o,A,r));e.push(o)}else if(Ni(a,A,r))e.push(Ki(a,o,A,r));a=o}if(s)e.push(e[0]);A=r}return e};var rl,al,ol,sl,ll,ul=[],Al=[];ki.prototype.prepare=function(){for(var e,t=this.edges,i=t.length;i--;)if(e=t[i].edge,!e.b||!e.a)t.splice(i,1);return t.sort(Vi),t.length},en.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},tn.prototype={insert:function(e,t){var i,n,r;if(e){if(t.P=e,t.N=e.N,e.N)e.N.P=t;if(e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;i=e}else if(this._)e=on(this._),t.P=null,t.N=e,e.P=e.L=t,i=e;else t.P=t.N=null,this._=t,i=null;for(t.L=t.R=null,t.U=i,t.C=!0,e=t;i&&i.C;){if(n=i.U,i===n.L)if(r=n.R,r&&r.C)i.C=r.C=!1,n.C=!0,e=n;else{if(e===i.R)rn(this,i),e=i,i=e.U;i.C=!1,n.C=!0,an(this,n)}else if(r=n.L,r&&r.C)i.C=r.C=!1,n.C=!0,e=n;else{if(e===i.L)an(this,i),e=i,i=e.U;i.C=!1,n.C=!0,rn(this,n)}i=e.U}this._.C=!1},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t,i,n,r=e.U,a=e.L,o=e.R;if(!a)i=o;else if(!o)i=a;else i=on(o);if(r)if(r.L===e)r.L=i;else r.R=i;else this._=i;if(a&&o)if(n=i.C,i.C=e.C,i.L=a,a.U=i,i!==o)r=i.U,i.U=e.U,e=i.R,r.L=e,i.R=o,o.U=i;else i.U=r,r=i,e=i.R;else n=e.C,e=i;if(e)e.U=r;if(!n){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if(t=r.R,t.C)t.C=!1,r.C=!0,rn(this,r),t=r.R;if(t.L&&t.L.C||t.R&&t.R.C){if(!t.R||!t.R.C)t.L.C=!1,t.C=!0,an(this,t),t=r.R;t.C=r.C,r.C=t.R.C=!1,rn(this,r),e=this._;break}}else{if(t=r.L,t.C)t.C=!1,r.C=!0,an(this,r),t=r.L;if(t.L&&t.L.C||t.R&&t.R.C){if(!t.L||!t.L.C)t.R.C=!1,t.C=!0,rn(this,t),t=r.L;t.C=r.C,r.C=t.L.C=!1,an(this,r),e=this._;break}}t.C=!0,e=r,r=r.U}while(!e.C);if(e)e.C=!1}}},so.geom.voronoi=function(e){function t(e){var t=new Array(e.length),n=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return sn(i(e),s).cells.forEach(function(i,s){var l=i.edges,u=i.site,A=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=n&&u.x<=a&&u.y>=r&&u.y<=o?[[n,o],[a,o],[a,r],[n,r]]:[];A.point=e[s]}),t}function i(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Oo)*Oo,y:Math.round(o(e,t)/Oo)*Oo,i:t}})}var n=Ji,r=Li,a=n,o=r,s=Bl;if(e)return t(e);else return t.links=function(e){return sn(i(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sn(i(e)).cells.forEach(function(i,n){for(var r,a,o=i.site,s=i.edges.sort(Vi),l=-1,u=s.length,A=s[u-1].edge,B=A.l===o?A.r:A.l;++l<u;)if(r=A,a=B,A=s[l].edge,B=A.l===o?A.r:A.l,n<a.i&&n<B.i&&un(o,a,B)<0)t.push([e[n],e[a.i],e[B.i]])}),t},t.x=function(e){return arguments.length?(a=ve(n=e),t):n},t.y=function(e){return arguments.length?(o=ve(r=e),t):r},t.clipExtent=function(e){if(!arguments.length)return s===Bl?null:s;else return s=null==e?Bl:e,t},t.size=function(e){if(!arguments.length)return s===Bl?null:s&&s[1];else return t.clipExtent(e&&[[0,0],e])},t};var Bl=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(e){return so.geom.voronoi().triangles(e)},so.geom.quadtree=function(e,t,i,n,r){function a(e){function a(e,t,i,n,r,a,o,s){if(!isNaN(i)&&!isNaN(n))if(e.leaf){var l=e.x,A=e.y;if(null!=l)if(Fo(l-i)+Fo(A-n)<.01)u(e,t,i,n,r,a,o,s);else{var B=e.point;e.x=e.y=e.point=null,u(e,B,l,A,r,a,o,s),u(e,t,i,n,r,a,o,s)}else e.x=i,e.y=n,e.point=t}else u(e,t,i,n,r,a,o,s)}function u(e,t,i,n,r,o,s,l){var u=.5*(r+s),A=.5*(o+l),B=i>=u,c=n>=A,C=c<<1|B;if(e.leaf=!1,e=e.nodes[C]||(e.nodes[C]=cn()),B)r=u;else s=u;if(c)o=A;else l=A;a(e,t,i,n,r,o,s,l)}var A,B,c,C,D,d,f,h,E,p=ve(s),F=ve(l);if(null!=t)d=t,f=i,h=n,E=r;else if(h=E=-(d=f=1/0),B=[],c=[],D=e.length,o)for(C=0;D>C;++C){if(A=e[C],A.x<d)d=A.x;if(A.y<f)f=A.y;if(A.x>h)h=A.x;if(A.y>E)E=A.y;B.push(A.x),c.push(A.y)}else for(C=0;D>C;++C){var m=+p(A=e[C],C),g=+F(A,C);if(d>m)d=m;if(f>g)f=g;if(m>h)h=m;if(g>E)E=g;B.push(m),c.push(g)}var H=h-d,G=E-f;if(H>G)E=f+H;else h=d+G;var I=cn();if(I.add=function(e){a(I,e,+p(e,++C),+F(e,C),d,f,h,E)},I.visit=function(e){Cn(e,I,d,f,h,E)},I.find=function(e){return Dn(I,e[0],e[1],d,f,h,E)},C=-1,null==t){for(;++C<D;)a(I,e[C],B[C],c[C],d,f,h,E);--C}else e.forEach(I.add);return B=c=e=A=null,I}var o,s=Ji,l=Li;if(o=arguments.length){if(s=An,l=Bn,3===o)r=i,n=t,i=t=0;return a(e)}return a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){if(!arguments.length)return null==t?null:[[t,i],[n,r]];if(null==e)t=i=n=r=null;else t=+e[0][0],i=+e[0][1],n=+e[1][0],r=+e[1][1];return a},a.size=function(e){if(!arguments.length)return null==t?null:[n-t,r-i];if(null==e)t=i=n=r=null;else t=i=0,n=+e[0],r=+e[1];return a},a},so.interpolateRgb=dn,so.interpolateObject=fn,so.interpolateNumber=hn,so.interpolateString=En;var cl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cl=new RegExp(cl.source,"g");so.interpolate=pn,so.interpolators=[function(e,t){var i=typeof t;return("string"===i?as.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?dn:En:t instanceof oe?dn:Array.isArray(t)?Fn:"object"===i&&isNaN(t)?fn:hn)(e,t)}],so.interpolateArray=Fn;var Dl=function(){return E},dl=so.map({linear:Dl,poly:yn,quad:function(){return Gn},cubic:function(){return In},sin:function(){return Jn},exp:function(){return Ln},circle:function(){return Mn},elastic:bn,back:Nn,bounce:function(){return Kn}}),fl=so.map({"in":E,out:gn,"in-out":Hn,"out-in":function(e){return Hn(gn(e))}});so.ease=function(e){var t=e.indexOf("-"),i=t>=0?e.slice(0,t):e,n=t>=0?e.slice(t+1):"in";return i=dl.get(i)||Dl,n=fl.get(n)||E,mn(n(i.apply(null,lo.call(arguments,1))))},so.interpolateHcl=xn,so.interpolateHsl=Pn,so.interpolateLab=_n,so.interpolateRound=On,so.transform=function(e){var t=Ao.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(e){if(null!=e){t.setAttribute("transform",e);var i=t.transform.baseVal.consolidate()}return new Tn(i?i.matrix:hl)})(e)},Tn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var hl={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=zn,so.layout={},so.layout.bundle=function(){return function(e){for(var t=[],i=-1,n=e.length;++i<n;)t.push(jn(e[i]));return t}},so.layout.chord=function(){function e(){var e,u,B,c,C,D={},d=[],f=so.range(a),h=[];for(i=[],n=[],e=0,c=-1;++c<a;){for(u=0,C=-1;++C<a;)u+=r[c][C];d.push(u),h.push(so.range(a)),e+=u}if(o)f.sort(function(e,t){return o(d[e],d[t])});if(s)h.forEach(function(e,t){e.sort(function(e,i){return s(r[t][e],r[t][i])})});for(e=(wo-A*a)/e,u=0,c=-1;++c<a;){for(B=u,C=-1;++C<a;){var E=f[c],p=h[E][C],F=r[E][p],m=u,g=u+=F*e;D[E+"-"+p]={index:E,subindex:p,startAngle:m,endAngle:g,value:F}}n[E]={index:E,startAngle:B,endAngle:u,value:d[E]},u+=A}for(c=-1;++c<a;)for(C=c-1;++C<a;){var H=D[c+"-"+C],G=D[C+"-"+c];if(H.value||G.value)i.push(H.value<G.value?{source:G,target:H}:{source:H,target:G})}if(l)t()}function t(){i.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var i,n,r,a,o,s,l,u={},A=0;return u.matrix=function(e){if(!arguments.length)return r;else return a=(r=e)&&r.length,i=n=null,u},u.padding=function(e){if(!arguments.length)return A;else return A=e,i=n=null,u},u.sortGroups=function(e){if(!arguments.length)return o;else return o=e,i=n=null,u},u.sortSubgroups=function(e){if(!arguments.length)return s;else return s=e,i=null,u},u.sortChords=function(e){if(!arguments.length)return l;if(l=e,i)t();return u},u.chords=function(){if(!i)e();return i},u.groups=function(){if(!n)e();return n},u},so.layout.force=function(){function e(e){return function(t,i,n,r){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=r-i,l=a*a+o*o;if(l>s*s/h){if(d>l){var u=t.charge/l;e.px-=a*u,e.py-=o*u}return!0}if(t.point&&l&&d>l){var u=t.pointCharge/l;e.px-=a*u,e.py-=o*u}}return!t.charge}}function t(e){e.px=so.event.x,e.py=so.event.y,l.resume()}var i,n,r,a,o,s,l={},u=so.dispatch("start","tick","end"),A=[1,1],B=.9,c=El,C=pl,D=-30,d=Fl,f=.1,h=.64,p=[],F=[];return l.tick=function(){if((r*=.99)<.005)return i=null,u.end({type:"end",alpha:r=0}),!0;var t,n,l,c,C,d,h,E,m,g=p.length,H=F.length;for(n=0;H>n;++n)if(l=F[n],c=l.source,C=l.target,E=C.x-c.x,m=C.y-c.y,d=E*E+m*m)d=r*o[n]*((d=Math.sqrt(d))-a[n])/d,E*=d,m*=d,C.x-=E*(h=c.weight+C.weight?c.weight/(c.weight+C.weight):.5),C.y-=m*h,c.x+=E*(h=1-h),c.y+=m*h;if(h=r*f)if(E=A[0]/2,m=A[1]/2,n=-1,h)for(;++n<g;)l=p[n],l.x+=(E-l.x)*h,l.y+=(m-l.y)*h;if(D)for(nr(t=so.geom.quadtree(p),r,s),n=-1;++n<g;)if(!(l=p[n]).fixed)t.visit(e(l));for(n=-1;++n<g;)if(l=p[n],l.fixed)l.x=l.px,l.y=l.py;else l.x-=(l.px-(l.px=l.x))*B,l.y-=(l.py-(l.py=l.y))*B;u.tick({type:"tick",alpha:r})},l.nodes=function(e){if(!arguments.length)return p;else return p=e,l},l.links=function(e){if(!arguments.length)return F;else return F=e,l},l.size=function(e){if(!arguments.length)return A;else return A=e,l},l.linkDistance=function(e){if(!arguments.length)return c;else return c="function"==typeof e?e:+e,l},l.distance=l.linkDistance,l.linkStrength=function(e){if(!arguments.length)return C;else return C="function"==typeof e?e:+e,l},l.friction=function(e){if(!arguments.length)return B;else return B=+e,l},l.charge=function(e){if(!arguments.length)return D;else return D="function"==typeof e?e:+e,l},l.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(d);else return d=e*e,l},l.gravity=function(e){if(!arguments.length)return f;else return f=+e,l},l.theta=function(e){if(!arguments.length)return Math.sqrt(h);else return h=e*e,l},l.alpha=function(e){if(!arguments.length)return r;if(e=+e,r)if(e>0)r=e;else i.c=null,i.t=NaN,i=null,u.end({type:"end",alpha:r=0});else if(e>0)u.start({type:"start",alpha:r=e}),i=be(l.tick);return l},l.start=function(){function e(e,n){if(!i){for(i=new Array(r),l=0;r>l;++l)i[l]=[];for(l=0;u>l;++l){var a=F[l];i[a.source.index].push(a.target),i[a.target.index].push(a.source)}}for(var o,s=i[t],l=-1,A=s.length;++l<A;)if(!isNaN(o=s[l][e]))return o;return Math.random()*n}var t,i,n,r=p.length,u=F.length,B=A[0],d=A[1];for(t=0;r>t;++t)(n=p[t]).index=t,n.weight=0;for(t=0;u>t;++t){if(n=F[t],"number"==typeof n.source)n.source=p[n.source];if("number"==typeof n.target)n.target=p[n.target];++n.source.weight,++n.target.weight}for(t=0;r>t;++t){if(n=p[t],isNaN(n.x))n.x=e("x",B);if(isNaN(n.y))n.y=e("y",d);if(isNaN(n.px))n.px=n.x;if(isNaN(n.py))n.py=n.y}if(a=[],"function"==typeof c)for(t=0;u>t;++t)a[t]=+c.call(this,F[t],t);else for(t=0;u>t;++t)a[t]=c;if(o=[],"function"==typeof C)for(t=0;u>t;++t)o[t]=+C.call(this,F[t],t);else for(t=0;u>t;++t)o[t]=C;if(s=[],"function"==typeof D)for(t=0;r>t;++t)s[t]=+D.call(this,p[t],t);else for(t=0;r>t;++t)s[t]=D;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(!n)n=so.behavior.drag().origin(E).on("dragstart.force",$n).on("drag.force",t).on("dragend.force",er);if(!arguments.length)return n;else return void this.on("mouseover.force",tr).on("mouseout.force",ir).call(n)},so.rebind(l,u,"on")};var El=20,pl=1,Fl=1/0;so.layout.hierarchy=function(){function e(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(u=i.call(e,a,a.depth))&&(l=u.length)){for(var l,u,A;--l>=0;)o.push(A=u[l]),A.parent=a,A.depth=a.depth+1;if(n)a.value=0;a.children=u}else{if(n)a.value=+n.call(e,a,a.depth)||0;delete a.children}return or(r,function(e){var i,r;if(t&&(i=e.children))i.sort(t);if(n&&(r=e.parent))r.value+=e.value}),s}var t=ur,i=sr,n=lr;return e.sort=function(i){if(!arguments.length)return t;else return t=i,e},e.children=function(t){if(!arguments.length)return i;else return i=t,e},e.value=function(t){if(!arguments.length)return n;else return n=t,e},e.revalue=function(t){if(n)ar(t,function(e){if(e.children)e.value=0}),or(t,function(t){var i;if(!t.children)t.value=+n.call(e,t,t.depth)||0;if(i=t.parent)i.value+=t.value});return t},e},so.layout.partition=function(){function e(t,i,n,r){var a=t.children;if(t.x=i,t.y=t.depth*r,t.dx=n,t.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(n=t.value?n/t.value:0;++u<o;)e(s=a[u],i,l=s.value*n,r),i+=l}}function t(e){var i=e.children,n=0;if(i&&(r=i.length))for(var r,a=-1;++a<r;)n=Math.max(n,t(i[a]));return 1+n}function i(i,a){var o=n.call(this,i,a);return e(o[0],0,r[0],r[1]/t(o[0])),o}var n=so.layout.hierarchy(),r=[1,1];return i.size=function(e){if(!arguments.length)return r;else return r=e,i},rr(i,n)},so.layout.pie=function(){function e(o){var s,l=o.length,u=o.map(function(i,n){return+t.call(e,i,n)}),A=+("function"==typeof n?n.apply(this,arguments):n),B=("function"==typeof r?r.apply(this,arguments):r)-A,c=Math.min(Math.abs(B)/l,+("function"==typeof a?a.apply(this,arguments):a)),C=c*(0>B?-1:1),D=so.sum(u),d=D?(B-l*C)/D:0,f=so.range(l),h=[];if(null!=i)f.sort(i===ml?function(e,t){return u[t]-u[e]}:function(e,t){return i(o[e],o[t])});return f.forEach(function(e){h[e]={data:o[e],value:s=u[e],startAngle:A,endAngle:A+=s*d+C,padAngle:c}}),h}var t=Number,i=ml,n=0,r=wo,a=0;return e.value=function(i){if(!arguments.length)return t;else return t=i,e},e.sort=function(t){if(!arguments.length)return i;else return i=t,e},e.startAngle=function(t){if(!arguments.length)return n;else return n=t,e},e.endAngle=function(t){if(!arguments.length)return r;else return r=t,e},e.padAngle=function(t){if(!arguments.length)return a;else return a=t,e},e};var ml={};so.layout.stack=function(){function e(s,l){if(!(c=s.length))return s;var u=s.map(function(i,n){return t.call(e,i,n)}),A=u.map(function(t){return t.map(function(t,i){return[a.call(e,t,i),o.call(e,t,i)]})}),B=i.call(e,A,l);u=so.permute(u,B),A=so.permute(A,B);var c,C,D,d,f=n.call(e,A,l),h=u[0].length;for(D=0;h>D;++D)for(r.call(e,u[0][D],d=f[D],A[0][D][1]),C=1;c>C;++C)r.call(e,u[C][D],d+=A[C-1][D][1],A[C][D][1]);return s}var t=E,i=Dr,n=dr,r=Cr,a=Br,o=cr;return e.values=function(i){if(!arguments.length)return t;else return t=i,e},e.order=function(t){if(!arguments.length)return i;else return i="function"==typeof t?t:gl.get(t)||Dr,e},e.offset=function(t){if(!arguments.length)return n;else return n="function"==typeof t?t:Hl.get(t)||dr,e},e.x=function(t){if(!arguments.length)return a;else return a=t,e},e.y=function(t){if(!arguments.length)return o;else return o=t,e},e.out=function(t){if(!arguments.length)return r;else return r=t,e},e};var gl=so.map({"inside-out":function(e){var t,i,n=e.length,r=e.map(fr),a=e.map(hr),o=so.range(n).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,u=[],A=[];for(t=0;n>t;++t)if(i=o[t],l>s)s+=a[i],u.push(i);else l+=a[i],A.push(i);return A.reverse().concat(u)},reverse:function(e){return so.range(e.length).reverse()},"default":Dr}),Hl=so.map({silhouette:function(e){var t,i,n,r=e.length,a=e[0].length,o=[],s=0,l=[];for(i=0;a>i;++i){for(t=0,n=0;r>t;t++)n+=e[t][i][1];if(n>s)s=n;o.push(n)}for(i=0;a>i;++i)l[i]=(s-o[i])/2;return l},wiggle:function(e){var t,i,n,r,a,o,s,l,u,A=e.length,B=e[0],c=B.length,C=[];for(C[0]=l=u=0,i=1;c>i;++i){for(t=0,r=0;A>t;++t)r+=e[t][i][1];for(t=0,a=0,s=B[i][0]-B[i-1][0];A>t;++t){for(n=0,o=(e[t][i][1]-e[t][i-1][1])/(2*s);t>n;++n)o+=(e[n][i][1]-e[n][i-1][1])/s;a+=o*e[t][i][1]}if(C[i]=l-=r?a/r*s:0,u>l)u=l}for(i=0;c>i;++i)C[i]-=u;return C},expand:function(e){var t,i,n,r=e.length,a=e[0].length,o=1/r,s=[];for(i=0;a>i;++i){for(t=0,n=0;r>t;t++)n+=e[t][i][1];if(n)for(t=0;r>t;t++)e[t][i][1]/=n;else for(t=0;r>t;t++)e[t][i][1]=o}for(i=0;a>i;++i)s[i]=0;return s},zero:dr});so.layout.histogram=function(){function e(e,a){for(var o,s,l=[],u=e.map(i,this),A=n.call(this,u,a),B=r.call(this,A,u,a),a=-1,c=u.length,C=B.length-1,D=t?1:1/c;++a<C;)o=l[a]=[],o.dx=B[a+1]-(o.x=B[a]),o.y=0;if(C>0)for(a=-1;++a<c;)if(s=u[a],s>=A[0]&&s<=A[1])o=l[so.bisect(B,s,1,C)-1],o.y+=D,o.push(e[a]);return l}var t=!0,i=Number,n=mr,r=pr;return e.value=function(t){if(!arguments.length)return i;else return i=t,e},e.range=function(t){if(!arguments.length)return n;else return n=ve(t),e},e.bins=function(t){if(!arguments.length)return r;else return r="number"==typeof t?function(e){return Fr(e,t)}:ve(t),e},e.frequency=function(i){if(!arguments.length)return t;else return t=!!i,e},e},so.layout.pack=function(){function e(e,a){var o=i.call(this,e,a),s=o[0],l=r[0],u=r[1],A=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,or(s,function(e){e.r=+A(e.value)}),or(s,vr),n){var B=n*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;or(s,function(e){e.r+=B}),or(s,vr),or(s,function(e){e.r-=B})}return Lr(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var t,i=so.layout.hierarchy().sort(gr),n=0,r=[1,1];return e.size=function(t){if(!arguments.length)return r;else return r=t,e},e.radius=function(i){if(!arguments.length)return t;else return t=null==i||"function"==typeof i?i:+i,e},e.padding=function(t){
if(!arguments.length)return n;else return n=+t,e},rr(e,i)},so.layout.tree=function(){function e(e,r){var A=o.call(this,e,r),B=A[0],c=t(B);if(or(c,i),c.parent.m=-c.z,ar(c,n),u)ar(B,a);else{var C=B,D=B,d=B;ar(B,function(e){if(e.x<C.x)C=e;if(e.x>D.x)D=e;if(e.depth>d.depth)d=e});var f=s(C,D)/2-C.x,h=l[0]/(D.x+s(D,C)/2+f),E=l[1]/(d.depth||1);ar(B,function(e){e.x=(e.x+f)*h,e.y=e.depth*E})}return A}function t(e){for(var t,i={A:null,children:[e]},n=[i];null!=(t=n.pop());)for(var r,a=t.children,o=0,s=a.length;s>o;++o)n.push((a[o]=r={_:a[o],parent:t,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return i.children[0]}function i(e){var t=e.children,i=e.parent.children,n=e.i?i[e.i-1]:null;if(t.length){Pr(e);var a=(t[0].z+t[t.length-1].z)/2;if(n)e.z=n.z+s(e._,n._),e.m=e.z-a;else e.z=a}else if(n)e.z=n.z+s(e._,n._);e.parent.A=r(e,n,e.parent.A||i[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,i){if(t){for(var n,r=e,a=e,o=t,l=r.parent.children[0],u=r.m,A=a.m,B=o.m,c=l.m;o=Kr(o),r=Nr(r),o&&r;){if(l=Nr(l),a=Kr(a),a.a=e,n=o.z+B-r.z-u+s(o._,r._),n>0)xr(_r(o,e,i),e,n),u+=n,A+=n;B+=o.m,u+=r.m,c+=l.m,A+=a.m}if(o&&!Kr(a))a.t=o,a.m+=B-A;if(r&&!Nr(l))l.t=r,l.m+=u-c,i=e}return i}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=so.layout.hierarchy().sort(null).value(null),s=br,l=[1,1],u=null;return e.separation=function(t){if(!arguments.length)return s;else return s=t,e},e.size=function(t){if(!arguments.length)return u?null:l;else return u=null==(l=t)?a:null,e},e.nodeSize=function(t){if(!arguments.length)return u?l:null;else return u=null==(l=t)?null:a,e},rr(e,o)},so.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),l=s[0],u=0;or(l,function(e){var t=e.children;if(t&&t.length)e.x=Tr(t),e.y=Or(t);else e.x=o?u+=i(e,o):0,e.y=0,o=e});var A=Sr(l),B=wr(l),c=A.x-i(A,B)/2,C=B.x+i(B,A)/2;return or(l,r?function(e){e.x=(e.x-l.x)*n[0],e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-c)/(C-c)*n[0],e.y=(1-(l.y?e.y/l.y:1))*n[1]}),s}var t=so.layout.hierarchy().sort(null).value(null),i=br,n=[1,1],r=!1;return e.separation=function(t){if(!arguments.length)return i;else return i=t,e},e.size=function(t){if(!arguments.length)return r?null:n;else return r=null==(n=t),e},e.nodeSize=function(t){if(!arguments.length)return r?n:null;else return r=null!=(n=t),e},rr(e,t)},so.layout.treemap=function(){function e(e,t){for(var i,n,r=-1,a=e.length;++r<a;)n=(i=e[r]).value*(0>t?0:t),i.area=isNaN(n)||0>=n?0:n}function t(i){var a=i.children;if(a&&a.length){var o,s,l,u=B(i),A=[],c=a.slice(),D=1/0,d="slice"===C?u.dx:"dice"===C?u.dy:"slice-dice"===C?1&i.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(c,u.dx*u.dy/i.value),A.area=0;(l=c.length)>0;)if(A.push(o=c[l-1]),A.area+=o.area,"squarify"!==C||(s=n(A,d))<=D)c.pop(),D=s;else A.area-=A.pop().area,r(A,d,u,!1),d=Math.min(u.dx,u.dy),A.length=A.area=0,D=1/0;if(A.length)r(A,d,u,!0),A.length=A.area=0;a.forEach(t)}}function i(t){var n=t.children;if(n&&n.length){var a,o=B(t),s=n.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)if(l.push(a),l.area+=a.area,null!=a.z)r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0;n.forEach(i)}}function n(e,t){for(var i,n=e.area,r=0,a=1/0,o=-1,s=e.length;++o<s;)if(i=e[o].area){if(a>i)a=i;if(i>r)r=i}else;return n*=n,t*=t,n?Math.max(t*r*D/n,n/(t*a*D)):1/0}function r(e,t,i,n){var r,a=-1,o=e.length,s=i.x,u=i.y,A=t?l(e.area/t):0;if(t==i.dx){if(n||A>i.dy)A=i.dy;for(;++a<o;)r=e[a],r.x=s,r.y=u,r.dy=A,s+=r.dx=Math.min(i.x+i.dx-s,A?l(r.area/A):0);r.z=!0,r.dx+=i.x+i.dx-s,i.y+=A,i.dy-=A}else{if(n||A>i.dx)A=i.dx;for(;++a<o;)r=e[a],r.x=s,r.y=u,r.dx=A,u+=r.dy=Math.min(i.y+i.dy-u,A?l(r.area/A):0);r.z=!1,r.dy+=i.y+i.dy-u,i.x+=A,i.dx-=A}}function a(n){var r=o||s(n),a=r[0];if(a.x=a.y=0,a.value)a.dx=u[0],a.dy=u[1];else a.dx=a.dy=0;if(o)s.revalue(a);if(e([a],a.dx*a.dy/a.value),(o?i:t)(a),c)o=r;return r}var o,s=so.layout.hierarchy(),l=Math.round,u=[1,1],A=null,B=Rr,c=!1,C="squarify",D=.5*(1+Math.sqrt(5));return a.size=function(e){if(!arguments.length)return u;else return u=e,a},a.padding=function(e){function t(t){var i=e.call(a,t,t.depth);return null==i?Rr(t):kr(t,"number"==typeof i?[i,i,i,i]:i)}function i(t){return kr(t,e)}if(!arguments.length)return A;var n;return B=null==(A=e)?Rr:"function"==(n=typeof e)?t:"number"===n?(e=[e,e,e,e],i):i,a},a.round=function(e){if(!arguments.length)return l!=Number;else return l=e?Math.round:Number,a},a.sticky=function(e){if(!arguments.length)return c;else return c=e,o=null,a},a.ratio=function(e){if(!arguments.length)return D;else return D=e,a},a.mode=function(e){if(!arguments.length)return C;else return C=e+"",a},rr(a,s)},so.random={normal:function(e,t){var i=arguments.length;if(2>i)t=1;if(1>i)e=0;return function(){var i,n,r;do i=2*Math.random()-1,n=2*Math.random()-1,r=i*i+n*n;while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=so.random.normal.apply(so,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=so.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,i=0;e>i;i++)t+=Math.random();return t}}},so.scale={};var Gl={floor:E,ceil:E};so.scale.linear=function(){return Xr([0,1],[0,1],pn,!1)};var Il={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return na(so.scale.linear().domain([0,1]),10,!0,[1,10])};var vl=so.format(".0e"),yl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};so.scale.pow=function(){return ra(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return oa([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(Jl)},so.scale.category20=function(){return so.scale.ordinal().range(Ll)},so.scale.category20b=function(){return so.scale.ordinal().range(Ml)},so.scale.category20c=function(){return so.scale.ordinal().range(bl)};var Jl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pe),Ll=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pe),Ml=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pe),bl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pe);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ua([.5],[0,1])},so.scale.identity=function(){return Aa([0,1])},so.svg={},so.svg.arc=function(){function e(){var e=Math.max(0,+i.apply(this,arguments)),u=Math.max(0,+n.apply(this,arguments)),A=o.apply(this,arguments)-ko,B=s.apply(this,arguments)-ko,c=Math.abs(B-A),C=A>B?0:1;if(e>u)D=u,u=e,e=D;if(c>=Ro)return t(u,C)+(e?t(e,1-C):"")+"Z";var D,d,f,h,E,p,F,m,g,H,G,I,v=0,y=0,J=[];if(h=(+l.apply(this,arguments)||0)/2){if(f=a===Nl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),!C)y*=-1;if(u)y=te(f/u*Math.sin(h));if(e)v=te(f/e*Math.sin(h))}if(u){E=u*Math.cos(A+y),p=u*Math.sin(A+y),F=u*Math.cos(B-y),m=u*Math.sin(B-y);var L=Math.abs(B-A-2*y)<=So?0:1;if(y&&ha(E,p,F,m)===C^L){var M=(A+B)/2;E=u*Math.cos(M),p=u*Math.sin(M),F=m=null}}else E=p=0;if(e){g=e*Math.cos(B-v),H=e*Math.sin(B-v),G=e*Math.cos(A+v),I=e*Math.sin(A+v);var b=Math.abs(A-B+2*v)<=So?0:1;if(v&&ha(g,H,G,I)===1-C^b){var N=(A+B)/2;g=e*Math.cos(N),H=e*Math.sin(N),G=I=null}}else g=H=0;if(c>Oo&&(D=Math.min(Math.abs(u-e)/2,+r.apply(this,arguments)))>.001){d=u>e^C?0:1;var K=D,x=D;if(So>c){var P=null==G?[g,H]:null==F?[E,p]:Ki([E,p],[G,I],[F,m],[g,H]),_=E-P[0],O=p-P[1],T=F-P[0],S=m-P[1],w=1/Math.sin(Math.acos((_*T+O*S)/(Math.sqrt(_*_+O*O)*Math.sqrt(T*T+S*S)))/2),R=Math.sqrt(P[0]*P[0]+P[1]*P[1]);x=Math.min(D,(e-R)/(w-1)),K=Math.min(D,(u-R)/(w+1))}if(null!=F){var k=Ea(null==G?[g,H]:[G,I],[E,p],u,K,C),Q=Ea([F,m],[g,H],u,K,C);if(D===K)J.push("M",k[0],"A",K,",",K," 0 0,",d," ",k[1],"A",u,",",u," 0 ",1-C^ha(k[1][0],k[1][1],Q[1][0],Q[1][1]),",",C," ",Q[1],"A",K,",",K," 0 0,",d," ",Q[0]);else J.push("M",k[0],"A",K,",",K," 0 1,",d," ",Q[0])}else J.push("M",E,",",p);if(null!=G){var V=Ea([E,p],[G,I],e,-x,C),U=Ea([g,H],null==F?[E,p]:[F,m],e,-x,C);if(D===x)J.push("L",U[0],"A",x,",",x," 0 0,",d," ",U[1],"A",e,",",e," 0 ",C^ha(U[1][0],U[1][1],V[1][0],V[1][1]),",",1-C," ",V[1],"A",x,",",x," 0 0,",d," ",V[0]);else J.push("L",U[0],"A",x,",",x," 0 0,",d," ",V[0])}else J.push("L",g,",",H)}else{if(J.push("M",E,",",p),null!=F)J.push("A",u,",",u," 0 ",L,",",C," ",F,",",m);if(J.push("L",g,",",H),null!=G)J.push("A",e,",",e," 0 ",b,",",1-C," ",G,",",I)}return J.push("Z"),J.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var i=ca,n=Ca,r=Ba,a=Nl,o=Da,s=da,l=fa;return e.innerRadius=function(t){if(!arguments.length)return i;else return i=ve(t),e},e.outerRadius=function(t){if(!arguments.length)return n;else return n=ve(t),e},e.cornerRadius=function(t){if(!arguments.length)return r;else return r=ve(t),e},e.padRadius=function(t){if(!arguments.length)return a;else return a=t==Nl?Nl:ve(t),e},e.startAngle=function(t){if(!arguments.length)return o;else return o=ve(t),e},e.endAngle=function(t){if(!arguments.length)return s;else return s=ve(t),e},e.padAngle=function(t){if(!arguments.length)return l;else return l=ve(t),e},e.centroid=function(){var e=(+i.apply(this,arguments)+ +n.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-ko;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Nl="auto";so.svg.line=function(){return pa(E)};var Kl=so.map({linear:Fa,"linear-closed":ma,step:ga,"step-before":Ha,"step-after":Ga,basis:Ma,"basis-open":ba,"basis-closed":Na,bundle:Ka,cardinal:ya,"cardinal-open":Ia,"cardinal-closed":va,monotone:Sa});Kl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var xl=[0,2/3,1/3,0],Pl=[0,1/3,2/3,0],_l=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var e=pa(wa);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ha.reverse=Ga,Ga.reverse=Ha,so.svg.area=function(){return Ra(E)},so.svg.area.radial=function(){var e=Ra(wa);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},so.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),u=t(this,o,e,s);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(i(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+n(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,i,n){var r=t.call(e,i,n),a=s.call(e,r,n),o=l.call(e,r,n)-ko,A=u.call(e,r,n)-ko;return{r:a,a0:o,a1:A,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(A),a*Math.sin(A)]}}function i(e,t){return e.a0==t.a0&&e.a1==t.a1}function n(e,t,i){return"A"+e+","+e+" 0 "+ +(i>So)+",1 "+t}function r(e,t,i,n){return"Q 0,0 "+n}var a=Ei,o=pi,s=ka,l=Da,u=da;return e.radius=function(t){if(!arguments.length)return s;else return s=ve(t),e},e.source=function(t){if(!arguments.length)return a;else return a=ve(t),e},e.target=function(t){if(!arguments.length)return o;else return o=ve(t),e},e.startAngle=function(t){if(!arguments.length)return l;else return l=ve(t),e},e.endAngle=function(t){if(!arguments.length)return u;else return u=ve(t),e},e},so.svg.diagonal=function(){function e(e,r){var a=t.call(this,e,r),o=i.call(this,e,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Ei,i=pi,n=Qa;return e.source=function(i){if(!arguments.length)return t;else return t=ve(i),e},e.target=function(t){if(!arguments.length)return i;else return i=ve(t),e},e.projection=function(t){if(!arguments.length)return n;else return n=t,e},e},so.svg.diagonal.radial=function(){var e=so.svg.diagonal(),t=Qa,i=e.projection;return e.projection=function(e){return arguments.length?i(Va(t=e)):t},e},so.svg.symbol=function(){function e(e,n){return(Ol.get(t.call(this,e,n))||za)(i.call(this,e,n))}var t=Wa,i=Ua;return e.type=function(i){if(!arguments.length)return t;else return t=ve(i),e},e.size=function(t){if(!arguments.length)return i;else return i=ve(t),e},e};var Ol=so.map({circle:za,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Sl)),i=t*Sl;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Tl),i=t*Tl/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Tl),i=t*Tl/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}});so.svg.symbolTypes=Ol.keys();var Tl=Math.sqrt(3),Sl=Math.tan(30*Qo);Lo.transition=function(e){for(var t,i,n=wl||++Vl,r=qa(e),a=[],o=Rl||{time:Date.now(),ease:vn,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],A=-1,B=u.length;++A<B;){if(i=u[A])$a(i,A,r,n,o);t.push(i)}}return Xa(a,r,n)},Lo.interrupt=function(e){return this.each(null==e?kl:Ya(qa(e)))};var wl,Rl,kl=Ya(qa()),Ql=[],Vl=0;Ql.call=Lo.call,Ql.empty=Lo.empty,Ql.node=Lo.node,Ql.size=Lo.size,so.transition=function(e,t){return e&&e.transition?wl?e.transition(t):e:so.selection().transition(e)},so.transition.prototype=Ql,Ql.select=function(e){var t,i,n,r=this.id,a=this.namespace,o=[];e=J(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],A=-1,B=u.length;++A<B;)if((n=u[A])&&(i=e.call(n,n.__data__,A,s))){if("__data__"in n)i.__data__=n.__data__;$a(i,A,a,r,n[a][r]),t.push(i)}else t.push(null)}return Xa(o,a,r)},Ql.selectAll=function(e){var t,i,n,r,a,o=this.id,s=this.namespace,l=[];e=L(e);for(var u=-1,A=this.length;++u<A;)for(var B=this[u],c=-1,C=B.length;++c<C;)if(n=B[c]){a=n[s][o],i=e.call(n,n.__data__,c,u),l.push(t=[]);for(var D=-1,d=i.length;++D<d;){if(r=i[D])$a(r,D,s,o,a);t.push(r)}}return Xa(l,s,o)},Ql.filter=function(e){var t,i,n,r=[];if("function"!=typeof e)e=R(e);for(var a=0,o=this.length;o>a;a++){r.push(t=[]);for(var i=this[a],s=0,l=i.length;l>s;s++)if((n=i[s])&&e.call(n,n.__data__,s,a))t.push(n)}return Xa(r,this.namespace,this.id)},Ql.tween=function(e,t){var i=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][i].tween.get(e);else return Q(this,null==t?function(t){t[n][i].tween.remove(e)}:function(r){r[n][i].tween.set(e,t)})},Ql.attr=function(e,t){function i(){this.removeAttribute(s)}function n(){this.removeAttributeNS(s.space,s.local)}function r(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(s);return i!==e&&(t=o(i,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?n:(e+="",function(){var t,i=this.getAttributeNS(s.space,s.local);return i!==e&&(t=o(i,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?zn:pn,s=so.ns.qualify(e);return ja(this,"attr."+e,t,s.local?a:r)},Ql.attrTween=function(e,t){function i(e,i){var n=t.call(this,e,i,this.getAttribute(r));return n&&function(e){this.setAttribute(r,n(e))}}function n(e,i){var n=t.call(this,e,i,this.getAttributeNS(r.space,r.local));return n&&function(e){this.setAttributeNS(r.space,r.local,n(e))}}var r=so.ns.qualify(e);return this.tween("attr."+e,r.local?n:i)},Ql.style=function(e,i,n){function r(){this.style.removeProperty(e)}function a(i){return null==i?r:(i+="",function(){var r,a=t(this).getComputedStyle(this,null).getPropertyValue(e);return a!==i&&(r=pn(a,i),function(t){this.style.setProperty(e,r(t),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){if(2>o)i="";for(n in e)this.style(n,e[n],i);return this}n=""}return ja(this,"style."+e,i,a)},Ql.styleTween=function(e,i,n){function r(r,a){var o=i.call(this,r,a,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}if(arguments.length<3)n="";return this.tween("style."+e,r)},Ql.text=function(e){return ja(this,"text",e,Za)},Ql.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)})},Ql.ease=function(e){var t=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][t].ease;if("function"!=typeof e)e=so.ease.apply(so,arguments);return Q(this,function(n){n[i][t].ease=e})},Ql.delay=function(e){var t=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][t].delay;else return Q(this,"function"==typeof e?function(n,r,a){n[i][t].delay=+e.call(n,n.__data__,r,a)}:(e=+e,function(n){n[i][t].delay=e}))},Ql.duration=function(e){var t=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][t].duration;else return Q(this,"function"==typeof e?function(n,r,a){n[i][t].duration=Math.max(1,e.call(n,n.__data__,r,a))}:(e=Math.max(1,e),function(n){n[i][t].duration=e}))},Ql.each=function(e,t){var i=this.id,n=this.namespace;if(arguments.length<2){var r=Rl,a=wl;try{wl=i,Q(this,function(t,r,a){Rl=t[n][i],e.call(t,t.__data__,r,a)})}finally{Rl=r,wl=a}}else Q(this,function(r){var a=r[n][i];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(e,t)});return this},Ql.transition=function(){for(var e,t,i,n,r=this.id,a=++Vl,o=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(e=[]);for(var t=this[l],A=0,B=t.length;B>A;A++){if(i=t[A])n=i[o][r],$a(i,A,o,a,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration});e.push(i)}}return Xa(s,o,a)},so.svg.axis=function(){function e(e){e.each(function(){var e,u=so.select(this),A=this.__chart__||i,B=this.__chart__=i.copy(),c=null==l?B.ticks?B.ticks.apply(B,s):B.domain():l,C=null==t?B.tickFormat?B.tickFormat.apply(B,s):E:t,D=u.selectAll(".tick").data(c,B),d=D.enter().insert("g",".domain").attr("class","tick").style("opacity",Oo),f=so.transition(D.exit()).style("opacity",Oo).remove(),h=so.transition(D.order()).style("opacity",1),p=Math.max(r,0)+o,F=Vr(B),m=u.selectAll(".domain").data([0]),g=(m.enter().append("path").attr("class","domain"),so.transition(m));d.append("line"),d.append("text");var H,G,I,v,y=d.select("line"),J=h.select("line"),L=D.select("text").text(C),M=d.select("text"),b=h.select("text"),N="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n)e=eo,H="x",I="y",G="x2",v="y2",L.attr("dy",0>N?"0em":".71em").style("text-anchor","middle"),g.attr("d","M"+F[0]+","+N*a+"V0H"+F[1]+"V"+N*a);else e=to,H="y",I="x",G="y2",v="x2",L.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),g.attr("d","M"+N*a+","+F[0]+"H0V"+F[1]+"H"+N*a);if(y.attr(v,N*r),M.attr(I,N*p),J.attr(G,0).attr(v,N*r),b.attr(H,0).attr(I,N*p),B.rangeBand){var K=B,x=K.rangeBand()/2;A=B=function(e){return K(e)+x}}else if(A.rangeBand)A=B;else f.call(e,B,A);d.call(e,A,B),h.call(e,B,B)})}var t,i=so.scale.linear(),n=Ul,r=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){if(!arguments.length)return i;else return i=t,e},e.orient=function(t){if(!arguments.length)return n;else return n=t in Wl?t+"":Ul,e},e.ticks=function(){if(!arguments.length)return s;else return s=uo(arguments),e},e.tickValues=function(t){if(!arguments.length)return l;else return l=t,e},e.tickFormat=function(i){if(!arguments.length)return t;else return t=i,e},e.tickSize=function(t){var i=arguments.length;if(!i)return r;else return r=+t,a=+arguments[i-1],e},e.innerTickSize=function(t){if(!arguments.length)return r;else return r=+t,e},e.outerTickSize=function(t){if(!arguments.length)return a;else return a=+t,e},e.tickPadding=function(t){if(!arguments.length)return o;else return o=+t,e},e.tickSubdivide=function(){return arguments.length&&e},e};var Ul="bottom",Wl={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function e(t){t.each(function(){var t=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(d,E);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return zl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,B=so.transition(t),c=so.transition(o);if(u)l=Vr(u),c.attr("x",l[0]).attr("width",l[1]-l[0]),n(B);if(A)l=Vr(A),c.attr("y",l[0]).attr("height",l[1]-l[0]),r(B);i(B)})}function i(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+B[+/e$/.test(e)]+","+c[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",B[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",B[1]-B[0])}function r(e){e.select(".extent").attr("y",c[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function a(){function a(){if(32==so.event.keyCode){if(!L)p=null,b[0]-=B[1],b[1]-=c[1],L=2;G()}}function d(){if(32==so.event.keyCode&&2==L)b[0]+=B[1],b[1]+=c[1],L=0,G()}function f(){var e=so.mouse(m),t=!1;if(F)e[0]+=F[0],e[1]+=F[1];if(!L)if(so.event.altKey){if(!p)p=[(B[0]+B[1])/2,(c[0]+c[1])/2];b[0]=B[+(e[0]<p[0])],b[1]=c[+(e[1]<p[1])]}else p=null;if(y&&h(e,u,0))n(I),t=!0;if(J&&h(e,A,1))r(I),t=!0;if(t)i(I),H({type:"brush",mode:L?"move":"resize"})}function h(e,t,i){var n,r,a=Vr(t),l=a[0],u=a[1],A=b[i],d=i?c:B,f=d[1]-d[0];if(L)l-=A,u-=f+A;if(n=(i?D:C)?Math.max(l,Math.min(u,e[i])):e[i],L)r=(n+=A)+f;else{if(p)A=Math.max(l,Math.min(u,2*p[i]-n));if(n>A)r=n,n=A;else r=A}if(d[0]!=n||d[1]!=r){if(i)s=null;else o=null;return d[0]=n,d[1]=r,!0}}function E(){f(),I.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),so.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),H({type:"brushend"})}var p,F,m=this,g=so.select(so.event.target),H=l.of(m,arguments),I=so.select(m),v=g.datum(),y=!/^(n|s)$/.test(v)&&u,J=!/^(e|w)$/.test(v)&&A,L=g.classed("extent"),M=X(m),b=so.mouse(m),N=so.select(t(m)).on("keydown.brush",a).on("keyup.brush",d);if(so.event.changedTouches)N.on("touchmove.brush",f).on("touchend.brush",E);else N.on("mousemove.brush",f).on("mouseup.brush",E);if(I.interrupt().selectAll("*").interrupt(),L)b[0]=B[0]-b[0],b[1]=c[0]-b[1];else if(v){var K=+/w$/.test(v),x=+/^n/.test(v);F=[B[1-K]-b[0],c[1-x]-b[1]],b[0]=B[K],b[1]=c[x]}else if(so.event.altKey)p=b.slice();I.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",g.style("cursor")),H({type:"brushstart"}),f()}var o,s,l=v(e,"brushstart","brush","brushend"),u=null,A=null,B=[0,0],c=[0,0],C=!0,D=!0,d=Yl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:B,y:c,i:o,j:s},i=this.__chart__||t;if(this.__chart__=t,wl)so.select(this).transition().each("start.brush",function(){o=i.i,s=i.j,B=i.x,c=i.y,e({type:"brushstart"})}).tween("brush:brush",function(){var i=Fn(B,t.x),n=Fn(c,t.y);return o=s=null,function(r){B=t.x=i(r),c=t.y=n(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})});else e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"})})},e.x=function(t){if(!arguments.length)return u;else return u=t,d=Yl[!u<<1|!A],e},e.y=function(t){if(!arguments.length)return A;else return A=t,d=Yl[!u<<1|!A],e},e.clamp=function(t){if(!arguments.length)return u&&A?[C,D]:u?C:A?D:null;if(u&&A)C=!!t[0],D=!!t[1];else if(u)C=!!t;else if(A)D=!!t;return e},e.extent=function(t){var i,n,r,a,l;if(!arguments.length){if(u)if(o)i=o[0],n=o[1];else{if(i=B[0],n=B[1],u.invert)i=u.invert(i),n=u.invert(n);if(i>n)l=i,i=n,n=l}if(A)if(s)r=s[0],a=s[1];else{if(r=c[0],a=c[1],A.invert)r=A.invert(r),a=A.invert(a);if(r>a)l=r,r=a,a=l}return u&&A?[[i,r],[n,a]]:u?[i,n]:A&&[r,a]}if(u){if(i=t[0],n=t[1],A)i=i[0],n=n[0];if(o=[i,n],u.invert)i=u(i),n=u(n);if(i>n)l=i,i=n,n=l;if(i!=B[0]||n!=B[1])B=[i,n]}if(A){if(r=t[0],a=t[1],u)r=r[1],a=a[1];if(s=[r,a],A.invert)r=A(r),a=A(a);if(r>a)l=r,r=a,a=l;if(r!=c[0]||a!=c[1])c=[r,a]}return e},e.clear=function(){if(!e.empty())B=[0,0],c=[0,0],o=s=null;return e},e.empty=function(){return!!u&&B[0]==B[1]||!!A&&c[0]==c[1]},so.rebind(e,l,"on")};var zl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xl=Ds.format=Fs.timeFormat,jl=Xl.utc,Zl=jl("%Y-%m-%dT%H:%M:%S.%LZ");Xl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?io:Zl,io.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},io.toString=Zl.toString,Ds.second=we(function(e){return new ds(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Ds.seconds=Ds.second.range,Ds.seconds.utc=Ds.second.utc.range,Ds.minute=we(function(e){return new ds(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Ds.minutes=Ds.minute.range,Ds.minutes.utc=Ds.minute.utc.range,Ds.hour=we(function(e){var t=e.getTimezoneOffset()/60;return new ds(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Ds.hours=Ds.hour.range,Ds.hours.utc=Ds.hour.utc.range,Ds.month=we(function(e){return e=Ds.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Ds.months=Ds.month.range,Ds.months.utc=Ds.month.utc.range;var ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$l=[[Ds.second,1],[Ds.second,5],[Ds.second,15],[Ds.second,30],[Ds.minute,1],[Ds.minute,5],[Ds.minute,15],[Ds.minute,30],[Ds.hour,1],[Ds.hour,3],[Ds.hour,6],[Ds.hour,12],[Ds.day,1],[Ds.day,2],[Ds.week,1],[Ds.month,1],[Ds.month,3],[Ds.year,1]],eu=Xl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Lt]]),tu={range:function(e,t,i){return so.range(Math.ceil(e/i)*i,+t,i).map(ro)},floor:E,ceil:E};$l.year=Ds.year,Ds.scale=function(){return no(so.scale.linear(),$l,eu)};var iu=$l.map(function(e){return[e[0].utc,e[1]]}),nu=jl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Lt]]);return iu.year=Ds.year.utc,Ds.scale.utc=function(){return no(so.scale.linear(),iu,nu)},so.text=ye(function(e){return e.responseText}),so.json=function(e,t){return Je(e,"application/json",ao,t)},so.html=function(e,t){return Je(e,"text/html",oo,t)},so.xml=ye(function(e){return e.responseXML}),so}),define("d3",["d3/d3"],function(e){return e}),define("inf-ria-page/region/NotFoundView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/tpl!./NotFound.tpl.html","d3","babel-runtime/helpers/interop-require-default","underscore","inf-ria/mvc/BaseView","inf-ria/decorators","./ChinaMap","./topojson","./places"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A){var B=r["default"](n),c=r["default"](a),C=r["default"](o),D=r["default"](l),d=r["default"](u),f=r["default"](A),h=function(i){function n(){t["default"](this,r),i.call(this),this.template="TPL_inf_ria_page_region_notfound"}e["default"](n,i),n.prototype.enterDocument=function(){var e=this;i.prototype.enterDocument.call(this);var t=this.viewContext.getGroup("switch");if(t)t.on("click",function(t){var i=t.target.get("toRegion");e.switchRegion(i)});var n=this.model.get("regionList");this._renderChinaMap(c["default"].pluck(n,"id"))},n.prototype.switchRegion=function(e){this.fire("regionSelect",{region:e})},n.prototype._renderChinaMap=function(e){var t=this,i=420,n=310,r=B["default"].select(".map").append("svg").attr("width",i).attr("height",n),a=B["default"].geo.mercator().center([107,31]).scale(430).translate([i/2,n/2]),o=B["default"].geo.path().projection(a),s={top:{x:-42,y:-42,lx:0,ly:-25,d:"M3.000,-0.000 L79.000,-0.000 C80.657,-0.000 82.000,1.343 82.000,3.000 L82.000,23.000 C82.000,24.657 80.657,26.000 79.000,26.000 L47.977,26.000 L42.062,35.000 L35.875,26.000 L3.000,26.000 C1.343,26.000 -0.000,24.657 -0.000,23.000 L-0.000,3.000 C-0.000,1.343 1.343,-0.000 3.000,-0.000 Z"},right:{x:8,y:-13,lx:50,ly:4,d:"M11.000,0.000 L78.000,0.000 C79.657,0.000 81.000,1.343 81.000,3.000 L81.000,23.000 C81.000,24.657 79.657,26.000 78.000,26.000 L11.000,26.000 C9.343,26.000 8.000,24.657 8.000,23.000 L8.000,18.060 L0.000,13.105 L8.000,7.991 L8.000,3.000 C8.000,1.343 9.343,0.000 11.000,0.000 Z"},bottom:{x:-36,y:8,lx:0,ly:32,d:"M70.000,7.000 L41.908,7.000 L36.000,0.000 L30.702,7.000 L3.000,7.000 C1.343,7.000 0.000,8.343 0.000,10.000 L0.000,30.000 C0.000,31.657 1.343,33.000 3.000,33.000 L70.000,33.000 C71.657,33.000 73.000,31.657 73.000,30.000 L73.000,10.000 C73.000,8.343 71.657,7.000 70.000,7.000 Z"}},l=d["default"].feature(D["default"],D["default"].objects.china),u=r.append("g");u.selectAll("path").data(l.features).enter().append("path").attr("class","province").style("fill","#e6f1fb").attr("d",o);var A=r.selectAll(".location").data(f["default"].location).enter().append("g").attr("gp",function(e){return e.group}).attr("class",function(t){var i="location";if(-1!==c["default"].indexOf(e,t.name))t.able=!0,i+=" able";return i}).attr("transform",function(e){var t=a([e.log,e.lat]);return"translate("+t[0]+","+t[1]+")"});A.append("circle").attr("r",5),A.append("path").attr("d",function(e){return s[e.toolTip].d}).attr("transform",function(e){var t=s[e.toolTip];return"translate("+t.x+","+t.y+")"});var C=this.getRegion();A.append("text").text(function(e){return C.getLabel(e.name)}).attr("x",function(e){return s[e.toolTip].lx}).attr("y",function(e){return s[e.toolTip].ly}).attr("text-anchor","middle").attr("fill","white");var h={};r.selectAll("[gp] circle").attr("class",function(e){if(e.able)h[e.group]=!0;if(h[e.group])return"able-group";else return void 0}),r.selectAll("g.able").on("click",function(e){return t.switchRegion(e.name)})};var r=n;return n=s.accessor("region")(n)||n}(C["default"]);module.exports=h}),define("inf-ria-page/region/NotFoundModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","inf-i18n","inf-ria/mvc/BaseModel","inf-ria/decorators"],function(exports,module,e,t,i,n,r,a,o){var s=n["default"](i),l=n["default"](r),u=n["default"](a),A=function(i){function n(){t["default"](this,r),i.apply(this,arguments)}e["default"](n,i),n.prototype.getCity=function(e){var t=e;if(-1!==e.indexOf("-"))t=e.split("-"),t=t[1]?t[1]:t[0],t=t.replace(/\s+/g,"");return t},n.prototype.prepare=function(){var e=this.getRegion(),t=this.getService(),i=[],n=t.current();s["default"].each(n.getRegion(),function(e,t){i.push({label:e,id:t})});var r=s["default"].sprintf(l["default"]("%s暂不支持 “%s” 区域的使用"),n.getFullName(),this.getCity(e.getCurrentRegion().label));this.set("regionList",i),this.set("errorMessage",r)};var r=n;return n=o.accessor("service")(n)||n,n=o.accessor("region")(n)||n}(u["default"]);module.exports=A}),define("inf-ria-page/region/NotFound",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-decorated-class","babel-runtime/helpers/class-call-check","babel-runtime/core-js/symbol","inf-ria/mvc/BaseAction","babel-runtime/helpers/interop-require-default","inf-ria/decorators"],function(exports,module,e,t,i,n,r,a,o){
var s=a["default"](r),l=function(r){function a(){i["default"](this,s),r.apply(this,arguments)}e["default"](a,r),t["default"](a,[{key:n["default"](),decorators:[o.viewOn("regionSelect")],value:function(e){var t=this,i=this.getEventBus();this.getRequestManager().setRegion({regionId:e.region}).then(function(){return i.fire("region_changed")}).then(function(){return t.redirect("/")})}}]);var s=a;return a=o.accessor("requestManager")(a)||a,a=o.accessor("eventBus")(a)||a}(s["default"]);module.exports=l}),define("inf-ria-page/region/ChinaMap",["exports","module"],function(exports,module){module.exports={type:"Topology",transform:{scale:[.0023415374016230355,.0018039985796827979],translate:[73.60225630700012,18.19318268400005]},objects:{china:{type:"GeometryCollection",geometries:[{arcs:[[0,1,2,3,4,5,6]],type:"Polygon",properties:{id:1,name:"甘肃"}},{arcs:[[7,8,9,-4]],type:"Polygon",properties:{id:2,name:"青海"}},{arcs:[[10,11,12,13,14]],type:"Polygon",properties:{id:3,name:"广西"}},{arcs:[[15,-14,16,17,18]],type:"Polygon",properties:{id:4,name:"贵州"}},{arcs:[[19,20,-19,21,22]],type:"Polygon",properties:{id:5,name:"重庆"}},{arcs:[[23,24,25,26]],type:"Polygon",properties:{id:6,name:"北京"}},{arcs:[[[27]],[[28,29,30,31]]],type:"MultiPolygon",properties:{id:7,name:"福建"}},{arcs:[[32,33,34,35,36,37]],type:"Polygon",properties:{id:8,name:"安徽"}},{arcs:[[[38]],[[39]],[[40]],[[41,-30,42,43,44,-11,45]]],type:"MultiPolygon",properties:{id:9,name:"广东"}},{arcs:[[-9,46,47,48,49]],type:"Polygon",properties:{id:10,name:"西藏"}},{arcs:[[-5,-10,-50,50]],type:"Polygon",properties:{id:11,name:"新疆"}},{arcs:[[51]],type:"Polygon",properties:{id:12,name:"海南"}},{arcs:[[52,-1,53]],type:"Polygon",properties:{id:13,name:"宁夏"}},{arcs:[[54,55,56,-23,57,-2,-53,58]],type:"Polygon",properties:{id:14,name:"陕西"}},{arcs:[[59,-55,60,61]],type:"Polygon",properties:{id:15,name:"山西"}},{arcs:[[-35,62,63,-20,-57,64]],type:"Polygon",properties:{id:16,name:"湖北"}},{arcs:[[65,-46,-15,-16,-21,-64]],type:"Polygon",properties:{id:17,name:"湖南"}},{arcs:[[-58,-22,-18,66,-47,-8,-3]],type:"Polygon",properties:{id:18,name:"四川"}},{arcs:[[-17,-13,67,-48,-67]],type:"Polygon",properties:{id:19,name:"云南"}},{arcs:[[[68]],[[-25,69]],[[70,71,72,-27,73,74,75,76,-62,77]]],type:"MultiPolygon",properties:{id:20,name:"河北"}},{arcs:[[78,-36,-65,-56,-60,-77]],type:"Polygon",properties:{id:21,name:"河南"}},{arcs:[[[79]],[[80,-71,81,82]]],type:"MultiPolygon",properties:{id:22,name:"辽宁"}},{arcs:[[83,-37,-79,-76,84]],type:"Polygon",properties:{id:23,name:"山东"}},{arcs:[[85,-74,-26,-70,-24,-73]],type:"Polygon",properties:{id:24,name:"天津"}},{arcs:[[86,-31,-42,-66,-63,-34]],type:"Polygon",properties:{id:25,name:"江西"}},{arcs:[[87,88,-38,-84,89]],type:"Polygon",properties:{id:26,name:"江苏"}},{arcs:[[[90,91,-88]],[[92]]],type:"MultiPolygon",properties:{id:27,name:"上海"}},{arcs:[[[93]],[[94]],[[-92,95,-32,-87,-33,-89]]],type:"MultiPolygon",properties:{id:28,name:"浙江"}},{arcs:[[96,-83,97,98]],type:"Polygon",properties:{id:29,name:"吉林"}},{arcs:[[99,-98,-82,-78,-61,-59,-54,-7,100]],type:"Polygon",properties:{id:30,name:"内蒙古"}},{arcs:[[-99,-100,101]],type:"Polygon",properties:{id:31,name:"黑龙江"}},{arcs:[[[102]],[[103,-44]]],type:"MultiPolygon",properties:{id:32,name:"香港"}},{arcs:[[[104]],[[105]]],type:"MultiPolygon",properties:{id:33,name:"澳门"}},{arcs:[[106]],type:"Polygon",properties:{id:34,name:"台湾"}}]}},arcs:[[[13135,10647],[45,22],[96,-16],[33,-89],[38,-18],[29,-67],[110,-69],[60,-106],[-43,-49],[21,-79],[53,-92],[22,-72],[-3,-82],[-37,-27],[-14,-69],[48,-98],[109,-53],[61,-93],[46,17],[55,-20],[20,-35],[42,-17],[44,-67],[27,-7],[38,40],[13,122],[-29,81],[18,16],[127,-12],[62,46],[-30,51],[31,14],[13,94],[-56,75],[-30,-3],[-60,40],[-46,-5],[0,93],[-24,43],[23,25],[4,81],[42,11],[20,60],[-31,54],[25,37],[4,102],[63,4],[61,-46],[108,6],[42,-27]],[[14385,10463],[6,-89],[86,-9],[21,-29],[62,-8],[82,-39],[66,-87],[134,-29],[37,-47],[70,-16],[42,-40],[-23,-74],[21,-56],[-10,-66],[-78,-69],[7,-100],[40,-85],[6,-86],[-53,-67],[-93,-5],[-52,15],[-75,-37],[-24,24],[-77,29],[-30,-50],[68,-139],[-52,-15],[-60,8],[-31,-22],[-75,9],[-47,-28],[-68,82],[-58,28],[-150,-5],[-31,-28],[25,-93],[-25,-67],[-74,-88],[21,-35],[56,0],[49,-34],[26,-41],[-8,-72],[-43,15],[14,-80],[-31,-17],[-36,-91],[21,-41],[1,-93],[33,-56],[-27,-31],[-44,42],[-95,-32],[-42,31],[-102,-66],[-37,-113],[71,-34],[-1,-112],[-10,-29],[-106,-52],[-60,12]],[[13622,8156],[-29,3],[-19,-49],[21,-28],[-71,-73],[-52,-18],[-49,16],[-57,-14],[-25,15],[-83,10],[-38,17],[-65,67],[-50,21],[14,59],[36,61],[-33,43],[-20,73],[5,50],[-50,70],[-8,75],[-27,24],[-149,5],[-95,21],[15,51],[-88,-28],[-71,36],[-18,78],[4,81],[-14,34],[-51,25],[-30,45],[-63,-12],[-79,-60],[9,-46],[-76,-13],[-52,-40],[-63,-25],[73,-120],[6,-64],[54,-39],[0,-41],[-87,-49],[-63,-51],[-14,-35],[-40,-2],[-60,-53],[-14,81],[39,76],[-17,78],[-45,-9]],[[12033,8502],[-70,-10],[-16,65],[-35,41],[-41,-33],[-102,11],[-13,103],[-77,44],[-67,125],[10,77],[51,51],[43,-26],[94,-21],[29,-23],[123,-38],[15,-31],[57,-37],[35,40],[64,21],[28,49],[58,47],[-27,80],[-93,53],[-8,39],[-51,-17],[-17,40],[72,47],[-4,31],[41,54],[110,63],[46,82],[-24,40],[-13,73],[59,16],[46,55],[72,-6],[8,53],[-18,76],[9,46],[59,12],[59,-16],[10,88],[-29,52],[46,73],[-62,51],[-33,9],[-20,96],[-31,61],[-37,27],[27,80],[-92,85],[16,74],[23,42],[-53,63],[-77,57],[-45,14],[-46,41],[15,38],[-56,101],[-73,-114],[-51,48],[-151,104],[-104,91],[-177,79],[-35,81],[-84,31],[-92,99],[-25,-51],[31,-51],[-33,-13],[-119,48],[-103,83],[-26,48],[-170,160],[-2,37],[-57,14],[-77,47],[-76,-66],[-68,5],[-51,37],[-26,-51],[-83,-72],[-302,193],[-96,29],[-47,-4],[-28,-51],[13,-59],[-5,-140],[-16,-58],[12,-40],[-11,-116],[-43,-1],[-143,63],[-3,44],[-80,43],[-111,29],[-20,40],[-50,18],[-72,50],[-67,78],[-45,18],[-66,75],[-106,-20],[-142,50],[-40,32],[-65,13],[-155,2],[-89,-20],[-79,12],[-94,-20],[-97,-46],[-58,6],[-87,-26]],[[8257,11618],[5,167],[-75,198],[2,53],[61,117],[3,169],[47,38],[106,-12],[125,66],[78,130],[107,156],[243,267],[204,112],[185,38],[120,-15],[39,14],[74,78],[-8,80],[11,200],[20,48],[118,75]],[[9722,13597],[352,36]],[[10074,13633],[280,-647],[-85,-91],[26,-59],[103,-127],[161,-147],[-39,-174],[120,-4],[55,19],[77,88],[142,61],[144,3],[72,33],[148,-3],[71,-89],[12,-66],[-28,-55],[-53,-64],[-49,-109],[-117,-76],[-83,-105],[109,-2],[152,-82],[62,-18],[42,-38],[9,-42],[63,-31],[38,-48],[105,0],[18,-16],[9,-117],[15,-35],[68,-58],[57,11],[29,-83],[71,-67],[71,-34],[107,1],[81,92],[1,20],[-85,95],[243,96],[85,-33],[159,-32],[136,96],[77,36],[122,37],[117,9],[16,-74],[70,-120],[-23,-73],[-55,-47],[-27,-64],[-79,-93],[-138,-86],[22,-164],[-57,-21],[-1,-57],[22,-87],[103,-37],[79,-83],[104,-91],[66,-40],[41,6]],[[12033,8502],[-37,-61],[-11,-56],[26,-29],[-35,-77],[-85,60],[-96,-37],[-24,-23],[-14,-105],[43,-45],[-26,-94],[-115,-32],[-88,31],[-40,-130],[-30,-27],[-25,45],[37,44],[-26,58],[-43,50],[-61,-18],[-14,-50],[-44,19],[16,62],[-47,85],[-88,12],[-31,-20],[-30,-98],[-81,51],[-94,28],[-27,62],[-53,41],[-107,57],[-33,71],[-16,103],[-44,66],[5,38],[-80,90],[-67,4],[-38,52],[-76,11],[-92,-53],[-31,0],[-21,78],[-37,-41],[-97,-34],[3,-143],[37,-28],[27,-60],[79,-26],[-47,-43],[-49,-74],[2,-83],[-61,-82],[29,-109],[122,-87]],[[10298,7955],[-36,-55],[-29,22],[-86,9],[-15,-43],[28,-21],[-14,-69],[-45,-31],[0,-72],[-56,-36],[-45,7],[-113,-27],[0,-75],[18,-68],[-133,21],[-88,86],[-41,-21],[-14,-51],[27,-24],[1,-72],[-51,52],[-105,8],[-110,26],[-40,-11],[-39,39],[-22,79],[30,78],[-18,42],[-53,41],[-84,9],[-47,42],[-6,51],[-78,59],[-14,32],[-60,44],[-113,-73],[-60,-10],[-28,-24],[-100,9],[-61,43],[-59,-5],[-37,-26],[-70,34],[-54,45],[-80,2],[-11,40],[-67,-4],[-52,18],[-33,-11],[-79,16],[-104,-14],[-11,69],[-47,9],[-47,-20],[-70,66],[-39,8],[-76,54],[-71,106],[-7,37],[-73,0],[-26,-46],[-76,-9],[-63,-54],[-61,8],[-96,70],[-48,4],[-50,62],[-1,55],[-27,43],[-71,29],[-41,107],[-58,48],[-45,102],[64,58],[23,103],[-19,13],[-2,81],[-29,103],[43,59],[-16,45],[-87,8],[-5,73],[-50,77],[13,72],[105,56],[-17,36],[10,74],[32,103],[-89,7],[-41,22],[-21,60],[34,36],[69,16]],[[6865,9916],[81,-9],[45,22],[18,82],[65,-69],[195,-10],[88,-55],[37,1],[84,34],[10,37],[-32,96],[-23,105],[-86,30],[-50,78],[10,68],[41,49],[106,20],[99,38],[12,58],[-35,42],[-68,163],[-50,17],[-53,49],[-170,95],[-11,38],[13,82],[-105,183],[-19,59],[69,19],[71,37],[68,50],[7,28],[153,14],[121,25],[84,40],[59,5],[211,64],[89,60],[258,57]],[[16397,3627],[-27,-21],[0,-54],[31,-27],[-6,-48],[24,-47],[-31,-58],[-45,-25],[12,-133],[-39,-45],[-6,-34],[-58,-4],[-24,-102],[-55,-25],[-1,-30],[-33,-70],[-13,-88],[3,-74],[18,-48],[-26,-80],[-72,-89],[-49,-4],[-18,-57],[-115,-32],[-48,-220],[-75,-18],[-57,22],[9,-50],[0,-117],[-59,-8],[-32,12],[-75,-17],[-21,-99],[-72,-62]],[[15437,1875],[-42,-31],[-33,34],[-18,-50],[-40,-20],[-52,2],[-43,-23],[-70,11],[39,41],[-3,51],[-29,19],[-41,-17],[-30,33],[-64,-9],[-77,90],[-7,51],[-45,-21],[24,-97],[-26,-26],[-52,36],[-30,-63],[-50,-8],[-62,-53],[-57,64],[-48,31],[-56,-28],[-113,-4],[-32,66],[-43,-2],[-46,45],[-19,53],[-67,43],[-60,21],[-22,47],[-4,73],[-19,55],[-27,5],[-12,53],[18,82],[48,2],[23,65],[-2,58],[-27,37],[-77,32],[-73,-40],[-35,6],[-13,46],[-87,16],[-62,-39],[-70,77],[-59,9],[-13,57]],[[13632,2755],[139,197],[58,-27],[62,39],[10,117],[18,65],[-16,58],[-79,63],[-42,-34],[-36,-3],[-110,59],[-36,-49],[-54,44],[-29,-18],[-35,46],[2,79],[-49,67],[-43,-8],[-89,28],[-10,-57],[-26,-14],[-29,35],[-42,97],[-3,67],[20,24]],[[13213,3630],[80,-61],[53,41],[10,27],[58,24],[38,87],[45,27],[36,-39],[39,13],[27,-18],[27,-59],[71,-15],[48,-41],[55,7],[37,-45],[74,74],[10,53],[-18,46],[64,12],[120,68],[34,38],[93,13],[47,33],[8,54],[-17,48],[21,32],[94,34],[66,-95],[43,-96],[61,29],[58,-63],[36,-4],[45,35],[43,2],[26,31],[2,65],[69,85],[47,-13],[70,-55],[54,103],[34,-44],[71,14],[36,26],[26,117],[27,-31],[65,-4],[42,142],[24,22]],[[15312,4349],[63,8],[29,-38],[2,-53],[41,11],[4,64],[24,11],[32,76],[64,-17],[-12,-63],[44,8],[47,-41],[40,75],[61,33],[23,29],[17,70],[47,-10],[16,-32],[66,0],[24,60],[80,-43],[55,-14],[2,-39],[-23,-155],[23,-34],[65,21],[1,-58],[-37,-40],[-4,-126],[-26,-58],[-38,-19],[-22,-70],[-51,-48],[-17,-70],[22,-50],[31,5],[20,56],[64,57],[65,-23],[15,-48],[-14,-42],[19,-84],[-20,-62],[38,-21],[64,76],[56,-11],[55,8],[30,-21]],[[15228,5717],[2,-102],[39,-32],[-24,-94],[27,-36],[-22,-33],[7,-90],[37,-39],[14,-49],[-12,-50],[-91,-64],[-81,-101],[-49,-41],[-47,-58],[36,-36],[32,5],[62,59],[26,-30],[32,40],[88,-12],[26,-38],[4,-47],[-27,-42],[26,-42],[-46,-39],[-44,-15],[35,-45],[11,-61],[-37,-62],[-8,-62],[44,-24],[24,-128]],[[13213,3630],[2,40],[69,113],[-8,46],[13,61],[-21,48],[-44,46],[-6,58],[-51,12],[-5,40],[-49,48],[49,106],[-12,51],[45,46],[20,132],[55,61],[-49,114],[-86,35],[-60,-12],[-28,14],[-56,-76],[-82,18],[-30,45],[7,57],[-25,37],[26,45],[0,42],[-33,54],[-2,55],[92,132],[30,5],[82,-71],[73,94],[42,-52],[65,-18],[81,10],[37,-12],[90,56],[49,-7],[43,179]],[[13536,5282],[27,21],[70,8],[52,-53],[98,37],[70,6],[27,18],[62,-7],[42,33],[-20,91],[-36,31],[-7,38],[-38,28],[-43,-19],[-44,6],[-25,65],[-77,28],[-20,91],[27,56],[89,14],[39,80],[88,-94],[34,-15],[48,9]],[[13999,5754],[46,-18],[31,125],[28,-72],[-28,-70],[80,-4],[6,49],[28,10],[3,67],[23,39],[36,2],[24,46],[56,-3],[58,-41],[60,38],[27,65],[-33,46],[3,59],[28,35],[26,-33],[97,-27],[2,-54],[37,-31],[77,44],[98,7],[35,-166],[-16,-49],[108,-49],[0,-125],[63,56],[23,-28],[-24,-102],[92,-23],[65,3],[26,128],[44,39]],[[15371,7508],[56,-56],[3,-42],[84,-23],[77,-67],[28,-116],[-29,-37],[9,-120],[-26,-43],[-30,-1],[-54,34],[-52,-29],[-46,-65],[-105,-75],[-63,8],[-29,-17],[-92,23],[-41,-32],[-67,-15],[-18,28],[-41,-42],[-60,-6],[-22,-49],[64,-46],[3,-239],[-59,-30],[20,-53],[28,-7],[43,75],[35,-89],[76,-32],[0,-76],[20,-85],[40,-23],[27,-52],[56,-61]],[[15206,6048],[29,-30],[-13,-66],[1,-80],[14,-32],[-29,-55],[31,-31],[-11,-37]],[[13999,5754],[-36,55],[-16,109],[-107,58],[-56,-30],[-57,42],[-19,126],[-24,26],[-95,35],[-7,54],[-39,22],[-10,64],[52,65],[60,25],[2,31],[65,35],[13,92],[-78,64],[65,70],[35,82],[142,-44],[49,-68],[62,24],[63,41],[37,-38],[42,-116],[23,-13],[112,12],[84,100],[61,145],[45,61],[-9,84],[22,33],[98,34],[48,-40],[34,35],[1,42],[32,50],[11,101],[69,61],[13,75],[78,55],[47,79],[-7,46],[-91,72],[-8,28],[32,56],[32,15],[-13,47],[56,7]],[[14912,7763],[115,-84],[114,-58],[57,-56],[27,-53],[36,-22],[110,18]],[[18686,12231],[-19,-82],[-31,-10]],[[18636,12139],[-107,-32],[-68,1],[-36,-43],[16,-38],[60,-64],[-20,-49]],[[18481,11914],[-35,-46]],[[18446,11868],[-81,5],[-75,-50],[-18,-44],[-59,35],[-16,37],[-114,2],[-80,-37],[-59,52],[-66,22],[-12,59],[32,50],[-6,47],[-30,21],[64,74],[104,31],[53,79],[-92,136],[62,39],[52,-8],[57,35],[33,51],[36,-6],[72,29],[-9,60],[92,73],[9,-51],[101,-106],[63,-40],[60,8],[98,-12],[-7,-40],[-72,-15],[-25,-40],[22,-26],[6,-63],[45,-44]],[[19721,4115],[17,-39],[-11,-46],[-42,26],[36,59]],[[19994,4996],[-61,61],[-22,-26],[84,-64],[-27,-31],[-32,8],[-20,-103],[-47,1],[-43,-50],[44,-23],[-21,-83],[-41,4],[40,73],[-56,6],[-38,-79],[-18,80],[-35,-19],[-63,17],[-14,-25],[1,-74],[51,2],[47,-23],[15,-69],[-71,-14],[12,-62],[28,6],[34,55],[23,-35],[-41,-37],[-47,-9],[-92,-165],[-113,58],[22,-67],[43,-15],[40,13],[54,48],[57,-43],[-36,-44],[-10,-111],[-24,7],[-33,-40],[43,-38],[37,-95],[-70,-12],[10,57],[-60,26],[-26,46],[-28,-68],[-55,-41],[48,-50],[28,5],[24,-46],[-24,-30],[-48,-7],[-14,25],[-66,0],[-47,-100],[43,-16],[8,-33],[-120,-61],[13,-68],[-75,-84],[-64,31],[-30,-23],[-94,21],[-37,-25],[-21,-71],[56,-103],[-59,-38],[-19,11],[-21,-103],[-85,-41],[-48,-35],[-20,16],[-31,-72],[-73,-15],[-13,-59],[-38,-22]],[[18608,3006],[-59,68],[-47,188],[18,59],[-36,116],[-58,88],[-1,66],[-60,-9],[-32,-22],[-67,125],[-110,3],[-34,26],[-63,13]],[[18059,3727],[0,46],[-19,108],[28,24],[30,63],[21,158],[41,71],[5,56],[80,50],[31,59],[10,50],[-9,75],[44,66],[40,-6],[10,53],[-33,39],[-16,71],[18,99],[53,66],[108,18],[50,50],[49,92],[-23,39],[10,46],[-5,76],[48,87],[26,27],[-1,47],[111,61],[26,-56],[60,-29],[34,68],[101,24],[30,34],[101,32],[-8,67],[42,38]],[[19152,5596],[22,-14],[101,35],[26,-63],[-13,-19],[-8,-114],[31,-35],[30,-104],[14,-95],[35,-39],[77,-33],[34,2],[54,49],[33,7],[19,62],[44,16],[30,-86],[3,-55],[33,-53],[126,15],[35,32],[84,-12],[26,-46],[6,-50]],[[19657,7173],[-23,-159],[-32,-43],[-25,-72],[-39,20],[-47,-69],[34,-18],[18,-63],[-65,-50],[-65,-1],[-53,22],[-23,-15],[12,-57],[-24,-35],[18,-98],[-32,-57],[-33,-28],[-8,-55],[-71,-58],[-79,-96],[-84,-24]],[[19036,6217],[-27,61],[-54,30],[-37,-13],[-82,3],[-25,28],[-52,9],[-53,84],[1,32],[-56,-1],[-21,43],[-43,2],[-24,-39],[5,-72],[-53,-31],[-29,-52],[-60,-8],[-42,45],[11,45],[53,27],[38,91],[-41,56],[-60,16],[-68,-92],[-44,-5],[-65,-52],[-38,4]],[[18170,6428],[-30,99],[-16,141],[-55,52],[-15,41],[30,54],[-76,111],[3,37],[37,17],[-2,42],[76,71],[-38,25],[-30,53],[-46,8],[-43,41],[-50,-20],[-76,131]],[[17839,7331],[7,52],[61,124],[56,27],[102,6],[11,127],[-17,205],[-42,42],[-41,12],[-20,-49],[-35,0],[-85,87],[-71,17],[-6,149],[-111,55],[-17,69],[36,22],[74,-22],[46,21],[40,72],[-12,68],[13,44],[41,53],[82,24],[-26,88],[24,49],[-30,33],[40,83],[34,9],[46,-32],[51,-4],[4,-53],[47,-70],[44,-33],[101,40],[11,30],[84,60],[-42,93],[13,40],[-9,52],[-65,-6],[-104,95],[-3,66]],[[18171,9076],[50,6],[47,35]],[[18268,9117],[22,0],[84,-86],[61,-18],[14,-29],[63,-6],[9,-63],[27,-67],[54,-35],[69,-7],[30,-27],[48,11],[63,-38],[40,-55],[3,-88],[159,23],[22,-40],[-104,-254],[63,-47],[59,17],[9,-143],[26,-81],[42,-25],[138,0],[11,59],[47,74],[58,-5],[84,-139],[4,-65],[-51,-82],[-80,83],[-60,9],[-85,-21],[49,-67],[7,-63],[-14,-57],[-58,-21],[-7,-34],[-49,-47],[-14,-59],[55,-49],[-1,-38],[88,-49],[-1,-30],[76,-11],[9,-58],[-23,-70],[-32,-21],[27,-73],[111,7],[38,26],[65,-11],[20,-41],[114,-33]],[[15711,1609],[58,-8],[-2,-60],[-118,30],[62,38]],[[16767,1982],[-55,-78],[-10,41],[29,39],[36,-2]],[[17100,2444],[-65,57],[15,22],[47,-49],[3,-30]],[[17222,4022],[36,-8],[6,-92],[38,22],[70,-9],[64,52],[60,12],[5,-26],[54,-39],[-11,-70],[20,-25],[-77,-36],[-58,-41],[-13,-53],[-35,-70],[-46,-35],[41,-55],[58,-53],[31,31],[104,38],[52,-20],[35,45],[44,21],[39,-13],[43,34],[77,22],[77,-98],[45,-35],[40,15],[-21,97],[16,63],[43,31]],[[18608,3006],[-64,24],[-45,-12],[-27,-63],[5,-41],[-50,-69],[-8,-38],[-84,-82],[12,-50],[-29,-44],[-49,-6],[-35,19],[-54,-55],[-41,2],[-50,-35],[-63,2],[-67,48],[-30,-8],[-26,-77],[-64,-26],[-18,52],[-36,26],[-77,-22],[-86,-107],[-52,4],[4,78],[-15,23],[-66,-33],[-17,-25],[6,-66],[34,-30],[-43,-34],[-16,52],[-35,37],[-71,-32]],[[17351,2418],[-63,-14]],[[17288,2404],[-56,-3],[-26,-40],[-50,122],[-13,49],[-34,21],[-34,100],[-34,6],[-58,-61],[54,-58],[-24,-20],[68,-91],[-22,-76],[18,-111],[-45,-46],[-77,16],[-31,-78],[-31,-10],[-20,41],[-36,25],[1,-101],[-31,-48],[-33,0],[-23,50],[-77,-64],[-16,-41],[-70,29],[-34,-53],[-51,-14],[-31,59],[-77,-28],[-129,-88],[-25,-41],[-82,2],[-59,-19],[-40,18],[-144,-82],[-34,11],[-49,-52],[-17,-45],[-66,-7],[-26,89],[-25,-50],[14,-69],[-54,-41],[-48,-57],[0,-76],[98,-13],[-20,-55],[30,-78],[30,-10],[24,-49],[-58,-99],[-51,-26],[-65,-3],[-43,29],[-5,65],[-83,55],[-8,55],[-24,8],[12,106],[-36,8],[-12,51],[20,72],[-16,36],[44,51],[14,78],[42,19],[5,55],[-49,-9],[-23,57]],[[16397,3627],[30,33],[33,-1],[9,65],[-19,21],[40,139],[104,-20],[88,-28],[21,-63],[41,-31],[77,11],[-13,51],[4,69],[-34,34],[12,46],[74,50],[54,50],[88,-67],[43,1],[25,-33],[56,19],[49,-2],[43,51]],[[10298,7955],[128,-44],[81,-60],[7,-58],[38,-68],[61,-80],[-14,-59],[11,-41],[48,-71],[14,-43],[125,-136],[-50,-68],[-36,47],[-30,-33],[3,-38],[78,-109],[-11,-49],[76,-86],[-21,-46],[24,-113],[11,-175],[20,-50],[10,-77],[-22,-53],[-8,-94],[24,-49],[8,-141],[20,-46]],[[10893,6115],[-51,-13],[7,-71],[-56,-145],[-38,105],[-52,-15],[-11,-53],[17,-67],[-38,-48],[22,-137],[-28,-59],[-36,-38],[-34,1],[-47,58],[-30,-84],[-49,-33]],[[10469,5516],[-53,39],[1,30],[-41,48],[-67,15],[-18,59],[-36,-4],[-37,27],[-35,-82],[-4,-53],[-48,-38],[-89,82],[-64,-20],[-35,54],[-79,90],[-37,11],[-36,-42],[-43,-8],[3,51],[70,55],[-9,54],[-51,103],[-39,24],[-7,34],[-66,-40],[-9,46],[61,35],[21,40],[-69,7],[-27,62],[-80,-5],[-39,-20],[-51,9],[-11,-68],[-54,18],[-33,-22],[-1,-43],[-88,2],[-49,-22],[-86,32],[-91,7],[-31,65],[-32,20],[-43,-49],[-56,-14],[-54,-60],[33,-41],[-42,-51],[-95,-38],[-172,-106],[-76,0],[-124,-99],[-27,-71],[-104,-96],[-30,2],[-53,-50],[20,-38],[-31,-68],[-81,-51],[-58,-20],[-30,19],[-70,-15],[-41,-37],[-86,20],[-60,-2],[-4,106],[-87,24],[-64,44],[-40,-9],[-35,-48],[-51,6],[-28,28],[-96,30],[-89,-8],[48,89],[-139,57],[-82,6],[-89,-28],[-45,-62],[-83,-27],[-50,-58],[-47,-89],[-47,-34],[-42,-100],[-32,-11],[-34,-50],[-9,-47],[20,-57],[-45,-8],[-51,51],[-14,76],[28,61],[21,105],[-16,83],[-88,62],[-47,-43],[-52,-25],[-108,-18],[-13,-47],[-116,22],[-29,-47],[-96,9],[-62,-18],[-99,12],[-53,62],[-59,9],[-52,32],[-47,52],[-50,-7],[-20,-86],[-25,-15],[-101,51],[-20,85],[-37,-44],[19,-83],[-57,-23],[-56,151],[-39,25],[-35,57],[-27,-31],[-77,26],[-74,-17],[-76,29],[-1,65],[38,81],[-48,31],[-58,-57],[-51,6],[-52,32],[-30,52],[-67,20],[-41,71],[-51,21],[-2,70],[-42,65],[-14,57],[-66,25],[-96,-32],[-27,-40],[-60,17],[-80,162],[-71,78],[-55,-3],[-57,38],[-27,-16],[-93,100],[-33,46],[-63,45],[-107,36],[5,62],[-26,18],[-3,65],[-132,15],[-80,31],[-46,-45],[-41,23],[-13,-111],[-34,-23],[-36,-71],[-41,7],[-52,132],[-83,37],[-25,39],[-63,41],[-21,-4],[-117,59],[-36,54],[27,35],[-26,33],[-46,0],[-98,98],[-40,10],[-90,-15],[-100,95],[-41,111],[-58,61],[-37,-63],[-49,-16],[-52,24],[10,61],[-27,36],[51,54],[-38,33],[-25,57],[31,108],[-41,40],[-58,95],[-23,12],[-4,109],[-29,56],[28,21],[78,7],[36,33],[25,-98],[73,-64],[63,25],[9,45],[70,10],[86,86],[10,56],[-38,78],[-33,39],[20,94],[-174,101],[-64,84],[-18,51],[5,106],[-31,139],[4,47],[74,44],[31,32],[-8,69]],[[2287,8951],[106,55],[57,-5],[74,23],[88,-33],[32,10],[70,141],[-31,130],[69,54],[-14,38],[70,93],[61,142],[71,-58],[159,-32],[51,-30],[35,53],[64,-40],[63,9],[80,-45],[71,-3],[124,41],[36,71],[87,54],[13,49],[46,31],[121,-22],[31,19],[65,-6],[18,-41],[-3,-61],[55,-43],[63,5],[136,-34],[130,8],[49,23],[63,-21],[35,6],[149,95],[92,22],[62,50],[97,33],[47,-11],[55,15],[98,-45],[42,46],[91,2],[67,63],[53,133],[80,30],[26,27],[109,7],[31,16],[174,24],[64,39],[97,-22],[151,27],[32,25],[196,12],[108,-45],[49,3],[56,-48],[113,-13],[194,-101]],[[2287,8951],[-66,41],[-83,73],[-98,18],[-45,44],[-27,105],[-27,53],[-7,62],[-55,118],[23,102],[-30,23],[-44,-35],[-35,36],[-60,-21],[-106,7],[-69,34],[-62,4],[-28,26],[-61,2],[-139,90],[-3,63],[-56,-3],[-52,-28],[-62,-2],[-22,75],[-23,28],[-59,22],[-12,37],[51,73],[-19,40],[3,89],[-43,87],[-36,38],[-94,44],[-34,-26],[-35,15],[-25,93],[-107,44],[-81,-18],[-106,51],[-52,-18],[-75,70],[52,43],[58,3],[42,37],[26,-43],[122,51],[41,49],[-116,110],[-3,30],[34,63],[-35,43],[4,83],[-43,49],[-9,116],[29,49],[-27,72],[-188,87],[-83,1],[-89,-77],[-58,41],[-48,139],[56,77],[-50,47],[-41,87],[17,56],[-4,62],[80,11],[46,69],[-15,66],[-30,52],[78,142],[69,25],[87,0],[143,125],[54,-7],[-19,56],[21,51],[87,-39],[66,0],[123,95],[33,11],[46,-101],[-12,-46],[18,-42],[102,9],[67,46],[32,-13],[39,41],[37,-52],[51,37],[75,118],[2,56],[60,77],[-2,43],[41,38],[62,17],[48,-18],[91,5],[61,-22],[81,11],[86,35],[89,-14],[43,37],[79,101],[0,50],[111,55],[22,34],[130,57],[140,81],[46,-5],[85,49],[58,7],[41,68],[38,12],[107,-2],[32,35],[-20,59],[25,27],[-55,213],[37,93],[107,41],[-46,91],[88,50],[85,-3],[-17,97],[-39,21],[30,73],[-101,251],[-56,106],[12,93],[-18,82],[19,140],[43,36],[-110,46],[-97,-14],[-53,31],[-4,30],[87,64],[129,14],[26,27],[116,28],[67,-9],[124,43],[254,74],[29,-83],[61,-24],[103,43],[44,3],[78,-62],[46,34],[21,90],[-8,53],[-108,25],[-30,29],[34,112],[50,92],[34,164],[45,75],[71,222],[62,116],[12,140],[59,10],[159,-80],[163,-52],[70,-5],[39,16],[215,-6],[29,-20],[3,-73],[76,19],[123,102],[126,10],[24,70],[44,16],[5,98],[-39,78],[7,55],[-34,164],[30,123],[57,121],[27,27],[95,12],[80,-7],[60,40],[99,21],[77,98],[19,75],[-31,40],[4,44],[69,64],[97,13],[122,-33],[53,27],[124,26],[3,-76],[21,-34],[-49,-26],[21,-67],[97,-39],[13,-26],[-52,-46],[96,-59],[29,0],[78,-55],[63,-28],[7,-73],[96,-59],[54,-5],[48,-57],[85,-7],[39,29],[88,-1],[90,-115],[59,0],[66,31],[16,-69],[105,-73],[48,-72],[12,-102],[104,-164],[50,-17],[44,-60],[31,-75],[-4,-80],[22,-16],[-64,-147],[42,-104],[3,-51],[-124,-149],[-26,-144],[37,-28],[25,-83],[47,-59],[29,16],[69,-10],[48,-37],[89,4],[28,-33],[60,-10],[148,9],[79,-34],[120,-10],[119,23],[82,-18],[94,1],[154,-31],[80,-43],[69,-89],[43,-30],[94,-3],[61,-79],[106,-42],[47,-51],[145,-49],[146,17],[-24,-76],[2,-79],[78,-15],[34,-61],[44,-132],[60,-123],[9,-69],[23,-39],[165,-156],[31,-117]],[[15837,1087],[11,-44],[33,-36],[63,-8],[27,-152],[-14,-47],[-38,-54],[-24,8],[-27,-68],[-25,-8],[-47,-133],[-11,-67],[-42,-96],[2,-58],[-18,-54],[-86,-21],[-53,-57],[-21,-83],[-59,15],[-34,-19],[-38,7],[-29,-83],[-47,-29],[-55,53],[-95,9],[-23,-10],[-31,45],[-38,-1],[-88,67],[-43,10],[-1,119],[-28,64],[11,47],[-16,101],[20,30],[-13,72],[27,52],[32,8],[73,66],[32,49],[60,26],[5,87],[58,64],[69,-48],[26,15],[0,50],[30,23],[52,9],[38,-32],[33,18],[55,-15],[33,11],[28,50],[45,-19],[52,26],[84,-56],[-4,56],[49,41]],[[14544,10898],[-22,-48],[-41,-1],[-32,-56],[-50,-41],[2,-34],[-36,-126],[37,-76],[-17,-53]],[[13135,10647],[29,54],[41,18],[53,-13],[127,22],[60,63],[115,51],[77,-15],[53,8],[56,36],[15,111],[-29,73],[31,50],[5,191],[24,91],[70,135],[22,79],[73,19],[-3,63],[94,9],[50,40],[75,2],[8,-90],[45,-72],[28,-19],[-20,-63],[-97,-157],[-25,-99],[-75,-93],[153,-78],[99,-20],[44,13],[69,-40],[34,-80],[108,-38]],[[16018,11747],[49,-41],[-45,-135],[-53,-35],[-6,-104],[-46,-108],[11,-42],[-16,-43],[-37,-23],[-44,-61],[-39,-16],[-29,-48],[1,-137],[32,-19],[27,-59],[43,-38],[15,-102],[-18,-45],[-49,-46],[14,-63],[-87,-129],[-30,-16],[3,-133],[37,-105],[5,-60],[-16,-75],[-5,-115],[28,-141],[21,-21],[25,-139],[-83,-168],[-38,-54],[-33,-140],[-9,-80],[6,-76],[36,-27]],[[15688,9103],[-4,-75],[65,-85],[-19,-36],[73,-50],[-5,-59],[21,-47],[-21,-56],[66,-42],[19,-54],[75,-59],[18,-55],[2,-70],[-17,-60]],[[15961,8355],[-65,-37],[-48,-50],[-45,25],[-25,51],[-49,-40],[-84,-10],[-60,32],[-186,28],[-61,-15],[-11,-51],[114,-36],[-8,-83],[68,-9],[84,-40],[26,-62],[5,-60],[-40,-3],[-31,-36],[-52,22],[-105,0],[-23,-28],[-8,-75],[-32,-38],[26,-57],[31,-25],[20,-81],[-24,-64],[-7,-105]],[[14912,7763],[-17,29],[-104,7],[-79,-20],[-39,-38],[-50,39],[-78,89],[-86,11],[-4,63],[-34,-1],[-36,-37],[-35,-1],[-57,39],[11,81],[-13,22],[-151,16],[-46,-34],[-102,-21],[-58,-25],[-74,67],[11,89],[-88,-16],[-27,-46],[-77,-30],[-27,12],[-30,98]],[[14544,10898],[97,-29],[45,-42],[21,-51],[125,0],[70,20],[115,7],[11,144],[31,26],[39,-35],[31,103],[-32,49],[14,75],[75,115],[65,43],[47,83],[49,9],[42,67],[16,58],[63,24],[61,70],[91,58],[-29,79],[50,-2],[48,-59],[66,31],[47,-59],[35,-2],[69,112],[71,55],[53,0],[-41,-79],[29,-21]],[[17134,10068],[-21,-74],[6,-92],[-25,-57],[-19,-148],[11,-22],[-51,-67],[-69,-35],[-85,-61],[-47,-13],[-50,-49],[-41,1],[-53,38],[-67,-50],[-200,7],[2,-69],[-99,-15],[-89,-75],[-27,-46],[-70,-23],[-27,10],[-131,-52],[-60,-45],[-151,-45],[-83,17]],[[16018,11747],[100,33],[33,43],[2,57],[28,15],[79,-9],[37,-21],[68,51],[76,175],[28,30],[49,94],[51,33],[84,-28],[59,-36],[47,29],[50,72],[54,27],[61,7],[44,-54],[79,14],[68,47],[56,3],[100,30],[14,34],[-21,47],[54,60]],[[17318,12500],[-1,-39],[46,-68],[12,-95],[63,-10],[7,-37],[-156,-60],[-38,-30],[-26,-64],[64,-55],[127,-31],[8,-112],[60,-71],[-52,-128],[-11,-72],[-76,-56],[-54,3],[-33,25],[-68,-26],[-40,-91],[28,-54],[-67,-84],[-25,-8],[-32,-60],[-7,-88],[17,-75],[99,-50],[43,-113],[58,-110],[32,-29],[-21,-109],[-71,-114],[-12,-48],[-44,-52],[9,-125],[-41,-10],[-31,-57],[-66,-18],[3,-56],[37,-48],[-5,-36],[80,-71]],[[18170,6428],[-64,-25],[-61,-3],[-64,68],[-94,2],[-29,-85],[-27,-36],[-91,-33],[-72,-15],[-33,-22],[-33,-70],[-47,-3],[-102,-39],[-69,20],[-26,-59],[-78,-25],[-69,-76]],[[17211,6027],[-55,33],[-51,-1],[-6,54],[-22,40],[60,80],[-40,137],[-42,1],[-8,86],[-44,-43],[-98,-129],[-17,-33],[-59,26],[-34,-13],[-8,59],[15,60],[-25,45],[-102,-91],[-87,8],[-34,-38],[-83,42],[-19,32],[-86,83],[-66,35],[-79,-8],[-72,12],[-72,58],[-216,36],[-11,-37],[-74,14],[-34,-22],[16,-84],[39,-51],[-62,-25],[-36,-42],[-110,75],[-137,-28],[-36,-44],[-97,-49],[-17,-19],[-40,-135],[-30,-26],[-26,-77]],[[15961,8355],[12,-32],[45,-33],[46,-95],[-3,-26],[66,-58],[61,-79],[10,-40],[77,-6],[29,-44],[117,-36],[39,-34],[61,-24],[106,14],[92,-15],[135,38],[50,-2],[108,-69],[39,4],[38,49],[48,19],[23,-33],[-1,-92],[-12,-31],[18,-92],[29,-61],[41,-17],[6,-47],[48,21],[25,35],[53,-22],[40,-41],[83,2],[-3,-91],[38,-3],[55,-43],[99,-7],[56,65],[36,-27],[2,-55],[29,-29],[37,13]],[[17211,6027],[1,-61],[46,-24],[56,-69],[-13,-96],[-24,-28],[51,-32],[22,-54],[-19,-64],[-39,-20],[-33,-84],[-42,-47],[-77,-22],[-15,-90],[-59,-127],[16,-123],[29,-21],[49,22],[29,-13],[-12,-65],[-29,-49],[59,-108],[-26,-66],[14,-95],[94,-43],[-7,-69],[-23,-38],[-7,-57],[-25,-40],[52,-18],[43,24],[22,-28],[-74,-56],[-10,-75],[-47,-102],[5,-50],[27,-43],[-23,-74]],[[13536,5282],[-30,74],[24,81],[-48,33],[-49,15],[-38,-22],[-4,-51],[-26,-31],[-83,-10],[-42,-20],[-98,64],[-17,47],[47,30],[-29,101],[-46,28],[-8,109],[81,42],[-11,19],[-153,-5],[-94,-15],[-17,-40],[36,-114],[-73,-61],[-19,26],[-40,-11],[-48,-60],[-10,-37],[34,-54],[-3,-59],[-40,-67],[-84,-98],[-42,-86],[-61,-13],[-37,-54],[10,-99],[-15,-44],[10,-60],[31,-52],[36,-152],[-27,-39],[3,-48],[-53,-19],[-68,-71],[-47,13],[7,47],[-25,18],[-135,-83],[-59,-80],[-82,8],[-30,-35],[-32,40],[-5,38],[-37,29],[-35,-11],[-7,55],[28,23],[-43,81],[-56,41],[39,109],[-57,5],[-12,53],[-86,97],[14,81],[-73,3],[-5,74],[-22,58],[-31,33],[2,37],[-90,174],[-55,-33],[-101,20],[-40,26],[-61,93],[-5,67],[49,27],[-8,59],[-61,63],[-29,63],[-37,19],[-8,38],[-41,40],[-11,55],[-33,-16],[-40,-74],[-14,-57],[-46,-20],[-2,-116],[11,-44],[-14,-39],[-46,52],[-48,89],[3,91],[-22,59],[-8,82],[9,60],[-5,144]],[[13632,2755],[-39,58],[-42,28],[-49,-29],[-67,-19],[-49,-40],[-32,2],[-31,-43],[12,-73],[-42,-64],[-28,-15],[-47,14],[-91,-83],[-38,23],[-16,54],[-60,-24],[-21,-35],[-16,-107],[-51,27],[-94,124],[-24,-17],[-17,-71],[-33,-27],[-31,81],[-39,28],[-24,-61],[-48,-39],[1,-39],[-66,-55],[-41,27],[-20,55],[-65,47],[-67,14],[-40,38],[-28,-83],[-53,-66],[-15,-47],[-87,19],[-84,-22],[-45,48],[-25,-25],[-20,-90],[-38,-31],[38,-145],[28,-20],[34,-69],[-10,-49],[28,-72],[-25,-19],[-6,-138],[44,-39],[-29,-51],[-29,2],[-45,43],[-38,10],[-94,-38],[-28,40],[11,65],[-27,22],[1,116],[-45,83],[-116,-75],[-40,-61],[-35,-26],[-70,-8],[-56,39],[-59,-54],[-42,56],[11,56],[-14,30],[-57,21],[-12,72],[19,62],[-10,45],[-52,-15],[-35,27],[-128,32],[-32,-14],[-84,18],[0,41],[49,115],[32,46],[-1,63],[-20,61],[46,76],[6,44],[45,7],[-24,65],[-55,30],[-57,-35],[-60,25],[-21,32],[-72,11],[22,66],[-15,82],[-40,48],[33,40],[-34,91],[-49,15],[0,96],[82,63],[5,33],[-65,-12],[-56,-25],[-35,25],[-73,-12],[-64,11],[-124,-54],[-108,-88],[-52,44],[82,101],[4,85],[-33,89],[-52,-4],[7,174],[55,47],[36,-2],[-19,74],[14,72],[37,95],[28,-31],[67,59],[27,43],[-4,58],[22,66],[54,-34],[24,8],[55,127],[20,24],[43,-21],[35,43],[-47,58],[-15,68],[68,38],[-21,76],[26,54],[2,72],[14,48],[-2,81],[-15,50],[-18,174],[13,71],[-12,46],[2,106],[-120,54],[-7,-66],[-38,-11],[-38,106],[-12,95],[-30,41],[4,95]],[[19238,11558],[-57,-69],[-19,28],[76,41]],[[18636,12139],[-39,-80],[24,-103],[-22,-79],[-118,37]],[[19487,12794],[-29,-54],[-85,-56],[-47,-141],[91,-94],[52,-17],[44,-50],[116,5],[7,-92],[23,-91],[46,-2],[-2,-59],[48,-63]],[[19751,12080],[-134,-52],[-84,-98],[-33,-100],[18,-56],[-51,-44],[-72,-91],[-32,-17],[-35,27],[-27,-31],[-76,5],[-117,-72],[-47,12],[-40,67],[-56,25]],[[18965,11655],[-1,69],[-47,31],[-2,92],[-112,6],[-3,50],[-38,47],[-14,132],[113,-14],[-7,55],[-128,91],[-40,17]],[[18446,11868],[-1,-61],[26,-84],[-11,-69],[28,-63],[-77,-51],[-14,-53],[13,-53],[73,-67],[60,5],[31,-53],[76,-30],[116,35]],[[18766,11324],[74,-135],[51,-59]],[[18891,11130],[-24,-59],[-40,-51],[-50,-13],[-64,-113],[-248,-7],[-40,-19],[-58,-88],[-85,-86],[-26,75],[-55,-88],[15,-41],[-120,-37],[-52,-146],[-97,-146],[-63,-23],[-58,-85],[-29,-69],[29,-68],[45,-57],[5,-51]],[[17876,9958],[-47,-42],[-45,44],[-59,13],[-31,-46],[-44,-25],[-16,35],[-79,18],[-68,-7],[-88,58],[-80,1],[-39,17],[-32,46],[-77,-11],[-37,9]],[[17318,12500],[-40,39],[-17,61],[-48,58],[-11,39],[35,30],[9,49],[-32,29],[8,69],[42,63],[73,34],[7,96],[18,52],[70,53],[26,66],[49,37],[67,-1],[22,22],[50,-134],[-19,-70],[5,-111],[89,3],[55,-17],[52,21],[-3,54],[80,28],[141,86],[34,0],[43,-70],[72,46],[73,70],[38,-34],[57,-14],[110,54],[9,111],[-22,49],[26,48],[72,37],[80,11],[72,-13],[16,50],[61,1],[64,22],[25,-12],[95,-103],[7,-52],[-22,-37],[42,-23],[20,-88],[57,29],[24,-117],[-19,-61],[-51,-19],[36,-70],[30,-13],[24,-142],[46,23],[288,-24],[34,-21]],[[17876,9958],[-15,-90],[-39,-35],[-7,-78],[43,18],[22,49],[115,31],[39,35],[42,-5],[64,45],[-19,-76],[-29,11],[-87,-76],[-46,-57],[-64,-13],[-47,-59],[-21,-66],[-51,-45],[-67,-20],[-54,-89],[-33,-17],[-13,-96],[70,-4],[75,-36],[18,-60],[43,4],[48,-35],[3,-57],[45,-55],[71,13],[46,-16],[97,16],[46,-19]],[[20393,11801],[38,-11],[-17,-51],[-45,12],[24,50]],[[22251,12564],[-61,-45],[-12,-31],[-72,-41],[-145,-63],[1,-42],[-56,14],[-78,-96],[-30,-9],[-122,-114],[-2,-50],[-64,-66],[-93,-38],[-155,34],[-13,-49],[-77,7],[-63,-16],[1,-37],[-39,-19],[-71,8],[-159,-95],[-21,-23],[-82,-31],[-120,-117],[6,-33],[-135,-93],[-17,27],[-53,-15],[3,-76],[-73,-27],[-60,3],[-81,-48],[-27,95],[249,105],[-31,73],[58,51],[-8,33],[-72,-6],[-25,15],[-24,67],[-55,-4],[0,53],[61,10],[25,44],[-22,30],[34,62],[73,37],[29,-4],[94,113],[-1,35],[42,22],[7,46],[44,39],[39,68],[-70,67],[-38,68],[-84,47],[-118,6],[-92,54],[-26,-22],[-53,12],[-79,-50],[-21,-78],[-49,-9],[-12,-42],[-76,-69],[-51,-82],[2,-43],[-30,-30],[-207,-77],[-43,-39]],[[19487,12794],[55,56],[12,54],[-31,103],[-7,66],[9,105],[19,74],[-51,51],[38,54],[97,46],[29,-67],[82,-24],[-6,-49],[36,-67],[29,-15],[30,-62],[-2,-70],[49,31],[85,98],[55,40],[18,61],[50,7],[122,75],[52,-20],[143,133],[75,19],[43,-45],[33,2],[66,46],[17,59],[54,41],[109,-46],[54,47],[-25,43],[47,28],[107,-61],[70,3],[102,45],[22,65],[74,38],[110,38],[36,151]],[[21394,13947],[47,56],[85,-80],[118,-47],[6,-38],[52,-42],[-18,-53],[61,-63],[105,130],[53,-11],[-12,-110],[35,-47],[33,-87],[32,-39],[3,-46],[46,-48],[32,-95],[84,-46],[-79,-108],[4,-153],[61,-1],[9,-58],[77,-160],[37,-23],[13,-58],[-32,-75],[-49,-51],[54,-30]],[[19508,9359],[-45,16],[-42,-31],[-90,-7],[-46,-160],[-33,-36],[-87,3],[-37,-136],[-96,-25],[-50,140],[-57,14],[-54,-14],[-7,-69],[-51,0],[-27,-30],[-52,2],[-56,62],[-27,-13],[-39,-63],[-52,143],[-51,95],[-49,43],[-83,-11],[-69,-22],[-22,-35],[-18,-108]],[[18891,11130],[45,-21],[61,-53],[56,4],[100,-21],[40,-22],[48,43],[79,4],[67,-105],[105,-107],[-88,-27],[-26,-61],[-14,-129],[12,-54],[74,-57],[126,-32],[141,17],[54,54],[-16,62],[86,44],[101,87],[6,49],[182,82],[80,-8],[46,-60],[45,-5],[23,-70],[81,-5],[41,-55],[49,-24],[29,27],[201,6],[71,-36],[68,0],[85,-19],[-45,-41],[23,-56],[-67,-34],[6,-65],[28,-48],[-88,-67],[-51,11],[4,42],[-73,37],[-108,-52],[-21,-29],[-76,-40],[-171,-55],[-58,-47],[-44,-17],[13,-52],[-85,0],[-44,-71],[21,-103],[-62,-17],[-85,-41],[-26,15],[29,69],[-16,19],[-93,-14],[-2,-58],[61,-68],[-87,-72],[-16,-64],[-44,5],[2,-62],[-39,13],[-70,-36],[-41,-113],[-55,-37],[-28,-120],[-33,-11]],[[18965,11655],[-53,-10],[-71,-60],[-4,-62],[-54,-94],[-17,-105]],[[19036,6217],[-19,-61],[-34,-13],[-22,-73],[27,-51],[71,-54],[31,-66],[30,-20],[23,-57],[-4,-51],[17,-48],[8,-103],[-12,-24]],[[20388,7371],[-66,-18],[-26,-100],[-29,-16],[-10,-58],[-65,-2],[11,-71]],[[20203,7106],[-92,-20],[7,-47],[-56,-25],[-37,-46],[-19,70],[-36,27],[-64,-10],[-36,13],[-79,79],[-5,35],[-82,15],[-47,-24]],[[19508,9359],[-38,-42],[4,-120],[62,-2],[126,-128],[79,-44],[48,-7],[77,-55],[59,-26],[49,-153],[15,-98],[39,-59],[6,-53],[49,-99],[15,-78],[32,-32],[-3,-42],[33,-37],[11,-62],[27,-7],[5,-94],[-20,-69],[21,-49],[89,-68],[100,-52],[28,-91],[10,-75],[91,-29],[71,-61],[43,-110],[-45,-35],[-60,18],[-167,93],[-73,-52],[-58,10],[-14,38],[-58,77],[-75,30],[-61,3],[-56,-31],[-40,-43],[-58,-3],[-59,40],[-36,68],[5,32],[-43,65],[-54,4],[-1,-47],[42,-20],[-2,-47],[30,-15],[65,-76],[95,-23],[123,61],[100,-23],[31,-83],[30,-36],[107,-43],[84,-108]],[[20388,7371],[87,-69],[77,-47],[65,-101],[43,-102],[-30,-32],[-118,-11],[-94,-39],[-58,-42]],[[20360,6928],[-8,29],[-65,50],[-53,-1],[-5,98],[-26,2]],[[20632,7352],[-26,-9],[-230,120],[-59,71],[38,31],[90,-39],[80,-65],[78,-25],[58,-37],[-29,-47]],[[20364,5493],[-42,-33],[-24,34],[43,64],[23,-65]],[[20743,6601],[50,-19],[2,-74],[-47,34],[-74,21],[-16,64],[49,0],[36,-26]],[[20360,6928],[-62,-51],[-65,-31],[-17,-67],[-65,-71],[-43,-13],[88,-56],[44,23],[66,63],[45,13],[52,-13],[56,-58],[73,-122],[101,-45],[29,-53],[-119,-139],[-105,-26],[3,-58],[192,122],[22,-22],[-26,-176],[14,-41],[-42,-27],[-40,22],[-56,3],[-11,47],[-51,-55],[11,-49],[54,5],[25,-48],[-5,-111],[-27,-56],[-41,-38],[42,-99],[20,-77],[-105,-19],[-52,-69],[-22,70],[-39,21],[-11,-69],[-47,-65],[-19,-64],[-55,-17],[-12,-67],[-60,-117],[-30,-30],[34,-42],[-23,-63],[-33,12],[-12,-111],[-42,2]],[[24621,14011],[12,-49],[-49,-110],[10,-24],[-45,-54],[8,-73],[-47,-34],[-96,10],[-78,-27],[-76,-46],[70,-63],[-60,-33],[-80,101],[-2,88],[-42,3],[-8,41],[-60,-8],[-44,16],[-50,-139],[-25,-168],[-79,-29],[-66,30],[-51,-36],[-14,-88],[-39,-40],[-67,-33],[-10,-30],[-93,7],[-94,-28],[-102,20],[-98,-22],[3,-63],[51,-93],[61,-71],[-50,-99],[-52,-9],[-51,45],[-41,-22],[-90,0],[-70,38],[-88,3],[-95,91],[-5,35],[-63,29],[-42,-49],[-73,-16],[-49,-129],[-103,-161],[-49,-28],[-59,-107],[-130,-23]],[[21394,13947],[-39,6],[-97,49],[-7,48],[55,29],[13,58],[-85,192],[16,60],[-44,29],[-57,161],[-34,11],[-38,-37],[-102,-62],[-145,-64],[-52,15],[12,101],[-83,106],[-18,42],[-4,132],[-11,102],[77,46],[18,48],[-42,90],[-46,19],[-27,46],[-13,68],[-64,-8],[-50,22],[63,110],[-17,54],[95,-17],[104,-92],[67,75],[43,-69],[64,-55],[54,35],[10,167],[116,10],[39,62]],[[21165,15536],[42,25],[41,-17],[241,21],[49,-141],[-23,-22],[35,-59],[-19,-50],[53,-83],[35,2],[73,-102],[72,-20],[21,18],[111,0],[66,28],[33,-57],[87,12],[53,33],[114,19],[2,-84],[58,-69],[133,-52],[115,48],[59,10],[98,-54],[70,-8],[53,-111],[-42,-60],[23,-53],[6,-73],[43,31],[37,-21],[61,18],[78,-42],[-28,-90],[95,-138],[12,-42],[45,-17],[87,39],[-4,119],[48,7],[22,49],[65,33],[25,-28],[14,-75],[-2,-89],[35,-41],[44,-93],[50,-61],[7,-52],[51,-85],[56,-9],[91,38],[9,99],[122,46],[93,3],[21,50],[48,31],[37,-21],[14,-71],[30,-5],[75,66],[23,-21],[35,-143],[74,-23],[140,-98],[34,31],[66,-39],[44,18]],[[20419,19470],[82,-42],[83,-121],[-47,-64],[-80,-74],[-141,-99],[136,-84],[86,-31],[59,-66],[80,8],[66,109],[71,-15],[65,-88],[102,-25],[19,-27],[-58,-58],[49,-138],[-17,-80],[52,-75],[2,-31],[50,-69],[56,-41],[78,-26],[71,4],[57,-38],[93,16],[33,44],[127,9],[80,-28],[65,45],[70,-14],[66,17],[102,94],[29,45],[88,-18],[65,-42],[100,-141],[53,-26],[60,-57],[31,-68],[-24,-44],[-76,-75],[-6,-113],[-119,-94],[-48,-110],[-66,-49],[14,-51],[-30,-53],[4,-202],[14,-64],[-19,-121],[-28,-38],[-126,13],[-18,-63],[-85,-177],[-36,-94],[-7,-113],[17,-73],[-58,-35],[-42,88],[-11,88],[-29,22],[-66,-46],[-150,-142],[-64,-76],[-121,-60],[-37,-74],[-175,-94],[-99,-62],[-69,-111],[72,-111],[96,-54],[85,-107],[81,-44],[61,40],[22,36],[97,-69],[-90,-98],[-45,-6],[-116,14],[-13,-114],[73,-103]],[[10074,13633],[281,-36],[347,-44],[347,-44],[232,63],[513,-82],[82,9],[97,-17],[42,-30],[64,-101],[63,-52],[444,-100],[264,-136],[13,-2],[333,64],[-1,-114],[44,-11],[124,0],[52,-27],[80,81],[31,7],[254,132],[384,163],[602,93],[61,-13],[92,2],[112,-20],[84,28],[111,-13],[98,13],[78,55],[105,44],[69,8],[142,70],[18,38],[68,59],[31,63],[108,128],[69,43],[215,87],[66,78],[77,18],[5,50],[-45,84],[-88,71],[-49,68],[-48,126],[59,103],[3,51],[80,151],[45,41],[71,26],[41,-11],[143,-8],[74,-80],[57,-24],[152,-39],[158,-13],[69,-14],[108,90],[71,18],[47,55],[109,89],[49,102],[87,22],[86,-28],[170,11],[128,28],[160,130],[67,17],[35,52],[-16,58],[61,110],[106,112],[85,41],[213,-18],[22,16],[17,107],[80,11],[49,-44],[43,4],[35,43],[154,66],[84,-14],[74,8],[47,-16],[42,45],[64,-10],[41,-44],[108,-27],[58,9],[97,-20],[96,65],[0,74],[-57,83],[-30,93],[-162,137],[-5,38],[-65,23],[-31,80],[-135,52],[-96,117],[-154,34],[-90,-17],[-67,4],[-56,-27],[-138,-169],[-19,2],[-105,86],[-93,35],[-151,-20],[-109,15],[-68,-31],[-48,-55],[-51,-2],[-124,127],[-21,104],[110,57],[16,27],[-3,143],[97,131],[4,57],[276,528],[159,-83],[84,-28],[94,-5],[122,-56],[58,19],[117,69],[151,124],[52,33],[191,18],[50,16],[46,43],[16,140],[-91,17],[44,38],[21,85],[87,77],[9,93],[99,99],[4,64],[67,73],[82,185],[20,0],[145,117],[66,20],[24,83],[32,31],[-9,67],[-57,60],[42,108],[-125,53],[-109,-29],[-51,9],[-10,89],[106,58],[72,79],[87,63],[94,88],[141,-2],[90,22]],[[20419,19470],[97,38],[106,25],[82,-1],[109,35],[57,-15],[166,5],[126,22],[42,30],[100,-23],[65,14],[40,-26],[102,-27],[64,-57],[48,16],[75,-81],[115,-20],[18,-28],[128,34],[46,-2],[168,-91],[43,11],[92,-86],[84,-100],[-26,-53],[102,-55],[56,-78],[-12,-42],[45,-16],[-44,-48],[91,-26],[-7,-61],[-29,-34],[154,-248],[-3,-64],[66,-50],[-21,-91],[11,-56],[91,-89],[61,-84],[33,-109],[-32,-49],[30,-29],[-12,-48],[106,-59],[-4,-51],[-36,-58],[21,-57],[-11,-55],[58,-31],[33,-66],[46,-30],[69,3],[43,-32],[108,4],[16,17],[121,17],[56,-21],[35,-51],[73,-57],[62,7],[71,-22],[60,34],[30,-73],[59,-3],[19,-50],[68,-80],[143,-97],[59,17],[76,-22],[47,8],[-60,-130],[78,-76],[44,-120],[-67,-92],[8,-36],[96,-93],[15,-92],[35,-19],[169,33],[67,-41],[54,15],[82,-14],[114,11],[73,26],[82,-16],[57,89],[7,45],[62,-4],[116,91],[40,10],[119,-20],[41,13],[69,73],[112,23],[31,23],[141,30],[67,-13],[67,-53],[-7,-70],[-50,-53],[88,-183],[-38,-68],[-85,-87],[-82,-12],[-59,-84],[31,-77],[-44,-27],[-44,-131],[10,-34],[-24,-81],[-59,-81],[31,-39],[-25,-39],[16,-44],[-91,-65],[13,-35],[-26,-80],[-61,-31],[-12,-107],[-31,-63],[-91,-34],[-26,-42],[-18,-106],[7,-67],[-69,-55],[-48,19],[-18,73],[-33,33],[-129,49],[-95,-2],[-88,-58],[-74,57],[-40,-65],[-41,-9],[-8,-61],[-81,-72],[-38,5],[-74,-37],[-45,4],[-51,-37],[57,-89],[85,-348],[-40,-151],[9,-107],[-11,-37],[37,-29]],[[17275,2292],[-53,-65],[-15,45],[68,20]],[[17351,2418],[46,-60],[-26,-31],[1,-67],[-42,13],[-30,40],[-84,6],[36,62],[36,23]],[[17064,2201],[5,-2],[2,0],[0,-2],[-1,-2],[-2,-1],[-2,0],[-1,-5],[3,-2],[2,-1],[2,2],[0,-1],[-1,-2],[2,-2],[3,0],[0,-1],[0,-1],[0,-2],[0,0],[-1,0],[-3,1],[0,-3],[-1,-1],[-2,1],[-1,2],[0,-4],[-1,-2],[0,-3],[-1,-1],[-2,3],[-3,-2],[0,-1],[-1,0],[-1,0],[-1,1],[-1,3],[1,1],[-1,14],[0,0],[-3,5],[-1,2],[0,0],[1,5],[3,0],[0,1],[5,1],[2,-1]],[[17062,2227],[1,-2],[0,-2],[-2,1],[-1,-2],[0,-1],[1,-1],[3,2],[-2,-3],[0,0],[-1,1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,-1],[-3,-2],[-1,-1],[-2,0],[-1,-2],[-2,0],[-1,-2],[0,0],[-2,5],[0,0],[0,1],[1,3],[1,1],[0,1],[2,4],[2,3],[0,2],[-1,0],[0,-1],[-2,-1],[-1,3],[1,1],[0,0],[3,0],[1,2],[1,2],[2,-2],[0,-1],[3,-1],[1,-2]],[[20514,3897],[35,-40],[74,-21],[6,-90],[-35,-53],[-4,-117],[18,-52],[-33,-65],[-3,-69],[-47,-64],[-23,-65],[9,-28],[-46,-203],[-25,-175],[-23,-49],[-4,-61],[-43,-103],[-47,-64],[-20,-57],[-52,-52],[-31,-67],[-31,-131],[2,-130],[-17,-72],[-58,31],[-3,73],[-33,101],[-46,72],[-77,52],[-67,202],[-2,72],[-48,76],[31,117],[-3,88],[28,141],[44,76],[20,61],[66,116],[33,96],[33,44],[23,68],[62,58],[23,70],[67,118],[137,60],[24,46],[45,26],[41,-36]]]
}}),define("inf-ria-page/monitor/MonitorChartView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/tpl!./MonitorChart.tpl.html","jquery","babel-runtime/helpers/interop-require-default","underscore","bat-ria/mvc/BaseView","inf-ria/echarts","inf-ria/utils/mtools"],function(exports,module,e,t,i,n,r,a,o,s,l){var u=r["default"](n),A=r["default"](a),B=r["default"](o),c=r["default"](s),C=r["default"](l),D={"1h":3600,"6h":21600,"1d":86400,"7d":604800,"14d":1209600,"40d":3456e3},d=function(i){function n(){t["default"](this,n),i.call(this),this.template="TPL_monitorchartdetail",this.uiProperties={monitorStatistics:{value:"@statistics"},monitorPeriod:{value:"@periodInSecond"},monitorTimeRange:{value:"@timeRange"}},this.uiEvents={"monitorPeriod:change":function(){this._onMonitorPeriodChange()},"monitorTimeRange:change":function(){this._onMonitorTimeRangeChange()},"monitorStatistics:change":function(){this.getMonitorTrends(),window._hmt&&window._hmt.push(["_trackEvent","chart_big_view","chart_big_view_statistics"])},"monitorRefresh:click":function(){this.getMonitorTrends()}}}return e["default"](n,i),n.prototype._onMonitorTimeRangeChange=function(){var e=this.get("monitorTimeRange"),t=e.getValue(),i=this.get("monitorPeriod"),n=+i.getValue(),r=D[t];if(n>r)i.setValue(300);else if(r>86400&&1200>n&&1209600>=r)i.setValue(1200);else if(r>1209600&&3600>n)i.setValue(3600);else this.getMonitorTrends();window._hmt&&window._hmt.push(["_trackEvent","chart_big_view","chart_big_view_timeRange"])},n.prototype._onMonitorPeriodChange=function(){var e=this.get("monitorTimeRange"),t=e.getValue(),i=this.get("monitorPeriod"),n=+i.getValue(),r=D[t];if(n>r)if(21600>n)e.setValue("1d");else e.setValue("14d");else if(1200>n&&r>86400)e.setValue("1d");else if(3600>n&&r>1209600)e.setValue("14d");else this.getMonitorTrends();window._hmt&&window._hmt.push(["_trackEvent","chart_big_view","chart_big_view_period:"])},n.prototype.initView=function(){this.getMonitorTrends()},n.prototype.getMonitorTrends=function(){var e=this.get("monitorTimeRange").getValue(),t=this.get("monitorPeriod").getValue();if(+t>D[e])return void this.waitAlert("采样周期大于查询时间区间了");e=C["default"].getUTCTimeRange(e,t);var i={periodInSecond:t,statistics:this.get("monitorStatistics").getValue(),startTime:e.startTime,endTime:e.endTime,dimensions:this.model.get("dimensions"),scope:this.model.get("scope")};if(this.model.get("region"))A["default"].extend(i,{region:this.model.get("region")});var n=this.model.get("apiType");if("dimensions"===n)i.metricName=this.model.get("metricName");else i.metricNames=this.model.get("metricName");this.fire("searchchange",{params:i}),this.fire("getMonitorTrends",{params:i})},n.prototype.renderMonitorChart=function(e,t){var i=this.model.get("metric");i.statistics=t.statistics;var n=this.model.get("extraOption")||{type:"line"},r=C["default"].getChartOptions(e,i,n,{period:this.get("monitorPeriod").getValue()});if(this.monitorChart=c["default"].init(document.getElementById(this.model.get("chartId"))),this.monitorChart.setOption(r,!0),0===e.category.length)u["default"]("#"+this.model.get("chartId")).append('<span class="chart-nodata">暂无数据</span>').children("div").css("zIndex",1)},n}(B["default"]);module.exports=d}),define("inf-ria-page/monitor/MonitorChartModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","bat-ria/mvc/BaseModel","inf-ria/decorators","bat-ria/io/serverIO"],function(exports,module,e,t,i,n,r,a,o){var s=n["default"](i),l=n["default"](r),u=n["default"](o),A=function(i){function n(){t["default"](this,r);for(var e=arguments.length,n=Array(e),a=0;e>a;a++)n[a]=arguments[a];i.call.apply(i,[this].concat(n)),this.datasource={metricName:function(e){var t=e.get("metric").metrics;if("dimensions"===e.get("apiType"))return s["default"].pluck(t,"value").join(",");else return s["default"].pluck(t,"value")},chartId:function(){return"js-big-chart-"+s["default"].random(0,1e3)}}}e["default"](n,i),n.prototype.getMonitorTrends=function(e){var t=this.get("option")||{},i=this.get("fetchUrl");if(i&&""!==i)return u["default"].post(i,e,t);var n=this.getRequestManager();if("dimensions"!==this.get("apiType"))return n.bcmMetricDataMetricName(e,t);else return n.bcmMetricDataDimensions(e,t)};var r=n;return n=a.accessor("requestManager")(n)||n}(l["default"]);module.exports=A}),define("inf-ria-page/monitor/MonitorChart",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","underscore","bat-ria/mvc/BaseAction","inf-ria/decorators","inf-ria/utils/mtools"],function(exports,module,e,t,i,n,r,a,o,s){var l=n["default"](i),u=n["default"](r),A=n["default"](a),B=n["default"](s),c=function(i){function n(){t["default"](this,r),i.apply(this,arguments)}e["default"](n,i),n.prototype.initBehavior=function(){i.prototype.initBehavior.call(this),this.view.on("getMonitorTrends",this._getMonitorTrends,this),this.view.initView()},n.prototype._getMonitorTrends=function(e){var t=this,i=this.getScope(),n=e.params,r=this.view,a=this.model;if(r.monitorChart&&r.monitorChart.showLoading(),a.get("scope")===i.BOS&&"space"===a.get("chart"))delete n.dimensions;a.getMonitorTrends(n).then(function(e){if(u["default"].isFunction(t.context.beforeRender))t.context.beforeRender(e);B["default"].adjustSeriesData(e,n.statistics),r.renderMonitorChart(e,n)},function(e){r.monitorChart&&r.monitorChart.dispose(),delete r.monitorChart,l["default"]("#"+a.get("chartId")).html('<span class="err-tips">'+e.global+"</span>")})};var r=n;return n=o.accessor("scope")(n)||n}(A["default"]);module.exports=c}),define("inf-ria-page/error/NotFoundView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/tpl!./NotFound.tpl.html","inf-ria/mvc/BaseView","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n,r){var a=r["default"](n),o=function(i){function n(){t["default"](this,n),i.call(this),this.template="TPL_inf_ria_page_error_notfound"}return e["default"](n,i),n}(a["default"]);module.exports=o}),define("inf-ria-page/error/NotFoundModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","inf-ria/mvc/BaseModel","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n}(r["default"]);module.exports=a}),define("inf-ria-page/error/NotFound",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","inf-ria/mvc/BaseAction","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n}(r["default"]);module.exports=a}),define("inf-ria-page/custom-nav/ActionView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/tpl!./tpl.html","bat-ria/mvc/BaseView","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n,r){var a=r["default"](n),o=function(i){function n(){t["default"](this,n),i.call(this),this.template="TPL_inf_ria_page_custom_nav"}return e["default"](n,i),n}(a["default"]);module.exports=o}),define("inf-ria-page/custom-nav/ActionModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/BaseModel","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n}(r["default"]);module.exports=a}),define("inf-ria-page/custom-nav/Action",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","underscore","etpl","bat-ria/mvc/BaseAction","inf-ria/decorators"],function(exports,module,e,t,i,n,r,a,o,s){var l=n["default"](i),u=n["default"](r),A=n["default"](a),B=n["default"](o),c=8,C=function(i){function n(){t["default"](this,r),i.apply(this,arguments)}e["default"](n,i),n.prototype.initBehavior=function(){var e=this;i.prototype.initBehavior.call(this),this.on("saveConfig",this.saveConfig,this),this.renderSelcetedProduct(),this.syncShortcutToCheckbox(),l["default"](".seleted-product").on("click",".icon-close",function(t){var i=l["default"](t.target).data("service"),n=u["default"].reject(e.model.get("shortcutServices"),function(e){return e.type===i});e.model.set("shortcutServices",n),e.syncShortcutToCheckbox()}),l["default"](".seleted-product").on("dragenter",".selected-item",function(e){e.preventDefault()}),l["default"](".seleted-product").on("dragover",".selected-item",function(t){if(t.preventDefault(),!l["default"](t.currentTarget).hasClass("dragging"))if(t.originalEvent.offsetY>t.currentTarget.offsetHeight/2)l["default"](e.dragTarget).detach().insertAfter(l["default"](t.currentTarget));else l["default"](e.dragTarget).detach().insertBefore(l["default"](t.currentTarget))}),l["default"](".seleted-product").on("dragend",".selected-item",function(t){l["default"](t.currentTarget).removeClass("dragging"),e.dragTarget=null}),l["default"](".seleted-product").on("dragstart",".selected-item",function(t){var i=t.originalEvent;l["default"](t.target).addClass("dragging"),i.dataTransfer.setData("Text","product"),i.dataTransfer.effectAllowed="move",i.dataTransfer.setDragImage&&i.dataTransfer.setDragImage(i.target,0,0),e.dragTarget=t.target}),l["default"](".seleted-product").on("drop",".selected-item",function(t){t.preventDefault();var i=u["default"].map(l["default"](".selected-item"),function(e){return l["default"](e).data("product")}),n=e.model.get("shortcutServices"),r=u["default"].map(i,function(e){return u["default"].find(n,function(t){return e===t.type})});return e.model.set("shortcutServices",r),!1}),l["default"](".product-cb").on("click",function(t){var i=t.target.value,n=t.target.checked,r=e.model.get("shortcutServices");if(n){var a=e.model.get("serviceMap")[i];if(!a)return;var o={type:i,url:a.listUrl,name:a.serviceDisplayName,icon:a.icon||"icon-"+i.toLowerCase()};r.unshift(o)}else r=u["default"].reject(r,function(e){return e.type===i});e.model.set("shortcutServices",r),e.syncState()})},n.prototype.renderSelcetedProduct=function(){var e=A["default"].render("TPL_inf_ria_page_custom_nav_item",{shortcutServices:this.model.get("shortcutServices")});l["default"](".seleted-product").html(e)},n.prototype.syncShortcutToCheckbox=function(){var e=this.model.get("shortcutServices"),t=l["default"](".product-cb");t.prop("checked",!1),u["default"].each(e,function(e){var i=e.type,n=u["default"].find(t,function(e){return e.value===i});n&&l["default"](n).prop("checked",!0)}),this.syncState()},n.prototype.syncState=function(){if(u["default"].keys(this.model.get("shortcutServices")).length>=c)u["default"].each(l["default"](".product-cb"),function(e){return l["default"](e).prop("disabled",!0)}),u["default"].each(l["default"]("input[type=checkbox]:checked"),function(e){return l["default"](e).prop("disabled",!1)});else u["default"].each(l["default"](".product-cb"),function(e){return l["default"](e).prop("disabled",!1)});l["default"](".selected-count").text(u["default"].keys(this.model.get("shortcutServices")).length),this.renderSelcetedProduct()},n.prototype.saveConfig=function(){var e=this.model.get("parentAction"),t=this.getGlobalStorage();t.set("custom-products",this.model.get("shortcutServices")),e.renderProducts(),e.toggleNavigation(),this.parentDialog.dispose()};var r=n;return n=s.accessor("globalStorage")(n)||n}(B["default"]);module.exports=C}),define("inf-ria-page/bos/CreateView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/tpl!./create.tpl.html","inf-i18n","babel-runtime/helpers/interop-require-default","bat-ria/mvc/FormView"],function(exports,module,e,t,i,n,r,a){var o=r["default"](n),s=r["default"](a),l=function(i){function n(){t["default"](this,n),i.call(this),this.template="TPL_inf_ria_page_bos_bucket_create",this.uiProperties={bucketName:{required:"required",requiredErrorMessage:o["default"]("bucket名称必填"),pattern:"^[a-z\\d][a-z\\-\\d]{1,61}[a-z\\d]$",patternErrorMessage:o["default"]("bucket名称不符合规则"),validityLabel:"bucketNameValidity"},location:{datasource:"@locations"}}}return e["default"](n,i),n.prototype.enterDocument=function(){i.prototype.enterDocument.call(this);var e=this.get("bucketName");if(e)e.main.getElementsByTagName("input")[0].focus()},n}(s["default"]);module.exports=l}),define("inf-ria-page/bos/CreateModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","promise","bat-ria/mvc/FormModel","inf-ria/decorators"],function(exports,module,e,t,i,n,r,a,o){var s=n["default"](i),l=n["default"](r),u=n["default"](a),A=function(i){function n(){t["default"](this,r);for(var e=arguments.length,n=Array(e),a=0;e>a;a++)n[a]=arguments[a];i.call.apply(i,[this].concat(n)),this.datasource={locations:function(e){var t=e.get("getBucketLocations");if(!t)return[];else return l["default"].resolve(t()).then(function(t){var i=e.getRegion();return s["default"].map(t.locations,function(e){return{name:i.getLabel(e),value:e}})})}}}e["default"](n,i),n.prototype.submitRequester=function(){var e=this.get("createBucket");if(e)return e.apply(void 0,arguments);else return void 0};var r=n;return n=o.accessor("region")(n)||n}(u["default"]);module.exports=A}),define("inf-ria-page/bos/Create",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/FormAction","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.redirectAfterSubmit=function(e){var t=this.model.get("parentDialog");if(t)t.dispose()},n.prototype.handleSubmitResult=function(e){var t=this.model.get("bucketSelect");if(t){var n=this.view.get("bucketName").getValue();t.setValue(t.get("urlPrefix")+n+(/\/$/.test(n)?"":"/")),t.fire("afterBucketCreated",{bucketName:n})}i.prototype.handleSubmitResult.call(this,e)},n}(r["default"]);module.exports=a}),define("inf-ria/ui/extension/TipUsage",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","esui/main","esui/Extension","esui/Tip"],function(exports,module,e,t,i,n,r,a,o,s){var l=r["default"](n),u=r["default"](a),A=r["default"](o),B=r["default"](s),c=new Date(2015,12,31).getTime(),C=function(n){function r(){i["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.matchType=function(){if((new Date).getTime()>c)return!1;else return this.target instanceof B["default"]},r.prototype.sendMessage=function(e){var t="TIP_USAGE",i=location.href,n=e,r=[{type:t,page:i,text:n}];l["default"].ajax({method:"POST",url:"/api/log/csi",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8","X-Request-By":"ERApplication"},data:JSON.stringify(r),success:function(e){},error:function(e,t,i){}})},r.prototype.activate=function(){var e=this;if(this.matchType()){var t=this.target;t.on("afterrender",function(){var i=t.getChild("layer");if(i)i.on("show",function(){e.sendMessage(i.get("content"))})}),n.prototype.activate.call(this)}},r.prototype.inactivate=function(){if(this.matchType())n.prototype.inactivate.call(this)},t["default"](r,[{key:"type",get:function(){return"TipUsage"}}]),r}(A["default"]);module.exports=C,u["default"].registerExtension(C),u["default"].attachExtension(C.name,{})}),define("inf-ria/ui/extension/TextBoxSelect",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","babel-runtime/helpers/create-class","esui/Extension","babel-runtime/helpers/interop-require-default","esui/TextBox","esui/main","esui/Layer","esui/lib","underscore"],function(exports,module,e,t,i,n,r,a,o,s,l,u){var A=r["default"](n),B=r["default"](a),c=r["default"](o),C=r["default"](s),D=r["default"](l),d=r["default"](u),f=function(i){function n(e){t["default"](this,n),i.call(this,e),this.nodeName="ol",this.dock={strictWidth:!0}}return e["default"](n,i),n.prototype.render=function(e){for(var t="",i=this.control.getValue(),n=0,r=0;r<this.control.datasource.length;r++){var a=this.control.datasource[r];if(a.name.indexOf(i)>=0){var o=i?a.name.replace(i,'<span class="highlight">'+i+"</span>"):a.name;if(t+='<li data-index="'+n+'" data-name="'+a.name+'" class="ui-textbox-item"><span',a.title)t+=' title="'+d["default"].escape(a.title)+'" ';t+=">"+o+"</span></li>",n++}}e.innerHTML=t},n.prototype.initBehavior=function(e){this.control.helper.addDOMEvent(e,"click",this.selectValue)},n.prototype.selectValue=function(e){for(var t=D["default"].event.getTarget(e),i=this.layer.getElement();t&&t!==i&&!D["default"].hasAttribute(t,"data-name");)t=t.parentNode;if(t&&t.getAttribute("data-name"))this.setValue(t.getAttribute("data-name")),this.validate(),this.layer.hide(),this.fire("select")},n}(C["default"]),h=function(n){function r(){t["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.activate=function(){var e=this.target;if(e instanceof B["default"])e.layer=new f(e),this.initEvents(),n.prototype.activate.call(this)},r.prototype.initEvents=function(){var e=this;this.target.on("input",function(t){e.target.layer.repaint(),e.target.layer.show()}),this.target.on("focus",function(t){e.target.layer.repaint(),e.target.layer.show()})},r.prototype.inactivate=function(){var e=this.target;if(e instanceof B["default"]){if(e.layer)e.layer.dispose();n.prototype.inactivate.call(this)}},i["default"](r,[{key:"type",get:function(){return"TextBoxSelect"}}]),r}(A["default"]);module.exports=h,c["default"].registerExtension(h),c["default"].attachExtension("TextBox")}),define("inf-ria/ui/extension/TableCustomFieldsInterface",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","inf-i18n","babel-runtime/helpers/interop-require-default","underscore","esui/Control","esui/painters","esui/lib","etpl","esui"],function(exports,module,e,t,i,n,r,a,o,s,l,u){function A(e){e.prepareFields.call(e),e.renderPart("content",{data:e.chosenFields,maxFields:e.maxFields}),e.renderPart("waiting",{data:e.waitingFields,isOverMaxFields:e.chosen.length>=e.maxFields}),e.processDragEvents.call(e)}var B=n["default"](i),c=n["default"](r),C=n["default"](a),D=n["default"](o),d=n["default"](s),f=n["default"](l),h=n["default"](u),E=function(){for(var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0];);return e>4?e:!1}(),p='<div class="${classNames.container}"><button data-ui="type:Button;id:table-custom-field-entry;childName:entry" title="'+B["default"]("自定义列设置")+'"><i class="iconfont icon-sdk"></i></button><div id="${ids.layer}" class="${classNames.layer}"><div class="arrow"><i></i></div><div class="title"><h1>'+B["default"]("自定义列")+'</h1><ul class="quick-operations"><li><a href="#" data-command="defaults">'+B["default"]("默认")+'</a></li><li><a href="#" data-command="all" class="${classNames.allState}">'+B["default"]("全选")+'</a></li></ul></div><div id="${ids.content}" class="content" dropzone="move"></div><div id="${ids.waiting}" class="waiting"></div><div class="footer"><button type="button" data-ui="id:${ids.main}-btn-ok;childName:btnOk;type:Button;skin:primary;">'+B["default"]("确定")+'</button><button type="button"data-ui="id:${ids.main}-btn-cancel;childName:btnCancel;type:Button;">'+B["default"]("取消")+"</button></div></div></div>",F="<h2>"+B["default"]("已添加")+'<span class="description">'+B["default"]("（拖拽调整顺序，点击×删除）")+'</span><!-- if: ${data.length} >= ${maxFields} --><span class="max-fields-description">最多${maxFields}列</span><!-- /if --></h2><!-- if: ${data.length} > 0 --><ol><!-- for: ${data} as ${item}  --><'+(E&&9>=E?'a href="javascript:void 0;"':"li")+' data-value="${item.value}" draggable="true" class="item">${item.text}<i href="javascript:void 0;" data-command="close" title="'+B["default"]("删除")+'" class="close">×</i></'+(E&&9>=E?"a":"li")+'><!-- /for --></ol><br clear="both"/><!-- /if -->',m="<h2>"+B["default"]("待添加")+'<span class="description">'+B["default"]("（拖拽至上面的区域中进行添加）")+"</span></h2><!-- if: ${data.length} > 0 --><ul><!-- for: ${data} as ${item}  --><"+(E&&9>=E?'a href="javascript:void 0;"':"li")+' data-value="${item.value}" draggable="true" class="item<!-- if: ${isOverMaxFields}--> over-fields<!-- /if -->">${item.text}</'+(E&&9>=E?"a":"li")+'><!-- /for --></ul><br clear="both"/><!-- /if -->',g={container:f["default"].compile(p),content:f["default"].compile(F),waiting:f["default"].compile(m)},H=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.prepareFields=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.datasource=t.datasource||this.datasource||[],this.all=c["default"].map(this.datasource,function(e){return e.value}),this.origChosen=this.origChosen||this.chosen,this.chosen=t.chosen||this.chosen||[],this.defaults=t.defaults||this.defaults||[],this.waiting=c["default"].filter(this.all,function(t){return-1===c["default"].indexOf(e.chosen,t)}),this.datasourceMapper={},c["default"].each(this.datasource,function(t){e.datasourceMapper[t.value]=t}),this.waitingFields=c["default"].map(this.waiting,function(t){return e.datasourceMapper[t]}),this.chosenFields=c["default"].map(this.chosen,function(t){return e.datasourceMapper[t]})},n.prototype.initStructure=function(){if(this.main)this.main.innerHTML=g.container({ids:{main:this.id,layer:this.helper.getId("layer"),content:this.helper.getId("content"),waiting:this.helper.getId("waiting")},classNames:{container:this.helper.getPartClasses("container"),layer:this.helper.getPartClasses("layer"),allState:this.maxFields<this.datasource.length?"state-hidden":""}}),this.helper.initChildren()},n.prototype.initEvents=function(){var e=this;this.getChild("entry").on("click",this.show,this),this.getChild("btnOk").on("click",function(){e.fire("save",{data:e.chosen}),e.origChosen=e.chosen,e.hide()}),this.getChild("btnCancel").on("click",function(){e.setProperties({chosen:e.origChosen}),e.fire("cancel"),e.hide()}),this.helper.addDOMEvent(this.main,"click",function(e){var t=e.target,i=t&&t.getAttribute("data-command");if(i){var n=null;switch(i){case"defaults":this.setProperties({chosen:c["default"].clone(this.defaults)}),this.fire("quickset",{command:"defaults"});break;case"all":var r=this.locked&&this.locked.tail?this.chosen.length-this.locked.tail.length:this.chosen.length;n=[].concat(this.chosen.slice(0,r),this.waiting,this.chosen.slice(r)),this.setProperties({chosen:n}),this.fire("quickset",{command:"all"});break;case"close":var a=t.parentNode,o=a.getAttribute("data-value");n=c["default"].without(this.chosen,o),this.setProperties({chosen:n})}}e.preventDefault(),e.stopPropagation()})},n.prototype.processDragEvents=function(){var e=this,t=e.getPart("content"),i=e.getPart("waiting"),n=null,r=c["default"].chain([c["default"].toArray(i.querySelectorAll(".item")),c["default"].toArray(t.querySelectorAll(".item"))]).flatten().filter(function(t){var i=t.getAttribute("data-value"),n=c["default"].indexOf(e.locked.head,i)>-1,r=c["default"].indexOf(e.locked.tail,i)>-1;if(n||r)return t.removeAttribute("draggable"),t.setAttribute("data-locked",!0),t.setAttribute("data-locked-position",n?"head":"tail"),t.className="item locked",!1;else return!0}).value();c["default"].each(r,function(i){i.draggable=!0,i.onselectstart=function(){return!1},i.ondragstart=function(i){var n=d["default"].getAttribute(i.target,"data-value");if(e.chosen.length>=e.maxFields&&c["default"].contains(e.waiting,n))return i.dataTransfer.effectAllowed="none",!1;else return i.dataTransfer.effectAllowed="move",i.dataTransfer.setData("Text",i.target.getAttribute("data-value")),i.target.className="item dragging",t.className=t.className?t.className+" ondragging-container":"ondragging-container",!0},i.ondragend=function(i){if(i.preventDefault(),!n)return!1;var r=i.target.getAttribute("data-value");n.setAttribute("data-value",r),i.target.parentNode.removeChild(i.target),t.className=t.className.replace(/\sdragging/g,"");var a=t.querySelectorAll(".item"),o=c["default"].chain(a).toArray().map(function(e){return e.getAttribute("data-value")}).value();return e.setProperties({chosen:o}),!0}}),t.ondragover=function(e){e.preventDefault();var i=e.target.getAttribute("data-value"),r=e.target.getAttribute("data-locked-position");if(r||!i||"dragging"===e.target.className)return!1;var a=t.querySelector("ol"),o=e.offsetX<=e.target.offsetWidth/2;if(a.removeChild(n),o&&e.target.previousSibling!==n)a.insertBefore(n,e.target);else if(e.target.nextSibling!==n)a.insertBefore(n,e.target.nextSibling);return!1},t.ondragenter=function(e){var i=t.querySelector("ol");if(i&&e.target&&1===e.target.nodeType&&"dragging"!==e.target.className){if(!i.querySelector(".occupying")){n=document.createElement(E&&9>=E?"a":"li"),n.className="item occupying";var r=i.querySelector("[data-locked-position=tail]");i.insertBefore(n,r)}var a=e.target.getAttribute("data-value"),o=e.target.getAttribute("data-locked-position");if("head"===o||!a)return!1;else if("tail"===o){if(e.target.previousSibling!==n)i.removeChild(n),i.insertBefore(n,e.target)}else if(e.target.getAttribute("data-value")){var s=e.offsetX<=e.target.offsetWidth/2;if(i.removeChild(n),s&&e.target.previousSibling!==n)i.insertBefore(n,e.target);else if(e.target.nextSibling!==n)i.insertBefore(n,e.target.nextSibling)}}return!0},t.ondrop=function(e){return e.preventDefault(),e.stopPropagation(),!1}},n.prototype.getPart=function(e){var t=this.helper.getId(e);return document.getElementById(t)},n.prototype.renderPart=function(e,t){var i=this.getPart(e),n=g[e];if(i&&n)i.innerHTML=n(t)},n.prototype.show=function(){if(this.getPart("layer").style.display="block",this.clickPageToHide)d["default"].un(document.body,"click",this.clickPageToHide);this.clickPageToHide=c["default"].bind(this.hide,this),d["default"].on(document.body,"click",this.clickPageToHide)},n.prototype.hide=function(){if(this.getPart("layer").style.display="none",this.clickPageToHide)d["default"].un(document.body,"click",this.clickPageToHide)},n}(C["default"]);H.prototype.type="TableCustomFieldsInterface",H.prototype.repaint=D["default"].createRepaint(C["default"].prototype.repaint,{name:["datasource","chosen"],paint:A}),h["default"].register(H),module.exports=H}),define("inf-ria/ui/extension/TableCustomFields",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","jquery","fc-storage/localStorage","fc-storage/cookie","esui/Extension","esui","esui/Table","./TableCustomFieldsInterface"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A){var B=n["default"](i),c=n["default"](r),C=n["default"](a),D=n["default"](o),d=n["default"](s),f=n["default"](l),h=n["default"](u),E=function(i){function n(){t["default"](this,n);for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];i.call(this,r)}return e["default"](n,i),n.prototype.activate=function(){var e=this,t=this.target;if(t instanceof h["default"]&&t.extTableCustomFields instanceof Object){var n=(location.hash||"").split("~")[0],r=t.extTableCustomFields||{},a=t.fields;this.allFields=B["default"].map(a,function(e){return e.field});var o=t.extTableCustomFields.defaults||this.allFields,s=t.id,l=D["default"].getItem("bce-login-display-name")||"-1",u=[n,l,s].join("-");if(t.extTableCustomFields.maxFields>0)u=[n,l,s,"2017-1-18"].join("-");var A=C["default"].getItem(u);if(!A)A=o;if(!B["default"].isArray(o)||!o.length)o=B["default"].map(a,function(e){return e.field});var d=B["default"].object(A,B["default"].range(A.length));t.fields=B["default"].filter(a,function(e){return B["default"].indexOf(A,e.field)>-1}).sort(function(e,t){return d[e.field]-d[t.field]}),this.currentFields=B["default"].map(t.fields,function(e){return e.field});var E=c["default"](r.container),p=f["default"].create("TableCustomFieldsInterface",{id:t.id+"-interface",childName:"interface",main:E[0],datasource:B["default"].map(a,function(e){return{text:e.title,value:e.field}}),chosen:A,defaults:o,locked:t.extTableCustomFields.locked,maxFields:t.extTableCustomFields.maxFields||a.length+1});p.render();var F=B["default"].clone(A);p.on("save",function(i){C["default"].setItem(u,i.data);var n=B["default"].object(i.data,B["default"].range(i.data.length));t.setProperties({fields:B["default"].filter(a,function(e){return B["default"].indexOf(i.data,e.field)>-1}).sort(function(e,t){return n[e.field]-n[t.field]})}),t.fire("ext-fieldchanged",{newData:i.data,oldData:F}),e.currentFields=B["default"].map(t.fields,function(e){return e.field})}),t.addChild(p);for(var m=arguments.length,g=Array(m),H=0;m>H;H++)g[H]=arguments[H];return i.prototype.activate.call(this,g)}},n.prototype.inactivate=function(){var e=this.target;if(e instanceof h["default"]){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return i.prototype.inactivate.call(this,n)}},n}(d["default"]);E.prototype.type="TableCustomFields",f["default"].registerExtension(E),module.exports=E}),define("inf-ria/ui/extension/Kafka",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","underscore","esui/main","esui/painters","esui/Extension","esui/Select"],function(exports,module,e,t,i,n,r,a,o,s,l,u){var A=r["default"](n),B=r["default"](a),c=r["default"](o),C=r["default"](s),D=r["default"](l),d=r["default"](u),f=function(n){function r(){i["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.loadData=function(e){var t=this.target,i=e?{"x-silent":!0}:{"X-silence":!0};return!e&&t.set("showTip","loading"),t.getKafkaList({},i).then(function(e){var i=B["default"].map(e.topics,function(e){return{name:e.replace(/^[^_]+__(\S+)$/g,function(e,t){return t}),value:e}});if(t.set("datasource",i),!i.length&&t.required)t.set("showTip","create");else t.set("showTip","hidden");t.fire("loadOk",{data:i})},function(i){if(!e)t.set("showTip","loadError");t.fire("loadError")})},r.prototype.isVisible=function(){if(this.target){var e=this.target;return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length||"hidden"!==getComputedStyle(e).visibility)}},r.prototype.create=function(){var e=this.target;e.fire("create")},r.prototype.startAutoRefresh=function(){var e=this;this.autoRefreshTimmer=setInterval(function(){e.loadData(!0)},3e3)},r.prototype.stopAutoRefresh=function(){clearInterval(this.autoRefreshTimmer)},r.prototype.activate=function(){var e=this,t=this.target;if(t instanceof d["default"])if("function"==typeof t.getKafkaList){var i=t.helper.getPrimaryClassName("kafka"),n=i+"-wrap",r=i+"-tip",a=i+"-create",o=i+"-loading",s=i+"-load-error";t.$wrap=A["default"](t.main).after('\n                <div class="'+r+'">\n                    <div class="'+a+'">\n                        请至少\n                        <a id="'+t.helper.getId("createBtn")+'"\n                            href="javascript:void(0)">创建</a>\n                        一个主题\n                    </div>\n                    <div class="'+o+'">\n                        正在加载，请稍后\n                    </div>\n                    <div class="'+s+'">\n                        加载错误，请\n                        <a id="'+t.helper.getId("errorTip")+'"\n                            href="javascript:void(0)">重试</a>\n                    </div>\n                </div>\n                ').nextAll().addBack().wrapAll('<div class="'+n+'"></div>').parent("."+n),
t.repaint=C["default"].createRepaint(t.repaint,{name:["showTip"],paint:function(e,t){if(e.$wrap.find("."+r+">div").hide(),"create"===t)e.$wrap.find("."+a).show();else if("loading"===t)e.$wrap.find("."+o).show();else if("loadError"===t)e.$wrap.find("."+s).show()}},{name:"autoRefresh",paint:function(t,i){if(i&&!e.autoRefreshTimmer)e.startAutoRefresh();if(!i&&e.autoRefreshTimmer)e.stopAutoRefresh()}}),t.on("init",function(){e.loadData()}),t.helper.addDOMEvent("errorTip","click",function(){e.loadData()}),t.helper.addDOMEvent("createBtn","click",function(){e.create()}),t.loadData=B["default"].bind(this.loadData,this)}},r.prototype.inactivate=function(){var e=this.target;if(e instanceof d["default"]){e.un("init"),e.helper.removeDOMEvent("errorTip","click"),e.helper.removeDOMEvent("createBtn","click");var t=e.helper.getPrimaryClassName("kafka"),i=t+"-tip";e.$wrap.find("."+i).remove(),A["default"](e.main).unwrap(),e.set("showTip",!1),e.set("autoRefresh",!1),delete e.loadData,delete e.showTip,delete e.autoRefresh,n.prototype.inactivate.call(this)}},t["default"](r,[{key:"type",get:function(){return"Kafka"}}]),r}(D["default"]);module.exports=f,c["default"].registerExtension(f)}),define("inf-ria/ui/extension/AutoValidate",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","esui/main","esui/Extension","esui/InputControl"],function(exports,module,e,t,i,n,r,a,o,s){var l=r["default"](n),u=r["default"](a),A=r["default"](o),B=r["default"](s),c="AutoValidate",C=["TextBox"],D=["Select"],d=function(n){function r(){i["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.activate=function(){var e=this,t=this.target;if(t instanceof B["default"]){if(t.renderOptions&&t.renderOptions.parent){var i=l["default"].find(t.renderOptions.parent.extensions,function(e){return e instanceof r});if(i&&i.prevent!==!1)this.prevent=!0}if(this.prevent)return n.prototype.activate.call(this);if(l["default"].isString(this.events))l["default"].each(this.events.split(","),function(t){if("input"===t)e.bindLazyValidate(t);else e.bindValidate(t)});else if(l["default"].indexOf(C,t.type)>-1)this.bindLazyValidate("input");else if(l["default"].indexOf(D,t.type)>-1)this.bindValidate("change");n.prototype.activate.call(this)}},r.prototype.bindValidate=function(e){var t=this;this.target.on(e,function(){return t.target.validate()})},r.prototype.bindLazyValidate=function(e){var t=this;this.target.on(e,l["default"].debounce(function(){return t.target&&t.target.validate()},100))},r.prototype.inactivate=function(){var e=this.target;if(e instanceof B["default"])n.prototype.inactivate.call(this)},t["default"](r,[{key:"type",get:function(){return c}}]),r}(A["default"]);module.exports=d,u["default"].registerExtension(d),u["default"].attachExtension(c,{prevent:!1})}),define("inf-ria/ui/extension/AceTool",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","esui/main","esui/Extension","../ACEEditor"],function(exports,module,e,t,i,n,r,a,o,s){var l=r["default"](n),u=r["default"](a),A=r["default"](o),B=r["default"](s),c=function(n){function r(){i["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.activate=function(){var e=this.target;if(e instanceof B["default"])e.on("loaded",function(){var t=window.ace;if(t){var i=e.helper.getPrimaryClassName();l["default"](e.main).before('\n                <div class="'+i+'-title">\n                    <div class="'+i+'-action">\n                        <div class="'+i+'-btn-group">\n                            <span \n                                class="'+i+'-full-screen iconfont icon-full-screen animated"\n                                title="Toggle Fullscreen: Ctrl+F">\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                ');var n=t.require("ace/lib/dom"),r=void 0,a=void 0,o=function(e){if(!r)a=window.pageYOffset;if(r=n.toggleCssClass(document.body,"full-screen"),!r)window.scrollTo(0,a);e.resize(),e.focus()};e.editor.commands.addCommand({name:"Toggle Fullscreen",bindKey:{win:"Ctrl-F",mac:"Ctrl-F"},exec:o}),l["default"]("."+i+"-full-screen").on("click",function(){o(e.editor)})}})},r.prototype.inactivate=function(){var e=this.target;if(e instanceof B["default"]){var t=e.helper.getPrimaryClassName();l["default"](t+"-title").remove(),e.un("loaded"),n.prototype.inactivate.call(this)}},t["default"](r,[{key:"type",get:function(){return"AceTool"}}]),r}(A["default"]);module.exports=c,u["default"].registerExtension(c)}),define("inf-ria/ui/SelectEx",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","babel-runtime/helpers/create-class","underscore","babel-runtime/helpers/interop-require-default","esui","esui/lib","esui/InputControl","esui/Layer","esui/painters"],function(exports,module,e,t,i,n,r,a,o,s,l,u){function A(e){for(var t=p["default"].event.getTarget(e),i=this.layer.getElement();t&&t!==i&&!p["default"].hasAttribute(t,"data-index");)t=t.parentNode;if(t&&!this.helper.isPart(t,"item-disabled")&&t.getAttribute("data-index")){var n=t.getAttribute("data-index"),r=d(this,n),a=r.currentItem&&r.currentItem.children,o=!(a&&a.length);if(this.renderList(n),"click"===e.type){if(o||this.parentSelectable){var s=this.fire("beforechange",{index:n});if(!s.isDefaultPrevented())n=this.hasChildList?n:+n,this.set("selectedIndex",n)}if(o)this.layer.setScrollTopArr(n),this.layer.hide()}}}function B(e){if(null==e.selectedIndex&&null==e.rawValue&&null==e.value)e.selectedIndex=-1;if(null!=e.rawValue)e.value=null,e.selectedIndex=null;else if(null!=e.value)e.selectedIndex=null;if(null==e.selectedIndex&&(null!=e.value||null!=e.rawValue)){e.selectedIndex=-1;for(var t=e.rawValue||e.value,i=0;i<e.datasource.length;i++){var n=i;if(e.hasChildList)n=f(e.datasource,e.joinStr,t).indices.join(".");if(e.hasChildList||e.datasource[i].value==t){e.selectedIndex=n;break}}delete e.value,delete e.rawValue}if(e.selectedIndex<0||e.selectedIndex>=e.datasource.length)if(e.emptyText)e.selectedIndex=-1;else{e.selectedIndex=-1;for(var i=0;i<e.datasource.length;i++)if(!e.datasource[i].disabled){e.selectedIndex=i;break}}}function c(){for(var e=this.selectedIndex,t=d(this,e),i=(e+"").split("."),n=0;n<t.layerNumber;n++){var r=i.slice(0,n+1).join(".");this.renderList(r)}D(this),this.layer.toggle()}function C(){this.fire("layerrendered",{layer:this.layer})}function D(e){var t=d(e),i=e.helper.getPart("text");i.innerHTML=t.innerHTML;var n=e.layer.getElement(!1);if(n)e.layer.syncState(n)}function d(e,t){var i=((t||e.selectedIndex)+"").split("."),n=e.datasource,r="",a=null,o="",s=[];return h["default"].each(i,function(t,i){if(t=parseInt(t,10),a=-1===t?null:n[t]){n=a.children||[];var l=a.value;if(i>0)r+=e.joinStr,o+=e.joinStr;if(r+=e.getDisplayHTML(a),e.hasChildList)o+=l;else o=l;s.push(a)}}),{currentItem:a,selectItems:s,currentValue:o,innerHTML:r,layerNumber:i.length}}function f(e,t,i){var n=i.split(t),r=null,a=[];return h["default"].each(n,function(t){if(r=h["default"].find(e,function(e,i){if(e.value===t)a.push(i);return e.value===t}))e=r.children||[]}),{indices:a}}var h=r["default"](n),E=r["default"](a),p=r["default"](o),F=r["default"](s),m=r["default"](l),g=r["default"](u),H=function(i){function n(e){t["default"](this,n),i.call(this,e),this.nodeName="div",this.dock={strictWidth:!0}}return e["default"](n,i),n.prototype.setScrollTopArr=function(e){for(var t=this.getElement(),i=((e||this.control.selectedIndex)+"").split("."),n=[],r=0;r<i.length;r++)n.push(p["default"].getChildren(t)[r].scrollTop);this.scrollTopArr=n},n.prototype.constructList=function(e,t,i){var n="";t=t?t+".":"";var r=this.control.helper.getPartClasses("item");if(i)r=r.concat(i);if(e)for(var a=0;a<e.length;a++){var o=r.slice(),s=e[a];if(s.disabled)o.push(this.control.helper.getPartClassName("item-disabled"));if(s&&(!s.children||!s.children.length))o.push(this.control.helper.getPartClassName("item-end"));n+='<li data-index="'+t+a+'" class="'+o.join(" ")+'">\n                                '+this.control.getItemHTML(s)+"\n                            </li>"}return n},n.prototype.clearChildList=function(e){for(var t=this.getElement(),i=p["default"].getChildren(t),n=this.control.helper.getPartClasses("hidden"),r=e;r<i.length;r++){var a=i[r];a.innerHTML="",p["default"].addClasses(a,n)}},n.prototype.renderChildList=function(e,t,i){for(var n=this.getElement(),r=this.scrollTopArr,a=(t+"").split("."),o=0,s=0,l=p["default"].dom.first(p["default"].dom.first(n)).clientHeight,u=0;u<a.length;u++)o+=parseInt(a[u],10),s+=p["default"].getChildren(n)[u].scrollTop||!l&&r&&r[u]||0;var A=this.constructList(e,t,this.control.helper.getPartClasses("child-item")),B=p["default"].getChildren(n)[i],c=(l||30)*o-s+"px",C=this.control.helper.getPartClasses("hidden");if(B){if(B.style.top=c,A)B.innerHTML=A,p["default"].removeClasses(B,C)}else{var D=h["default"].union(this.control.helper.getPartClasses("list"),this.control.helper.getPartClasses("child-list"));if(!A)D.push(C);n.innerHTML+='<ul class="'+D.join(" ")+'" style="left:'+i+"00%; top:"+c+'">\n                                    '+A+"\n                                </ul>"}},n.prototype.render=function(e){var t=this.control.helper.getPartClassName("list"),i=this.constructList(this.control.datasource);e.innerHTML='<ol class="'+t+'">'+i+"</ol>"},n.prototype.initBehavior=function(e){if("click"!==this.control.eventType)this.control.helper.addDOMEvent(e,"mouseover",A);this.control.helper.addDOMEvent(e,"click",A)},n.prototype.syncState=function(e){var t=this.control.helper.getPartClasses("item-selected"),i=p["default"].getChildren(e),n=(this.control.selectedIndex+"").split(".");h["default"].each(n,function(e,n){for(var r=i[n]?p["default"].getChildren(i[n]):[],a=r.length-1;a>=0;a--){var o=r[a];if(a===+e)p["default"].addClasses(o,t);else p["default"].removeClasses(o,t)}})},n}(m["default"]),G=function(n){function r(e){t["default"](this,r),n.call(this,e),this.itemTemplate='<span title="${title}">${text}</span>',this.displayTemplate="${text}",this.layer=new H(this)}return e["default"](r,n),i["default"](r,[{key:"type",get:function(){return"SelectEx"}}]),r.prototype.renderList=function(e){var t=d(this,e),i=t.currentItem&&t.currentItem.children;if(this.layer.clearChildList(t.layerNumber),i&&i.length)this.layer.renderChildList(i,e,t.layerNumber)},r.prototype.initOptions=function(e){var t={datasource:[],hasChildList:!1,joinStr:"/",eventType:"click",parentSelectable:!1},i={};if(e.hasChildList)t.eventType="hover";if(h["default"].extend(i,t,e),"select"===this.main.nodeName.toLowerCase()){i.datasource=[];for(var n=this.main.getElementsByTagName("option"),r=0,a=n.length;a>r;r++){var o=n[r],s={name:o.name||o.text,value:o.value,title:o.title||"",children:o.children};if(o.disabled)s.disabled=!0;if(i.datasource.push(s),o.selected&&null==i.selectedIndex&&null==i.value&&null==i.rawValue)i.selectedIndex=o.value?r:0}this.helper.extractOptionsFromInput(this.main,i)}if("string"==typeof i.selectedIndex){var l=i.hasChildList?i.selectedIndex:+i.selectedIndex;i.selectedIndex=l}this.setProperties(i)},r.prototype.getItemHTML=function(e){var t={text:h["default"].escape(e.name||e.text),value:h["default"].escape(e.value),title:h["default"].escape(e.title||"")};return p["default"].format(this.itemTemplate,t)},r.prototype.getDisplayHTML=function(e){if(!e)return h["default"].escape(this.emptyText||"");var t={text:h["default"].escape(e.name||e.text),value:h["default"].escape(e.value)};return p["default"].format(this.displayTemplate,t)},r.prototype.initStructure=function(){if("select"===this.main.nodeName.toLowerCase())this.helper.replaceMain();this.main.tabIndex=0,this.main.innerHTML=this.helper.getPartHTML("text","span")},r.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",h["default"].bind(c,this)),this.layer.on("rendered",h["default"].bind(C,this))},r.prototype.getRawValue=function(){if(this.selectedIndex<0)return null;var e=d(this);return e.currentValue?e.currentValue:null},r.prototype.updateDatasource=function(e){if(!e)e=this.datasource;this.datasource=e,this.selectedIndex=e.length>0?0:-1;var t={name:"datasource"},i={name:"selectedIndex"};this.repaint([t,i],{datasource:t,selectedIndex:i}),this.fire("change")},r.prototype.setProperties=function(e){if(null==e.datasource)e.datasource=this.datasource;if(null==e.value&&null==e.rawValue&&null==e.selectedIndex&&e.datasource===this.datasource)e.selectedIndex=this.selectedIndex;if(!e.hasOwnProperty("emptyText"))e.emptyText=this.emptyText;B(e);var t=n.prototype.setProperties.call(this,e);if(t.hasOwnProperty("selectedIndex"))this.fire("change");return t},r.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;n.prototype.dispose.call(this)}},r.prototype.getSelectedItem=function(){var e=this.get("datasource")[this.get("selectedIndex")];if(this.hasChildList)e=d(this).selectItems;return e},i["default"](r,[{key:"repaint",get:function(){return g["default"].createRepaint(n.prototype.repaint,g["default"].style("width"),g["default"].style("height"),{name:"datasource",paint:function(e){e.layer.repaint()}},{name:["selectedIndex","emptyText","datasource"],paint:D},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.setScrollTopArr(),e.layer.hide()}})}}]),r}(F["default"]);module.exports=G,E["default"].register(G)}),define("json-editor/class",["require"],function(require){var e=!1,t=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/,i=function(){};return i.extend=function n(i){function r(){if(!e&&this.init)this.init.apply(this,arguments)}var a=this.prototype;e=!0;var o=new this;e=!1;for(var s in i)o[s]="function"==typeof i[s]&&"function"==typeof a[s]&&t.test(i[s])?function(e,t){return function(){var i=this._super;this._super=a[e];var n=t.apply(this,arguments);return this._super=i,n}}(s,i[s]):i[s];return r.prototype=o,r.prototype.constructor=r,r.extend=n,r},i}),define("json-editor/validator",["require","./core","./class","./utilities"],function(require){var e=require("./core"),t=require("./class"),i=require("./utilities");return e.Validator=t.extend({init:function(t,i,n){this.jsoneditor=t,this.schema=i||this.jsoneditor.schema,this.options=n||{},this.translate=this.jsoneditor.translate||e.defaults.translate},validate:function(e){return this._validateSchema(this.schema,e)},_validateSchema:function(t,n,r){var a,o,s,l=this,u=[],A=JSON.stringify(n);if(r=r||"root",t=i.$extend({},this.jsoneditor.expandRefs(t)),t.required&&t.required===!0){if("undefined"==typeof n)return u.push({path:r,property:"required",message:this.translate("error_notset")}),u}else if("undefined"==typeof n)if(this.jsoneditor.options.required_by_default)u.push({path:r,property:"required",message:this.translate("error_notset")});else return u;if(t["enum"]){for(a=!1,o=0;o<t["enum"].length;o++)if(A===JSON.stringify(t["enum"][o]))a=!0;if(!a)u.push({path:r,property:"enum",message:this.translate("error_enum")})}if(t["extends"])for(o=0;o<t["extends"].length;o++)u=u.concat(this._validateSchema(t["extends"][o],n,r));if(t.allOf)for(o=0;o<t.allOf.length;o++)u=u.concat(this._validateSchema(t.allOf[o],n,r));if(t.anyOf){for(a=!1,o=0;o<t.anyOf.length;o++)if(!this._validateSchema(t.anyOf[o],n,r).length){a=!0;break}if(!a)u.push({path:r,property:"anyOf",message:this.translate("error_anyOf")})}if(t.oneOf){a=0;var B=[];for(o=0;o<t.oneOf.length;o++){var c=this._validateSchema(t.oneOf[o],n,r);if(!c.length)a++;for(s=0;s<c.length;s++)c[s].path=r+".oneOf["+o+"]"+c[s].path.substr(r.length);B=B.concat(c)}if(1!==a)u.push({path:r,property:"oneOf",message:this.translate("error_oneOf",[a])}),u=u.concat(B)}if(t.not)if(!this._validateSchema(t.not,n,r).length)u.push({path:r,property:"not",message:this.translate("error_not")});if(t.type)if(Array.isArray(t.type)){for(a=!1,o=0;o<t.type.length;o++)if(this._checkType(t.type[o],n)){a=!0;break}if(!a)u.push({path:r,property:"type",message:this.translate("error_type_union")})}else if(!this._checkType(t.type,n))u.push({path:r,property:"type",message:this.translate("error_type",[t.type])});if(t.disallow)if(Array.isArray(t.disallow)){for(a=!0,o=0;o<t.disallow.length;o++)if(this._checkType(t.disallow[o],n)){a=!1;break}if(!a)u.push({path:r,property:"disallow",message:this.translate("error_disallow_union")})}else if(this._checkType(t.disallow,n))u.push({path:r,property:"disallow",message:this.translate("error_disallow",[t.disallow])});if("number"==typeof n){if(t.multipleOf||t.divisibleBy){var C=t.multipleOf||t.divisibleBy;if(a=n/C===Math.floor(n/C),window.math)a=window.math.mod(window.math.bignumber(n),window.math.bignumber(C)).equals(0);else if(window.Decimal)a=new window.Decimal(n).mod(new window.Decimal(C)).equals(0);if(!a)u.push({path:r,property:t.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[C])})}if(t.hasOwnProperty("maximum")){if(a=t.exclusiveMaximum?n<t.maximum:n<=t.maximum,window.math)a=window.math[t.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(n),window.math.bignumber(t.maximum));else if(window.Decimal)a=new window.Decimal(n)[t.exclusiveMaximum?"lt":"lte"](new window.Decimal(t.maximum));if(!a)u.push({path:r,property:"maximum",message:this.translate(t.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[t.maximum])})}if(t.hasOwnProperty("minimum")){if(a=t.exclusiveMinimum?n>t.minimum:n>=t.minimum,window.math)a=window.math[t.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(n),window.math.bignumber(t.minimum));else if(window.Decimal)a=new window.Decimal(n)[t.exclusiveMinimum?"gt":"gte"](new window.Decimal(t.minimum));if(!a)u.push({path:r,property:"minimum",message:this.translate(t.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[t.minimum])})}}else if("string"==typeof n){if(t.maxLength)if((n+"").length>t.maxLength)u.push({path:r,property:"maxLength",message:this.translate("error_maxLength",[t.maxLength])});if(t.minLength)if((n+"").length<t.minLength)u.push({path:r,property:"minLength",message:this.translate(1===t.minLength?"error_notempty":"error_minLength",[t.minLength])});if(t.pattern)if(!new RegExp(t.pattern).test(n))u.push({path:r,property:"pattern",message:this.translate("error_pattern",[t.pattern])})}else if("object"==typeof n&&null!==n&&Array.isArray(n)){if(t.items)if(Array.isArray(t.items))for(o=0;o<n.length;o++)if(t.items[o])u=u.concat(this._validateSchema(t.items[o],n[o],r+"."+o));else if(t.additionalItems===!0)break;else if(t.additionalItems)u=u.concat(this._validateSchema(t.additionalItems,n[o],r+"."+o));else if(t.additionalItems===!1){u.push({path:r,property:"additionalItems",message:this.translate("error_additionalItems")});break}else break;else for(o=0;o<n.length;o++)u=u.concat(this._validateSchema(t.items,n[o],r+"."+o));if(t.maxItems)if(n.length>t.maxItems)u.push({path:r,property:"maxItems",message:this.translate("error_maxItems",[t.maxItems])});if(t.minItems)if(n.length<t.minItems)u.push({path:r,property:"minItems",message:this.translate("error_minItems",[t.minItems])});if(t.uniqueItems){var D={};for(o=0;o<n.length;o++){if(a=JSON.stringify(n[o]),D[a]){u.push({path:r,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}D[a]=!0}}}else if("object"==typeof n&&null!==n){if(t.maxProperties){a=0;for(o in n)if(n.hasOwnProperty(o))a++;else;if(a>t.maxProperties)u.push({path:r,property:"maxProperties",message:this.translate("error_maxProperties",[t.maxProperties])})}if(t.minProperties){a=0;for(o in n)if(n.hasOwnProperty(o))a++;else;if(a<t.minProperties)u.push({path:r,property:"minProperties",message:this.translate("error_minProperties",[t.minProperties])})}if(t.required&&Array.isArray(t.required))for(o=0;o<t.required.length;o++)if("undefined"==typeof n[t.required[o]])u.push({path:r,property:"required",message:this.translate("error_required",[t.required[o]])});var d={};if(t.properties)for(o in t.properties)if(t.properties.hasOwnProperty(o))d[o]=!0,u=u.concat(this._validateSchema(t.properties[o],n[o],r+"."+o));else;if(t.patternProperties)for(o in t.patternProperties)if(t.patternProperties.hasOwnProperty(o)){var f=new RegExp(o);for(s in n)if(n.hasOwnProperty(s)){if(f.test(s))d[s]=!0,u=u.concat(this._validateSchema(t.patternProperties[o],n[s],r+"."+s))}else;}else;if("undefined"==typeof t.additionalProperties&&this.jsoneditor.options.no_additional_properties&&!t.oneOf&&!t.anyOf)t.additionalProperties=!1;if("undefined"!=typeof t.additionalProperties)for(o in n)if(n.hasOwnProperty(o)){if(!d[o])if(!t.additionalProperties){u.push({path:r,property:"additionalProperties",message:this.translate("error_additional_properties",[o])});break}else if(t.additionalProperties===!0)break;else u=u.concat(this._validateSchema(t.additionalProperties,n[o],r+"."+o))}else;if(t.dependencies)for(o in t.dependencies)if(t.dependencies.hasOwnProperty(o))if("undefined"!=typeof n[o])if(Array.isArray(t.dependencies[o])){for(s=0;s<t.dependencies[o].length;s++)if("undefined"==typeof n[t.dependencies[o][s]])u.push({path:r,property:"dependencies",message:this.translate("error_dependency",[t.dependencies[o][s]])})}else u=u.concat(this._validateSchema(t.dependencies[o],n,r));else;else;}if(i.$each(e.defaults.custom_validators,function(e,i){u=u.concat(i.call(l,t,n,r))}),this.options.custom_validators)i.$each(this.options.custom_validators,function(e,i){u=u.concat(i.call(l,t,n,r))});return u},nullableFloor:function(e){if(null===e)return null;else return Math.floor(e)},_checkType:function(e,t){if("string"==typeof e)if("string"===e)return"string"==typeof t;else if("number"===e)return"number"==typeof t;else if("integer"===e)return"number"==typeof t&&t===this.nullableFloor(t);else if("boolean"===e)return"boolean"==typeof t;else if("array"===e)return Array.isArray(t);else if("object"===e)return null!==t&&!Array.isArray(t)&&"object"==typeof t;else if("null"===e)return null===t;else return!0;else return!this._validateSchema(e,t).length}}),e.Validator}),define("json-editor/editor",["require","./class","./core","./utilities"],function(require){var e=require("./class"),t=require("./core"),i=require("./utilities");return t.AbstractEditor=e.extend({onChildEditorChange:function(e){this.onChange(!0)},notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){if(this.parent)this.parent.onChildEditorChange(this);else this.jsoneditor.onChange()},onChange:function(e){if(this.notify(),this.watch_listener)this.watch_listener();if(e)this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){if(this.jsoneditor)this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(e){if(this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||t.defaults.translate,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=i.$extend({},this.options||{},e.schema.options||{},e),!e.path&&!this.schema.id)this.schema.id="root";if(this.path=e.path||"root",this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root)this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[");if(this.key=this.path.split(".").pop(),this.parent=e.parent,this.link_watchers=[],e.container)this.setContainer(e.container)},setContainer:function(e){if(this.container=e,this.schema.id)this.container.setAttribute("data-schemaid",this.schema.id);if(this.schema.type&&"string"==typeof this.schema.type)this.container.setAttribute("data-schematype",this.schema.type);this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var e=this;if(this.watched={},this.schema.vars)this.schema.watch=this.schema.vars;if(this.watched_values={},this.watch_listener=function(){if(e.refreshWatchedFieldValues())e.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var t,i,n,r,a;for(var o in this.schema.watch)if(this.schema.watch.hasOwnProperty(o)){if(t=this.schema.watch[o],Array.isArray(t)){if(t.length<2)continue;i=[t[0]].concat(t[1].split("."))}else if(i=t.split("."),!e.theme.closest(e.container,'[data-schemaid="'+i[0]+'"]'))i.unshift("#");if(n=i.shift(),"#"===n)n=e.jsoneditor.schema.id||"root";if(r=e.theme.closest(e.container,'[data-schemaid="'+n+'"]'),!r)throw"Could not find ancestor node with id "+n;a=r.getAttribute("data-schemapath")+"."+i.join("."),e.jsoneditor.watch(a,e.watch_listener),e.watched[o]=a}else;}if(this.schema.headerTemplate)this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine)},addLinks:function(){if(!this.no_link_holder)if(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links)for(var e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))},getButton:function(e,t,i){var n="json-editor-btn-"+t;if(!this.iconlib)t=null;else t=this.iconlib.getIcon(t);if(!t&&i)e=i,i=null;var r=this.theme.getButton(e,t,i);return r.className+=" "+n+" ",r},setButtonText:function(e,t,i,n){if(!this.iconlib)i=null;else i=this.iconlib.getIcon(i);if(!i&&n)t=n,n=null;return this.theme.setButtonText(e,t,i,n)},addLink:function(e){if(this.link_holder)this.link_holder.appendChild(e)},getLink:function(e){var t,i,n=e.mediaType||"application/javascript",r=n.split("/")[0],a=this.jsoneditor.compileTemplate(e.href,this.template_engine),o=null;if(e.download)o=e.download;if(o&&o!==!0)o=this.jsoneditor.compileTemplate(o,this.template_engine);if("image"===r){t=this.theme.getBlockLinkHolder(),i=document.createElement("a"),i.setAttribute("target","_blank");var s=document.createElement("img");this.theme.createImageLink(t,i,s),this.link_watchers.push(function(t){var n=a(t);i.setAttribute("href",n),i.setAttribute("title",e.rel||n),s.setAttribute("src",n)})}else if(["audio","video"].indexOf(r)>=0){t=this.theme.getBlockLinkHolder(),i=this.theme.getBlockLink(),i.setAttribute("target","_blank");var l=document.createElement(r);l.setAttribute("controls","controls"),this.theme.createMediaLink(t,i,l),this.link_watchers.push(function(t){var n=a(t);i.setAttribute("href",n),i.textContent=e.rel||n,l.setAttribute("src",n)})}else i=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,this.link_watchers.push(function(i){var n=a(i);t.setAttribute("href",n),t.textContent=e.rel||n});if(o&&i)if(o===!0)i.setAttribute("download","");else this.link_watchers.push(function(e){i.setAttribute("download",o(e))});if(e["class"])i.className=i.className+" "+e["class"];return t},refreshWatchedFieldValues:function(){if(this.watched_values){var e={},t=!1,i=this;if(this.watched){var n,r;for(var a in this.watched)if(this.watched.hasOwnProperty(a)){if(r=i.jsoneditor.getEditor(this.watched[a]),n=r?r.getValue():null,i.watched_values[a]!==n)t=!0;e[a]=n}else;}if(e.self=this.getValue(),this.watched_values.self!==e.self)t=!0;return this.watched_values=e,t}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length){for(var e=0;e<this.header.childNodes.length;e++)if(3===this.header.childNodes[e].nodeType){this.header.childNodes[e].nodeValue=this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(e){if(this.header_text)return this.header_text;else if(e)return this.schema.title;else return this.getTitle()},onWatchedFieldChange:function(){var e;if(this.header_template){e=i.util.$extend(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var t=this.header_template(e);if(t!==this.header_text)this.header_text=t,this.updateHeaderText(),this.notify()}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(var n=0;n<this.link_watchers.length;n++)this.link_watchers[n](e)}},setValue:function(e){this.value=e},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var e=this;if(this.unregister(this),i.$each(this.watched,function(t,i){e.jsoneditor.unwatch(i,e.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode)this.container.parentNode.removeChild(this.container);this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if(this.schema["default"])return this.schema["default"];if(this.schema["enum"])return this.schema["enum"][0];var e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e))e=e[0];if(e&&"object"==typeof e)e=e.type;if(e&&Array.isArray(e))e=e[0];if("string"==typeof e){if("number"===e)return null;if("boolean"===e)return!1;if("integer"===e)return null;if("string"===e)return"";if("object"===e)return{};if("array"===e)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){if("boolean"==typeof this.schema.required)return this.schema.required;else if(this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required))return this.parent.schema.required.indexOf(this.key)>-1;else if(this.jsoneditor.options.required_by_default)return!0;else return!1},getDisplayText:function(e){var t=[],n={};i.$each(e,function(e,t){if(t.title)n[t.title]=n[t.title]||0,n[t.title]++;if(t.description)n[t.description]=n[t.description]||0,n[t.description]++;if(t.format)n[t.format]=n[t.format]||0,n[t.format]++;if(t.type)n[t.type]=n[t.type]||0,n[t.type]++}),i.$each(e,function(e,i){var r;if("string"==typeof i)r=i;else if(i.title&&n[i.title]<=1)r=i.title;else if(i.format&&n[i.format]<=1)r=i.format;else if(i.type&&n[i.type]<=1)r=i.type;else if(i.description&&n[i.description]<=1)r=i.descripton;else if(i.title)r=i.title;else if(i.format)r=i.format;else if(i.type)r=i.type;else if(i.description)r=i.description;else if(JSON.stringify(i).length<50)r=JSON.stringify(i);else r="type";t.push(r)});var r={};return i.$each(t,function(e,i){if(r[i]=r[i]||0,r[i]++,n[i]>1)t[e]=i+" "+r[i]}),t},getOption:function(e){try{throw"getOption is deprecated"}catch(t){window.console.error(t)}return this.options[e]},showValidationErrors:function(e){}}),t.AbstractEditor}),define("json-editor/editors/null",["require","../core","../editor"],function(require){var e=require("../core"),t=require("../editor");return e.defaults.editors["null"]=t.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),e.defaults.editors["null"]}),define("json-editor/editors/string",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.string=t.extend({register:function(){if(this._super(),this.input)this.input.setAttribute("name",this.formname)},unregister:function(){if(this._super(),this.input)this.input.removeAttribute("name")},setValue:function(e,t,i){if(!this.template||i){if(null===e||"undefined"==typeof e)e="";else if("object"==typeof e)e=JSON.stringify(e);else if("string"!=typeof e)e=""+e;if(e!==this.serialized){var n=this.sanitize(e);if(this.input.value!==n){if(this.input.value=n,this.sceditor_instance)this.sceditor_instance.val(n);else if(this.epiceditor)this.epiceditor.importFile(null,n);else if(this.ace_editor)this.ace_editor.setValue(n);
var r=i||this.getValue()!==e;if(this.refreshValue(),t)this.is_dirty=!1;else if("change"===this.jsoneditor.options.show_errors)this.is_dirty=!0;if(this.adjust_height)this.adjust_height(this.input);this.onChange(r)}}}},getNumColumns:function(){var e,t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);if("textarea"===this.input_type)e=6;else if(["text","email"].indexOf(this.input_type)>=0)e=4;else e=2;return Math.min(12,Math.max(t,e))},build:function(){var e=this;if(!this.options.compact)this.header=this.label=this.theme.getFormInputLabel(this.getTitle());if(this.schema.description)this.description=this.theme.getFormInputDescription(this.schema.description);if(this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type)this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"");if(!this.format&&this.options.default_format)this.format=this.options.default_format;if(this.options.format)this.format=this.options.format;if(this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range";var t=this.schema.minimum||0,i=this.schema.maximum||Math.max(100,t+1),n=1;if(this.schema.multipleOf){if(t%this.schema.multipleOf)t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf;if(i%this.schema.multipleOf)i=Math.floor(i/this.schema.multipleOf)*this.schema.multipleOf;n=this.schema.multipleOf}this.input=this.theme.getRangeInput(t,i,n)}else if(["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0)this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput();else this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);if("undefined"!=typeof this.schema.maxLength)this.input.setAttribute("maxlength",this.schema.maxLength);if("undefined"!=typeof this.schema.pattern)this.input.setAttribute("pattern",this.schema.pattern);else if("undefined"!=typeof this.schema.minLength)this.input.setAttribute("pattern",".{"+this.schema.minLength+",}");if(this.options.compact)this.container.className+=" compact";else if(this.options.input_width)this.input.style.width=this.options.input_width;if(this.schema.readOnly||this.schema.readonly||this.schema.template)this.always_disabled=!0,this.input.disabled=!0;if(this.input.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),e.schema.template)return void(this.value=e.value);var i=this.value,n=e.sanitize(i);if(i!==n)this.value=n;e.is_dirty=!0,e.refreshValue(),e.onChange(!0)}),this.options.input_height)this.input.style.height=this.options.input_height;if(this.options.expand_height)this.adjust_height=function(e){if(e){var t,i=e.offsetHeight;if(e.offsetHeight<e.scrollHeight)for(t=0;e.offsetHeight<e.scrollHeight+3&&!(t>100);)t++,i++,e.style.height=i+"px";else{for(t=0;e.offsetHeight>=e.scrollHeight+3&&!(t>100);)t++,i--,e.style.height=i+"px";e.style.height=i+1+"px"}}},this.input.addEventListener("keyup",function(t){e.adjust_height(this)}),this.input.addEventListener("change",function(t){e.adjust_height(this)}),this.adjust_height();if(this.format)this.input.setAttribute("data-schemaformat",this.format);if(this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),window.requestAnimationFrame(function(){if(e.input.parentNode)e.afterInputReady();if(e.adjust_height)e.adjust_height(e.input)}),this.schema.template)this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue();else this.refreshValue()},enable:function(){if(!this.always_disabled)this.input.disabled=!1;this._super()},disable:function(){this.input.disabled=!0,this._super()},afterInputReady:function(){var t,n=this;if(this.source_code)if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor)t=i.$extend({},{plugins:"html"===n.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},e.plugins.sceditor,n.options.sceditor_options||{}),window.jQuery(n.input).sceditor(t),n.sceditor_instance=window.jQuery(n.input).sceditor("instance"),n.sceditor_instance.blur(function(){var e=window.jQuery("<div>"+n.sceditor_instance.val()+"</div>");window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",e).remove(),n.input.value=e.html(),n.value=n.input.value,n.is_dirty=!0,n.onChange(!0)});else if("markdown"===this.input_type&&window.EpicEditor)this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",t=i.$extend({},e.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=new window.EpicEditor(t).load(),this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var e=n.epiceditor.exportFile();n.input.value=e,n.value=e,n.is_dirty=!0,n.onChange(!0)});else if(window.ace){var r=this.input_type;if("cpp"===r||"c++"===r||"c"===r)r="c_cpp";if(this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),e.plugins.ace.theme)this.ace_editor.setTheme("ace/theme/"+e.plugins.ace.theme);if(r=window.ace.require("ace/mode/"+r))this.ace_editor.getSession().setMode(new r.Mode);this.ace_editor.on("change",function(){var e=n.ace_editor.getValue();n.input.value=e,n.refreshValue(),n.is_dirty=!0,n.onChange(!0)})}n.theme.afterInputReady(n.input)},refreshValue:function(){if(this.value=this.input.value,"string"!=typeof this.value)this.value="";this.serialized=this.value},destroy:function(){if(this.sceditor_instance)this.sceditor_instance.destroy();else if(this.epiceditor)this.epiceditor.unload();else if(this.ace_editor)this.ace_editor.destroy();if(this.template=null,this.input&&this.input.parentNode)this.input.parentNode.removeChild(this.input);if(this.label&&this.label.parentNode)this.label.parentNode.removeChild(this.label);if(this.description&&this.description.parentNode)this.description.parentNode.removeChild(this.description);this._super()},sanitize:function(e){return e},onWatchedFieldChange:function(){var e;if(this.template)e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0);this._super()},showValidationErrors:function(e){var t=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var n=[];if(i.$each(e,function(e,i){if(i.path===t.path)n.push(i.message)}),n.length)this.theme.addInputError(this.input,n.join(". ")+".");else this.theme.removeInputError(this.input)}}),e.defaults.editors.string}),define("json-editor/editors/number",["require","../core","../utilities","./string"],function(require){var e=require("../core"),t=(require("../utilities"),require("./string"));return e.defaults.editors.number=t.extend({sanitize:function(e){return(e+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){if(this.value)return 1*this.value;else return null}}),e.defaults.editors.number}),define("json-editor/editors/integer",["require","../core","./number"],function(require){var e=require("../core"),t=require("./number");return e.defaults.editors.integer=t.extend({sanitize:function(e){if(e=(e+"").replace(/[^0-9\.\-]/g,""))return Math.floor(e);else return null},getNumColumns:function(){return 2}}),e.defaults.editors.integer}),define("json-editor/editors/object",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.object=t.extend({getDefault:function(){return i.$extend({},this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var e in this.editors)if(this.editors.hasOwnProperty(e))this.editors[e].register();else;},unregister:function(){if(this._super(),this.editors)for(var e in this.editors)if(this.editors.hasOwnProperty(e))this.editors[e].unregister();else;},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button)this.editjson_button.disabled=!1;if(this.addproperty_button)this.addproperty_button.disabled=!1;if(this._super(),this.editors)for(var e in this.editors)if(this.editors.hasOwnProperty(e))this.editors[e].enable();else;},disable:function(){if(this.editjson_button)this.editjson_button.disabled=!0;if(this.addproperty_button)this.addproperty_button.disabled=!0;if(this.hideEditJSON(),this._super(),this.editors)for(var e in this.editors)if(this.editors.hasOwnProperty(e))this.editors[e].disable();else;},layoutEditors:function(){var e,t,n=this;if(this.row_container){this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(e,t){var i=n.editors[e].schema.propertyOrder,r=n.editors[t].schema.propertyOrder;if("number"!=typeof i)i=1e3;if("number"!=typeof r)r=1e3;return i-r});var r;if("grid"===this.format){var a=[];for(i.$each(this.property_order,function(e,t){var i=n.editors[t];if(!i.property_removed){for(var r=!1,o=i.options.hidden?0:i.options.grid_columns||i.getNumColumns(),s=i.options.hidden?0:i.container.offsetHeight,l=0;l<a.length;l++)if(a[l].width+o<=12)if(!s||.5*a[l].minh<s&&2*a[l].maxh>s)r=l;if(r===!1)a.push({width:0,minh:999999,maxh:0,editors:[]}),r=a.length-1;a[r].editors.push({key:t,width:o,height:s}),a[r].width+=o,a[r].minh=Math.min(a[r].minh,s),a[r].maxh=Math.max(a[r].maxh,s)}}),e=0;e<a.length;e++)if(a[e].width<12){var o=!1,s=0;for(t=0;t<a[e].editors.length;t++){if(o===!1)o=t;else if(a[e].editors[t].width>a[e].editors[o].width)o=t;a[e].editors[t].width*=12/a[e].width,a[e].editors[t].width=Math.floor(a[e].editors[t].width),s+=a[e].editors[t].width}if(12>s)a[e].editors[o].width+=12-s;a[e].width=12}if(this.layout===JSON.stringify(a))return!1;for(this.layout=JSON.stringify(a),r=document.createElement("div"),e=0;e<a.length;e++){var l=this.theme.getGridRow();for(r.appendChild(l),t=0;t<a[e].editors.length;t++){var u=a[e].editors[t].key,A=this.editors[u];if(A.options.hidden)A.container.style.display="none";else this.theme.setGridColumnSize(A.container,a[e].editors[t].width);l.appendChild(A.container)}}}else r=document.createElement("div"),i.$each(this.property_order,function(e,t){var i=n.editors[t];if(!i.property_removed){var a=n.theme.getGridRow();if(r.appendChild(a),i.options.hidden)i.container.style.display="none";else n.theme.setGridColumnSize(i.container,12);a.appendChild(i.container)}});this.row_container.innerHTML="",this.row_container.appendChild(r)}},getPropertySchema:function(e){var t=this.schema.properties[e]||{};t=i.$extend({},t);var n=this.schema.properties[e]?!0:!1;if(this.schema.patternProperties)for(var r in this.schema.patternProperties)if(this.schema.patternProperties.hasOwnProperty(r)){var a=new RegExp(r);if(a.test(e))t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[r]),n=!0}else;if(!n&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties)t=i.$extend({},this.schema.additionalProperties);return t},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var e=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)i.$each(this.schema.properties,function(t,i){var n=e.jsoneditor.getEditorClass(i);e.editors[t]=e.jsoneditor.createEditor(n,{jsoneditor:e.jsoneditor,schema:i,path:e.path+"."+t,parent:e,compact:!0,required:!0}),e.editors[t].preBuild();var r=e.editors[t].options.hidden?0:e.editors[t].options.grid_columns||e.editors[t].getNumColumns();e.minwidth+=r,e.maxwidth+=r}),this.no_link_holder=!0;else if(this.options.table)throw"Not supported yet";else{if(!this.schema.defaultProperties)if(this.jsoneditor.options.display_required_only||this.options.display_required_only)this.schema.defaultProperties=[],i.$each(this.schema.properties,function(t,i){if(e.isRequired({key:t,schema:i}))e.schema.defaultProperties.push(t)});else e.schema.defaultProperties=Object.keys(e.schema.properties);e.maxwidth+=1,i.$each(this.schema.defaultProperties,function(t,i){if(e.addObjectProperty(i,!0),e.editors[i])e.minwidth=Math.max(e.minwidth,e.editors[i].options.grid_columns||e.editors[i].getNumColumns()),e.maxwidth+=e.editors[i].options.grid_columns||e.editors[i].getNumColumns()})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(t,i){var n=e.editors[t].schema.propertyOrder,r=e.editors[i].schema.propertyOrder;if("number"!=typeof n)n=1e3;if("number"!=typeof r)r=1e3;return n-r})},build:function(){var e=this;if(this.options.table_row)this.editor_holder=this.container,i.$each(this.editors,function(t,i){var n=e.theme.getTableCell();if(e.editor_holder.appendChild(n),i.setContainer(n),i.build(),i.postBuild(),e.editors[t].options.hidden)n.style.display="none";if(e.editors[t].options.input_width)n.style.width=e.editors[t].options.input_width});else if(this.options.table)throw"Not supported yet";else{this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),e.addproperty_input.value){if(e.editors[e.addproperty_input.value])return void window.alert("there is already a property with that name");if(e.addObjectProperty(e.addproperty_input.value),e.editors[e.addproperty_input.value])e.editors[e.addproperty_input.value].disable();e.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var t=document.createElement("div");if(t.style.clear="both",this.addproperty_holder.appendChild(t),this.schema.description)this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description);if(this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),i.$each(this.editors,function(t,i){var n=e.theme.getGridColumn();e.row_container.appendChild(n),i.setContainer(n),i.build(),i.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),e.collapsed)e.editor_holder.style.display="",e.collapsed=!1,e.setButtonText(e.toggle_button,"","collapse",e.translate("button_collapse"));else e.editor_holder.style.display="none",e.collapsed=!0,e.setButtonText(e.toggle_button,"","expand",e.translate("button_expand"))}),this.options.collapsed)i.$trigger(this.toggle_button,"click");if(this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse){if(this.schema.options.disable_collapse)this.toggle_button.style.display="none"}else if(this.jsoneditor.options.disable_collapse)this.toggle_button.style.display="none";if(this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&"undefined"!=typeof this.schema.options.disable_edit_json){if(this.schema.options.disable_edit_json)this.editjson_button.style.display="none"}else if(this.jsoneditor.options.disable_edit_json)this.editjson_button.style.display="none";this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties()}if(this.options.table_row)this.editor_holder=this.container,i.$each(this.property_order,function(t,i){e.editor_holder.appendChild(e.editors[i].container)});else this.layoutEditors(),this.layoutEditors()},showEditJSON:function(){if(this.editjson_holder)this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0},hideEditJSON:function(){if(this.editjson_holder)if(this.editing_json)this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1},saveJSON:function(){if(this.editjson_holder)try{var e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON()}catch(t){throw window.alert("invalid JSON"),t}},toggleEditJSON:function(){if(this.editing_json)this.hideEditJSON();else this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(e,t,i){var n;if(this.schema.properties[e])n=this.schema.properties[e].propertyOrder;if("number"!=typeof n)n=1e3;t.propertyOrder=n;for(var r=0;r<i.childNodes.length;r++){var a=i.childNodes[r];if(t.propertyOrder<a.propertyOrder){this.addproperty_list.insertBefore(t,a),t=null;break}}if(t)this.addproperty_list.appendChild(t)},addPropertyCheckbox:function(e){var t,i,n,r,a=this;if(t=a.theme.getCheckbox(),t.style.width="auto",this.schema.properties[e]&&this.schema.properties[e].title)n=this.schema.properties[e].title;else n=e;return i=a.theme.getCheckboxLabel(n),r=a.theme.getFormControl(i,t),r.style.paddingBottom=r.style.marginBottom=r.style.paddingTop=r.style.marginTop=0,r.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,r,this.addproperty_list),t.checked=e in this.editors,t.addEventListener("change",function(){if(t.checked)a.addObjectProperty(e);else a.removeObjectProperty(e);a.onChange(!0)}),a.addproperty_checkboxes[e]=t,t},showAddProperty:function(){if(this.addproperty_holder)this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties()},hideAddProperty:function(){if(this.addproperty_holder)if(this.adding_property)this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1},toggleAddProperty:function(){if(this.adding_property)this.hideAddProperty();else this.showAddProperty()},removeObjectProperty:function(e){if(this.editors[e])this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors()},addObjectProperty:function(e,t){var i=this;if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[e]))return;var n=i.getPropertySchema(e),r=i.jsoneditor.getEditorClass(n);if(i.editors[e]=i.jsoneditor.createEditor(r,{jsoneditor:i.jsoneditor,schema:n,path:i.path+"."+e,parent:i}),i.editors[e].preBuild(),!t){var a=i.theme.getChildEditorHolder();i.editor_holder.appendChild(a),i.editors[e].setContainer(a),i.editors[e].build(),i.editors[e].postBuild()}i.cached_editors[e]=i.editors[e]}if(!t)i.refreshValue(),i.layoutEditors()}},onChildEditorChange:function(e){this.refreshValue(),this._super(e)},canHaveAdditionalProperties:function(){if("boolean"==typeof this.schema.additionalProperties)return this.schema.additionalProperties;else return!this.jsoneditor.options.no_additional_properties},destroy:function(){if(i.$each(this.cached_editors,function(e,t){t.destroy()}),this.editor_holder)this.editor_holder.innerHTML="";if(this.title&&this.title.parentNode)this.title.parentNode.removeChild(this.title);if(this.error_holder&&this.error_holder.parentNode)this.error_holder.parentNode.removeChild(this.error_holder);if(this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode)this.editor_holder.parentNode.removeChild(this.editor_holder);this.editor_holder=null,this._super()},getValue:function(){var e=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var t in e)if(e.hasOwnProperty(t))if(!e[t])delete e[t];return e},refreshValue:function(){this.value={};for(var e in this.editors)if(this.editors.hasOwnProperty(e))this.value[e]=this.editors[e].getValue();else;if(this.adding_property)this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties)return void(this.addproperty_controls.style.display="none");var e,t=!1,i=!1,n=0,r=!1;for(e in this.editors)if(this.editors.hasOwnProperty(e))n++;else;if(t=this.canHaveAdditionalProperties()&&!("undefined"!=typeof this.schema.maxProperties&&n>=this.schema.maxProperties),this.addproperty_checkboxes)this.addproperty_list.innerHTML="";this.addproperty_checkboxes={};for(e in this.cached_editors)if(this.cached_editors.hasOwnProperty(e)){if(this.addPropertyCheckbox(e),this.isRequired(this.cached_editors[e])&&e in this.editors)this.addproperty_checkboxes[e].disabled=!0;if("undefined"!=typeof this.schema.minProperties&&n<=this.schema.minProperties){if(this.addproperty_checkboxes[e].disabled=this.addproperty_checkboxes[e].checked,!this.addproperty_checkboxes[e].checked)r=!0}else if(!(e in this.editors))if(!t&&!this.schema.properties.hasOwnProperty(e))this.addproperty_checkboxes[e].disabled=!0;else this.addproperty_checkboxes[e].disabled=!1,r=!0;else r=!0,i=!0}else;if(this.canHaveAdditionalProperties())r=!0;for(e in this.schema.properties)if(this.schema.properties.hasOwnProperty(e))if(!this.cached_editors[e])r=!0,this.addPropertyCheckbox(e);else;else;if(!r)this.hideAddProperty(),this.addproperty_controls.style.display="none";else if(!this.canHaveAdditionalProperties())this.addproperty_add.style.display="none",this.addproperty_input.style.display="none";else if(!t)this.addproperty_add.disabled=!0;else this.addproperty_add.disabled=!1},isRequired:function(e){if("boolean"==typeof e.schema.required)return e.schema.required;else if(Array.isArray(this.schema.required))return this.schema.required.indexOf(e.key)>-1;else if(this.jsoneditor.options.required_by_default)return!0;else return!1},setValue:function(e,t){var n=this;if(e=e||{},"object"!=typeof e||Array.isArray(e))e={};i.$each(this.cached_editors,function(i,r){if("undefined"!=typeof e[i])n.addObjectProperty(i),r.setValue(e[i],t);else if(!t&&!n.isRequired(r))n.removeObjectProperty(i);else r.setValue(r.getDefault(),t)}),i.$each(e,function(e,i){if(!n.cached_editors[e])if(n.addObjectProperty(e),n.editors[e])n.editors[e].setValue(i,t)}),this.refreshValue(),this.layoutEditors(),this.onChange()},showValidationErrors:function(e){var t=this,n=[],r=[];if(i.$each(e,function(e,i){if(i.path===t.path)n.push(i);else r.push(i)}),this.error_holder)if(n.length){this.error_holder.innerHTML="",this.error_holder.style.display="",i.$each(n,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})}else this.error_holder.style.display="none";if(this.options.table_row)if(n.length)this.theme.addTableRowError(this.container);else this.theme.removeTableRowError(this.container);i.$each(this.editors,function(e,t){t.showValidationErrors(r)})}}),e.defaults.editors.object}),define("json-editor/editors/array",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.array=t.extend({getDefault:function(){return this.schema["default"]||[]},register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){var e=this.getItemInfo(0);if(this.tabs_holder)return Math.max(Math.min(12,e.width+2),4);else return e.width},enable:function(){if(this.add_row_button)this.add_row_button.disabled=!1;if(this.remove_all_rows_button)this.remove_all_rows_button.disabled=!1;if(this.delete_last_row_button)this.delete_last_row_button.disabled=!1;if(this.rows)for(var e=0;e<this.rows.length;e++){if(this.rows[e].enable(),this.rows[e].moveup_button)this.rows[e].moveup_button.disabled=!1;if(this.rows[e].movedown_button)this.rows[e].movedown_button.disabled=!1;if(this.rows[e].delete_button)this.rows[e].delete_button.disabled=!1}this._super()},disable:function(){if(this.add_row_button)this.add_row_button.disabled=!0;if(this.remove_all_rows_button)this.remove_all_rows_button.disabled=!0;if(this.delete_last_row_button)this.delete_last_row_button.disabled=!0;if(this.rows)for(var e=0;e<this.rows.length;e++){if(this.rows[e].disable(),this.rows[e].moveup_button)this.rows[e].moveup_button.disabled=!0;if(this.rows[e].movedown_button)this.rows[e].movedown_button.disabled=!0;if(this.rows[e].delete_button)this.rows[e].delete_button.disabled=!0}this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){if(!this.options.compact){if(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description)this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description);if(this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format)this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null;else this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls)}else this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder);this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this.refreshTabs(!0),this._super(e)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=e.title||"item"}else this.item_title="item";return this.item_title},getItemSchema:function(e){if(Array.isArray(this.schema.items))if(e>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};else if(this.schema.additionalItems)return i.$extend({},this.schema.additionalItems)}else return i.$extend({},this.schema.items[e]);else if(this.schema.items)return i.$extend({},this.schema.items);else return{}},getItemInfo:function(e){var t=this.getItemSchema(e);this.item_info=this.item_info||{};var i=JSON.stringify(t);if("undefined"!=typeof this.item_info[i])return this.item_info[i];else return t=this.jsoneditor.expandRefs(t),this.item_info[i]={title:t.title||"item","default":t["default"],width:12,child_editors:t.properties||t.items},this.item_info[i]},getElementEditor:function(e){var t=this.getItemInfo(e),i=this.getItemSchema(e);i=this.jsoneditor.expandRefs(i),i.title=t.title+" "+(e+1);var n,r=this.jsoneditor.getEditorClass(i);if(this.tabs_holder)n=this.theme.getTabContent();else if(t.child_editors)n=this.theme.getChildEditorHolder();else n=this.theme.getIndentedPanel();this.row_holder.appendChild(n);var a=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:i,container:n,path:this.path+"."+e,parent:this,required:!0});if(a.preBuild(),a.build(),a.postBuild(),!a.title_controls)a.array_controls=this.theme.getButtonHolder(),n.appendChild(a.array_controls);
return a},destroy:function(){if(this.empty(!0),this.title&&this.title.parentNode)this.title.parentNode.removeChild(this.title);if(this.description&&this.description.parentNode)this.description.parentNode.removeChild(this.description);if(this.row_holder&&this.row_holder.parentNode)this.row_holder.parentNode.removeChild(this.row_holder);if(this.controls&&this.controls.parentNode)this.controls.parentNode.removeChild(this.controls);if(this.panel&&this.panel.parentNode)this.panel.parentNode.removeChild(this.panel);this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(e){if(this.rows){var t=this;if(i.$each(this.rows,function(i,n){if(e){if(n.tab&&n.tab.parentNode)n.tab.parentNode.removeChild(n.tab);t.destroyRow(n,!0),t.row_cache[i]=null}t.rows[i]=null}),t.rows=[],e)t.row_cache=[]}},destroyRow:function(e,t){var i=e.container;if(t){if(e.destroy(),i.parentNode)i.parentNode.removeChild(i);if(e.tab&&e.tab.parentNode)e.tab.parentNode.removeChild(e.tab)}else{if(e.tab)e.tab.style.display="none";i.style.display="none",e.unregister()}},getMax:function(){if(Array.isArray(this.schema.items)&&this.schema.additionalItems===!1)return Math.min(this.schema.items.length,this.schema.maxItems||1/0);else return this.schema.maxItems||1/0},refreshTabs:function(e){var t=this;i.$each(this.rows,function(i,n){if(n.tab)if(e)n.tab_text.textContent=n.getHeaderText();else if(n.tab===t.active_tab)t.theme.markTabActive(n.tab),n.container.style.display="";else t.theme.markTabInactive(n.tab),n.container.style.display="none"})},setValue:function(e,t){if(e=e||[],!Array.isArray(e))e=[e];var n=JSON.stringify(e);if(n!==this.serialized){if(this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length)["default"]);if(this.getMax()&&e.length>this.getMax())e=e.slice(0,this.getMax());var r=this;i.$each(e,function(e,i){if(r.rows[e])r.rows[e].setValue(i,t);else if(r.row_cache[e]){if(r.rows[e]=r.row_cache[e],r.rows[e].setValue(i,t),r.rows[e].container.style.display="",r.rows[e].tab)r.rows[e].tab.style.display="";r.rows[e].register()}else r.addRow(i,t)});for(var a=e.length;a<r.rows.length;a++)r.destroyRow(r.rows[a]),r.rows[a]=null;r.rows=r.rows.slice(0,e.length);var o=null;if(i.$each(r.rows,function(e,t){if(t.tab===r.active_tab)return o=t.tab,!1;else return void 0}),!o&&r.rows.length)o=r.rows[0].tab;r.active_tab=o,r.refreshValue(t),r.refreshTabs(!0),r.refreshTabs(),r.onChange()}},refreshValue:function(e){var t=this,n=this.value?this.value.length:0;if(this.value=[],i.$each(this.rows,function(e,i){t.value[e]=i.getValue()}),n!==this.value.length||e){var r=this.schema.minItems&&this.schema.minItems>=this.rows.length;i.$each(this.rows,function(e,i){if(i.movedown_button)if(e===t.rows.length-1)i.movedown_button.style.display="none";else i.movedown_button.style.display="";if(i.delete_button)if(r)i.delete_button.style.display="none";else i.delete_button.style.display="";t.value[e]=i.getValue()});var a=!1;if(!this.value.length)this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none";else if(1===this.value.length)if(this.remove_all_rows_button.style.display="none",r||this.hide_delete_last_row_buttons)this.delete_last_row_button.style.display="none";else this.delete_last_row_button.style.display="",a=!0;else{if(r||this.hide_delete_last_row_buttons)this.delete_last_row_button.style.display="none";else this.delete_last_row_button.style.display="",a=!0;if(r||this.hide_delete_all_rows_buttons)this.remove_all_rows_button.style.display="none";else this.remove_all_rows_button.style.display="",a=!0}if(this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button)this.add_row_button.style.display="none";else this.add_row_button.style.display="",a=!0;if(!this.collapsed&&a)this.controls.style.display="inline-block";else this.controls.style.display="none"}},addRow:function(e,t){var n=this,r=this.rows.length;if(n.rows[r]=this.getElementEditor(r),n.row_cache[r]=n.rows[r],n.tabs_holder)n.rows[r].tab_text=document.createElement("span"),n.rows[r].tab_text.textContent=n.rows[r].getHeaderText(),n.rows[r].tab=n.theme.getTab(n.rows[r].tab_text),n.rows[r].tab.addEventListener("click",function(e){n.active_tab=n.rows[r].tab,n.refreshTabs(),e.preventDefault(),e.stopPropagation()}),n.theme.addTab(n.tabs_holder,n.rows[r].tab);var a=n.rows[r].title_controls||n.rows[r].array_controls;if(!n.hide_delete_buttons)if(n.rows[r].delete_button=this.getButton(n.getItemTitle(),"delete",this.translate("button_delete_row_title",[n.getItemTitle()])),n.rows[r].delete_button.className+=" delete",n.rows[r].delete_button.setAttribute("data-i",r),n.rows[r].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),r=n.getValue(),a=[],o=null;if(i.$each(r,function(e,i){if(e!==t)a.push(i);else if(n.rows[e].tab===n.active_tab)if(n.rows[e+1])o=n.rows[e].tab;else if(e)o=n.rows[e-1].tab}),n.setValue(a),o)n.active_tab=o,n.refreshTabs();n.onChange(!0)}),a)a.appendChild(n.rows[r].delete_button);if(r&&!n.hide_move_buttons)if(n.rows[r].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),n.rows[r].moveup_button.className+=" moveup",n.rows[r].moveup_button.setAttribute("data-i",r),n.rows[r].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i");if(!(0>=t)){var i=n.getValue(),r=i[t-1];i[t-1]=i[t],i[t]=r,n.setValue(i),n.active_tab=n.rows[t-1].tab,n.refreshTabs(),n.onChange(!0)}}),a)a.appendChild(n.rows[r].moveup_button);if(!n.hide_move_buttons)if(n.rows[r].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),n.rows[r].movedown_button.className+=" movedown",n.rows[r].movedown_button.setAttribute("data-i",r),n.rows[r].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),i=n.getValue();if(!(t>=i.length-1)){var r=i[t+1];i[t+1]=i[t],i[t]=r,n.setValue(i),n.active_tab=n.rows[t+1].tab,n.refreshTabs(),n.onChange(!0)}}),a)a.appendChild(n.rows[r].movedown_button);if(e)n.rows[r].setValue(e,t);n.refreshTabs()},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button);var t=e.row_holder.style.display,n=e.controls.style.display;if(this.toggle_button.addEventListener("click",function(i){if(i.preventDefault(),i.stopPropagation(),e.collapsed){if(e.collapsed=!1,e.panel)e.panel.style.display="";if(e.row_holder.style.display=t,e.tabs_holder)e.tabs_holder.style.display="";e.controls.style.display=n,e.setButtonText(this,"","collapse",e.translate("button_collapse"))}else{if(e.collapsed=!0,e.row_holder.style.display="none",e.tabs_holder)e.tabs_holder.style.display="none";if(e.controls.style.display="none",e.panel)e.panel.style.display="none";e.setButtonText(this,"","expand",e.translate("button_expand"))}}),this.options.collapsed)i.$trigger(this.toggle_button,"click");if(this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse){if(this.schema.options.disable_collapse)this.toggle_button.style.display="none"}else if(this.jsoneditor.options.disable_collapse)this.toggle_button.style.display="none";if(this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.rows.length;if(e.row_cache[i]){if(e.rows[i]=e.row_cache[i],e.rows[i].setValue(e.rows[i].getDefault()),e.rows[i].container.style.display="",e.rows[i].tab)e.rows[i].tab.style.display="";e.rows[i].register()}else e.addRow();e.active_tab=e.rows[i].tab,e.refreshTabs(),e.refreshValue(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getValue(),n=null;if(e.rows.length>1&&e.rows[e.rows.length-1].tab===e.active_tab)n=e.rows[e.rows.length-2].tab;if(i.pop(),e.setValue(i),n)e.active_tab=n,e.refreshTabs();e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button),e.tabs)this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px"},showValidationErrors:function(e){var t=this,n=[],r=[];if(i.$each(e,function(e,i){if(i.path===t.path)n.push(i);else r.push(i)}),this.error_holder)if(n.length){this.error_holder.innerHTML="",this.error_holder.style.display="",i.$each(n,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})}else this.error_holder.style.display="none";i.$each(this.rows,function(e,t){t.showValidationErrors(r)})}}),e.defaults.editors.array}),define("json-editor/editors/table",["require","../core","./array","../utilities"],function(require){var e=require("../core"),t=require("./array"),i=require("../utilities");return e.defaults.editors.table=t.extend({register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e["default"]||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this._super()},build:function(){var e=this;this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var t=this.getElementEditor(0,!0);if(this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,!this.options.compact){if(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description)this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description);this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)}else this.panel=document.createElement("div"),this.container.appendChild(this.panel);if(this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var i=t.getChildEditors(),n=t.property_order||Object.keys(i),r=0;r<n.length;r++){var a=e.theme.getTableHeaderCell(i[n[r]].getTitle());if(i[n[r]].options.hidden)a.style.display="none";e.header_row.appendChild(a)}else e.header_row.appendChild(e.theme.getTableHeaderCell(this.item_title));t.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=e.theme.getTableHeaderCell(" "),e.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this._super()},getItemDefault:function(){return i.$extend({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(e,t){var n=i.$extend({},this.schema.items),r=this.jsoneditor.getEditorClass(n,this.jsoneditor),a=this.row_holder.appendChild(this.theme.getTableRow()),o=a;if(!this.item_has_child_editors)o=this.theme.getTableCell(),a.appendChild(o);var s=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,container:o,path:this.path+"."+e,parent:this,compact:!0,table_row:!0});if(s.preBuild(),!t)s.build(),s.postBuild(),s.controls_cell=a.appendChild(this.theme.getTableCell()),s.row=a,s.table_controls=this.theme.getButtonHolder(),s.controls_cell.appendChild(s.table_controls),s.table_controls.style.margin=0,s.table_controls.style.padding=0;return s},destroy:function(){if(this.innerHTML="",this.title&&this.title.parentNode)this.title.parentNode.removeChild(this.title);if(this.description&&this.description.parentNode)this.description.parentNode.removeChild(this.description);if(this.row_holder&&this.row_holder.parentNode)this.row_holder.parentNode.removeChild(this.row_holder);if(this.table&&this.table.parentNode)this.table.parentNode.removeChild(this.table);if(this.panel&&this.panel.parentNode)this.panel.parentNode.removeChild(this.panel);this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(e,t){if(e=e||[],this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());if(this.schema.maxItems&&e.length>this.schema.maxItems)e=e.slice(0,this.schema.maxItems);var n=JSON.stringify(e);if(n!==this.serialized){var r=!1,a=this;i.$each(e,function(e,t){if(a.rows[e])a.rows[e].setValue(t);else a.addRow(t),r=!0});for(var o=e.length;o<a.rows.length;o++){var s=a.rows[o].container;if(!a.item_has_child_editors)a.rows[o].row.parentNode.removeChild(a.rows[o].row);if(a.rows[o].destroy(),s.parentNode)s.parentNode.removeChild(s);a.rows[o]=null,r=!0}if(a.rows=a.rows.slice(0,e.length),a.refreshValue(),r||t)a.refreshRowButtons();a.onChange()}},refreshRowButtons:function(){var e=this,t=this.schema.minItems&&this.schema.minItems>=this.rows.length,n=!1;if(i.$each(this.rows,function(i,r){if(r.movedown_button)if(i===e.rows.length-1)r.movedown_button.style.display="none";else n=!0,r.movedown_button.style.display="";if(r.delete_button)if(t)r.delete_button.style.display="none";else n=!0,r.delete_button.style.display="";if(r.moveup_button)n=!0}),i.$each(this.rows,function(e,t){if(n)t.controls_cell.style.display="";else t.controls_cell.style.display="none"}),n)this.controls_header_cell.style.display="";else this.controls_header_cell.style.display="none";var r=!1;if(!this.value.length)this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none";else if(1===this.value.length)if(this.table.style.display="",this.remove_all_rows_button.style.display="none",t||this.hide_delete_last_row_buttons)this.delete_last_row_button.style.display="none";else this.delete_last_row_button.style.display="",r=!0;else{if(this.table.style.display="",t||this.hide_delete_last_row_buttons)this.delete_last_row_button.style.display="none";else this.delete_last_row_button.style.display="",r=!0;if(t||this.hide_delete_all_rows_buttons)this.remove_all_rows_button.style.display="none";else this.remove_all_rows_button.style.display="",r=!0}if(this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button)this.add_row_button.style.display="none";else this.add_row_button.style.display="",r=!0;if(!r)this.controls.style.display="none";else this.controls.style.display=""},refreshValue:function(){var e=this;this.value=[],i.$each(this.rows,function(t,i){e.value[t]=i.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(e){var t=this,n=this.rows.length;t.rows[n]=this.getElementEditor(n);var r=t.rows[n].table_controls;if(!this.hide_delete_buttons)t.rows[n].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),t.rows[n].delete_button.className+=" delete",t.rows[n].delete_button.setAttribute("data-i",n),t.rows[n].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=1*this.getAttribute("data-i"),r=t.getValue(),a=[];i.$each(r,function(e,t){if(e!==n)a.push(t)}),t.setValue(a),t.onChange(!0)}),r.appendChild(t.rows[n].delete_button);if(n&&!this.hide_move_buttons)t.rows[n].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),t.rows[n].moveup_button.className+=" moveup",t.rows[n].moveup_button.setAttribute("data-i",n),t.rows[n].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i");if(!(0>=i)){var n=t.getValue(),r=n[i-1];n[i-1]=n[i],n[i]=r,t.setValue(n),t.onChange(!0)}}),r.appendChild(t.rows[n].moveup_button);if(!this.hide_move_buttons)t.rows[n].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),t.rows[n].movedown_button.className+=" movedown",t.rows[n].movedown_button.setAttribute("data-i",n),t.rows[n].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),n=t.getValue();if(!(i>=n.length-1)){var r=n[i+1];n[i+1]=n[i],n[i]=r,t.setValue(n),t.onChange(!0)}}),r.appendChild(t.rows[n].movedown_button);if(e)t.rows[n].setValue(e)},addControls:function(){var e=this;if(this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls){if(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),e.collapsed)e.collapsed=!1,e.panel.style.display="",e.setButtonText(this,"","collapse",this.translate("button_collapse"));else e.collapsed=!0,e.panel.style.display="none",e.setButtonText(this,"","expand",this.translate("button_expand"))}),this.options.collapsed)i.$trigger(this.toggle_button,"click");if(this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse){if(this.schema.options.disable_collapse)this.toggle_button.style.display="none"}else if(this.jsoneditor.options.disable_collapse)this.toggle_button.style.display="none"}this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.addRow(),e.refreshValue(),e.refreshRowButtons(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getValue();i.pop(),e.setValue(i),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button)}}),e.defaults.editors.table}),define("json-editor/editors/multiple",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.multiple=t.extend({register:function(){if(this.editors){for(var e=0;e<this.editors.length;e++)if(this.editors[e])this.editors[e].unregister();else;if(this.editors[this.type])this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var e=0;e<this.editors.length;e++)if(this.editors[e])this.editors[e].unregister();else;},getNumColumns:function(){if(!this.editors[this.type])return 4;else return Math.max(this.editors[this.type].getNumColumns(),4)},enable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)if(this.editors[e])this.editors[e].enable();else;this.switcher.disabled=!1,this._super()},disable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)if(this.editors[e])this.editors[e].disable();else;this.switcher.disabled=!0,this._super()},switchEditor:function(e){var t=this;if(!this.editors[e])this.buildChildEditor(e);var n=t.getValue();t.type=e,t.register(),i.$each(t.editors,function(e,i){if(i)if(t.type===e){if(t.keep_values)i.setValue(n,!0);i.container.style.display=""}else i.container.style.display="none"}),t.refreshValue(),t.refreshHeaderText()},buildChildEditor:function(e){var t=this,n=this.types[e],r=t.theme.getChildEditorHolder();t.editor_holder.appendChild(r);var a;if("string"==typeof n)a=i.$extend({},t.schema),a.type=n;else if(a=i.$extend({},t.schema,n),a=t.jsoneditor.expandRefs(a),n.required&&Array.isArray(n.required)&&t.schema.required&&Array.isArray(t.schema.required))a.required=t.schema.required.concat(n.required);var o=t.jsoneditor.getEditorClass(a);if(t.editors[e]=t.jsoneditor.createEditor(o,{jsoneditor:t.jsoneditor,schema:a,container:r,path:t.path,parent:t,required:!0}),t.editors[e].preBuild(),t.editors[e].build(),t.editors[e].postBuild(),t.editors[e].header)t.editors[e].header.style.display="none";if(t.editors[e].option=t.switcher_options[e],r.addEventListener("change_header_text",function(){t.refreshHeaderText()}),e!==t.type)r.style.display="none"},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,"undefined"!=typeof this.jsoneditor.options.keep_oneof_values)this.keep_values=this.jsoneditor.options.keep_oneof_values;if("undefined"!=typeof this.options.keep_oneof_values)this.keep_values=this.options.keep_oneof_values;if(this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else{if(!this.schema.type||"any"===this.schema.type){if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var e=this.schema.disallow;if("object"!=typeof e||!Array.isArray(e))e=[e];var t=[];i.$each(this.types,function(i,n){if(-1===e.indexOf(n))t.push(n)}),this.types=t}}else if(Array.isArray(this.schema.type))this.types=this.schema.type;else this.types=[this.schema.type];delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var t=this,n=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),n.appendChild(this.switcher),this.switcher.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),t.switchEditor(t.display_text.indexOf(this.value)),t.onChange(!0)}),this.editor_holder=document.createElement("div"),n.appendChild(this.editor_holder);var r={};if(t.jsoneditor.options.custom_validators)r.custom_validators=t.jsoneditor.options.custom_validators;this.switcher_options=this.theme.getSwitcherOptions(this.switcher),i.$each(this.types,function(n,a){t.editors[n]=!1;var o;if("string"==typeof a)o=i.$extend({},t.schema),o.type=a;else if(o=i.$extend({},t.schema,a),a.required&&Array.isArray(a.required)&&t.schema.required&&Array.isArray(t.schema.required))o.required=t.schema.required.concat(a.required);t.validators[n]=new e.Validator(t.jsoneditor,o,r)})},onChildEditorChange:function(e){if(this.editors[this.type])this.refreshValue(),this.refreshHeaderText();this._super()},refreshHeaderText:function(){var e=this.getDisplayText(this.types);i.$each(this.switcher_options,function(t,i){i.textContent=e[t]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},findTypeHint:function(e){for(var t in e.properties)if(e.properties.hasOwnProperty(t)){var i=e.properties[t];if(/type$/i.test(t)&&null!=i["default"]&&null!=i.options&&i.options.hidden===!0)return{key:t,value:i["default"]}}},similarity:function(e,t){for(var i={},n=e.length,r=0;n>r;r++)i[e[r]]=!0;for(var a=0,o=0;o<t.length;o++){var s=t[o];if(i[s]===!0)a++}return a/n},setValue:function(e,t){var n=this;if(i.$each(this.validators,function(t,i){if(!i.validate(e).length)return n.type=t,n.switcher.value=n.display_text[t],!1;else return void 0}),e){var r=Object.keys(e);if(r.length){for(var a=-1,o=0,s=0;s<this.types.length;s++){var l=this.types[s],u=this.jsoneditor.expandRefs(i.$extend({},this.schema,l)),A=this.findTypeHint(u);if(A&&e[A.key]===A.value){a=s,o=1/0;break}var B=Object.keys(u.properties),c=this.similarity(r,B);if(c>o)a=s,o=c}if(-1!=a)this.type=a,this.switcher.value=this.display_text[this.type]}}this.switchEditor(this.type),this.editors[this.type].setValue(e,t),this.refreshValue(),n.onChange()},destroy:function(){if(i.$each(this.editors,function(e,t){if(t)t.destroy()}),this.editor_holder&&this.editor_holder.parentNode)this.editor_holder.parentNode.removeChild(this.editor_holder);if(this.switcher&&this.switcher.parentNode)this.switcher.parentNode.removeChild(this.switcher);this._super()},showValidationErrors:function(e){var t=this;if(this.oneOf||this.anyOf){var n=this.oneOf?"oneOf":"anyOf";i.$each(this.editors,function(r,a){if(a){var o=t.path+"."+n+"["+r+"]",s=[];i.$each(e,function(e,n){if(n.path.substr(0,o.length)===o){var r=i.$extend({},n);r.path=t.path+r.path.substr(o.length),s.push(r)}}),a.showValidationErrors(s)}})}else i.$each(this.editors,function(t,i){if(i)i.showValidationErrors(e)})}}),e.defaults.editors.multiple}),define("json-editor/editors/enum",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors["enum"]=t.extend({getNumColumns:function(){return 4},build:function(){this.container;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this["enum"]=this.schema["enum"],this.selected=0,this.select_options=[],this.html_values=[];for(var e=this,t=0;t<this["enum"].length;t++)this.select_options[t]=this.options.enum_titles[t]||"Value "+(t+1),this.html_values[t]=this.getHTML(this["enum"][t]);if(this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display)this.display_area.style.display="none";if(this.switcher.addEventListener("change",function(){e.selected=e.select_options.indexOf(this.value),e.value=e["enum"][e.selected],e.refreshValue(),e.onChange(!0)}),this.value=this["enum"][0],this.refreshValue(),1===this["enum"].length)this.switcher.style.display="none"},refreshValue:function(){var e=this;e.selected=-1;var t=JSON.stringify(this.value);if(i.$each(this["enum"],function(i,n){if(t===JSON.stringify(n))return e.selected=i,!1;else return void 0}),e.selected<0)return void e.setValue(e["enum"][0]);else return this.switcher.value=this.select_options[this.selected],void(this.display_area.innerHTML=this.html_values[this.selected])},enable:function(){if(!this.always_disabled)this.switcher.disabled=!1;this._super()},disable:function(){this.switcher.disabled=!0,this._super()},getHTML:function(e){var t=this;if(null===e)return"<em>null</em>";else if("object"==typeof e){var n="";if(i.$each(e,function(i,r){var a=t.getHTML(r);if(!Array.isArray(e))a="<div><em>"+i+"</em>: "+a+"</div>";n+="<li>"+a+"</li>"}),Array.isArray(e))n="<ol>"+n+"</ol>";else n="<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+n+"</ul>";return n}else if("boolean"==typeof e)return e?"true":"false";else if("string"==typeof e)return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");else return e},setValue:function(e){if(this.value!==e)this.value=e,this.refreshValue(),this.onChange()},destroy:function(){if(this.display_area&&this.display_area.parentNode)this.display_area.parentNode.removeChild(this.display_area);if(this.title&&this.title.parentNode)this.title.parentNode.removeChild(this.title);if(this.switcher&&this.switcher.parentNode)this.switcher.parentNode.removeChild(this.switcher);this._super()}}),e.defaults.editors["enum"]}),define("json-editor/editors/select",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.select=t.extend({setValue:function(e,t){e=this.typecast(e||"");var i=e;if(this.enum_values.indexOf(i)<0)i=this.enum_values[0];if(this.value!==i){if(this.input.value=this.enum_options[this.enum_values.indexOf(i)],this.select2)this.select2.select2("val",this.input.value);this.value=i,this.onChange()}},register:function(){if(this._super(),this.input)this.input.setAttribute("name",this.formname)},unregister:function(){if(this._super(),this.input)this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){if("boolean"===this.schema.type)return!!e;else if("number"===this.schema.type)return 1*e;else if("integer"===this.schema.type)return Math.floor(1*e);else return""+e},getValue:function(){return this.value},preBuild:function(){var e=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var t;if(this.schema["enum"]){var n=this.schema.options&&this.schema.options.enum_titles||[];if(i.$each(this.schema["enum"],function(t,i){e.enum_options[t]=""+i,e.enum_display[t]=""+(n[t]||i),e.enum_values[t]=e.typecast(i)}),!this.isRequired())e.enum_display.unshift(" "),e.enum_options.unshift("undefined"),e.enum_values.unshift(void 0)}else if("boolean"===this.schema.type){if(e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1",""],e.enum_values=[!0,!1],!this.isRequired())e.enum_display.unshift(" "),e.enum_options.unshift("undefined"),e.enum_values.unshift(void 0)}else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))if(this.schema.enumValue)this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}];else this.enumSource=[{source:this.schema.enumSource}];else for(t=0;t<this.schema.enumSource.length;t++)if("string"==typeof this.schema.enumSource[t])this.enumSource[t]={source:this.schema.enumSource[t]};else if(!Array.isArray(this.schema.enumSource[t]))this.enumSource[t]=i.$extend({},this.schema.enumSource[t]);else this.enumSource[t]=this.schema.enumSource[t];for(t=0;t<this.enumSource.length;t++){if(this.enumSource[t].value)this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine);if(this.enumSource[t].title)this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine);if(this.enumSource[t].filter)this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine)}}else throw"'select' editor requires the enum property to be set."},build:function(){var e=this;if(!this.options.compact)this.header=this.label=this.theme.getFormInputLabel(this.getTitle());if(this.schema.description)this.description=this.theme.getFormInputDescription(this.schema.description);if(this.options.compact)this.container.className+=" compact";if(this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),this.schema.readOnly||this.schema.readonly)this.always_disabled=!0,this.input.disabled=!0;this.input.addEventListener("change",function(t){
t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e=this.input.value,t=this.enum_options.indexOf(e);if(-1===t)t=0;var i=this.enum_values[t];if(i!==this.value)this.value=i,this.onChange(!0)},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){var t=i.$extend({},e.plugins.select2);if(this.schema.options&&this.schema.options.select2_options)t=i.$extend(t,this.schema.options.select2_options);this.select2=window.jQuery(this.input).select2(t);var n=this;this.select2.on("select2-blur",function(){n.input.value=n.select2.select2("val"),n.onInputChange()}),this.select2.on("change",function(){n.input.value=n.select2.select2("val"),n.onInputChange()})}else this.select2=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelect2()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var i=[],n=[],r=0;r<this.enumSource.length;r++)if(Array.isArray(this.enumSource[r]))i=i.concat(this.enumSource[r]),n=n.concat(this.enumSource[r]);else{var a=[];if(Array.isArray(this.enumSource[r].source))a=this.enumSource[r].source;else a=e[this.enumSource[r].source];if(a){if(this.enumSource[r].slice)a=Array.prototype.slice.apply(a,this.enumSource[r].slice);if(this.enumSource[r].filter){var o=[];for(t=0;t<a.length;t++)if(this.enumSource[r].filter({i:t,item:a[t],watched:e}))o.push(a[t]);a=o}var s=[],l=[];for(t=0;t<a.length;t++){var u=a[t];if(this.enumSource[r].value)l[t]=this.enumSource[r].value({i:t,item:u});else l[t]=a[t];if(this.enumSource[r].title)s[t]=this.enumSource[r].title({i:t,item:u});else s[t]=l[t]}i=i.concat(l),n=n.concat(s)}}var A=this.value;if(this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,this.select2)this.select2.select2("destroy");if(-1!==i.indexOf(A))this.input.value=A,this.value=A;else{if(this.input.value=i[0],this.value=i[0]||"",this.parent)this.parent.onChildEditorChange(this);else this.jsoneditor.onChange();this.jsoneditor.notifyWatchers(this.path)}this.setupSelect2()}this._super()},enable:function(){if(!this.always_disabled)if(this.input.disabled=!1,this.select2)this.select2.select2("enable",!0);this._super()},disable:function(){if(this.input.disabled=!0,this.select2)this.select2.select2("enable",!1);this._super()},destroy:function(){if(this.label&&this.label.parentNode)this.label.parentNode.removeChild(this.label);if(this.description&&this.description.parentNode)this.description.parentNode.removeChild(this.description);if(this.input&&this.input.parentNode)this.input.parentNode.removeChild(this.input);if(this.select2)this.select2.select2("destroy"),this.select2=null;this._super()}}),e.defaults.editors.select}),define("json-editor/editors/selectize",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.selectize=t.extend({setValue:function(e,t){e=this.typecast(e||"");var i=e;if(this.enum_values.indexOf(i)<0)i=this.enum_values[0];if(this.value!==i){if(this.input.value=this.enum_options[this.enum_values.indexOf(i)],this.selectize)this.selectize[0].selectize.addItem(i);this.value=i,this.onChange()}},register:function(){if(this._super(),this.input)this.input.setAttribute("name",this.formname)},unregister:function(){if(this._super(),this.input)this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){if("boolean"===this.schema.type)return!!e;else if("number"===this.schema.type)return 1*e;else if("integer"===this.schema.type)return Math.floor(1*e);else return""+e},getValue:function(){return this.value},preBuild:function(){var e=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var t;if(this.schema["enum"]){var n=this.schema.options&&this.schema.options.enum_titles||[];i.$each(this.schema["enum"],function(t,i){e.enum_options[t]=""+i,e.enum_display[t]=""+(n[t]||i),e.enum_values[t]=e.typecast(i)})}else if("boolean"===this.schema.type)e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1","0"],e.enum_values=[!0,!1];else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))if(this.schema.enumValue)this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}];else this.enumSource=[{source:this.schema.enumSource}];else for(t=0;t<this.schema.enumSource.length;t++)if("string"==typeof this.schema.enumSource[t])this.enumSource[t]={source:this.schema.enumSource[t]};else if(!Array.isArray(this.schema.enumSource[t]))this.enumSource[t]=i.$extend({},this.schema.enumSource[t]);else this.enumSource[t]=this.schema.enumSource[t];for(t=0;t<this.enumSource.length;t++){if(this.enumSource[t].value)this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine);if(this.enumSource[t].title)this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine);if(this.enumSource[t].filter)this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine)}}else throw"'select' editor requires the enum property to be set."},build:function(){var e=this;if(!this.options.compact)this.header=this.label=this.theme.getFormInputLabel(this.getTitle());if(this.schema.description)this.description=this.theme.getFormInputDescription(this.schema.description);if(this.options.compact)this.container.className+=" compact";if(this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),this.schema.readOnly||this.schema.readonly)this.always_disabled=!0,this.input.disabled=!0;this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e=this.input.value,t=e;if(-1===this.enum_options.indexOf(e))t=this.enum_options[0];this.value=this.enum_values[this.enum_options.indexOf(e)],this.onChange(!0)},setupSelectize:function(){var t=this;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&(this.enum_options.length>=2||this.enum_options.length&&this.enumSource)){var n=i.$extend({},e.plugins.selectize);if(this.schema.options&&this.schema.options.selectize_options)n=i.$extend(n,this.schema.options.selectize_options);this.selectize=window.jQuery(this.input).selectize(i.$extend(n,{create:!0,onChange:function(){t.onInputChange()}}))}else this.selectize=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelectize()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var i=[],n=[],r=0;r<this.enumSource.length;r++)if(Array.isArray(this.enumSource[r]))i=i.concat(this.enumSource[r]),n=n.concat(this.enumSource[r]);else if(e[this.enumSource[r].source]){var a=e[this.enumSource[r].source];if(this.enumSource[r].slice)a=Array.prototype.slice.apply(a,this.enumSource[r].slice);if(this.enumSource[r].filter){var o=[];for(t=0;t<a.length;t++)if(this.enumSource[r].filter({i:t,item:a[t]}))o.push(a[t]);a=o}var s=[],l=[];for(t=0;t<a.length;t++){var u=a[t];if(this.enumSource[r].value)l[t]=this.enumSource[r].value({i:t,item:u});else l[t]=a[t];if(this.enumSource[r].title)s[t]=this.enumSource[r].title({i:t,item:u});else s[t]=l[t]}i=i.concat(l),n=n.concat(s)}var A=this.value;if(this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,-1!==i.indexOf(A))this.input.value=A,this.value=A;else{if(this.input.value=i[0],this.value=i[0]||"",this.parent)this.parent.onChildEditorChange(this);else this.jsoneditor.onChange();this.jsoneditor.notifyWatchers(this.path)}if(this.selectize)this.updateSelectizeOptions(i);else this.setupSelectize();this._super()}},updateSelectizeOptions:function(e){var t=this.selectize[0].selectize,i=this;t.off(),t.clearOptions();for(var n in e)t.addOption({value:e[n],text:e[n]});t.addItem(this.value),t.on("change",function(){i.onInputChange()})},enable:function(){if(!this.always_disabled)if(this.input.disabled=!1,this.selectize)this.selectize[0].selectize.unlock();this._super()},disable:function(){if(this.input.disabled=!0,this.selectize)this.selectize[0].selectize.lock();this._super()},destroy:function(){if(this.label&&this.label.parentNode)this.label.parentNode.removeChild(this.label);if(this.description&&this.description.parentNode)this.description.parentNode.removeChild(this.description);if(this.input&&this.input.parentNode)this.input.parentNode.removeChild(this.input);if(this.selectize)this.selectize[0].selectize.destroy(),this.selectize=null;this._super()}}),e.defaults.editors.selectize}),define("json-editor/editors/multiselect",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor"),i=require("../utilities");return e.defaults.editors.multiselect=t.extend({preBuild:function(){this._super();var e;this.select_options={},this.select_values={};var t=this.jsoneditor.expandRefs(this.schema.items||{}),i=t["enum"]||[];for(this.option_keys=[],e=0;e<i.length;e++)if(this.sanitize(i[e])===i[e])this.option_keys.push(i[e]+""),this.select_values[i[e]+""]=i[e];else;},build:function(){var e,t=this;if(!this.options.compact)this.header=this.label=this.theme.getFormInputLabel(this.getTitle());if(this.schema.description)this.description=this.theme.getFormInputDescription(this.schema.description);if(!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];var i=this.theme.getCheckboxLabel(this.option_keys[e]);this.controls[this.option_keys[e]]=this.theme.getFormControl(i,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];if(this.schema.readOnly||this.schema.readonly)this.always_disabled=!0,this.input.disabled=!0;this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control),this.control.addEventListener("change",function(i){i.preventDefault(),i.stopPropagation();var n=[];for(e=0;e<t.option_keys.length;e++)if(t.select_options[t.option_keys[e]].selected||t.select_options[t.option_keys[e]].checked)n.push(t.select_values[t.option_keys[e]]);t.updateValue(n),t.onChange(!0)})},setValue:function(e,t){var i;if(e=e||[],"object"!=typeof e)e=[e];else if(!Array.isArray(e))e=[];for(i=0;i<e.length;i++)if("string"!=typeof e[i])e[i]+="";for(i in this.select_options)if(this.select_options.hasOwnProperty(i))this.select_options[i]["select"===this.input_type?"selected":"checked"]=-1!==e.indexOf(i);else;this.updateValue(e),this.onChange()},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){var t=window.jQuery.extend({},e.plugins.select2);if(this.schema.options&&this.schema.options.select2_options)t=i.$extend(t,this.schema.options.select2_options);this.select2=window.jQuery(this.input).select2(t);var n=this;this.select2.on("select2-blur",function(){var e=n.select2.select2("val");n.value=e,n.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value,this.onChange(!0)},postBuild:function(){this._super(),this.setupSelect2()},register:function(){if(this._super(),this.input)this.input.setAttribute("name",this.formname)},unregister:function(){if(this._super(),this.input)this.input.removeAttribute("name")},getNumColumns:function(){var e=this.getTitle().length;for(var t in this.select_values)if(this.select_values.hasOwnProperty(t))e=Math.max(e,(this.select_values[t]+"").length+4);else;return Math.min(12,Math.max(e/7,2))},updateValue:function(e){for(var t=!1,i=[],n=0;n<e.length;n++)if(this.select_options[e[n]+""]){var r=this.sanitize(this.select_values[e[n]]);if(i.push(r),r!==e[n])t=!0}else t=!0;if(this.value=i,this.select2)this.select2.select2("val",this.value);return t},sanitize:function(e){if("number"===this.schema.items.type)return 1*e;else if("integer"===this.schema.items.type)return Math.floor(1*e);else return""+e},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var e in this.inputs)if(this.inputs.hasOwnProperty(e))this.inputs[e].disabled=!1;else;if(this.select2)this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input)this.input.disabled=!0;else if(this.inputs)for(var e in this.inputs)if(this.inputs.hasOwnProperty(e))this.inputs[e].disabled=!0;else;if(this.select2)this.select2.select2("enable",!1);this._super()},destroy:function(){if(this.select2)this.select2.select2("destroy"),this.select2=null;this._super()}}),e.defaults.editors.multiselect}),define("json-editor/editors/base64",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor");require("../utilities");return e.defaults.editors.base64=t.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){e.value=t.target.result,e.refreshPreview(),e.onChange(!0),i=null},i.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value)if(this.last_preview=this.value,this.preview.innerHTML="",this.value){var e=this.value.match(/^data:([^;,]+)[;,]/);if(e)e=e[1];if(!e)this.preview.innerHTML="<em>Invalid data URI</em>";else if(this.preview.innerHTML="<strong>Type:</strong> "+e+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===e.substr(0,5)){this.preview.innerHTML+="<br>";var t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}},enable:function(){if(this.uploader)this.uploader.disabled=!1;this._super()},disable:function(){if(this.uploader)this.uploader.disabled=!0;this._super()},setValue:function(e){if(this.value!==e)this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange()},destroy:function(){if(this.preview&&this.preview.parentNode)this.preview.parentNode.removeChild(this.preview);if(this.title&&this.title.parentNode)this.title.parentNode.removeChild(this.title);if(this.input&&this.input.parentNode)this.input.parentNode.removeChild(this.input);if(this.uploader&&this.uploader.parentNode)this.uploader.parentNode.removeChild(this.uploader);this._super()}}),e.defaults.editors.base64}),define("json-editor/editors/upload",["require","../core","../editor"],function(require){var e=require("../core"),t=require("../editor");return e.defaults.editors.upload=t.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){e.preview_value=t.target.result,e.refreshPreview(),e.onChange(!0),i=null},i.readAsDataURL(this.files[0])}})}var t=this.schema.description;if(!t)t="";this.preview=this.theme.getFormInputDescription(t),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value)if(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value){var e=this,t=this.preview_value.match(/^data:([^;,]+)[;,]/);if(t)t=t[1];if(!t)t="unknown";var i=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+t+", <strong>Size:</strong> "+i.size+" bytes","image"===t.substr(0,5)){this.preview.innerHTML+="<br>";var n=document.createElement("img");n.style.maxWidth="100%",n.style.maxHeight="100px",n.src=this.preview_value,this.preview.appendChild(n)}this.preview.innerHTML+="<br>";var r=this.getButton("Upload","upload","Upload");this.preview.appendChild(r),r.addEventListener("click",function(t){if(t.preventDefault(),r.setAttribute("disabled","disabled"),e.theme.removeInputError(e.uploader),e.theme.getProgressBar)e.progressBar=e.theme.getProgressBar(),e.preview.appendChild(e.progressBar);e.jsoneditor.options.upload(e.path,i,{success:function(t){if(e.setValue(t),e.parent)e.parent.onChildEditorChange(e);else e.jsoneditor.onChange();if(e.progressBar)e.preview.removeChild(e.progressBar);r.removeAttribute("disabled")},failure:function(t){if(e.theme.addInputError(e.uploader,t),e.progressBar)e.preview.removeChild(e.progressBar);r.removeAttribute("disabled")},updateProgress:function(t){if(e.progressBar)if(t)e.theme.updateProgressBar(e.progressBar,t);else e.theme.updateProgressBarUnknown(e.progressBar)}})})}},enable:function(){if(this.uploader)this.uploader.disabled=!1;this._super()},disable:function(){if(this.uploader)this.uploader.disabled=!0;this._super()},setValue:function(e){if(this.value!==e)this.value=e,this.input.value=this.value,this.onChange()},destroy:function(){if(this.preview&&this.preview.parentNode)this.preview.parentNode.removeChild(this.preview);if(this.title&&this.title.parentNode)this.title.parentNode.removeChild(this.title);if(this.input&&this.input.parentNode)this.input.parentNode.removeChild(this.input);if(this.uploader&&this.uploader.parentNode)this.uploader.parentNode.removeChild(this.uploader);this._super()}}),e.defaults.editors.upload}),define("json-editor/editors/checkbox",["require","../core","../editor","../utilities"],function(require){var e=require("../core"),t=require("../editor");require("../utilities");return e.defaults.editors.checkbox=t.extend({setValue:function(e,t){this.value=!!e,this.input.checked=this.value,this.onChange()},register:function(){if(this._super(),this.input)this.input.setAttribute("name",this.formname)},unregister:function(){if(this._super(),this.input)this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var e=this;if(!this.options.compact)this.label=this.header=this.theme.getCheckboxLabel(this.getTitle());if(this.schema.description)this.description=this.theme.getFormInputDescription(this.schema.description);if(this.options.compact)this.container.className+=" compact";if(this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.schema.readOnly||this.schema.readonly)this.always_disabled=!0,this.input.disabled=!0;this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.value=this.checked,e.onChange(!0)}),this.container.appendChild(this.control)},enable:function(){if(!this.always_disabled)this.input.disabled=!1;this._super()},disable:function(){this.input.disabled=!0,this._super()},destroy:function(){if(this.label&&this.label.parentNode)this.label.parentNode.removeChild(this.label);if(this.description&&this.description.parentNode)this.description.parentNode.removeChild(this.description);if(this.input&&this.input.parentNode)this.input.parentNode.removeChild(this.input);this._super()}}),e.defaults.editors.checkbox}),define("json-editor/theme",["require","./core","./class"],function(require){var e=require("./core"),t=require("./class"),i=function(){var e=document.documentElement;if(e.matches)return"matches";else if(e.webkitMatchesSelector)return"webkitMatchesSelector";else if(e.mozMatchesSelector)return"mozMatchesSelector";else if(e.msMatchesSelector)return"msMatchesSelector";else if(e.oMatchesSelector)return"oMatchesSelector"}();return e.AbstractTheme=t.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.cssFloat="right",e.style.marginLeft="10px",e},getModal:function(){var e=document.createElement("div");return e.style.backgroundColor="white",e.style.border="1px solid black",e.style.boxShadow="3px 3px black",e.style.position="absolute",e.style.zIndex="10",e.style.display="none",e},getGridContainer:function(){var e=document.createElement("div");return e},getGridRow:function(){var e=document.createElement("div");return e.className="row",e},getGridColumn:function(){var e=document.createElement("div");return e},setGridColumnSize:function(e,t){},getLink:function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t},disableHeader:function(e){e.style.color="#ccc"},disableLabel:function(e){e.style.color="#ccc"},enableHeader:function(e){e.style.color=""},enableLabel:function(e){e.style.color=""},getFormInputLabel:function(e){var t=document.createElement("label");return t.appendChild(document.createTextNode(e)),t},getCheckboxLabel:function(e){var t=this.getFormInputLabel(e);return t.style.fontWeight="normal",t},getHeader:function(e){var t=document.createElement("h3");if("string"==typeof e)t.textContent=e;else t.appendChild(e);return t},getCheckbox:function(){var e=this.getFormInputField("checkbox");return e.style.display="inline-block",e.style.width="auto",e},getMultiCheckboxHolder:function(e,t,i){var n=document.createElement("div");if(t)t.style.display="block",n.appendChild(t);for(var r in e)if(e.hasOwnProperty(r))e[r].style.display="inline-block",e[r].style.marginRight="20px",n.appendChild(e[r]);else;if(i)n.appendChild(i);return n},getSelectInput:function(e){var t=document.createElement("select");if(e)this.setSelectOptions(t,e);return t},getSwitcher:function(e){var t=this.getSelectInput(e);return t},getSwitcherOptions:function(e){return e.getElementsByTagName("option")},setSwitcherOptions:function(e,t,i){this.setSelectOptions(e,t,i)},setSelectOptions:function(e,t,i){i=i||[],e.innerHTML="";for(var n=0;n<t.length;n++){var r=document.createElement("option");r.setAttribute("value",t[n]),r.textContent=i[n]||t[n],e.appendChild(r)}},getTextareaInput:function(){var e=document.createElement("textarea");return e.style=e.style||{},e.style.width="100%",e.style.height="300px",e.style.boxSizing="border-box",e},getRangeInput:function(e,t,i){var n=this.getFormInputField("range");return n.setAttribute("min",e),n.setAttribute("max",t),n.setAttribute("step",i),n},getFormInputField:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t},afterInputReady:function(e){},getFormControl:function(e,t,i){var n=document.createElement("div");if(n.className="form-control",e)n.appendChild(e);if("checkbox"===t.type)e.insertBefore(t,e.firstChild);else n.appendChild(t);if(i)n.appendChild(i);return n},getIndentedPanel:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.paddingLeft="10px",e.style.marginLeft="10px",e.style.borderLeft="1px solid #ccc",e},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(e){var t=document.createElement("p");return t.innerHTML=e,t},getCheckboxDescription:function(e){return this.getDescription(e)},getFormInputDescription:function(e){return this.getDescription(e)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(e,t,i){var n=document.createElement("button");return n.type="button",this.setButtonText(n,e,t,i),n},setButtonText:function(e,t,i,n){if(e.innerHTML="",i)e.appendChild(i),e.innerHTML+=" ";if(e.appendChild(document.createTextNode(t)),n)e.setAttribute("title",n)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(e){var t=document.createElement("th");return t.textContent=e,t},getTableCell:function(){var e=document.createElement("td");return e},getErrorMessage:function(e){var t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t},addInputError:function(e,t){},removeInputError:function(e){},addTableRowError:function(e){},removeTableRowError:function(e){},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",e},applyStyles:function(e,t){e.style=e.style||{};for(var i in t)if(t.hasOwnProperty(i))e.style[i]=t[i];else;},closest:function(e,t){for(;e&&e!==document;)if(e[i])if(e[i](t))return e;else e=e.parentNode;else return!1;return!1},getTab:function(e){var t=document.createElement("div");return t.appendChild(e),t.style=t.style||{},this.applyStyles(t,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(e){this.applyStyles(e,{opacity:1,background:"white"})},markTabInactive:function(e){this.applyStyles(e,{opacity:.5,background:""})},addTab:function(e,t){e.children[0].appendChild(t)},getBlockLink:function(){var e=document.createElement("a");return e.style.display="block",e},getBlockLinkHolder:function(){var e=document.createElement("div");return e},getLinksHolder:function(){var e=document.createElement("div");return e},createMediaLink:function(e,t,i){e.appendChild(t),i.style.width="100%",e.appendChild(i)},createImageLink:function(e,t,i){e.appendChild(t),t.appendChild(i)}}),e.AbstractTheme}),define("json-editor/themes/bootstrap3",["require","../theme","../core"],function(require){var e=(require("../theme"),require("../core"));return e.defaults.themes.bootstrap3=e.AbstractTheme.extend({getSelectInput:function(e){var t=this._super(e);return t.className+="form-control",t},setGridColumnSize:function(e,t){e.className="col-md-"+t},afterInputReady:function(e){if(!e.controlgroup)if(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact"))e.controlgroup.style.marginBottom=0},getTextareaInput:function(){var e=document.createElement("textarea");return e.className="form-control",e},getRangeInput:function(e,t,i){return this._super(e,t,i)},getFormInputField:function(e){var t=this._super(e);if("checkbox"!==e)t.className+="form-control";return t},getFormControl:function(e,t,i){var n=document.createElement("div");if(e&&"checkbox"===t.type)n.className+=" checkbox",e.appendChild(t),e.style.fontSize="14px",n.style.marginTop="0",n.appendChild(e),t.style.position="relative",t.style.cssFloat="left";else{if(n.className+="ui-ctrl ui-textbox form-group",e)e.className+=" control-label",n.appendChild(e);n.appendChild(t)}if(i)n.appendChild(i);return n},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-sm",e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-block",t.innerHTML=e,t},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+="ui-ctrl ui-button btn btn-default",n},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e},addInputError:function(e,t){if(e.controlgroup){if(e.controlgroup.className+=" has-error",!e.errmsg)e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controlgroup.appendChild(e.errmsg);else e.errmsg.style.display="";e.errmsg.textContent=t}},removeInputError:function(e){if(e.errmsg)e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?has-error/g,"")},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>",e.className="rows",e},getTab:function(e){var t=document.createElement("a");return t.className="list-group-item",t.setAttribute("href","#"),t.appendChild(e),t},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},getProgressBar:function(){var e=0,t=100,i=0,n=document.createElement("div");n.className="progress";var r=document.createElement("div");return r.className="progress-bar",r.setAttribute("role","progressbar"),r.setAttribute("aria-valuenow",i),r.setAttribute("aria-valuemin",e),r.setAttribute("aria-valuenax",t),r.innerHTML=i+"%",n.appendChild(r),n},updateProgressBar:function(e,t){if(e){var i=e.firstChild,n=t+"%";i.setAttribute("aria-valuenow",t),i.style.width=n,i.innerHTML=n}},updateProgressBarUnknown:function(e){if(e){var t=e.firstChild;e.className="progress progress-striped active",t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}}}),e.defaults.themes.bootstrap3}),define("json-editor/themes/html",["require","../theme","../core"],function(require){var e=(require("../theme"),require("../core"));return e.defaults.themes.html=e.AbstractTheme.extend({getFormInputLabel:function(e){var t=this._super(e);return t.style.display="block",t.style.marginBottom="3px",t.style.fontWeight="bold",t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8em",t.style.margin=0,t.style.display="inline-block",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=this._super();return e.style.border="1px solid #ddd",e.style.padding="5px",e.style.margin="5px",e.style.borderRadius="3px",e},getChildEditorHolder:function(){var e=this._super();return e.style.marginBottom="8px",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.fontSize=".8em",e.style.verticalAlign="middle",e},getTable:function(){var e=this._super();return e.style.borderBottom="1px solid #ccc",
e.style.marginBottom="5px",e},addInputError:function(e,t){if(e.style.borderColor="red",!e.errmsg){var i=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",i.appendChild(e.errmsg)}else e.errmsg.style.display="block";e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(e){if(e.style.borderColor="",e.errmsg)e.errmsg.style.display="none"},getProgressBar:function(){var e=100,t=0,i=document.createElement("progress");return i.setAttribute("max",e),i.setAttribute("value",t),i},updateProgressBar:function(e,t){if(e)e.setAttribute("value",t)},updateProgressBarUnknown:function(e){if(e)e.removeAttribute("value")}}),e.defaults.themes.html}),define("json-editor/iconlib",["require","./core","./class"],function(require){var e=require("./core"),t=require("./class");return e.AbstractIconLib=t.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(e){if(this.mapping[e])return this.icon_prefix+this.mapping[e];else return null},getIcon:function(e){var t=this.getIconClass(e);if(!t)return null;var i=document.createElement("i");return i.className=t,i}}),e.AbstractIconLib}),define("json-editor/templates/default",["require","../core"],function(require){var e=require("../core");return e.defaults.templates["default"]=function(){return{compile:function(e){var t=e.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),i=t&&t.length;if(!i)return function(){return e};for(var n=[],r=function(e){var i,r=t[e].replace(/[{}]+/g,"").trim().split("."),a=r.length;if(a>1){var o;i=function(t){for(o=t,e=0;a>e&&(o=o[r[e]],o);e++);return o}}else r=r[0],i=function(e){return e[r]};n.push({s:t[e],r:i})},a=0;i>a;a++)r(a);return function(t){var r,o=e+"";for(a=0;i>a;a++)r=n[a],o=o.replace(r.s,r.r(t));return o}}}},e.defaults.templates["default"]}),define("json-editor/defaults",["require","./core","./utilities"],function(require){var e=require("./core"),t=require("./utilities");e.defaults.theme="bootstrap3",e.defaults.template="default",e.defaults.options={},e.defaults.translate=function(t,i){var n=e.defaults.languages[e.defaults.language];if(!n)throw"Unknown language "+e.defaults.language;var r=n[t]||e.defaults.languages[e.defaults.default_language][t];if("undefined"==typeof r)throw"Unknown translate string "+t;if(i)for(var a=0;a<i.length;a++)r=r.replace(new RegExp("\\{\\{"+a+"}}","g"),i[a]);return r},e.defaults.default_language="en",e.defaults.language=e.defaults.default_language,e.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_collapse:"Collapse",button_expand:"Expand"},e.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{},selectize:{}},t.$each(e.defaults.editors,function(t,i){e.defaults.editors[t].options=i.options||{}}),e.defaults.resolvers.unshift(function(e){if("string"!=typeof e.type)return"multiple";else return void 0}),e.defaults.resolvers.unshift(function(e){if(!e.type&&e.properties)return"object";else return void 0}),e.defaults.resolvers.unshift(function(e){if("string"==typeof e.type)return e.type;else return void 0}),e.defaults.resolvers.unshift(function(t){if("boolean"===t.type)if("checkbox"===t.format||t.options&&t.options.checkbox)return"checkbox";else return e.plugins.selectize.enable?"selectize":"select"}),e.defaults.resolvers.unshift(function(e){if("any"===e.type)return"multiple";else return void 0}),e.defaults.resolvers.unshift(function(e){if("string"===e.type&&e.media&&"base64"===e.media.binaryEncoding)return"base64";else return void 0}),e.defaults.resolvers.unshift(function(e){if("string"===e.type&&"url"===e.format&&e.options&&e.options.upload===!0)if(window.FileReader)return"upload"}),e.defaults.resolvers.unshift(function(e){if("array"==e.type&&"table"==e.format)return"table";else return void 0}),e.defaults.resolvers.unshift(function(t){if(t.enumSource)return e.plugins.selectize.enable?"selectize":"select";else return void 0}),e.defaults.resolvers.unshift(function(t){if(t["enum"])if("array"===t.type||"object"===t.type)return"enum";else if("number"===t.type||"integer"===t.type||"string"===t.type)return e.plugins.selectize.enable?"selectize":"select"}),e.defaults.resolvers.unshift(function(t){if("array"===t.type&&t.items&&!Array.isArray(t.items)&&t.uniqueItems&&["string","number","integer"].indexOf(t.items.type)>=0)if(t.items["enum"])return"multiselect";else if(e.plugins.selectize.enable&&"string"===t.items.type)return"arraySelectize"}),e.defaults.resolvers.unshift(function(e){if(e.oneOf||e.anyOf)return"multiple";else return void 0})}),define("json-editor/langs/zh",["require"],function(require){return{error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"最多输入 {{0}} 个字符",error_minLength:"至少输入 {{0}} 个字符",error_pattern:"不满足要求的格式 {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"最多添加 {{0}} 项",error_minItems:"至少需要 {{0}} 项",error_uniqueItems:"不能有重复的内容",error_maxProperties:"对象最多应该有 {{0}} 个属性",error_minProperties:"对象至少应该有 {{0}} 个属性",error_required:"对象缺少必要的属性 '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"全部",button_delete_all_title:"全部删除",button_delete_last:"Last {{0}}",button_delete_last_title:"删除最后 {{0}}",button_add_row_title:"+ {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_delete_row_title:"x",button_delete_row_title_short:"x",button_collapse:"收起",button_expand:"展开"}}),define("json-editor/main",["require","./validator","./editor","./editors/null","./editors/string","./editors/number","./editors/integer","./editors/object","./editors/array","./editors/table","./editors/multiple","./editors/enum","./editors/select","./editors/selectize","./editors/multiselect","./editors/base64","./editors/upload","./editors/checkbox","./theme","./themes/bootstrap3","./themes/html","./iconlib","./templates/default","./defaults","./core","./langs/zh"],function(require){require("./validator"),require("./editor"),require("./editors/null"),require("./editors/string"),require("./editors/number"),require("./editors/integer"),require("./editors/object"),require("./editors/array"),require("./editors/table"),require("./editors/multiple"),require("./editors/enum"),require("./editors/select"),require("./editors/selectize"),require("./editors/multiselect"),require("./editors/base64"),require("./editors/upload"),require("./editors/checkbox"),require("./theme"),require("./themes/bootstrap3"),require("./themes/html"),require("./iconlib"),require("./templates/default"),require("./defaults");var e=require("./core");return e.defaults.language="zh",e.defaults.languages.zh=require("./langs/zh"),e}),define("json-editor",["json-editor/main"],function(e){return e}),define("inf-ria/ui/JSONEditor",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","esui","esui/painters","esui/InputControl","json-editor"],function(exports,module,e,t,i,n,r,a,o,s,l){var u=r["default"](n),A=r["default"](a),B=r["default"](o),c=r["default"](s),C=r["default"](l),D={keep_oneof_values:!1,object_layout:"grid",disable_edit_json:!0,disable_properties:!0,disable_array_reorder:!0,disable_collapse:!0,disable_array_delete_last_row:!0,compact:!1},d=function(n){function r(e){i["default"](this,r),n.call(this,e),this._editor=null}return e["default"](r,n),r.prototype.initOptions=function(e){var t=e;this.setProperties(t)},r.prototype.initStructure=function(){var e=u["default"].extend({schema:this.schema},D);this._editor=new C["default"](this.main,e)},r.prototype.initEvents=function(){var e=this;this._editor.on("change",function(){return e.fire("change")})},r.prototype.getEditor=function(){return this._editor},r.prototype.getRawValue=function(){return this._editor.getValue()},r.prototype.disable=function(){n.prototype.disable.call(this);var e=this.getEditor();if(e)e.disable()},r.prototype.enable=function(){n.prototype.enable.call(this);var e=this.getEditor();if(e)e.enable()},r.prototype.dispose=function(){if(this._editor)this._editor.destroy();n.prototype.dispose.call(this)},t["default"](r,[{key:"type",get:function(){return"JSONEditor"}},{key:"repaint",get:function(){return B["default"].createRepaint(c["default"].prototype.repaint,{name:"rawValue",paint:function(e,t){if(e._editor)try{e._editor.setValue(t)}catch(i){}}},{name:"schema",paint:function(e,t){if(e._editor)e._editor.destroy();var i=u["default"].extend({schema:t,startval:e.rawValue},D);e._editor=new C["default"](e.main,i),e._editor.on("change",function(){return e.fire("change")})}})}}]),r}(c["default"]);module.exports=d,A["default"].register(d)}),define("inf-ria/ui/GuideTip",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","esui","esui/lib","esui/controlHelper","esui/Control"],function(exports,module,e,t,i,n,r,a,o,s,l){var u=r["default"](n),A=r["default"](a),B=r["default"](o),c=r["default"](s),C=r["default"](l),D=['<span id="${textId}">${tipText}</span>','<i class="${closeClass}" id="${closeId}"></i>','<i class="${arrowClass}" id="${arrowId}"></i>'].join(""),d=function(n){function r(){i["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.getStorageKey=function(){return this.get("id")||"guidetip-default"},r.prototype.closeHandler=function(e){this.fire("close"),this.hide()},r.prototype.autoPosition=function(){var e=B["default"].g(this.helper.getId("layer"));if(e){B["default"].removeAttribute(e,"style");var t=B["default"].getOffset(e),i=B["default"].g(this.helper.getId("arrow"));B["default"].removeAttribute(i,"style");var n=17,r=16,a=18,o=B["default"].getOffset(this.main);if(this.layerPosition&&"right"===this.layerPosition)e.style.left=o.left+o.width+r+"px",t=B["default"].getOffset(e),e.style.top=o.top+(o.height-t.height-20)/2+"px";else e.style.left=o.left+(o.width-t.width)/2+"px",t=B["default"].getOffset(e),e.style.top=o.top-t.height-a+"px",i.style.left=o.left-t.left+(o.width-n)/2+"px";if(this.layerWidth)e.style.width=this.layerWidth+"px"}},r.prototype.show=function(){B["default"].addClass(this.main,this.helper.getPartClasses("show"));var e=B["default"].g(this.helper.getId("layer"));B["default"].addClass(e,this.helper.getPartClasses("layer-show"))},r.prototype.hide=function(){B["default"].removeClass(this.main,this.helper.getPartClasses("show"));var e=B["default"].g(this.helper.getId("layer"));B["default"].removeClass(e,this.helper.getPartClasses("layer-show"))},r.prototype.initEvents=function(){var e=B["default"].g(this.helper.getId("close"));this.helper.addDOMEvent(e,"click",u["default"].bind(this.closeHandler,this)),this.resizeHandler=u["default"].debounce(u["default"].bind(this.autoPosition,this),50),B["default"].on(window,"resize",this.resizeHandler),B["default"].on(window,"scroll",this.resizeHandler)},r.prototype.initStructure=function(){var e=document.createElement("span");if(B["default"].addClass(e,this.helper.getPartClasses("layer")),this.layerSkin)B["default"].addClass(e,this.helper.getPartClasses("skin-"+this.layerSkin));e.id=this.helper.getId("layer");var t="arrow"+(this.layerPosition?"-"+this.layerPosition:""),i=B["default"].format(D,{tipText:this.get("tipText"),closeClass:this.helper.getPartClasses("close"),closeId:this.helper.getId("close"),arrowClass:this.helper.getPartClasses(t),arrowId:this.helper.getId("arrow"),textId:this.helper.getId("text")});e.innerHTML=i,document.body.appendChild(e)},r.prototype.dispose=function(){B["default"].un(window,"resize",this.resizeHandler),B["default"].un(window,"scroll",this.resizeHandler),B["default"].removeNode(this.helper.getId("layer")),n.prototype.dispose.call(this)},t["default"](r,[{key:"type",get:function(){return"GuideTip"}},{key:"repaint",get:function(){return c["default"].createRepaint(C["default"].prototype.repaint,{name:"tipText",paint:function(e,t){var i=t||"";if(""===u["default"].trim(i))e.hide();else{var n=B["default"].g(e.helper.getId("text"));n.innerHTML=u["default"].escape(i),setTimeout(u["default"].bind(e.autoPosition,e),0)}}},{name:"isShow",paint:function(e,t){if(u["default"].isNull(t)||u["default"].isUndefined(t))t=!0;if("false"===t)t=!1;if(t)e.show();else e.hide()}})}}]),r}(C["default"]);module.exports=d,A["default"].register(d)}),define("inf-ria/ui/FlexPanel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","esui","esui/lib","esui/Panel"],function(exports,module,e,t,i,n,r,a,o,s){var l=r["default"](n),u=r["default"](a),A=r["default"](o),B=r["default"](s),c=function(n){function r(){i["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.initOptions=function(e){e.fixedPixel=parseInt(e.fixedPixel||0,10),e.fixedClass=e.fixedClass||this.helper.getPartClasses("fixed"),n.prototype.initOptions.call(this,e)},r.prototype.initEvents=function(){this.scrollHandler=l["default"].bind(this.scrollEvent,this),this.on("afterrender",this.prepare,this),A["default"].on(window,"scroll",this.scrollHandler),n.prototype.initEvents.call(this)},r.prototype.prepare=function(){this.top=this.top?parseInt(this.top,10):A["default"].getOffset(this.main).top-this.fixedPixel},r.prototype.scrollEvent=function(){var e=A["default"].page.getScrollTop();if(e>this.top)this.triggerFixed();else this.cancelFixed()},r.prototype.triggerFixed=function(){A["default"].addClasses(this.main,this.fixedClass),this.main.style.top=this.fixedPixel+"px"},r.prototype.cancelFixed=function(){A["default"].removeClasses(this.main,this.fixedClass),this.main.style.top=""},r.prototype.dispose=function(){n.prototype.dispose.call(this),A["default"].un(window,"scroll",this.scrollHandler)},t["default"](r,[{key:"type",get:function(){return"FlexPanel"}}]),r}(B["default"]);u["default"].register(c),module.exports=c}),define("clipboard/select",["exports","module"],function(exports,module){function e(e){var t=void 0;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{if(e.hasAttribute("contenteditable"))e.focus();var i=window.getSelection(),n=document.createRange();n.selectNodeContents(e),i.removeAllRanges(),i.addRange(n),t=i.toString()}return t}module.exports=e}),define("clipboard/ClipboardAction",["exports","module","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","./select","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(){function i(e){t["default"](this,i),this.resolveOptions(e),this.initSelection()}return i.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},i.prototype.initSelection=function(){if(this.text)this.selectFake();else if(this.target)this.selectTarget()},i.prototype.selectFake=function(){var e=this,t="rtl"===document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,i)),this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=r["default"](this.fakeElem),this.copyText()},i.prototype.removeFake=function(){if(this.fakeHandler)document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null;if(this.fakeElem)document.body.removeChild(this.fakeElem),this.fakeElem=null},i.prototype.selectTarget=function(){this.selectedText=r["default"](this.target),this.copyText()},i.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},i.prototype.handleResult=function(e){this.emitter.fire(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},i.prototype.clearSelection=function(){if(this.target)this.target.blur();window.getSelection().removeAllRanges()},i.prototype.destroy=function(){this.removeFake()},e["default"](i,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e)if(e&&"object"==typeof e&&1===e.nodeType){if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}else throw new Error('Invalid "target" value, use a valid Element')},get:function(){return this._target}}]),i}();module.exports=a}),define("clipboard/Clipboard",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","mini-event/EventTarget","./ClipboardAction"],function(exports,module,e,t,i,n,r,a){function o(e,t){var i="data-clipboard-"+e;if(t.hasAttribute(i))return t.getAttribute(i)}var s=n["default"](i),l=n["default"](r),u=n["default"](a),A=function(i){function n(e,r){t["default"](this,n),i.call(this),this.resolveOptions(r),this.listenClick(e)}return e["default"](n,i),n.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},n.prototype.listenClick=function(e){var t=this;s["default"](e).on("click",function(e){return t.onClick(e)})},n.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;if(this.clipboardAction)this.clipboardAction=null;this.fire("beforecopy"),this.clipboardAction=new u["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},n.prototype.defaultAction=function(e){return o("action",e)},n.prototype.defaultTarget=function(e){var t=o("target",e);if(t)return document.querySelector(t);else return void 0},n.prototype.defaultText=function(e){return o("text",e)},n.prototype.destroy=function(){if(this.clipboardAction)this.clipboardAction.destroy(),this.clipboardAction=null},n}(l["default"]);module.exports=A}),define("inf-ria/ui/Clipboard",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","babel-runtime/helpers/class-call-check","esui","babel-runtime/helpers/interop-require-default","esui/Control","clipboard/Clipboard"],function(exports,module,e,t,i,n,r,a,o){var s=r["default"](n),l=r["default"](a),u=r["default"](o),A=function(n){function r(e){i["default"](this,r),n.call(this,e),this.client=null}return e["default"](r,n),r.prototype.initStructure=function(){var e=this;if(!this.client)this.client=new u["default"](this.main,{action:function(){return"copy"},text:function(){return e.clipboardText}}),this.client.on("beforecopy",function(){return e.fire("beforecopy")}),this.client.on("success",function(){return e.fire("aftercopy")}),this.client.on("error",function(){return e.fire("error")})},t["default"](r,[{key:"type",get:function(){return"Clipboard"}}]),r}(l["default"]);module.exports=A,s["default"].register(A)}),define("inf-ria/ui/ACEEditor",["exports","module","babel-runtime/helpers/class-call-check","babel-runtime/helpers/inherits","babel-runtime/helpers/create-class","underscore","babel-runtime/helpers/interop-require-default","esui","esui/painters","esui/InputControl"],function(exports,module,e,t,i,n,r,a,o,s){var l=r["default"](n),u=r["default"](a),A=r["default"](o),B=r["default"](s),c="inf-ria/js!//bce.bdstatic.com/ace-builds/src-min-noconflict/ace.js",C=function(){function t(){e["default"](this,t),this._theme=null,this._mode=null,this._readOnly=null,this._value=null}return t.prototype.setTheme=function(e){this._theme=e},t.prototype.getSession=function(){var e=this;return{setMode:function(t){e._mode=t}}},t.prototype.getValue=function(){return null},t.prototype.setValue=function(e){this._value=e},t.prototype.setReadOnly=function(e){this._readOnly=e},t.prototype.destroy=function(){},t.prototype.restoreState=function(e){if(null!=this._theme)e.setTheme(this._theme);if(null!=this._mode)e.getSession().setMode(this._mode);if(null!=this._readOnly)e.setReadOnly(this._readOnly);if(null!=this._value)e.setValue(this._value,1)},t}(),D=function(n){function r(t){e["default"](this,r),n.call(this,t),this.editor=new C}return t["default"](r,n),r.prototype.initOptions=function(e){var t=l["default"].extend({rawValue:this.main.innerText},e);this.setProperties(t)},r.prototype.initStructure=function(){var e=this;window.require([c],function(){var t=window.ace.edit(e.main);t.on("change",function(t){return e.fire("change")}),e.editor.restoreState(t),e.editor=t,e.fire("loaded")})},r.prototype.getRawValue=function(){if(this.editor)return this.editor.getValue();else return void 0},r.prototype.dispose=function(){if(this.editor)this.editor.destroy();n.prototype.dispose.call(this)},r.prototype.setReadOnly=function(e){if(n.prototype.setReadOnly.call(this,e),this.editor)this.editor.setReadOnly(e)},i["default"](r,[{key:"type",get:function(){return"ACEEditor"}},{key:"repaint",get:function(){return A["default"].createRepaint(B["default"].prototype.repaint,{name:"rawValue",paint:function(e,t){if(e.editor)try{e.editor.setValue(t,1)}catch(i){}}})}}]),r}(B["default"]);module.exports=D,u["default"].register(D)}),define("inf-ria/sidebar/util",["exports","module","underscore","babel-runtime/helpers/interop-require-default","er/URL"],function(exports,module,e,t,i){var n=t["default"](e),r=t["default"](i);module.exports={mergeNodeLists:function(e,t){var i=Array.prototype.slice;return i.call(e).concat(i.call(t))},updateObject:function(e,t){var i={};return n["default"].each(e,function(e,n){return i[n]=t[n]||e}),i},urlReformer:function(e,t){var i=/\[(.*?)\]+/g,a=/^\[(.*?)\]$/,o=e,s=void 0,l={};if(!o)l=t;else if(s=o.match(i)){var u=o.replace(i,"&"),A=r["default"].parseQuery(u);n["default"].each(s,function(e){var i=a.exec(e)[1];if(i){var n=i.split(":"),r=n[0],o=n[1];if(l[r]=t[r]||t[o],!l[r])delete l[r]}}),l=n["default"].extend(A,l)}else l=this.updateObject(r["default"].parseQuery(o),t);return r["default"].serialize(l)},getCurrentProduct:function(){var e=window.location.pathname;return e.replace(/^\/|\/$/g,"")},isAvailableURI:function(e){return e&&!/^javascript\:.*?$/.test(e)},getPath:function(){var e=location.href.indexOf("#"),t=-1===e?"":location.href.slice(e);return t=r["default"].parse(t),t.getPath()}}}),define("inf-ria/sidebar/Sidebar",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","underscore","etpl","er/events","er/locator","er/URL","mini-event/EventTarget","./util"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A){var B=n["default"](i),c=n["default"](r),C=n["default"](a),D=n["default"](o),d=n["default"](s),f=n["default"](l),h=n["default"](u),E=n["default"](A),p={sidebarQueue:[],newSidebarMod:{},isVisible:!0,isNewSidebarMod:!1},F={L1:{BOX:C["default"].compile('<ul class="sidebar topmenu">${content|raw}</ul>'),ITEM:C["default"].compile('<li class="${clazz} ${service}" service="${service}">${title|raw}</li>')},L2:{BOX:C["default"].compile('<ul class="sidebar submenu" sidetype="${service}">${content|raw}</ul>'),ITEM:C["default"].compile('<li class="${clazz} ${service}" ${path|raw} ${action|raw}>${title|raw}</li>')},L3:{BOX:C["default"].compile('<ul class="leafmenu">${content|raw}</ul>'),ITEM:C["default"].compile('<li sidetype="${path}">${title|raw}</li>')}},m=['<span class="normal-title">${title|raw}</span>','<span class="short-title">${shortTitle|raw}</span>'].join(""),g=['<a href="${url}" ${action|raw} target="${target}" ','data-anchors=${anchors} data-url="${url}">',"${iconHtml|raw}",m,"</a>"].join(""),H=function(i){function n(e){t["default"](this,n),i.call(this,e);var r={wrapperId:"new-sidebar",collapsedClass:"sidebar-collpased",menuActiveClass:"submenu-open",itemActiveClass:"sidebar-current",foldActiveClass:"menu-list-opened",hideActions:[]};c["default"].extend(this,r,e),this._depth=0,this._activeItem=null,this._erEventsHandler=null,this._status="initializing",this.initialize(),p.sidebarQueue.push(this)}return e["default"](n,i),n.prototype.initialize=function(){if(this.isAvailableConfig(this.config)){var e=B["default"]("#"+this.wrapperId);if(this._prefix=E["default"].getCurrentProduct(),this.register(this._prefix),this.wrapperClass=this.wrapperClass||this._prefix+"-sidebar-box",!e.size()){e=B["default"](B["default"].parseHTML('<div id="'+this.wrapperId+'" class="'+this.wrapperClass+' new-sidebar-box" />'));var t=B["default"]("#main");if(t.size())e.insertBefore(t);else throw Error("Unexcept error with relative container")}if(this.wrapper=e,!p.isVisible||!p.isNewSidebarMod&&this.isNewSidebarMod())this.hide();else this.handleVisibileStatus();if(this.prepare(this.config),this._depth>0)this.initStructure(),this.initEvents()}},n.prototype.prepare=function(e){if(!c["default"].isArray(e)&&(e=[e]),this.upgradeConfig(e),c["default"].isNumber(this.depth))this._depth=this.depth},n.prototype.upgradeConfig=function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]?0:arguments[1];c["default"].each(e,function(e,n){if(t._depth=Math.max(i+1,t._depth||0),e.navs)t.upgradeConfig(e.navs,i+1,t._depth)})},n.prototype.initStructure=function(){var e=this;if(this.innerWrapper=B["default"](B["default"].parseHTML('<div class="sidebar-wrap sidebar-wrap-l'+this._depth+'" />')),this.extraHtml)this.extraNode=B["default"](this.extraHtml),this.wrapper.append(this.extraNode);var t=2;if(3===this._depth)t=1;var i=this.buildNavList(this.config,t);c["default"].each(i,function(t,i){c["default"].each(t,function(t){var n=B["default"](B["default"].parseHTML(t));if(3>i)e.innerWrapper.append(n);else{var r=n.children(":first").attr("sidetype"),a=/(.*)\//.exec(r);a=a?a[1]:"";var o=e.innerWrapper.find('[sidetype="'+a+'"],[service="'+a+'"]');o.append(n)}})}),this.allLinks=this.innerWrapper.find("li > a"),this.childLinks=this.innerWrapper.find(".submenu a"),this.headLinks=this.innerWrapper.find('.menu-header[action-type="back"]')},n.prototype.initEvents=function(){var e=this;this.bindErEvents(),this.innerWrapper.on("click",'[action-type="back"]',function(t){e.toggleSubMenu(!1),d["default"].redirect(t.currentTarget.getAttribute("action-url").replace("#",""))}),this.innerWrapper.on("click",'[action-type="fold"]',function(t){B["default"](t.currentTarget).parent().toggleClass(e.foldActiveClass)})},n.prototype.bindErEvents=function(){var e=this;D["default"].on("enteractioncomplete",this._erEventsHandler=function(t){if(!t.isChildAction){var i=t.url.getPath(),n=t.url.getQuery(),r=t.url.toString();if(p.isNewSidebarMod=e.isNewSidebarMod(),!p.isNewSidebarMod)e.clearSidebar();else if("initializing"===e._status)e.clearWrapper(),e.wrapper.append(e.innerWrapper),e._status="ready";e.fire("actionchanged",{actionEvent:t,context:e}),p.isVisible=e.handleVisibileStatus(i,t.action.model.get("__hideSidebar")),e.setActiveItem(i,r),e.rebuildChildUrl(n)}})},n.prototype.rebuildChildUrl=function(e){var t=/^(#.*?)(~)(.*?\[[^\]]+].*)/;c["default"].each(this.childLinks,function(i){var n=i.getAttribute("data-url"),r=t.exec(n);if(r){var a=r[3],o=E["default"].urlReformer(a,e);n=n.replace(/~.*$/,o?"~"+o:""),i.setAttribute("href",n)}}),c["default"].each(this.headLinks,function(i){var n=i.getAttribute("action-data"),r=t.exec(n);if(r){var a=r[3],o=E["default"].urlReformer(a,e);n=n.replace(/~.*$/,o?"~"+o:""),i.setAttribute("action-url",n)}})},n.prototype.toggleSubMenu=function(e){e&&this._depth>2?this.innerWrapper.addClass(this.menuActiveClass):this.innerWrapper.removeClass(this.menuActiveClass)},n.prototype.handleVisibileStatus=function(e,t){if(c["default"].isBoolean(t))return t?this.hide():this.show(),!t;var i=this.hideActions||[],n=!1;e=e?"#"+e:E["default"].getPath();for(var r=0,a=i.length;a>r;r++){var o=i[r];if(c["default"].isString(o)&&o===e){n=!0;break}else if(c["default"].isRegExp(o)&&o.test(e)){n=!0;break}}return n?this.hide():this.show(),
!n},n.prototype.buildNavList=function(e,t,i,n,r){if(void 0===t)t=1;if(void 0===i)i="";var a=this;if(void 0===n)n=[];t=Math.min(t,3);var o=F["L"+t].BOX,s=F["L"+t].ITEM,l=[],u=0,A=t,B=!0;c["default"].each(e,function(e,D){if(!c["default"].isArray(e)){var d="",f=i?[i,e.service].join("/"):e.service,h=e.icon?'<i class="iconfont '+e.icon+'"></i>':"";if(h&&c["default"].extend(e,{iconHtml:h}),E["default"].isAvailableURI(e.url)&&r&&E["default"].isAvailableURI(r.url))t=2,B=!1,o=F["L"+t].BOX,s=F["L"+t].ITEM;if(e.service&&E["default"].isAvailableURI(e.url))e.anchors=a.getAnchors(e),e.target=a.getLinkTarget(e),d=C["default"].compile(g)(e);else if(e.url&&!E["default"].isAvailableURI(e.url))d=C["default"].compile(g)(c["default"].extend(e,{action:' action-type="fold" '})),t=2,B=!0,o=F["L"+t].BOX,s=F["L"+t].ITEM;else d=C["default"].compile(m)(e);if(1===t){var p="menu-header";if(e.service)if(p="menu-item",e.icon)p+=" menu-item-common";l.push(s({service:e.service,title:d,clazz:p}))}else if(2===t){var p="menu-header";if(e.service){if(p="menu-item",e.icon)p+=" menu-item-common";if(e.navs&&e.navs.length)p+=" menu-list"}var H=e.url&&!e.service?' action-type="back" action-data="'+e.url+'" action-url="'+e.url+'"':"",G=e.service?'sidetype="'+f+'"':"";l.push(s({service:e.service,title:d,clazz:p,action:H,path:G}))}else if(3===t)l.push(s({title:d,path:e.service?f:""}));if(e.navs)a.buildNavList(e.navs,t+1,f,n,e);if(B)t=A,o=F["L"+t].BOX,s=F["L"+t].ITEM}else if(a._depth>2)a.buildNavList(e,t,i+"-"+u,n),u++;else throw Error("Less than level 3 with array-like config")});var D=l.length>0?o({service:i||"",content:l.join("")}):"";return n[t]=n[t]||[],n[t].push(D),n},n.prototype.getAnchors=function(e){var t=[e.url,f["default"].parse(e.url).getPath()],i=e.anchors||[];return c["default"].uniq([].concat(i,t))},n.prototype.getCurrentLink=function(e,t){var i=this,n=this.getLinksFromPath(e,t);if(c["default"].isEmpty(n))this.reverseWalkPath(e,function(t){var r=!0;if(!t&&c["default"].isEmpty(n))r=!1;else if(t!==e)n=i.innerWrapper.find('[href*="#'+t+'"]'),r=!n.length;return r});return c["default"].last(n)},n.prototype.getLinksFromPath=function(e,t){for(var i=[],n=[],r=0,a=this.allLinks.length;a>r;r++){var o=this.allLinks[r],s=o.getAttribute("data-anchors"),l=new RegExp("^#"+t+"$|^#"+t+",|,#"+t+"$|,#"+t+","),u=new RegExp("^#"+e+"$|^#"+e+",|,#"+e+"$|,#"+e+",");if(l.test(s)){i.push(o);break}if(u.test(s))n.push(o)}return i.length?i:n},n.prototype.setActiveItem=function(e,t){var i=this.getCurrentLink(e,t);if(i){var n=i.parentNode;if(this._activeItem)this.toggleActiveItem(this._activeItem,!1);this.toggleActiveItem(n,!0),this._activeItem=n}},n.prototype.toggleActiveItem=function(e,t){var i=this;e=B["default"](e);var n=t?"addClass":"removeClass",r=e.attr("sidetype");if(r)this.walkPath(r,function(e,t){var r=i.innerWrapper.find('[sidetype="'+e+'"]');r[n](r.hasClass("menu-list")?i.foldActiveClass:i.itemActiveClass)});else{var a=e.attr("service");a&&e[n](this.itemActiveClass)}if(t)this.toggleSubMenu(e.parents(".submenu").size())},n.prototype.collapse=function(){this.wrapper.addClass(this.collapsedClass),this.fire("collapse",{context:this})},n.prototype.spread=function(){this.wrapper.removeClass(this.collapsedClass),this.fire("spread",{context:this})},n.prototype.show=function(){this.wrapper.removeClass("state-hidden"),this.fire("show",{context:this})},n.prototype.hide=function(){this.wrapper.addClass("state-hidden"),this.fire("hide",{context:this})},n.prototype.getLinkTarget=function(e){var t=/^#\/.*?$/.test(e.url);return e.target||(t?"_self":"_blank")},n.prototype.isAvailableConfig=function(e){var t=!1;if(e){var i=c["default"].isArray(e)?e[0]:e;t=c["default"].has(i,"title")}return t},n.prototype.register=function(e){if(c["default"].isString(e))e=e.toUpperCase(),p.newSidebarMod[e]=!0},n.prototype.unRegister=function(e){if(c["default"].isString(e))e=e.toUpperCase(),p.newSidebarMod[e]=!1},n.prototype.isNewSidebarMod=function(e){return e=e||E["default"].getCurrentProduct(),e=e.toUpperCase(),!!p.newSidebarMod[e]},n.prototype.clearWrapper=function(){var e=this;c["default"].each(p.sidebarQueue,function(t){if(t!==e)t.dispose(!0)}),this.wrapper.attr("class",this.wrapperClass+" new-sidebar-box"),this.wrapper.html(""),p.sidebarQueue=[this]},n.prototype.clearSidebar=function(){c["default"].each(p.sidebarQueue,function(e){return e.dispose()}),p.sidebarQueue=[]},n.prototype.walkPath=function(e,t){var i=this,n=e.split("/"),r="";c["default"].each(n,function(e,n){r=r+"/"+e,r=r.replace(/^\//,""),c["default"].isFunction(t)&&t.call(i,r,n)})},n.prototype.reverseWalkPath=function(e,t){for(var i=e.split("/");i.length;){var n=i.join("/");if(c["default"].isFunction(t)&&!t.call(this,n))break;i.pop()}},n.prototype.unbindErEvents=function(){D["default"].un("enteractioncomplete",this._erEventsHandler)},n.prototype.dispose=function(e){this.unbindErEvents(),this.innerWrapper.off("click"),e?this.innerWrapper.remove():this.wrapper.remove(),this.fire("dispose",{context:this})},n}(h["default"]);module.exports=H}),define("inf-ria/mvc/ListView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/ListView","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i),n.prototype.updatePageData=function(e,t){var i=this.get("table");i&&i.setProperties({selectedIndex:i.selectedIndex||[],datasource:e.tableData,noDataHtml:t||this.getUIProperties().table.noDataHtml});var n=this.get("pager");n&&n.setProperties({count:e.totalCount,page:e.pageNo})};var a=n;return n=r.viewInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/ListModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","bat-ria/mvc/ListModel","er/Deferred","../decorators"],function(exports,module,e,t,i,n,r,a,o){var s=n["default"](i),l=n["default"](r),u=n["default"](a),A=function(i){function n(){t["default"](this,r),i.apply(this,arguments)}e["default"](n,i),n.prototype.retrieveDefaultListPage=function(){var e={order:"desc",orderBy:"id",pageNo:1,pageSize:30,totalCount:0,result:[]};return s["default"].extend(e,this.getDefaultArgs()),u["default"].resolved(s["default"].omit(e,s["default"].keys(this.dump())))},n.prototype.retrieveListPage=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=s["default"].extend(this.getQuery(),t);return this.listRequester(i,{"X-silence":!0}).then(function(e){var t=e;return t.tableData=t.result,delete t.result,t}).then(function(t){return e.fill(t),t})};var r=n;return n=o.modelInjected()(n)||n}(l["default"]);module.exports=A}),define("inf-ria/mvc/ListAction",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-decorated-class","babel-runtime/helpers/class-call-check","babel-runtime/core-js/symbol","bat-ria/mvc/ListAction","babel-runtime/helpers/interop-require-default","inf-i18n","../decorators"],function(exports,module,e,t,i,n,r,a,o,s){var l=a["default"](r),u=a["default"](o),A=function(r){function a(){i["default"](this,o),r.apply(this,arguments)}e["default"](a,r),a.prototype.retrieveListPage=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.model.retrieveListPage(t).then(function(t){if(e.view.viewContext)e.view.updatePageData(t),e.fire("listDataLoaded");else e.fire("listDataAborted")}).fail(function(t){return e.fire("listDataFailed",t)})},a.prototype.asyncListPage=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this.view.get("table");return t&&t.addState("loading"),this.retrieveListPage(e).ensure(function(){return t&&t.removeState("loading")})},t["default"](a,[{key:n["default"](),decorators:[s.when("beforemodelload")],value:function(e){this._listRequester=this.model.listRequester,this.model.listRequester=this.model.retrieveDefaultListPage}},{key:n["default"](),decorators:[s.when("modelloaded")],value:function(e){this.model.listRequester=this._listRequester}},{key:n["default"](),decorators:[s.when("beforerender")],value:function(e){var t=this.view.getUIProperties().table;this._noDataHtml=t.noDataHtml,t.noDataHtml=['<p class="list-loading">','<span class="loading"></span>',u["default"]("列表加载中，请稍候..."),"</p>"].join("\n")}},{key:n["default"](),decorators:[s.when("rendered")],value:function(e){var t=this.view.getUIProperties().table;t.noDataHtml=this.view.replaceValue?this.view.replaceValue(this._noDataHtml):this._noDataHtml}},{key:n["default"](),decorators:[s.when("entercomplete")],value:function(e){this.retrieveListPage()}}]);var o=a;return a=s.actionInjected()(a)||a}(l["default"]);module.exports=A}),define("inf-ria/mvc/FormView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/FormView","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i);var a=n;return n=r.viewInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/FormModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/FormModel","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i);var a=n;return n=r.modelInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/FormAction",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/FormAction","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i);var a=n;return n=r.actionInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/BaseView",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/BaseView","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i);var a=n;return n=r.viewInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/BaseModel",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/BaseModel","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i);var a=n;return n=r.modelInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/BaseAction",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","bat-ria/mvc/BaseAction","babel-runtime/helpers/interop-require-default","../decorators"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=function(i){function n(){t["default"](this,a),i.apply(this,arguments)}e["default"](n,i);var a=n;return n=r.actionInjected()(n)||n}(a["default"]);module.exports=o}),define("inf-ria/mvc/ActionFactory",["exports","module","babel-runtime/helpers/class-call-check","lodash","babel-runtime/helpers/interop-require-default","promise"],function(exports,module,e,t,i,n){var r=i["default"](t),a=i["default"](n),o=function(){function t(i){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e["default"](this,t),this._iocContainer=null,this.actionComponent=i,this.noSchema=n.noSchema||!1}return t.prototype.createRuntimeAction=function(e){var t=this.getIocContainer();if(null==t)throw new Error("IocContainer is undefined, please call setIocContainer() first.");return new a["default"](r["default"].bind(t.getComponent,t,this.actionComponent)).thenBind(this.buildAction,this,e)},t.prototype.getIocContainer=function(){return this._iocContainer},t.prototype.setIocContainer=function(e){this._iocContainer=e},t.prototype.buildAction=function(e,t){return t},t}();module.exports=o}),define("inf-ria/js",["exports","module"],function(exports,module){module.exports={load:function(e,t,i){function n(){var e=r.readyState;if("undefined"==typeof e||/^(loaded|complete)$/.test(e))r.onload=r.onreadystatechange=null,r=null,i(!0)}var r=document.createElement("script");if(r.src=t.toUrl(e),r.async=!0,r.readyState)r.onreadystatechange=n;else r.onload=n;var a=document.getElementsByTagName("head")[0]||document.body;a.appendChild(r),a=null}}}),define("inf-ria/app/iac",["exports","module","babel-runtime/helpers/class-call-check","er/Deferred","babel-runtime/helpers/interop-require-default","er/controller"],function(exports,module,e,t,i,n){var r=i["default"](t),a=i["default"](n),o=function(){function t(){e["default"](this,t),this._services={},this._fixedModule={}}return t.prototype.registerService=function(e,t){if(null==this._services[e])this._services[e]=t},t.prototype.invokeService=function(e){for(var t=this,i=arguments.length,n=Array(i>1?i-1:0),a=1;i>a;a++)n[a-1]=arguments[a];var o=this._getModuleName(e);this._fixRequireConfig(o);var s=[o+"/iac/startup","inf-ria/css!"+o+"/../biz.css"],l=null;return r["default"].require(s).then(function(){if(l=arguments[0],"function"==typeof l.activate)return l.activate();else return void 0}).then(function(){var i=t._services[e];if(null==i)throw new Error("No such service "+e);return i.apply(null,n)})},t.prototype.waitActionDialog=function(e){if(!a["default"].currentAction)return r["default"].rejected(new Error("Not found initialized er.Action"));var t=new r["default"],i=a["default"].currentAction.view;return e.actionOptions.iacService=!0,i.waitActionDialog(e).then(function(e){var i=e.target,n=i.getAction(),r=function(e){if(e.preventDefault(),"aftersubmit"===e.type){var r=n.model.get("iacReturnValue");t.resolve(r),i.dispose()}else if("aftercancel"===e.type)i.dispose()};n.on("aftersubmit",r),n.on("aftercancel",r)}).fail(t.resolver.reject),t.promise},t.prototype._fixRequireConfig=function(e){var t;if(!this._fixedModule[e]&&"spec"!==e&&!/\-test$/.test(e)){var i=require.toUrl("").replace(/\/\?.*/,""),n="/"+e+"/"+i+"/"+e;window.require.config({paths:(t={},t[e]=n,t)}),this._fixedModule[e]=!0}},t.prototype._getModuleName=function(e){var t=/^([\-\w]+):\/\//,i=t.exec(e);return i?i[1]:null},t}();module.exports=new o}),define("inf-ria/app/helper",["exports","promise","babel-runtime/helpers/interop-require-default","er/controller"],function(exports,e,t,i){function n(e,t){if(!t){if(!a["default"].currentAction)return r["default"].reject(new Error("Not found initialized er.Action"));t=a["default"].currentAction.view}if(!t)return r["default"].reject(new Error("Not found er.View instance."));else return new r["default"](function(t,i){var n=a["default"].currentAction.view;return n.waitActionDialogExt(e).then(function(e){if("actionloadfail"===e.type||"actionloadabort"===e.type)return void i(e);var n=e.target,r=n.getAction(),a=function(e){e.preventDefault();var i=null;if("aftersubmit"===e.type)i=r.model.get("iacReturnValue"),n.dispose();else if("aftercancel"===e.type)n.dispose();t(i)};r.on("aftersubmit",a),r.on("aftercancel",a)})})}exports.__esModule=!0,exports.waitActionDialog=n;var r=t["default"](e),a=t["default"](i)}),define("inf-ria/helper",["exports","er/events","babel-runtime/helpers/interop-require-default","./XHelper"],function(exports,e,t,i){function n(module){if("/"===module||!module)return"home";else return module}function r(e){if(null==e&&"undefined"!=typeof G_APP_NAME)return G_APP_NAME;var t=e||location.pathname,i=t.indexOf("/",1),n=-1===i?t.substr(1):t.substring(1,i);return n=n.replace(/index\.html/,"").replace(/\//g,"").replace(/^x\-/,""),n||"home"}exports.__esModule=!0,exports.getAppName=r;var a=t["default"](e),o=t["default"](i),s=new o["default"](r());s.setLoader(window.require);var l=function(){return s.getSearch()};exports.getSearch=l;var u=function(module,e){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?location.search:arguments[3];return module=n(module),s.buildUrl(module,e,t,i)};exports.buildUrl=u;var A=function(module,e){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?location.search:arguments[3];return module=n(module),s.loadApp(module,e,t,i)};exports.redirectToModule=A;var B=function(module){var e=n(module);return s.loadApp(e).then(function(){return a["default"].fire("actionstart")})};exports.startAction=B,exports["default"]=s}),define("inf-ria/app/brpc",["exports","module","../helper","babel-runtime/helpers/interop-require-default","./InterAppCommunication"],function(exports,module,e,t,i){var n=t["default"](e),r=t["default"](i);module.exports=new r["default"](n["default"]["default"])}),define("inf-ria/app/InterAppCommunication",["exports","module","babel-runtime/helpers/class-call-check"],function(exports,module,e){var t=function(){function t(i){e["default"](this,t),this._services={},this._xhelper=i}return t.prototype.registerService=function(e,t){if(null==this._services[e])this._services[e]=t},t.prototype.invokeService=function(e){for(var t=this,i=arguments.length,n=Array(i>1?i-1:0),r=1;i>r;r++)n[r-1]=arguments[r];var a=/^([\-\w]+):\/\//,o=a.exec(e);if(!o)throw new Error("Invalid service name");var module=o[1].toLowerCase();return this._xhelper.loadAppInBackground(module).then(function(){var i=t._services[e];if(null==i||"function"!=typeof i)throw new Error("No such service "+e);return i.apply(void 0,n)})},t}();module.exports=t}),define("inf-ria/decorators",["exports","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","babel-runtime/core-js/symbol","underscore","babel-runtime/helpers/interop-require-default"],function(exports,e,t,i,n,r){function a(e,t){return function(i){return function(n,r,a){var o;if(!n[t])n[t]=[];n[t].push((o={},o[e]=i,o.key=r,o))}}}exports.__esModule=!0;var o=r["default"](n),s=i["default"]("decoratorActionEvents");exports.DECORATOR_ACTION_EVENTS=s;var l=i["default"]("decoratorUIEvents");exports.DECORATOR_UI_EVENTS=l;var u=i["default"]("decoratorUIProps");exports.DECORATOR_UI_PROPS=u;var A=i["default"]("decoratorUIModels");exports.DECORATOR_UI_MODELS=A;var B=i["default"]("decoratorViewEvents");exports.DECORATOR_VIEW_EVENTS=B;var c=function(e){if("string"!=typeof e||!e)throw new Error("Name of accessor must be provided");return function(t){var n=i["default"](e),r=function(){return this[n]},a=function(e){this[n]=e},o=e.charAt(0).toUpperCase()+e.slice(1);t.prototype["get"+o]=r,t.prototype["set"+o]=a}};exports.accessor=c;var C=function(e){return function(t,i,n){return t.prototype.template=e,t}};exports.template=C;var D=function(e,t){return function(i,n,r){return i.prototype.modelType=e,i.prototype.viewType=t,i}};exports.action=D;var d=function(){return function(i,n,r){return function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.initialize=function(){var e=this;i.prototype.initialize.call(this),this.on("beforerender",function(t){return e.injectViewEvents()}),this.injectEvents()},n.prototype.injectEvents=function(){var e=this;if(this[s])o["default"].each(this[s],function(t){if("function"==typeof e[t.key])e.on(t.event,function(i){return e[t.key](i)})})},n.prototype.injectViewEvents=function(){var e=this;if(this[B])o["default"].each(this[B],function(t){if("function"==typeof e[t.key])e.view.on(t.event,function(i){return e[t.key](i)})})},n.prototype.initBehavior=function(){var e=this;i.prototype.initBehavior.call(this),this.model.on("change",function(t){return o["default"].each(t.changes,function(t){return e.fire(t.name+":changed",t)})})},n}(i)}};exports.actionInjected=d;var f=function(){return function(i,n,r){return function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.injectDatasource()},n.prototype.injectDatasource=function(){var e=this;if(this[A])this.datasource=o["default"].object(o["default"].map(o["default"].filter(this[A],function(t){return!!e[t.key]}),function(t){return[t.modelKey,function(){return e[t.key](e)}]}))},n}(i)}};exports.modelInjected=f;var h=function(){return function(i,n,r){return function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.injectEvents(),this.injectProperties()},n.prototype.injectEvents=function(){var e=this;if(this[l])this.uiEvents=o["default"].object(o["default"].map(o["default"].filter(this[l],function(t){return!!e[t.key]}),function(t){return[t.event,function(i){return e[t.key](i)}]}))},n.prototype.injectProperties=function(){var e=this;if(this[u])this.uiProperties=o["default"].object(o["default"].map(o["default"].filter(this[u],function(t){return!!e[t.key]}),function(t){return[t.prop,e[t.key]()]}))},n}(i)}};exports.viewInjected=h;var E=a("modelKey",A);exports.uiModel=E;var p=a("prop",u);exports.uiProp=p;var F=a("event",l);exports.uiOn=F;var m=a("event",B);exports.viewOn=m;var g=a("event",s);exports.when=g}),define("inf-ria/XHelper",["exports","module","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","er/URL","er/Deferred","./decorators"],function(exports,module,e,t,i,n,r,a){function o(e){return e.getLoader()||D}var s=i["default"](t),l=i["default"](n),u=i["default"](r),A=/localhost/.test(location.hostname),B="home",c=A?"biz.less":"biz.css",C=A?"src":"asset",D=window.require,d=function(){function t(t){e["default"](this,i),this.appId=t}t.prototype.getAppId=function(){return this.appId},t.prototype.initialize=function(){return u["default"].all(this.enableStyle(),this._initializeApp())},t.prototype.start=function(){return u["default"].all(this.enableStyle(),this._startApp())},t.prototype._initializeApp=function(){var e=o(this),t=new u["default"];return e([this.getStartupModule()],function(e){if(e&&"function"==typeof e.initialize)t.resolve(e.initialize());else t.resolve()}),t.promise},t.prototype._startApp=function(){var e=o(this),t=new u["default"];return e([this.getStartupModule()],function(e){if(e&&"function"==typeof e.start)t.resolve(e.start());else t.resolve()}),t.promise},t.prototype.stop=function(){var e=this,t=o(this);if("function"==typeof t){var i=function(){var i=t(e.getStartupModule());if(i&&"function"==typeof i.stop){var n=function(){try{return u["default"].resolved(i.stop())}catch(e){return u["default"].resolved()}};return{v:u["default"].all(n(),e.disableStyle())}}}();if("object"==typeof i)return i.v}return u["default"].resolved(this.disableStyle())},t.prototype.disableStyle=function(){return u["default"].resolved()},t.prototype.enableStyle=function(){var e=s["default"]("link[data-biz-id="+this.appId+"]");if(!e.length){var t=o(this),i=t.toUrl(this.getStyleModule());e=s["default"]("<link />").attr({rel:"stylesheet",href:i,"data-biz-id":this.appId}),s["default"](document.head).append(e)}return e.removeAttr("disabled"),u["default"].resolved()},t.prototype.getStyleModule=function(){if(this.appId===B)return c;else return this.appId+"/"+c},t.prototype.getStartupModule=function(){if(this.appId===B)return"startup";else return this.appId+"/startup"};var i=t;return t=a.accessor("loader")(t)||t}(),f=function(){function t(t){e["default"](this,i),this._moduleVersionCache={},this._activedApp=t?new d(t):null}t.prototype.getVersion=function(module){function e(e){n.resolve()}var t=this,i=this._moduleVersionCache[module];if(i)return u["default"].resolved(i);var n=new u["default"],r=this.getUrl(module,"/version.txt"),a=function(e){if(e=s["default"].trim(e))if(t._moduleVersionCache[module]=e,module!==B){var i=o(t);if(i&&i.config){var r,a;i.config({urlArgs:(r={},r[module]="r"+e+"=1",r),paths:(a={},a[module]="/"+module+"/"+C+"/"+module,a[module+"/biz"]="/"+module+"/"+C+"/biz",a)})}}n.resolve(e)},l=this.getVersionLoader()||function(e){return s["default"].get(e,{t:(new Date).getTime()})};return l(r).then(a,e),n.promise},t.prototype.getSearch=function(){return location.search},t.prototype.buildUrl=function(module,e){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?location.search:arguments[3],n=this.getUrl(module,"/")+i;if(e)n+="#"+l["default"].withQuery(e,t);return n},t.prototype.isRunning=function(e){return this._activedApp&&this._activedApp.getAppId()===e},t.prototype.loadAppInBackground=function(e){var t=this;if(this.isRunning(e))return u["default"].resolved();else return this.getVersion(e).ensure(function(){var i=new d(e);return i.setLoader(o(t)),i.initialize()})},t.prototype.loadApp=function(e,t,i,n){var r=this;if(this.isRunning(e)){if(t)location.hash=l["default"].withQuery(t,i);return u["default"].resolved()}var a=this.buildUrl(e,t,i,n);if("pushState"in history){var s=function(){var t=location.pathname+location.search+location.hash,i=o(r);return{v:r.getVersion(e).ensure(function(){if(r._activedApp)return r._activedApp.setLoader(i),r._activedApp.stop();else return void 0}).then(function(){if(0!==t.indexOf("/"+e+"/"))history.pushState({appId:e,referrer:t},"",a);return r._activedApp=new d(e),r._activedApp.setLoader(i),r._activedApp.start()})}}();if("object"==typeof s)return s.v}location.href=a},t.prototype.getUrl=function(module,e){if(module===B)return e;else return"/"+module+e};var i=t;return t=a.accessor("loader")(t)||t,t=a.accessor("versionLoader")(t)||t}();module.exports=f}),define("inf-ria/EnumX",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","lodash","babel-runtime/helpers/interop-require-default","er/Enum"],function(exports,module,e,t,i,n,r){var a=n["default"](i),o=n["default"](r),s=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.fromValue=function(e){return i.prototype.fromValue.call(this,e)||{}},n.prototype.fromAlias=function(e){return i.prototype.fromAlias.call(this,e)||{}},n.prototype.fromText=function(e){return i.prototype.fromText.call(this,e)||{}},n.prototype.toArray=function(){for(var e=[],t=arguments.length,i=Array(t),n=0;t>n;n++)i[n]=arguments[n];if(i.length>0)for(var r=0,o=i.length;o>r;r++){var s=i[r];if("string"==typeof s)e.push(a["default"].clone(this.fromAlias(s)));else e.push(s)}else for(var r in this.valueIndex)if(this.valueIndex.hasOwnProperty(r)&&this.valueIndex[r])e.push(a["default"].clone(this.valueIndex[r]));return e},n}(o["default"]);module.exports=s}),define("inf-monitor/performance",["exports","module"],function(exports,module){var e=void 0;module.exports=e}),define("inf-monitor/main",["exports","module"],function(exports,module){module.exports={version:"0.0.1"}}),define("inf-monitor",["inf-monitor/main"],function(e){return e}),define("inf-monitor/hook",["exports","module","promise","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports={canSend:!1,send:function(){return i["default"].resolve()}}}),define("inf-monitor/util",["exports","module"],function(exports,module){function e(e){e=e||0;for(var t=[],i=0;e>i;i++)t.push("0123456789abcdef".charAt(Math.floor(16*Math.random())));return t.join("")}var t={};t.guid=function(){var t=(new Date).valueOf().toString();return["4b534c46",e(4),"4"+e(3),e(4),t.substring(0,12)].join("-")},t.uid=function(){return[(new Date).valueOf().toString(),e(4)].join("")},module.exports=t}),define("inf-monitor/logger",["exports","module","./config","babel-runtime/helpers/interop-require-default","./Queue","./util","fc-storage/localStorage"],function(exports,module,e,t,i,n,r){function a(e,t){var i={};if("object"==typeof e)i.data=e,i.target=e.target;else i.data=t,i.data.target=e,i.target=e;delete i.data.target,o(i)}function o(e){if(e.logId=A["default"].guid(),e.lastLogId=c,c=e.logId,e.clientTime=(new Date).getTime(),!C)s();C.add(e)}function s(){return C=new u["default"]({data:B["default"].getItem(l["default"].KEY.STORAGE),limit:l["default"].limit.queue}),B["default"].setItem(l["default"].KEY.STORAGE,[]),C.on("full",function(){C.dump()}),C}var l=t["default"](e),u=t["default"](i),A=t["default"](n),B=t["default"](r),c="nil",C=null;module.exports={log:a,cache:function(){C&&C.cache()}}}),define("inf-monitor/decorator",["exports","./logger","promise","babel-runtime/helpers/interop-require-default"],function(exports,e,t,i){exports.__esModule=!0;var n=i["default"](t),r=function(e){return e},a=function(t){var i=arguments.length<=1||void 0===arguments[1]?r:arguments[1];return function(n,r,a){var o=a.value;a.value=function(){for(var n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];return e.log(t,i.call(this,{arguments:r},this)),o.apply(this,r)}}};exports.logBefore=a;var o=function(t){var i=arguments.length<=1||void 0===arguments[1]?r:arguments[1];return function(r,a,o){var s=o.value;o.value=function(){for(var r=this,a=arguments.length,o=Array(a),l=0;a>l;l++)o[l]=arguments[l];var u=s.apply(this,o);return n["default"].resolve(u).then(function(n){return e.log(t,i.call(r,{arguments:o},r))}),u}}};exports.logAfter=o}),define("inf-monitor/config",["exports","module"],function(exports,module){module.exports={KEY:{STORAGE:"__INF_MONITOR_DATA_TOSEND__"},limit:{queue:20}}}),define("inf-monitor/browserDetect",["exports","module"],function(exports,module){var e=function(){var e=function(){},t={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",
family_replacement:"Opera"},{regex:"(OPR)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.4|Windows NT 10\\.0)",os_replacement:"Windows 10"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:["Firefox Mobile","Opera Mobile","Opera Mini","Mobile Safari","webOS","IE Mobile","Playstation Portable","Nokia","Blackberry","Palm","Silk","Android","Maemo","Obigo","Netfront","AvantGo","Teleca","SEMC-Browser","Bolt","Iris","UP.Browser","Symphony","Minimo","Bunjaloo","Jasmine","Dolfin","Polaris","BREW","Chrome Mobile","Chrome Mobile iOS","UC Browser","Tizen Browser"]};e.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"],e.types=["browser","os","device"],e.regexes=t||function(){var t={};return e.parsers.map(function(e){t[e]=[]}),t}(),e.families=function(){var t={};return e.types.map(function(e){t[e]=[]}),t}();var i=Array.prototype,n=(Object.prototype,Function.prototype,i.forEach),r=(i.indexOf,function(e,t){for(var i={},n=0;n<t.length&&!(i=t[n](e));n++);return i}),a=function(e,t){o(e,function(e){o(t,function(t){delete e[t]})})},o=forEach=function(e,t,i){if(null!=e)if(n&&e.forEach===n)e.forEach(t,i);else if(e.length===+e.length)for(var r=0,a=e.length;a>r;r++)t.call(i,e[r],r,e);else for(var o in e)if(_.has(e,o))t.call(i,e[o],o,e)},s=function(e){return!(!e||"undefined"==typeof e||null==e)},l=function(e){var t="";if(e=e||{},s(e))if(s(e.major))if(t+=e.major,s(e.minor))if(t+="."+e.minor,s(e.patch))t+="."+e.patch;return t},u=function(e){e=e||{};var t=l(e);if(t)t=" "+t;return e&&s(e.family)?e.family+t:""};return e.parse=function(t){var i=function(t){return e.regexes[t+"_parsers"].map(function(e){function i(t){var i=t.match(n);if(!i)return null;var o={};return o.family=(r?r.replace("$1",i[1]):i[1])||"other",o.major=parseInt(a?a:i[2])||null,o.minor=i[3]?parseInt(i[3]):null,o.patch=i[4]?parseInt(i[4]):null,o.tablet=e.tablet,o.man=e.manufacturer||null,o}var n=new RegExp(e.regex),r=e[("browser"===t?"family":t)+"_replacement"],a=e.major_version_replacement;return i})},n=function(){},o=i("browser"),A=i("os"),B=i("device"),c=new n;if(c.source=t,c.browser=r(t,o),s(c.browser))c.browser.name=u(c.browser),c.browser.version=l(c.browser);else c.browser={};if(c.os=r(t,A),s(c.os))c.os.name=u(c.os),c.os.version=l(c.os);else c.os={};if(c.device=r(t,B),s(c.device))c.device.name=u(c.device),c.device.version=l(c.device);else c.device={tablet:!1,family:"Other"};var C={};e.regexes.mobile_browser_families.map(function(e){C[e]=!0}),e.regexes.mobile_os_families.map(function(e){C[e]=!0});if("Spider"===c.browser.family)c.device.type="Spider";else if(c.browser.tablet||c.os.tablet||c.device.tablet)c.device.type="Tablet";else if(C.hasOwnProperty(c.browser.family))c.device.type="Mobile";else c.device.type="Desktop";return c.device.manufacturer=c.browser.man||c.os.man||c.device.man||null,a([c.browser,c.os,c.device],["tablet","man"]),c},e}(),t=e.parse(window.navigator.userAgent);module.exports=t}),define("inf-monitor/Queue",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","mini-event/EventTarget","fc-storage/localStorage","./browserDetect","./config","./hook"],function(exports,module,e,t,i,n,r,a,o,s,l){function u(){return{context:{url:window.location.href,browser:d["default"].browser.name,os:d["default"].os.name,device:d["default"].device.type}}}function A(e){return c["default"].each(e,function(t,i){if(c["default"].isObject(t)&&!c["default"].isArray(t))B(e,t,i),delete e[i]}),e}function B(e,t,i){if(c["default"].isObject(t)&&!c["default"].isArray(t))c["default"].each(t,function(t,n){B(e,t,[i,n].join("_"))});else e[i]=t}var c=n["default"](i),C=n["default"](r),D=n["default"](a),d=n["default"](o),f=n["default"](s),h=n["default"](l),E=function(i){function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(t["default"](this,n),i.call(this),this._data=e.data||[],this.limit=e.limit,this._data.length>0)this._data.map(function(e){return e.isFromCache=1,e}),this.dump()}return e["default"](n,i),n.prototype.add=function(e){if(this._data.push(e),this._data.length>=this.limit)this.fire("full")},n.prototype.clear=function(){this._data.length=0},n.prototype.toJSON=function(){return JSON.stringify(this._data)},n.prototype.merge=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(this._data=this._data.concat(e),this._data.length>=this.limit)this.fire("full")},n.prototype.cache=function(){var e=[].concat(this._data);return D["default"].setItem(f["default"].KEY.STORAGE,e),this.clear(),e},n.prototype.dump=function(){var e=this;if(h["default"].send&&h["default"].canSend){var t=function(){var t=c["default"].extend(u(),h["default"].getCommonData?h["default"].getCommonData():{}),i=e._data.map(function(e){var i=c["default"].chain(e).extend(t).value();return A(i)});return e.clear(),{v:h["default"].send(i)}}();if("object"==typeof t)return t.v}},n}(C["default"]);module.exports=E}),define("inf-i18n/util",["exports","module","underscore","babel-runtime/helpers/interop-require-default","./config"],function(exports,module,e,t,i){var n=t["default"](e),r=t["default"](i);module.exports={format:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];var r=0;return e.replace(/%s/g,function(e){return i[r++]})},determineLanguage:function(e){if(n["default"].indexOf(r["default"].supportedLanguage,e)>-1)return e;if(e=e.split("-")[0],r["default"].downgradeDefault[e])return r["default"].downgradeDefault[e];else return r["default"].defaultLanguage}}}),define("inf-i18n/requester",["exports","module","promise","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e),n={};n.json=function(e){return new i["default"](function(t,i){var n=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");n.onreadystatechange=function(){if(4===n.readyState){if(n.status<200||n.status>=300&&304!==n.status)return void t();var e=n.responseText;try{e=JSON.parse(e),t(e)}catch(i){t()}}},n.open("GET",e,!0),n.send()})},n.amd=function(e){return i["default"].require([e]).then(function(e){return e[0]})["catch"](function(){return i["default"].resolve()})},module.exports=n}),define("inf-i18n/config",["exports","module"],function(exports,module){module.exports={defaultLanguage:"zh-cn",supportedLanguage:["zh-cn","en-us"],downgradeDefault:{en:"en-us",zh:"zh-cn"},sourceType:"json",url:""}}),define("etpl-filters/main",["exports","./f/cycleFriendly","babel-runtime/helpers/interop-require-default","./f/timeInterval","./f/formatName","./f/formatTime","./f/lowercase","./f/uppercase","./f/stringify","./f/defaultValue","./f/encodeURI","./f/makebreadcrumb","./f/statusTpl","./f/json2string","./f/secondDesc","./f/UTCtoLocalTime","./f/getObjectValueByKey","./f/blsToNoneString","./f/bmrTimeDiff","./f/second","./f/apm_num","./f/apm_fixed","./f/apm_remove_protocol"],function(exports,e,t,i,n,r,a,o,s,l,u,A,B,c,C,D,d,f,h,E,p,F,m){function g(e){return e.addFilter("cycleFriendly",H["default"]),e.addFilter("timeInterval",G["default"]),e.addFilter("formatName",I["default"]),e.addFilter("formatTime",v["default"]),e.addFilter("lowercase",y["default"]),e.addFilter("uppercase",J["default"]),e.addFilter("stringify",L["default"]),e.addFilter("defaultValue",M["default"]),e.addFilter("encodeURI",b["default"]),e.addFilter("makebreadcrumb",N["default"]),e.addFilter("statusTpl",K["default"]),e.addFilter("json2string",x["default"]),e.addFilter("secondDesc",P["default"]),e.addFilter("UTCtoLocalTime",_["default"]),e.addFilter("blsToNoneString",T["default"]),e.addFilter("getObjectValueByKey",O["default"]),e.addFilter("bmrTimeDiff",S["default"]),e.addFilter("baeproUtc2Time",_["default"]),e.addFilter("baeUtc2Time",_["default"]),e.addFilter("second",w["default"]),e.addFilter("apm_num",R["default"]),e.addFilter("apm_fixed",k["default"]),e.addFilter("apm_remove_protocol",Q["default"]),e}exports.__esModule=!0,exports.activate=g;var H=t["default"](e),G=t["default"](i),I=t["default"](n),v=t["default"](r),y=t["default"](a),J=t["default"](o),L=t["default"](s),M=t["default"](l),b=t["default"](u),N=t["default"](A),K=t["default"](B),x=t["default"](c),P=t["default"](C),_=t["default"](D),O=t["default"](d),T=t["default"](f),S=t["default"](h),w=t["default"](E),R=t["default"](p),k=t["default"](F),Q=t["default"](m)}),define("etpl-filters",["etpl-filters/main"],function(e){return e}),define("etpl-filters/f/uppercase",["exports","module"],function(exports,module){module.exports=function(e){return String(e).toUpperCase()}}),define("etpl-filters/f/timeInterval",["exports","module","moment","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"YYYY-MM-DD HH:mm:ss":arguments[2],r=i["default"](e,n),a=i["default"](t,n);if(e&&t)return a.diff(r,"minute");else return"-"}}),define("etpl-filters/f/stringify",["exports","module"],function(exports,module){module.exports=function(e){return JSON.stringify(e)}}),define("etpl-filters/f/statusTpl",["exports","module"],function(exports,module){module.exports=function(e){var t=e.kclass||e.klass,i=e.text||"-";return'<span class="status'+(t?" "+t:"")+'">'+i+"</span>"}}),define("etpl-filters/f/secondDesc",["exports","module"],function(exports,module){module.exports=function(e){for(var t=[{key:"second",unit:60,desc:"秒"},{key:"minute",unit:60,desc:"分"},{key:"hour",unit:24,desc:"时"},{key:"day",unit:30,desc:"天"},{key:"month",unit:12,desc:"月"}],i=0,n="";i<t.length;){var r=t[i];if(n=e%r.unit+r.desc+n,e=Math.floor(e/r.unit),0===e)break;i++}return n}}),define("etpl-filters/f/second",["exports","module"],function(exports,module){module.exports=function(e){if(e>1)return parseFloat((e/1e3).toFixed(2))+"s";else return parseFloat(e).toFixed(2)+"ms"}}),define("etpl-filters/f/makebreadcrumb",["exports","module"],function(exports,module){function e(e,t){if("string"==typeof e)return"<span"+(t?' class="'+t+'"':"")+">"+e+"</span>";if(e&&e.href)return'<a href="'+e.href+'"'+(t?' class="'+t+'"':"")+">"+e.title+"</a>";else return""}module.exports=function(t,i,n){t=t||[],i=e("产品服务")||i,n=" "+e("/","divider")+" "||n;var r=[];r.push('<p class="breadcrumb">'),r.push(i);for(var a=0,o=t.length-1;o>=a;a++)if(r.push(n),a===o)r.push(e(t[a],"active"));else r.push(e(t[a]));return r.push("</p>"),r.join("")}}),define("etpl-filters/f/lowercase",["exports","module"],function(exports,module){module.exports=function(e){return String(e).toLowerCase()}}),define("etpl-filters/f/json2string",["exports","module"],function(exports,module){module.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?"s":arguments[1];if("s"===t)return JSON.stringify(e);else return JSON.stringify(e,"\n",4)}}),define("etpl-filters/f/getObjectValueByKey",["exports","module"],function(exports,module){module.exports=function(e,t){return e[t]||""}}),define("etpl-filters/f/formatTime",["exports","module","moment","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD HH:mm:ss":arguments[1];if(!e)return"-";else return i["default"](e).format(t)}}),define("etpl-filters/f/formatName",["exports","module"],function(exports,module){module.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?20:arguments[1];if(e.length<=t)return e;else return e.substr(0,t)+"...";
}}),define("etpl-filters/f/encodeURI",["exports","module"],function(exports,module){module.exports=function(e){return encodeURI(e)}}),define("etpl-filters/f/defaultValue",["exports","module"],function(exports,module){module.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?"-":arguments[1];return!e?t:e}}),define("etpl-filters/f/cycleFriendly",["exports","module"],function(exports,module){module.exports=function(e){if(60>e)return e+"秒";else if(3600>e)return(e/60).toFixed(0)+"分钟";return(e/3600).toFixed(0)+"小时"}}),define("etpl-filters/f/bmrTimeDiff",["exports","module","moment","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports=function(e,t){if(!e)return"-";var n=i["default"](e),r=i["default"](t||Date.now());return r.diff(n,"minutes")||"-"}}),define("etpl-filters/f/blsToNoneString",["exports","module","underscore","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports=function(e){if(i["default"].isNumber(e))return e;else return e||"-"}}),define("etpl-filters/f/apm_remove_protocol",["exports","module"],function(exports,module){module.exports=function(e){return e.replace(/^http(s?):/,"")}}),define("etpl-filters/f/apm_num",["exports","module"],function(exports,module){module.exports=function(e){return parseFloat((e/1e3).toFixed(3))}}),define("etpl-filters/f/apm_fixed",["exports","module"],function(exports,module){module.exports=function(e){return parseFloat(e).toFixed(2)}}),define("etpl-filters/f/UTCtoLocalTime",["exports","module","moment","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD HH:mm:ss":arguments[1];return e?i["default"](e).format(t):"-"}}),define("er-track/trackers/bce",["exports","jquery","babel-runtime/helpers/interop-require-default"],function(exports,e,t){function i(){return document.hidden===!0||"hidden"===document.visibilityState}exports.__esModule=!0;var n=t["default"](e),r={},a={},o=void 0,s=void 0,l=[],u="bce";exports.name=u;var A=function(e){var t=[],u="bce",A=function(e){},B={},c=function(e){if(!i()){var t=e.url.toString();s=(new Date).getTime(),B[t]=(new Date).getTime()}},C=function(e){if(!i()){var n=e.url.toString(),r=B[n]||0;if(r){var a=(new Date).getTime(),o=a-r;if(!(50>o))t.push({type:"AMD_MODULE_LOAD_TIME",key:n,time:o,page_sess_id:s})}}},D=function(e){if(!i()){o=e;var t=e.url.toString();r[t]=(new Date).getTime()}},d=function(e){if(!i())if(!e.action.disposed){var o=e.url.toString();if(r[o]){var u=(new Date).getTime(),A=u-r[o];if(!(0>=A)){t.push({type:"ACTION_LOAD_TIME",url:o,time:A,page_sess_id:s});var B=location.host+location.pathname;if(!a[B])if(A=window.FRAMEWORK_LOADED_TIME-window.CONSOLE_START_TIME,A>0)t.push({type:"FRAMEWORK_LOADED_TIME",module:B,time:A}),a[B]=A;if(l.length){for(var c=0;c<l.length;c++){var C=l[c];t.push({type:"API_LOAD_TIME",url:C[0],time:C[1],page_url:C[2],request_id:C[3],page_sess_id:C[4]})}l.length=0}n["default"].ajax({method:"POST",url:"/api/log/csi",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8","X-Request-By":"ERApplication"},data:JSON.stringify(t),success:function(e){t.length=0},error:function(e,i,n){t.length=0}})}}}},f=function(e){if(!i())if(e.context&&e.context.url)for(var n=e.context.url.toString(),r=0;r<e.measures.length;r++){var a=e.measures[r];t.push({type:a.name,key:n,time:~~a.duration,page_sess_id:s})}},h=function(e,t,n){if(!i())if(/^\/api\//.test(e)){var r=(new Date).getTime(),a=r-t.startTime;if(!(0>=a)){var u=o?o.url.toString():"",A=n.getResponseHeader("x-bce-request-id")||"nil";l.push([e,a,u,A,s])}}},E=function(e){e()};return{name:u,trackPageView:A,trackForwardAction:c,trackActionLoaded:C,trackBeforeEnterAction:D,trackEnterAction:d,trackAfterEnterAction:f,trackRequestComplete:h,load:E}};exports.create=A}),define("bce-sdk-js/vendor/util",["exports","module","underscore","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){function i(e,t){var i=e.prototype,n=new Function;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,r["default"].extend(e.prototype,i)}function n(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var n=t[0],r=t.length;if(1===r)return n;for(var a="",o=1,s=0,l=0;l<n.length;){if(37===n.charCodeAt(l)&&l+1<n.length)switch(n.charCodeAt(l+1)){case 100:if(o>=r)break;if(l>s)a+=n.slice(s,l);a+=Number(t[o++]),s=l+=2;continue;case 115:if(o>=r)break;if(l>s)a+=n.slice(s,l);a+=String(t[o++]),s=l+=2;continue;case 37:if(l>s)a+=n.slice(s,l);a+="%",s=l+=2;continue}++l}if(0===s)a=n;else if(s<n.length)a+=n.slice(s);return a}var r=t["default"](e);module.exports={inherits:i,format:n}}),define("bce-sdk-js/vendor/stream",["exports","babel-runtime/helpers/class-call-check"],function(exports,e){exports.__esModule=!0;var t=function n(){e["default"](this,n)};exports.Writable=t;var i=function r(){e["default"](this,r)};exports.Readable=i}),define("bce-sdk-js/vendor/querystring",["exports","module","underscore","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){function i(e){if("string"==typeof e)return e;if("number"==typeof e&&isFinite(e))return""+e;if("boolean"==typeof e)return e?"true":"false";else return""}function n(e){var t=arguments.length<=1||void 0===arguments[1]?"&":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"=":arguments[2],a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=encodeURIComponent;if(a&&"function"==typeof a.encodeURIComponent)o=a.encodeURIComponent;if(null!==e&&"object"==typeof e){for(var s=r["default"].keys(e),l=s.length,u=l-1,A="",B=0;l>B;++B){var c=s[B],C=e[c],D=o(i(c))+n;if(r["default"].isArray(C)){for(var d=C.length,f=d-1,h=0;d>h;++h)if(A+=D+o(i(C[h])),f>h)A+=t;if(d&&u>B)A+=t}else if(A+=D+o(i(C)),u>B)A+=t}return A}return""}var r=t["default"](e);module.exports={stringify:n}}),define("bce-sdk-js/vendor/crypto",["exports","module","./crypto-js/core","./crypto-js/sha256"],function(exports,module,e,t){module.exports={createHmac:function(i,n){if("sha256"===i){var r={_result:null,update:function(i){this._result=t.HmacSHA256(i,n).toString(e.Hex)},digest:function(){return this._result}};return r}}}}),define("bce-sdk-js/vendor/crypto-js/sha256",["exports","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./core"],function(exports,e,t,i){exports.__esModule=!0;var n=[],r=[],a=[];!function(){function e(e){for(var t=Math.sqrt(e),i=2;t>=i;i++)if(!(e%i))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var i=2,a=0;64>a;){if(e(i)){if(8>a)n[a]=t(Math.pow(i,.5));r[a]=t(Math.pow(i,1/3)),a++}i++}}();var o=function(o){function s(){t["default"](this,s),o.apply(this,arguments)}return e["default"](s,o),s.prototype._doReset=function(){this._hash=new i.WordArray(n.slice(0))},s.prototype._doProcessBlock=function(e,t){for(var i=this._hash.words,n=i[0],o=i[1],s=i[2],l=i[3],u=i[4],A=i[5],B=i[6],c=i[7],C=0;64>C;C++){if(16>C)a[C]=0|e[t+C];else{var D=a[C-15],d=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,f=a[C-2],h=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;a[C]=d+a[C-7]+h+a[C-16]}var E=u&A^~u&B,p=n&o^n&s^o&s,F=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),m=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),g=c+m+E+r[C]+a[C],H=F+p;c=B,B=A,A=u,u=l+g|0,l=s,s=o,o=n,n=g+H|0}i[0]=i[0]+n|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+l|0,i[4]=i[4]+u|0,i[5]=i[5]+A|0,i[6]=i[6]+B|0,i[7]=i[7]+c|0},s.prototype._doFinalize=function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(i/4294967296),t[(n+64>>>9<<4)+15]=i,e.sigBytes=4*t.length,this._process(),this._hash},s.prototype.clone=function(){var e=o.prototype.clone.call(this);return e._hash=this._hash.clone(),e},s}(i.Hasher),s=i.Hasher._createHelper(o);exports.SHA256=s;var l=i.Hasher._createHmacHelper(o);exports.HmacSHA256=l}),define("bce-sdk-js/vendor/crypto-js/core",["exports","babel-runtime/helpers/class-call-check","babel-runtime/helpers/inherits"],function(exports,e,t){exports.__esModule=!0;var i=function(){function t(i,n){if(void 0===i)i=[];if(e["default"](this,t),this.words=i,void 0!=n)this.sigBytes=n;else this.sigBytes=4*i.length}return t.prototype.toString=function(e){return(e||n).stringify(this)},t.prototype.concat=function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var a=0;r>a;a++){var o=i[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(var a=0;r>a;a+=4)t[n+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},t.prototype.clamp=function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)},t.prototype.clone=function(){var e=new t(this.words.slice(0));return e},t.prototype.random=function(e){for(var i=[],n=function(e){var t=987654321,i=4294967295;return function(){t=36969*(65535&t)+(t>>16)&i,e=18e3*(65535&e)+(e>>16)&i;var n=(t<<16)+e&i;return n/=4294967296,n+=.5,n*(Math.random()>.5?1:-1)}},r=0,a=void 0;e>r;r+=4){var o=n(4294967296*(a||Math.random()));a=987654071*o(),i.push(4294967296*o()|0)}return new t(i,e)},t}();exports.WordArray=i;var n={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;i>r;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i(n,t/2)}};exports.Hex=n;var r={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;i>r;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i(n,t)}};exports.Latin1=r;var a={stringify:function(e){try{return decodeURIComponent(escape(r.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return r.parse(unescape(encodeURIComponent(e)))}};exports.Utf8=a;var o=function(){function t(){e["default"](this,t),this._minBufferSize=0,this._nDataBytes=0,this._data=null}return t.prototype.reset=function(){this._data=new i,this._nDataBytes=0},t.prototype._append=function(e){if("string"==typeof e)e=a.parse(e);this._data.concat(e),this._nDataBytes+=e.sigBytes},t.prototype._process=function(e){var t=this._data,n=t.words,r=t.sigBytes,a=this.blockSize,o=4*a,s=r/o;if(e)s=Math.ceil(s);else s=Math.max((0|s)-this._minBufferSize,0);var l=s*a,u=Math.min(4*l,r),A=void 0;if(l){for(var B=0;l>B;B+=a)this._doProcessBlock(n,B);A=n.splice(0,l),t.sigBytes-=u}return new i(A,u)},t.prototype.clone=function(){var e=new t;return e._data=this._data.clone(),e},t}();exports.BufferedBlockAlgorithm=o;var s=function(i){function n(t){e["default"](this,n),i.call(this),this.blockSize=16,this.cfg=t,this.reset()}return t["default"](n,i),n.prototype.reset=function(){i.prototype.reset.call(this),this._doReset()},n.prototype._doReset=function(){},n.prototype.update=function(e){return this._append(e),this._process(),this},n.prototype.finalize=function(e){if(e)this._append(e);var t=this._doFinalize();return t},n._createHelper=function(e){return function(t,i){return new e(i).finalize(t)}},n._createHmacHelper=function(e){return function(t,i){return new l(e,i).finalize(t)}},n}(o);exports.Hasher=s;var l=function(){function t(i,n){e["default"](this,t);var r=this._hasher=new i;if("string"==typeof n)n=a.parse(n);var o=r.blockSize,s=4*o;if(n.sigBytes>s)n=r.finalize(n);n.clamp();for(var l=this._oKey=n.clone(),u=this._iKey=n.clone(),A=l.words,B=u.words,c=0;o>c;c++)A[c]^=1549556828,B[c]^=909522486;l.sigBytes=u.sigBytes=s,this.reset()}return t.prototype.reset=function(){var e=this._hasher;e.reset(),e.update(this._iKey)},t.prototype.update=function(e){return this._hasher.update(e),this},t.prototype.finalize=function(e){var t=this._hasher,i=t.finalize(e);t.reset();var n=t.finalize(this._oKey.clone().concat(i));return n},t}();exports.HMAC=l}),define("bce-sdk-js/strings",["exports","module"],function(exports,module){var e={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"};module.exports={normalize:function(t,i){var n=encodeURIComponent(t);if(n=n.replace(/[!'\(\)\*]/g,function(t){return e[t]}),i===!1)n=n.replace(/%2F/gi,"/");return n},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")}}}),define("bce-sdk-js/risk_client",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./bce_base_client","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype.getUserStatus=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={userId:e},this.sendRequest("GET","/userstatus",t)},n.prototype.unban=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={userId:e},this.sendRequest("PUT","/unban",t)},n}(r["default"]);module.exports=a}),define("bce-sdk-js/mime.types",["exports","module"],function(exports,module){var e={};module.exports={guess:function(t){if(!t||!t.length)return"application/octet-stream";if("."===t[0])t=t.substr(1);return e[t.toLowerCase()]||"application/octet-stream"}}}),define("bce-sdk-js/vendor/Buffer",["exports","module","babel-runtime/helpers/class-call-check"],function(exports,module,e){var t=function(){function t(){e["default"](this,t)}return t.byteLength=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},t}();module.exports=t}),define("bce-sdk-js/http_client",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","promise","./vendor/events","./vendor/Buffer","./vendor/helper","./vendor/querystring","./headers","./date"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A){var B=n["default"](i),c=n["default"](r),C=n["default"](o),D=n["default"](s),d=n["default"](u),f=n["default"](A),h=function(i){function n(e){t["default"](this,n),i.call(this),this.config=e,this._req=null}return e["default"](n,i),n.prototype.sendRequest=function(e,t,i,n,r,a,o){var s,l=this,u=this._getRequestUrl(t,r),A=(s={},s[d["default"].X_BCE_DATE]=D["default"].toUTCString(f["default"].newDate()),s[d["default"].CONTENT_TYPE]="application/json; charset=UTF-8",s[d["default"].HOST]=/^\w+:\/\/([^\/]+)/.exec(this.config.endpoint)[1],s);if(n&&n["content-type"])n[d["default"].CONTENT_TYPE]=n["content-type"],delete n["content-type"];var C=B["default"].extend(A,n);if(!C.hasOwnProperty(d["default"].CONTENT_LENGTH)){var h=this._guessContentLength(i);if(0!==h||!/GET|HEAD/i.test(e))C[d["default"].CONTENT_LENGTH]=h}var E=a||B["default"].noop;try{return c["default"].resolve(E(this.config.credentials,e,t,r,C)).then(function(t,n){if(t)C[d["default"].AUTHORIZATION]=t;if(n)C[d["default"].X_BCE_DATE]=n;return l._doRequest(e,u,B["default"].omit(C,d["default"].CONTENT_LENGTH,d["default"].HOST),i,o)})}catch(p){return c["default"].reject(p)}},n.prototype.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return null}},n.prototype._doRequest=function(e,t,i,n,r){var a=this;return new c["default"](function(r,o){var s=new XMLHttpRequest;try{s.open(e,t,!0);for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];s.setRequestHeader(l,u)}}catch(A){return o(A)}if(s.onerror=o,s.onabort=function(){return o(new Error("xhr aborted"))},s.onreadystatechange=function(){if(4===s.readyState){var e=s.status;if(1223===e)e=204;var i=s.getResponseHeader("Content-Type"),n=/application\/json/.test(i),l=n?a.parseJSON(s.responseText):s.responseText;if(!l)l={location:t};var u=e>=200&&300>e||304===e;if(u){var A=a._fixHeaders(s.getAllResponseHeaders());r({http_headers:A,body:l})}else o({status_code:e,message:l.message||"<message>",code:l.code||"<code>",request_id:l.requestId||"<request_id>"})}},s.upload)B["default"].each(["progress","error","abort"],function(e){s.upload.addEventListener(e,function(t){if("function"==typeof a.emit)a.emit(e,t)},!1)});s.send(n),a._req={xhr:s}})},n.prototype._guessContentLength=function(e){if(null==e||""===e)return 0;else if(B["default"].isString(e))return C["default"].byteLength(e);else if("undefined"!=typeof Blob&&e instanceof Blob)return e.size;else if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return e.byteLength;throw new Error("No Content-Length is specified.")},n.prototype._fixHeaders=function(e){var t={};if(e)B["default"].each(e.split(/\r?\n/),function(e){var i=e.indexOf(":");if(-1!==i){var n=e.substring(0,i).toLowerCase(),r=e.substring(i+1).replace(/^\s+|\s+$/,"");if("etag"===n)r=r.replace(/"/g,"");t[n]=r}});return t},n.prototype.buildQueryString=function(e){var t=l.stringify(e);return t.replace(/[()'!~.*\-_]/g,function(e){return"%"+e.charCodeAt().toString(16)})},n.prototype._getRequestUrl=function(e,t){var i=e,n=this.buildQueryString(t);if(n)i+="?"+n;return this.config.endpoint+i},n}(a.EventEmitter);module.exports=h}),define("bce-sdk-js/headers",["exports","module"],function(exports,module){module.exports={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",CONTENT_MD5:"Content-MD5",CONTENT_ENCODING:"Content-Encoding",CONTENT_DISPOSITION:"Content-Disposition",ETAG:"ETag",CONNECTION:"Connection",HOST:"Host",USER_AGENT:"User-Agent",CACHE_CONTROL:"Cache-Control",EXPIRES:"Expires",AUTHORIZATION:"Authorization",X_BCE_DATE:"x-bce-date",X_BCE_ACL:"x-bce-acl",X_BCE_REQUEST_ID:"x-bce-request-id",X_BCE_CONTENT_SHA256:"x-bce-content-sha256",X_BCE_OBJECT_ACL:"x-bce-object-acl",X_BCE_OBJECT_GRANT_READ:"x-bce-object-grant-read",X_HTTP_HEADERS:"http_headers",X_BODY:"body",X_STATUS_CODE:"status_code",X_MESSAGE:"message",X_CODE:"code",X_REQUEST_ID:"request_id",SESSION_TOKEN:"x-bce-security-token",X_VOD_MEDIA_TITLE:"x-vod-media-title",X_VOD_MEDIA_DESCRIPTION:"x-vod-media-description",ACCEPT_ENCODING:"accept-encoding",ACCEPT:"accept"}}),define("bce-sdk-js/date",["exports","module"],function(exports,module){module.exports={delta:0,setDelta:function(e){this.delta=1e3*e},now:function(){var e=(new Date).getTime();return e+this.delta},newDate:function(e){var t=e?1e3*e:this.now();return new Date(t)}}}),define("bce-sdk-js/config",["exports","module"],function(exports,module){module.exports={DEFAULT_SERVICE_DOMAIN:"baidubce.com",DEFAULT_CONFIG:{protocol:"http",region:"bj"}}}),define("bce-sdk-js/vendor/path",["exports","module","underscore","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){function i(e){return l.exec(e).slice(1)}function n(e,t){for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];if("."===r)e.splice(n,1);else if(".."===r)e.splice(n,1),i++;else if(i)e.splice(n,1),i--}if(t)for(;i--;i)e.unshift("..");return e}function r(e){return i(e)[3]}function a(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];return o(s["default"].filter(t,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function o(e){var t="/"===e.charAt(0),i="/"===u(e,-1);if(e=n(s["default"].filter(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t)e=".";if(e&&i)e+="/";return(t?"/":"")+e}var s=t["default"](e),l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,u="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){if(0>t)t=e.length+t;return e.substr(t,i)};module.exports={extname:r,join:a,normalize:o}}),define("bce-sdk-js/bos_client",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","./vendor/path","./vendor/util","./vendor/Buffer","./headers","./strings","./http_client","./bce_base_client","./mime.types"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A,B){var c=n["default"](i),C=n["default"](r),D=n["default"](a),d=n["default"](o),f=n["default"](s),h=n["default"](l),E=n["default"](u),p=n["default"](A),F=n["default"](B),m=5368709120,g=2048,H=function(i){function n(e){t["default"](this,n),i.call(this,e,"bos",!0),this._httpAgent=null}return e["default"](n,i),n.prototype.listBuckets=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.sendRequest("GET",e)},n.prototype.createBucket=function(e){var t=arguments.length<=1||void 0===arguments[1]?"bj":arguments[1],i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.bucketName=e,i.body=JSON.stringify({locationConstraint:t}),this.sendRequest("PUT",i)},n.prototype.listImageStyles=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.styles="",t.bucketName=e,this.sendRequest("GET",t)},n.prototype.getImageStyle=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.params)i.params={};return i.params.style=t,i.bucketName=e,this.sendRequest("GET",i)},n.prototype.setImageStyle=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.params)i.params={};return i.params.style=t.name,i.params.format="commands",i.bucketName=e,i.body=JSON.stringify(t),this.sendRequest("PUT",i)},n.prototype.removeImageStyle=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.params)i.params={};return i.params.style=t,i.bucketName=e,this.sendRequest("DELETE",i)},n.prototype.setBucketMirroring=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.params)i.params={};return i.params.mirroring="",i.bucketName=e,i.body=JSON.stringify({bucketMirroringConfiguration:t}),this.sendRequest("PUT",i)},n.prototype.getBucketMirroring=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.mirroring="",t.bucketName=e,this.sendRequest("GET",t)},n.prototype.removeBucketMirroring=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.mirroring="",t.bucketName=e,this.sendRequest("DELETE",t)},n.prototype.getBucketAcl=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.bucketName=e,t.params.acl="",this.sendRequest("GET",t)},n.prototype.setBucketCannedAcl=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.headers)i.headers={};if(!i.params)i.params={};return i.headers[f["default"].X_BCE_ACL]=t,i.bucketName=e,i.params.acl="",this.sendRequest("PUT",i)},n.prototype.removeBucketCors=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.cors="",t.bucketName=e,this.sendRequest("DELETE",t)},n.prototype.getBucketCors=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.cors="",t.bucketName=e,this.sendRequest("GET",t)},n.prototype.setBucketCors=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.params)i.params={};return i.params.cors="",i.bucketName=e,i.body=JSON.stringify({corsConfiguration:t}),this.sendRequest("PUT",i)},n.prototype.getBucketLogging=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.logging="",t.bucketName=e,this.sendRequest("GET",t)},n.prototype.setBucketLogging=function(e,t,i){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!n.params)n.params={};return n.params.logging="",n.bucketName=e,n.body=JSON.stringify({targetBucket:t,targetPrefix:i}),this.sendRequest("PUT",n)},n.prototype.getBucketLifecycle=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.lifecycle="",t.bucketName=e,this.sendRequest("GET",t)},n.prototype.setBucketLifecycle=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!i.params)i.params={};return i.params.lifecycle="",i.bucketName=e,i.body=JSON.stringify({rule:t}),this.sendRequest("PUT",i)},n.prototype.removeBucketLifecycle=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.lifecycle="",t.bucketName=e,this.sendRequest("DELETE",t)},n.prototype.removeBucketLogging=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!t.params)t.params={};return t.params.logging="",t.bucketName=e,this.sendRequest("DELETE",t)},n.prototype.listObjects=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t.bucketName=e,!t.params)t.params=c["default"].extend({maxKeys:1e3},c["default"].pick(t,"maxKeys","prefix","marker","delimiter"));return this.sendRequest("GET",t)},n.prototype.deleteObject=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.bucketName=e,i.key=t,this.sendRequest("DELETE",i)},n.prototype.deleteMultipleObjects=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(t=c["default"].map(t,function(e){return{key:e}}),!i.params)i.params={};return i.params["delete"]="",i.body=JSON.stringify({objects:t}),i.bucketName=e,this.sendRequest("POST",i)},n.prototype.copyObject=function(e,t,i,n){var r=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];if(!r.headers)r.headers={};var a=!1;if(c["default"].some(r.headers,function(e,t){if(0===t.indexOf("x-bce-meta-"))return a=!0,!0;else return void 0}),r.headers["x-bce-copy-source"]=h["default"].normalize(D["default"].format("/%s/%s",e,t),!1),r.headers.hasOwnProperty("ETag"))r.headers["x-bce-copy-source-if-match"]=r.headers.ETag;return r.headers["x-bce-metadata-directive"]=a?"replace":"copy",r.bucketName=i,r.key=n,this.sendRequest("PUT",r)},n.prototype.putObject=function(e,t,i,n){if(!t)throw new TypeError("key should not be empty.");return n=this._checkOptions(n||{}),this.sendRequest("PUT",{bucketName:e,key:t,body:i,headers:n.headers,config:n.config})},n.prototype.putObjectFromBlob=function(e,t,i,n){var r,a=(r={},r[f["default"].CONTENT_LENGTH]=i.size,r);return n=c["default"].extend(a,n),this.putObject(e,t,i,n)},n.prototype.getObjectMetadata=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.bucketName=e,i.key=t,this.sendRequest("HEAD",i)},n.prototype.initiateMultipartUpload=function(e,t){var i,n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=(i={},i[f["default"].CONTENT_TYPE]=n[f["default"].CONTENT_TYPE]||F["default"].guess(C["default"].extname(t)),i);return this.sendRequest("POST",{bucketName:e,key:t,params:{uploads:""},headers:r,config:n.config})},n.prototype.abortMultipartUpload=function(e,t,i){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return n.bucketName=e,n.key=t,n.params={uploadId:i},this.sendRequest("DELETE",n)},n.prototype.completeMultipartUpload=function(e,t,i,n){var r,a=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=(r={},r[f["default"].CONTENT_TYPE]="application/json; charset=UTF-8",r);return a=this._checkOptions(c["default"].extend(o,a)),this.sendRequest("POST",{bucketName:e,key:t,body:JSON.stringify({parts:n}),headers:a.headers,params:{uploadId:i},config:a.config})},n.prototype.uploadPartFromBlob=function(e,t,i,n,r,a,o){var s;if(a.size!==r)throw new TypeError(D["default"].format("Invalid partSize %d and data length %d",r,a.size));var l=(s={},s[f["default"].CONTENT_LENGTH]=r,s[f["default"].CONTENT_TYPE]="application/octet-stream",s);return o=this._checkOptions(c["default"].extend(l,o)),this.sendRequest("PUT",{bucketName:e,key:t,body:a,headers:o.headers,params:{partNumber:n,uploadId:i},config:o.config})},n.prototype.listParts=function(e,t,i,n){if(!i)throw new TypeError("uploadId should not empty");var r=["maxParts","partNumberMarker","uploadId"];if(!n.params)n.params=c["default"].pick(n||{},r);return n.params.uploadId=i,n.bucketName=e,n.key=t,this.sendRequest("GET",n)},n.prototype.listMultipartUploads=function(e,t){var i=["delimiter","maxUploads","keyMarker","prefix","uploads"];if(!t.params)t.params=c["default"].pick(t||{},i);return t.params.uploads="",t.bucketName=e,this.sendRequest("GET",t)},n.prototype.appendObject=function(e,t,i,n,r){if(!t)throw new TypeError("key should not be empty.");r=this._checkOptions(r||{});var a={append:""};if(c["default"].isNumber(n))a.offset=n;return this.sendRequest("POST",{bucketName:e,key:t,body:i,headers:r.headers,params:a,config:r.config})},n.prototype.appendObjectFromBlob=function(e,t,i,n,r){var a,o=(a={},a[f["default"].CONTENT_LENGTH]=i.size,a);return r=c["default"].extend(o,r),this.appendObject(e,t,i,n,r)},n.prototype.sendRequest=function(e,t){var i={bucketName:null,key:null,body:null,headers:{},params:{},config:{},outputStream:null},n=c["default"].extend(i,t),r=c["default"].extend({},this.config,n.config),a=C["default"].normalize(["/v1",h["default"].normalize(n.bucketName||""),h["default"].normalize(n.key||"",!1)].join("/"));if(r.sessionToken)n.headers[f["default"].SESSION_TOKEN]=r.sessionToken;return this.sendHTTPRequest(e,a,n,r)},n.prototype.sendHTTPRequest=function(e,t,i,n){var r=this,a=this._httpAgent=new E["default"](n),o={httpMethod:e,resource:t,args:i,config:n};c["default"].each(["progress","error","abort"],function(e){a.on(e,function(t){r.emit(e,t,o)})});var s=this._httpAgent.sendRequest(e,t,i.body,i.headers,i.params,c["default"].bind(this.createSignature,this),i.outputStream);return s.abort=function(){if(a._req&&a._req.xhr){var e=a._req.xhr;e.abort()}},s},n.prototype._checkOptions=function(e,t){var i={config:e.config||{},headers:this._prepareObjectHeaders(e),params:c["default"].pick(e,t||[])};return i},n.prototype._prepareObjectHeaders=function(e){var t={};c["default"].each([f["default"].CONTENT_LENGTH,f["default"].CONTENT_ENCODING,f["default"].CONTENT_MD5,f["default"].X_BCE_CONTENT_SHA256,f["default"].CONTENT_TYPE,f["default"].CONTENT_DISPOSITION,f["default"].ETAG,f["default"].SESSION_TOKEN,f["default"].CACHE_CONTROL,f["default"].EXPIRES,f["default"].X_BCE_OBJECT_ACL,f["default"].X_BCE_OBJECT_GRANT_READ],function(e){t[e]=!0});var i=0,n=c["default"].pick(e,function(e,n){if(t[n])return!0;else if(/^x\-bce\-meta\-/.test(n))return i+=d["default"].byteLength(n)+d["default"].byteLength(""+e),!0});if(i>g)throw new TypeError("Metadata size should not be greater than "+g+".");if(n.hasOwnProperty(f["default"].CONTENT_LENGTH)){var r=n[f["default"].CONTENT_LENGTH];if(0>r)throw new TypeError("content_length should not be negative.");else if(r>m)throw new TypeError("Object length should be less than "+m+". Use multi-part upload instead.")}if(n.hasOwnProperty("ETag")){var a=n.ETag;if(!/^"/.test(a))n.ETag=D["default"].format('"%s"',a)}if(!n.hasOwnProperty(f["default"].CONTENT_TYPE))n[f["default"].CONTENT_TYPE]="application/octet-stream";return n},n}(p["default"]);module.exports=H}),define("bce-sdk-js/bcc_client",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./bce_base_client","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n){var r=n["default"](i),a=function(i){function n(e){t["default"](this,n),i.call(this,e,"bcc",!0),this.version="v2"}return e["default"](n,i),n.prototype.listZone=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.xGET("/zone",e)},n}(r["default"]);module.exports=a}),define("bce-sdk-js/bcc/Snapshot",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","../bce_base_client","./helper"],function(exports,module,e,t,i,n,r,a){var o=n["default"](i),s=n["default"](r),l=n["default"](a),u=function(i){function n(e){t["default"](this,n),i.call(this,e,"bcc",!0),this.version="v2"}return e["default"](n,i),n.prototype.list=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!e.params)e.params=o["default"].extend({maxKeys:1e3},o["default"].pick(e,"maxKeys","marker","volumeId"));return this.xGET("/snapshot",e)},n.prototype.get=function(e){
var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xGET("/snapshot/"+e,t)},n.prototype.release=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xDELETE("/snapshot/"+e,t)},n.prototype.create=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={clientToken:l["default"].getClientToken()},t.body=JSON.stringify(e),this.xPOST("/snapshot",t)},n}(s["default"]);module.exports=u}),define("bce-sdk-js/bcc/SecurityGroup",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","../bce_base_client","./helper"],function(exports,module,e,t,i,n,r,a){var o=n["default"](i),s=n["default"](r),l=n["default"](a),u=function(i){function n(e){t["default"](this,n),i.call(this,e,"bcc",!0),this.version="v2"}return e["default"](n,i),n.prototype.list=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!e.params)e.params=o["default"].extend({maxKeys:1e3},o["default"].pick(e,"maxKeys","marker","instanceId"));return this.xGET("/securityGroup",e)},n.prototype.get=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xGET("/securityGroup/"+e,t)},n.prototype.release=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xDELETE("/securityGroup/"+e,t)},n.prototype.authorizeRule=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={authorizeRule:"",clientToken:l["default"].getClientToken()},i.body=JSON.stringify({rule:t}),this.xPUT("/securityGroup/"+e,i)},n.prototype.revokeRule=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={revokeRule:"",clientToken:l["default"].getClientToken()},i.body=JSON.stringify({rule:t}),this.xPUT("/securityGroup/"+e,i)},n.prototype.create=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={clientToken:l["default"].getClientToken()},t.body=JSON.stringify(e),this.xPOST("/securityGroup",t)},n}(s["default"]);module.exports=u}),define("bce-sdk-js/bcc/Instance",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","../bce_base_client","./helper"],function(exports,module,e,t,i,n,r,a){var o=n["default"](i),s=n["default"](r),l=n["default"](a),u=function(i){function n(e){t["default"](this,n),i.call(this,e,"bcc",!0),this.version="v2"}return e["default"](n,i),n.prototype.list=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!e.params)e.params=o["default"].extend({maxKeys:1e3},o["default"].pick(e,"maxKeys","marker","internalIp","dedicatedHostId","zoneName"));return this.xGET("/instance",e)},n.prototype.listInstances=function(){return this.list.apply(this,arguments)},n.prototype.get=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xGET("/instance/"+e,t)},n.prototype.start=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={start:""},this.xPUT("/instance/"+e,t)},n.prototype.stop=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={stop:""},i.body=JSON.stringify({forceStop:t}),this.xPUT("/instance/"+e,i)},n.prototype.reboot=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={reboot:""},i.body=JSON.stringify({forceStop:t}),this.xPUT("/instance/"+e,i)},n.prototype.changePass=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={changePass:""},i.body=JSON.stringify({adminPass:t}),this.xPUT("/instance/"+e,i)},n.prototype.modifyAttribute=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={modifyAttribute:""},i.body=JSON.stringify(t),this.xPUT("/instance/"+e,i)},n.prototype.rebuild=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={rebuild:""},i.body=JSON.stringify(t),this.xPUT("/instance/"+e,i)},n.prototype.release=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xDELETE("/instance/"+e,t)},n.prototype.resize=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={resize:"",clientToken:l["default"].getClientToken()},i.body=JSON.stringify(t),this.xPUT("/instance/"+e,i)},n.prototype.bindSecurityGroup=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={bind:""},i.body=JSON.stringify({securityGroupId:t}),this.xPUT("/instance/"+e,i)},n.prototype.unbindSecurityGroup=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={unbind:""},i.body=JSON.stringify({securityGroupId:t}),this.xPUT("/instance/"+e,i)},n.prototype.getVNCUrl=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xGET("/instance/${instanceId}/vnc",t)},n.prototype.renew=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={purchaseReserved:"",clientToken:l["default"].getClientToken()},i.body=JSON.stringify(t),this.xPUT("/instance/"+e,i)},n.prototype.create=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={clientToken:l["default"].getClientToken()},t.body=JSON.stringify(e),this.xPOST("/instance",t)},n}(s["default"]);module.exports=u}),define("bce-sdk-js/bcc/helper",["exports","module"],function(exports,module){module.exports={getClientToken:function(){var e=Date.now().toString(16)+(Number.MAX_VALUE*Math.random()).toString(16).substr(0,8);return e}}}),define("bce-sdk-js/bcc/Image",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","../bce_base_client","./helper"],function(exports,module,e,t,i,n,r,a){var o=n["default"](i),s=n["default"](r),l=n["default"](a),u=function(i){function n(e){t["default"](this,n),i.call(this,e,"bcc",!0),this.version="v2"}return e["default"](n,i),n.prototype.list=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!e.params)e.params=o["default"].extend({maxKeys:1e3,imageType:"All"},o["default"].pick(e,"maxKeys","marker","imageType"));return this.xGET("/image",e)},n.prototype.get=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xGET("/image/"+e,t)},n.prototype.release=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xDELETE("/image/"+e,t)},n.prototype.create=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={clientToken:l["default"].getClientToken()},t.body=JSON.stringify(e),this.xPOST("/image",t)},n}(s["default"]);module.exports=u}),define("bce-sdk-js/vendor/events",["exports","babel-runtime/helpers/class-call-check"],function(exports,e){exports.__esModule=!0;var t=function(){function t(){e["default"](this,t),this.__events={}}return t.prototype.emit=function(e){var t=this.__events[e];if(!t)return!1;for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;i>r;r++)n[r-1]=arguments[r];for(var a=0;a<t.length;a++){var o=t[a];try{o.apply(this,n)}catch(s){}}return!0},t.prototype.on=function(e,t){if(!this.__events[e])this.__events[e]=[t];else this.__events[e].push(t)},t}();exports.EventEmitter=t}),define("bce-sdk-js/bce_base_client",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","promise","./vendor/events","./vendor/util","./headers","./config","./auth","./http_client"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A){var B=n["default"](i),c=n["default"](r),C=n["default"](o),D=n["default"](s),d=n["default"](l),f=n["default"](u),h=n["default"](A),E=function(i){function n(e,r,a){t["default"](this,n),i.call(this),this.config=B["default"].extend({},d["default"].DEFAULT_CONFIG,e),this.serviceId=r,this.regionSupported=!!a,this.config.endpoint=this._computeEndpoint(),this._httpAgent=null}return e["default"](n,i),n.prototype._computeEndpoint=function(){if(this.config.endpoint)return this.config.endpoint;if(this.regionSupported)return C["default"].format("%s://%s.%s.%s",this.config.protocol,this.serviceId,this.config.region,d["default"].DEFAULT_SERVICE_DOMAIN);else return C["default"].format("%s://%s.%s",this.config.protocol,this.serviceId,d["default"].DEFAULT_SERVICE_DOMAIN)},n.prototype.createSignature=function(e,t,i,n,r){function a(){var a=new f["default"](e.ak,e.sk);return a.generateAuthorization(t,i,n,r)}try{return c["default"].resolve(a())}catch(o){return c["default"].reject(o)}},n.prototype.sendRequest=function(e,t,i){var n={body:null,headers:{},params:{},config:{},outputStream:null},r=B["default"].extend(n,i),a=B["default"].extend({},this.config,r.config);if(a.sessionToken)r.headers[D["default"].SESSION_TOKEN]=a.sessionToken;return this.sendHTTPRequest(e,t,r,a)},n.prototype.sendHTTPRequest=function(e,t,i,n){var r=this,a=this._httpAgent=new h["default"](n),o=B["default"].bind(this.createSignature,this);return B["default"].each(["progress","error","abort"],function(e){return a.on(e,function(t){return r.emit(e,t)})}),this._httpAgent.sendRequest(e,t,i.body,i.headers,i.params,o,i.outputStream)},n.prototype.buildUrl=function(e){if(this.version)return"/"+this.version+e;else return e},n.prototype.xPOST=function(e,t){var i=this.buildUrl(e);return this.sendRequest("POST",i,t)},n.prototype.xGET=function(e,t){var i=this.buildUrl(e);return this.sendRequest("GET",i,t)},n.prototype.xPUT=function(e,t){var i=this.buildUrl(e);return this.sendRequest("PUT",i,t)},n.prototype.xDELETE=function(e,t){var i=this.buildUrl(e);return this.sendRequest("DELETE",i,t)},n}(a.EventEmitter);module.exports=E}),define("bce-sdk-js/bcc/Disk",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","../bce_base_client","./helper"],function(exports,module,e,t,i,n,r,a){var o=n["default"](i),s=n["default"](r),l=n["default"](a),u=function(i){function n(e){t["default"](this,n),i.call(this,e,"bcc",!0),this.version="v2"}return e["default"](n,i),n.prototype.list=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!e.params)e.params=o["default"].extend({maxKeys:1e3},o["default"].pick(e,"maxKeys","marker","instanceId","zoneName"));return this.xGET("/volume",e)},n.prototype.get=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xGET("/volume/"+e,t)},n.prototype.attach=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={attach:""},i.body=JSON.stringify({instanceId:t}),this.xPUT("/volume/"+e,i)},n.prototype.detach=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={detach:""},i.body=JSON.stringify({instanceId:t}),this.xPUT("/volume/"+e,i)},n.prototype.release=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.xDELETE("/volume/"+e,t)},n.prototype.resize=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={resize:"",clientToken:l["default"].getClientToken()},i.body=JSON.stringify(t),this.xPUT("/volume/"+e,i)},n.prototype.rollback=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={rollback:""},i.body=JSON.stringify({snapshotId:t}),this.xPUT("/volume/"+e,i)},n.prototype.renew=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i.params={purchaseReserved:"",clientToken:l["default"].getClientToken()},i.body=JSON.stringify(t),this.xPUT("/volume/"+e,i)},n.prototype.create=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.params={clientToken:l["default"].getClientToken()},t.body=JSON.stringify(e),this.xPOST("/volume",t)},n}(s["default"]);module.exports=u}),define("bce-sdk-js/vendor/helper",["exports","module"],function(exports,module){function e(e){if(10>e)return"0"+e;else return e}function t(t){if(t.toISOString)return t.toISOString();else return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}function i(e){var i=t(e);return i.replace(/\.\d+Z$/,"Z")}module.exports={toISOString:t,toUTCString:i}}),define("bce-sdk-js/auth",["exports","module","babel-runtime/helpers/class-call-check","underscore","babel-runtime/helpers/interop-require-default","./vendor/helper","./vendor/util","./vendor/crypto","./headers","./strings","./date"],function(exports,module,e,t,i,n,r,a,o,s,l){var u=i["default"](t),A=i["default"](n),B=i["default"](r),c=i["default"](a),C=i["default"](o),D=i["default"](s),d=i["default"](l),f=function(){function t(i,n){e["default"](this,t),this.ak=i,this.sk=n}return t.prototype.generateAuthorization=function(e,t,i,n,r,a,o){var s=d["default"].newDate(r),l=B["default"].format("bce-auth-v1/%s/%s/%d",this.ak,A["default"].toUTCString(s),a||1800),u=this.hash(l,this.sk),c=this.uriCanonicalization(t),C=this.queryStringCanonicalization(i||{}),D=this.headersCanonicalization(n||{},o),f=D[0],h=D[1],E=B["default"].format("%s\n%s\n%s\n%s",e,c,C,f),p=this.hash(E,u);if(h.length)return B["default"].format("%s/%s/%s",l,h.join(";"),p);else return B["default"].format("%s//%s",l,p)},t.prototype.uriCanonicalization=function(e){return e},t.prototype.queryStringCanonicalization=function(e){var t=[];return u["default"].each(u["default"].keys(e),function(i){if(i.toLowerCase()!==C["default"].AUTHORIZATION.toLowerCase()){var n=null==e[i]?"":e[i];t.push(i+"="+D["default"].normalize(n))}}),t.sort(),t.join("&")},t.prototype.headersCanonicalization=function(e,t){if(!t||!t.length)t=[C["default"].HOST,C["default"].CONTENT_MD5,C["default"].CONTENT_LENGTH,C["default"].CONTENT_TYPE];var i={};u["default"].each(t,function(e){i[e.toLowerCase()]=!0});var n=[];u["default"].each(u["default"].keys(e),function(t){var r=e[t];if(r=u["default"].isString(r)?D["default"].trim(r):r,null!=r&&""!==r)if(t=t.toLowerCase(),/^x\-bce\-/.test(t)||i[t]===!0)n.push(B["default"].format("%s:%s",D["default"].normalize(t),D["default"].normalize(r)))}),n.sort();var r=[];return u["default"].each(n,function(e){r.push(e.split(":")[0])}),[n.join("\n"),r]},t.prototype.hash=function(e,t){var i=c["default"].createHmac("sha256",t);return i.update(e),i.digest("hex")},t}();module.exports=f}),define("bat-ria/mvc/Performance",["exports","module","babel-runtime/helpers/class-call-check"],function(exports,module,e){var t=function(){function t(){e["default"](this,t),this._marks={},this._measures=[]}return t.prototype.mark=function(e){this._marks[e]=(new Date).getTime()},t.prototype.measure=function(e,t,i){var n=this._marks[t],r=this._marks[i];if(n&&r){var a=r-n,o="measure",s=0;this._measures.push({duration:a,entryType:o,name:e,startTime:s})}},t.prototype.getEntriesByType=function(e){if("measure"===e)return this._measures;else return[]},t.prototype.clearMarks=function(){this._marks={}},t.prototype.clearMeasures=function(){this._measures=[]},t}();module.exports=t}),define("bat-ria/io/tracing",["exports","jquery","babel-runtime/helpers/interop-require-default"],function(exports,e,t){function i(e){var t=/^ticket\.bce(test)?\.baidu\.com$/.test(location.hostname);if(!t)if(o.push.apply(o,e),!(o.length<10))n["default"].ajax({method:"POST",url:"/api/log/csi",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8","X-Request-By":"ERApplication"},data:JSON.stringify(o)}),o.length=0}exports.__esModule=!0;var n=t["default"](e),r=function(e,t,n){var r=t.getRequestOption("url"),a=t.getResponseHeader("x-bce-request-id")||"nil",o=[e,"status="+t.status,"readyState="+t.readyState,"responseText="+t.responseText,"userAgent="+navigator.userAgent].concat(t.getAllResponseHeaders()),s=[{type:n?"DIALOG_NOT_ALERT":"DIALOG_ALERT",content:o.join("; "),url:r,request_id:a}];i(s)};exports.failedXhr=r;var a=function(){i([{type:"SHOW_LOADING",url:location.hash}])};exports.loadingIndicator=a;var o=[]}),define("bat-ria/io/serverIO",["exports","module","er/ajax","babel-runtime/helpers/interop-require-default","er/Deferred","esui/lib","underscore","esui/Dialog","inf-i18n","promise","jquery","./mfa_check","./tracing","../ui/loading"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A,B){function c(){var e="/index.html";if("function"==typeof J.hooks.filterIndexUrl)e=J.hooks.filterIndexUrl(e);document.location.href=e}function C(e){var t=this;if("function"==typeof J.hooks.beforeSuccess)e=J.hooks.beforeSuccess(e,t)||e;if("true"!==e.success&&e.success!==!0){var i=function(){var i=e.message,n=void 0,r=void 0,a=function(){},o=!0;if(("MFARequired"===e.code||"MFACheckedFailed"===e.code)&&!e.cancelled)if(e.message.detail)return J.hooks.afterComplete&&J.hooks.afterComplete(e,t),{v:f(t,e)};if(i.global)n=g["default"]("系统提示"),r=t.getRequestOption("url").split("/")[2].toUpperCase()+"："+i.global,e.requestId&&(r=g["default"]("错误原因：")+r+'<br/><a target="_blank" href="http://ticket.bce.baidu.com/?#/ticket/create~requestId='+e.requestId+'">'+g["default"]("去提交工单")+"</a>"),a=t.getRequestOption("globalFailCallback")||function(){};else if(i.noSession)n=g["default"]("系统超时"),r=i.noSession,a=c;else if("undefined"!=typeof i.redirect)if(""===i.redirect)n=g["default"]("登录超时"),r=g["default"]("登录超时，请重新登录！"),a=function(){window.location.reload(!0)};else{y["default"].hide(),d(null,t);var s=i.redirect,l=s.split("#");if("/"===s.substring(0,1)&&2===l.length)window.location.href=l[0]+location.search+"#"+l[1];else window.location.href=s;return{v:void 0}}else if(!i.field)n=g["default"]("系统提示"),r=g["default"]("请求失败(未知错误)");else o=!1;var u=!!t.getRequestOption("x-silent");if(o&&!L){if(/(console\.bce|qasandbox\.bcetest)\.baidu\.com$/.test(location.host))v["default"].failedXhr(r,t,u);if(t.status<=0)return{v:E["default"].rejected()};if(!u){L=m["default"].alert({title:F["default"].escape(n),content:r,onok:function(){a(),L=null}});var A=['<div class="${prefix}-icon ${prefix}-icon-${type}"></div>','<div class="${prefix}-text">${content}</div>'].join("");L.setContent(p["default"].format(A,{type:"warning",content:r,prefix:L.helper.getPrimaryClassName()}))}}if("function"==typeof J.hooks.afterFailure)J.hooks.afterFailure(i,t);return d(i,t),{v:E["default"].rejected(i)}}();if("object"==typeof i)return i.v}if("function"==typeof J.hooks.afterSuccess)J.hooks.afterSuccess(e,t);var n=e.page||e.result;return d(n,t),E["default"].resolved(n)}function D(){var e=this;if(d(null,e),"function"==typeof J.hooks.beforeFailure){var t=J.hooks.beforeFailure(e)||b;return C.call(this,t)}return C.call(this,b)}function d(e,t){if("function"==typeof J.hooks.afterComplete)J.hooks.afterComplete(e,t);return e}function f(e,t){var i=I["default"].getImpl(e,t);return i.getAuthorizationCode().then(function(t){return new H["default"](function(i,n){G["default"].ajax({method:"POST",url:e.getRequestOption("url"),dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8","X-Request-By":"ERApplication","Bce-MFA-Code":t},data:JSON.stringify(e.getRequestOption("data")),beforeSend:function(t){h["default"].hooks.beforeSend(t,{url:e.getRequestOption("url"),region:e.getRequestOption("region")})},success:function(e){i(e)},error:n})}).then(function(t){return i.hide(),C.call(e,t)},function(t){return i.hide(),D.call(e,t)})})["catch"](function(){return t.cancelled=!0,i.hide(),C.call(e,t)})}var h=t["default"](e),E=t["default"](i),p=t["default"](n),F=t["default"](r),m=t["default"](a),g=t["default"](o),H=t["default"](s),G=t["default"](l),I=t["default"](u),v=t["default"](A),y=t["default"](B),J={};J.hooks={};var L=void 0,M=0,b={success:"false",message:{global:g["default"]("服务器错误")}};J.request=function(e,t,i){var n=null;if("string"==typeof window.G_CONSOLE_ENDPOINT&&window.G_CONSOLE_ENDPOINT)n={withCredentials:!0};var r={url:e,data:t,dataType:"json",xhrFields:n,contentType:"application/json"};if(i=i?F["default"].defaults(i,r):r,i.xhrId="_xhr_"+ ++M,"function"==typeof J.hooks.beforeRequest)J.hooks.beforeRequest(i);return h["default"].request(i).then(C,D)},J.get=function(e,t,i){return this.request(e,t,{method:"GET"})},J.post=function(e,t,i){return this.request(e,t,{method:"POST"})},module.exports=J}),define("bat-ria/io/mfa_check",["exports","module","promise","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var i=t["default"](e);module.exports={_factory:null,getImpl:function(e,t){var n=this._factory;if(!n)return i["default"].reject();else return n(e,t)},registerImpl:function(e){this._factory=e}}}),define("bat-ria/etpl",["exports","module","babel-runtime/helpers/class-call-check","etpl","babel-runtime/helpers/interop-require-default","inf-i18n"],function(exports,module,e,t,i,n){var r=i["default"](t),a=i["default"](n),o=function(){function t(i){e["default"](this,t),this._data=null==i?{}:i}return t.prototype.get=function(e){if(/^i18n\./.test(e))return a["default"](e.substr(5));for(var t=e.replace(/\[(\d+)\]/g,".$1").split("."),i=t.shift(),n=this._data[i];n&&(i=t.shift());)n=n[i];return n},t}(),s=function(e,t){var i=t;if(null==i||"function"!=typeof i.get)i=new o(t);return r["default"].render(e,i)},l=function(e){return r["default"].getRenderer(e)};module.exports={render:s,getRenderer:l}}),define("urijs/punycode",["require","exports","module"],function(require,exports,module){function e(e){throw RangeError(I[e])}function t(e,t){for(var i=e.length;i--;)e[i]=t(e[i]);return e}function i(e,i){return t(e.split(G),i).join(".")}function n(e){for(var t,i,n=[],r=0,a=e.length;a>r;)if(t=e.charCodeAt(r++),t>=55296&&56319>=t&&a>r)if(i=e.charCodeAt(r++),56320==(64512&i))n.push(((1023&t)<<10)+(1023&i)+65536);else n.push(t),r--;else n.push(t);return n}function r(e){return t(e,function(e){var t="";if(e>65535)e-=65536,t+=J(e>>>10&1023|55296),e=56320|1023&e;return t+=J(e)}).join("")}function a(e){if(10>e-48)return e-22;if(26>e-65)return e-65;if(26>e-97)return e-97;else return D}function o(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function s(e,t,i){var n=0;for(e=i?y(e/E):e>>1,e+=y(e/t);e>v*f>>1;n+=D)e=y(e/v);return y(n+(v+1)*e/(e+h))}function l(t){var i,n,o,l,u,A,B,c,h,E,g=[],H=t.length,G=0,I=F,v=p;if(n=t.lastIndexOf(m),0>n)n=0;for(o=0;n>o;++o){if(t.charCodeAt(o)>=128)e("not-basic");g.push(t.charCodeAt(o))}for(l=n>0?n+1:0;H>l;){for(u=G,A=1,B=D;;B+=D){if(l>=H)e("invalid-input");if(c=a(t.charCodeAt(l++)),c>=D||c>y((C-G)/A))e("overflow");if(G+=c*A,h=v>=B?d:B>=v+f?f:B-v,h>c)break;if(E=D-h,A>y(C/E))e("overflow");A*=E}if(i=g.length+1,v=s(G-u,i,0==u),y(G/i)>C-I)e("overflow");I+=y(G/i),G%=i,g.splice(G++,0,I)}return r(g)}function u(t){var i,r,a,l,u,A,B,c,h,E,g,H,G,I,v,L=[];for(t=n(t),H=t.length,i=F,r=0,u=p,A=0;H>A;++A)if(g=t[A],128>g)L.push(J(g));if(a=l=L.length,l)L.push(m);for(;H>a;){for(B=C,A=0;H>A;++A)if(g=t[A],g>=i&&B>g)B=g;if(G=a+1,B-i>y((C-r)/G))e("overflow");for(r+=(B-i)*G,i=B,A=0;H>A;++A){if(g=t[A],i>g&&++r>C)e("overflow");if(g==i){for(c=r,h=D;E=u>=h?d:h>=u+f?f:h-u,!(E>c);h+=D)v=c-E,I=D-E,L.push(J(o(E+v%I,0))),c=y(v/I);L.push(J(o(c,0))),u=s(r,G,a==l),r=0,++a}}++r,++i}return L.join("")}function A(e){return i(e,function(e){return g.test(e)?l(e.slice(4).toLowerCase()):e})}function B(e){return i(e,function(e){return H.test(e)?"xn--"+u(e):e})}var c,C=2147483647,D=36,d=1,f=26,h=38,E=700,p=72,F=128,m="-",g=/^xn--/,H=/[^ -~]/,G=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=D-d,y=Math.floor,J=String.fromCharCode;return c={version:"1.2.3",ucs2:{decode:n,encode:r},decode:l,encode:u,toASCII:B,toUnicode:A}}),define("urijs/URI",["require","exports","module","./punycode","./IPv6","./SecondLevelDomains"],function(require,exports,module){function e(t,i){if(!(this instanceof e))return new e(t,i);if(void 0===t)if("undefined"!=typeof location)t=location.href+"";else t="";if(this.href(t),void 0!==i)return this.absoluteTo(i);else return this}function t(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(e){if(void 0===e)return"Undefined";else return String(Object.prototype.toString.call(e)).slice(8,-1)}function n(e){return"Array"===i(e)}function r(e,t){var i,r,a={};if(n(t))for(i=0,r=t.length;r>i;i++)a[t[i]]=!0;else a[t]=!0;for(i=0,r=e.length;r>i;i++)if(void 0!==a[e[i]])e.splice(i,1),r--,i--;return e}function a(e,t){var r,o;if(n(t)){for(r=0,o=t.length;o>r;r++)if(!a(e,t[r]))return!1;return!0}var s=i(t);for(r=0,o=e.length;o>r;r++)if("RegExp"===s){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function o(e,t){if(!n(e)||!n(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var i=0,r=e.length;r>i;i++)if(e[i]!==t[i])return!1;return!0}function s(e){return escape(e)}function l(e){return encodeURIComponent(e).replace(/[!'()*]/g,s).replace(/\*/g,"%2A")}var u=require("./punycode"),A=require("./IPv6"),B=require("./SecondLevelDomains");e.version="1.12.0";var c=e.prototype,C=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},e.getDomAttribute=function(t){if(!t||!t.nodeName)return void 0;var i=t.nodeName.toLowerCase();if("input"===i&&"image"!==t.type)return void 0;else return e.domAttributes[i]},e.encode=l,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=l,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},e.encodeQuery=function(t,i){var n=e.encode(t+"");return i?n.replace(/%20/g,"+"):n},e.decodeQuery=function(t,i){t+="";try{return e.decode(i?t.replace(/\+/g,"%20"):t)}catch(n){return t}},e.recodePath=function(t){for(var i=(t+"").split("/"),n=0,r=i.length;r>n;n++)i[n]=e.encodePathSegment(e.decode(i[n]));return i.join("/")},e.decodePath=function(t){for(var i=(t+"").split("/"),n=0,r=i.length;r>n;n++)i[n]=e.decodePathSegment(i[n]);return i.join("/")};var D,d={encode:"encode",decode:"decode"},f=function(t,i){return function(n){return e[i](n+"").replace(e.characters[t][i].expression,function(n){return e.characters[t][i].map[n]})}};for(D in d)e[D+"PathSegment"]=f("pathname",d[D]);e.encodeReserved=f("reserved","encode"),e.parse=function(t,i){var n;if(!i)i={};if(n=t.indexOf("#"),n>-1)i.fragment=t.substring(n+1)||null,t=t.substring(0,n);if(n=t.indexOf("?"),n>-1)i.query=t.substring(n+1)||null,t=t.substring(0,n);if("//"===t.substring(0,2))i.protocol=null,t=t.substring(2),t=e.parseAuthority(t,i);else if(n=t.indexOf(":"),n>-1)if(i.protocol=t.substring(0,n)||null,i.protocol&&!i.protocol.match(e.protocol_expression))i.protocol=void 0;else if("file"===i.protocol)t=t.substring(n+3);else if("//"===t.substring(n+1,n+3))t=t.substring(n+3),t=e.parseAuthority(t,i);else t=t.substring(n+1),i.urn=!0;return i.path=t,i},e.parseHost=function(e,t){var i,n,r=e.indexOf("/");if(-1===r)r=e.length;if("["===e.charAt(0))i=e.indexOf("]"),t.hostname=e.substring(1,i)||null,t.port=e.substring(i+2,r)||null;else if(e.indexOf(":")!==e.lastIndexOf(":"))t.hostname=e.substring(0,r)||null,t.port=null;else n=e.substring(0,r).split(":"),t.hostname=n[0]||null,t.port=n[1]||null;if(t.hostname&&"/"!==e.substring(r).charAt(0))r++,e="/"+e;return e.substring(r)||"/"},e.parseAuthority=function(t,i){return t=e.parseUserinfo(t,i),e.parseHost(t,i)},e.parseUserinfo=function(t,i){var n,r=t.indexOf("/"),a=r>-1?t.lastIndexOf("@",r):t.indexOf("@");if(a>-1&&(-1===r||r>a))n=t.substring(0,a).split(":"),i.username=n[0]?e.decode(n[0]):null,n.shift(),i.password=n[0]?e.decode(n.join(":")):null,t=t.substring(a+1);else i.username=null,i.password=null;return t},e.parseQuery=function(t,i){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,r,a,o={},s=t.split("&"),l=s.length,u=0;l>u;u++)if(n=s[u].split("="),r=e.decodeQuery(n.shift(),i),a=n.length?e.decodeQuery(n.join("="),i):null,o[r]){if("string"==typeof o[r])o[r]=[o[r]];o[r].push(a)}else o[r]=a;return o},e.build=function(t){var i="";if(t.protocol)i+=t.protocol+":";if(!t.urn&&(i||t.hostname))i+="//";if(i+=e.buildAuthority(t)||"","string"==typeof t.path){if("/"!==t.path.charAt(0)&&"string"==typeof t.hostname)i+="/";i+=t.path}if("string"==typeof t.query&&t.query)i+="?"+t.query;if("string"==typeof t.fragment&&t.fragment)i+="#"+t.fragment;return i},e.buildHost=function(t){var i="";if(!t.hostname)return"";else if(e.ip6_expression.test(t.hostname))if(t.port)i+="["+t.hostname+"]:"+t.port;else i+=t.hostname;else if(i+=t.hostname,t.port)i+=":"+t.port;return i},e.buildAuthority=function(t){return e.buildUserinfo(t)+e.buildHost(t)},e.buildUserinfo=function(t){var i="";if(t.username){if(i+=e.encode(t.username),t.password)i+=":"+e.encode(t.password);i+="@"}return i},e.buildQuery=function(t,i,r){var a,o,s,l,u="";for(o in t)if(C.call(t,o)&&o)if(n(t[o])){for(a={},s=0,l=t[o].length;l>s;s++)if(void 0!==t[o][s]&&void 0===a[t[o][s]+""])if(u+="&"+e.buildQueryParameter(o,t[o][s],r),i!==!0)a[t[o][s]+""]=!0}else if(void 0!==t[o])u+="&"+e.buildQueryParameter(o,t[o],r);return u.substring(1)},e.buildQueryParameter=function(t,i,n){
return e.encodeQuery(t,n)+(null!==i?"="+e.encodeQuery(i,n):"")},e.addQuery=function(t,i,r){if("object"==typeof i){for(var a in i)if(C.call(i,a))e.addQuery(t,a,i[a])}else if("string"==typeof i){if(void 0===t[i])return void(t[i]=r);else if("string"==typeof t[i])t[i]=[t[i]];if(!n(r))r=[r];t[i]=t[i].concat(r)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},e.removeQuery=function(t,i,a){var o,s,l;if(n(i))for(o=0,s=i.length;s>o;o++)t[i[o]]=void 0;else if("object"==typeof i){for(l in i)if(C.call(i,l))e.removeQuery(t,l,i[l])}else if("string"==typeof i)if(void 0!==a){if(t[i]===a)t[i]=void 0;else if(n(t[i]))t[i]=r(t[i],a)}else t[i]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")},e.hasQuery=function(t,r,s,l){if("object"==typeof r){for(var u in r)if(C.call(r,u))if(!e.hasQuery(t,u,r[u]))return!1;return!0}else if("string"!=typeof r)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(i(s)){case"Undefined":return r in t;case"Boolean":var A=Boolean(n(t[r])?t[r].length:t[r]);return s===A;case"Function":return!!s(t[r],r,t);case"Array":if(!n(t[r]))return!1;var B=l?a:o;return B(t[r],s);case"RegExp":if(!n(t[r]))return Boolean(t[r]&&t[r].match(s));if(!l)return!1;else return a(t[r],s);case"Number":s=String(s);case"String":if(!n(t[r]))return t[r]===s;if(!l)return!1;else return a(t[r],s);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.commonPath=function(e,t){var i,n=Math.min(e.length,t.length);for(i=0;n>i;i++)if(e.charAt(i)!==t.charAt(i)){i--;break}if(1>i)return e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"";if("/"!==e.charAt(i)||"/"!==t.charAt(i))i=e.substring(0,i).lastIndexOf("/");return e.substring(0,i+1)},e.withinString=function(t,i,n){n||(n={});var r=n.start||e.findUri.start,a=n.end||e.findUri.end,o=n.trim||e.findUri.trim,s=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var l=r.exec(t);if(!l)break;var u=l.index;if(n.ignoreHtml){var A=t.slice(Math.max(u-3,0),u);if(A&&s.test(A))continue}var B=u+t.slice(u).search(a),c=t.slice(u,B).replace(o,"");if(!n.ignore||!n.ignore.test(c)){B=u+c.length;var C=i(c,u,B,t);t=t.slice(0,u)+C+t.slice(B),r.lastIndex=u+C.length}else;}return r.lastIndex=0,t},e.ensureValidHostname=function(t){if(t.match(e.invalid_hostname_characters)){if(!u)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(u.toASCII(t).match(e.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},c.build=function(t){if(t===!0)this._deferred_build=!0;else if(void 0===t||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this},c.clone=function(){return new e(this)},c.valueOf=c.toString=function(){return this.build(!1)._string},d={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},f=function(e){return function(t,i){if(void 0===t)return this._parts[e]||"";else return this._parts[e]=t||null,this.build(!i),this}};for(D in d)c[D]=f(d[D]);d={query:"?",fragment:"#"},f=function(e,t){return function(i,n){if(void 0===i)return this._parts[e]||"";else{if(null!==i)if(i+="",i.charAt(0)===t)i=i.substring(1);return this._parts[e]=i,this.build(!n),this}}};for(D in d)c[D]=f(D,d[D]);d={search:["?","query"],hash:["#","fragment"]},f=function(e,t){return function(i,n){var r=this[e](i,n);return"string"==typeof r&&r.length?t+r:r}};for(D in d)c[D]=f(d[D][1],d[D][0]);c.pathname=function(t,i){if(void 0===t||t===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return t?e.decodePath(n):n}else return this._parts.path=t?e.recodePath(t):"/",this.build(!i),this},c.path=c.pathname,c.href=function(t,i){var n;if(void 0===t)return this.toString();this._string="",this._parts=e._parts();var r=t instanceof e,a="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var o=e.getDomAttribute(t);t=t[o]||"",a=!1}if(!r&&a&&void 0!==t.pathname)t=t.toString();if("string"==typeof t)this._parts=e.parse(t,this._parts);else if(r||a){var s=r?t._parts:t;for(n in s)if(C.call(this._parts,n))this._parts[n]=s[n]}else throw new TypeError("invalid input");return this.build(!i),this},c.is=function(t){var i=!1,n=!1,r=!1,a=!1,o=!1,s=!1,l=!1,u=!this._parts.urn;if(this._parts.hostname)u=!1,n=e.ip4_expression.test(this._parts.hostname),r=e.ip6_expression.test(this._parts.hostname),i=n||r,a=!i,o=a&&B&&B.has(this._parts.hostname),s=a&&e.idn_expression.test(this._parts.hostname),l=a&&e.punycode_expression.test(this._parts.hostname);switch(t.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return o;case"ip":return i;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return r;case"idn":return s;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var h=c.protocol,E=c.port,p=c.hostname;c.protocol=function(t,i){if(void 0!==t)if(t)if(t=t.replace(/:(\/\/)?$/,""),!t.match(e.protocol_expression))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return h.call(this,t,i)},c.scheme=c.protocol,c.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){if(0===e)e=null;if(e){if(e+="",":"===e.charAt(0))e=e.substring(1);if(e.match(/[^0-9]/))throw new TypeError("Port '"+e+"' contains characters other than [0-9]")}}return E.call(this,e,t)},c.hostname=function(t,i){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={};e.parseHost(t,n),t=n.hostname}return p.call(this,t,i)},c.host=function(t,i){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?e.buildHost(this._parts):"";else return e.parseHost(t,this._parts),this.build(!i),this},c.authority=function(t,i){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?e.buildAuthority(this._parts):"";else return e.parseAuthority(t,this._parts),this.build(!i),this},c.userinfo=function(t,i){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var n=e.buildUserinfo(this._parts);return n.substring(0,n.length-1)}else{if("@"!==t[t.length-1])t+="@";return e.parseUserinfo(t,this._parts),this.build(!i),this}},c.resource=function(t,i){var n;if(void 0===t)return this.path()+this.search()+this.hash();else return n=e.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!i),this},c.subdomain=function(i,n){if(this._parts.urn)return void 0===i?"":this;if(void 0===i){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}else{var a=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,a),s=new RegExp("^"+t(o));if(i&&"."!==i.charAt(i.length-1))i+=".";if(i)e.ensureValidHostname(i);return this._parts.hostname=this._parts.hostname.replace(s,i),this.build(!n),this}},c.domain=function(i,n){if(this._parts.urn)return void 0===i?"":this;if("boolean"==typeof i)n=i,i=void 0;if(void 0===i){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var a=this._parts.hostname.length-this.tld(n).length-1;return a=this._parts.hostname.lastIndexOf(".",a-1)+1,this._parts.hostname.substring(a)||""}else{if(!i)throw new TypeError("cannot set domain empty");if(e.ensureValidHostname(i),!this._parts.hostname||this.is("IP"))this._parts.hostname=i;else{var o=new RegExp(t(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,i)}return this.build(!n),this}},c.tld=function(e,i){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e)i=e,e=void 0;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(n+1);if(i!==!0&&B&&B.list[r.toLowerCase()])return B.get(this._parts.hostname)||r;else return r}else{var a;if(!e)throw new TypeError("cannot set TLD empty");else if(e.match(/[^a-zA-Z0-9-]/))if(B&&B.is(e))a=new RegExp(t(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e);else throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");else if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");else a=new RegExp(t(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e);return this.build(!i),this}},c.directory=function(i,n){if(this._parts.urn)return void 0===i?"":this;if(void 0===i||i===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,a=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return i?e.decodePath(a):a}else{var o=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,o),l=new RegExp("^"+t(s));if(!this.is("relative")){if(!i)i="/";if("/"!==i.charAt(0))i="/"+i}if(i&&"/"!==i.charAt(i.length-1))i+="/";return i=e.recodePath(i),this._parts.path=this._parts.path.replace(l,i),this.build(!n),this}},c.filename=function(i,n){if(this._parts.urn)return void 0===i?"":this;if(void 0===i||i===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),a=this._parts.path.substring(r+1);return i?e.decodePathSegment(a):a}else{var o=!1;if("/"===i.charAt(0))i=i.substring(1);if(i.match(/\.?\//))o=!0;var s=new RegExp(t(this.filename())+"$");if(i=e.recodePath(i),this._parts.path=this._parts.path.replace(s,i),o)this.normalizePath(n);else this.build(!n);return this}},c.suffix=function(i,n){if(this._parts.urn)return void 0===i?"":this;if(void 0===i||i===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r,a,o=this.filename(),s=o.lastIndexOf(".");if(-1===s)return"";else return r=o.substring(s+1),a=/^[a-z0-9%]+$/i.test(r)?r:"",i?e.decodePathSegment(a):a}else{if("."===i.charAt(0))i=i.substring(1);var l,u=this.suffix();if(!u){if(!i)return this;this._parts.path+="."+e.recodePath(i)}else if(!i)l=new RegExp(t("."+u)+"$");else l=new RegExp(t(u)+"$");if(l)i=e.recodePath(i),this._parts.path=this._parts.path.replace(l,i);return this.build(!n),this}},c.segment=function(e,t,i){var r=this._parts.urn?":":"/",a=this.path(),o="/"===a.substring(0,1),s=a.split(r);if(void 0!==e&&"number"!=typeof e)i=t,t=e,e=void 0;if(void 0!==e&&"number"!=typeof e)throw new Error("Bad segment '"+e+"', must be 0-based integer");if(o)s.shift();if(0>e)e=Math.max(s.length+e,0);if(void 0===t)return void 0===e?s:s[e];else if(null===e||void 0===s[e]){if(n(t)){s=[];for(var l=0,u=t.length;u>l;l++)if(t[l].length||s.length&&s[s.length-1].length){if(s.length&&!s[s.length-1].length)s.pop();s.push(t[l])}else;}else if(t||"string"==typeof t)if(""===s[s.length-1])s[s.length-1]=t;else s.push(t)}else if(t||"string"==typeof t&&t.length)s[e]=t;else s.splice(e,1);if(o)s.unshift("");return this.path(s.join(r),i)},c.segmentCoded=function(t,i,r){var a,o,s;if("number"!=typeof t)r=i,i=t,t=void 0;if(void 0===i){if(a=this.segment(t,i,r),!n(a))a=void 0!==a?e.decode(a):void 0;else for(o=0,s=a.length;s>o;o++)a[o]=e.decode(a[o]);return a}if(!n(i))i="string"==typeof i?e.encode(i):i;else for(o=0,s=i.length;s>o;o++)i[o]=e.decode(i[o]);return this.segment(t,i,r)};var F=c.query;return c.query=function(t,i){if(t===!0)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);else if("function"==typeof t){var n=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=e.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!i),this}else if(void 0!==t&&"string"!=typeof t)return this._parts.query=e.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!i),this;else return F.call(this,t,i)},c.setQuery=function(t,i,n){var r=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t){for(var a in t)if(C.call(t,a))r[a]=t[a]}else if("string"==typeof t)r[t]=void 0!==i?i:null;else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(this._parts.query=e.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t)n=i;return this.build(!n),this},c.addQuery=function(t,i,n){var r=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(e.addQuery(r,t,void 0===i?null:i),this._parts.query=e.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t)n=i;return this.build(!n),this},c.removeQuery=function(t,i,n){var r=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(e.removeQuery(r,t,i),this._parts.query=e.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t)n=i;return this.build(!n),this},c.hasQuery=function(t,i,n){var r=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(r,t,i,n)},c.setSearch=c.setQuery,c.addSearch=c.addQuery,c.removeSearch=c.removeQuery,c.hasSearch=c.hasQuery,c.normalize=function(){if(this._parts.urn)return this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build();else return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},c.normalizeProtocol=function(e){if("string"==typeof this._parts.protocol)this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e);return this},c.normalizeHostname=function(e){if(this._parts.hostname){if(this.is("IDN")&&u)this._parts.hostname=u.toASCII(this._parts.hostname);else if(this.is("IPv6")&&A)this._parts.hostname=A.best(this._parts.hostname);this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!e)}return this},c.normalizePort=function(t){if("string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol])this._parts.port=null,this.build(!t);return this},c.normalizePath=function(t){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var i,n,r,a=this._parts.path,o="";if("/"!==a.charAt(0))i=!0,a="/"+a;if(a=a.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),i)if(o=a.substring(1).match(/^(\.\.\/)+/)||"")o=o[0];for(;;){if(n=a.indexOf("/.."),-1===n)break;else if(0===n){a=a.substring(3);continue}if(r=a.substring(0,n).lastIndexOf("/"),-1===r)r=n;a=a.substring(0,r)+a.substring(n+3)}if(i&&this.is("relative"))a=o+a.substring(1);return a=e.recodePath(a),this._parts.path=a,this.build(!t),this},c.normalizePathname=c.normalizePath,c.normalizeQuery=function(t){if("string"==typeof this._parts.query){if(!this._parts.query.length)this._parts.query=null;else this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace));this.build(!t)}return this},c.normalizeFragment=function(e){if(!this._parts.fragment)this._parts.fragment=null,this.build(!e);return this},c.normalizeSearch=c.normalizeQuery,c.normalizeHash=c.normalizeFragment,c.iso8859=function(){var t=e.encode,i=e.decode;return e.encode=escape,e.decode=decodeURIComponent,this.normalize(),e.encode=t,e.decode=i,this},c.unicode=function(){var t=e.encode,i=e.decode;return e.encode=l,e.decode=unescape,this.normalize(),e.encode=t,e.decode=i,this},c.readable=function(){var t=this.clone();t.username("").password("").normalize();var i="";if(t._parts.protocol)i+=t._parts.protocol+"://";if(t._parts.hostname)if(t.is("punycode")&&u){if(i+=u.toUnicode(t._parts.hostname),t._parts.port)i+=":"+t._parts.port}else i+=t.host();if(t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0))i+="/";if(i+=t.path(!0),t._parts.query){for(var n="",r=0,a=t._parts.query.split("&"),o=a.length;o>r;r++){var s=(a[r]||"").split("=");if(n+="&"+e.decodeQuery(s[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==s[1])n+="="+e.decodeQuery(s[1],this._parts.escapeQuerySpace).replace(/&/g,"%26")}i+="?"+n.substring(1)}return i+=e.decodeQuery(t.hash(),!0)},c.absoluteTo=function(t){var i,n,r,a=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(!(t instanceof e))t=new e(t);if(!a._parts.protocol)a._parts.protocol=t._parts.protocol;if(this._parts.hostname)return a;for(n=0;r=o[n];n++)a._parts[r]=t._parts[r];if(!a._parts.path){if(a._parts.path=t._parts.path,!a._parts.query)a._parts.query=t._parts.query}else if(".."===a._parts.path.substring(-2))a._parts.path+="/";if("/"!==a.path().charAt(0))i=t.directory(),a._parts.path=(i?i+"/":"")+a._parts.path,a.normalizePath();return a.build(),a},c.relativeTo=function(t){var i,n,r,a,o,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new e(t).normalize(),i=s._parts,n=t._parts,a=s.path(),o=t.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(i.protocol===n.protocol)i.protocol=null;if(i.username!==n.username||i.password!==n.password)return s.build();if(null!==i.protocol||null!==i.username||null!==i.password)return s.build();if(i.hostname===n.hostname&&i.port===n.port)i.hostname=null,i.port=null;else return s.build();if(a===o)return i.path="",s.build();if(r=e.commonPath(s.path(),t.path()),!r)return s.build();var l=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return i.path=l+i.path.substring(r.length),s.build()},c.equals=function(t){var i,r,a,s=this.clone(),l=new e(t),u={},A={},B={};if(s.normalize(),l.normalize(),s.toString()===l.toString())return!0;if(i=s.query(),r=l.query(),s.query(""),l.query(""),s.toString()!==l.toString())return!1;if(i.length!==r.length)return!1;u=e.parseQuery(i,this._parts.escapeQuerySpace),A=e.parseQuery(r,this._parts.escapeQuerySpace);for(a in u)if(C.call(u,a)){if(!n(u[a])){if(u[a]!==A[a])return!1}else if(!o(u[a],A[a]))return!1;B[a]=!0}for(a in A)if(C.call(A,a))if(!B[a])return!1;return!0},c.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},c.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},e}),define("urijs",["urijs/URI"],function(e){return e}),define("urijs/SecondLevelDomains",["require","exports","module"],function(require,exports,module){var e=Object.prototype.hasOwnProperty,t={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(e){return!!e.match(t.has_expression)},is:function(e){return!!e.match(t.is_expression)},get:function(e){var i=e.match(t.has_expression);return i&&i[1]||null},init:function(){var i="";for(var n in t.list)if(e.call(t.list,n)){var r="("+t.list[n]+")."+n;i+="|("+r+")"}else;t.has_expression=new RegExp("\\.("+i.substr(1)+")$","i"),t.is_expression=new RegExp("^("+i.substr(1)+")$","i")}};return t.init(),t}),define("urijs/IPv6",["require","exports","module"],function(require,exports,module){function e(e){var t=e.toLowerCase(),i=t.split(":"),n=i.length,r=8;if(""===i[0]&&""===i[1]&&""===i[2])i.shift(),i.shift();else if(""===i[0]&&""===i[1])i.shift();else if(""===i[n-1]&&""===i[n-2])i.pop();if(n=i.length,-1!==i[n-1].indexOf("."))r=7;var a;for(a=0;n>a&&""!==i[a];a++);if(r>a){for(i.splice(a,1,"0000");i.length<r;)i.splice(a,0,"0000");n=i.length}for(var o,s=0;r>s;s++){o=i[s].split("");for(var l=0;3>l&&("0"===o[0]&&o.length>1);l++)o.splice(0,1);i[s]=o.join("")}var u=-1,A=0,B=0,c=-1,C=!1;for(s=0;r>s;s++)if(C){if("0"===i[s])B+=1;else if(C=!1,B>A)u=c,A=B}else if("0"==i[s])C=!0,c=s,B=1;if(B>A)u=c,A=B;if(A>1)i.splice(u,A,"");n=i.length;var D="";if(""===i[0])beststr=":";for(s=0;n>s&&(D+=i[s],s!==n-1);s++)D+=":";if(""===i[n-1])D+=":";return D}return{best:e}}),define("uioc/operator/Setter",["require","../util"],function(require){function e(e){this.context=e}var t=require("../util"),i=/^set[A-Z]/,n="set".length;return e.prototype.resolveDependencies=function(e,i){if(e.setterDeps||!e.auto)return e;var n=e.properties||{},r=[],a=this.context,o=null;if("function"==typeof Object.getOwnPropertyNames&&"function"==typeof Object.getPrototypeOf){for(var s=Object.create(null),l=i;l;l=Object.getPrototypeOf(l))for(var u=Object.getOwnPropertyNames(l),A=0,B=u.length;B>A;++A)if(o=u[A],!s[o])s[o]=!0,o=this.getPropertyFromSetter(i,o),o&&!t.hasOwn(n,o)&&a.hasComponent(o)&&r.push(o)}else for(var c in i)o=this.getPropertyFromSetter(i,c),o&&!t.hasOwn(n,o)&&a.hasComponent(o)&&r.push(o);return e.setterDeps=r,e},e.prototype.has=function(e){return t.isObject(e)&&"string"==typeof e.$setter},e.prototype.getPropertyFromSetter=function(e,t){var r=null;if("function"==typeof e[t]&&i.test(t))r=t.charAt(n).toLowerCase()+t.slice(n+1);return r},e.prototype.setProperty=function(e,t,i,n){if(n)return e[n](i);var r="set"+t.charAt(0).toUpperCase()+t.slice(1);"function"==typeof e[r]?e[r](i):e[t]=i},e}),define("uioc/operator/Ref",["require","../util"],function(require){function e(e){this.context=e}var t=require("../util");return e.prototype.process=function(e){return e.argDeps=e.argDeps||this.getDependenciesFromArgs(e.args),e.propDeps=e.propDeps||this.getDependenciesFromProperties(e.properties),e},e.prototype.has=function(e){return t.isObject(e)&&"string"==typeof e.$ref},e.prototype.getDependenciesFromArgs=function(e){for(var i=[],n=e.length-1;n>-1;--n)this.has(e[n])&&t.addToSet(i,e[n].$ref);return i},e.prototype.getDependenciesFromProperties=function(e){var i=[];for(var n in e)if(t.hasOwn(e,n)){var r=e[n];this.has(r)&&t.addToSet(i,r.$ref)}return i},e}),define("uioc/operator/Map",["require","../util"],function(require){function e(e){this.context=e}var t=require("../util");return e.prototype.process=function(t){for(var i=t.args,n=0,r=i.length;r>n;++n){var a=i[n];if(this.has(a))i[n]={$import:e.MAP_COMPONENT_ID,properties:a.$map}}var o=t.properties;for(var s in o){var l=o[s];if(this.has(l))o[s]={$import:e.MAP_COMPONENT_ID,properties:l.$map}}return t},e.prototype.has=function(e){return t.isObject(e)&&t.isObject(e.$map)},e.MAP_COMPONENT_CONFIG={creator:Object,isFactory:!0},e.MAP_COMPONENT_ID=(new Date).getTime()+"_map",e}),define("uioc/operator/List",["require","../util"],function(require){function e(e){this.context=e}var t=require("../util");return e.prototype.process=function(t){for(var i=t.args,n=0,r=i.length;r>n;++n){var a=i[n];if(this.has(a))i[n]={$import:e.LIST_COMPONENT_ID,args:a.$list}}var o=t.properties;for(var s in o){var l=o[s];if(this.has(l))o[s]={$import:e.LIST_COMPONENT_ID,args:l.$list}}return t},e.prototype.has=function(e){return t.isObject(e)&&e.$list instanceof Array},e.LIST_COMPONENT_CONFIG={creator:function(){return[].slice.call(arguments,0)},isFactory:!0},e.LIST_COMPONENT_ID=(new Date).getTime()+"_list",e}),define("uioc/operator/Import",["require","../util"],function(require){function e(e){this.context=e}var t=require("../util"),i="^uioc-";return e.prototype.process=function(e){return e.anonyDeps=e.anonyDeps||this.transformAnonymousComponents(e),e},e.prototype.has=function(e){return t.isObject(e)&&"string"==typeof e.$import},e.prototype.transformAnonymousComponents=function(e){for(var t=[],i=e.args,n=null,r=i.length-1;r>-1;--r)if(this.has(i[r]))n=this.createAnonymousConfig(e,i[r],"$arg."+r+"."),i[r]={$ref:n},t.push(n);var a=e.properties;for(var o in a)if(this.has(a[o]))n=this.createAnonymousConfig(e,a[o],"$prop."+o+"."),a[o]={$ref:n},t.push(n);return t},e.prototype.createAnonymousConfig=function(e,n,r){var a=n&&n.$import;if(!this.context.hasComponent(a))throw new Error("$import `%s` component, but it is not exist, please check!!",n.$import);var o=this.context.getComponentConfig(a),s=e.id+"-"+r+a;return n.id=s=(-1!==s.indexOf(i)?"":i)+s,n.$import=null,this.context.addComponent(s,t.merge(o,n)),s},e}),define("uioc/Loader",["require","./DependencyTree","./util"],function(require){function e(e,t){return e.apply(this,t)}function t(e){this.context=e}function i(e,t,a,o,s){var module=e.module;if("function"!=typeof e.creator&&module)a[module]=a[module]||[],a[module].push(e);t.processStaticConfig(e.id);var l=o.checkForCircular(e.id);if(l){var u=e.id+" has circular dependencies ";throw new r.CircularError(u,e)}o.addData(e);var A=o.appendChild(new n);s=s||e.argDeps.concat(e.propDeps).concat(e.setterDeps||[]);for(var B=s.length-1;B>-1;--B)if(t.hasComponent(s[B]))i(t.getComponentConfig(s[B]),t,a,A);return a}var n=require("./DependencyTree"),r=require("./util");return t.prototype.setLoaderFunction=function(e){this.amdLoader=e},t.prototype.resolveDependentModules=function(e,t,r){return i(e,this.context,t||{},new n,r)},t.prototype.loadModuleMap=function(e,t){var i=r.keys(e),n=this;this.amdLoader(i,function(){for(var r=arguments.length-1;r>-1;--r)for(var a=arguments[r],o=e[i[r]],s=o.length-1;s>-1;--s){var l=o[s];"function"!=typeof l.creator&&n.wrapCreator(l,a)}t()})},t.prototype.wrapCreator=function(t,i){var n=t.creator=t.creator||i;if("string"==typeof n){var r=i[n],a=function(){return r.apply(i,arguments)};n=!t.isFactory||"static"===t.scope?r:a,t.creator=n}if(!t.isFactory&&"static"!==t.scope)t.creator=function(){
return e.prototype=n.prototype,new e(n,arguments)}},t}),define("uioc/DependencyTree",[],function(){var e=function(){this.data=[],this.children=[],this.parent=null};return e.prototype.appendChild=function(e){return e.parent=this,this.children.push(e),e},e.prototype.checkForCircular=function(e){var t=this.parent;if(null!==t)for(var i=t.data,n=i.length-1;n>-1;--n)if(t.data[n].id&&t.data[n].id===e)return t.data[n];else return t.checkForCircular(e);return null},e.prototype.addData=function(e,t){if(t=!!t,t&&this.checkForCircular(e.id))return!1;else return this.data.push(e),!0},e}),define("saber-cookie/cookie",["require"],function(require){function e(e){return"string"==typeof e&&""!==e}function t(t){return e(t)}function i(t,i){if(e(t)){var n=String(document.cookie).match(new RegExp("(?:^|)"+t+"(?:(?:=([^;]*))|;|$)"));if(n)if(n=n[1])return i?decodeURIComponent(n):n;else return""}return null}var exports={};return exports.set=function(e,i,n){if(t(e)){n=n||{};var r=n.expires;if("number"==typeof r)r=new Date,r.setTime(r.getTime()+n.expires);document.cookie=e+"="+(n.raw?i:encodeURIComponent(i))+(r instanceof Date?"; expires="+r.toUTCString():"")+(n.domain?"; domain="+n.domain:"")+(n.path?"; path="+n.path:"")+(n.secure?"; secure":"")}},exports.get=function(e,n){return n=n||{},i(t(e)?e:"",!n.raw)},exports.remove=function(e,t){t=t||{},t.raw=!0,t.expires=new Date(0),this.set(e,"",t)},exports}),define("saber-cookie",["saber-cookie/cookie"],function(e){return e}),define("promise/then",["require","./util"],function(require){function e(e){return function(t){return t[e]}}function t(e){return function(){return e}}function i(){}var n=require("./util");return function(r){return r.prototype.thenGetProperty=function(t){return this.then(e(t))},r.prototype.thenReturn=function(e){return this.then(t(e))},r.prototype.thenBind=function(){return this.then(n.bind.apply(n,arguments))},r.prototype.thenSwallowException=function(){return this["catch"](i)},r}}),define("promise/hook",["require","./PromiseCapacity"],function(require){var e=require("./PromiseCapacity");return function(t){return t.onReject=function(t){if("function"==typeof t)e.onReject=t},t.onResolve=function(t){if("function"==typeof t)e.onResolve=t},t}}),define("promise/enhance",["require","./util"],function(require){function e(e){return"function"==typeof a.getThen(e)}function t(e){var t=!1,i=new this(function(i,n){window.require(e,function(){!t&&i([].slice.call(arguments))})});return i.abort=function(){t=!0},i}function i(e){var t=this.constructor;return this.then(function(i){t.resolve(e()).then(function(){return i})},function(i){t.resolve(e()).then(function(){throw i})})}function n(t,i,n){try{n=[].slice.call(arguments,2);var r=t.apply(i,n);return e(r)?r:this.resolve(r)}catch(a){return this.reject(a)}}function r(e){if(e&&"object"==typeof e&&e.constructor===this)return e;else return new this(function(t){t(e)})}var a=require("./util");return function(a){return a.isPromise=e,a.require=t,a.invoke=n,a.cast=r,a.prototype["finally"]=i,a.prototype.ensure=i,a.prototype.fail=a.prototype["catch"],a}}),define("promise/setImmediate",["require","./util"],function(require){function e(e){return n[r]=e,r++}function t(e){var t=n[e];if(t)delete n[e],t()}var i=function(){return this}(),n={},r=1;if("function"==typeof i.setImmediate)return require("./util").bind(i.setImmediate,i);if("function"==typeof i.nextTick)return i.nextTick;if(i.MutationObserver||i.webKitMutationObserver){var a="data-promise-tick",o=i.MutationObserver||i.webKitMutationObserver,s=function(e,i){var n=e[0];if(n.attributeName===a){var r=n.target.getAttribute(a);t(r),i.disconnect(n.target)}};return function(t){var i=document.createElement("div"),n=new o(s);n.observe(i,{attributes:!0});var r=e(t);i.setAttribute(a,r)}}if("function"==typeof postMessage&&"function"!=typeof i.importScript){var l=!0,u=i.onmessage;if(i.onmessage=function(){l=!1},i.postMessage("","*"),i.onmessage=u,l){var A="promise-tick-",B=function(e){if(e.source===i&&"string"==typeof e.data&&0===e.data.indexOf(A)){var n=e.data.substring(A.length);t(n)}};if(i.addEventListener)i.addEventListener("message",B,!1);else i.attachEvent("onmessage",B);return function(t){var n=e(t);i.postMessage(A+n,"*")}}}if(i.MessageChannel){var c=new MessageChannel;return c.port1.onmessage=function(e){var i=e.data;t(i)},function(t){var i=e(t);c.port2.postMessage(i)}}if("onreadystatechange"in document.createElement("script")){var C=document.documentElement;return function(e){var t=document.createElement("script");t.onreadystatechange=function(){e(),t.onreadystatechange=null,C.removeChild(t),t=null},C.appendChild(t)}}return function(e){setTimeout(e,0)}}),define("promise/PromiseCapacity",["require","./util","./setImmediate"],function(require){function e(e){this.promise=e,this.status=a,this.isResolved=!1,this.result=void 0,this.fulfilledCallbacks=[],this.rejectedCallbacks=[],this.syncModeEnabled=!1,this.invoke=l}function t(e,t,i,n){return function(r){try{if("function"==typeof t)r=t(r),e=i;e(r)}catch(a){n(a)}}}function i(e,t){t.isResolved=!0;var i=new t.promise.constructor(function(t,i){var n=!1;try{e(function(e){t(e),n=!0},function(e){i(e),n=!0})}catch(r){!n&&i(r)}});i.then(function(e){t.isResolved=!1,t.resolve(e)},function(e){t.isResolved=!1,t.reject(e)})}function n(e){if(e.status!==a){var t=null;if(e.status===o)e.rejectedCallbacks=[],t=e.fulfilledCallbacks;else e.fulfilledCallbacks=[],t=e.rejectedCallbacks;e.invoke(function(){for(var i,n=e.result;i=t.shift();)i(n)})}}var r=require("./util"),a="pending",o="fulfilled",s="rejected",l=require("./setImmediate"),u=function(e){e()};return e.onResolve=function(e){},e.onReject=function(e){"undefined"!=typeof console&&console.error(e)},e.prototype={constructor:e,resolve:function(e){if(this.status===a&&!this.isResolved){if(e===this.promise)return void this.reject(new TypeError("Chaining cycle detected for promise #<Promise>"));try{var t=r.getThen(e);if("function"==typeof t)return void i(r.bind(t,e),this)}catch(s){return void(this.status===a&&this.reject(s))}this.result=e,this.status=o,this.constructor.onResolve.call(this.promise,e),n(this)}},reject:function(e){if(this.status===a&&!this.isResolved)this.result=e,this.status=s,this.constructor.onReject.call(this.promise,e),n(this)},then:function(e,i){var r=this;this.syncModeEnabled=this.promise.syncModeEnabled,this.invoke=this.syncModeEnabled?u:l;var a=new this.promise.constructor(function(n,a){r.fulfilledCallbacks.push(t(n,e,n,a)),r.rejectedCallbacks.push(t(a,i,n,a))});return a.syncModeEnabled=this.syncModeEnabled,n(this),a}},e}),define("lodash/lodash",[],function(){function e(e,t){if(e!==t){var i=null===e,n=e===g,r=e===e,a=null===t,o=t===g,s=t===t;if(e>t&&!a||!r||i&&!o&&s||n&&s)return 1;if(t>e&&!i||!s||a&&!n&&r||o&&r)return-1}return 0}function t(e,t,i){for(var n=e.length,r=i?n:-1;i?r--:++r<n;)if(t(e[r],r,e))return r;return-1}function i(e,t,i){if(t!==t)return C(e,i);for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}function n(e){return"function"==typeof e||!1}function r(e){return null==e?"":e+""}function a(e,t){for(var i=-1,n=e.length;++i<n&&t.indexOf(e.charAt(i))>-1;);return i}function o(e,t){for(var i=e.length;i--&&t.indexOf(e.charAt(i))>-1;);return i}function s(t,i){return e(t.criteria,i.criteria)||t.index-i.index}function l(t,i,n){for(var r=-1,a=t.criteria,o=i.criteria,s=a.length,l=n.length;++r<s;){var u=e(a[r],o[r]);if(u){if(r>=l)return u;var A=n[r];return u*("asc"===A||A===!0?1:-1)}}return t.index-i.index}function u(e){return ke[e]}function A(e){return Qe[e]}function B(e,t,i){if(t)e=We[e];else if(i)e=ze[e];return"\\"+e}function c(e){return"\\"+ze[e]}function C(e,t,i){for(var n=e.length,r=t+(i?0:-1);i?r--:++r<n;){var a=e[r];if(a!==a)return r}return-1}function D(e){return!!e&&"object"==typeof e}function d(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function f(e,t){for(var i=-1,n=e.length,r=-1,a=[];++i<n;)if(e[i]===t)e[i]=R,a[++r]=i;return a}function h(e,t){for(var i,n=-1,r=e.length,a=-1,o=[];++n<r;){var s=e[n],l=t?t(s,n,e):s;if(!n||i!==l)i=l,o[++a]=s}return o}function E(e){for(var t=-1,i=e.length;++t<i&&d(e.charCodeAt(t)););return t}function p(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function F(e){return Ve[e]}function m(d){function Y(e){if(D(e)&&!Ps(e)&&!(e instanceof ke)){if(e instanceof ee)return e;if(no.call(e,"__chain__")&&no.call(e,"__wrapped__"))return dn(e)}return new ee(e)}function q(){}function ee(e,t,i){this.__wrapped__=e,this.__actions__=i||[],this.__chain__=!!t}function ke(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bo,this.__views__=[]}function Qe(){var e=new ke(this.__wrapped__);return e.__actions__=rt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rt(this.__views__),e}function Ve(){if(this.__filtered__){var e=new ke(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ue(){var e=this.__wrapped__.value(),t=this.__dir__,i=Ps(e),n=0>t,r=i?e.length:0,a=zi(0,r,this.__views__),o=a.start,s=a.end,l=s-o,u=n?s:o-1,A=this.__iteratees__,B=A.length,c=0,C=vo(l,this.__takeCount__);if(!i||O>r||r==l&&C==l)return ri(e,this.__actions__);var D=[];e:for(;l--&&C>c;){u+=t;for(var d=-1,f=e[u];++d<B;){var h=A[d],E=h.iteratee,p=h.type,F=E(f);if(p==S)f=F;else if(!F)if(p==T)continue e;else break e}D[c++]=f}return D}function We(){this.__data__={}}function ze(e){return this.has(e)&&delete this.__data__[e]}function Ye(e){return"__proto__"==e?g:this.__data__[e]}function Xe(e){return"__proto__"!=e&&no.call(this.__data__,e)}function je(e,t){if("__proto__"!=e)this.__data__[e]=t;return this}function Ze(e){var t=e?e.length:0;for(this.data={hash:Fo(null),set:new Co};t--;)this.push(e[t])}function qe(e,t){var i=e.data,n="string"==typeof t||_r(t)?i.set.has(t):i.hash[t];return n?0:-1}function it(e){var t=this.data;if("string"==typeof e||_r(e))t.set.add(e);else t.hash[e]=!0}function nt(e,t){for(var i=-1,n=e.length,r=-1,a=t.length,o=ka(n+a);++i<n;)o[i]=e[i];for(;++r<a;)o[i++]=t[r];return o}function rt(e,t){var i=-1,n=e.length;for(t||(t=ka(n));++i<n;)t[i]=e[i];return t}function at(e,t){for(var i=-1,n=e.length;++i<n&&t(e[i],i,e)!==!1;);return e}function ot(e,t){for(var i=e.length;i--&&t(e[i],i,e)!==!1;);return e}function st(e,t){for(var i=-1,n=e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function lt(e,t,i,n){for(var r=-1,a=e.length,o=n,s=o;++r<a;){var l=e[r],u=+t(l);if(i(u,o))o=u,s=l}return s}function ut(e,t){for(var i=-1,n=e.length,r=-1,a=[];++i<n;){var o=e[i];if(t(o,i,e))a[++r]=o}return a}function At(e,t){for(var i=-1,n=e.length,r=ka(n);++i<n;)r[i]=t(e[i],i,e);return r}function Bt(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function ct(e,t,i,n){var r=-1,a=e.length;if(n&&a)i=e[++r];for(;++r<a;)i=t(i,e[r],r,e);return i}function Ct(e,t,i,n){var r=e.length;if(n&&r)i=e[--r];for(;r--;)i=t(i,e[r],r,e);return i}function Dt(e,t){for(var i=-1,n=e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function dt(e,t){for(var i=e.length,n=0;i--;)n+=+t(e[i])||0;return n}function ft(e,t){return e===g?t:e}function ht(e,t,i,n){return e===g||!no.call(n,i)?t:e}function Et(e,t,i){for(var n=-1,r=Ws(t),a=r.length;++n<a;){var o=r[n],s=e[o],l=i(s,t[o],o,e,t);if((l===l?l!==s:s===s)||s===g&&!(o in e))e[o]=l}return e}function pt(e,t){return null==t?e:mt(t,Ws(t),e)}function Ft(e,t){for(var i=-1,n=null==e,r=!n&&qi(e),a=r?e.length:0,o=t.length,s=ka(o);++i<o;){var l=t[i];if(r)s[i]=$i(l,a)?e[l]:g;else s[i]=n?g:e[l]}return s}function mt(e,t,i){i||(i={});for(var n=-1,r=t.length;++n<r;){var a=t[n];i[a]=e[a]}return i}function gt(e,t,i){var n=typeof e;if("function"==n)return t===g?e:si(e,t,i);if(null==e)return La;if("object"==n)return Rt(e);else return t===g?Pa(e):kt(e,t)}function Ht(e,t,i,n,r,a,o){var s;if(i)s=r?i(e,n,r):i(e);if(s!==g)return s;if(!_r(e))return e;var l=Ps(e);if(l){if(s=Yi(e),!t)return rt(e,s)}else{var u=ao.call(e),A=u==z;if(u==j||u==k||A&&!r){if(et(e))return r?e:{};if(s=Xi(A?{}:e),!t)return pt(s,e)}else return Re[u]?ji(e,u,t):r?e:{}}a||(a=[]),o||(o=[]);for(var B=a.length;B--;)if(a[B]==e)return o[B];return a.push(e),o.push(s),(l?at:Kt)(e,function(n,r){s[r]=Ht(n,t,i,r,e,a,o)}),s}function Gt(e,t,i){if("function"!=typeof e)throw new Za(w);return Do(function(){e.apply(g,i)},t)}function It(e,t){var n=e?e.length:0,r=[];if(!n)return r;var a=-1,o=Vi(),s=o===i,l=s&&t.length>=O?fi(t):null,u=t.length;if(l)o=qe,s=!1,t=l;e:for(;++a<n;){var A=e[a];if(s&&A===A){for(var B=u;B--;)if(t[B]===A)continue e;r.push(A)}else if(o(t,A,0)<0)r.push(A)}return r}function vt(e,t){var i=!0;return ko(e,function(e,n,r){return i=!!t(e,n,r)}),i}function yt(e,t,i,n){var r=n,a=r;return ko(e,function(e,o,s){var l=+t(e,o,s);if(i(l,r)||l===n&&l===a)r=l,a=e}),a}function Jt(e,t,i,n){var r=e.length;if(i=null==i?0:+i||0,0>i)i=-i>r?0:r+i;if(n=n===g||n>r?r:+n||0,0>n)n+=r;for(r=i>n?0:n>>>0,i>>>=0;r>i;)e[i++]=t;return e}function Lt(e,t){var i=[];return ko(e,function(e,n,r){if(t(e,n,r))i.push(e)}),i}function Mt(e,t,i,n){var r;return i(e,function(e,i,a){if(t(e,i,a))return r=n?i:e,!1;else return void 0}),r}function bt(e,t,i,n){n||(n=[]);for(var r=-1,a=e.length;++r<a;){var o=e[r];if(D(o)&&qi(o)&&(i||Ps(o)||yr(o)))if(t)bt(o,t,i,n);else Bt(n,o);else if(!i)n[n.length]=o}return n}function Nt(e,t){return Vo(e,t,ia)}function Kt(e,t){return Vo(e,t,Ws)}function xt(e,t){return Uo(e,t,Ws)}function Pt(e,t){for(var i=-1,n=t.length,r=-1,a=[];++i<n;){var o=t[i];if(Pr(e[o]))a[++r]=o}return a}function _t(e,t,i){if(null!=e){if(e=Cn(e),i!==g&&i in e)t=[i];for(var n=0,r=t.length;null!=e&&r>n;)e=Cn(e)[t[n++]];return n&&n==r?e:g}}function Ot(e,t,i,n,r,a){if(e===t)return!0;if(null==e||null==t||!_r(e)&&!D(t))return e!==e&&t!==t;else return Tt(e,t,Ot,i,n,r,a)}function Tt(e,t,i,n,r,a,o){var s=Ps(e),l=Ps(t),u=Q,A=Q;if(!s)if(u=ao.call(e),u==k)u=j;else if(u!=j)s=Ur(e);if(!l)if(A=ao.call(t),A==k)A=j;else if(A!=j)l=Ur(t);var B=u==j&&!et(e),c=A==j&&!et(t),C=u==A;if(C&&!s&&!B)return wi(e,t,u);if(!r){var D=B&&no.call(e,"__wrapped__"),d=c&&no.call(t,"__wrapped__");if(D||d)return i(D?e.value():e,d?t.value():t,n,r,a,o)}if(!C)return!1;a||(a=[]),o||(o=[]);for(var f=a.length;f--;)if(a[f]==e)return o[f]==t;a.push(e),o.push(t);var h=(s?Si:Ri)(e,t,i,n,r,a,o);return a.pop(),o.pop(),h}function St(e,t,i){var n=t.length,r=n,a=!i;if(null==e)return!r;for(e=Cn(e);n--;){var o=t[n];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<r;){o=t[n];var s=o[0],l=e[s],u=o[1];if(a&&o[2]){if(l===g&&!(s in e))return!1}else{var A=i?i(l,u,s):g;if(!(A===g?Ot(u,l,i,!0):A))return!1}}return!0}function wt(e,t){var i=-1,n=qi(e)?ka(e.length):[];return ko(e,function(e,r,a){n[++i]=t(e,r,a)}),n}function Rt(e){var t=Ui(e);if(1==t.length&&t[0][2]){var i=t[0][0],n=t[0][1];return function(e){if(null==e)return!1;else return e=Cn(e),e[i]===n&&(n!==g||i in e)}}return function(e){return St(e,t)}}function kt(e,t){var i=Ps(e),n=tn(e)&&an(t),r=e+"";return e=Dn(e),function(a){if(null==a)return!1;var o=r;if(a=Cn(a),!(!i&&n||o in a)){if(a=1==e.length?a:_t(a,jt(e,0,-1)),null==a)return!1;o=Jn(e),a=Cn(a)}return a[o]===t?t!==g||o in a:Ot(t,a[o],g,!0)}}function Qt(e,t,i,n,r){if(!_r(e))return e;var a=qi(t)&&(Ps(t)||Ur(t)),o=a?g:Ws(t);return at(o||t,function(s,l){if(o)l=s,s=t[l];if(D(s))n||(n=[]),r||(r=[]),Vt(e,t,l,Qt,i,n,r);else{var u=e[l],A=i?i(u,s,l,e,t):g,B=A===g;if(B)A=s;if((A!==g||a&&!(l in e))&&(B||(A===A?A!==u:u===u)))e[l]=A}}),e}function Vt(e,t,i,n,r,a,o){for(var s=a.length,l=t[i];s--;)if(a[s]==l)return void(e[i]=o[s]);var u=e[i],A=r?r(u,l,i,e,t):g,B=A===g;if(B)if(A=l,qi(l)&&(Ps(l)||Ur(l)))A=Ps(u)?u:qi(u)?rt(u):[];else if(kr(l)||yr(l))A=yr(u)?jr(u):kr(u)?u:{};else B=!1;if(a.push(l),o.push(A),B)e[i]=n(A,l,r,a,o);else if(A===A?A!==u:u===u)e[i]=A}function Ut(e){return function(t){return null==t?g:Cn(t)[e]}}function Wt(e){var t=e+"";return e=Dn(e),function(i){return _t(i,e,t)}}function zt(e,t){for(var i=e?t.length:0;i--;){var n=t[i];if(n!=r&&$i(n)){var r=n;fo.call(e,n,1)}}return e}function Yt(e,t){return e+mo(Lo()*(t-e+1))}function Xt(e,t,i,n,r){return r(e,function(e,r,a){i=n?(n=!1,e):t(i,e,r,a)}),i}function jt(e,t,i){var n=-1,r=e.length;if(t=null==t?0:+t||0,0>t)t=-t>r?0:r+t;if(i=i===g||i>r?r:+i||0,0>i)i+=r;r=t>i?0:i-t>>>0,t>>>=0;for(var a=ka(r);++n<r;)a[n]=e[n+t];return a}function Zt(e,t){var i;return ko(e,function(e,n,r){return i=t(e,n,r),!i}),!!i}function qt(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}function $t(e,t,i){var n=ki(),r=-1;t=At(t,function(e){return n(e)});var a=wt(e,function(e){var i=At(t,function(t){return t(e)});return{criteria:i,index:++r,value:e}});return qt(a,function(e,t){return l(e,t,i)})}function ei(e,t){var i=0;return ko(e,function(e,n,r){i+=+t(e,n,r)||0}),i}function ti(e,t){var n=-1,r=Vi(),a=e.length,o=r===i,s=o&&a>=O,l=s?fi():null,u=[];if(l)r=qe,o=!1;else s=!1,l=t?[]:u;e:for(;++n<a;){var A=e[n],B=t?t(A,n,e):A;if(o&&A===A){for(var c=l.length;c--;)if(l[c]===B)continue e;if(t)l.push(B);u.push(A)}else if(r(l,B,0)<0){if(t||s)l.push(B);u.push(A)}}return u}function ii(e,t){for(var i=-1,n=t.length,r=ka(n);++i<n;)r[i]=e[t[i]];return r}function ni(e,t,i,n){for(var r=e.length,a=n?r:-1;(n?a--:++a<r)&&t(e[a],a,e););return i?jt(e,n?0:a,n?a+1:r):jt(e,n?a+1:0,n?r:a)}function ri(e,t){var i=e;if(i instanceof ke)i=i.value();for(var n=-1,r=t.length;++n<r;){var a=t[n];i=a.func.apply(a.thisArg,Bt([i],a.args))}return i}function ai(e,t,i){var n=0,r=e?e.length:n;if("number"==typeof t&&t===t&&xo>=r){for(;r>n;){var a=n+r>>>1,o=e[a];if((i?t>=o:t>o)&&null!==o)n=a+1;else r=a}return r}return oi(e,t,La,i)}function oi(e,t,i,n){t=i(t);for(var r=0,a=e?e.length:0,o=t!==t,s=null===t,l=t===g;a>r;){var u=mo((r+a)/2),A=i(e[u]),B=A!==g,c=A===A;if(o)var C=c||n;else if(s)C=c&&B&&(n||null!=A);else if(l)C=c&&(n||B);else if(null==A)C=!1;else C=n?t>=A:t>A;if(C)r=u+1;else a=u}return vo(a,Ko)}function si(e,t,i){if("function"!=typeof e)return La;if(t===g)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,n,r){return e.call(t,i,n,r)};case 4:return function(i,n,r,a){return e.call(t,i,n,r,a)};case 5:return function(i,n,r,a,o){return e.call(t,i,n,r,a,o)}}return function(){return e.apply(t,arguments)}}function li(e){var t=new lo(e.byteLength),i=new ho(t);return i.set(new ho(e)),t}function ui(e,t,i){for(var n=i.length,r=-1,a=Io(e.length-n,0),o=-1,s=t.length,l=ka(s+a);++o<s;)l[o]=t[o];for(;++r<n;)l[i[r]]=e[r];for(;a--;)l[o++]=e[r++];return l}function Ai(e,t,i){for(var n=-1,r=i.length,a=-1,o=Io(e.length-r,0),s=-1,l=t.length,u=ka(o+l);++a<o;)u[a]=e[a];for(var A=a;++s<l;)u[A+s]=t[s];for(;++n<r;)u[A+i[n]]=e[a++];return u}function Bi(e,t){return function(i,n,r){var a=t?t():{};if(n=ki(n,r,3),Ps(i))for(var o=-1,s=i.length;++o<s;){var l=i[o];e(a,l,n(l,o,i),i)}else ko(i,function(t,i,r){e(a,t,n(t,i,r),r)});return a}}function ci(e){return pr(function(t,i){var n=-1,r=null==t?0:i.length,a=r>2?i[r-2]:g,o=r>2?i[2]:g,s=r>1?i[r-1]:g;if("function"==typeof a)a=si(a,s,5),r-=2;else a="function"==typeof s?s:g,r-=a?1:0;if(o&&en(i[0],i[1],o))a=3>r?g:a,r=1;for(;++n<r;){var l=i[n];if(l)e(t,l,a)}return t})}function Ci(e,t){return function(i,n){var r=i?Yo(i):0;if(!rn(r))return e(i,n);for(var a=t?r:-1,o=Cn(i);(t?a--:++a<r)&&n(o[a],a,o)!==!1;);return i}}function Di(e){return function(t,i,n){for(var r=Cn(t),a=n(t),o=a.length,s=e?o:-1;e?s--:++s<o;){var l=a[s];if(i(r[l],l,r)===!1)break}return t}}function di(e,t){function i(){var r=this&&this!==$e&&this instanceof i?n:e;return r.apply(t,arguments)}var n=Ei(e);return i}function fi(e){return Fo&&Co?new Ze(e):null}function hi(e){return function(t){for(var i=-1,n=va(ca(t)),r=n.length,a="";++i<r;)a=e(a,n[i],i);return a}}function Ei(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Ro(e.prototype),n=e.apply(i,t);return _r(n)?n:i}}function pi(e){function t(i,n,r){if(r&&en(i,n,r))n=g;var a=Ti(i,e,g,g,g,g,g,n);return a.placeholder=t.placeholder,a}return t}function Fi(e,t){return pr(function(i){var n=i[0];if(null==n)return n;else return i.push(t),e.apply(g,i)})}function mi(e,t){return function(i,n,r){if(r&&en(i,n,r))n=g;if(n=ki(n,r,3),1==n.length){i=Ps(i)?i:cn(i);var a=lt(i,n,e,t);if(!i.length||a!==t)return a}return yt(i,n,e,t)}}function gi(e,i){return function(n,r,a){if(r=ki(r,a,3),Ps(n)){var o=t(n,r,i);return o>-1?n[o]:g}return Mt(n,r,e)}}function Hi(e){return function(i,n,r){if(!i||!i.length)return-1;else return n=ki(n,r,3),t(i,n,e)}}function Gi(e){return function(t,i,n){return i=ki(i,n,3),Mt(t,i,e,!0)}}function Ii(e){return function(){for(var t,i=arguments.length,n=e?i:-1,r=0,a=ka(i);e?n--:++n<i;){var o=a[r++]=arguments[n];if("function"!=typeof o)throw new Za(w);if(!t&&ee.prototype.thru&&"wrapper"==Qi(o))t=new ee([],!0)}for(n=t?-1:i;++n<i;){o=a[n];var s=Qi(o),l="wrapper"==s?zo(o):g;if(l&&nn(l[0])&&l[1]==(b|y|L|N)&&!l[4].length&&1==l[9])t=t[Qi(l[0])].apply(t,l[3]);else t=1==o.length&&nn(o)?t[s]():t.thru(o)}return function(){var e=arguments,n=e[0];if(t&&1==e.length&&Ps(n)&&n.length>=O)return t.plant(n).value();for(var r=0,o=i?a[r].apply(this,e):n;++r<i;)o=a[r].call(this,o);return o}}}function vi(e,t){return function(i,n,r){return"function"==typeof n&&r===g&&Ps(i)?e(i,n):t(i,si(n,r,3))}}function yi(e){return function(t,i,n){if("function"!=typeof i||n!==g)i=si(i,n,3);return e(t,i,ia)}}function Ji(e){return function(t,i,n){if("function"!=typeof i||n!==g)i=si(i,n,3);return e(t,i)}}function Li(e){return function(t,i,n){var r={};return i=ki(i,n,3),Kt(t,function(t,n,a){var o=i(t,n,a);n=e?o:n,t=e?t:o,r[n]=t}),r}}function Mi(e){return function(t,i,n){return t=r(t),(e?t:"")+xi(t,i,n)+(e?"":t)}}function bi(e){var t=pr(function(i,n){var r=f(n,t.placeholder);return Ti(i,e,g,n,r)});return t}function Ni(e,t){return function(i,n,r,a){var o=arguments.length<3;return"function"==typeof n&&a===g&&Ps(i)?e(i,n,r,o):Xt(i,ki(n,a,4),r,o,t)}}function Ki(e,t,i,n,r,a,o,s,l,u){function A(){for(var p=arguments.length,F=p,m=ka(p);F--;)m[F]=arguments[F];if(n)m=ui(m,n,r);if(a)m=Ai(m,a,o);if(D||h){var H=A.placeholder,v=f(m,H);if(p-=v.length,u>p){var y=s?rt(s):g,J=Io(u-p,0),b=D?v:g,N=D?g:v,K=D?m:g,x=D?g:m;if(t|=D?L:M,t&=~(D?M:L),!d)t&=~(G|I);var P=[e,t,i,K,b,x,N,y,l,J],_=Ki.apply(g,P);if(nn(e))Xo(_,P);return _.placeholder=H,_}}var O=c?i:this,T=C?O[e]:e;if(s)m=An(m,s);if(B&&l<m.length)m.length=l;if(this&&this!==$e&&this instanceof A)T=E||Ei(e);return T.apply(O,m)}var B=t&b,c=t&G,C=t&I,D=t&y,d=t&v,h=t&J,E=C?g:Ei(e);return A}function xi(e,t,i){var n=e.length;if(t=+t,n>=t||!Ho(t))return"";var r=t-n;return i=null==i?" ":i+"",Ea(i,po(r/i.length)).slice(0,r)}function Pi(e,t,i,n){function r(){for(var t=-1,s=arguments.length,l=-1,u=n.length,A=ka(u+s);++l<u;)A[l]=n[l];for(;s--;)A[l++]=arguments[++t];var B=this&&this!==$e&&this instanceof r?o:e;return B.apply(a?i:this,A)}var a=t&G,o=Ei(e);return r}function _i(e){var t=Wa[e];return function(e,i){if(i=i===g?0:+i||0)return i=Bo(10,i),t(e*i)/i;else return t(e)}}function Oi(e){return function(t,i,n,r){var a=ki(n);return null==n&&a===gt?ai(t,i,e):oi(t,i,a(n,r,1),e)}}function Ti(e,t,i,n,r,a,o,s){var l=t&I;if(!l&&"function"!=typeof e)throw new Za(w);var u=n?n.length:0;if(!u)t&=~(L|M),n=r=g;if(u-=r?r.length:0,t&M){var A=n,B=r;n=r=g}var c=l?g:zo(e),C=[e,t,i,n,r,A,B,a,o,s];if(c)on(C,c),t=C[1],s=C[9];if(C[9]=null==s?l?0:e.length:Io(s-u,0)||0,t==G)var D=di(C[0],C[2]);else if((t==L||t==(G|L))&&!C[4].length)D=Pi.apply(g,C);else D=Ki.apply(g,C);var d=c?Wo:Xo;return d(D,C)}function Si(e,t,i,n,r,a,o){var s=-1,l=e.length,u=t.length;if(l!=u&&!(r&&u>l))return!1;for(;++s<l;){var A=e[s],B=t[s],c=n?n(r?B:A,r?A:B,s):g;if(c!==g){if(c)continue;return!1}if(r){if(!Dt(t,function(e){return A===e||i(A,e,n,r,a,o)}))return!1}else if(A!==B&&!i(A,B,n,r,a,o))return!1}return!0}function wi(e,t,i){switch(i){case V:case U:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case X:return e!=+e?t!=+t:e==+t;case Z:case $:return e==t+""}return!1}function Ri(e,t,i,n,r,a,o){var s=Ws(e),l=s.length,u=Ws(t),A=u.length;if(l!=A&&!r)return!1;for(var B=l;B--;){var c=s[B];if(!(r?c in t:no.call(t,c)))return!1}for(var C=r;++B<l;){c=s[B];var D=e[c],d=t[c],f=n?n(r?d:D,r?D:d,c):g;if(!(f===g?i(D,d,n,r,a,o):f))return!1;C||(C="constructor"==c)}if(!C){var h=e.constructor,E=t.constructor;if(h!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof h&&h instanceof h&&"function"==typeof E&&E instanceof E))return!1}return!0}function ki(e,t,i){var n=Y.callback||ya;return n=n===ya?gt:n,i?n(e,t,i):n}function Qi(e){for(var t=e.name+"",i=Oo[t],n=i?i.length:0;n--;){var r=i[n],a=r.func;if(null==a||a==e)return r.name}return t}function Vi(e,t,n){var r=Y.indexOf||vn;return r=r===vn?i:r,e?r(e,t,n):r}function Ui(e){for(var t=na(e),i=t.length;i--;)t[i][2]=an(t[i][1]);return t}function Wi(e,t){var i=null==e?g:e[t];return Sr(i)?i:g}function zi(e,t,i){for(var n=-1,r=i.length;++n<r;){var a=i[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=vo(t,e+o);break;case"takeRight":e=Io(e,t-o)}}return{start:e,end:t}}function Yi(e){var t=e.length,i=new e.constructor(t);if(t&&"string"==typeof e[0]&&no.call(e,"index"))i.index=e.index,i.input=e.input;return i}function Xi(e){var t=e.constructor;if(!("function"==typeof t&&t instanceof t))t=Ya;return new t}function ji(e,t,i){var n=e.constructor;switch(t){case te:return li(e);case V:case U:return new n(+e);case ie:case ne:case re:case ae:case oe:case se:case le:case ue:case Ae:if(n instanceof n)n=To[t];var r=e.buffer;return new n(i?li(r):r,e.byteOffset,e.length);case X:case $:return new n(e);case Z:var a=new n(e.source,Le.exec(e));a.lastIndex=e.lastIndex}return a}function Zi(e,t,i){if(null!=e&&!tn(t,e))t=Dn(t),e=1==t.length?e:_t(e,jt(t,0,-1)),t=Jn(t);var n=null==e?e:e[t];return null==n?g:n.apply(e,i)}function qi(e){return null!=e&&rn(Yo(e))}function $i(e,t){return e="number"==typeof e||Ne.test(e)?+e:-1,t=null==t?Po:t,e>-1&&e%1==0&&t>e}function en(e,t,i){if(!_r(i))return!1;var n=typeof t;if("number"==n?qi(i)&&$i(t,i.length):"string"==n&&t in i){var r=i[t];return e===e?e===r:r!==r}return!1}function tn(e,t){var i=typeof e;if("string"==i&&ge.test(e)||"number"==i)return!0;if(Ps(e))return!1;var n=!me.test(e);return n||null!=t&&e in Cn(t)}function nn(e){var t=Qi(e),i=Y[t];if("function"!=typeof i||!(t in ke.prototype))return!1;if(e===i)return!0;var n=zo(i);return!!n&&e===n[0]}function rn(e){return"number"==typeof e&&e>-1&&e%1==0&&Po>=e}function an(e){return e===e&&!_r(e)}function on(e,t){var i=e[1],n=t[1],r=i|n,a=b>r,o=n==b&&i==y||n==b&&i==N&&e[7].length<=t[8]||n==(b|N)&&i==y;if(!a&&!o)return e;if(n&G)e[2]=t[2],r|=i&G?0:v;var s=t[3];if(s){var l=e[3];e[3]=l?ui(l,s,t[4]):rt(s),e[4]=l?f(e[3],R):rt(t[4])}if(s=t[5])l=e[5],e[5]=l?Ai(l,s,t[6]):rt(s),e[6]=l?f(e[5],R):rt(t[6]);if(s=t[7])e[7]=rt(s);if(n&b)e[8]=null==e[8]?t[8]:vo(e[8],t[8]);if(null==e[9])e[9]=t[9];return e[0]=t[0],e[1]=r,e}function sn(e,t){return e===g?t:_s(e,t,sn)}function ln(e,t){e=Cn(e);for(var i=-1,n=t.length,r={};++i<n;){var a=t[i];if(a in e)r[a]=e[a]}return r}function un(e,t){var i={};return Nt(e,function(e,n,r){if(t(e,n,r))i[n]=e}),i}function An(e,t){for(var i=e.length,n=vo(t.length,i),r=rt(e);n--;){var a=t[n];e[n]=$i(a,i)?r[a]:g}return e}function Bn(e){for(var t=ia(e),i=t.length,n=i&&e.length,r=!!n&&rn(n)&&(Ps(e)||yr(e)||Vr(e)),a=-1,o=[];++a<i;){var s=t[a];if(r&&$i(s,n)||no.call(e,s))o.push(s)}return o}function cn(e){if(null==e)return[];if(!qi(e))return sa(e);if(Y.support.unindexedChars&&Vr(e))return e.split("");else return _r(e)?e:Ya(e)}function Cn(e){if(Y.support.unindexedChars&&Vr(e)){for(var t=-1,i=e.length,n=Ya(e);++t<i;)n[t]=e.charAt(t);return n}return _r(e)?e:Ya(e)}function Dn(e){if(Ps(e))return e;var t=[];return r(e).replace(He,function(e,i,n,r){t.push(n?r.replace(ye,"$1"):i||e)}),t}function dn(e){return e instanceof ke?e.clone():new ee(e.__wrapped__,e.__chain__,rt(e.__actions__))}function fn(e,t,i){if(i?en(e,t,i):null==t)t=1;else t=Io(mo(t)||1,1);for(var n=0,r=e?e.length:0,a=-1,o=ka(po(r/t));r>n;)o[++a]=jt(e,n,n+=t);return o}function hn(e){for(var t=-1,i=e?e.length:0,n=-1,r=[];++t<i;){var a=e[t];if(a)r[++n]=a}return r}function En(e,t,i){var n=e?e.length:0;if(!n)return[];if(i?en(e,t,i):null==t)t=1;return jt(e,0>t?0:t)}function pn(e,t,i){var n=e?e.length:0;if(!n)return[];if(i?en(e,t,i):null==t)t=1;return t=n-(+t||0),jt(e,0,0>t?0:t)}function Fn(e,t,i){return e&&e.length?ni(e,ki(t,i,3),!0,!0):[]}function mn(e,t,i){return e&&e.length?ni(e,ki(t,i,3),!0):[]}function gn(e,t,i,n){var r=e?e.length:0;if(!r)return[];if(i&&"number"!=typeof i&&en(e,t,i))i=0,n=r;return Jt(e,t,i,n)}function Hn(e){return e?e[0]:g}function Gn(e,t,i){var n=e?e.length:0;if(i&&en(e,t,i))t=!1;return n?bt(e,t):[]}function In(e){var t=e?e.length:0;return t?bt(e,!0):[]}function vn(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?Io(r+n,0):n;else if(n){var a=ai(e,t);if(r>a&&(t===t?t===e[a]:e[a]!==e[a]))return a;else return-1}return i(e,t,n||0)}function yn(e){return pn(e,1)}function Jn(e){var t=e?e.length:0;return t?e[t-1]:g}function Ln(e,t,i){var n=e?e.length:0;if(!n)return-1;var r=n;if("number"==typeof i)r=(0>i?Io(n+i,0):vo(i||0,n-1))+1;else if(i){r=ai(e,t,!0)-1;var a=e[r];if(t===t?t===a:a!==a)return r;else return-1}if(t!==t)return C(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1}function Mn(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var i=0,n=Vi(),r=e.length;++i<r;)for(var a=0,o=e[i];(a=n(t,o,a))>-1;)fo.call(t,a,1);return t}function bn(e,t,i){var n=[];if(!e||!e.length)return n;var r=-1,a=[],o=e.length;for(t=ki(t,i,3);++r<o;){var s=e[r];if(t(s,r,e))n.push(s),a.push(r)}return zt(e,a),n}function Nn(e){return En(e,1)}function Kn(e,t,i){var n=e?e.length:0;if(!n)return[];if(i&&"number"!=typeof i&&en(e,t,i))t=0,i=n;return jt(e,t,i)}function xn(e,t,i){var n=e?e.length:0;if(!n)return[];if(i?en(e,t,i):null==t)t=1;return jt(e,0,0>t?0:t)}function Pn(e,t,i){var n=e?e.length:0;if(!n)return[];if(i?en(e,t,i):null==t)t=1;return t=n-(+t||0),jt(e,0>t?0:t)}function _n(e,t,i){return e&&e.length?ni(e,ki(t,i,3),!1,!0):[]}function On(e,t,i){return e&&e.length?ni(e,ki(t,i,3)):[]}function Tn(e,t,n,r){var a=e?e.length:0;if(!a)return[];if(null!=t&&"boolean"!=typeof t)r=n,n=en(e,t,r)?g:t,t=!1;var o=ki();if(null!=n||o!==gt)n=o(n,r,3);return t&&Vi()===i?h(e,n):ti(e,n)}function Sn(e){if(!e||!e.length)return[];var t=-1,i=0;e=ut(e,function(e){if(qi(e))return i=Io(e.length,i),!0;else return void 0});for(var n=ka(i);++t<i;)n[t]=At(e,Ut(t));return n}function wn(e,t,i){var n=e?e.length:0;if(!n)return[];var r=Sn(e);if(null==t)return r;else return t=si(t,i,4),At(r,function(e){return ct(e,t,g,!0)})}function Rn(){for(var e=-1,t=arguments.length;++e<t;){var i=arguments[e];if(qi(i))var n=n?Bt(It(n,i),It(i,n)):i}return n?ti(n):[]}function kn(e,t){var i=-1,n=e?e.length:0,r={};if(n&&!t&&!Ps(e[0]))t=[];for(;++i<n;){var a=e[i];if(t)r[a]=t[i];else if(a)r[a[0]]=a[1]}return r}function Qn(e){var t=Y(e);return t.__chain__=!0,t}function Vn(e,t,i){return t.call(i,e),e}function Un(e,t,i){return t.call(i,e)}function Wn(){return Qn(this)}function zn(){return new ee(this.value(),this.__chain__)}function Yn(e){for(var t,i=this;i instanceof q;){var n=dn(i);if(t)r.__wrapped__=n;else t=n;var r=n;i=i.__wrapped__}return r.__wrapped__=e,t}function Xn(){var e=this.__wrapped__,t=function(e){return e.reverse()};if(e instanceof ke){var i=e;if(this.__actions__.length)i=new ke(this);return i=i.reverse(),i.__actions__.push({func:Un,args:[t],thisArg:g}),new ee(i,this.__chain__)}return this.thru(t)}function jn(){return this.value()+""}function Zn(){return ri(this.__wrapped__,this.__actions__)}function qn(e,t,i){var n=Ps(e)?st:vt;if(i&&en(e,t,i))t=g;if("function"!=typeof t||i!==g)t=ki(t,i,3);return n(e,t)}function $n(e,t,i){var n=Ps(e)?ut:Lt;return t=ki(t,i,3),
n(e,t)}function er(e,t){return As(e,Rt(t))}function tr(e,t,i,n){var r=e?Yo(e):0;if(!rn(r))e=sa(e),r=e.length;if("number"!=typeof i||n&&en(t,i,n))i=0;else i=0>i?Io(r+i,0):i||0;return"string"==typeof e||!Ps(e)&&Vr(e)?r>=i&&e.indexOf(t,i)>-1:!!r&&Vi(e,t,i)>-1}function ir(e,t,i){var n=Ps(e)?At:wt;return t=ki(t,i,3),n(e,t)}function nr(e,t){return ir(e,Pa(t))}function rr(e,t,i){var n=Ps(e)?ut:Lt;return t=ki(t,i,3),n(e,function(e,i,n){return!t(e,i,n)})}function ar(e,t,i){if(i?en(e,t,i):null==t){e=cn(e);var n=e.length;return n>0?e[Yt(0,n-1)]:g}var r=-1,a=Xr(e),n=a.length,o=n-1;for(t=vo(0>t?0:+t||0,n);++r<t;){var s=Yt(r,o),l=a[s];a[s]=a[r],a[r]=l}return a.length=t,a}function or(e){return ar(e,bo)}function sr(e){var t=e?Yo(e):0;return rn(t)?t:Ws(e).length}function lr(e,t,i){var n=Ps(e)?Dt:Zt;if(i&&en(e,t,i))t=g;if("function"!=typeof t||i!==g)t=ki(t,i,3);return n(e,t)}function ur(e,t,i){if(null==e)return[];if(i&&en(e,t,i))t=g;var n=-1;t=ki(t,i,3);var r=wt(e,function(e,i,r){return{criteria:t(e,i,r),index:++n,value:e}});return qt(r,s)}function Ar(e,t,i,n){if(null==e)return[];if(n&&en(t,i,n))i=g;if(!Ps(t))t=null==t?[]:[t];if(!Ps(i))i=null==i?[]:[i];return $t(e,t,i)}function Br(e,t){return $n(e,Rt(t))}function cr(e,t){if("function"!=typeof t)if("function"==typeof e){var i=e;e=t,t=i}else throw new Za(w);return e=Ho(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments);else return void 0}}function Cr(e,t,i){if(i&&en(e,t,i))t=g;return t=e&&null==t?e.length:Io(+t||0,0),Ti(e,b,g,g,g,g,t)}function Dr(e,t){var i;if("function"!=typeof t)if("function"==typeof e){var n=e;e=t,t=n}else throw new Za(w);return function(){if(--e>0)i=t.apply(this,arguments);if(1>=e)t=g;return i}}function dr(e,t,i){function n(){if(C)uo(C);if(u)uo(u);d=0,u=C=D=g}function r(t,i){if(i)uo(i);if(u=C=D=g,t)if(d=ms(),A=e.apply(c,l),!C&&!u)l=c=g}function a(){var e=t-(ms()-B);if(0>=e||e>t)r(D,u);else C=Do(a,e)}function o(){r(h,C)}function s(){if(l=arguments,B=ms(),c=this,D=h&&(C||!E),f===!1)var i=E&&!C;else{if(!u&&!E)d=B;var n=f-(B-d),r=0>=n||n>f;if(r){if(u)u=uo(u);d=B,A=e.apply(c,l)}else if(!u)u=Do(o,n)}if(r&&C)C=uo(C);else if(!C&&t!==f)C=Do(a,t);if(i)r=!0,A=e.apply(c,l);if(r&&!C&&!u)l=c=g;return A}var l,u,A,B,c,C,D,d=0,f=!1,h=!0;if("function"!=typeof e)throw new Za(w);if(t=0>t?0:+t||0,i===!0){var E=!0;h=!1}else if(_r(i))E=!!i.leading,f="maxWait"in i&&Io(+i.maxWait||0,t),h="trailing"in i?!!i.trailing:h;return s.cancel=n,s}function fr(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Za(w);var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],a=i.cache;if(a.has(r))return a.get(r);var o=e.apply(this,n);return i.cache=a.set(r,o),o};return i.cache=new fr.Cache,i}function hr(e){if("function"!=typeof e)throw new Za(w);return function(){return!e.apply(this,arguments)}}function Er(e){return Dr(2,e)}function pr(e,t){if("function"!=typeof e)throw new Za(w);return t=Io(t===g?e.length-1:+t||0,0),function(){for(var i=arguments,n=-1,r=Io(i.length-t,0),a=ka(r);++n<r;)a[n]=i[t+n];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,i[0],a);case 2:return e.call(this,i[0],i[1],a)}var o=ka(t+1);for(n=-1;++n<t;)o[n]=i[n];return o[t]=a,e.apply(this,o)}}function Fr(e){if("function"!=typeof e)throw new Za(w);return function(t){return e.apply(this,t)}}function mr(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new Za(w);if(i===!1)n=!1;else if(_r(i))n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r;return dr(e,t,{leading:n,maxWait:+t,trailing:r})}function gr(e,t){return t=null==t?La:t,Ti(t,L,g,[e],[])}function Hr(e,t,i,n){if(t&&"boolean"!=typeof t&&en(e,t,i))t=!1;else if("function"==typeof t)n=i,i=t,t=!1;return"function"==typeof i?Ht(e,t,si(i,n,3)):Ht(e,t)}function Gr(e,t,i){return"function"==typeof t?Ht(e,!0,si(t,i,3)):Ht(e,!0)}function Ir(e,t){return e>t}function vr(e,t){return e>=t}function yr(e){return D(e)&&qi(e)&&no.call(e,"callee")&&!co.call(e,"callee")}function Jr(e){return e===!0||e===!1||D(e)&&ao.call(e)==V}function Lr(e){return D(e)&&ao.call(e)==U}function Mr(e){return!!e&&1===e.nodeType&&D(e)&&!kr(e)}function br(e){if(null==e)return!0;if(qi(e)&&(Ps(e)||Vr(e)||yr(e)||D(e)&&Pr(e.splice)))return!e.length;else return!Ws(e).length}function Nr(e,t,i,n){i="function"==typeof i?si(i,n,3):g;var r=i?i(e,t):g;return r===g?Ot(e,t,i):!!r}function Kr(e){return D(e)&&"string"==typeof e.message&&ao.call(e)==W}function xr(e){return"number"==typeof e&&Ho(e)}function Pr(e){return _r(e)&&ao.call(e)==z}function _r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Or(e,t,i,n){return i="function"==typeof i?si(i,n,3):g,St(e,Ui(t),i)}function Tr(e){return Rr(e)&&e!=+e}function Sr(e){if(null==e)return!1;if(Pr(e))return so.test(io.call(e));else return D(e)&&(et(e)?so:be).test(e)}function wr(e){return null===e}function Rr(e){return"number"==typeof e||D(e)&&ao.call(e)==X}function kr(e){var t;if(!D(e)||ao.call(e)!=j||et(e)||yr(e)||!no.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var i;if(Y.support.ownLast)return Nt(e,function(e,t,n){return i=no.call(n,t),!1}),i!==!1;else return Nt(e,function(e,t){i=t}),i===g||no.call(e,i)}function Qr(e){return _r(e)&&ao.call(e)==Z}function Vr(e){return"string"==typeof e||D(e)&&ao.call(e)==$}function Ur(e){return D(e)&&rn(e.length)&&!!we[ao.call(e)]}function Wr(e){return e===g}function zr(e,t){return t>e}function Yr(e,t){return t>=e}function Xr(e){var t=e?Yo(e):0;if(!rn(t))return sa(e);if(!t)return[];else return Y.support.unindexedChars&&Vr(e)?e.split(""):rt(e)}function jr(e){return mt(e,ia(e))}function Zr(e,t,i){var n=Ro(e);if(i&&en(e,t,i))t=g;return t?pt(n,t):n}function qr(e){return Pt(e,ia(e))}function $r(e,t,i){var n=null==e?g:_t(e,Dn(t),t+"");return n===g?i:n}function ea(e,t){if(null==e)return!1;var i=no.call(e,t);if(!i&&!tn(t)){if(t=Dn(t),e=1==t.length?e:_t(e,jt(t,0,-1)),null==e)return!1;t=Jn(t),i=no.call(e,t)}return i||rn(e.length)&&$i(t,e.length)&&(Ps(e)||yr(e)||Vr(e))}function ta(e,t,i){if(i&&en(e,t,i))t=g;for(var n=-1,r=Ws(e),a=r.length,o={};++n<a;){var s=r[n],l=e[s];if(t)if(no.call(o,l))o[l].push(s);else o[l]=[s];else o[l]=s}return o}function ia(e){if(null==e)return[];if(!_r(e))e=Ya(e);var t=e.length,i=Y.support;t=t&&rn(t)&&(Ps(e)||yr(e)||Vr(e))&&t||0;for(var n=e.constructor,r=-1,a=Pr(n)&&n.prototype||eo,o=a===e,s=ka(t),l=t>0,u=i.enumErrorProps&&(e===$a||e instanceof Va),A=i.enumPrototypes&&Pr(e);++r<t;)s[r]=r+"";for(var B in e)if(!(A&&"prototype"==B||u&&("message"==B||"name"==B)||l&&$i(B,t)||"constructor"==B&&(o||!no.call(e,B))))s.push(B);if(i.nonEnumShadows&&e!==eo){var c=e===to?$:e===$a?W:ao.call(e),C=So[c]||So[j];if(c==j)a=eo;for(t=Te.length;t--;){B=Te[t];var D=C[B];if((!o||!D)&&(D?no.call(e,B):e[B]!==a[B]))s.push(B)}}return s}function na(e){e=Cn(e);for(var t=-1,i=Ws(e),n=i.length,r=ka(n);++t<n;){var a=i[t];r[t]=[a,e[a]]}return r}function ra(e,t,i){var n=null==e?g:Cn(e)[t];if(n===g){if(null!=e&&!tn(t,e))t=Dn(t),e=1==t.length?e:_t(e,jt(t,0,-1)),n=null==e?g:Cn(e)[Jn(t)];n=n===g?i:n}return Pr(n)?n.call(e):n}function aa(e,t,i){if(null==e)return e;var n=t+"";t=null!=e[n]||tn(t,e)?[n]:Dn(t);for(var r=-1,a=t.length,o=a-1,s=e;null!=s&&++r<a;){var l=t[r];if(_r(s))if(r==o)s[l]=i;else if(null==s[l])s[l]=$i(t[r+1])?[]:{};s=s[l]}return e}function oa(e,t,i,n){var r=Ps(e)||Ur(e);if(t=ki(t,n,4),null==i)if(r||_r(e)){var a=e.constructor;if(r)i=Ps(e)?new a:[];else i=Ro(Pr(a)?a.prototype:g)}else i={};return(r?at:Kt)(e,function(e,n,r){return t(i,e,n,r)}),i}function sa(e){return ii(e,Ws(e))}function la(e){return ii(e,ia(e))}function ua(e,t,i){if(t=+t||0,i===g)i=t,t=0;else i=+i||0;return e>=vo(t,i)&&e<Io(t,i)}function Aa(e,t,i){if(i&&en(e,t,i))t=i=g;var n=null==e,r=null==t;if(null==i)if(r&&"boolean"==typeof e)i=e,e=1;else if("boolean"==typeof t)i=t,r=!0;if(n&&r)t=1,r=!1;if(e=+e||0,r)t=e,e=0;else t=+t||0;if(i||e%1||t%1){var a=Lo();return vo(e+a*(t-e+Ao("1e-"+((a+"").length-1))),t)}return Yt(e,t)}function Ba(e){return e=r(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ca(e){return e=r(e),e&&e.replace(Ke,u).replace(ve,"")}function Ca(e,t,i){e=r(e),t+="";var n=e.length;return i=i===g?n:vo(0>i?0:+i||0,n),i-=t.length,i>=0&&e.indexOf(t,i)==i}function Da(e){return e=r(e),e&&he.test(e)?e.replace(de,A):e}function da(e){return e=r(e),e&&Ie.test(e)?e.replace(Ge,B):e||"(?:)"}function fa(e,t,i){e=r(e),t=+t;var n=e.length;if(n>=t||!Ho(t))return e;var a=(t-n)/2,o=mo(a),s=po(a);return i=xi("",s,i),i.slice(0,o)+e+i}function ha(e,t,i){if(i?en(e,t,i):null==t)t=0;else if(t)t=+t;return e=ma(e),Jo(e,t||(Me.test(e)?16:10))}function Ea(e,t){var i="";if(e=r(e),t=+t,1>t||!e||!Ho(t))return i;do{if(t%2)i+=e;t=mo(t/2),e+=e}while(t);return i}function pa(e,t,i){return e=r(e),i=null==i?0:vo(0>i?0:+i||0,e.length),e.lastIndexOf(t,i)==i}function Fa(e,t,i){var n=Y.templateSettings;if(i&&en(e,t,i))t=i=g;e=r(e),t=Et(pt({},i||t),n,ht);var a,o,s=Et(pt({},t.imports),n.imports,ht),l=Ws(s),u=ii(s,l),A=0,B=t.interpolate||xe,C="__p += '",D=Xa((t.escape||xe).source+"|"+B.source+"|"+(B===Fe?Je:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Se+"]")+"\n";e.replace(D,function(t,i,n,r,s,l){if(n||(n=r),C+=e.slice(A,l).replace(Pe,c),i)a=!0,C+="' +\n__e("+i+") +\n'";if(s)o=!0,C+="';\n"+s+";\n__p += '";if(n)C+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'";return A=l+t.length,t}),C+="';\n";var f=t.variable;if(!f)C="with (obj) {\n"+C+"\n}\n";C=(o?C.replace(Be,""):C).replace(ce,"$1").replace(Ce,"$1;"),C="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+C+"return __p\n}";var h=nl(function(){return Ua(l,d+"return "+C).apply(g,u)});if(h.source=C,Kr(h))throw h;return h}function ma(e,t,i){var n=e;if(e=r(e),!e)return e;if(i?en(n,t,i):null==t)return e.slice(E(e),p(e)+1);else return t+="",e.slice(a(e,t),o(e,t)+1)}function ga(e,t,i){var n=e;if(e=r(e),!e)return e;if(i?en(n,t,i):null==t)return e.slice(E(e));else return e.slice(a(e,t+""))}function Ha(e,t,i){var n=e;if(e=r(e),!e)return e;if(i?en(n,t,i):null==t)return e.slice(0,p(e)+1);else return e.slice(0,o(e,t+"")+1)}function Ga(e,t,i){if(i&&en(e,t,i))t=g;var n=K,a=x;if(null!=t)if(_r(t)){var o="separator"in t?t.separator:o;n="length"in t?+t.length||0:n,a="omission"in t?r(t.omission):a}else n=+t||0;if(e=r(e),n>=e.length)return e;var s=n-a.length;if(1>s)return a;var l=e.slice(0,s);if(null==o)return l+a;if(Qr(o)){if(e.slice(s).search(o)){var u,A,B=e.slice(0,s);if(!o.global)o=Xa(o.source,(Le.exec(o)||"")+"g");for(o.lastIndex=0;u=o.exec(B);)A=u.index;l=l.slice(0,null==A?s:A)}}else if(e.indexOf(o,s)!=s){var c=l.lastIndexOf(o);if(c>-1)l=l.slice(0,c)}return l+a}function Ia(e){return e=r(e),e&&fe.test(e)?e.replace(De,F):e}function va(e,t,i){if(i&&en(e,t,i))t=g;return e=r(e),e.match(t||_e)||[]}function ya(e,t,i){if(i&&en(e,t,i))t=g;return D(e)?Ma(e):gt(e,t)}function Ja(e){return function(){return e}}function La(e){return e}function Ma(e){return Rt(Ht(e,!0))}function ba(e,t){return kt(e,Ht(t,!0))}function Na(e,t,i){if(null==i){var n=_r(t),r=n?Ws(t):g,a=r&&r.length?Pt(t,r):g;if(!(a?a.length:n))a=!1,i=t,t=e,e=this}if(!a)a=Pt(t,Ws(t));var o=!0,s=-1,l=Pr(e),u=a.length;if(i===!1)o=!1;else if(_r(i)&&"chain"in i)o=i.chain;for(;++s<u;){var A=a[s],B=t[A];if(e[A]=B,l)e.prototype[A]=function(t){return function(){var i=this.__chain__;if(o||i){var n=e(this.__wrapped__),r=n.__actions__=rt(this.__actions__);return r.push({func:t,args:arguments,thisArg:e}),n.__chain__=i,n}return t.apply(e,Bt([this.value()],arguments))}}(B)}return e}function Ka(){return $e._=oo,this}function xa(){}function Pa(e){return tn(e)?Ut(e):Wt(e)}function _a(e){return function(t){return _t(e,Dn(t),t+"")}}function Oa(e,t,i){if(i&&en(e,t,i))t=i=g;if(e=+e||0,i=null==i?1:+i||0,null==t)t=e,e=0;else t=+t||0;for(var n=-1,r=Io(po((t-e)/(i||1)),0),a=ka(r);++n<r;)a[n]=e,e+=i;return a}function Ta(e,t,i){if(e=mo(e),1>e||!Ho(e))return[];var n=-1,r=ka(vo(e,No));for(t=si(t,i,1);++n<e;)if(No>n)r[n]=t(n);else t(n);return r}function Sa(e){var t=++ro;return r(e)+t}function wa(e,t){return(+e||0)+(+t||0)}function Ra(e,t,i){if(i&&en(e,t,i))t=g;return t=ki(t,i,3),1==t.length?dt(Ps(e)?e:cn(e),t):ei(e,t)}d=d?tt.defaults($e.Object(),d,tt.pick($e,Oe)):$e;var ka=d.Array,Qa=d.Date,Va=d.Error,Ua=d.Function,Wa=d.Math,za=d.Number,Ya=d.Object,Xa=d.RegExp,ja=d.String,Za=d.TypeError,qa=ka.prototype,$a=Va.prototype,eo=Ya.prototype,to=ja.prototype,io=Ua.prototype.toString,no=eo.hasOwnProperty,ro=0,ao=eo.toString,oo=$e._,so=Xa("^"+io.call(no).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lo=d.ArrayBuffer,uo=d.clearTimeout,Ao=d.parseFloat,Bo=Wa.pow,co=eo.propertyIsEnumerable,Co=Wi(d,"Set"),Do=d.setTimeout,fo=qa.splice,ho=d.Uint8Array,Eo=Wi(d,"WeakMap"),po=Wa.ceil,Fo=Wi(Ya,"create"),mo=Wa.floor,go=Wi(ka,"isArray"),Ho=d.isFinite,Go=Wi(Ya,"keys"),Io=Wa.max,vo=Wa.min,yo=Wi(Qa,"now"),Jo=d.parseInt,Lo=Wa.random,Mo=za.NEGATIVE_INFINITY,bo=za.POSITIVE_INFINITY,No=4294967295,Ko=No-1,xo=No>>>1,Po=9007199254740991,_o=Eo&&new Eo,Oo={},To={};To[ie]=d.Float32Array,To[ne]=d.Float64Array,To[re]=d.Int8Array,To[ae]=d.Int16Array,To[oe]=d.Int32Array,To[se]=ho,To[le]=d.Uint8ClampedArray,To[ue]=d.Uint16Array,To[Ae]=d.Uint32Array;var So={};So[Q]=So[U]=So[X]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},So[V]=So[$]={constructor:!0,toString:!0,valueOf:!0},So[W]=So[z]=So[Z]={constructor:!0,toString:!0},So[j]={constructor:!0},at(Te,function(e){for(var t in So)if(no.call(So,t)){var i=So[t];i[e]=no.call(i,e)}});var wo=Y.support={};!function(e){var t=function(){this.x=e},i={0:e,length:e},n=[];t.prototype={valueOf:e,y:e};for(var r in new t)n.push(r);wo.enumErrorProps=co.call($a,"message")||co.call($a,"name"),wo.enumPrototypes=co.call(t,"prototype"),wo.nonEnumShadows=!/valueOf/.test(n),wo.ownLast="x"!=n[0],wo.spliceObjects=(fo.call(i,0,1),!i[0]),wo.unindexedChars="x"[0]+Ya("x")[0]!="xx"}(1,0),Y.templateSettings={escape:Ee,evaluate:pe,interpolate:Fe,variable:"",imports:{_:Y}};var Ro=function(){function e(){}return function(t){if(_r(t)){e.prototype=t;var i=new e;e.prototype=g}return i||{}}}(),ko=Ci(Kt),Qo=Ci(xt,!0),Vo=Di(),Uo=Di(!0),Wo=!_o?La:function(e,t){return _o.set(e,t),e},zo=!_o?xa:function(e){return _o.get(e)},Yo=Ut("length"),Xo=function(){var e=0,t=0;return function(i,n){var r=ms(),a=_-(r-t);if(t=r,a>0){if(++e>=P)return i}else e=0;return Wo(i,n)}}(),jo=pr(function(e,t){return D(e)&&qi(e)?It(e,bt(t,!1,!0)):[]}),Zo=Hi(),qo=Hi(!0),$o=pr(function(e){for(var t=e.length,n=t,r=ka(B),a=Vi(),o=a===i,s=[];n--;){var l=e[n]=qi(l=e[n])?l:[];r[n]=o&&l.length>=120?fi(n&&l):null}var u=e[0],A=-1,B=u?u.length:0,c=r[0];e:for(;++A<B;)if(l=u[A],(c?qe(c,l):a(s,l,0))<0){for(var n=t;--n;){var C=r[n];if((C?qe(C,l):a(e[n],l,0))<0)continue e}if(c)c.push(l);s.push(l)}return s}),es=pr(function(t,i){i=bt(i);var n=Ft(t,i);return zt(t,i.sort(e)),n}),ts=Oi(),is=Oi(!0),ns=pr(function(e){return ti(bt(e,!1,!0))}),rs=pr(function(e,t){return qi(e)?It(e,t):[]}),as=pr(Sn),os=pr(function(e){var t=e.length,i=t>2?e[t-2]:g,n=t>1?e[t-1]:g;if(t>2&&"function"==typeof i)t-=2;else i=t>1&&"function"==typeof n?(--t,n):g,n=g;return e.length=t,wn(e,i,n)}),ss=pr(function(e){return e=bt(e),this.thru(function(t){return nt(Ps(t)?t:[Cn(t)],e)})}),ls=pr(function(e,t){if(qi(e))e=cn(e);return Ft(e,bt(t))}),us=Bi(function(e,t,i){no.call(e,i)?++e[i]:e[i]=1}),As=gi(ko),Bs=gi(Qo,!0),cs=vi(at,ko),Cs=vi(ot,Qo),Ds=Bi(function(e,t,i){if(no.call(e,i))e[i].push(t);else e[i]=[t]}),ds=Bi(function(e,t,i){e[i]=t}),fs=pr(function(e,t,i){var n=-1,r="function"==typeof t,a=tn(t),o=qi(e)?ka(e.length):[];return ko(e,function(e){var s=r?t:a&&null!=e?e[t]:g;o[++n]=s?s.apply(e,i):Zi(e,t,i)}),o}),hs=Bi(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]}),Es=Ni(ct,ko),ps=Ni(Ct,Qo),Fs=pr(function(e,t){if(null==e)return[];var i=t[2];if(i&&en(t[0],t[1],i))t.length=1;return $t(e,bt(t),[])}),ms=yo||function(){return(new Qa).getTime()},gs=pr(function(e,t,i){var n=G;if(i.length){var r=f(i,gs.placeholder);n|=L}return Ti(e,n,t,i,r)}),Hs=pr(function(e,t){t=t.length?bt(t):qr(e);for(var i=-1,n=t.length;++i<n;){var r=t[i];e[r]=Ti(e[r],G,e)}return e}),Gs=pr(function(e,t,i){var n=G|I;if(i.length){var r=f(i,Gs.placeholder);n|=L}return Ti(t,n,e,i,r)}),Is=pi(y),vs=pi(J),ys=pr(function(e,t){return Gt(e,1,t)}),Js=pr(function(e,t,i){return Gt(e,t,i)}),Ls=Ii(),Ms=Ii(!0),bs=pr(function(e,t){if(t=bt(t),"function"!=typeof e||!st(t,n))throw new Za(w);var i=t.length;return pr(function(n){for(var r=vo(n.length,i);r--;)n[r]=t[r](n[r]);return e.apply(this,n)})}),Ns=bi(L),Ks=bi(M),xs=pr(function(e,t){return Ti(e,N,g,g,g,bt(t))}),Ps=go||function(e){return D(e)&&rn(e.length)&&ao.call(e)==Q},_s=ci(Qt),Os=ci(function(e,t,i){return i?Et(e,t,i):pt(e,t)}),Ts=Fi(Os,ft),Ss=Fi(_s,sn),ws=Gi(Kt),Rs=Gi(xt),ks=yi(Vo),Qs=yi(Uo),Vs=Ji(Kt),Us=Ji(xt),Ws=!Go?Bn:function(e){var t=null==e?g:e.constructor;if("function"==typeof t&&t.prototype===e||("function"==typeof e?Y.support.enumPrototypes:qi(e)))return Bn(e);else return _r(e)?Go(e):[]},zs=Li(!0),Ys=Li(),Xs=pr(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=At(bt(t),ja);return ln(e,It(ia(e),t))}var i=si(t[0],t[1],3);return un(e,function(e,t,n){return!i(e,t,n)})}),js=pr(function(e,t){if(null==e)return{};else return"function"==typeof t[0]?un(e,si(t[0],t[1],3)):ln(e,bt(t))}),Zs=hi(function(e,t,i){return t=t.toLowerCase(),e+(i?t.charAt(0).toUpperCase()+t.slice(1):t)}),qs=hi(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),$s=Mi(),el=Mi(!0),tl=hi(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}),il=hi(function(e,t,i){return e+(i?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),nl=pr(function(e,t){try{return e.apply(g,t)}catch(i){return Kr(i)?i:new Va(i)}}),rl=pr(function(e,t){return function(i){return Zi(i,e,t)}}),al=pr(function(e,t){return function(i){return Zi(e,i,t)}}),ol=_i("ceil"),sl=_i("floor"),ll=mi(Ir,Mo),ul=mi(zr,bo),Al=_i("round");return Y.prototype=q.prototype,ee.prototype=Ro(q.prototype),ee.prototype.constructor=ee,ke.prototype=Ro(q.prototype),ke.prototype.constructor=ke,We.prototype["delete"]=ze,We.prototype.get=Ye,We.prototype.has=Xe,We.prototype.set=je,Ze.prototype.push=it,fr.Cache=We,Y.after=cr,Y.ary=Cr,Y.assign=Os,Y.at=ls,Y.before=Dr,Y.bind=gs,Y.bindAll=Hs,Y.bindKey=Gs,Y.callback=ya,Y.chain=Qn,Y.chunk=fn,Y.compact=hn,Y.constant=Ja,Y.countBy=us,Y.create=Zr,Y.curry=Is,Y.curryRight=vs,Y.debounce=dr,Y.defaults=Ts,Y.defaultsDeep=Ss,Y.defer=ys,Y.delay=Js,Y.difference=jo,Y.drop=En,Y.dropRight=pn,Y.dropRightWhile=Fn,Y.dropWhile=mn,Y.fill=gn,Y.filter=$n,Y.flatten=Gn,Y.flattenDeep=In,Y.flow=Ls,Y.flowRight=Ms,Y.forEach=cs,Y.forEachRight=Cs,Y.forIn=ks,Y.forInRight=Qs,Y.forOwn=Vs,Y.forOwnRight=Us,Y.functions=qr,Y.groupBy=Ds,Y.indexBy=ds,Y.initial=yn,Y.intersection=$o,Y.invert=ta,Y.invoke=fs,Y.keys=Ws,Y.keysIn=ia,Y.map=ir,Y.mapKeys=zs,Y.mapValues=Ys,Y.matches=Ma,Y.matchesProperty=ba,Y.memoize=fr,Y.merge=_s,Y.method=rl,Y.methodOf=al,Y.mixin=Na,Y.modArgs=bs,Y.negate=hr,Y.omit=Xs,Y.once=Er,Y.pairs=na,Y.partial=Ns,Y.partialRight=Ks,Y.partition=hs,Y.pick=js,Y.pluck=nr,Y.property=Pa,Y.propertyOf=_a,Y.pull=Mn,Y.pullAt=es,Y.range=Oa,Y.rearg=xs,Y.reject=rr,Y.remove=bn,Y.rest=Nn,Y.restParam=pr,Y.set=aa,Y.shuffle=or,Y.slice=Kn,Y.sortBy=ur,Y.sortByAll=Fs,Y.sortByOrder=Ar,Y.spread=Fr,Y.take=xn,Y.takeRight=Pn,Y.takeRightWhile=_n,Y.takeWhile=On,Y.tap=Vn,Y.throttle=mr,Y.thru=Un,Y.times=Ta,Y.toArray=Xr,Y.toPlainObject=jr,Y.transform=oa,Y.union=ns,Y.uniq=Tn,Y.unzip=Sn,Y.unzipWith=wn,Y.values=sa,Y.valuesIn=la,Y.where=Br,Y.without=rs,Y.wrap=gr,Y.xor=Rn,Y.zip=as,Y.zipObject=kn,Y.zipWith=os,Y.backflow=Ms,Y.collect=ir,Y.compose=Ms,Y.each=cs,Y.eachRight=Cs,Y.extend=Os,Y.iteratee=ya,Y.methods=qr,Y.object=kn,Y.select=$n,Y.tail=Nn,Y.unique=Tn,Na(Y,Y),Y.add=wa,Y.attempt=nl,Y.camelCase=Zs,Y.capitalize=Ba,Y.ceil=ol,Y.clone=Hr,Y.cloneDeep=Gr,Y.deburr=ca,Y.endsWith=Ca,Y.escape=Da,Y.escapeRegExp=da,Y.every=qn,Y.find=As,Y.findIndex=Zo,Y.findKey=ws,Y.findLast=Bs,Y.findLastIndex=qo,Y.findLastKey=Rs,Y.findWhere=er,Y.first=Hn,Y.floor=sl,Y.get=$r,Y.gt=Ir,Y.gte=vr,Y.has=ea,Y.identity=La,Y.includes=tr,Y.indexOf=vn,Y.inRange=ua,Y.isArguments=yr,Y.isArray=Ps,Y.isBoolean=Jr,Y.isDate=Lr,Y.isElement=Mr,Y.isEmpty=br,Y.isEqual=Nr,Y.isError=Kr,Y.isFinite=xr,Y.isFunction=Pr,Y.isMatch=Or,Y.isNaN=Tr,Y.isNative=Sr,Y.isNull=wr,Y.isNumber=Rr,Y.isObject=_r,Y.isPlainObject=kr,Y.isRegExp=Qr,Y.isString=Vr,Y.isTypedArray=Ur,Y.isUndefined=Wr,Y.kebabCase=qs,Y.last=Jn,Y.lastIndexOf=Ln,Y.lt=zr,Y.lte=Yr,Y.max=ll,Y.min=ul,Y.noConflict=Ka,Y.noop=xa,Y.now=ms,Y.pad=fa,Y.padLeft=$s,Y.padRight=el,Y.parseInt=ha,Y.random=Aa,Y.reduce=Es,Y.reduceRight=ps,Y.repeat=Ea,Y.result=ra,Y.round=Al,Y.runInContext=m,Y.size=sr,Y.snakeCase=tl,Y.some=lr,Y.sortedIndex=ts,Y.sortedLastIndex=is,Y.startCase=il,Y.startsWith=pa,Y.sum=Ra,Y.template=Fa,Y.trim=ma,Y.trimLeft=ga,Y.trimRight=Ha,Y.trunc=Ga,Y.unescape=Ia,Y.uniqueId=Sa,Y.words=va,Y.all=qn,Y.any=lr,Y.contains=tr,Y.eq=Nr,Y.detect=As,Y.foldl=Es,Y.foldr=ps,Y.head=Hn,Y.include=tr,Y.inject=Es,Na(Y,function(){var e={};return Kt(Y,function(t,i){if(!Y.prototype[i])e[i]=t}),e}(),!1),Y.sample=ar,Y.prototype.sample=function(e){if(!this.__chain__&&null==e)return ar(this.value());else return this.thru(function(t){return ar(t,e)})},Y.VERSION=H,at(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Y[e].placeholder=Y}),at(["drop","take"],function(e,t){ke.prototype[e]=function(i){var n=this.__filtered__;if(n&&!t)return new ke(this);i=null==i?1:Io(mo(i)||0,0);var r=this.clone();if(n)r.__takeCount__=vo(r.__takeCount__,i);else r.__views__.push({size:i,type:e+(r.__dir__<0?"Right":"")});return r},ke.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),at(["filter","map","takeWhile"],function(e,t){var i=t+1,n=i!=S;ke.prototype[e]=function(e,t){var r=this.clone();return r.__iteratees__.push({iteratee:ki(e,t,1),type:i}),r.__filtered__=r.__filtered__||n,r}}),at(["first","last"],function(e,t){var i="take"+(t?"Right":"");ke.prototype[e]=function(){return this[i](1).value()[0]}}),at(["initial","rest"],function(e,t){var i="drop"+(t?"":"Right");ke.prototype[e]=function(){return this.__filtered__?new ke(this):this[i](1)}}),at(["pluck","where"],function(e,t){var i=t?"filter":"map",n=t?Rt:Pa;ke.prototype[e]=function(e){return this[i](n(e))}}),ke.prototype.compact=function(){return this.filter(La)},ke.prototype.reject=function(e,t){return e=ki(e,t,1),this.filter(function(t){return!e(t)})},ke.prototype.slice=function(e,t){e=null==e?0:+e||0;var i=this;if(i.__filtered__&&(e>0||0>t))return new ke(i);if(0>e)i=i.takeRight(-e);else if(e)i=i.drop(e);if(t!==g)t=+t||0,i=0>t?i.dropRight(-t):i.take(t-e);return i},ke.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},ke.prototype.toArray=function(){return this.take(bo)},Kt(ke.prototype,function(e,t){var i=/^(?:filter|map|reject)|While$/.test(t),n=/^(?:first|last)$/.test(t),r=Y[n?"take"+("last"==t?"Right":""):t];if(r)Y.prototype[t]=function(){var t=n?[1]:arguments,a=this.__chain__,o=this.__wrapped__,s=!!this.__actions__.length,l=o instanceof ke,u=t[0],A=l||Ps(o);if(A&&i&&"function"==typeof u&&1!=u.length)l=A=!1;var B=function(e){return n&&a?r(e,1)[0]:r.apply(g,Bt([e],t))},c={func:Un,args:[B],thisArg:g},C=l&&!s;if(n&&!a)if(C)return o=o.clone(),o.__actions__.push(c),e.call(o);else return r.call(g,this.value())[0];if(!n&&A){o=C?o:new ke(this);var D=e.apply(o,t);return D.__actions__.push(c),new ee(D,a)}return this.thru(B)}}),at(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?to:qa)[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=!wo.spliceObjects&&/^(?:pop|shift|splice)$/.test(e),r=/^(?:join|pop|replace|shift)$/.test(e),a=!n?t:function(){var e=t.apply(this,arguments);if(0===this.length)delete this[0];return e};Y.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__)return a.apply(this.value(),e);else return this[i](function(t){return a.apply(t,e)})}}),Kt(ke.prototype,function(e,t){var i=Y[t];if(i){var n=i.name+"",r=Oo[n]||(Oo[n]=[]);r.push({name:t,func:i})}}),Oo[Ki(g,I).name]=[{name:"wrapper",func:g}],ke.prototype.clone=Qe,ke.prototype.reverse=Ve,ke.prototype.value=Ue,Y.prototype.chain=Wn,Y.prototype.commit=zn,Y.prototype.concat=ss,Y.prototype.plant=Yn,Y.prototype.reverse=Xn,Y.prototype.toString=jn,Y.prototype.run=Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Zn,Y.prototype.collect=Y.prototype.map,Y.prototype.head=Y.prototype.first,Y.prototype.select=Y.prototype.filter,Y.prototype.tail=Y.prototype.rest,Y}var g,H="3.10.1",G=1,I=2,v=4,y=8,J=16,L=32,M=64,b=128,N=256,K=30,x="...",P=150,_=16,O=200,T=1,S=2,w="Expected a function",R="__lodash_placeholder__",k="[object Arguments]",Q="[object Array]",V="[object Boolean]",U="[object Date]",W="[object Error]",z="[object Function]",Y="[object Map]",X="[object Number]",j="[object Object]",Z="[object RegExp]",q="[object Set]",$="[object String]",ee="[object WeakMap]",te="[object ArrayBuffer]",ie="[object Float32Array]",ne="[object Float64Array]",re="[object Int8Array]",ae="[object Int16Array]",oe="[object Int32Array]",se="[object Uint8Array]",le="[object Uint8ClampedArray]",ue="[object Uint16Array]",Ae="[object Uint32Array]",Be=/\b__p \+= '';/g,ce=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,De=/&(?:amp|lt|gt|quot|#39|#96);/g,de=/[&<>"'`]/g,fe=RegExp(De.source),he=RegExp(de.source),Ee=/<%-([\s\S]+?)%>/g,pe=/<%([\s\S]+?)%>/g,Fe=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ge=/^\w*$/,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ge=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ie=RegExp(Ge.source),ve=/[\u0300-\u036f\ufe20-\ufe23]/g,ye=/\\(\\)?/g,Je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Le=/\w*$/,Me=/^0[xX]/,be=/^\[object .+?Constructor\]$/,Ne=/^\d+$/,Ke=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xe=/($^)/,Pe=/['\n\r\u2028\u2029\\]/g,_e=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Oe=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Te=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Se=-1,we={};we[ie]=we[ne]=we[re]=we[ae]=we[oe]=we[se]=we[le]=we[ue]=we[Ae]=!0,we[k]=we[Q]=we[te]=we[V]=we[U]=we[W]=we[z]=we[Y]=we[X]=we[j]=we[Z]=we[q]=we[$]=we[ee]=!1;var Re={};Re[k]=Re[Q]=Re[te]=Re[V]=Re[U]=Re[ie]=Re[ne]=Re[re]=Re[ae]=Re[oe]=Re[X]=Re[j]=Re[Z]=Re[$]=Re[se]=Re[le]=Re[ue]=Re[Ae]=!0,Re[W]=Re[z]=Re[Y]=Re[q]=Re[ee]=!1;var ke={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ve={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ue={"function":!0,object:!0},We={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},ze={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ye=Ue[typeof exports]&&exports&&!exports.nodeType&&exports,Xe=Ue[typeof module]&&module&&!module.nodeType&&module,je=Ye&&Xe&&"object"==typeof global&&global&&global.Object&&global,Ze=Ue[typeof self]&&self&&self.Object&&self,qe=Ue[typeof window]&&window&&window.Object&&window,$e=(Xe&&Xe.exports===Ye&&Ye,je||qe!==(this&&this.window)&&qe||Ze||this),et=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}(),tt=m();return tt}),define("lodash",["lodash/lodash"],function(e){return e}),define("json-editor/utilities",["require"],function(require){var exports={};return exports.$isplainobject=function(e){if("object"!=typeof e||e.nodeType||null!==e&&e===e.window)return!1;if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1;else return!0},exports.$extend=function(e){var t,i,n;for(i=1;i<arguments.length;i++){t=arguments[i];for(n in t)if(t.hasOwnProperty(n))if(t[n]&&exports.$isplainobject(t[n])){if(!e.hasOwnProperty(n))e[n]={};exports.$extend(e[n],t[n])}else e[n]=t[n];else;}return e},exports.$each=function(e,t){if(e&&"object"==typeof e){var i;if(Array.isArray(e)||"number"==typeof e.length&&e.length>0&&e.length-1 in e){for(i=0;i<e.length;i++)if(t(i,e[i])===!1)return}else if(Object.keys){var n=Object.keys(e);for(i=0;i<n.length;i++)if(t(n[i],e[n[i]])===!1)return}else for(i in e)if(e.hasOwnProperty(i)){if(t(i,e[i])===!1)return}else;}},exports.$trigger=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)},exports.$triggerc=function(e,t){var i=new CustomEvent(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(i)},exports}),define("json-editor/core",["require","./utilities"],function(require){function e(i,n){if(!(i instanceof Element))throw new Error("element should be an instance of Element");n=t.$extend({},e.defaults.options,n||{}),this.element=i,this.options=n,this.init()}var t=require("./utilities");return e.prototype={constructor:e,init:function(){var t=this;this.ready=!1;var i=e.defaults.themes[this.options.theme||e.defaults.theme];if(!i)throw"Unknown theme "+(this.options.theme||e.defaults.theme);this.schema=this.options.schema,this.theme=new i,this.template=this.options.template,this.refs=this.options.refs||{},this.uuid=0,this.__data={};var n=e.defaults.iconlibs[this.options.iconlib||e.defaults.iconlib];if(n)this.iconlib=new n;this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||e.defaults.translate,this._loadExternalRefs(this.schema,function(){t._getDefinitions(t.schema);var i={};if(t.options.custom_validators)i.custom_validators=t.options.custom_validators;t.validator=new e.Validator(t,null,i);var n=t.getEditorClass(t.schema);if(t.root=t.createEditor(n,{jsoneditor:t,schema:t.schema,required:!0,container:t.root_container}),t.root.preBuild(),t.root.build(),t.root.postBuild(),t.options.startval)t.root.setValue(t.options.startval);t.validation_results=t.validator.validate(t.root.getValue()),t.root.showValidationErrors(t.validation_results),t.ready=!0,window.requestAnimationFrame(function(){if(t.ready)t.validation_results=t.validator.validate(t.root.getValue()),t.root.showValidationErrors(t.validation_results),t.trigger("ready"),t.trigger("change")})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(e),this},validate:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";if(1===arguments.length)return this.validator.validate(e);else return this.validation_results},destroy:function(){if(!this.destroyed)if(this.ready)this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,
this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0},on:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},off:function(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];for(var i=[],n=0;n<this.callbacks[e].length;n++)if(this.callbacks[e][n]!==t)i.push(this.callbacks[e][n]);else;this.callbacks[e]=i}else if(e)this.callbacks=this.callbacks||{},this.callbacks[e]=[];else this.callbacks={};return this},trigger:function(e){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(var t=0;t<this.callbacks[e].length;t++)this.callbacks[e][t]();return this},setOption:function(e,t){if("show_errors"===e)this.options.show_errors=t,this.onChange();else throw"Option "+e+" must be set during instantiation and cannot be changed later";return this},getEditorClass:function(i){var n;if(i=this.expandSchema(i),t.$each(e.defaults.resolvers,function(t,r){var a=r(i);if(a)if(e.defaults.editors[a])return n=a,!1}),!n)throw"Unknown editor for schema "+JSON.stringify(i);if(!e.defaults.editors[n])throw"Unknown editor "+n;return e.defaults.editors[n]},createEditor:function(e,i){return i=t.$extend({},e.options||{},i),new e(i)},onChange:function(){if(this.ready)if(!this.firing_change){this.firing_change=!0;var e=this;return window.requestAnimationFrame(function(){if(e.firing_change=!1,e.ready){if(e.validation_results=e.validator.validate(e.root.getValue()),"never"!==e.options.show_errors)e.root.showValidationErrors(e.validation_results);else e.root.showValidationErrors([]);e.trigger("change")}}),this}},compileTemplate:function(t,i){i=i||e.defaults.template;var n;if("string"==typeof i){if(!e.defaults.templates[i])throw"Unknown template engine "+i;if(n=e.defaults.templates[i](),!n)throw"Template engine "+i+" missing required library."}else n=i;if(!n)throw"No template engine set";if(!n.compile)throw"Invalid template engine set";return n.compile(t)},_data:function(e,t,i){if(3===arguments.length){var n;if(e.hasAttribute("data-jsoneditor-"+t))n=e.getAttribute("data-jsoneditor-"+t);else n=this.uuid++,e.setAttribute("data-jsoneditor-"+t,n);this.__data[n]=i}else if(!e.hasAttribute("data-jsoneditor-"+t))return null;else return this.__data[e.getAttribute("data-jsoneditor-"+t)]},registerEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=e,this},unregisterEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=null,this},getEditor:function(e){if(this.editors)return this.editors[e];else return void 0},watch:function(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this},unwatch:function(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;for(var i=[],n=0;n<this.watchlist[e].length;n++)if(this.watchlist[e][n]!==t)i.push(this.watchlist[e][n]);else;return this.watchlist[e]=i.length?i:null,this},notifyWatchers:function(e){if(!this.watchlist||!this.watchlist[e])return this;for(var t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(e,t){if(t=t||"#/definitions/",e.definitions)for(var i in e.definitions)if(e.definitions.hasOwnProperty(i)){if(this.refs[t+i]=e.definitions[i],e.definitions[i].definitions)this._getDefinitions(e.definitions[i],t+i+"/definitions/")}else;},_getExternalRefs:function(e){var t={},i=function(e){for(var i in e)if(e.hasOwnProperty(i))t[i]=!0};if(e.$ref&&"object"!=typeof e.$ref&&"#"!==e.$ref.substr(0,1)&&!this.refs[e.$ref])t[e.$ref]=!0;for(var n in e)if(e.hasOwnProperty(n)){if(e[n]&&"object"==typeof e[n]&&Array.isArray(e[n])){for(var r=0;r<e[n].length;r++)if("object"==typeof e[n][r])i(this._getExternalRefs(e[n][r]))}else if(e[n]&&"object"==typeof e[n])i(this._getExternalRefs(e[n]))}else;return t},_loadExternalRefs:function(e,i){var n=this,r=this._getExternalRefs(e),a=0,o=0,s=!1;if(t.$each(r,function(e){if(!n.refs[e]){if(!n.options.ajax)throw"Must set ajax option to true to load external ref "+e;n.refs[e]="loading",o++;var t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState)if(200===t.status){var r;try{r=JSON.parse(t.responseText)}catch(l){throw window.console.log(l),"Failed to parse external ref "+e}if(!r||"object"!=typeof r)throw"External ref does not contain a valid schema - "+e;n.refs[e]=r,n._loadExternalRefs(r,function(){if(a++,a>=o&&!s)s=!0,i()})}else throw window.console.log(t),"Failed to fetch ref via ajax- "+e},t.send()}}),!o)i()},expandRefs:function(e){for(e=t.$extend({},e);e.$ref;){var i=e.$ref;if(delete e.$ref,!this.refs[i])i=decodeURIComponent(i);e=this.extendSchemas(e,this.refs[i])}return e},expandSchema:function(e){var i,n=this,r=t.$extend({},e);if("object"==typeof e.type)if(Array.isArray(e.type))t.$each(e.type,function(t,i){if("object"==typeof i)e.type[t]=n.expandSchema(i)});else e.type=n.expandSchema(e.type);if("object"==typeof e.disallow)if(Array.isArray(e.disallow))t.$each(e.disallow,function(t,i){if("object"==typeof i)e.disallow[t]=n.expandSchema(i)});else e.disallow=n.expandSchema(e.disallow);if(e.anyOf)t.$each(e.anyOf,function(t,i){e.anyOf[t]=n.expandSchema(i)});if(e.dependencies)t.$each(e.dependencies,function(t,i){if("object"==typeof i&&!Array.isArray(i))e.dependencies[t]=n.expandSchema(i)});if(e.not)e.not=this.expandSchema(e.not);if(e.allOf){for(i=0;i<e.allOf.length;i++)r=this.extendSchemas(r,this.expandSchema(e.allOf[i]));delete r.allOf}if(e["extends"]){if(!Array.isArray(e["extends"]))r=this.extendSchemas(r,this.expandSchema(e["extends"]));else for(i=0;i<e["extends"].length;i++)r=this.extendSchemas(r,this.expandSchema(e["extends"][i]));delete r["extends"]}if(e.oneOf){var a=t.$extend({},r);for(delete a.oneOf,i=0;i<e.oneOf.length;i++)r.oneOf[i]=this.extendSchemas(this.expandSchema(e.oneOf[i]),a)}return this.expandRefs(r)},extendSchemas:function(e,i){e=t.$extend({},e),i=t.$extend({},i);var n=this,r={};return t.$each(e,function(e,t){if("undefined"!=typeof i[e])if(("required"===e||"defaultProperties"===e)&&"object"==typeof t&&Array.isArray(t))r[e]=t.concat(i[e]).reduce(function(e,t){if(e.indexOf(t)<0)e.push(t);return e},[]);else if("type"===e&&("string"==typeof t||Array.isArray(t))){if("string"==typeof t)t=[t];if("string"==typeof i.type)i.type=[i.type];if(!i.type||!i.type.length)r.type=t;else r.type=t.filter(function(e){return-1!==i.type.indexOf(e)});if(1===r.type.length&&"string"==typeof r.type[0])r.type=r.type[0];else if(0===r.type.length)delete r.type}else if("object"==typeof t&&Array.isArray(t))r[e]=t.filter(function(t){return-1!==i[e].indexOf(t)});else if("object"==typeof t&&null!==t)r[e]=n.extendSchemas(t,i[e]);else r[e]=t;else r[e]=t}),t.$each(i,function(t,i){if("undefined"==typeof e[t])r[t]=i}),r}},e.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]},e}),define("json-editor/templates/underscore",["require","../core"],function(require){var e=require("../core");return e.defaults.templates.underscore=function(){if(!window._)return!1;else return{compile:function(e){return function(t){return window._.template(e,t)}}}},e.defaults.templates.underscore}),define("intro.js/intro",["require","inf-ria/css!./introjs.css"],function(require){function e(e){this._targetElement=e,this._introItems=[],this._options={nextLabel:"下一步 &rarr;",prevLabel:"&larr; 上一步",skipLabel:"&times;",doneLabel:"&times;",doneButtonLabel:"&nbsp;&nbsp;结束&nbsp;&nbsp;",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.8,scrollPadding:30,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0}}function t(e){var t=[],n=this;if(this._options.steps)for(var s=0,l=this._options.steps.length;l>s;s++){var u=i(this._options.steps[s]);if(u.step=t.length+1,"string"==typeof u.element)u.element=document.querySelector(u.element);if("undefined"==typeof u.element||null==u.element){var A=document.querySelector(".introjsFloatingElement");if(null==A)A=document.createElement("div"),A.className="introjsFloatingElement",document.body.appendChild(A);u.element=A,u.position="floating"}if(null!=u.element)t.push(u)}else{var B=e.querySelectorAll("*[data-intro]");if(B.length<1)return!1;for(var s=0,C=B.length;C>s;s++){var D=B[s];if("none"!=D.style.display){var d=parseInt(D.getAttribute("data-step"),10);if(d>0)t[d-1]={element:D,intro:D.getAttribute("data-intro"),step:parseInt(D.getAttribute("data-step"),10),tooltipClass:D.getAttribute("data-tooltipClass"),highlightClass:D.getAttribute("data-highlightClass"),position:D.getAttribute("data-position")||this._options.tooltipPosition}}else;}for(var f=0,s=0,C=B.length;C>s;s++){var D=B[s];if(null==D.getAttribute("data-step")){for(;;)if("undefined"==typeof t[f])break;else f++;t[f]={element:D,intro:D.getAttribute("data-intro"),step:f+1,tooltipClass:D.getAttribute("data-tooltipClass"),highlightClass:D.getAttribute("data-highlightClass"),position:D.getAttribute("data-position")||this._options.tooltipPosition}}}}for(var h=[],E=0;E<t.length;E++)t[E]&&h.push(t[E]);if(t=h,t.sort(function(e,t){return e.step-t.step}),n._introItems=t,m.call(n,e)){r.call(n);e.querySelector(".introjs-skipbutton"),e.querySelector(".introjs-nextbutton");if(n._onKeyDown=function(t){if(27===t.keyCode&&1==n._options.exitOnEsc){if(void 0!=n._introExitCallback)n._introExitCallback.call(n);o.call(n,e)}else if(37===t.keyCode)a.call(n);else if(39===t.keyCode)r.call(n);else if(13===t.keyCode){var i=t.target||t.srcElement;if(i&&i.className.indexOf("introjs-prevbutton")>0)a.call(n);else if(i&&i.className.indexOf("introjs-skipbutton")>0){if(n._introItems.length-1==n._currentStep&&"function"==typeof n._introCompleteCallback)n._introCompleteCallback.call(n);if(void 0!=n._introExitCallback)n._introExitCallback.call(n);o.call(n,e)}else r.call(n);if(t.preventDefault)t.preventDefault();else t.returnValue=!1}},n._onResize=function(e){c.call(n,document.querySelector(".introjs-helperLayer")),c.call(n,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener){if(this._options.keyboardNavigation)window.addEventListener("keydown",n._onKeyDown,!0);window.addEventListener("resize",n._onResize,!0)}else if(document.attachEvent){if(this._options.keyboardNavigation)document.attachEvent("onkeydown",n._onKeyDown);document.attachEvent("onresize",n._onResize)}}return!1}function i(e){if(null==e||"object"!=typeof e||"undefined"!=typeof e.nodeType)return e;var t={};for(var n in e)if("undefined"!=typeof jQuery&&e[n]instanceof jQuery)t[n]=e[n];else t[n]=i(e[n]);return t}function n(e){if(this._currentStep=e-2,"undefined"!=typeof this._introItems)r.call(this)}function r(){if(this._direction="forward","undefined"==typeof this._currentStep)this._currentStep=0;else++this._currentStep;if(this._introItems.length<=this._currentStep){if("function"==typeof this._introCompleteCallback)this._introCompleteCallback.call(this);return void o.call(this,this._targetElement)}var e=this._introItems[this._currentStep];if("undefined"!=typeof this._introBeforeChangeCallback)this._introBeforeChangeCallback.call(this,e.element);d.call(this,e)}function a(){if(this._direction="backward",0===this._currentStep)return!1;var e=this._introItems[--this._currentStep];if("undefined"!=typeof this._introBeforeChangeCallback)this._introBeforeChangeCallback.call(this,e.element);d.call(this,e)}function o(e){var t=e.querySelector(".introjs-overlay");if(null!=t){t.style.opacity=0,setTimeout(function(){if(t.parentNode)t.parentNode.removeChild(t)},500);var i=e.querySelector(".introjs-helperLayer");if(i)i.parentNode.removeChild(i);var n=e.querySelector(".introjs-tooltipReferenceLayer");if(n)n.parentNode.removeChild(n);var r=e.querySelector(".introjs-disableInteraction");if(r)r.parentNode.removeChild(r);var a=document.querySelector(".introjsFloatingElement");if(a)a.parentNode.removeChild(a);var o=document.querySelector(".introjs-showElement");if(o)o.className=o.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");var s=document.querySelectorAll(".introjs-fixParent");if(s&&s.length>0)for(var l=s.length-1;l>=0;l--)s[l].className=s[l].className.replace(/introjs-fixParent|introjs-fixAbsolutePosition|introjs-fixRelativePosition/g,"").replace(/^\s+|\s+$/g,"");if(window.removeEventListener)window.removeEventListener("keydown",this._onKeyDown,!0);else if(document.detachEvent)document.detachEvent("onkeydown",this._onKeyDown);this._currentStep=void 0}}function s(e,t,i,n,r){var a,o,s,B,c,C="";if(r=r||!1,t.style.top=null,t.style.right=null,t.style.bottom=null,t.style.left=null,t.style.marginLeft=null,t.style.marginTop=null,i.style.display="inherit","undefined"!=typeof n&&null!=n)n.style.top=null,n.style.left=null;if(this._introItems[this._currentStep]){if(a=this._introItems[this._currentStep],"string"==typeof a.tooltipClass)C=a.tooltipClass;else C=this._options.tooltipClass;if(t.className=("introjs-tooltip "+C).replace(/^\s+|\s+$/g,""),c=this._introItems[this._currentStep].position,"auto"==c||"auto"==this._options.tooltipPosition)if("floating"!=c)c=A.call(this,e,t,c);switch(s=M(e),o=M(t),B=p(),c){case"top":if(i.className="introjs-arrow bottom",r)var D=0;else var D=15;l(s,D,o,B,t),t.style.bottom=s.height+20+"px";break;case"right":if(t.style.left=s.width+20+"px",s.top+o.height>B.height)i.className="introjs-arrow left-bottom",t.style.top="-"+(o.height-s.height-20)+"px";else i.className="introjs-arrow left";break;case"left":if(!r&&1==this._options.showStepNumbers)t.style.top="15px";if(s.top+o.height>B.height)t.style.top="-"+(o.height-s.height-20)+"px",i.className="introjs-arrow right-bottom";else i.className="introjs-arrow right";t.style.right=s.width+20+"px";break;case"floating":if(i.style.display="none",t.style.left="50%",t.style.top="50%",t.style.marginLeft="-"+o.width/2+"px",t.style.marginTop="-"+o.height/2+"px","undefined"!=typeof n&&null!=n)n.style.left="-"+(o.width/2+18)+"px",n.style.top="-"+(o.height/2+18)+"px";break;case"bottom-right-aligned":i.className="introjs-arrow top-right";var d=0;u(s,d,o,t),t.style.top=s.height+20+"px";break;case"bottom-middle-aligned":i.className="introjs-arrow top-middle";var f=s.width/2-o.width/2;if(r)f+=5;if(u(s,f,o,t))t.style.right=null,l(s,f,o,B,t);t.style.top=s.height+20+"px";break;case"bottom-left-aligned":case"bottom":default:i.className="introjs-arrow top";var D=0;l(s,D,o,B,t),t.style.top=s.height+20+"px"}}}function l(e,t,i,n,r){if(e.left+t+i.width>n.width)return r.style.left=n.width-i.width-e.left+"px",!1;else return r.style.left=t+"px",!0}function u(e,t,i,n){if(e.left+e.width-t-i.width<0)return n.style.left=-e.left+"px",!1;else return n.style.right=t+"px",!0}function A(e,t,i){var n=this._options.positionPrecedence.slice(),r=p(),a=M(t).height+10,o=M(t).width+20,s=M(e),l="floating";if(s.left+o>r.width||s.left+s.width/2-o<0)B(n,"bottom"),B(n,"top");else{if(s.height+s.top+a>r.height)B(n,"bottom");if(s.top-a<0)B(n,"top")}if(s.width+s.left+o>r.width)B(n,"right");if(s.left-o<0)B(n,"left");if(n.length>0)l=n[0];if(i&&"auto"!=i)if(n.indexOf(i)>-1)l=i;return l}function B(e,t){if(e.indexOf(t)>-1)e.splice(e.indexOf(t),1)}function c(e){if(e){if(!this._introItems[this._currentStep])return;var t=this._introItems[this._currentStep],i=M(t.element),n=10;if(E(t.element))e.className+=" introjs-fixedTooltip";else e.className=e.className.replace(" introjs-fixedTooltip","");if("floating"==t.position)n=0;e.setAttribute("style","width: "+(i.width+n)+"px; height:"+(i.height+n)+"px; top:"+(i.top-5)+"px;left: "+(i.left-5)+"px;")}}function C(){var e=document.querySelector(".introjs-disableInteraction");if(null===e)e=document.createElement("div"),e.className="introjs-disableInteraction",this._targetElement.appendChild(e);c.call(this,e)}function D(e){e.setAttribute("role","button"),e.tabIndex=0}function d(e){if("undefined"!=typeof this._introChangeCallback)this._introChangeCallback.call(this,e.element);var t=this,i=document.querySelector(".introjs-helperLayer"),n=document.querySelector(".introjs-tooltipReferenceLayer"),l="introjs-helperLayer";M(e.element);if("string"==typeof e.highlightClass)l+=" "+e.highlightClass;if("string"==typeof this._options.highlightClass)l+=" "+this._options.highlightClass;if(null!=i){var u=n.querySelector(".introjs-helperNumberLayer"),A=n.querySelector(".introjs-tooltiptext"),B=n.querySelector(".introjs-arrow"),d=n.querySelector(".introjs-tooltip"),E=n.querySelector(".introjs-skipbutton"),m=n.querySelector(".introjs-prevbutton"),g=n.querySelector(".introjs-nextbutton"),H=f.call(this);if(i.className=l,!H)d.style.opacity=0,d.style.display="none";if(null!=u){var G=this._introItems[e.step-2>=0?e.step-2:0];if(null!=G&&"forward"==this._direction&&"floating"==G.position||"backward"==this._direction&&"floating"==e.position)u.style.opacity=0}c.call(t,i),c.call(t,n);var I=document.querySelectorAll(".introjs-fixParent");if(I&&I.length>0)for(var v=I.length-1;v>=0;v--)I[v].className=I[v].className.replace(/introjs-fixParent|introjs-fixAbsolutePosition|introjs-fixRelativePosition/g,"").replace(/^\s+|\s+$/g,"");var y=document.querySelector(".introjs-showElement");if(y)y.className=y.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");if(t._lastShowElementTimer)clearTimeout(t._lastShowElementTimer);t._lastShowElementTimer=setTimeout(function(){if(null!=u)u.innerHTML=e.step;if(A.innerHTML=e.intro,d.style.display="block",s.call(t,e.element,d,B,u),n.querySelector(".introjs-bullets li > a.active").className="",n.querySelector('.introjs-bullets li > a[data-stepnumber="'+e.step+'"]').className="active",n.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+b.call(t)+"%;"),d.style.opacity=1,u)u.style.opacity=1;if(-1===g.tabIndex)E.focus();else g.focus()},350)}else{var J=document.createElement("div"),L=document.createElement("div"),N=document.createElement("div"),K=document.createElement("div"),x=document.createElement("div"),P=document.createElement("div"),_=document.createElement("div"),O=document.createElement("div");if(J.className=l,L.className="introjs-tooltipReferenceLayer",c.call(t,J),c.call(t,L),this._targetElement.appendChild(J),this._targetElement.appendChild(L),N.className="introjs-arrow",x.className="introjs-tooltiptext",x.innerHTML=e.intro,P.className="introjs-bullets",this._options.showBullets===!1)P.style.display="none";for(var T=document.createElement("ul"),v=0,S=this._introItems.length;S>v;v++){var w=document.createElement("li"),R=document.createElement("a");if(R.onclick=function(){t.goToStep(this.getAttribute("data-stepnumber"))},v===e.step-1)R.className="active";D(R),R.innerHTML="&nbsp;",R.setAttribute("data-stepnumber",this._introItems[v].step),w.appendChild(R),T.appendChild(w)}if(P.appendChild(T),_.className="introjs-progress",this._options.showProgress===!1)_.style.display="none";var k=document.createElement("div");if(k.className="introjs-progressbar",k.setAttribute("style","width:"+b.call(this)+"%;"),_.appendChild(k),O.className="introjs-tooltipbuttons",this._options.showButtons===!1)O.style.display="none";if(K.className="introjs-tooltip",K.appendChild(x),K.appendChild(P),K.appendChild(_),1==this._options.showStepNumbers){var Q=document.createElement("span");Q.className="introjs-helperNumberLayer",Q.innerHTML=e.step,L.appendChild(Q)}K.appendChild(N),L.appendChild(K);var g=document.createElement("a");g.onclick=function(){if(t._introItems.length-1!=t._currentStep)r.call(t);else if(!f.call(t))o.call(t,t._targetElement)},D(g),g.innerHTML=this._options.nextLabel;var m=document.createElement("a");m.onclick=function(){if(0!=t._currentStep)a.call(t)},D(m),m.innerHTML=this._options.prevLabel;var E=document.createElement("a");if(E.className="introjs-button introjs-skipbutton",D(E),E.innerHTML=this._options.skipLabel,E.onclick=function(){if(t._introItems.length-1==t._currentStep&&"function"==typeof t._introCompleteCallback)t._introCompleteCallback.call(t);if(t._introItems.length-1!=t._currentStep&&"function"==typeof t._introExitCallback)t._introExitCallback.call(t);o.call(t,t._targetElement)},O.appendChild(E),this._introItems.length>1)O.appendChild(m),O.appendChild(g);K.appendChild(O),s.call(t,e.element,K,N,Q)}if(this._options.disableInteraction===!0)C.call(t);if(m.removeAttribute("tabIndex"),g.removeAttribute("tabIndex"),0==this._currentStep&&this._introItems.length>1)m.className="introjs-button introjs-prevbutton introjs-disabled",m.tabIndex="-1",g.className="introjs-button introjs-nextbutton",E.innerHTML=this._options.skipLabel;else if(this._introItems.length-1==this._currentStep||1==this._introItems.length)if(E.innerHTML=this._options.doneLabel,m.className="introjs-button introjs-prevbutton",g.tabIndex="-1",f.call(this))g.className="introjs-button introjs-nextbutton introjs-disabled";else g.className="introjs-button introjs-nextbutton",g.innerHTML=this._options.doneButtonLabel;else m.className="introjs-button introjs-prevbutton",g.className="introjs-button introjs-nextbutton",g.innerHTML=this._options.nextLabel,E.innerHTML=this._options.skipLabel;g.focus(),e.element.className+=" introjs-showElement";var V=h(e.element,"position");if("absolute"!==V&&"relative"!==V&&"fixed"!==V)e.element.className+=" introjs-relativePosition";for(var U=e.element.parentNode;null!=U&&"body"!==U.tagName.toLowerCase();){var W=h(U,"z-index"),z=parseFloat(h(U,"opacity")),Y=h(U,"transform")||h(U,"-webkit-transform")||h(U,"-moz-transform")||h(U,"-ms-transform")||h(U,"-o-transform");if(/[0-9]+/.test(W)||1>z||"none"!==Y&&void 0!==Y){U.className+=" introjs-fixParent";var X=h(U,"position"),j="relative"===X?"introjs-fixRelativePosition":"introjs-fixAbsolutionPosition";U.className+=" "+j}U=U.parentNode}if(!F(e.element)&&this._options.scrollToElement===!0){var Z=e.element.getBoundingClientRect(),q=p().height,$=Z.bottom-(Z.bottom-Z.top),ee=Z.bottom-q;if(0>$||e.element.clientHeight>q)window.scrollBy(0,$-this._options.scrollPadding);else window.scrollBy(0,ee+70+this._options.scrollPadding)}if("undefined"!=typeof this._introAfterChangeCallback)this._introAfterChangeCallback.call(this,e.element)}function f(){return-1!==this._options.tooltipClass.indexOf("introjs-tooltip-fullscreen")}function h(e,t){var i="";if(e.currentStyle)i=e.currentStyle[t];else if(document.defaultView&&document.defaultView.getComputedStyle)i=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);if(i&&i.toLowerCase)return i.toLowerCase();else return i}function E(e){var t=e.parentNode;if("HTML"===t.nodeName)return!1;if("fixed"==h(e,"position"))return!0;else return E(t)}function p(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};else{var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}}function F(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom+80<=window.innerHeight&&t.right<=window.innerWidth}function m(e){var t=document.createElement("div"),i="",n=this;if(t.className="introjs-overlay","body"===e.tagName.toLowerCase())i+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",t.setAttribute("style",i);else{var r=M(e);if(r)i+="width: "+r.width+"px; height:"+r.height+"px; top:"+r.top+"px;left: "+r.left+"px;",t.setAttribute("style",i)}return e.appendChild(t),t.onclick=function(){if(1==n._options.exitOnOverlayClick){if(void 0!=n._introExitCallback)n._introExitCallback.call(n);o.call(n,e)}},setTimeout(function(){i+="opacity: "+n._options.overlayOpacity.toString()+";",t.setAttribute("style",i)},10),!0}function g(){var e=this._targetElement.querySelector(".introjs-hintReference");if(e){var t=e.getAttribute("data-step");return e.parentNode.removeChild(e),t}}function H(e){if(this._introItems=[],this._options.hints)for(var t=0,n=this._options.hints.length;n>t;t++){var r=i(this._options.hints[t]);if("string"==typeof r.element)r.element=document.querySelector(r.element);if(r.hintPosition=r.hintPosition||this._options.hintPosition,r.hintAnimation=r.hintAnimation||this._options.hintAnimation,null!=r.element)this._introItems.push(r)}else{var a=e.querySelectorAll("*[data-hint]");if(a.length<1)return!1;for(var t=0,n=a.length;n>t;t++){var o=a[t],s=o.getAttribute("data-hintAnimation");if(s)s="true"==s;else s=this._options.hintAnimation;this._introItems.push({element:o,hint:o.getAttribute("data-hint"),hintPosition:o.getAttribute("data-hintPosition")||this._options.hintPosition,hintAnimation:s,tooltipClass:o.getAttribute("data-tooltipClass"),position:o.getAttribute("data-position")||this._options.tooltipPosition})}}if(y.call(this),document.addEventListener)document.addEventListener("click",g.bind(this),!1),window.addEventListener("resize",G.bind(this),!0);else if(document.attachEvent)document.attachEvent("onclick",g.bind(this)),document.attachEvent("onresize",G.bind(this))}function G(){for(var e=0,t=this._introItems.length;t>e;e++){var i=this._introItems[e];if("undefined"!=typeof i.targetElement)J.call(this,i.hintPosition,i.element,i.targetElement);else;}}function I(e){g.call(this);var t=this._targetElement.querySelector('.introjs-hint[data-step="'+e+'"]');if(t)t.className+=" introjs-hidehint";if("undefined"!=typeof this._hintCloseCallback)this._hintCloseCallback.call(this,e)}function v(){var e=this._targetElement.querySelectorAll(".introjs-hint");if(e&&e.length>0)for(var t=0;t<e.length;t++)I.call(this,e[t].getAttribute("data-step"))}function y(){var e=this,t=document.querySelector(".introjs-hints");if(null!=t)i=t;else{var i=document.createElement("div");i.className="introjs-hints"}for(var n=0,r=this._introItems.length;r>n;n++){var a=this._introItems[n];if(!document.querySelector('.introjs-hint[data-step="'+n+'"]')){var o=document.createElement("a");if(D(o),function(t,i,n){t.onclick=function(r){var a=r?r:window.event;if(a.stopPropagation)a.stopPropagation();if(null!=a.cancelBubble)a.cancelBubble=!0;L.call(e,t,i,n)}}(o,a,n),o.className="introjs-hint",!a.hintAnimation)o.className+=" introjs-hint-no-anim";if(E(a.element))o.className+=" introjs-fixedhint";var s=document.createElement("div");s.className="introjs-hint-dot";var l=document.createElement("div");l.className="introjs-hint-pulse",o.appendChild(s),o.appendChild(l),o.setAttribute("data-step",n),a.targetElement=a.element,a.element=o,J.call(this,a.hintPosition,o,a.targetElement),i.appendChild(o)}else;}if(document.body.appendChild(i),"undefined"!=typeof this._hintsAddedCallback)this._hintsAddedCallback.call(this)}function J(e,t,i){var n=M.call(this,i);switch(e){default:case"top-left":t.style.left=n.left+"px",t.style.top=n.top+"px";break;case"top-right":t.style.left=n.left+n.width+"px",t.style.top=n.top+"px";break;case"bottom-left":t.style.left=n.left+"px",t.style.top=n.top+n.height+"px";break;case"bottom-right":t.style.left=n.left+n.width+"px",t.style.top=n.top+n.height+"px";break;case"bottom-middle":t.style.left=n.left+n.width/2+"px",t.style.top=n.top+n.height+"px";break;case"top-middle":t.style.left=n.left+n.width/2+"px",t.style.top=n.top+"px"}}function L(e,t,i){if("undefined"!=typeof this._hintClickCallback)this._hintClickCallback.call(this,e,t,i);var n=g.call(this);if(parseInt(n,10)!=i){var r=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div");r.className="introjs-tooltip",r.onclick=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=!0},a.className="introjs-tooltiptext";var u=document.createElement("p");u.innerHTML=t.hint;var A=document.createElement("a");A.className="introjs-button",A.innerHTML=this._options.hintButtonLabel,A.onclick=I.bind(this,i),a.appendChild(u),a.appendChild(A),o.className="introjs-arrow",r.appendChild(o),r.appendChild(a),this._currentStep=e.getAttribute("data-step"),l.className="introjs-tooltipReferenceLayer introjs-hintReference",l.setAttribute("data-step",e.getAttribute("data-step")),c.call(this,l),l.appendChild(r),document.body.appendChild(l),s.call(this,e,r,o,null,!0)}}function M(e){var t={};t.width=e.offsetWidth,t.height=e.offsetHeight;for(var i=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return t.top=n,t.left=i,t}function b(){var e=parseInt(this._currentStep+1,10);return e/this._introItems.length*100}function N(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i}require("inf-ria/css!./introjs.css");var K="2.2.0",x=function(t){if("object"==typeof t)return new e(t);else if("string"==typeof t){var i=document.querySelector(t);if(i)return new e(i);else throw new Error("There is no element with given selector.")}else return new e(document.body)};return x.version=K,x.fn=e.prototype={clone:function(){return new e(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){return this._options=N(this._options,e),this},start:function(){return t.call(this,this._targetElement),this},goToStep:function(e){return n.call(this,e),this},nextStep:function(){return r.call(this),this},previousStep:function(){return a.call(this),this},exit:function(){return o.call(this,this._targetElement),this},refresh:function(){return c.call(this,document.querySelector(".introjs-helperLayer")),c.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),G.call(this),this},onbeforechange:function(e){if("function"==typeof e)this._introBeforeChangeCallback=e;else throw new Error("Provided callback for onbeforechange was not a function");return this},onchange:function(e){if("function"==typeof e)this._introChangeCallback=e;else throw new Error("Provided callback for onchange was not a function.");return this},onafterchange:function(e){if("function"==typeof e)this._introAfterChangeCallback=e;else throw new Error("Provided callback for onafterchange was not a function");return this},oncomplete:function(e){if("function"==typeof e)this._introCompleteCallback=e;else throw new Error("Provided callback for oncomplete was not a function.");return this},onhintsadded:function(e){if("function"==typeof e)this._hintsAddedCallback=e;else throw new Error("Provided callback for onhintsadded was not a function.");return this},onhintclick:function(e){if("function"==typeof e)this._hintClickCallback=e;else throw new Error("Provided callback for onhintclick was not a function.");return this},onhintclose:function(e){if("function"==typeof e)this._hintCloseCallback=e;else throw new Error("Provided callback for onhintclose was not a function.");return this},onexit:function(e){if("function"==typeof e)this._introExitCallback=e;else throw new Error("Provided callback for onexit was not a function.");return this},addHints:function(){return H.call(this,this._targetElement),this},hideHint:function(e){return I.call(this,e),this},hideHints:function(){return v.call(this),this}},x}),define("intro.js",["intro.js/intro"],function(e){return e}),define("inf-ria-page/region/topojson",[],function(){function e(e,t){function i(t){var i,n=e.arcs[0>t?~t:t],r=n[0];if(e.transform)i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]});else i=n[n.length-1];return 0>t?[i,r]:[r,i]}function n(e,t){for(var i in e){var n=e[i];delete t[n.start],delete n.start,delete n.end,n.forEach(function(e){r[0>e?~e:e]=1}),s.push(n)}}var r={},a={},o={},s=[],l=-1;return t.forEach(function(i,n){var r,a=e.arcs[0>i?~i:i];if(a.length<3&&!a[1][0]&&!a[1][1])r=t[++l],t[l]=i,t[n]=r}),t.forEach(function(e){var t,n,r=i(e),s=r[0],l=r[1];if(t=o[s])if(delete o[t.end],t.push(e),t.end=l,n=a[l]){delete a[n.start];var u=n===t?t:t.concat(n);a[u.start=t.start]=o[u.end=n.end]=u}else a[t.start]=o[t.end]=t;else if(t=a[l])if(delete a[t.start],t.unshift(e),t.start=s,n=o[s]){delete o[n.end];var A=n===t?t:n.concat(t);a[A.start=n.start]=o[A.end=t.end]=A}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=s]=o[t.end=l]=t}),n(o,a),n(a,o),t.forEach(function(e){if(!r[0>e?~e:e])s.push([e]);
}),s}function t(t,i,n){function r(e){var t=0>e?~e:e;(A[t]||(A[t]=[])).push({i:e,g:u})}function a(e){e.forEach(r)}function o(e){e.forEach(a)}function s(e){if("GeometryCollection"===e.type)e.geometries.forEach(s);else if(e.type in B)u=e,B[e.type](e.arcs)}var l=[];if(arguments.length>1){var u,A=[],B={LineString:a,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};s(i),A.forEach(arguments.length<3?function(e){l.push(e[0].i)}:function(e){if(n(e[0].g,e[e.length-1].g))l.push(e[0].i)})}else for(var c=0,C=t.arcs.length;C>c;++c)l.push(c);return{type:"MultiLineString",arcs:e(t,l)}}function i(t,i){function n(e){e.forEach(function(t){t.forEach(function(t){(o[t=0>t?~t:t]||(o[t]=[])).push(e)})}),s.push(e)}function r(e){return A(a(t,{type:"Polygon",arcs:[e]}).coordinates[0])>0}var o={},s=[],l=[];return i.forEach(function(e){if("Polygon"===e.type)n(e.arcs);else if("MultiPolygon"===e.type)e.arcs.forEach(n)}),s.forEach(function(e){if(!e._){var t=[],i=[e];for(e._=1,l.push(t);e=i.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){o[0>e?~e:e].forEach(function(e){if(!e._)e._=1,i.push(e)})})})}}),s.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:l.map(function(i){var n=[];i.forEach(function(e){e.forEach(function(e){e.forEach(function(e){if(o[0>e?~e:e].length<2)n.push(e)})})}),n=e(t,n);var a;if((a=n.length)>1)for(var s,l=r(i[0][0]),u=0;a>u;++u)if(l===r(n[u])){s=n[0],n[0]=n[u],n[u]=s;break}return n})}}function n(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return r(e,t)})}:r(e,t)}function r(e,t){var i={type:"Feature",id:t.id,properties:t.properties||{},geometry:a(e,t)};if(null==t.id)delete i.id;return i}function a(e,t){function i(e,t){if(t.length)t.pop();for(var i,n=A[0>e?~e:e],r=0,a=n.length;a>r;++r)t.push(i=n[r].slice()),u(i,r);if(0>e)o(t,a)}function n(e){return e=e.slice(),u(e,0),e}function r(e){for(var t=[],n=0,r=e.length;r>n;++n)i(e[n],t);if(t.length<2)t.push(t[0].slice());return t}function a(e){for(var t=r(e);t.length<4;)t.push(t[0].slice());return t}function s(e){return e.map(a)}function l(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(l)}:t in B?{type:t,coordinates:B[t](e)}:null}var u=D(e.transform),A=e.arcs,B={Point:function(e){return n(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(n)},LineString:function(e){return r(e.arcs)},MultiLineString:function(e){return e.arcs.map(r)},Polygon:function(e){return s(e.arcs)},MultiPolygon:function(e){return e.arcs.map(s)}};return l(t)}function o(e,t){for(var i,n=e.length,r=n-t;r<--n;)i=e[r],e[r++]=e[n],e[n]=i}function s(e,t){for(var i=0,n=e.length;n>i;){var r=i+n>>>1;if(e[r]<t)i=r+1;else n=r}return i}function l(e){function t(e,t){e.forEach(function(e){if(0>e)e=~e;var i=r[e];if(i)i.push(t);else r[e]=[t]})}function i(e,i){e.forEach(function(e){t(e,i)})}function n(e,t){if("GeometryCollection"===e.type)e.geometries.forEach(function(e){n(e,t)});else if(e.type in o)o[e.type](e.arcs,t)}var r={},a=e.map(function(){return[]}),o={LineString:t,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(n);for(var l in r)for(var u=r[l],A=u.length,B=0;A>B;++B)for(var c=B+1;A>c;++c){var C,D=u[B],d=u[c];if((C=a[D])[l=s(C,d)]!==d)C.splice(l,0,d);if((C=a[d])[l=s(C,D)]!==D)C.splice(l,0,D)}return a}function u(e,t){function i(e){a.remove(e),e[1][2]=t(e),a.push(e)}var n=D(e.transform),r=d(e.transform),a=C();if(!t)t=B;return e.arcs.forEach(function(e){for(var o,s,l=[],u=0,A=0,B=e.length;B>A;++A)s=e[A],n(e[A]=[s[0],s[1],1/0],A);for(A=1,B=e.length-1;B>A;++A)o=e.slice(A-1,A+2),o[1][2]=t(o),l.push(o),a.push(o);for(A=0,B=l.length;B>A;++A)o=l[A],o.previous=l[A-1],o.next=l[A+1];for(;o=a.pop();){var c=o.previous,C=o.next;if(o[1][2]<u)o[1][2]=u;else u=o[1][2];if(c)c.next=C,c[2]=o[2],i(c);if(C)C.previous=c,C[0]=o[0],i(C)}e.forEach(r)}),e}function A(e){for(var t,i=-1,n=e.length,r=e[n-1],a=0;++i<n;)t=r,r=e[i],a+=t[0]*r[1]-t[1]*r[0];return.5*a}function B(e){var t=e[0],i=e[1],n=e[2];return Math.abs((t[0]-n[0])*(i[1]-t[1])-(t[0]-i[0])*(n[1]-t[1]))}function c(e,t){return e[1][2]-t[1][2]}function C(){function e(e,t){for(;t>0;){var i=(t+1>>1)-1,r=n[i];if(c(e,r)>=0)break;n[r._=t]=r,n[e._=t=i]=e}}function t(e,t){for(;;){var i=t+1<<1,a=i-1,o=t,s=n[o];if(r>a&&c(n[a],s)<0)s=n[o=a];if(r>i&&c(n[i],s)<0)s=n[o=i];if(o===t)break;n[s._=t]=s,n[e._=t=o]=e}}var i={},n=[],r=0;return i.push=function(t){return e(n[t._=r]=t,r++),r},i.pop=function(){if(!(0>=r)){var e,i=n[0];if(--r>0)e=n[r],t(n[e._=0]=e,0);return i}},i.remove=function(i){var a,o=i._;if(n[o]===i){if(o!==--r)a=n[r],(c(a,i)<0?e:t)(n[a._=o]=a,o);return o}},i}function D(e){if(!e)return f;var t,i,n=e.scale[0],r=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,s){if(!s)t=i=0;e[0]=(t+=e[0])*n+a,e[1]=(i+=e[1])*r+o}}function d(e){if(!e)return f;var t,i,n=e.scale[0],r=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,s){if(!s)t=i=0;var l=(e[0]-a)/n|0,u=(e[1]-o)/r|0;e[0]=l-t,e[1]=u-i,t=l,i=u}}function f(){}var h={version:"1.6.19",mesh:function(e){return a(e,t.apply(this,arguments))},meshArcs:t,merge:function(e){return a(e,i.apply(this,arguments))},mergeArcs:i,feature:n,neighbors:l,presimplify:u};return h}),define("inf-ria/utils/formatter",["exports","module"],function(exports,module){var e=["B","KB","MB","GB","TB","PB","EB","ZB","YB","BB"],t=["","k","m","g","t","p","e","z","y","b"];module.exports={percent:function(e){return e+"%"},bytes:function(t){for(var i=arguments.length<=1||void 0===arguments[1]?2:arguments[1],n=arguments.length<=2||void 0===arguments[2]?1024:arguments[2],r=0,a=e.length-1;t>=n&&a>r;)t/=n,r++;return t.toFixed(i)+e[r]},bits:function(e){for(var i=arguments.length<=1||void 0===arguments[1]?2:arguments[1],n=arguments.length<=2||void 0===arguments[2]?1024:arguments[2],r=0,a=t.length-1;e>=n&&a>r;)e/=n,r++;return e.toFixed(i)+t[r]},number:function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1];if(1e4>e)return e;else if(1e6>e)return(e/1e4).toFixed(e%1e4===0?t:Math.max(1,t))+"万";else if(1e7>e)return(e/1e6).toFixed(e%1e6===0?t:Math.max(1,t))+"百万";return(e/1e7).toFixed(e%1e7===0?t:Math.max(1,t))+"千万"}}}),define("inf-ria/utils/mtools",["require","moment","underscore","inf-i18n","jquery","echarts","./formatter"],function(require){function e(e,t){return t=t||"MM-DD HH:mm",f(e).format(t)}function t(e,t){return t=t||"YYYY-MM-DDTHH:mm:ss",f(e).utc().format(t)+"Z"}function i(e,i){var n=e.match(/(\d+)(\w+)/),r=n[1],a=n[2],o=f(),s=t(o),l="";if(1===arguments.length)l=t(o.add("m",1).subtract(a,r),"YYYY-MM-DDTHH:mm:00");else if(3600>i)l=t(f(o.add("m",1).subtract(a,r).format("YYYY-MM-DDTHH:mm:00")));else if(86400>i)l=t(f(o.add("h",1).subtract(a,r).format("YYYY-MM-DDTHH:00:00")));else l=t(f(o.add("d",1).subtract(a,r).format("YYYY-MM-DDT00:00:00")));return{endTime:s,startTime:l}}function n(e,t,i){e=String(e),i=i||"";var n=e.replace("/[^\x00-ÿ]/g","**").length;if(0>t||t>=n)return e;else return t-=2,e=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1"),e+i}function r(e){return h.extend({},G,e)}function a(t,i,a,o){var l=[],u=i.unit,A=0,B=[],c={},C={},D=[];if(a=a||{type:"line"},"line"===a.type)C={type:"line",smooth:!0,symbol:"none",symbolSize:2,showAllSymbol:!0,itemStyle:{borderWidth:1,normal:{lineStyle:{width:1}}}};else if("bar"===a.type)C={type:"bar"};C=h.extend(C,a.chart||{});var d,f,F=5,g=function(e){var t=[];if(e.length>0)t.push(e[0].name+" ("+I[i.statistics]+")");return h.each(e,function(e){var i=n(e.seriesName,22,"…");t.push(i+"："+e.value)}),t.join("<br/>")};if(0===t.category.length)l.push(e()),l.push(e());else{var H="MM-DD HH:mm";if(o&&o.period){if(o.period>=86400)H="MM-DD";if(o.period<1)H="MM-DD HH:mm:ss.SSS"}h.each(t.category,function(t){l.push(e(t,H))})}if(0===i.nullPointMode)h.each(t.series,function(e){var t=[];if(h.each(e.data,function(e){if("undefined"==typeof e)e=0;t.push(e)}),0===t.length)for(var i=0,n=l.length;n>i;i++)t[i]=0;c[e.name]=t});else h.each(t.series,function(e){var t=[],i="";if(h.each(e.data,function(e){if("undefined"==typeof e)e="-";if("-"===i&&"-"!==e)t.push({value:e,symbol:"emptyCircle"});else if(t.push(e),"-"!==e&&t.length>1)t[t.length-2]=i;i=e}),0===t.length)for(var n=0,r=l.length;r>n;n++)t[n]="-";c[e.name]=t});if(o&&o.dataZoom)A=o.dataZoom.start;else A=Math.max(100*(1-100/l.length),0);var G={};if(h.each(i.metrics,function(e,t){G[e.value]=e.name}),h.each(c,function(e,t){var i=G[t]||t,n=p.extend(!0,{},C,{name:i,data:e});B.push(i),D.push(n)}),"sampleCount"===i.statistics)u="个",g=function(e){var t="";if(e.length>0)t+=e[0].name+" ("+I[i.statistics]+")<br/>";return h.each(e,function(e,i){t+=n(e.seriesName,22,"…")+"：";var r=e.value;if(isNaN(r))r=0;t+=r+"<br/>"}),t};else if("enum"===u){u="";var v=i.src||{},y=h(v).value().length;if(6>y)F=y-1;g=function(e){var t="";if(e.length>0)t+=e[0].name;return t+=" ("+I[i.statistics]+")",h.each(e,function(e,i){var r=e.value;if(t+="<br/>"+n(e.seriesName,22,"…")+"："+r,"-"!==r)t+="（"+(v[r]||r)+"）"}),t}}else if(u===E("字节")||u===E("字节/秒")){var J=u===E("字节")?"":"/s";g=function(e){var t="";if(e.length>0)t+=e[0].name+" ("+I[i.statistics]+")<br/>";return h.each(e,function(e,r){t+=n(e.seriesName,22,"…")+"：";var a,o=e.value,s="";if(isNaN(o))s="-";else a=0>o?"-":"",o=Math.abs(o),o=m.bytes(o,2,i.byteUnit),s=a+o+J;t+=s+"<br/>"}),t},d=function(e){var t=0>e?"-":"";return e=Math.abs(e),e=m.bytes(e,1,i.byteUnit),t+e+J}}else if("bps"===u)g=function(e){var t="";if(e.length>0)t+=e[0].name+" ("+I[i.statistics]+")<br/>";return h.each(e,function(e,r){t+=n(e.seriesName,22,"…")+"：";var a,o=e.value,s="";if(isNaN(o))s="-";else a=0>o?"-":"",o=Math.abs(o),o=m.bits(o,2,i.bitUnit).toUpperCase(),s=a+o+u;t+=s+"<br/>"}),t},d=function(e){var t=0>e?"-":"";return e=Math.abs(e),e=m.bits(e,2,i.bitUnit).toUpperCase(),t+e};else if(u===E("百分比"))g=function(e){var t="";if(e.length>0)t+=e[0].name+" ("+I[i.statistics]+")<br/>";return h.each(e,function(e,i){t+=n(e.seriesName,22,"…")+"："+e.value+("-"===e.value?"":"%")+"<br/>"}),t},d="{value}%",f=100;else g=function(e){var t="";if(e.length>0)t=e[0].name+" ("+I[i.statistics]+")<br/>";return h.each(e,function(e){t+=n(e.seriesName,22,"…")+"："+e.value+"<br/>"}),t},d=function(e){return m.number(e,0)};var L={legend:{data:B,x:"center",padding:2,itemGap:2},tooltip:{trigger:"axis",formatter:g,textStyle:{fontSize:12}},dataZoom:{start:A,show:!0,height:20,filterColor:"rgba(74,170,255, 0.3)"},xAxis:[{type:"category",boundaryGap:"bar"===a.type,data:l,splitLine:{lineStyle:{color:"#eee"}}}],yAxis:[{type:"value",name:u||"",max:f,splitNumber:F,axisLabel:{formatter:d},splitLine:{lineStyle:{color:"#eee"}}}],series:D},M=a.chartOptions||{};return s(L,M),r(L)}function o(e){var t={tooltip:{trigger:"item",formatter:"{b} <br/> {c} ({d}%)"},color:["#4aaaff","#f2605d","#F6D622","#6EC50F","#FE863D","#B569D4","#A45BFF","#01B09B","#E74684","#0AC1D7"],legend:{orient:"vertical",x:"right",y:"center",data:e.legend},series:[{type:"pie",radius:"65%",center:["30%","50%"],minAngle:1,itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:e.series}]};return t}function s(e,t){h.each(t,function(t,i){if(h.isArray(t))s(e[i]=e[i]||[],t);else if(h.isObject(t))s(e[i]=e[i]||{},t);else e[i]=t})}function l(e){var t=!0;return h.each(e,function(e,i){return h.each(e.data,function(e){if("undefined"!=typeof e)return t=!1,!1;else return void 0}),t}),t}function u(e){var t={},i="average";return h.each(e,function(e,n){t[n]={metrics:[],unit:e.unit,names:{},nullPointMode:e.nullPointMode||null,statistics:e.statistics||i},e.chartType&&(t[n].type=e.chartType),h.each(e.metrics,function(e,i){var r=e.value;t[n].metrics.push(r),t[n].names[r]=e.name})}),t}function A(e,t){return h.each(e.series,function(e){e.data=h.pluck(e.data,t)}),e}function B(e,t){var i={ConfigurationUpdate:E("配置变更"),StateUpdate:E("状态变化"),Action:E("触发报警")},n=i[e]||e,r="";if(t){var a={};try{a=new Function("return "+t)()}catch(o){}switch(a.curAlarmStatus){case"NORMAL":r="normal";break;case"ABNORMAL":r="abnormal";break;case"INSUFFICIENT_DATA":r="insufficient"}}return'<span class="alarmStateUpdate"><span class="'+r+'">'+n+"</span></span>"}function c(e,t,i){h.each(e,function(n,r){if(n.filter===t){for(var a=n.metrics.length-1;a>=0;a--)if(n.metrics[a].filter===t&&n.metrics[a].filterValue!==i)n.metrics.splice(a,1);if(0===n.metrics.length)delete e[r]}})}function C(e,t){var i=!0;return h.each(e,function(e,n){var r=[];if(h.each(e.data,function(e,i){var n=e[t];if("undefined"!=typeof n)r.push(n)}),r.length>0)i=!1}),i}function D(e){var t=/([^\(]+)(?:\((.+)\))*/,i=[];return h.each(e.split(","),function(e){if(e){var n=e.match(t);i.push({name:n[2]||n[1],value:n[1]})}}),i}function d(e){function t(e,t){var i=[];return h.each(t.value,function(n){if(0===e.length)i.push([t.key+":"+n]);else h.each(e,function(e){var r=[];[].push.apply(r,e),r.push(t.key+":"+n),i.push(r)})}),i}var i=[],n=e.split(";");h.each(n,function(e){if(e){var t=e.split(":");if(t[1]){var n=t[0],r=t[1].split("|");i.push({key:n,value:r})}}});var r=[];return h.each(i,function(e){r=t(r,e)}),r=h.map(r,function(e){return e.join(";")})}var f=require("moment"),h=require("underscore"),E=require("inf-i18n"),p=require("jquery"),F=require("echarts"),m=require("./formatter"),g=/^3\./.test(F.version),H=["#4aaaff","#f2605d","#01B09B","#E74684","#6EC50F","#FE863D","#A45BFF","#F6D622","#0AC1D7","#B569D4"],G={color:H,calculable:!1,animation:!1,grid:{x:65,x2:35,y:50,y2:g?60:50}},I={average:E("平均值"),maximum:E("最大值"),minimum:E("最小值"),sum:E("和值"),sampleCount:E("样本数")};return{utc2local:e,local2utc:t,getUTCTimeRange:i,getChartOptions:a,getPieChartOptions:o,isSeriesEmpty:l,adjustToChartMetric:u,adjustSeriesData:A,formatBytes:m.bytes,transferAlarmEventType:B,filterMetrics:c,parseMetrics:D,parseDimensions:d,isMonitorTrendEmpty:C}}),define("inf-ria/ui/validator/UniqueFileRule",["require","esui/validator/Rule","esui/validator/ValidityState","esui/lib","inf-i18n","underscore","../../util","esui"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("esui/lib"),r=require("inf-i18n"),a=require("underscore"),o=require("../../util");return n.inherits(e,t),e.prototype.type="uniqueFile",e.prototype.errorMessage=o.sprintf(r("文件“%s”已存在"),"${name}"),e.prototype.check=function(e,t){var n=t.getBeforeQueuedFile(),r=!1,o=t.uploader.getFiles();return a.each(o,function(e){if(e.__hash===n.__hash)r=!0}),new i(!r,this.getErrorMessage(t))},e.prototype.getErrorMessage=function(e){var t=e.get(this.type+"ErrorMessage")||this.errorMessage,i=e.getBeforeQueuedFile();return n.format(t,i)},require("esui").registerRule(e,401),e}),define("inf-ria/ui/validator/NationalIdNumberRule",["require","esui/validator/Rule","esui/validator/ValidityState","esui/lib","inf-i18n","esui"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("esui/lib"),r=require("inf-i18n"),a={11:r("北京"),12:r("天津"),13:r("河北"),14:r("山西"),15:r("内蒙古"),21:r("辽宁"),22:r("吉林"),23:r("黑龙江"),31:r("上海"),32:r("江苏"),33:r("浙江"),34:r("安徽"),35:r("福建"),36:r("江西"),37:r("山东"),41:r("河南"),42:r("湖北"),43:r("湖南"),44:r("广东"),45:r("广西"),46:r("海南"),50:r("重庆"),51:r("四川"),52:r("贵州"),53:r("云南"),54:r("西藏"),61:r("陕西"),62:r("甘肃"),63:r("青海"),64:r("宁夏"),65:r("新疆"),71:r("台湾"),81:r("香港"),82:r("澳门"),91:r("国外")};return n.inherits(e,t),e.prototype.type="nationalIdNumber",e.prototype.errorMessage=r("身份证号码格式有误"),e.prototype.check=function(e,t){var n=new i(!0,""),r=new i(!1,this.getErrorMessage(t));if("disable"===this.getLimitCondition(t))return n;if(!e)return n;e=e.toLowerCase();var o=/^\d{17}[\dx]$/;if(!o.test(e))return r;var s=e.split(""),l=s[0]+s[1];if(!a[l])return r;for(var u=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],A=["1","0","x","9","8","7","6","5","4","3","2"],B=0,c=0;17>c;c++)B+=+s[c]*u[c];if(s[17]!==A[B%11])return r;else return n},require("esui").registerRule(e,401),e}),define("inf-ria/ui/validator/MultiPatternRule",["require","esui/lib","esui/validator/Rule","esui/validator/ValidityState","inf-i18n","underscore","../../util","esui"],function(require){function e(){i.apply(this,arguments)}var t=require("esui/lib"),i=require("esui/validator/Rule"),n=require("esui/validator/ValidityState"),r=require("inf-i18n"),a=require("underscore"),o=require("../../util");return e.prototype.type="multiPattern",e.prototype.errorMessage=o.sprintf(r("%s格式不符合要求"),"${value}"),e.prototype.check=function(e,t){for(var i=new RegExp(this.getLimitCondition(t)),r=t.get("separator")||/[;\s]+/g,o=e.split(r),s=0;s<o.length;s++){var l=a.trim(o[s]);if(l){var u=i.test(l);if(!u)return new n(u,this.getErrorMessage(t,l))}else;}return new n(!0,"")},e.prototype.getErrorMessage=function(e,i){var n=e.get(this.type+"ErrorMessage")||this.errorMessage;return t.format(n,{value:i})},t.inherits(e,i),require("esui").registerRule(e,2e3),e}),define("inf-ria/ui/validator/MinFileSizeRule",["require","esui/validator/Rule","esui/validator/ValidityState","esui/lib","inf-i18n","../../util","esui"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("esui/lib"),r=require("inf-i18n"),a=require("../../util");return n.inherits(e,t),e.prototype.type="minFileSize",e.prototype.errorMessage=a.sprintf(r("附件不能小于%s个字节，当前大小为%s个字节"),"${maxFileSize}","${size}"),e.prototype.check=function(e,t){var n=t.getBeforeQueuedFile();return new i(n.size>=this.getLimitCondition(t),this.getErrorMessage(t))},e.prototype.getErrorMessage=function(e){var t=e.get(this.type+"ErrorMessage")||this.errorMessage,i=this.getLimitCondition(e),r=e.getBeforeQueuedFile();return n.format(t,{size:r.size,minFileSize:i})},e.prototype.getLimitCondition=function(e){return parseInt(e.get("minFileSize"),10)},require("esui").registerRule(e,401),e}),define("inf-ria/ui/validator/MaxFileSizeRule",["require","esui/validator/Rule","esui/validator/ValidityState","esui/lib","inf-i18n","../../util","esui"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("esui/lib"),r=require("inf-i18n"),a=require("../../util");return n.inherits(e,t),e.prototype.type="maxFileSize",e.prototype.errorMessage=a.sprintf(r("附件不能大于%s个字节，当前大小为%s个字节"),"${maxFileSize}","${size}"),e.prototype.check=function(e,t){var n=t.getBeforeQueuedFile();return new i(n.size<=this.getLimitCondition(t),this.getErrorMessage(t))},e.prototype.getErrorMessage=function(e){var t=e.get(this.type+"ErrorMessage")||this.errorMessage,i=this.getLimitCondition(e),r=e.getBeforeQueuedFile();return n.format(t,{size:r.size,maxFileSize:i})},e.prototype.getLimitCondition=function(e){return parseInt(e.get("maxFileSize"),10)},require("esui").registerRule(e,401),e}),define("inf-ria/ui/validator/CustomRule",["require","esui/validator/Rule","esui/validator/ValidityState","inf-i18n","esui/lib","esui/main"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("inf-i18n");return e.prototype.type="custom",e.prototype.errorMessage="${title} "+n("格式不符合要求"),e.prototype.check=function(e,t){var n=this.getLimitCondition(t);return new i(n.call(t,e),this.getErrorMessage(t))},require("esui/lib").inherits(e,t),require("esui/main").registerRule(e,200),e}),define("inf-ria/ui/validator/BusinessLicenseNumberRule",["require","esui/validator/Rule","esui/validator/ValidityState","esui/lib","inf-i18n","esui"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("esui/lib"),r=require("inf-i18n");return n.inherits(e,t),e.prototype.type="businessLicenseNumber",e.prototype.errorMessage=r("工商营业执照号码格式有误"),e.prototype.check=function(e,t){var n=new i(!0,""),r=new i(!1,this.getErrorMessage(t));if(!e)return n;var a=/^\d{15}$/;if(!a.test(e))return r;for(var o=e.split(""),s=10,l=0,u=0;15>u;u++)if(l=s%11+ +o[u],s=l%10*2,0===s)s=20;if(l%10!==1)return r;else return n},require("esui").registerRule(e,401),e}),define("inf-ria/ui/validator/MaxFileCountRule",["require","esui/validator/Rule","esui/validator/ValidityState","esui/lib","inf-i18n","../../util","esui"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/validator/Rule"),i=require("esui/validator/ValidityState"),n=require("esui/lib"),r=require("inf-i18n"),a=require("../../util");return n.inherits(e,t),e.prototype.type="maxFileCount",e.prototype.errorMessage=a.sprintf(r("附件不能超过%s个"),"${maxFileCount}"),e.prototype.check=function(e,t){return new i(t.getUploadedFileCount()<this.getLimitCondition(t),this.getErrorMessage(t))},e.prototype.getErrorMessage=function(e){var t=e.get(this.type+"ErrorMessage")||this.errorMessage,i=this.getLimitCondition(e);return n.format(t,{maxFileCount:i})},e.prototype.getLimitCondition=function(e){return parseInt(e.get("maxFileCount"),10)},require("esui").registerRule(e,401),e}),define("inf-ria/ui/pkg",["require","esui/validator/MaxByteLengthRule","esui/validator/MinByteLengthRule","./validator/MaxFileCountRule","./validator/MaxFileSizeRule","./validator/MinFileSizeRule","./validator/UniqueFileRule","./validator/MultiPatternRule","./validator/BusinessLicenseNumberRule","./validator/NationalIdNumberRule","./validator/CustomRule","./extension/TipUsage","./extension/AutoValidate","./extension/TableCustomFieldsInterface","./extension/AceTool","./extension/Kafka","bat-ria/tpl"],function(require){var exports={};return require("esui/validator/MaxByteLengthRule"),require("esui/validator/MinByteLengthRule"),require("./validator/MaxFileCountRule"),require("./validator/MaxFileSizeRule"),require("./validator/MinFileSizeRule"),require("./validator/UniqueFileRule"),require("./validator/MultiPatternRule"),require("./validator/BusinessLicenseNumberRule"),require("./validator/NationalIdNumberRule"),require("./validator/CustomRule"),require("./extension/TipUsage"),require("./extension/AutoValidate"),require("./extension/TableCustomFieldsInterface"),require("./extension/AceTool"),require("./extension/Kafka"),exports.init=function(){var e=require("bat-ria/tpl");e.registerControl("inf-ria/ui/ConfigPanel"),e.registerControl("inf-ria/ui/RadioSelect"),e.registerControl("inf-ria/ui/Dragger"),e.registerControl("inf-ria/ui/NumberTextline"),e.registerControl("inf-ria/ui/MultiColumnBox"),e.registerControl("inf-ria/ui/MultiSelect"),e.registerControl("inf-ria/ui/SelectEx"),e.registerControl("inf-ria/ui/ToggleButton"),e.registerControl("inf-ria/ui/SMSCodeBox"),e.registerControl("inf-ria/ui/ViewStep"),e.registerControl("inf-ria/ui/ViewProgress"),e.registerControl("inf-ria/ui/InlineEdit"),e.registerControl("inf-ria/ui/Clipboard"),e.registerControl("inf-ria/ui/RichTextEditor"),e.registerControl("inf-ria/ui/WebUploader"),e.registerControl("inf-ria/ui/FilePreview"),e.registerControl("inf-ria/ui/ToastLabel"),e.registerControl("inf-ria/ui/StarRating"),e.registerControl("inf-ria/ui/BuyBucket"),e.registerControl("inf-ria/ui/echarts/EChart"),e.registerControl("inf-ria/ui/BcmChart"),e.registerControl("inf-ria/ui/BucketSelect"),e.registerControl("inf-ria/ui/ImageLightBox"),e.registerControl("inf-ria/ui/FlexPanel"),e.registerControl("inf-ria/ui/ACEEditor"),e.registerControl("inf-ria/ui/GuideTip"),e.registerControl("inf-ria/ui/JSONEditor"),e.registerExtension("inf-ria/ui/extension/TableFilter"),e.registerExtension("inf-ria/ui/extension/TableEx"),e.registerExtension("inf-ria/ui/extension/TableChild"),e.registerExtension("inf-ria/ui/extension/TableCustomFields"),e.registerExtension("inf-ria/ui/extension/TableOperator"),e.registerExtension("inf-ria/ui/extension/TableRadio"),e.registerExtension("inf-ria/ui/extension/TableSelect"),e.registerExtension("inf-ria/ui/extension/ToggleHolder"),e.registerExtension("inf-ria/ui/extension/TipUsage"),e.registerExtension("inf-ria/ui/extension/AutoValidate"),e.registerExtension("inf-ria/ui/extension/BcmChartShowBigView"),e.registerExtension("inf-ria/ui/extension/BucketSelectEx"),e.registerExtension("inf-ria/ui/extension/TextBoxSelect"),e.registerExtension("inf-ria/ui/extension/AceTool"),e.registerExtension("inf-ria/ui/extension/Kafka")},exports}),define("inf-ria/ui/extension/ToggleHolder",["require","esui/lib","esui/main","esui/Extension"],function(require){function e(){n.apply(this,arguments)}var t=require("esui/lib"),i=require("esui/main"),n=require("esui/Extension");return e.prototype.type="ToggleHolder",e.prototype.activate=function(){var e=this.target;e.toggle=function(){var t=e.fire("toggle");if(!t.isDefaultPrevented())e.set("checked",!this.checked)},n.prototype.activate.apply(this,arguments)},t.inherits(e,n),i.registerExtension(e),e}),define("inf-ria/ui/extension/TableSelect",["require","esui/Extension","esui/lib","esui/main","esui/Table","esui","underscore"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/Extension"),i=require("esui/lib"),n=require("esui/main"),r=require("esui/Table"),a=require("esui"),o=require("underscore");return e.prototype.type="TableSelect",e.prototype.activate=function(){var e=this.target;if(e instanceof r)e.on("bodyChange",function(t){e.selectControls=[],o.each(e.datasource,function(t,n){!function(t){var r=i.g(e.getBodyCellId(n,e.selectColumnIndex)),o=a.init(r)[0];e.selectControls.push(o),o.on("change",function(i){e.fire("selectChange",{field:e.datasource[t],selectedItem:i.target.datasource[i.target.selectedIndex]})})}(n)})}),t.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){var e=this.target;if(e instanceof r){for(var i=0;i<e.selectControls.length;i++)e.selectControls[i].dispose();t.prototype.inactivate.apply(this,arguments)}},i.inherits(e,t),n.registerExtension(e),e}),define("inf-ria/ui/extension/TableRadio",["require","esui/Extension","esui/lib","esui/main","esui/Table","jquery","underscore"],function(require){function e(){r.apply(this,arguments)}function t(){for(var e=this.getSelectedItems(),t=[],i=0;i<e.length;i++)t.push(e[i].name);for(var i=0;i<this.datasource.length;i++){var n=l(this.getRow(i));if(u.indexOf(t,this.datasource[i].name)>=0)n.find('input[type="radio"]').eq(1).prop("checked",!0),this.datasource[i].authType="readWrite"}}function i(){for(var e=this.getSelectedItems(),t=[],i=0;i<e.length;i++)t.push(e[i].name);for(var i=0;i<this.datasource.length;i++){var n=l(this.getRow(i));if(u.indexOf(t,this.datasource[i].name)>=0)n.find('input[type="radio"]').eq(0).prop("checked",!0),this.datasource[i].authType="readOnly"}}function n(e){for(var t=0;t<this.datasource.length;t++)for(var i=this.datasource[t].accountPrivileges,n=0;n<i.length;n++)if(i[n].accountName===e){var r=l(this.getRow(t));r.find('input[value="'+i[n].authType+'"]').prop("checked",!0),this.setRowSelected(t,!0)}}var r=require("esui/Extension"),a=require("esui/lib"),o=require("esui/main"),s=require("esui/Table"),l=require("jquery"),u=require("underscore");return e.prototype.type="TableRadio",e.prototype.activate=function(){var e=this.target;if(e instanceof s)e.setAllRead=i,e.setAllWrite=t,e.setCurrentAccountPrivileges=n,e.on("bodyChange",function(t){l(e.main).on("click",'input[type="radio"]',function(t){for(var i=l(t.target),n=i.attr("name"),r=0;r<e.datasource.length;r++)if(e.datasource[r].name==n)e.setRowSelected(r,!0)})}),e.on("select",function(t){for(var i=e.getSelectedItems(),n=[],r=0;r<i.length;r++)n.push(i[r].name);u.each(e.datasource,function(t,i){var r=l(e.getRow(i));if(u.indexOf(n,t.name)<0)r.find('input[type="radio"]').prop("checked",!1),delete t.authType;else{if(!r.find('input[type="radio"]').eq(0).prop("checked")&&!r.find('input[type="radio"]').eq(1).prop("checked"))r.find('input[type="radio"]').eq(0).prop("checked",!0);if(r.find('input[type="radio"]').eq(0).prop("checked"))t.authType="readOnly";else t.authType="readWrite"}})}),r.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){var e=this.target;if(e instanceof s)r.prototype.inactivate.apply(this,arguments)},a.inherits(e,r),o.registerExtension(e),e}),define("inf-ria/ui/extension/TableOperator",["require","esui/Extension","esui/lib","esui/main","esui/Table","esui","underscore"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/Extension"),i=require("esui/lib"),n=require("esui/main"),r=require("esui/Table"),a=require("esui"),o=require("underscore");return e.prototype.type="TableOperator",e.prototype.activate=function(){var e=this.target;if(e instanceof r)e.on("bodyChange",function(t){e.selectControls=[],o.each(e.datasource,function(t,n){var r=i.g(e.getBodyCellId(n,e.operatorColumnIndex)),s=a.init(r);e.selectControls.push.apply(e.selectControls,s),o.each(s,function(i){i.on("click",function(i){e.fire("operatorClick",{action:i.target.action,rowIndex:n,data:t})})})})}),e.on("afterrowupdate",function(t){var n=t.index,r=t.data,s=i.g(e.getBodyCellId(n,e.operatorColumnIndex)),l=a.init(s);e.selectControls.push.apply(e.selectControls,l),o.each(l,function(t){t.on("click",function(t){e.fire("operatorClick",{action:t.target.action,rowIndex:n,data:r})})})}),t.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){var e=this.target;if(e instanceof r){for(var i=0;i<e.selectControls.length;i++)e.selectControls[i].dispose();t.prototype.inactivate.apply(this,arguments)}},i.inherits(e,t),n.registerExtension(e),e}),define("inf-ria/ui/extension/TableFilter",["require","esui/Extension","esui/lib","esui/main","esui/Table","underscore","etpl"],function(require){function e(){B.apply(this,arguments)}function t(e,t){var n=i(e),r=n.querySelectorAll("."+e.helper.getPrimaryClassName("filter-panel"));if(t)return d.find(r,function(e){return c.getAttribute(e,"data-index")-t===0});else return r}function i(e){return c.g(e.getId("head"))}function n(e){var t=e.currentTarget.querySelector("."+this.helper.getPrimaryClassName("filter-select"));t.style.visibility="visible"}function r(e){var t=e.target.querySelector("."+this.helper.getPrimaryClassName("filter-select"));t.style.visibility=""}function a(e,i){var n=t(e,i.fieldIndex);r.call(e,{target:n}),o(e,i,n),e.fire("filter",i)}function o(e,t,i){var n=i.querySelectorAll("."+e.helper.getPrimaryClassName("filter-select")+" li");d.each(n,function(e){if(c.getAttribute(e,"data-value")===t.value)c.addClass(e,"active");else c.removeClass(e,"active")})}function s(e){var a=this,o=a.target;d.each(t(o),function(e){c.on(e,"click",d.bind(n,o)),c.on(e,"mouseleave",d.bind(r,o))});var s=i(o).querySelectorAll("li");d.each(s,function(e){c.on(e,"click",function(e){var t=c.getAttribute(e.target,"data-value"),i=c.getAttribute(e.target,"data-index");A.call(o,i,t),e.stopPropagation()})})}function l(e){var i=t(this,e),n=i.querySelector("li.active");return n&&{name:c.getText(n),value:c.getAttribute(n,"data-value"),fieldIndex:c.getAttribute(n,"data-index"),style:n.className}}function u(e){var t=l.call(this,e);return t&&t.value}function A(e,t){if(u.call(this,e)!==t){var i=d.find(this.fields[e].filter.datasource,function(e){return e.value===t});if(i)d.extend(i,{fieldIndex:e}),a(this,i)}}var B=require("esui/Extension"),c=require("esui/lib"),C=require("esui/main"),D=require("esui/Table"),d=require("underscore"),f=require("etpl");e.prototype.type="TableFilter";var h=['<div class="${prefix}-filter-panel" data-index="${fieldIndex}">','<label class="${prefix}-filter-head iconfont icon-downarrow">',"</label>",'<div class="${prefix}-filter-select">',"<ul>","<!-- for: ${datasource} as ${item} -->",'<li class="${item.style}" data-index="${fieldIndex}" data-value="${item.value}">',"${item.name}","</li>","<!-- /for -->","</ul>","</div>","</div>"];return e.prototype.render=function(){var e=this.target;e.rawField=d.deepClone(e.fields),e.fields=d.map(e.rawField,function(t,n){if(t.filter){d.each(t.filter.datasource,function(e){if(e.name=e.name||e.text,e.value===t.filter.value)e.style+=" active"}),t.filterSelect=f.compile(h.join(""))({prefix:e.helper.getPrimaryClassName(),datasource:t.filter.datasource||[],fieldIndex:n}),t.minWidth=t.minWidth||200;
var r=i(e),a=r.querySelectorAll("th"),o=!e.select?0:1;d.each(a,function(e){if(c.getAttribute(e,"data-index")-n===o)c.addClass(e,"hcell-filter"),e.children[0].innerHTML=t.title+t.filterSelect})}return t}),s.call(this),e.helper.addPartClasses("filter"),e.getFilterRawValue=l,e.getFilterValue=u,e.setFilterValue=A},e.prototype.activate=function(){var e=this.target;if(e instanceof D)e.on("bodyChange",d.bind(this.render,this)),B.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){if(this.target instanceof D)B.prototype.inactivate.apply(this,arguments)},c.inherits(e,B),C.registerExtension(e),e}),define("inf-ria/ui/extension/TableEx",["require","esui/Extension","esui/lib","esui/main","esui/Table","esui","underscore"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/Extension"),i=require("esui/lib"),n=require("esui/main"),r=require("esui/Table"),a=require("esui"),o=require("underscore");return e.prototype.type="TableEx",e.prototype.activate=function(){function e(e,t){var n=i.g(s.getBodyCellId(e,t));if(null==n)return[];var r=a.init(n,{viewContext:s.viewContext,valueReplacer:s.renderOptions.valueReplacer,parent:s});return o.each(r,function(t){var n=t.get("xEventType");if(n){n=i.splitTokenList(n);var r=t.get("xEventName")||"";o.each(n,function(i){var n=i;if(r)i=r+"@"+i;t.on(n,function(t){var r,a=t.target.get("xFieldName"),o=t.target.get("type");if(a){if("CheckBox"===o)r=t.target.checked;else r=t.target.getValue();s.datasource[e][a]=r}var l=t.target.get("xEventBubble");if("true"===l)s.fire(i,{bubble:!0,originalTarget:t.target,originalEventType:n})})})}}),r}function n(t){var i=[];o.each(s.datasource,function(t,n){var r=!s.select?0:1,a=s.extTableEx||[];if(a&&a.length){var u=[];o.each(s.fields,function(e,t){if(o.indexOf(a,e.field)>-1)u.push(t+r)}),l=u}o.each(l,function(t){var r=e(n,t);i.push.apply(i,r)})}),s.itemRenderers=i}var s=this.target;if(s instanceof r){var l=s.columnRenderIndexes;if("number"==typeof l)l=[l];s.on("bodyChange",n),t.prototype.activate.apply(this,arguments)}},e.prototype.inactivate=function(){var e=this.target;if(e instanceof r){for(var i=e.itemRenderers.length-1;i>-1;i--)e.itemRenderers[i].dispose();t.prototype.inactivate.apply(this,arguments)}},i.inherits(e,t),n.registerExtension(e),e}),define("inf-ria/ui/extension/TableChild",["require","esui/Extension","esui/lib","esui/main","esui/Table","esui","underscore","mini-event"],function(require){function e(){t.apply(this,arguments)}var t=require("esui/Extension"),i=require("esui/lib"),n=require("esui/main"),r=require("esui/Table"),a=require("esui"),o=require("underscore");return e.prototype.type="TableChild",e.prototype.activate=function(){function e(e){var t=require("mini-event").fromEvent(e,{preserveData:!0,syncState:!0});t.originControl=e.target,t.originType=e.type,i.fire("@childEvent",t)}var i=this.target;if(i instanceof r)i.on("bodyChange",function(){i.bodyPanel.disposeChildren(),i.bodyPanel.destroyEvents();var t={},n=i.bodyPanel.main;t=i.bodyPanel.renderOptions,t.viewContext=i.bodyPanel.viewContext,t.parent=i.bodyPanel;var r=a.init(n,t);o.each(r,function(t){t.on("*",e,this)})}),t.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){var e=this.target;if(e instanceof r)t.prototype.inactivate.apply(this,arguments)},i.inherits(e,t),n.registerExtension(e),e}),define("inf-ria/ui/extension/BucketSelectEx",["require","esui/Extension","esui/lib","esui/main","../BucketSelect","inf-i18n","underscore","er/Deferred","ef/ActionDialog"],function(require){function e(){i.apply(this,arguments)}function t(e){e=e||{};var t=document.createElement("div");document.body.appendChild(t);var i={width:600,needFoot:!1,draggable:!0,closeOnHide:!0,autoClose:!0,main:t,viewContext:this.viewContext};e=s.defaults({},e,i);var n=r.create("ActionDialog",e);n.render(),n.show(),t.style.visibility="hidden",t.style.opacity="0";var a=new l;return n.on("actionloaded",a.resolver.resolve),n.on("actionloadfail",a.resolver.reject),n.on("actionloadabort",a.resolver.reject),n.on("actionloaded",function(){n.resize(),n.main.style.visibility="visible",n.main.style.opacity="1"}),a.promise}var i=require("esui/Extension"),n=require("esui/lib"),r=require("esui/main"),a=require("../BucketSelect"),o=require("inf-i18n"),s=require("underscore"),l=require("er/Deferred");return require("ef/ActionDialog"),e.prototype.type="BucketSelectEx",e.prototype.activate=function(){var e=this.target;if(!(e instanceof a))return!1;else return e.on("render",function(t){if("function"!=typeof e.getBucketList||e.get("_loading"))return!1;if(e.get("_bucket")&&/\/$/.test(e.get("_bucket")))return e.fire("click"),!1;var i={all:!0},n=e.get("locations");if(n)i={locations:n};s.extend(i,{keyword:this.get("_bucket")}),e.set("_loading",!0),e.getBucketList(i,{"X-silence":!0}).then(function(t){e.layer.renderBucket(t.result),e.fire("getBucketListOk",{data:t})}).ensure(function(){e.set("_loading",!1)})}),e.on("click",function(t){if(t.selectType)return!1;if(""===e.get("_bucket")||e.get("_loading"))return!1;var i={bucketName:e.get("_bucket").replace(/\//g,""),marker:e.get("_marker"),prefix:e.layer.getPrefix()},n=e.get("filters");if(n&&s.isObject(n))s.extend(i,n);if("folder"===e.viewtype){if("function"!=typeof e.getFolderList)return!1;e.set("_loading",!0),e.getFolderList(i,{"X-silence":!0}).then(function(t){e.layer.renderFolder(t)}).ensure(function(){e.set("_loading",!1)})}else{if("function"!=typeof e.getObjectList)return!1;e.set("_loading",!0),e.getObjectList(i,{"X-silence":!0}).then(function(t){e.layer.renderFile(t)}).ensure(function(){e.set("_loading",!1)})}}),e.on("input",s.debounce(function(t){var i=t.target.getValue();t.target.setValue(i),e.addState("inputing")},500)),e.on("blur",function(){e.removeState("inputing")}),e.on("create",function(i){t.call(this,{url:"/common/bos/bucket/create/v2",title:o("新建Bucket"),width:800,needFoot:!0,actionOptions:{createBucket:this.get("createBucket"),getBucketLocations:this.get("getBucketLocations")}}).then(function(t){var i=t.target,n=i.getFoot().getChild("btnOk"),r=i.getFoot().getChild("btnCancel"),a=i.getAction();a.model.set("parentDialog",i),a.model.set("bucketSelect",e);var o=a.view.get("form");n.on("click",function(){o&&o.validateAndSubmit()}),r.on("click",function(){i.dispose()})})}),void i.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){var e=this.target;if(!(e instanceof a))return!1;else return void i.prototype.inactivate.apply(this,arguments)},n.inherits(e,i),r.registerExtension(e),e}),define("inf-ria/ui/extension/BcmChartShowBigView",["require","esui/Extension","esui/lib","esui/main","jquery","underscore","../BcmChart"],function(require){function e(){n.apply(this,arguments)}function t(){var e=this,t=e.metricConfig,i=document.createElement("div");document.body.appendChild(i);var n={needFoot:!1,draggable:!0,closeOnHide:!0,autoClose:!0,main:i,viewContext:e.viewContext,title:e.title,width:800,url:e.bigViewLocation||"/common/bcm/monitorChart",actionOptions:{scope:e.scope,dimensions:e.dimensions,statistics:e.statistics,timeRange:e.time,periodInSecond:e.period,metric:s.clone(t),apiType:e.apiType}},r=require("esui/main"),a=r.create("ActionDialog",n);a.render(),a.show(),a.on("actionloaded",function(){a.resize()})}function i(){var e=this;if("show"===e.showbigable)o("#"+e.helper.getId("title")).append('<div id="'+e.helper.getId("showbig")+'" class="'+e.helper.getPartClassName("showbig")+'"></div>'),e.helper.addDOMEvent("showbig","click",t,e)}var n=require("esui/Extension"),r=require("esui/lib"),a=require("esui/main"),o=require("jquery"),s=require("underscore"),l=require("../BcmChart");return e.prototype.type="BcmChartShowBigView",e.prototype.activate=function(){var e=this.target;if(e instanceof l)e.on("afterrender",i,e),n.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){var e=this.target;if(e instanceof l)n.prototype.inactivate.apply(this,arguments)},r.inherits(e,n),a.registerExtension(e),e}),define("inf-ria/ui/echarts/options",["require"],function(require){var e={legend:{orient:"horizontal",x:"center",y:"top",itemGap:15,padding:[15,70,15,8],data:[]},calculable:!1,series:[{type:"pie",center:["50%","50%"],radius:["30%","50%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}},emphasis:{label:{show:!0,formatter:"{b}{c}",position:"center",textStyle:{fontSize:"20",fontWeight:"400",color:"#333"}}}},data:[]}]},t={tooltip:{trigger:"axis"},lineStyle:{width:1},xAxis:[{boundaryGap:!1,data:[],axisLine:{lineStyle:{color:"#333",width:1}},splitLine:!1}],yAxis:[{axisLine:{lineStyle:{color:"#333",width:1}},boundaryGap:[.4,0],scale:!0}],series:[{showAllSymbol:!0,name:"",type:"line",data:[]}]},i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[],padding:[0,0,0,200],textStyle:{fontFamily:"Microsoft YaHei",color:"#000"}},xAxis:[{nameTextStyle:{color:"#000",fontFamily:"Microsoft YaHei"},axisLine:{lineStyle:{color:"#333",width:1}},axisTick:{show:!1}}],yAxis:[{nameTextStyle:{color:"#000",fontFamily:"Microsoft YaHei"},axisLine:{lineStyle:{color:"#333",width:1}}}],series:[]};return{pieChartOption:e,lineChartOption:t,barChartOption:i}}),define("inf-ria/ui/echarts/EChart",["require","underscore","esui/lib","esui/Control","esui/painters","zrender/core/util","../../echarts","./options","esui/main"],function(require){function e(e){n.apply(this,arguments),this.echartsInstance=o.init(this.main)}var t=require("underscore"),i=require("esui/lib"),n=require("esui/Control"),r=require("esui/painters"),a=require("zrender/core/util"),o=require("../../echarts"),s=require("./options");return e.prototype.type="EChart",e.prototype.repaint=r.createRepaint(n.prototype.repaint,{name:"option",paint:function(e,n){if(n&&n.series&&0!==n.series.length){var r=n.series[0].type||e.chartType||"pie",o=s[r+"ChartOption"]||{},l=!1;if(t.each(n.series,function(e){if(e.type&&e.type!==r)l=!0}),!l){var u=i.clone(o);n=a.merge(u,n||{},!0)}e.echartsInstance.setOption(n,!0)}}}),e.prototype.setOption=function(e){this.setProperties({option:e})},i.inherits(e,n),require("esui/main").register(e),e}),define("inf-ria/css",["exports","module"],function(exports,module){module.exports={load:function(e,t,i){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t.toUrl(e));var r=document.getElementsByTagName("head")[0]||document.body;r.appendChild(n),r=null,n=null,i(!0)}}}),define("webuploader/promise",["require","jquery"],function(require){var e=require("jquery");return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),define("webuploader/base",["require","jquery","./promise"],function(require){function e(e){return function(){return o.apply(e,arguments)}}function t(e,t){return function(){return e.apply(t,arguments)}}function i(e){var t;if(Object.create)return Object.create(e);else return t=function(){},t.prototype=e,new t}var n=require("jquery"),r=require("./promise"),a=function(){},o=Function.call;return{version:"0.1.5",$:n,Deferred:r.Deferred,isPromise:r.isPromise,when:r.when,browser:function(e){var t={},i=e.match(/WebKit\/([\d.]+)/),n=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),r=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),a=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),s=e.match(/OPR\/([\d.]+)/);return i&&(t.webkit=parseFloat(i[1])),n&&(t.chrome=parseFloat(n[1])),r&&(t.ie=parseFloat(r[1])),a&&(t.firefox=parseFloat(a[1])),o&&(t.safari=parseFloat(o[1])),s&&(t.opera=parseFloat(s[1])),t}(navigator.userAgent),os:function(e){var t={},i=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),n=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return i&&(t.android=parseFloat(i[1])),n&&(t.ios=parseFloat(n[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,t,r){var a;if("function"==typeof t)a=t,t=null;else if(t&&t.hasOwnProperty("constructor"))a=t.constructor;else a=function(){return e.apply(this,arguments)};return n.extend(!0,a,e,r||{}),a.__super__=e.prototype,a.prototype=i(e.prototype),t&&n.extend(!0,a.prototype,t),a},noop:a,bindFn:t,log:function(){if(window.console)return t(console.log,console);else return a}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:e([].slice),guid:function(){var e=0;return function(t){for(var i=(+new Date).toString(32),n=0;5>n;n++)i+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+i+(e++).toString(32)}}(),formatSize:function(e,t,i){var n;for(i=i||["B","K","M","G","TB"];(n=i.shift())&&e>1024;)e/=1024;return("B"===n?e:e.toFixed(t||2))+n}}}),define("webuploader/mediator",["require","./base"],function(require){function e(e,t,i,n){return a.grep(e,function(e){return!(!e||t&&e.e!==t||i&&e.cb!==i&&e.cb._cb!==i||n&&e.ctx!==n)})}function t(e,t,i){a.each((e||"").split(s),function(e,n){i(n,t)})}function i(e,t){for(var i,n=!1,r=-1,a=e.length;++r<a;)if(i=e[r],i.cb.apply(i.ctx2,t)===!1){n=!0;break}return!n}var n,r=require("./base"),a=r.$,o=[].slice,s=/\s+/;return n={on:function(e,i,n){var r,a=this;if(!i)return this;else return r=this._events||(this._events=[]),t(e,i,function(e,t){var i={e:e};i.cb=t,i.ctx=n,i.ctx2=n||a,i.id=r.length,r.push(i)}),this},once:function(e,i,n){var r=this;if(!i)return r;else return t(e,i,function(e,t){var i=function(){return r.off(e,i),t.apply(n||r,arguments)};i._cb=t,r.on(e,i,n)}),r},off:function(i,n,r){var o=this._events;if(!o)return this;if(!i&&!n&&!r)return this._events=[],this;else return t(i,n,function(t,i){a.each(e(o,t,i,r),function(){delete o[this.id]})}),this},trigger:function(t){var n,r,a;if(!this._events||!t)return this;else return n=o.call(arguments,1),r=e(this._events,t),a=e(this._events,"all"),i(r,n)&&i(a,arguments)}},a.extend({installTo:function(e){return a.extend(e,n)}},n)}),define("webuploader/uploader",["require","./base","./mediator"],function(require){function e(t){this.options=n.extend(!0,{},e.options,t),this._init(this.options)}var t=require("./base"),i=require("./mediator"),n=t.$;return e.options={},i.installTo(e.prototype),n.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(t,i){e.prototype[t]=function(){return this.request(i,arguments)}}),n.extend(e.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var i=this.options;if(arguments.length>1)if(n.isPlainObject(t)&&n.isPlainObject(i[e]))n.extend(i[e],t);else i[e]=t;else return e?i[e]:i},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var t=[].slice.call(arguments,1),r=this.options,a="on"+e.substring(0,1).toUpperCase()+e.substring(1);if(i.trigger.apply(this,arguments)===!1||n.isFunction(r[a])&&r[a].apply(this,t)===!1||n.isFunction(this[a])&&this[a].apply(this,t)===!1||i.trigger.apply(i,[this,e].concat(t))===!1)return!1;else return!0},destroy:function(){this.request("destroy",arguments),this.off()},request:t.noop}),t.create=e.create=function(t){return new e(t)},t.Uploader=e,e}),define("webuploader/widgets/widget",["require","../base","../uploader"],function(require){function e(e){if(!e)return!1;var t=e.length,i=r.type(e);if(1===e.nodeType&&t)return!0;else return"array"===i||"function"!==i&&"string"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function t(e){this.owner=e,this.options=e.options}var i=require("../base"),n=require("../uploader"),r=i.$,a=n.prototype._init,o=n.prototype.destroy,s={},l=[];return r.extend(t.prototype,{init:i.noop,invoke:function(e,t){var i=this.responseMap;if(!(i&&e in i&&i[e]in this&&r.isFunction(this[i[e]])))return s;else return this[i[e]].apply(this,t)},request:function(){return this.owner.request.apply(this.owner,arguments)}}),r.extend(n.prototype,{_init:function(){var e=this,t=e._widgets=[],i=e.options.disableWidgets||"";return r.each(l,function(n,r){(!i||!~i.indexOf(r._name))&&t.push(new r(e))}),a.apply(e,arguments)},request:function(t,n,r){var a,o,l,u,A=0,B=this._widgets,c=B&&B.length,C=[],D=[];for(n=e(n)?n:[n];c>A;A++)if(a=B[A],o=a.invoke(t,n),o!==s)if(i.isPromise(o))D.push(o);else C.push(o);if(r||D.length)return l=i.when.apply(i,D),u=l.pipe?"pipe":"then",l[u](function(){var e=i.Deferred(),t=arguments;if(1===t.length)t=t[0];return setTimeout(function(){e.resolve(t)},1),e.promise()})[r?u:"done"](r||i.noop);else return C[0]},destroy:function(){o.apply(this,arguments),this._widgets=null}}),n.register=t.register=function(e,n){var a,o={init:"init",destroy:"destroy",name:"anonymous"};if(1===arguments.length)n=e,r.each(n,function(e){if("_"===e[0]||"name"===e)return void("name"===e&&(o.name=n.name));else return void(o[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e)});else o=r.extend(o,e);return n.responseMap=o,a=i.inherits(t,n),a._name=o.name,l.push(a),a},n.unRegister=t.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=l.length;t--;)if(l[t]._name===e)l.splice(t,1)},t}),define("webuploader/runtime/runtime",["require","../base","../mediator"],function(require){function e(e){this.options=n.extend({container:document.body},e),this.uid=t.guid("rt_")}var t=require("../base"),i=require("../mediator"),n=t.$,r={},a=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return n.extend(e.prototype,{getContainer:function(){var e,t,i=this.options;if(this._container)return this._container;else return e=n(i.container||document.body),t=n(document.createElement("div")),t.attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,this._parent=e,t},init:t.noop,exec:t.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),e.orders="html5,flash",e.addRuntime=function(e,t){r[e]=t},e.hasRuntime=function(e){return!!(e?r[e]:a(r))},e.create=function(t,i){var o,s;if(i=i||e.orders,n.each(i.split(/\s*,\s*/g),function(){if(r[this])return o=this,!1;else return void 0}),o=o||a(r),!o)throw new Error("Runtime Error");return s=new r[o](t)},i.installTo(e.prototype),e}),define("webuploader/runtime/client",["require","../base","../mediator","./runtime"],function(require){function e(e,n){var a,o=i.Deferred();this.uid=i.guid("client_"),this.runtimeReady=function(e){return o.done(e)},this.connectRuntime=function(e,s){if(a)throw new Error("already connected!");if(o.done(s),"string"==typeof e&&t.get(e))a=t.get(e);if(a=a||t.get(null,n),!a)a=r.create(e,e.runtimeOrder),a.__promise=o.promise(),a.once("ready",o.resolve),a.init(),t.add(a),a.__client=1;else i.$.extend(a.options,e),a.__promise.then(o.resolve),a.__client++;return n&&(a.__standalone=n),a},this.getRuntime=function(){return a},this.disconnectRuntime=function(){if(a){if(a.__client--,a.__client<=0)t.remove(a),delete a.__promise,a.destroy();a=null}},this.exec=function(){if(a){var t=i.slice(arguments);return e&&t.unshift(e),a.exec.apply(this,t)}},this.getRuid=function(){return a&&a.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var t,i=require("../base"),n=require("../mediator"),r=require("./runtime");return t=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,i){var n;if(t)return e[t];for(n in e)if(!i||!e[n].__standalone)return e[n];else;return null},remove:function(t){delete e[t.uid]}}}(),n.installTo(e.prototype),e}),define("webuploader/lib/dnd",["require","../base","../mediator","../runtime/client"],function(require){function e(t){if(t=this.options=r.extend({},e.options,t),t.container=r(t.container),t.container.length)n.call(this,"DragAndDrop")}var t=require("../base"),i=require("../mediator"),n=require("../runtime/client"),r=t.$;return e.options={accept:null,disableGlobalDnd:!1},t.inherits(n,{constructor:e,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),i.installTo(e.prototype),e}),define("webuploader/widgets/filednd",["require","../base","../uploader","../lib/dnd"],function(require){var e=require("../base"),t=require("../uploader"),i=require("../lib/dnd"),n=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var r,a=this,o=e.Deferred(),s=n.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return this.dnd=r=new i(s),r.once("ready",o.resolve),r.on("drop",function(e){a.request("add-file",[e])}),r.on("accept",function(e){return a.owner.trigger("dndAccept",e)}),r.init(),o.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),define("webuploader/lib/filepaste",["require","../base","../mediator","../runtime/client"],function(require){function e(e){e=this.options=r.extend({},e),e.container=r(e.container||document.body),n.call(this,"FilePaste")}var t=require("../base"),i=require("../mediator"),n=require("../runtime/client"),r=t.$;return t.inherits(n,{constructor:e,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),i.installTo(e.prototype),e}),define("webuploader/widgets/filepaste",["require","../base","../uploader","../lib/filepaste"],function(require){var e=require("../base"),t=require("../uploader"),i=require("../lib/filepaste"),n=e.$;return t.register({name:"paste",init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var r,a=this,o=e.Deferred(),s=n.extend({},{container:t.paste,accept:t.accept});return this.paste=r=new i(s),r.once("ready",o.resolve),r.on("paste",function(e){a.owner.request("add-file",[e])}),r.init(),o.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),define("webuploader/lib/blob",["require","../base","../runtime/client"],function(require){function e(e,t){var n=this;if(n.source=t,n.ruid=e,this.size=t.size||0,!t.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext))this.type="image/"+("jpg"===this.ext?"jpeg":this.ext);else this.type=t.type||"application/octet-stream";if(i.call(n,"Blob"),this.uid=t.uid||this.uid,e)n.connectRuntime(e)}var t=require("../base"),i=require("../runtime/client");return t.inherits(i,{constructor:e,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),e}),define("webuploader/lib/file",["require","../base","./blob"],function(require){function e(e,t){var a;if(this.name=t.name||"untitled"+n++,a=r.exec(t.name)?RegExp.$1.toLowerCase():"",!a&&t.type)a=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(t.type)?RegExp.$1.toLowerCase():"",this.name+="."+a;this.ext=a,this.lastModifiedDate=t.lastModifiedDate||(new Date).toLocaleString(),i.apply(this,arguments)}var t=require("../base"),i=require("./blob"),n=1,r=/\.([^.]+)$/;return t.inherits(i,e)}),define("webuploader/lib/filepicker",["require","../base","../runtime/client","./file"],function(require){function e(t){if(t=this.options=r.extend({},e.options,t),t.container=r(t.id),!t.container.length)throw new Error("按钮指定错误");t.innerHTML=t.innerHTML||t.label||t.container.html()||"",t.button=r(t.button||document.createElement("div")),t.button.html(t.innerHTML),t.container.html(t.button),i.call(this,"FilePicker",!0)}var t=require("../base"),i=require("../runtime/client"),n=require("./file"),r=t.$;return e.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(i,{constructor:e,init:function(){var e=this,i=e.options,a=i.button;a.addClass("webuploader-pick"),e.on("all",function(t){var o;switch(t){case"mouseenter":a.addClass("webuploader-pick-hover");break;case"mouseleave":a.removeClass("webuploader-pick-hover");break;case"change":o=e.exec("getFiles"),e.trigger("select",r.map(o,function(t){return t=new n(e.getRuid(),t),t._refer=i.container,t}),i.container)}}),e.connectRuntime(i,function(){e.refresh(),e.exec("init",i),e.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),r(window).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,i=t.outerWidth?t.outerWidth():t.width(),n=t.outerHeight?t.outerHeight():t.height(),r=t.offset();i&&n&&e.css({bottom:"auto",right:"auto",width:i+"px",height:n+"px"}).offset(r)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var e=this.options.button;r(window).off("resize",this._resizeHandler),e.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),e}),define("webuploader/widgets/filepicker",["require","../base","../uploader","../lib/filepicker"],function(require){var e=require("../base"),t=require("../uploader"),i=require("../lib/filepicker"),n=e.$;return n.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){n.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var r=this,a=r.options,o=a.accept,s=[];if(t)return n.isPlainObject(t)||(t={id:t}),n(t.id).each(function(){var l,u,A;A=e.Deferred(),l=n.extend({},t,{accept:n.isPlainObject(o)?[o]:o,swf:a.swf,runtimeOrder:a.runtimeOrder,id:this}),u=new i(l),u.once("ready",A.resolve),u.on("select",function(e){r.owner.request("add-file",[e])}),u.init(),r.pickers.push(u),s.push(A.promise())}),e.when.apply(e,s);else return void 0},disable:function(){n.each(this.pickers,function(){this.disable()})},enable:function(){n.each(this.pickers,function(){this.enable()})},destroy:function(){n.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),define("webuploader/lib/image",["require","../base","../runtime/client","./blob"],function(require){function e(t){this.options=r.extend({},e.options,t),i.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var t=require("../base"),i=require("../runtime/client"),n=require("./blob"),r=t.$;return e.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},t.inherits(i,{constructor:e,info:function(e){if(e)return this._info=e,this;else return this._info},meta:function(e){if(e)return this._meta=e,this;else return this._meta},loadFromBlob:function(e){var t=this,i=e.getRuid();this.connectRuntime(i,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var e=t.slice(arguments);return this.exec.apply(this,["resize"].concat(e))},crop:function(){var e=t.slice(arguments);return this.exec.apply(this,["crop"].concat(e))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),e}),define("webuploader/widgets/image",["require","../base","../uploader","../lib/image"],function(require){var e,t=require("../base"),i=require("../uploader"),n=require("../lib/image"),r=t.$;return e=function(e){var t=0,i=[],n=function(){for(var n;i.length&&e>t;)n=i.shift(),t+=n[0],n[1]()};return function(e,r,a){i.push([r,a]),e.once("destroy",function(){t-=r,setTimeout(n,1)}),setTimeout(n,1)}}(5242880),r.extend(i.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),i.register({name:"image",makeThumb:function(t,i,a,o){var s,l;if(t=this.request("get-file",t),!t.type.match(/^image/))return void i(!0);if(s=r.extend({},this.options.thumb),r.isPlainObject(a))s=r.extend(s,a),a=null;a=a||s.width,o=o||s.height,l=new n(s),l.once("load",function(){if(t._info=t._info||l.info(),t._meta=t._meta||l.meta(),1>=a&&a>0)a=t._info.width*a;if(1>=o&&o>0)o=t._info.height*o;l.resize(a,o)}),l.once("complete",function(){i(!1,l.getAsDataUrl(s.type)),l.destroy()}),l.once("error",function(e){i(e||!0),l.destroy()}),e(l,t.source.size,function(){t._info&&l.info(t._info),t._meta&&l.meta(t._meta),l.loadFromBlob(t.source)})},beforeSendFile:function(e){var i,a,o=this.options.compress||this.options.resize,s=o&&o.compressSize||0,l=o&&o.noCompressIfLarger||!1;if(e=this.request("get-file",e),o&&~"image/jpeg,image/jpg".indexOf(e.type)&&!(e.size<s)&&!e._compressed)return o=r.extend({},o),a=t.Deferred(),i=new n(o),a.always(function(){i.destroy(),i=null}),i.once("error",a.reject),i.once("load",function(){var t=o.width,n=o.height;if(e._info=e._info||i.info(),e._meta=e._meta||i.meta(),1>=t&&t>0)t=e._info.width*t;if(1>=n&&n>0)n=e._info.height*n;i.resize(t,n)}),i.once("complete",function(){var t,n;try{if(t=i.getAsBlob(o.type),n=e.size,!l||t.size<n)e.source=t,e.size=t.size,e.trigger("resize",t.size,n);e._compressed=!0,a.resolve()}catch(r){a.resolve()}}),e._info&&i.info(e._info),e._meta&&i.meta(e._meta),i.loadFromBlob(e.source),a.promise();else return void 0}})}),define("webuploader/file",["require","./base","./mediator"],function(require){function e(){return a+o++}function t(i){this.name=i.name||"Untitled",this.size=i.size||0,this.type=i.type||"application/octet-stream",this.lastModifiedDate=i.lastModifiedDate||1*new Date,this.id=e(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",l[this.id]=t.Status.INITED,this.source=i,this.loaded=0,this.on("error",function(e){this.setStatus(t.Status.ERROR,e)})}var i=require("./base"),n=require("./mediator"),r=i.$,a="WU_FILE_",o=0,s=/\.([^.]+)$/,l={};return r.extend(t.prototype,{setStatus:function(e,t){var i=l[this.id];if("undefined"!=typeof t&&(this.statusText=t),e!==i)l[this.id]=e,this.trigger("statuschange",e,i)},getStatus:function(){return l[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete l[this.id]}}),n.installTo(t.prototype),t.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},t}),define("webuploader/queue",["require","./base","./mediator","./file"],function(require){function e(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var t=require("./base"),i=require("./mediator"),n=require("./file"),r=t.$,a=n.Status;return r.extend(e.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){if("string"!=typeof e)return e;else return this._map[e]},fetch:function(e){var t,i,n=this._queue.length;for(e=e||a.QUEUED,t=0;n>t;t++)if(i=this._queue[t],e===i.getStatus())return i;return null},sort:function(e){if("function"==typeof e)this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),i=[],n=0,a=this._queue.length;a>n;n++)if(e=this._queue[n],!t.length||~r.inArray(e.getStatus(),t))i.push(e);else;return i},removeFile:function(e){var t=this._map[e.id];if(t)delete this._map[e.id],e.destroy(),this.stats.numofDeleted++},_fileAdded:function(e){var t=this,i=this._map[e.id];if(!i)this._map[e.id]=e,e.on("statuschange",function(e,i){t._onFileStatusChange(e,i)})},_onFileStatusChange:function(e,t){var i=this.stats;switch(t){case a.PROGRESS:i.numOfProgress--;break;case a.QUEUED:i.numOfQueue--;break;case a.ERROR:i.numOfUploadFailed--;break;case a.INVALID:i.numOfInvalid--;break;case a.INTERRUPT:i.numofInterrupt--}switch(e){case a.QUEUED:i.numOfQueue++;break;case a.PROGRESS:i.numOfProgress++;
break;case a.ERROR:i.numOfUploadFailed++;break;case a.COMPLETE:i.numOfSuccess++;break;case a.CANCELLED:i.numOfCancel++;break;case a.INVALID:i.numOfInvalid++;break;case a.INTERRUPT:i.numofInterrupt++}}}),i.installTo(e.prototype),e}),define("webuploader/widgets/queue",["require","../base","../uploader","../queue","../file","../lib/file","../runtime/client"],function(require){var e=require("../base"),t=require("../uploader"),i=require("../queue"),n=require("../file"),r=require("../lib/file"),a=require("../runtime/client"),o=e.$,s=/\.\w+$/,l=n.Status;return t.register({name:"queue",init:function(t){var n,r,s,l,u,A,B,c=this;if(o.isPlainObject(t.accept))t.accept=[t.accept];if(t.accept){for(u=[],s=0,r=t.accept.length;r>s;s++)l=t.accept[s].extensions,l&&u.push(l);if(u.length)A="\\."+u.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$";c.accept=new RegExp(A,"i")}if(c.queue=new i,c.stats=c.queue.stats,"html5"===this.request("predict-runtime-type"))return n=e.Deferred(),this.placeholder=B=new a("Placeholder"),B.connectRuntime({runtimeOrder:"html5"},function(){c._ruid=B.getRuid(),n.resolve()}),n.promise();else return void 0},_wrapFile:function(e){if(!(e instanceof n)){if(!(e instanceof r)){if(!this._ruid)throw new Error("Can't add external files.");e=new r(this._ruid,e)}e=new n(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&s.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;if(e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e)){if(!t.acceptFile(e))if(e&&0===e.size)return void t.owner.trigger("error","Q_ZERO_SIZE_LIMIT",e);else return void t.owner.trigger("error","Q_TYPE_DENIED",e);return t.queue.append(e),t.owner.trigger("fileQueued",e),e}},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;if(!e.length)e=[e];if(e=o.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto)setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){var i=this;if(e=e.id?e:i.queue.getFile(e),this.request("cancel-file",e),t)this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var i,n,r,a=this;if(e)return e=e.id?e:a.queue.getFile(e),e.setStatus(l.QUEUED),void(t||a.request("start-upload"));for(i=a.queue.getFiles(l.ERROR),n=0,r=i.length;r>n;n++)e=i[n],e.setStatus(l.QUEUED);a.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new i,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),define("webuploader/widgets/runtime",["require","../uploader","../runtime/runtime"],function(require){var e=require("../uploader"),t=require("../runtime/runtime");return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,i,n=this.options.runtimeOrder||t.orders,r=this.type;if(!r)for(n=n.split(/\s*,\s*/g),e=0,i=n.length;i>e;e++)if(t.hasRuntime(n[e])){this.type=r=n[e];break}return r}})}),define("webuploader/lib/transport",["require","../base","../runtime/client","../mediator"],function(require){function e(t){var n=this;t=n.options=r.extend(!0,{},e.options,t||{}),i.call(this,"Transport"),this._blob=null,this._formData=t.formData||{},this._headers=t.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var t=require("../base"),i=require("../runtime/client"),n=require("../mediator"),r=t.$;return e.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(e.prototype,{appendBlob:function(e,t,i){var n=this,r=n.options;if(n.getRuid())n.disconnectRuntime();n.connectRuntime(t.ruid,function(){n.exec("init")}),n._blob=t,r.fileVal=e||r.fileVal,r.filename=i||r.filename},append:function(e,t){if("object"==typeof e)r.extend(this._formData,e);else this._formData[e]=t},setRequestHeader:function(e,t){if("object"==typeof e)r.extend(this._headers,e);else this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;if(t)clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t)}}),n.installTo(e.prototype),e}),define("webuploader/widgets/upload",["require","../base","../uploader","../file","../lib/transport"],function(require){function e(e,t){var i,n,r=[],a=e.source,o=a.size,s=t?Math.ceil(o/t):1,l=0,u=0;for(n={file:e,has:function(){return!!r.length},shift:function(){return r.shift()},unshift:function(e){r.unshift(e)}};s>u;)i=Math.min(t,o-l),r.push({file:e,start:l,end:t?l+i:o,total:o,chunks:s,chunk:u++,cuted:n}),l+=i;return e.blocks=r.concat(),e.remaning=r.length,n}var t=require("../base"),i=require("../uploader"),n=require("../file"),r=require("../lib/transport"),a=t.$,o=t.isPromise,s=n.Status;a.extend(i.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),i.register({name:"upload",init:function(){var e=this.owner,i=this;this.runing=!1,this.progress=!1,e.on("startUpload",function(){i.progress=!0}).on("uploadFinished",function(){i.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=t.bindFn(this._tick,this),e.on("uploadComplete",function(e){e.blocks&&a.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(e){var i=this;if(a.each(i.request("get-files",s.INVALID),function(){i.request("remove-file",this)}),e)if(e=e.id?e:i.request("get-file",e),e.getStatus()===s.INTERRUPT)a.each(i.pool,function(t,i){if(i.file===e)i.transport&&i.transport.send()}),e.setStatus(s.QUEUED);else if(e.getStatus()===s.PROGRESS)return;else e.setStatus(s.QUEUED);else a.each(i.request("get-files",[s.INITED]),function(){this.setStatus(s.QUEUED)});if(!i.runing){i.runing=!0;var n=[];for(a.each(i.pool,function(e,t){var r=t.file;if(r.getStatus()===s.INTERRUPT)n.push(r),i._trigged=!1,t.transport&&t.transport.send()});e=n.shift();)e.setStatus(s.PROGRESS);e||a.each(i.request("get-files",s.INTERRUPT),function(){this.setStatus(s.PROGRESS)}),i._trigged=!1,t.nextTick(i.__tick),i.owner.trigger("startUpload")}},stopUpload:function(e,i){var n=this;if(e===!0)i=e,e=null;if(n.runing!==!1){if(e){if(e=e.id?e:n.request("get-file",e),e.getStatus()!==s.PROGRESS&&e.getStatus()!==s.QUEUED)return;return e.setStatus(s.INTERRUPT),a.each(n.pool,function(t,i){if(i.file===e)i.transport&&i.transport.abort(),n._putback(i),n._popBlock(i)}),t.nextTick(n.__tick)}if(n.runing=!1,this._promise&&this._promise.file)this._promise.file.setStatus(s.INTERRUPT);i&&a.each(n.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(s.INTERRUPT)}),n.owner.trigger("stopUpload")}},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&a.each(e.blocks,function(e,t){var i=t.transport;if(i)i.abort(),i.destroy(),delete t.transport}),e.setStatus(s.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||s.COMPLETE),e.skipped=!0,e.blocks&&a.each(e.blocks,function(e,t){var i=t.transport;if(i)i.abort(),i.destroy(),delete t.transport}),this.owner.trigger("uploadSkip",e)},_tick:function(){var e,i,n=this,r=n.options;if(n._promise)return n._promise.always(n.__tick);if(n.pool.length<r.threads&&(i=n._nextBlock()))n._trigged=!1,e=function(e){n._promise=null,e&&e.file&&n._startSend(e),t.nextTick(n.__tick)},n._promise=o(i)?i.always(e):e(i);else if(!n.remaning&&!n._getStats().numOfQueue&&!n._getStats().numofInterrupt)n.runing=!1,n._trigged||t.nextTick(function(){n.owner.trigger("uploadFinished")}),n._trigged=!0},_putback:function(e){var t;if(e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),!~t)this.stack.unshift(e.cuted)},_getStack:function(){for(var e,t=0;e=this.stack[t++];)if(e.has()&&e.file.getStatus()===s.PROGRESS)return e;else if(!e.has()||e.file.getStatus()!==s.PROGRESS&&e.file.getStatus()!==s.INTERRUPT)this.stack.splice(--t,1);return null},_nextBlock:function(){var t,i,n,r,a=this,s=a.options;if(t=this._getStack()){if(s.prepareNextFile&&!a.pending.length)a._prepareNextFile();return t.shift()}else if(a.runing){if(!a.pending.length&&a._getStats().numOfQueue)a._prepareNextFile();if(i=a.pending.shift(),n=function(i){if(!i)return null;else return t=e(i,s.chunked?s.chunkSize:0),a.stack.push(t),t.shift()},o(i))return r=i.file,i=i[i.pipe?"pipe":"then"](n),i.file=r,i;else return n(i)}},_prepareNextFile:function(){var e,t=this,i=t.request("fetch-file"),n=t.pending;if(i)e=t.request("before-send-file",i,function(){if(i.getStatus()===s.PROGRESS||i.getStatus()===s.INTERRUPT)return i;else return t._finishFile(i)}),t.owner.trigger("uploadStart",i),i.setStatus(s.PROGRESS),e.file=i,e.done(function(){var t=a.inArray(e,n);~t&&n.splice(t,1,i)}),e.fail(function(e){i.setStatus(s.ERROR,e),t.owner.trigger("uploadError",i,e),t.owner.trigger("uploadComplete",i)}),n.push(e)},_popBlock:function(e){var t=a.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(e){var i,n=this,r=e.file;if(r.getStatus()===s.PROGRESS)n.pool.push(e),n.remaning++,e.blob=1===e.chunks?r.source:r.source.slice(e.start,e.end),i=n.request("before-send",e,function(){if(r.getStatus()===s.PROGRESS)n._doSend(e);else n._popBlock(e),t.nextTick(n.__tick)}),i.fail(function(){if(1===r.remaning)n._finishFile(r).always(function(){e.percentage=1,n._popBlock(e),n.owner.trigger("uploadComplete",r),t.nextTick(n.__tick)});else e.percentage=1,n.updateFileProgress(r),n._popBlock(e),t.nextTick(n.__tick)});else if(r.getStatus()===s.INTERRUPT)n._putback(e)},_doSend:function(e){var i,n,o=this,l=o.owner,u=o.options,A=e.file,B=new r(u),c=a.extend({},u.formData),C=a.extend({},u.headers);e.transport=B,B.on("destroy",function(){delete e.transport,o._popBlock(e),t.nextTick(o.__tick)}),B.on("progress",function(t){e.percentage=t,o.updateFileProgress(A)}),i=function(t,i){var r;if(n=B.getResponseAsJson()||{},n._raw=B.getResponse(),r=function(e){t=e},!l.trigger("uploadAccept",e,n,r,i))t=t||"server";return t},B.on("error",function(t,n){if(e.retried=e.retried||0,e.chunks>1&&~"http,abort".indexOf(t)&&e.retried<u.chunkRetry)e.retried++,B.send();else{if(!n&&"server"===t)t=i(t);A.setStatus(s.ERROR,t),l.trigger("uploadError",A,t),l.trigger("uploadComplete",A)}}),B.on("load",function(e){var t;if(t=i(null,e))return void B.trigger("error",t,!0);if(1===A.remaning)o._finishFile(A,n);else B.destroy()}),c=a.extend(c,{id:A.id,name:A.name,type:A.type,lastModifiedDate:A.lastModifiedDate,size:A.size}),e.chunks>1&&a.extend(c,{chunks:e.chunks,chunk:e.chunk}),l.trigger("uploadBeforeSend",e,c,C),B.appendBlob(u.fileVal,e.blob,A.name),B.append(c),B.setRequestHeader(C),B.send()},_finishFile:function(e,t,i){var n=this.owner;return n.request("after-send-file",arguments,function(){e.setStatus(s.COMPLETE),n.trigger("uploadSuccess",e,t,i)}).fail(function(t){if(e.getStatus()===s.PROGRESS)e.setStatus(s.ERROR,t);n.trigger("uploadError",e,t)}).always(function(){n.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,i=0;if(e.blocks)a.each(e.blocks,function(e,t){i+=(t.percentage||0)*(t.end-t.start)}),t=i/e.size,this.owner.trigger("uploadProgress",e,t||0)}})}),define("webuploader/widgets/validator",["require","../base","../uploader","../file"],function(require){var e,t=require("../base"),i=require("../uploader"),n=require("../file"),r=t.$,a={};return e={addValidator:function(e,t){a[e]=t},removeValidator:function(e){delete a[e]}},i.register({name:"validator",init:function(){var e=this;t.nextTick(function(){r.each(a,function(){this.call(e.owner)})})}}),e.addValidator("fileNumLimit",function(){var e=this,t=e.options,i=0,n=parseInt(t.fileNumLimit,10),r=!0;if(n)e.on("beforeFileQueued",function(e){if(i>=n&&r)r=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",n,e),setTimeout(function(){r=!0},1);return n>i}),e.on("fileQueued",function(){i++}),e.on("fileDequeued",function(){i--}),e.on("reset",function(){i=0})}),e.addValidator("fileSizeLimit",function(){var e=this,t=e.options,i=0,n=parseInt(t.fileSizeLimit,10),r=!0;if(n)e.on("beforeFileQueued",function(e){var t=i+e.size>n;if(t&&r)r=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",n,e),setTimeout(function(){r=!0},1);return!t}),e.on("fileQueued",function(e){i+=e.size}),e.on("fileDequeued",function(e){i-=e.size}),e.on("reset",function(){i=0})}),e.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,i=t.fileSingleSizeLimit;if(i)e.on("beforeFileQueued",function(e){if(e.size>i)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",i,e),!1;else return void 0})}),e.addValidator("duplicate",function(){function e(e){for(var t,i=0,n=0,r=e.length;r>n;n++)t=e.charCodeAt(n),i=t+(i<<6)+(i<<16)-i;return i}var t=this,i=t.options,n={};if(!i.duplicate)t.on("beforeFileQueued",function(t){var i=t.__hash||(t.__hash=e(t.name+t.size+t.lastModifiedDate));if(n[i])return this.trigger("error","F_DUPLICATE",t),!1;else return void 0}),t.on("fileQueued",function(e){var t=e.__hash;t&&(n[t]=!0)}),t.on("fileDequeued",function(e){var t=e.__hash;t&&delete n[t]}),t.on("reset",function(){n={}})}),e}),define("webuploader/lib/md5",["require","../runtime/client","../mediator"],function(require){function e(){t.call(this,"Md5")}var t=require("../runtime/client"),i=require("../mediator");return i.installTo(e.prototype),e.prototype.loadFromBlob=function(e){var t=this;if(t.getRuid())t.disconnectRuntime();t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},e.prototype.getResult=function(){return this.exec("getResult")},e}),define("webuploader/widgets/md5",["require","../base","../uploader","../lib/md5","../lib/blob"],function(require){var e=require("../base"),t=require("../uploader"),i=require("../lib/md5"),n=require("../lib/blob");return t.register({name:"md5",md5File:function(t,r,a){var o=new i,s=e.Deferred(),l=t instanceof n?t:this.request("get-file",t).source;if(o.on("progress load",function(e){e=e||{},s.notify(e.total?e.loaded/e.total:1)}),o.on("complete",function(){s.resolve(o.getResult())}),o.on("error",function(e){s.reject(e)}),arguments.length>1)r=r||0,a=a||0,0>r&&(r=l.size+r),0>a&&(a=l.size+a),a=Math.min(a,l.size),l=l.slice(r,a);return o.loadFromBlob(l),s.promise()}})}),define("webuploader/widgets/log",["require","../base","../uploader"],function(require){function e(e){var i=r.extend({},t,e),n=a.replace(/^(.*)\?/,"$1"+r.param(i)),o=new Image;o.src=n}var t,i=require("../base"),n=require("../uploader"),r=i.$,a="http://static.tieba.baidu.com/tb/pms/img/st.gif??",o=(location.hostname||location.host||"protected").toLowerCase(),s=o&&/baidu/i.exec(o);if(s)return t={dv:3,master:"webuploader",online:/test/.exec(o)?0:1,module:"",product:o,type:0},n.register({name:"log",init:function(){var t=this.owner,i=0,n=0;t.on("error",function(t){e({type:2,c_error_code:t})}).on("uploadError",function(t,i){e({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+i})}).on("uploadComplete",function(e){i++,n+=e.size}).on("uploadFinished",function(){e({c_count:i,c_size:n}),i=n=0}),e({c_usage:1})}});else return void 0}),define("webuploader/runtime/compbase",["require"],function(require){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),define("webuploader/runtime/html5/runtime",["require","../../base","../runtime","../compbase"],function(require){function e(){var e={},n=this,o=this.destroy;i.apply(n,arguments),n.type=r,n.exec=function(i,r){var o,s=this,l=s.uid,u=t.slice(arguments,2);if(a[i])if(o=e[l]=e[l]||new a[i](s,n),o[r])return o[r].apply(o,u)},n.destroy=function(){return o&&o.apply(this,arguments)}}var t=require("../../base"),i=require("../runtime"),n=require("../compbase"),r="html5",a={};if(t.inherits(i,{constructor:e,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),e.register=function(e,i){var r=a[e]=t.inherits(n,i);return r},window.Blob&&window.FileReader&&window.DataView)i.addRuntime(r,e);return e}),define("webuploader/runtime/html5/blob",["require","./runtime","../../lib/blob"],function(require){var e=require("./runtime"),t=require("../../lib/blob");return e.register("Blob",{slice:function(e,i){var n=this.owner.source,r=n.slice||n.webkitSlice||n.mozSlice;return n=r.call(n,e,i),new t(this.getRuid(),n)}})}),define("webuploader/runtime/html5/dnd",["require","../../base","../../lib/file","./runtime"],function(require){var e=require("../../base"),t=require("../../lib/file"),i=require("./runtime"),n=e.$,r="webuploader-dnd-";return i.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;if(this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd)n(document).on("dragover",this.dragOverHandler),n(document).on("drop",this.dropHandler)},_dragEnterHandler:function(e){var t,i=this,n=i._denied||!1;if(e=e.originalEvent||e,!i.dndOver){if(i.dndOver=!0,t=e.dataTransfer.items,t&&t.length)i._denied=n=!i.trigger("accept",t);i.elem.addClass(r+"over"),i.elem[n?"addClass":"removeClass"](r+"denied")}return e.dataTransfer.dropEffect=n?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);if(t&&!n.contains(t,e.currentTarget))return!1;else return clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1},_dragLeaveHandler:function(){var e,t=this;return e=function(){t.dndOver=!1,t.elem.removeClass(r+"over "+r+"denied")},clearTimeout(t._leaveTimer),t._leaveTimer=setTimeout(e,100),!1},_dropHandler:function(e){var i,a,o=this,s=o.getRuid(),l=o.elem.parent().get(0);if(l&&!n.contains(l,e.currentTarget))return!1;e=e.originalEvent||e,i=e.dataTransfer;try{a=i.getData("text/html")}catch(u){}if(!a)return o._getTansferFiles(i,function(e){o.trigger("drop",n.map(e,function(e){return new t(s,e)}))}),o.dndOver=!1,o.elem.removeClass(r+"over"),!1;else return void 0},_getTansferFiles:function(t,i){var n,r,a,o,s,l,u,A=[],B=[];for(n=t.items,r=t.files,u=!(!n||!n[0].webkitGetAsEntry),s=0,l=r.length;l>s;s++)if(a=r[s],o=n&&n[s],u&&o.webkitGetAsEntry().isDirectory)B.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),A));else A.push(a);e.when.apply(e,B).done(function(){if(A.length)i(A)})},_traverseDirectoryTree:function(t,i){var n=e.Deferred(),r=this;if(t.isFile)t.file(function(e){i.push(e),n.resolve()});else if(t.isDirectory)t.createReader().readEntries(function(t){var a,o=t.length,s=[],l=[];for(a=0;o>a;a++)s.push(r._traverseDirectoryTree(t[a],l));e.when.apply(e,s).then(function(){i.push.apply(i,l),n.resolve()},n.reject)});return n.promise()},destroy:function(){var e=this.elem;if(e)if(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd)n(document).off("dragover",this.dragOverHandler),n(document).off("drop",this.dropHandler)}})}),define("webuploader/runtime/html5/filepaste",["require","../../base","./runtime","../../lib/file"],function(require){var e=require("../../base"),t=require("./runtime"),i=require("../../lib/file");return t.register("FilePaste",{init:function(){var t,i,n,r,a=this.options,o=this.elem=a.container,s=".*";if(a.accept){for(t=[],i=0,n=a.accept.length;n>i;i++)r=a.accept[i].mimeTypes,r&&t.push(r);if(t.length)s=t.join(","),s=s.replace(/,/g,"|").replace(/\*/g,".*")}this.accept=s=new RegExp(s,"i"),this.hander=e.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(e){var t,n,r,a,o,s=[],l=this.getRuid();for(e=e.originalEvent||e,t=e.clipboardData.items,a=0,o=t.length;o>a;a++)if(n=t[a],"file"===n.kind&&(r=n.getAsFile()))s.push(new i(l,r));else;if(s.length)e.preventDefault(),e.stopPropagation(),this.trigger("paste",s)},destroy:function(){this.elem.off("paste",this.hander)}})}),define("webuploader/runtime/html5/filepicker",["require","../../base","./runtime"],function(require){var e=require("../../base"),t=require("./runtime"),i=e.$;return t.register("FilePicker",{init:function(){var e,t,n,r,a=this.getRuntime().getContainer(),o=this,s=o.owner,l=o.options,u=this.label=i(document.createElement("label")),A=this.input=i(document.createElement("input"));if(A.attr("type","file"),A.attr("name",l.name),A.addClass("webuploader-element-invisible"),u.on("click",function(){A.trigger("click")}),u.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),l.multiple)A.attr("multiple","multiple");if(l.accept&&l.accept.length>0){for(e=[],t=0,n=l.accept.length;n>t;t++)e.push(l.accept[t].mimeTypes);A.attr("accept",e.join(","))}a.append(A),a.append(u),r=function(e){s.trigger(e.type)},A.on("change",function(e){var t,n=arguments.callee;o.files=e.target.files,t=this.cloneNode(!0),t.value=null,this.parentNode.replaceChild(t,this),A.off(),A=i(t).on("change",n).on("mouseenter mouseleave",r),s.trigger("change")}),u.on("mouseenter mouseleave",r)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),define("webuploader/runtime/html5/util",["require","../../base"],function(require){var e=require("../../base"),t=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL,i=e.noop,n=i;if(t)i=function(){return t.createObjectURL.apply(t,arguments)},n=function(){return t.revokeObjectURL.apply(t,arguments)};return{createObjectURL:i,revokeObjectURL:n,dataURL2Blob:function(e){var t,i,n,r,a,o;if(o=e.split(","),~o[0].indexOf("base64"))t=atob(o[1]);else t=decodeURIComponent(o[1]);for(n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return a=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(n,a)},dataURL2ArrayBuffer:function(e){var t,i,n,r;if(r=e.split(","),~r[0].indexOf("base64"))t=atob(r[1]);else t=decodeURIComponent(r[1]);for(i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i.buffer},arrayBufferToBlob:function(e,t){var i,n=window.BlobBuilder||window.WebKitBlobBuilder;if(n)return i=new n,i.append(e),i.getBlob(t);else return new Blob([e],t?{type:t}:{})},canvasToDataUrl:function(e,t,i){return e.toDataURL(t,i/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),define("webuploader/runtime/html5/imagemeta",["require","./util"],function(require){var e=require("./util"),t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var i=this,n=new FileReader;n.onload=function(){t(!1,i._parse(this.result)),n=n.onload=n.onerror=null},n.onerror=function(e){t(e.message),n=n.onload=n.onerror=null},e=e.slice(0,i.maxMetaDataSize),n.readAsArrayBuffer(e.getSource())},_parse:function(e,i){if(!(e.byteLength<6)){var n,r,a,o,s=new DataView(e),l=2,u=s.byteLength-4,A=l,B={};if(65496===s.getUint16(0)){for(;u>l&&(n=s.getUint16(l),n>=65504&&65519>=n||65534===n)&&(r=s.getUint16(l+2)+2,!(l+r>s.byteLength));){if(a=t.parsers[n],!i&&a)for(o=0;o<a.length;o+=1)a[o].call(t,s,l,r,B);l+=r,A=l}if(A>6)if(e.slice)B.imageHead=e.slice(2,A);else B.imageHead=new Uint8Array(e).subarray(2,A)}return B}},updateImageHead:function(e,t){var i,n,r,a=this._parse(e,!0);if(r=2,a.imageHead)r=2+a.imageHead.byteLength;if(e.slice)n=e.slice(r);else n=new Uint8Array(e).subarray(r);return i=new Uint8Array(t.byteLength+2+n.byteLength),i[0]=255,i[1]=216,i.set(new Uint8Array(t),2),i.set(new Uint8Array(n),t.byteLength+2),i.buffer}};return e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),define("webuploader/runtime/html5/imagemeta/exif",["require","../../../base","../imagemeta"],function(require){var e=require("../../../base"),t=require("../imagemeta"),i={};return i.ExifMap=function(){return this},i.ExifMap.prototype.map={Orientation:274},i.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},i.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}},i.exifTagTypes[7]=i.exifTagTypes[1],i.getExifValue=function(t,n,r,a,o,s){var l,u,A,B,c,C,D=i.exifTagTypes[a];if(!D)return void e.log("Invalid Exif data: Invalid tag type.");if(l=D.size*o,u=l>4?n+t.getUint32(r+8,s):r+8,u+l>t.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===o)return D.getValue(t,u,s);for(A=[],B=0;o>B;B+=1)A[B]=D.getValue(t,u+B*D.size,s);if(D.ascii){for(c="",B=0;B<A.length&&(C=A[B],"\x00"!==C);B+=1)c+=C;return c}return A},i.parseExifTag=function(e,t,n,r,a){var o=e.getUint16(n,r);a.exif[o]=i.getExifValue(e,t,n,e.getUint16(n+2,r),e.getUint32(n+4,r),r)},i.parseExifTags=function(t,i,n,r,a){var o,s,l;if(n+6>t.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");if(o=t.getUint16(n,r),s=n+2+12*o,s+4>t.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(l=0;o>l;l+=1)this.parseExifTag(t,i,n+2+12*l,r,a);return t.getUint32(s,r)},i.parseExifData=function(t,n,r,a){var o,s,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,o))return void e.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(l+4,o),a.exif=new i.ExifMap,s=i.parseExifTags(t,l,l+s,o,a)}},t.parsers[65505].push(i.parseExifData),i}),define("webuploader/runtime/html5/jpegencoder",["require"],function(require){function e(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;64>i;i++){var n=G((t[i]*e+50)/100);if(1>n)n=1;else if(n>255)n=255;I[R[i]]=n}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;64>a;a++){var o=G((r[a]*e+50)/100);if(1>o)o=1;else if(o>255)o=255;v[R[a]]=o}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],l=0,u=0;8>u;u++)for(var A=0;8>A;A++)y[l]=1/(I[R[l]]*s[u]*s[A]*8),J[l]=1/(v[R[l]]*s[u]*s[A]*8),l++}function i(e,t){for(var i=0,n=0,r=[],a=1;16>=a;a++){for(var o=1;o<=e[a];o++)r[t[n]]=[],r[t[n]][0]=i,r[t[n]][1]=a,n++,i++;i*=2}return r}function n(){p=i(k,Q),F=i(W,z),m=i(V,U),g=i(Y,X)}function r(){for(var e=1,t=2,i=1;15>=i;i++){for(var n=e;t>n;n++)M[32767+n]=i,L[32767+n]=[],L[32767+n][1]=i,L[32767+n][0]=n;for(var r=-(t-1);-e>=r;r++)M[32767+r]=i,L[32767+r]=[],L[32767+r][1]=i,L[32767+r][0]=t-1+r;e<<=1,t<<=1}}function a(){for(var e=0;256>e;e++)w[e]=19595*e,w[e+256>>0]=38470*e,w[e+512>>0]=7471*e+32768,w[e+768>>0]=-11059*e,w[e+1024>>0]=-21709*e,w[e+1280>>0]=32768*e+8421375,w[e+1536>>0]=-27439*e,w[e+1792>>0]=-5329*e}function o(e){for(var t=e[0],i=e[1]-1;i>=0;){if(t&1<<i)x|=1<<P;if(i--,P--,0>P){if(255===x)s(255),s(0);else s(x);P=7,x=0}}}function s(e){K.push(S[e])}function l(e){s(e>>8&255),s(255&e)}function u(e,t){var i,n,r,a,o,s,l,u,A,B=0,c=8,C=64;for(A=0;c>A;++A){i=e[B],n=e[B+1],r=e[B+2],a=e[B+3],o=e[B+4],s=e[B+5],l=e[B+6],u=e[B+7];var D=i+u,d=i-u,f=n+l,h=n-l,E=r+s,p=r-s,F=a+o,m=a-o,g=D+F,H=D-F,G=f+E,I=f-E;e[B]=g+G,e[B+4]=g-G;var v=.707106781*(I+H);e[B+2]=H+v,e[B+6]=H-v,g=m+p,G=p+h,I=h+d;var y=.382683433*(g-I),J=.5411961*g+y,L=1.306562965*I+y,M=.707106781*G,N=d+M,K=d-M;e[B+5]=K+J,e[B+3]=K-J,e[B+1]=N+L,e[B+7]=N-L,B+=8}for(B=0,A=0;c>A;++A){i=e[B],n=e[B+8],r=e[B+16],a=e[B+24],o=e[B+32],s=e[B+40],l=e[B+48],u=e[B+56];var x=i+u,P=i-u,_=n+l,O=n-l,T=r+s,S=r-s,w=a+o,R=a-o,k=x+w,Q=x-w,V=_+T,U=_-T;e[B]=k+V,e[B+32]=k-V;var W=.707106781*(U+Q);e[B+16]=Q+W,e[B+48]=Q-W,k=R+S,V=S+O,U=O+P;var z=.382683433*(k-U),Y=.5411961*k+z,X=1.306562965*U+z,j=.707106781*V,Z=P+j,q=P-j;e[B+40]=q+Y,e[B+24]=q-Y,e[B+8]=Z+X,e[B+56]=Z-X,B++}var $;for(A=0;C>A;++A)$=e[A]*t[A],b[A]=$>0?$+.5|0:$-.5|0;return b}function A(){l(65504),l(16),s(74),s(70),s(73),s(70),s(0),s(1),s(1),s(0),l(1),l(1),s(0),s(0)}function B(e,t){l(65472),l(17),s(8),l(t),l(e),s(3),s(1),s(17),s(0),s(2),s(17),s(1),s(3),s(17),s(1)}function c(){l(65499),l(132),s(0);for(var e=0;64>e;e++)s(I[e]);s(1);for(var t=0;64>t;t++)s(v[t])}function C(){l(65476),l(418),s(0);for(var e=0;16>e;e++)s(k[e+1]);for(var t=0;11>=t;t++)s(Q[t]);s(16);for(var i=0;16>i;i++)s(V[i+1]);for(var n=0;161>=n;n++)s(U[n]);s(1);for(var r=0;16>r;r++)s(W[r+1]);for(var a=0;11>=a;a++)s(z[a]);s(17);for(var o=0;16>o;o++)s(Y[o+1]);for(var u=0;161>=u;u++)s(X[u])}function D(){l(65498),l(12),s(3),s(1),s(0),s(2),s(17),s(3),s(17),s(0),s(63),s(0)}function d(e,t,i,n,r){for(var a,s=r[0],l=r[240],A=16,B=63,c=64,C=u(e,t),D=0;c>D;++D)N[R[D]]=C[D];var d=N[0]-i;if(i=N[0],0===d)o(n[0]);else a=32767+d,o(n[M[a]]),o(L[a]);for(var f=63;f>0&&0===N[f];f--);if(0===f)return o(s),i;for(var h,E=1;f>=E;){for(var p=E;0===N[E]&&f>=E;++E);var F=E-p;if(F>=A){h=F>>4;for(var m=1;h>=m;++m)o(l);F=15&F}a=32767+N[E],o(r[(F<<4)+M[a]]),o(L[a]),E++}if(f!==B)o(s);return i}function f(){for(var e=String.fromCharCode,t=0;256>t;t++)S[t]=e(t)}function h(e){if(0>=e)e=1;if(e>100)e=100;if(H!==e){var i=0;if(50>e)i=Math.floor(5e3/e);else i=Math.floor(200-2*e);t(i),H=e}}function E(){if(!e)e=50;f(),n(),r(),a(),h(e)}var p,F,m,g,H,G=Math.floor,I=new Array(64),v=new Array(64),y=new Array(64),J=new Array(64),L=new Array(65535),M=new Array(65535),b=new Array(64),N=new Array(64),K=[],x=0,P=7,_=new Array(64),O=new Array(64),T=new Array(64),S=new Array(256),w=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];
this.encode=function(e,t){if(t)h(t);K=[],x=0,P=7,l(65496),A(),c(),B(e.width,e.height),C(),D();var i=0,n=0,r=0;x=0,P=7,this.encode.displayName="_encode_";for(var a,s,u,f,E,H,G,I,v,L=e.data,M=e.width,b=e.height,N=4*M,S=0;b>S;){for(a=0;N>a;){for(E=N*S+a,H=E,G=-1,I=0,v=0;64>v;v++){if(I=v>>3,G=4*(7&v),H=E+I*N+G,S+I>=b)H-=N*(S+1+I-b);if(a+G>=N)H-=a+G-N+4;s=L[H++],u=L[H++],f=L[H++],_[v]=(w[s]+w[u+256>>0]+w[f+512>>0]>>16)-128,O[v]=(w[s+768>>0]+w[u+1024>>0]+w[f+1280>>0]>>16)-128,T[v]=(w[s+1280>>0]+w[u+1536>>0]+w[f+1792>>0]>>16)-128}i=d(_,y,i,p,m),n=d(O,J,n,F,g),r=d(T,J,r,F,g),a+=32}S+=8}if(P>=0){var R=[];R[1]=P+1,R[0]=(1<<P+1)-1,o(R)}l(65497);var k="data:image/jpeg;base64,"+btoa(K.join(""));return K=[],k},E()}return e.encode=function(t,i){var n=new e(i);return n.encode(t)},e}),define("webuploader/runtime/html5/androidpatch",["require","./util","./jpegencoder","../../base"],function(require){var e,t=require("./util"),i=require("./jpegencoder"),n=require("../../base"),r=t.canvasToDataUrl;t.canvasToDataUrl=function(t,a,o){var s,l,u,A,B;if(!n.os.android)return r.apply(null,arguments);if("image/jpeg"===a&&"undefined"==typeof e){if(A=r.apply(null,arguments),B=A.split(","),~B[0].indexOf("base64"))A=atob(B[1]);else A=decodeURIComponent(B[1]);A=A.substring(0,2),e=255===A.charCodeAt(0)&&216===A.charCodeAt(1)}if("image/jpeg"===a&&!e)return l=t.width,u=t.height,s=t.getContext("2d"),i.encode(s.getImageData(0,0,l,u),o);else return r.apply(null,arguments)}}),define("webuploader/runtime/html5/image",["require","../../base","./runtime","./util"],function(require){var e=require("../../base"),t=require("./runtime"),i=require("./util"),n="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){if(e._info={type:e.type,width:this.width,height:this.height},!e._metas&&"image/jpeg"===e.type)i.parseMeta(e._blob,function(t,i){e._metas=i,e.owner.trigger("load")});else e.owner.trigger("load")},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,n=t._img;t._blob=e,t.type=e.type,n.src=i.createObjectURL(e.getSource()),t.owner.once("load",function(){i.revokeObjectURL(n.src)})},resize:function(e,t){var i=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,i,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,i,n,r){var a=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,s=this._img,l=s.naturalWidth,u=s.naturalHeight,A=this.getOrientation();r=r||1,a.width=i,a.height=n,o.preserveHeaders||this._rotate2Orientaion(a,A),this._renderImageToCanvas(a,s,-e,-t,l*r,u*r),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,n=this._blob,r=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(n=i.canvasToDataUrl(t,e,r.quality),r.preserveHeaders&&this._metas&&this._metas.imageHead)return n=i.dataURL2ArrayBuffer(n),n=i.updateImageHead(n,this._metas.imageHead),n=i.arrayBufferToBlob(n,e)}else n=i.canvasToDataUrl(t,e);n=i.dataURL2Blob(n)}return n},getAsDataUrl:function(e){var t=this.options;if(e=e||this.type,"image/jpeg"===e)return i.canvasToDataUrl(this._canvas,e,t.quality);else return this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){if(e)return this._info=e,this;else return this._info},meta:function(e){if(e)return this._meta=e,this;else return this._meta},destroy:function(){var e=this._canvas;if(this._img.onload=null,e)e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null;this._img.src=n,this._img=this._blob=null},_resize:function(e,t,i,n){var r,a,o,s,l,u=this.options,A=e.width,B=e.height,c=this.getOrientation();if(~[5,6,7,8].indexOf(c))i^=n,n^=i,i^=n;if(r=Math[u.crop?"max":"min"](i/A,n/B),u.allowMagnify||(r=Math.min(1,r)),a=A*r,o=B*r,u.crop)t.width=i,t.height=n;else t.width=a,t.height=o;s=(t.width-a)/2,l=(t.height-o)/2,u.preserveHeaders||this._rotate2Orientaion(t,c),this._renderImageToCanvas(t,e,s,l,a,o)},_rotate2Orientaion:function(e,t){var i=e.width,n=e.height,r=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=n,e.height=i}switch(t){case 2:r.translate(i,0),r.scale(-1,1);break;case 3:r.translate(i,n),r.rotate(Math.PI);break;case 4:r.translate(0,n),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-n);break;case 7:r.rotate(.5*Math.PI),r.translate(i,-n),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-i,0)}},_renderImageToCanvas:function(){function t(e,t,i){var n,r,a,o=document.createElement("canvas"),s=o.getContext("2d"),l=0,u=i,A=i;for(o.width=1,o.height=i,s.drawImage(e,0,0),n=s.getImageData(0,0,1,i).data;A>l;){if(r=n[4*(A-1)+3],0===r)u=A;else l=A;A=u+l>>1}return a=A/i,0===a?1:a}function i(e){var t,i,n=e.naturalWidth,r=e.naturalHeight;if(n*r>1048576)return t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(e,-n+1,0),0===i.getImageData(0,0,1,1).data[3];else return!1}if(!e.os.ios)return function(t){var i=e.slice(arguments,1),n=t.getContext("2d");n.drawImage.apply(n,i)};if(e.os.ios>=7)return function(e,i,n,r,a,o){var s=i.naturalWidth,l=i.naturalHeight,u=t(i,s,l);return e.getContext("2d").drawImage(i,0,0,s*u,l*u,n,r,a,o)};else return function(e,n,r,a,o,s){var l,u,A,B,c,C,D,d=n.naturalWidth,f=n.naturalHeight,h=e.getContext("2d"),E=i(n),p="image/jpeg"===this.type,F=1024,m=0,g=0;if(E)d/=2,f/=2;for(h.save(),l=document.createElement("canvas"),l.width=l.height=F,u=l.getContext("2d"),A=p?t(n,d,f):1,B=Math.ceil(F*o/d),c=Math.ceil(F*s/f/A);f>m;){for(C=0,D=0;d>C;)u.clearRect(0,0,F,F),u.drawImage(n,-C,-m),h.drawImage(l,0,0,F,F,r+D,a+g,B,c),C+=F,D+=B;m+=F,g+=c}h.restore(),l=u=null}}()})}),define("webuploader/runtime/html5/transport",["require","../../base","./runtime"],function(require){var e=require("../../base"),t=require("./runtime"),i=e.noop,n=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t,i,r,a=this.owner,o=this.options,s=this._initAjax(),l=a._blob,u=o.server;if(o.sendAsBinary)u+=(/\?/.test(u)?"&":"?")+n.param(a._formData),i=l.getSource();else t=new FormData,n.each(a._formData,function(e,i){t.append(e,i)}),t.append(o.fileVal,l.getSource(),o.filename||a._formData.name||"");if(o.withCredentials&&"withCredentials"in s)s.open(o.method,u,!0),s.withCredentials=!0;else s.open(o.method,u);if(this._setRequestHeader(s,o.headers),i)if(s.overrideMimeType&&s.overrideMimeType("application/octet-stream"),e.os.android)r=new FileReader,r.onload=function(){s.send(this.result),r=r.onload=null},r.readAsArrayBuffer(i);else s.send(i);else s.send(t)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;if(e)e.upload.onprogress=i,e.onreadystatechange=i,e.abort(),this._xhr=e=null},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,n=this.options;if(n.withCredentials&&!("withCredentials"in t)&&"undefined"!=typeof XDomainRequest)t=new XDomainRequest;return t.upload.onprogress=function(t){var i=0;if(t.lengthComputable)i=t.loaded/t.total;return e.trigger("progress",i)},t.onreadystatechange=function(){if(4===t.readyState){if(t.upload.onprogress=i,t.onreadystatechange=i,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300)return e._response=t.responseText,e.trigger("load",t);else if(t.status>=500&&t.status<600)return e._response=t.responseText,e.trigger("error","server");return e.trigger("error",e._status?"http":"abort")}},e._xhr=t,t},_setRequestHeader:function(e,t){n.each(t,function(t,i){e.setRequestHeader(t,i)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(i){t={}}return t}})}),define("webuploader/runtime/html5/md5",["require","./runtime"],function(require){var e=require("./runtime"),t=function(e,t){return e+t&4294967295},i=function(e,i,n,r,a,o){return i=t(t(i,e),t(r,o)),t(i<<a|i>>>32-a,n)},n=function(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)},r=function(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)},a=function(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)},o=function(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)},s=function(e,i){var s=e[0],l=e[1],u=e[2],A=e[3];s=n(s,l,u,A,i[0],7,-680876936),A=n(A,s,l,u,i[1],12,-389564586),u=n(u,A,s,l,i[2],17,606105819),l=n(l,u,A,s,i[3],22,-1044525330),s=n(s,l,u,A,i[4],7,-176418897),A=n(A,s,l,u,i[5],12,1200080426),u=n(u,A,s,l,i[6],17,-1473231341),l=n(l,u,A,s,i[7],22,-45705983),s=n(s,l,u,A,i[8],7,1770035416),A=n(A,s,l,u,i[9],12,-1958414417),u=n(u,A,s,l,i[10],17,-42063),l=n(l,u,A,s,i[11],22,-1990404162),s=n(s,l,u,A,i[12],7,1804603682),A=n(A,s,l,u,i[13],12,-40341101),u=n(u,A,s,l,i[14],17,-1502002290),l=n(l,u,A,s,i[15],22,1236535329),s=r(s,l,u,A,i[1],5,-165796510),A=r(A,s,l,u,i[6],9,-1069501632),u=r(u,A,s,l,i[11],14,643717713),l=r(l,u,A,s,i[0],20,-373897302),s=r(s,l,u,A,i[5],5,-701558691),A=r(A,s,l,u,i[10],9,38016083),u=r(u,A,s,l,i[15],14,-660478335),l=r(l,u,A,s,i[4],20,-405537848),s=r(s,l,u,A,i[9],5,568446438),A=r(A,s,l,u,i[14],9,-1019803690),u=r(u,A,s,l,i[3],14,-187363961),l=r(l,u,A,s,i[8],20,1163531501),s=r(s,l,u,A,i[13],5,-1444681467),A=r(A,s,l,u,i[2],9,-51403784),u=r(u,A,s,l,i[7],14,1735328473),l=r(l,u,A,s,i[12],20,-1926607734),s=a(s,l,u,A,i[5],4,-378558),A=a(A,s,l,u,i[8],11,-2022574463),u=a(u,A,s,l,i[11],16,1839030562),l=a(l,u,A,s,i[14],23,-35309556),s=a(s,l,u,A,i[1],4,-1530992060),A=a(A,s,l,u,i[4],11,1272893353),u=a(u,A,s,l,i[7],16,-155497632),l=a(l,u,A,s,i[10],23,-1094730640),s=a(s,l,u,A,i[13],4,681279174),A=a(A,s,l,u,i[0],11,-358537222),u=a(u,A,s,l,i[3],16,-722521979),l=a(l,u,A,s,i[6],23,76029189),s=a(s,l,u,A,i[9],4,-640364487),A=a(A,s,l,u,i[12],11,-421815835),u=a(u,A,s,l,i[15],16,530742520),l=a(l,u,A,s,i[2],23,-995338651),s=o(s,l,u,A,i[0],6,-198630844),A=o(A,s,l,u,i[7],10,1126891415),u=o(u,A,s,l,i[14],15,-1416354905),l=o(l,u,A,s,i[5],21,-57434055),s=o(s,l,u,A,i[12],6,1700485571),A=o(A,s,l,u,i[3],10,-1894986606),u=o(u,A,s,l,i[10],15,-1051523),l=o(l,u,A,s,i[1],21,-2054922799),s=o(s,l,u,A,i[8],6,1873313359),A=o(A,s,l,u,i[15],10,-30611744),u=o(u,A,s,l,i[6],15,-1560198380),l=o(l,u,A,s,i[13],21,1309151649),s=o(s,l,u,A,i[4],6,-145523070),A=o(A,s,l,u,i[11],10,-1120210379),u=o(u,A,s,l,i[2],15,718787259),l=o(l,u,A,s,i[9],21,-343485551),e[0]=t(s,e[0]),e[1]=t(l,e[1]),e[2]=t(u,e[2]),e[3]=t(A,e[3])},l=function(e){var t,i=[];for(t=0;64>t;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i},u=function(e){var t,i=[];for(t=0;64>t;t+=4)i[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return i},A=function(e){var t,i,n,r,a,o,u=e.length,A=[1732584193,-271733879,-1732584194,271733878];for(t=64;u>=t;t+=64)s(A,l(e.substring(t-64,t)));for(e=e.substring(t-64),i=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;i>t;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(s(A,n),t=0;16>t;t+=1)n[t]=0;return r=8*u,r=r.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(r[2],16),o=parseInt(r[1],16)||0,n[14]=a,n[15]=o,s(A,n),A},B=function(e){var t,i,n,r,a,o,l=e.length,A=[1732584193,-271733879,-1732584194,271733878];for(t=64;l>=t;t+=64)s(A,u(e.subarray(t-64,t)));for(e=l>t-64?e.subarray(t-64):new Uint8Array(0),i=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;i>t;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(s(A,n),t=0;16>t;t+=1)n[t]=0;return r=8*l,r=r.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(r[2],16),o=parseInt(r[1],16)||0,n[14]=a,n[15]=o,s(A,n),A},c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],C=function(e){var t,i="";for(t=0;4>t;t+=1)i+=c[e>>8*t+4&15]+c[e>>8*t&15];return i},D=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=C(e[t]);return e.join("")},d=function(e){return D(A(e))},f=function(){this.reset()};if("5d41402abc4b2a76b9719d911017c592"!==d("hello"))t=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i};return f.prototype.append=function(e){if(/[\u0080-\uFFFF]/.test(e))e=unescape(encodeURIComponent(e));return this.appendBinary(e),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;i>=t;t+=64)s(this._state,l(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},f.prototype.end=function(e){var t,i,n=this._buff,r=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;r>t;t+=1)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(a,r),i=e?this._state:D(this._state),this.reset(),i},f.prototype._finish=function(e,t){var i,n,r,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(s(this._state,e),a=0;16>a;a+=1)e[a]=0;i=8*this._length,i=i.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),r=parseInt(i[1],16)||0,e[14]=n,e[15]=r,s(this._state,e)},f.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},f.hash=function(e,t){if(/[\u0080-\uFFFF]/.test(e))e=unescape(encodeURIComponent(e));var i=A(e);return t?i:D(i)},f.hashBinary=function(e,t){var i=A(e);return t?i:D(i)},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var t,i=this._concatArrayBuffer(this._buff,e),n=i.length;for(this._length+=e.byteLength,t=64;n>=t;t+=64)s(this._state,u(i.subarray(t-64,t)));return this._buff=n>t-64?i.subarray(t-64):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,i,n=this._buff,r=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;r>t;t+=1)a[t>>2]|=n[t]<<(t%4<<3);return this._finish(a,r),i=e?this._state:D(this._state),this.reset(),i},f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var i=e.length,n=new Uint8Array(i+t.byteLength);return n.set(e),n.set(new Uint8Array(t),i),n},f.ArrayBuffer.hash=function(e,t){var i=B(new Uint8Array(e));return t?i:D(i)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t,i,n=e.getSource(),r=2097152,a=Math.ceil(n.size/r),o=0,s=this.owner,l=new f.ArrayBuffer,u=this,A=n.mozSlice||n.webkitSlice||n.slice;i=new FileReader,(t=function(){var B,c;B=o*r,c=Math.min(B+r,n.size),i.onload=function(t){l.append(t.target.result),s.trigger("progress",{total:e.size,loaded:c})},i.onloadend=function(){if(i.onloadend=i.onload=null,++o<a)setTimeout(t,1);else setTimeout(function(){s.trigger("load"),u.result=l.end(),t=e=n=l=null,s.trigger("complete")},50)},i.readAsArrayBuffer(A.call(n,B,c))})()},getResult:function(){return this.result}})}),define("webuploader/runtime/flash/runtime",["require","../../base","../runtime","../compbase"],function(require){function e(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function t(){function e(e,t){var i,n,a=e.type||e;if(i=a.split("::"),n=i[0],a=i[1],"Ready"===a&&n===l.uid)l.trigger("ready");else if(r[n])r[n].trigger(a.toLowerCase(),e,t)}var t={},r={},a=this.destroy,l=this,u=i.guid("webuploader_");n.apply(l,arguments),l.type=o,l.exec=function(e,n){var a,o=this,u=o.uid,A=i.slice(arguments,2);if(r[u]=o,s[e]){if(!t[u])t[u]=new s[e](o,l);if(a=t[u],a[n])return a[n].apply(a,A)}return l.flashExec.apply(o,arguments)},window[u]=function(){var t=arguments;setTimeout(function(){e.apply(null,t)},1)},this.jsreciver=u,this.destroy=function(){return a&&a.apply(this,arguments)},this.flashExec=function(e,t){var n=l.getFlash(),r=i.slice(arguments,2);return n.exec(this.uid,e,t,r)}}var i=require("../../base"),n=require("../runtime"),r=require("../compbase"),a=i.$,o="flash",s={};if(i.inherits(n,{constructor:t,init:function(){var e,t=this.getContainer(),n=this.options;if(t.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+n.swf+'" ',i.browser.ie)e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',t.html(e)},getFlash:function(){if(this._flash)return this._flash;else return this._flash=a("#"+this.uid).get(0),this._flash}}),t.register=function(e,t){return t=s[e]=i.inherits(r,a.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},t))},e()>=11.4)n.addRuntime(o,t);return t}),define("webuploader/runtime/flash/filepicker",["require","../../base","./runtime"],function(require){var e=require("../../base"),t=require("./runtime"),i=e.$;return t.register("FilePicker",{init:function(e){var t,n,r=i.extend({},e);for(t=r.accept&&r.accept.length,n=0;t>n;n++)if(!r.accept[n].title)r.accept[n].title="Files";delete r.button,delete r.id,delete r.container,this.flashExec("FilePicker","init",r)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),define("webuploader/runtime/flash/image",["require","./runtime"],function(require){var e=require("./runtime");return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),define("webuploader/runtime/flash/transport",["require","../../base","./runtime","../client"],function(require){var e=require("../../base"),t=require("./runtime"),i=require("../client"),n=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,i=this.options,r=this._initAjax(),a=t._blob,o=i.server;if(r.connectRuntime(a.ruid),i.sendAsBinary)o+=(/\?/.test(o)?"&":"?")+n.param(t._formData),e=a.uid;else n.each(t._formData,function(e,t){r.exec("append",e,t)}),r.exec("appendBlob",i.fileVal,a.uid,i.filename||t._formData.name||"");this._setRequestHeader(r,i.headers),r.exec("send",{method:i.method,url:o,forceURLStream:i.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;if(e)e.exec("abort"),e.destroy(),this._xhr=e=null},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new i("XMLHttpRequest");return t.on("uploadprogress progress",function(t){var i=t.loaded/t.total;return i=Math.min(1,Math.max(0,i)),e.trigger("progress",i)}),t.on("load",function(){var i,n=t.exec("getStatus"),r=!1,a="";if(t.off(),e._xhr=null,n>=200&&300>n)r=!0;else if(n>=500&&600>n)r=!0,a="server";else a="http";if(r)e._response=t.exec("getResponse"),e._response=decodeURIComponent(e._response),i=window.JSON&&window.JSON.parse||function(e){try{return new Function("return "+e).call()}catch(t){return{}}},e._responseJson=e._response?i(e._response):{};return t.destroy(),t=null,a?e.trigger("error",a):e.trigger("load")}),t.on("error",function(){t.off(),e._xhr=null,e.trigger("error","http")}),e._xhr=t,t},_setRequestHeader:function(e,t){n.each(t,function(t,i){e.exec("setRequestHeader",t,i)})}})}),define("webuploader/runtime/flash/blob",["require","./runtime","../../lib/blob"],function(require){var e=require("./runtime"),t=require("../../lib/blob");return e.register("Blob",{slice:function(e,i){var n=this.flashExec("Blob","slice",e,i);return new t(n.uid,n)}})}),define("webuploader/runtime/flash/md5",["require","./runtime"],function(require){var e=require("./runtime");return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),define("webuploader/webuploader",["require","inf-ria/css!./webuploader.css","./widgets/widget","./widgets/filednd","./widgets/filepaste","./widgets/filepicker","./widgets/image","./widgets/queue","./widgets/runtime","./widgets/upload","./widgets/validator","./widgets/md5","./widgets/log","./runtime/html5/blob","./runtime/html5/dnd","./runtime/html5/filepaste","./runtime/html5/filepicker","./runtime/html5/imagemeta/exif","./runtime/html5/androidpatch","./runtime/html5/image","./runtime/html5/transport","./runtime/html5/md5","./runtime/flash/filepicker","./runtime/flash/image","./runtime/flash/transport","./runtime/flash/blob","./runtime/flash/md5","./base"],function(require){return require("inf-ria/css!./webuploader.css"),require("./widgets/widget"),require("./widgets/filednd"),require("./widgets/filepaste"),require("./widgets/filepicker"),require("./widgets/image"),require("./widgets/queue"),require("./widgets/runtime"),require("./widgets/upload"),require("./widgets/validator"),require("./widgets/md5"),require("./widgets/log"),require("./runtime/html5/blob"),require("./runtime/html5/dnd"),require("./runtime/html5/filepaste"),require("./runtime/html5/filepicker"),require("./runtime/html5/imagemeta/exif"),require("./runtime/html5/androidpatch"),require("./runtime/html5/image"),require("./runtime/html5/transport"),require("./runtime/html5/md5"),require("./runtime/flash/filepicker"),require("./runtime/flash/image"),require("./runtime/flash/transport"),require("./runtime/flash/blob"),require("./runtime/flash/md5"),require("./base")}),define("webuploader",["webuploader/webuploader"],function(e){return e}),define("inf-ria/ui/WebUploader",["require","underscore","inf-i18n","webuploader","esui/InputControl","esui/lib","../util","esui/painters","esui"],function(require){function e(e){r.call(this,e),this.uploaderOptions,this.uploader}var t=require("underscore"),i=require("inf-i18n"),n=require("webuploader"),r=require("esui/InputControl"),a=require("esui/lib"),o=require("../util"),s={swf:require.toUrl("webuploader/Uploader.swf"),disableWidgets:"log"},l={F_EXCEED_SIZE:i("文件大小超出限制！"),Q_EXCEED_NUM_LIMIT:i("队列文件数量超出限制！"),Q_EXCEED_SIZE_LIMIT:i("队列文件总量大小超出限制！"),Q_ZERO_SIZE_LIMIT:i("不支持0字节的文件上传"),Q_TYPE_DENIED:o.sprintf(i("不支持 “%s” 的文件类型：“%s”"),"${name}","${ext}"),F_DUPLICATE:o.sprintf(i("文件 “%s” 已存在"),"${name}")};return a.inherits(e,r),e.prototype.initOptions=function(e){var n={uploaderOptions:{},label:a.getText(this.main)||i("上传")};t.extend(n,e),this.setProperties(n)},e.prototype.initStructure=function(){var e=this.helper.getId("pick"),i=this.helper.getPartClassName("pick");this.main.innerHTML=a.format('<div id="${pickId}" class="${pickClass}"></div>',{pickId:e,pickClass:i});var r={id:this.helper.getPart("pick"),label:this.label};this.uploaderOptions.pick=t.extend({},this.uploaderOptions.pick,r);var o=t.extend({},s,this.uploaderOptions);this.uploader=n.create(o)},e.prototype.initEvents=function(){var e=this.uploader,i={dndAccept:["items"],beforeFileQueued:["file"],fileQueued:["file"],filesQueued:["files"],fileDequeued:["file"],reset:[],startUpload:[],stopUpload:[],uploadFinished:[],uploadStart:["file"],uploadBeforeSend:["object","data","headers"],uploadAccept:["object","ret","fn","xhr"],uploadProgress:["file","percentage"],uploadError:["file","reason"],uploadSuccess:["file","response"],uploadComplete:["file"],error:["type"]};if(t.each(i,function(t,i){e.on(i,this.proxyEvent(t,i))},this),this.on("error",function(e){var t=e.originalEvent,i=t.type,n=l[i]||i;if(t.file)n=a.format(n,t.file);e.target.showValidationMessage("invalid",n)}),this.on("uploadBeforeSend",function(e){var t=e.originalEvent,i=t.object,n=t.headers;n["File-Name"]=encodeURIComponent(i.file.name),n["X-Request-By"]="ERApplication",n["Content-Type"]=i.file.type}),this.on("beforeFileQueued",function(e){if(!e.target.validate())e.preventDefault()}),!this.skipUploadAccept)this.on("uploadAccept",function(e){var t=e.originalEvent,i=t.object,n=t.ret;if(!(n&&n.success&&n.result)){var r=i.file;if(r&&r.setStatus)r.setStatus("error","server error");e.preventDefault()}})},e.prototype.disable=function(){r.prototype.disable.call(this),this.uploader.disable(),t.each(this.main.getElementsByTagName("input"),function(e){if(a.hasClass(e,"webuploader-element-invisible"))e.disabled=!0})},e.prototype.enable=function(){r.prototype.enable.call(this),this.uploader.enable(),t.each(this.main.getElementsByTagName("input"),function(e){if(a.hasClass(e,"webuploader-element-invisible"))e.disabled=!1})},e.prototype.proxyEvent=function(e,i){return t.bind(function(){if("beforeFileQueued"===i)this._beforeQueuedFile=arguments[0];else if("error"===i)switch(arguments[0]){case"Q_TYPE_DENIED":case"F_DUPLICATE":e=["type","file"];break;case"Q_EXCEED_NUM_LIMIT":case"Q_EXCEED_SIZE_LIMIT":case"F_EXCEED_SIZE":e=["type","max","file"]}var n=this.fire(i,{originalEvent:t.object(e,arguments)});if(n.isDefaultPrevented())return!1;else return void 0},this)},e.prototype.getBeforeQueuedFile=function(){return this._beforeQueuedFile},e.prototype.getNative=function(){return this.uploader},e.prototype.repaint=require("esui/painters").createRepaint(r.prototype.repaint,{name:["hint","hintType"],paint:function(e,i,n){var r=e.helper.getPart("hint");if(e.removeState("hint-prefix"),e.removeState("hint-suffix"),!i&&r)a.removeNode(r);if(i){if(!r)r=document.createElement("label"),r.id=e.helper.getId("hint"),e.helper.addPartClasses("hint",r),a.setAttribute(r,"for",e.helper.getId("pick"));r.innerHTML=t.escape(i),n="prefix"===n?"prefix":"suffix";var o="prefix"===n?"insertBefore":"insertAfter";a[o](r,e.helper.getPart("pick")),e.addState("hint-"+n)}}}),e.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.uploader)this.uploader.destroy();r.prototype.dispose.call(this)}},e.prototype.type="WebUploader",require("esui").register(e),e}),define("inf-ria/ui/ViewStep",["require","esui/lib","esui/Control","underscore","esui/painters","esui"],function(require){function e(e){r.call(this,e)}function t(e){var t=["<ul>"];a.each(e.steps,function(i,n){if(n+1===e.steps.length){var r=e.helper.getPartClassName("last-item");t.push('<li bind-for="'+i.bindFor+'" class="'+r+'"><i>'+(n+1)+"</i><span>"+a.escape(i.text)+"</span></li>")}else t.push('<li bind-for="'+i.bindFor+'"><i>'+(n+1)+"</i><span>"+a.escape(i.text)+"</span></li>")}),t.push("</ul>"),e.main.innerHTML=t.join(""),e.setProperties({currentStep:e.currentStep})}function i(e,t){a.each(n.getChildren(e.main.firstChild),function(i,r){var a=document.getElementById(i.getAttribute("bind-for")||"");if(t>=r+1)e.helper.addPartClasses("item-active",i);else e.helper.removePartClasses("item-active",i);if(a)if(r+1===t)n.removeClass(a,"state-hidden");else n.addClass(a,"state-hidden")})}var n=require("esui/lib"),r=require("esui/Control"),a=require("underscore");return e.prototype.type="ViewStep",e.prototype.initStructure=function(){},e.prototype.initOptions=function(e){var t={steps:[],currentStep:1};a.extend(t,e);var i=n.getChildren(this.main);if(i.length){var r=[];if(a.each(n.getChildren(i[0]),function(e){r.push({bindFor:e.getAttribute("bind-for"),text:n.getText(e)})}),!t.steps.length)t.steps=a.map(r,function(e){if(a.isString(e))return{bindFor:null,text:e};else return e})}if("string"==typeof t.currentStep)t.currentStep=+t.currentStep;this.setProperties(t)},e.prototype.repaint=require("esui/painters").createRepaint(r.prototype.repaint,{name:"steps",paint:t},{name:"currentStep",paint:i}),n.inherits(e,r),require("esui").register(e),e}),define("inf-ria/ui/ViewProgress",["require","esui/lib","esui/Control","underscore","esui/painters","esui"],function(require){function e(e){n.call(this,e)}function t(e){e.main.style.width=e.width+"px";var t=['<div class="inner" style="width: '+e.percent+'%"></div>'];t.push('<div class="percent">'+e.percent+"%</div>"),e.main.innerHTML=t.join(""),e.setProperties({currentStep:e.currentStep})}var i=require("esui/lib"),n=require("esui/Control"),r=require("underscore");return e.prototype.type="ViewProgress",e.prototype.initStructure=function(){},e.prototype.initOptions=function(e){var t={percent:0,width:"auto"};if(r.extend(t,e),"string"==typeof t.percent)t.percent=100*+t.percent;if("string"==typeof t.width)t.width=+t.width;this.setProperties(t)},e.prototype.repaint=require("esui/painters").createRepaint(n.prototype.repaint,{name:"percent",paint:t}),i.inherits(e,n),require("esui").register(e),e}),define("inf-ria/ui/ToggleButton",["require","esui/lib","esui/InputControl","esui/painters","esui"],function(require){function e(e){n.apply(this,arguments)}function t(e,t){var i=e.helper.getId(t),n=e.helper.getPartClassName("part-"+t),r='<span id="'+i+'" class="'+n+'"></span>';return r}var i=require("esui/lib"),n=require("esui/InputControl");e.prototype.type="ToggleButton",e.prototype.getCategory=function(){return"check"},e.prototype.createMain=function(){return document.createElement("div")},e.prototype.initOptions=function(e){var t={onText:"ON",offText:"OFF",checked:!1};if(i.extend(t,e),!t.title)t.title=this.main.title;if(i.isInput(this.main))this.helper.extractOptionsFromInput(this.main,t);else{var r=i.getChildren(this.main);if(r.length>1){if(!e.onText)t.onText=i.getText(r[0]);if(!e.offText)t.offText=i.getText(r[1])}}n.prototype.initOptions.call(this,t)},e.prototype.initStructure=function(){this.main.innerHTML=t(this,"on")+t(this,"off"),this.helper.addDOMEvent(this.main,"click",i.bind(this.toggle,this))};var r=require("esui/painters");return e.prototype.repaint=r.createRepaint(n.prototype.repaint,r.text("onText","on"),r.text("offText","off"),r.attribute("title"),r.style("width"),r.style("height"),r.state("checked")),e.prototype.setProperties=function(){if(this.hasOwnProperty("checked"))this.checked=!!this.checked;var e=n.prototype.setProperties.apply(this,arguments);if(e.hasOwnProperty("checked"))this.fire("change")},e.prototype.isChecked=function(){return this.checked},e.prototype.getValue=e.prototype.isChecked,e.prototype.getRawValue=e.prototype.isChecked,e.prototype.setRawValue=function(e){this.set("checked",!!e)},e.prototype.toggle=function(){this.set("checked",!this.checked)},i.inherits(e,n),require("esui").register(e),e}),define("inf-ria/ui/ToastLabel",["require","underscore","esui/lib","esui/Control","esui/controlHelper","esui/painters","esui/main"],function(require){function e(e){n.apply(this,arguments)}var t=require("underscore"),i=require("esui/lib"),n=require("esui/Control"),r=require("esui/controlHelper");e.prototype.type="ToastLabel",e.prototype.createMain=function(e){var t=null;if(!e.tagName)t=n.prototype.createMain.call(this);else t=document.createElement(e.tagName);return this.createChild(t),t},e.prototype.createChild=function(e){this.main&&(e=this.main),e.innerHTML='<span class="'+r.getPartClasses(this,"content").join(" ")+'"></span>'},e.prototype.initOptions=function(e){var i={messageType:"normal"};if(t.extend(i,e),i.tagName=this.main.nodeName.toLowerCase(),null==e.content)i.content=this.main.innerHTML;t.extend(this,i)};var a=require("esui/painters");return e.prototype.repaint=a.createRepaint(n.prototype.repaint,{name:"messageType",paint:function(e,t){e.helper.addPartClasses(e.messageType)}},{name:"childNode",paint:function(e){e.createChild()}},a.html("content",function(e){return e.main.firstChild})),e.prototype.setContent=function(e){this.setProperties({content:e})},e.prototype.getContent=function(){return this.content},i.inherits(e,n),require("esui/main").register(e),e}),define("inf-ria/ui/StarRating",["require","underscore","esui/lib","esui/painters","esui/InputControl","esui/controlHelper","esui"],function(require){function e(e){l.apply(this,arguments)}function t(e){for(var t=[],i=e.readonly?c:"",n=parseInt(e.score,0),r=1;r<=e.number;r++)t.push(o.format(C,{defaultClass:A,activeClass:n>=r?B:"",readonlyClass:i,
score:r}));return'<ul data-score="'+e.score+'">'+t.join("")+"</ul>"}function i(e){var t=e.target||e.srcElement;if(o.hasClass(t,A)){var i=parseInt(o.getAttribute(t,"data-score"),0);this.setValue(i)}}function n(e){var t=e.target||e.srcElement;if(o.hasClass(t,A)){var i=parseInt(o.getAttribute(t,"data-score"),0);if(this.originScore<i&&!o.hasClass(t,B))this.setProperties({score:i})}else if(this.originScore!==this.score)this.setProperties({score:this.originScore})}function r(e){var t=e.target||e.srcElement;if(o.hasClass(t,A)){var i=parseInt(o.getAttribute(t,"data-score"),0);if(this.originScore<i&&o.hasClass(t,B)){o.removeClass(t,B);for(var n=o.dom.next(t);n;){if(o.hasClass(n,B))o.removeClass(t,B);n=o.dom.next(n)}}}else this.setProperties({score:this.originScore})}var a=require("underscore"),o=require("esui/lib"),s=require("esui/painters"),l=require("esui/InputControl"),u=require("esui/controlHelper");e.prototype.type="StarRating";var A="ui-starrating-default",B="ui-starrating-active",c="ui-starrating-readonly",C='<li class="${defaultClass} ${activeClass} ${readonlyClass}"data-score="${score}"></li>';return e.prototype.initStructure=function(){this.main.innerHTML=t(this),this.initChildren(this.main)},e.prototype.initOptions=function(e){var t={score:0,readonly:!1,number:5};t.originScore=parseInt(e.score,0)||0,a.extend(t,e),this.setProperties(t)},e.prototype.getValue=function(){return parseInt(this.originScore,0)},e.prototype.getRawValue=e.prototype.getValue,e.prototype.setValue=function(e){this.setProperties({score:e,originScore:e}),this.fire("change",{score:e})},e.prototype.initEvents=function(){if(!this.readonly)u.addDOMEvent(this,this.main,"click",i),u.addDOMEvent(this,this.main,"mouseover",n),u.addDOMEvent(this,this.main,"mouseout",r)},e.prototype.repaint=s.createRepaint(l.prototype.repaint,{name:["score"],paint:function(e){e.main.innerHTML=t(e)}}),o.inherits(e,l),require("esui").register(e),e}),define("inf-ria/ui/SearchField",["require","esui/Button","esui/TextBox","esui/lib","esui/painters","esui/Control","esui"],function(require){function e(e){r.apply(this,arguments)}function t(e){var t='<input data-ui-id="${inputId}" data-ui-child-name="input" data-ui-type="TextBox" type="text" /><button data-ui-id="${btnId}" data-ui-child-name="btn" data-ui-type="Button"></button>',n=i.format(t,{labelId:e.helper.getId("label"),inputId:e.helper.getId("input"),btnId:e.helper.getId("btn")});return n}require("esui/Button"),require("esui/TextBox");var i=require("esui/lib"),n=require("esui/painters"),r=require("esui/Control");return i.inherits(e,r),e.prototype.type="SearchField",e.prototype.initStructure=function(){this.main.innerHTML=t(this),this.initChildren(this.main)},e.prototype.repaint=n.createRepaint(r.prototype.repaint,{name:["label","placeholder","btnText"],paint:function(e,t,i,n){var r=e.getChild("btn");r.setProperties({content:n});var a=e.getChild("input");a.setProperties({placeholder:i})}}),require("esui").register(e),e}),define("inf-ria/ui/SMSCodeBox",["require","esui/Button","esui/TextBox","esui/lib","esui/painters","esui/InputControl","inf-i18n","underscore","esui"],function(require){function e(e){a.call(this,e)}function t(e){var t='<input data-ui-child-name="input" data-ui-type="TextBox" type="text" /><button data-ui-child-name="btn" data-ui-type="Button"></button>';return t}function i(e){this.fire("action"),e.preventDefault()}require("esui/Button"),require("esui/TextBox");var n=require("esui/lib"),r=require("esui/painters"),a=require("esui/InputControl"),o=require("inf-i18n"),s=require("underscore");return e.prototype.type="SMSCodeBox",e.defaultProperties={cooldown:60,btnText:o("发送验证码")},e.prototype.initStructure=function(){this.main.innerHTML=t(this),this.initChildren(this.main)},e.prototype.initOptions=function(t){var i={};s.extend(i,e.defaultProperties),s.extend(i,t),this.setProperties(i)},e.prototype.startCountdown=function(){function e(){if(t.setContent(i+"("+n+")"),n--,n>=0)setTimeout(e,1e3);else t.setDisabled(!1),t.setContent(i)}var t=this.getChild("btn");t.setDisabled(!0);var i=this.get("btnText"),n=this.get("cooldown");if(!isNaN(n)&&n>0)e()},e.prototype.initEvents=function(){this.getChild("btn").on("click",i,this)},e.prototype.repaint=r.createRepaint(a.prototype.repaint,{name:["placeholder","btnText","inputWidth"],paint:function(e,t,i,n){var r=e.getChild("btn");r.setProperties({content:i});var a=e.getChild("input");a.setProperties({placeholder:t,width:n})}},{name:["disabled"],paint:function(e,t){e.getChild("input").setDisabled(t),e.getChild("btn").setDisabled(t)}},{name:"rawValue",paint:function(e,t){var i=e.getChild("input");i.setRawValue(t)}}),e.prototype.showValidity=function(e){var t=this.getChild("input");if(this.validity)t.removeState("validity-"+this.validity.getValidState());t.addState("validity-"+e.getValidState()),a.prototype.showValidity.call(this,e)},e.prototype.getRawValue=function(){return this.getChild("input").getRawValue()},e.prototype.getValue=e.prototype.getRawValue,e.prototype.getRawValueProperty=e.prototype.getRawValue,n.inherits(e,a),require("esui").register(e),e}),define("zeroclipboard/ZeroClipboard",["require"],function(require){"use strict";var e,t=window,i=t.document,n=t.navigator,r=t.setTimeout,a=t.Number.parseInt||t.parseInt,o=t.Number.parseFloat||t.parseFloat,s=t.Number.isNaN||t.isNaN,l=t.encodeURIComponent,u=t.Math,A=t.Date,B=t.ActiveXObject,c=t.Array.prototype.slice,C=t.Object.keys,D=t.Object.prototype.hasOwnProperty,d=function(){if("function"==typeof t.Object.defineProperty&&function(){try{var e={};return t.Object.defineProperty(e,"y",{value:"z"}),"z"===e.y}catch(i){return!1}}())return t.Object.defineProperty;else return void 0}(),f=function(e){return c.call(e,0)},h=function(e,t,i){if("function"==typeof t.indexOf)return t.indexOf(e,i);var n,r=t.length;if("undefined"==typeof i)i=0;else if(0>i)i=r+i;for(n=i;r>n;n++)if(D.call(t,n)&&t[n]===e)return n;return-1},E=function(){var e,t,i,n,r,a,o=f(arguments),s=o[0]||{};for(e=1,t=o.length;t>e;e++)if(null!=(i=o[e]))for(n in i)if(D.call(i,n)){if(r=s[n],a=i[n],s===a)continue;if(void 0!==a)s[n]=a}return s},p=function(e){var t,i,n,r;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length){for(t=[],i=0,n=e.length;n>i;i++)if(D.call(e,i))t[i]=p(e[i])}else{t={};for(r in e)if(D.call(e,r))t[r]=p(e[r])}return t},F=function(e,t){for(var i={},n=0,r=t.length;r>n;n++)if(t[n]in e)i[t[n]]=e[t[n]];return i},m=function(e,t){var i={};for(var n in e)if(-1===h(n,t))i[n]=e[n];return i},g=function(e){if(null==e)return[];if(C)return C(e);var t=[];for(var i in e)if(D.call(e,i))t.push(i);return t},H=function(e){if(e)for(var t in e)if(D.call(e,t))delete e[t];return e},G=function(e,t){if(t in e&&"function"==typeof d)d(e,t,{value:e[t],writable:!1,configurable:!0,enumerable:!0})},I=function(e){return function(){var t;if(e.now)t=e.now();else t=(new e).getTime();return t}}(A),v={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},y="11.0.0",J={},L={},M=null,b={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},N=function(){var e,t,n,r,a="ZeroClipboard.swf";if(!i.currentScript||!(r=i.currentScript.src)){var o=i.getElementsByTagName("script");if("readyState"in o[0])for(e=o.length;e--&&("interactive"!==o[e].readyState||!(r=o[e].src)););else if("loading"===i.readyState)r=o[o.length-1].src;else{for(e=o.length;e--;){if(n=o[e].src,!n){t=null;break}if(n=n.split("#")[0].split("?")[0],n=n.slice(0,n.lastIndexOf("/")+1),null==t)t=n;else if(t!==n){t=null;break}}if(null!==t)r=t}}if(r)r=r.split("#")[0].split("?")[0],a=r.slice(0,r.lastIndexOf("/")+1)+a;return a}(),K={swfPath:N,trustedDomains:window.location.host?[window.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},x=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(D.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))K[t]=e[t];else if(null==v.bridge)if("containerId"===t||"swfObjectId"===t)if(z(e[t]))K[t]=e[t];else throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");else K[t]=e[t];if("string"!=typeof e||!e)return p(K);else if(D.call(K,e))return K[e]},P=function(){return{browser:F(n,["userAgent","platform","appName"]),flash:m(v,["bridge"]),zeroclipboard:{version:He.version,config:He.config()}}},_=function(){return!!(v.disabled||v.outdated||v.unavailable||v.deactivated)},O=function(e,t){var i,n,r,a={};if("string"==typeof e&&e)r=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(i in e)if(D.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i])He.on(i,e[i]);if(r&&r.length){for(i=0,n=r.length;n>i;i++){if(e=r[i].replace(/^on/,""),a[e]=!0,!J[e])J[e]=[];J[e].push(t)}if(a.ready&&v.ready)He.emit({type:"ready"});if(a.error){var o=["disabled","outdated","unavailable","deactivated","overdue"];for(i=0,n=o.length;n>i;i++)if(v[o[i]]===!0){He.emit({type:"error",name:"flash-"+o[i]});break}}}return He},T=function(e,t){var i,n,r,a,o;if(0===arguments.length)a=g(J);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(i in e)if(D.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i])He.off(i,e[i]);if(a&&a.length)for(i=0,n=a.length;n>i;i++)if(e=a[i].toLowerCase().replace(/^on/,""),o=J[e],o&&o.length)if(t)for(r=h(t,o);-1!==r;)o.splice(r,1),r=h(t,o,r);else o.length=0;return He},S=function(e){var t;if("string"==typeof e&&e)t=p(J[e])||null;else t=p(J);return t},w=function(e){var t,i,n;if(e=Y(e))if(!ee(e)){if("ready"===e.type&&v.overdue===!0)return He.emit({type:"error",name:"flash-overdue"});if(t=E({},e),$.call(this,t),"copy"===e.type)n=oe(L),i=n.data,M=n.formatMap;return i}},R=function(){if("boolean"!=typeof v.ready)v.ready=!1;if(!He.isFlashUnusable()&&null===v.bridge){var e=K.flashLoadTimeout;if("number"==typeof e&&e>=0)r(function(){if("boolean"!=typeof v.deactivated)v.deactivated=!0;if(v.deactivated===!0)He.emit({type:"error",name:"flash-deactivated"})},e);v.overdue=!1,re()}},k=function(){He.clearData(),He.deactivate(),He.emit("destroy"),ae(),He.off()},Q=function(e,t){var i;if("object"==typeof e&&e&&"undefined"==typeof t)i=e,He.clearData();else if("string"==typeof e&&e)i={},i[e]=t;else return;for(var n in i)if("string"==typeof n&&n&&D.call(i,n)&&"string"==typeof i[n]&&i[n])L[n]=i[n]},V=function(e){if("undefined"==typeof e)H(L),M=null;else if("string"==typeof e&&D.call(L,e))delete L[e]},U=function(t){if(t&&1===t.nodeType){if(e)if(De(e,K.activeClass),e!==t)De(e,K.hoverClass);e=t,Ce(t,K.hoverClass);var i=t.getAttribute("title")||K.title;if("string"==typeof i&&i){var n=ne(v.bridge);if(n)n.setAttribute("title",i)}var r=K.forceHandCursor===!0||"pointer"===fe(t,"cursor");Fe(r),pe()}},W=function(){var t=ne(v.bridge);if(t)t.removeAttribute("title"),t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.top="1px";if(e)De(e,K.hoverClass),De(e,K.activeClass),e=null},z=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},Y=function(t){var i;if("string"==typeof t&&t)i=t,t={};else if("object"==typeof t&&t&&"string"==typeof t.type&&t.type)i=t.type;if(i){E(t,{type:i.toLowerCase(),target:t.target||e||null,relatedTarget:t.relatedTarget||null,currentTarget:v&&v.bridge||null,timeStamp:t.timeStamp||I()||null});var n=b[t.type];if("error"===t.type&&t.name&&n)n=n[t.name];if(n)t.message=n;if("ready"===t.type)E(t,{target:null,version:v.version});if("error"===t.type){if(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(t.name))E(t,{target:null,minimumVersion:y});if(/^flash-(outdated|unavailable|deactivated|overdue)$/.test(t.name))E(t,{version:v.version})}if("copy"===t.type)t.clipboardData={setData:He.setData,clearData:He.clearData};if("aftercopy"===t.type)t=se(t,M);if(t.target&&!t.relatedTarget)t.relatedTarget=X(t.target);return t=j(t)}},X=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?i.getElementById(t):null},j=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,r="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:void 0,a="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:void 0,o=Ee(n),s=t.screenLeft||t.screenX||0,l=t.screenTop||t.screenY||0,u=i.body.scrollLeft+i.documentElement.scrollLeft,A=i.body.scrollTop+i.documentElement.scrollTop,B=o.left+("number"==typeof e._stageX?e._stageX:0),c=o.top+("number"==typeof e._stageY?e._stageY:0),C=B-u,D=c-A,d=s+C,f=l+D,h="number"==typeof e.movementX?e.movementX:0,p="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,E(e,{srcElement:n,fromElement:r,toElement:a,screenX:d,screenY:f,pageX:B,pageY:c,clientX:C,clientY:D,x:C,y:D,movementX:h,movementY:p,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},Z=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},q=function(e,t,i,n){if(n)r(function(){e.apply(t,i)},0);else e.apply(t,i)},$=function(e){if("object"==typeof e&&e&&e.type){var i=Z(e),n=J["*"]||[],r=J[e.type]||[],a=n.concat(r);if(a&&a.length){var o,s,l,u,A,B=this;for(o=0,s=a.length;s>o;o++){if(l=a[o],u=B,"string"==typeof l&&"function"==typeof t[l])l=t[l];if("object"==typeof l&&l&&"function"==typeof l.handleEvent)u=l,l=l.handleEvent;if("function"==typeof l)A=E({},e),q(l,u,[A],i)}}return this}},ee=function(t){var i=t.target||e||null,n="swf"===t._source;switch(delete t._source,t.type){case"error":if(h(t.name,["flash-disabled","flash-outdated","flash-deactivated","flash-overdue"]))E(v,{disabled:"flash-disabled"===t.name,outdated:"flash-outdated"===t.name,unavailable:"flash-unavailable"===t.name,deactivated:"flash-deactivated"===t.name,overdue:"flash-overdue"===t.name,ready:!1});break;case"ready":var r=v.deactivated===!0;E(v,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:r,ready:!r});break;case"copy":var a,o,s=t.relatedTarget;if(!L["text/html"]&&!L["text/plain"]&&s&&(o=s.value||s.outerHTML||s.innerHTML)&&(a=s.value||s.textContent||s.innerText)){if(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",a),o!==a)t.clipboardData.setData("text/html",o)}else if(!L["text/plain"]&&t.target&&(a=t.target.getAttribute("data-clipboard-text")))t.clipboardData.clearData(),t.clipboardData.setData("text/plain",a);break;case"aftercopy":if(He.clearData(),i&&i!==ce()&&i.focus)i.focus();break;case"_mouseover":if(He.activate(i),K.bubbleEvents===!0&&n)te(E({},t,{type:"mouseover"})),te(E({},t,{type:"mouseenter",bubbles:!1}));break;case"_mouseout":if(He.deactivate(),K.bubbleEvents===!0&&n)te(E({},t,{type:"mouseout"})),te(E({},t,{type:"mouseleave",bubbles:!1}));break;case"_mousedown":if(Ce(i,K.activeClass),K.bubbleEvents===!0&&n)te(E({},t,{type:t.type.slice(1)}));break;case"_mouseup":if(De(i,K.activeClass),K.bubbleEvents===!0&&n)te(E({},t,{type:t.type.slice(1)}));break;case"_click":case"_mousemove":if(K.bubbleEvents===!0&&n)te(E({},t,{type:t.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type))return!0;else return void 0},te=function(e){if(e&&"string"==typeof e.type&&e){var n,r=e.target||e.srcElement||null,a=r&&r.ownerDocument||i,o={view:a.defaultView||t,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:a.createEvent?0:1},s=E(o,e);if(r)if(a.createEvent&&r.dispatchEvent){if(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],n=a.createEvent("MouseEvents"),n.initMouseEvent)n.initMouseEvent.apply(n,s),r.dispatchEvent(n)}else if(a.createEventObject&&r.fireEvent)n=a.createEventObject(s),r.fireEvent("on"+s.type,n)}},ie=function(){var e=i.createElement("div");return e.id=K.containerId,e.className=K.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+me(K.zIndex),e},ne=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},re=function(){var e,n=v.bridge,r=ne(n);if(!n){var a=Be(t.location.host,K),o="never"===a?"none":"all",s=ue(K),l=K.swfPath+le(K.swfPath,K);r=ie();var u=i.createElement("div");r.appendChild(u),i.body.appendChild(r);var A=i.createElement("div"),B="activex"===v.pluginType;A.innerHTML='<object id="'+K.swfObjectId+'" name="'+K.swfObjectId+'" width="100%" height="100%" '+(B?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(B?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+a+'"/><param name="allowNetworking" value="'+o+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/></object>',n=A.firstChild,A=null,n.ZeroClipboard=He,r.replaceChild(n,u)}if(!n){if(n=i[K.swfObjectId],n&&(e=n.length))n=n[e-1];if(!n&&r)n=r.firstChild}return v.bridge=n||null,n},ae=function(){var e=v.bridge;if(e){var t=ne(e);if(t)if("activex"===v.pluginType&&"readyState"in e)e.style.display="none",function i(){if(4===e.readyState){for(var n in e)if("function"==typeof e[n])e[n]=null;if(e.parentNode)e.parentNode.removeChild(e);if(t.parentNode)t.parentNode.removeChild(t)}else r(i,10)}();else{if(e.parentNode)e.parentNode.removeChild(e);if(t.parentNode)t.parentNode.removeChild(t)}v.ready=null,v.bridge=null,v.deactivated=null}},oe=function(e){var t={},i={};if("object"==typeof e&&e){for(var n in e)if(n&&D.call(e,n)&&"string"==typeof e[n]&&e[n])switch(n.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[n],i.text=n;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[n],i.html=n;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[n],i.rtf=n}return{data:t,formatMap:i}}},se=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var i={};for(var n in e)if(D.call(e,n)){if("success"!==n&&"data"!==n){i[n]=e[n];continue}i[n]={};var r=e[n];for(var a in r)if(a&&D.call(r,a)&&D.call(t,a))i[n][t[a]]=r[a]}return i},le=function(e,t){var i=null==t||t&&t.cacheBust===!0;if(i)return(-1===e.indexOf("?")?"?":"&")+"noCache="+I();else return""},ue=function(e){var i,n,r,a,o="",s=[];if(e.trustedDomains)if("string"==typeof e.trustedDomains)a=[e.trustedDomains];else if("object"==typeof e.trustedDomains&&"length"in e.trustedDomains)a=e.trustedDomains;if(a&&a.length)for(i=0,n=a.length;n>i;i++)if(D.call(a,i)&&a[i]&&"string"==typeof a[i]){if(r=Ae(a[i]),!r)continue;if("*"===r){s=[r];break}s.push.apply(s,[r,"//"+r,t.location.protocol+"//"+r])}if(s.length)o+="trustedOrigins="+l(s.join(","));if(e.forceEnhancedClipboard===!0)o+=(o?"&":"")+"forceEnhancedClipboard=true";if("string"==typeof e.swfObjectId&&e.swfObjectId)o+=(o?"&":"")+"swfObjectId="+l(e.swfObjectId);return o},Ae=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var i=e.indexOf("/");if(e=-1===i?e:-1===t||0===i?null:e.slice(0,i),e&&".swf"===e.slice(-4).toLowerCase())return null;else return e||null},Be=function(){var e=function(e,t){var i,n,r;if(null!=e&&"*"!==t[0]){if("string"==typeof e)e=[e];if("object"==typeof e&&"number"==typeof e.length)for(i=0,n=e.length;n>i;i++)if(D.call(e,i)&&(r=Ae(e[i]))){if("*"===r){t.length=0,t.push("*");break}if(-1===h(r,t))t.push(r)}}};return function(t,i){var n=Ae(i.swfPath);if(null===n)n=t;var r=[];e(i.trustedOrigins,r),e(i.trustedDomains,r);var a=r.length;if(a>0){if(1===a&&"*"===r[0])return"always";if(-1!==h(t,r))if(1===a&&t===n)return"sameDomain";else return"always"}return"never"}}(),ce=function(){try{return i.activeElement}catch(e){return null}},Ce=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList){if(!e.classList.contains(t))e.classList.add(t);return e}if(t&&"string"==typeof t){var i=(t||"").split(/\s+/);if(1===e.nodeType)if(!e.className)e.className=t;else{for(var n=" "+e.className+" ",r=e.className,a=0,o=i.length;o>a;a++)if(n.indexOf(" "+i[a]+" ")<0)r+=" "+i[a];e.className=r.replace(/^\s+|\s+$/g,"")}}return e},De=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList){if(e.classList.contains(t))e.classList.remove(t);return e}if("string"==typeof t&&t){var i=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var n=(" "+e.className+" ").replace(/[\n\t]/g," "),r=0,a=i.length;a>r;r++)n=n.replace(" "+i[r]+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}}return e},de=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(i){return i.replace(e,t)}}(),fe=function(e,i){var n,r,a;if(t.getComputedStyle)n=t.getComputedStyle(e,null).getPropertyValue(i);else if(r=de(i),e.currentStyle)n=e.currentStyle[r];else n=e.style[r];if("cursor"===i)if(!n||"auto"===n)if(a=e.tagName.toLowerCase(),"a"===a)return"pointer";return n},he=function(){var e,t,n,r=1;if("function"==typeof i.body.getBoundingClientRect)e=i.body.getBoundingClientRect(),t=e.right-e.left,n=i.body.offsetWidth,r=u.round(t/n*100)/100;return r},Ee=function(e){var n={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var r,a,o,s=e.getBoundingClientRect();if("pageXOffset"in t&&"pageYOffset"in t)r=t.pageXOffset,a=t.pageYOffset;else o=he(),r=u.round(i.documentElement.scrollLeft/o),a=u.round(i.documentElement.scrollTop/o);var l=i.documentElement.clientLeft||0,A=i.documentElement.clientTop||0;n.left=s.left+r-l,n.top=s.top+a-A,n.width="width"in s?s.width:s.right-s.left,n.height="height"in s?s.height:s.bottom-s.top}return n},pe=function(){var t;if(e&&(t=ne(v.bridge))){var i=Ee(e);E(t.style,{width:i.width+"px",height:i.height+"px",top:i.top+"px",left:i.left+"px",zIndex:""+me(K.zIndex)})}},Fe=function(e){if(v.ready===!0)if(v.bridge&&"function"==typeof v.bridge.setHandCursor)v.bridge.setHandCursor(e);else v.ready=!1},me=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;if("number"==typeof e&&!s(e))t=e;else if("string"==typeof e)t=me(a(e,10));return"number"==typeof t?t:"auto"},ge=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function i(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){if(e){if(u=!0,e.version)c=t(e.version);if(!c&&e.description)c=t(e.description);if(e.filename)B=i(e.filename)}}var a,s,l,u=!1,A=!1,B=!1,c="";if(n.plugins&&n.plugins.length){if(a=n.plugins["Shockwave Flash"],r(a),n.plugins["Shockwave Flash 2.0"])u=!0,c="2.0.0.11"}else if(n.mimeTypes&&n.mimeTypes.length)l=n.mimeTypes["application/x-shockwave-flash"],a=l&&l.enabledPlugin,r(a);else if("undefined"!=typeof e){A=!0;try{s=new e("ShockwaveFlash.ShockwaveFlash.7"),u=!0,c=t(s.GetVariable("$version"))}catch(C){try{s=new e("ShockwaveFlash.ShockwaveFlash.6"),u=!0,c="6.0.21"}catch(D){try{s=new e("ShockwaveFlash.ShockwaveFlash"),u=!0,c=t(s.GetVariable("$version"))}catch(d){A=!1}}}}v.disabled=u!==!0,v.outdated=c&&o(c)<o(y),v.version=c||"0.0.0",v.pluginType=B?"pepper":A?"activex":u?"netscape":"unknown"};ge(B);var He=function(){if(!(this instanceof He))return new He;if("function"==typeof He._createClient)He._createClient.apply(this,f(arguments))};He.version="2.0.0",G(He,"version"),He.config=function(){return x.apply(this,f(arguments))},He.state=function(){return P.apply(this,f(arguments))},He.isFlashUnusable=function(){return _.apply(this,f(arguments))},He.on=function(){return O.apply(this,f(arguments))},He.off=function(){return T.apply(this,f(arguments))},He.handlers=function(){return S.apply(this,f(arguments))},He.emit=function(){return w.apply(this,f(arguments))},He.create=function(){return R.apply(this,f(arguments))},He.destroy=function(){return k.apply(this,f(arguments))},He.setData=function(){return Q.apply(this,f(arguments))},He.clearData=function(){return V.apply(this,f(arguments))},He.activate=function(){return U.apply(this,f(arguments))},He.deactivate=function(){return W.apply(this,f(arguments))};var Ge=0,Ie={},ve=0,ye={},Je={};E(K,{autoActivate:!0});var Le=function(e){var t=this;if(t.id=""+Ge++,Ie[t.id]={instance:t,elements:[],handlers:{}},e)t.clip(e);He.on("*",function(e){return t.emit(e)}),He.on("destroy",function(){t.destroy()}),He.create()},Me=function(e,t){var i,n,r,a={},o=Ie[this.id]&&Ie[this.id].handlers;if("string"==typeof e&&e)r=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(i in e)if(D.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i])this.on(i,e[i]);if(r&&r.length){for(i=0,n=r.length;n>i;i++){if(e=r[i].replace(/^on/,""),a[e]=!0,!o[e])o[e]=[];o[e].push(t)}if(a.ready&&v.ready)this.emit({type:"ready",client:this});if(a.error){var s=["disabled","outdated","unavailable","deactivated","overdue"];for(i=0,n=s.length;n>i;i++)if(v[s[i]]){this.emit({type:"error",name:"flash-"+s[i],client:this});break}}}return this},be=function(e,t){var i,n,r,a,o,s=Ie[this.id]&&Ie[this.id].handlers;if(0===arguments.length)a=g(s);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(i in e)if(D.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i])this.off(i,e[i]);if(a&&a.length)for(i=0,n=a.length;n>i;i++)if(e=a[i].toLowerCase().replace(/^on/,""),o=s[e],o&&o.length)if(t)for(r=h(t,o);-1!==r;)o.splice(r,1),r=h(t,o,r);else o.length=0;return this},Ne=function(e){var t=null,i=Ie[this.id]&&Ie[this.id].handlers;if(i)if("string"==typeof e&&e)t=i[e]?i[e].slice(0):[];else t=p(i);return t},Ke=function(e){if(Te.call(this,e)){if("object"==typeof e&&e&&"string"==typeof e.type&&e.type)e=E({},e);var t=E({},Y(e),{client:this});Se.call(this,t)}return this},xe=function(e){e=we(e);for(var t=0;t<e.length;t++)if(D.call(e,t)&&e[t]&&1===e[t].nodeType){if(!e[t].zcClippingId){if(e[t].zcClippingId="zcClippingId_"+ve++,ye[e[t].zcClippingId]=[this.id],K.autoActivate===!0)Qe(e[t])}else if(-1===h(this.id,ye[e[t].zcClippingId]))ye[e[t].zcClippingId].push(this.id);var i=Ie[this.id]&&Ie[this.id].elements;if(-1===h(e[t],i))i.push(e[t])}return this},Pe=function(e){var t=Ie[this.id];if(!t)return this;var i,n=t.elements;if("undefined"==typeof e)e=n.slice(0);else e=we(e);for(var r=e.length;r--;)if(D.call(e,r)&&e[r]&&1===e[r].nodeType){for(i=0;-1!==(i=h(e[r],n,i));)n.splice(i,1);var a=ye[e[r].zcClippingId];if(a){for(i=0;-1!==(i=h(this.id,a,i));)a.splice(i,1);if(0===a.length){if(K.autoActivate===!0)Ve(e[r]);delete e[r].zcClippingId}}}return this},_e=function(){var e=Ie[this.id];return e&&e.elements?e.elements.slice(0):[]},Oe=function(){this.unclip(),this.off(),delete Ie[this.id]},Te=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Ie[this.id]&&Ie[this.id].elements,i=!!t&&t.length>0,n=!e.target||i&&-1!==h(e.target,t),r=e.relatedTarget&&i&&-1!==h(e.relatedTarget,t),a=e.client&&e.client===this;if(!(n||r||a))return!1;else return!0},Se=function(e){if("object"==typeof e&&e&&e.type){var i=Z(e),n=Ie[this.id]&&Ie[this.id].handlers["*"]||[],r=Ie[this.id]&&Ie[this.id].handlers[e.type]||[],a=n.concat(r);if(a&&a.length){var o,s,l,u,A,B=this;for(o=0,s=a.length;s>o;o++){if(l=a[o],u=B,"string"==typeof l&&"function"==typeof t[l])l=t[l];if("object"==typeof l&&l&&"function"==typeof l.handleEvent)u=l,l=l.handleEvent;if("function"==typeof l)A=E({},e),q(l,u,[A],i)}}return this}},we=function(e){if("string"==typeof e)e=[];return"number"!=typeof e.length?[e]:e},Re=function(e,t,i){if(!e||1!==e.nodeType)return e;if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);return e},ke=function(e,t,i){if(!e||1!==e.nodeType)return e;if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);return e},Qe=function(e){if(e&&1===e.nodeType){var i=function(i){if(i||t.event)He.activate(e)};Re(e,"mouseover",i),Je[e.zcClippingId]={mouseover:i}}},Ve=function(e){if(e&&1===e.nodeType){var t=Je[e.zcClippingId];if("object"==typeof t&&t){if("function"==typeof t.mouseover)ke(e,"mouseover",t.mouseover);delete Je[e.zcClippingId]}}};return He._createClient=function(){Le.apply(this,f(arguments))},He.prototype.on=function(){return Me.apply(this,f(arguments))},He.prototype.off=function(){return be.apply(this,f(arguments))},He.prototype.handlers=function(){return Ne.apply(this,f(arguments))},He.prototype.emit=function(){return Ke.apply(this,f(arguments))},He.prototype.clip=function(){return xe.apply(this,f(arguments))},He.prototype.unclip=function(){return Pe.apply(this,f(arguments))},He.prototype.elements=function(){return _e.apply(this,f(arguments))},He.prototype.destroy=function(){return Oe.apply(this,f(arguments))},He.prototype.setText=function(e){return He.setData("text/plain",e),this},He.prototype.setHtml=function(e){return He.setData("text/html",e),this},He.prototype.setRichText=function(e){return He.setData("application/rtf",e),this},He.prototype.setData=function(){return He.setData.apply(this,f(arguments)),this},He.prototype.clearData=function(){return He.clearData.apply(this,f(arguments)),this},He}),define("zeroclipboard",["zeroclipboard/ZeroClipboard"],function(e){return e}),define("inf-ria/ui/RichTextEditor",["require","underscore","esui/InputControl","esui/lib","zeroclipboard","inf-ria/js!ueditor/ueditor.all.js","esui"],function(require){function e(e){i.call(this,e),this.editorOptions,this.editorContent,this.editor=null}var t=require("underscore"),i=require("esui/InputControl"),n=require("esui/lib");window.ZeroClipboard=require("zeroclipboard"),require("inf-ria/js!ueditor/ueditor.all.js");var r={UEDITOR_HOME_URL:require.toUrl("ueditor/").replace(/\?.*/,""),autoFloatEnabled:!1,toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","insertvideo","music","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","snapscreen","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","help","drafts"]]};return n.inherits(e,i),e.prototype.initOptions=function(e){e=t.extend({editorContent:this.main.innerHTML},e),this.setProperties(e)},e.prototype.initStructure=function(){var e=t.extend(r,this.editorOptions);this.main.innerHTML="",this.editor=new UE.ui.Editor(e),this.editor.render(this.main)},e.prototype.initEvents=function(){var e=this.editor,i=t.trim(this.editorContent);e.addListener("ready",function(){e.setContent(i)}),e.addListener("simpleuploadbtnready",function(e,t){var i=this.options.labelMap.simpleupload||this.getLang("labelMap.simpleupload")||"",r=n.dom.first(t),a=r&&r.contentWindow.document.getElementsByTagName("input")[0];
if(i&&a)a.title=i})},e.prototype.getRawValue=function(){return this.editor.getContent()},e.prototype.setRawValue=function(e){this.editor.setContent(e)},e.prototype.getContentLength=function(e,t){return this.editor.getContentLength(e,t)},e.prototype.type="RichTextEditor",e.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.editor)this.editor.destroy();i.prototype.dispose.call(this)}},require("esui").register(e),e}),define("inf-ria/ui/RadioSelect",["require","underscore","esui/lib","esui/painters","esui/InputControl","esui/controlHelper","esui"],function(require){function e(e){o.apply(this,arguments)}function t(e){for(var t=[],i=0;i<e.datasource.length;i++){var n=e.datasource[i],a=e.selectedIndex===i,o=i>=e.startShow&&i<e.startShow+e.showNum;if(n.hoverContent)t.push(r.format(C,{baseClass:l,selectedClass:a?A:"",disabledClass:e.disable||n.disable?B:"",itemClass:n.itemClass||"ui-radio-index"+i,index:i,name:e.unit?n+e.unit:n.name||n.text,display:o?"block":"none",baseItemHoverClass:u,itemHoverClass:u+"index"+i,content:n.hoverContent}));else t.push(r.format(c,{baseClass:l,selectedClass:a?A:"",disabledClass:e.disable||n.disable?B:"",itemClass:n.itemClass||"ui-radio-index"+i,index:i,name:e.unit?n+e.unit:n.name||n.text,display:o?"block":"none"}))}return"<ul>"+t.join("")+"</ul>"}function i(e){var t=e.target||e.srcElement,i=parseInt(r.getAttribute(t,"data-index"),10);if(!isNaN(i)&&!this.datasource[i].disable)if(i!==this.selectedIndex)this.setSelectedIndex(i)}var n=require("underscore"),r=require("esui/lib"),a=require("esui/painters"),o=require("esui/InputControl"),s=require("esui/controlHelper");e.prototype.type="RadioSelect";var l="ui-radio-block",u="ui-radio-item-hover",A="ui-radio-selected",B="ui-radio-disabled",c='<li class="${baseClass} ${selectedClass} ${disabledClass} ${itemClass}"data-index="${index}" style="display:${display}">${name}</li>',C='<li class="${baseClass} ${selectedClass} ${disabledClass} ${itemClass}"data-index="${index}" style="display:${display}"><div class="${baseItemHoverClass} ${itemHoverClass}">${content}</div><div class="arrow-down" ><i></i></div>${name}</li>';return e.prototype.initStructure=function(){this.main.innerHTML="<ul>"+t(this)+"</ul>",this.initChildren(this.main)},e.prototype.initOptions=function(e){var t={selectedIndex:0,startShow:0,disable:0};if(n.extend(t,e),"undefined"==typeof t.showNum)t.showNum=t.datasource.length;if(null!=t.value)for(var i=0;i<t.datasource.length;i++){var r=t.datasource[i];if(r.value===t.value){t.selectedIndex=i;break}}this.setProperties(t)},e.prototype.getItem=function(e){return this.datasource[e||this.selectedIndex]},e.prototype.getValue=function(){var e=this.getItem();if(e)return this.unit?e:e.value;else return null},e.prototype.getRawValue=e.prototype.getValue,e.prototype.setSelectedIndex=function(e,t){this.setProperties({selectedIndex:e}),this.fire("change",n.extend({index:e,item:this.getItem()},t))},e.prototype.setValue=function(e,t){var i=-1;if(n.find(this.datasource,function(t,n){if(t.value===e)return i=n,!0;else return void 0}),i>-1)this.setSelectedIndex(i,t),o.prototype.setValue.apply(this,arguments)},e.prototype.initEvents=function(){if(!this.disable)s.addDOMEvent(this,this.main,"click",i)},e.prototype.setStartShow=function(e){e=0>e?0:e;var t=this.selectedIndex;if(e>t)t=e;else if(t>=e+this.showNum)t=e+this.showNum-1;else return this.setProperties({startShow:e}),!1;return this.setProperties({selectedIndex:t,startShow:e}),this.fire("change",{index:t,item:this.getItem()}),!0},e.prototype.repaint=a.createRepaint(o.prototype.repaint,{name:["datasource","startShow","selectedIndex","showNum"],paint:function(e){e.main.innerHTML=t(e)}}),e.prototype.updateDatasource=function(e){if(!e)e=this.datasource;this.datasource=e,this.repaint()},r.inherits(e,o),require("esui").register(e),e}),define("inf-ria/ui/NumberTextline",["require","underscore","esui/lib","esui/InputControl","esui/Control","esui/TextBox","esui/Button","esui/painters","esui"],function(require){function e(e){s.apply(this,arguments)}function t(e){return[o.format(u,{btnId:e.helper.getId("minus"),btnName:"minus",content:"-"}),o.format(A,{inputId:e.helper.getId("input"),maxlength:e.maxlength,width:e.width,value:e.currentValue}),o.format(u,{btnId:e.helper.getId("plus"),btnName:"plus",content:"+"})].join("")}function i(){var e=+this.getChild("input").getValue();if(e>this.max&&(e=this.max),/^([1-9][0-9]*|0)$/.test(e)&&e>=this.min)this.setValue(e);else this.setValue(this.currentValue)}function n(){this.setValue(this.currentValue-1)}function r(){this.setValue(this.currentValue+1)}var a=require("underscore"),o=require("esui/lib"),s=require("esui/InputControl"),l=require("esui/Control");require("esui/TextBox"),require("esui/Button"),e.prototype.type="NumberTextline";var u=['<button type="button" data-ui-id="${btnId}" class="extraClass" ','data-ui-child-name="${btnName}" data-ui-type="Button">',"${content}</button>"].join(""),A=['<input data-ui-type="TextBox" data-ui-id="${inputId}" ','data-ui-child-name="input" maxlength="${maxlength}" ','data-ui-width="${width}" data-ui-value="${value}" />'].join("");return e.prototype.initStructure=function(){if(this.main.innerHTML=t(this),this.initChildren(this.main),this.currentValue<=this.min)this.getChild("minus").setDisabled(!0);if(this.currentValue>=this.max)this.getChild("plus").setDisabled(!0)},e.prototype.initOptions=function(e){var t={currentValue:1,min:1,maxlength:3};if(e.min&&!isNaN(parseInt(e.min,10)))e.min=parseInt(e.min,10);if(e.max&&!isNaN(parseInt(e.max,10)))e.max=parseInt(e.max,10);if(a.extend(t,e),e.value&&!isNaN(parseInt(e.value,10)))t.currentValue=parseInt(e.value,10);if("number"!=typeof t.max)t.max=Math.pow(10,t.maxlength)-1;if(t.currentValue<t.min)t.currentValue=t.min;if(t.max&&t.currentValue>t.max)t.currentValue=t.max;this.setProperties(t)},e.prototype.initEvents=function(){this.getChild("input").on("input",i,this),this.getChild("minus").on("click",n,this),this.getChild("plus").on("click",r,this)},e.prototype.setValue=function(e){this.getChild("input").setValue(e);var t=this.currentValue;if(t!==e)this.currentValue=e,this.getChild("minus").setDisabled(this.disabled||e<=this.min),this.getChild("plus").setDisabled(this.disabled||e>=this.max),this.fire("change",{old:t,now:e})},e.prototype.getValue=function(){return this.currentValue},e.prototype.getRawValue=e.prototype.getValue,e.prototype.repaint=require("esui/painters").createRepaint(l.prototype.repaint,{name:"disabled",paint:function(e,t){t=!!t,e.getChild("minus").setDisabled(t),e.getChild("plus").setDisabled(t),e.getChild("input").setDisabled(t)}},{name:"max",paint:function(e,t){var i=e.getValue();e.setValue(a.min([i,t])),e.getChild("plus").setDisabled(e.disabled||0>=t-i)}},{name:"min",paint:function(e,t){var i=e.getValue();e.setValue(a.max([i,t])),e.getChild("minus").setDisabled(e.disabled||t-i>=0)}}),o.inherits(e,s),require("esui").register(e),e}),define("inf-ria/util",["exports","module"],function(exports,module){module.exports={sprintf:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];return e.replace(/%s/g,function(){return i.shift()})}}}),define("inf-ria/ui/MultiSelect",["require","underscore","inf-i18n","esui/lib","esui/InputControl","esui/painters","esui/Layer","../util","esui"],function(require){function e(e){return l.trim(A.getChildren(A.dom.first(e))[0].value)}function t(t,i,n){var r="";if(i.withFilter)r=e(n);if(!r)return!0;var a=t.getAttribute("data-value")||"";if(i.filterFunc&&i.filterFunc instanceof Function)return i.filterFunc(a,r);else return a.indexOf(r)>-1}function i(i){for(var n=A.event.getTarget(i),r=this.layer.getElement();n&&n!==r&&!A.hasAttribute(n,"data-index");)n=n.parentNode;if(n&&!this.helper.isPart(n,"item-disabled")){var a=parseInt(n.getAttribute("data-index"),10),o=this.selectedIndices,s=this.filterNumber||0,u=A.dom.last(r),B=this;if(l.contains(o,a))o=l.without(o,a);else if(this.maxSelect&&this.selectedIndices.length>=this.maxSelect&&-1!==a)return void this.fire("exceed");else if(-1===a){if(this.selectAll&&!this.hasAllSelected)l.each(A.getChildren(u),function(e){var i=parseInt(e.getAttribute("data-index"),10);i>=0&&t(e,B,r)&&o.push(i)});else if(this.selectAll)o=[]}else if(-2===a){o=[];var c=0;if(!e(r)&&"input"!==i.type)return;l.each(A.getChildren(u),function(e){if(t(e,B,r))e.style.display="block",c++;else e.style.display="none"}),s=c}else if(-3===a){if(!n.checked)this.fire("cancelremember")}else if(!isNaN(a))o.push(a);o=l.uniq(o),this.set("selectedIndices",o),this.set("filterNumber",s);var C=A.g(this.helper.getId("remember")),D=C&&C.checked;if(D)this.fire("remember",{selectedItems:this.getSelectedItems()})}}function n(){C.apply(this,arguments)}function r(e){B.apply(this,arguments),this.layer=new n(this)}function a(e){if(null==e.selectedIndices&&null==e.rawValue&&null==e.value)e.selectedIndices=[];if(null!=e.rawValue)e.value=null,e.selectedIndices=null;else if(null!=e.value)e.selectedIndices=null;if(null==e.selectedIndices&&(null!=e.value||null!=e.rawValue)){e.selectedIndices=[];var t=e.rawValue||e.value;if(t){if(!l.isArray(t))t=t.split(",");var i=l.map(t,function(t,i){for(var n=0;n<e.datasource.length;n++)if(e.datasource[n].value===t)return n});e.selectedIndices=i}delete e.value,delete e.rawValue}for(var n=e.selectedIndices.length-1;n>=0;n--){var r=e.selectedIndices[n];if(0>r||r>=e.datasource.length){if(e.emptyText)e.selectedIndices=[];else{e.selectedIndices=[];for(var a=0;a<e.datasource.length;a++)if(!e.datasource[a].disabled){e.selectedIndices.push(a);break}}break}}}function o(){this.fire("layerrendered",{layer:this.layer})}function s(e){for(var t=e.helper.getPart("text"),i=[],n=e.selectedIndices.length-1;n>=0;n--){var r=e.selectedIndices[n],a=e.datasource[r];if(a)if(l.contains(e.selectedIndices,r))i.unshift(l.escape(a.name));else i=l.without(i,a.value);else;}var o="";if(i.length)if(e.holderType&&"amount"===e.holderType)o=D.sprintf(u("您已经选择%s项"),i.length);else o=i.join(",");else o=e.emptyText||u("请选择");t.innerHTML=o;var s=e.layer.getElement(!1);if(s)e.layer.syncState(s)}var l=require("underscore"),u=require("inf-i18n"),A=require("esui/lib"),B=require("esui/InputControl"),c=require("esui/painters"),C=require("esui/Layer"),D=require("../util"),d=['<p class="${classes}">','<input type="text" placeholder="${defaultText}" data-index="-2" /></p>'].join(""),f=['<p data-index="-3" class="${classes}">','<input type="checkbox"${checked} id="${id}"',' class="${selectedBoxClass}" data-index="-3" />'+u("记住选择")+"</p>"].join(""),h=['<p data-index="-1" class="${classes}">','<input type="checkbox" class="${selectedBoxClass}" data-index="-1" />'+u("全选/全不选")+"</p>"].join(""),E=['<p data-index="-1" class="${classes}">',"<span>${defaultText}</span></p>"].join(""),p=['<li data-index="${index}" class="${classes}" data-value="${text}" style="width:${width}px">','<input type="checkbox" class="${selectedBoxClass}" data-index="${index}" />','<span title="${text}">${text}</span></li>'].join("");return A.inherits(n,C),n.prototype.nodeName="div",n.prototype.autoHide=!1,n.prototype.render=function(e){for(var t=this.control,i=t.helper.getPartClasses("item"),n=t.helper.getPartClasses("selected-box"),r=this.getHeadHtml(n)+"<ol>",a=t.datasource,o=0;o<a.length;o++){var s=a[o];if(s.disabled)i.push.apply(i,t.helper.getPartClasses("item-disabled"));var u={index:o,text:l.escape(s.name||s.text),classes:i.join(" "),selectedBoxClass:n,width:t.layerWidth-20};r+=A.format(p,u)}e.innerHTML=r+"</ol>"},n.prototype.getHeadHtml=function(e){var t=this.control,i="";if(t.withFilter)i+=A.format(d,{classes:t.helper.getPartClasses("head-filter"),defaultText:t.searchText||u("模糊搜索")});if(!t.selectAll&&!t.emptyText)return i;else if(!t.selectAll)i+=A.format(E,{classes:t.helper.getPartClasses("head"),defaultText:t.emptyText||u("请选择")});else i+=A.format(h,{classes:t.helper.getPartClasses("head"),selectedBoxClass:e});if(t.remember)i+=A.format(f,{classes:t.helper.getPartClasses(t.withFilter?"remember-filter":"remember"),selectedBoxClass:e,checked:t.rememberChecked?' checked="checked"':"",id:t.helper.getId("remember")});return i},n.prototype.initBehavior=function(e){if(this.control.helper.addDOMEvent(e,"click",i),this.control.withFilter){var t=A.dom.first(e);this.control.helper.addDOMEvent(A.getChildren(t)[0],"input",l.debounce(i,50))}if("blur"===this.control.changeType)this.on("hide",function(){this.control.fire("blur")})},n.prototype.syncState=function(e){var t=this.control,i=t.helper.getPartClasses("item-selectedOption"),n=A.getChildren(e),r=t.datasource.length,a=t.filterNumber>0?t.filterNumber:r;if(t.hasAllSelected=t.selectedIndices.length>=a,t.selectAll||t.emptyText){var o=t.withFilter?n[1]:n[0],s=A.getChildren(o)[0];if(s&&t.selectAll)s.checked=t.hasAllSelected}for(var u=A.getChildren(A.dom.last(e)),B=u.length-1;B>=0;B--){var c=u[B],C=A.getChildren(c)&&A.getChildren(c)[0];if(C)C.checked=l.contains(t.selectedIndices,B);if(l.contains(t.selectedIndices,B))A.addClasses(c,i);else A.removeClasses(c,i)}},n.prototype.dock={strictWidth:!0},r.prototype.type="MultiSelect",r.prototype.initOptions=function(e){var t={datasource:[],selectAll:!1},i={};if(l.extend(i,t,e),"string"==typeof i.selectedIndex)i.selectedIndex=+i.selectedIndex;this.setProperties(i)},r.prototype.displayTemplate="${text}",r.prototype.getDisplayHTML=function(e){if(!e)return l.escape(this.emptyText||"");var t={text:l.escape(e.name||e.text),value:l.escape(e.value)};return A.format(this.displayTemplate,t)},r.prototype.initStructure=function(){if("select"===this.main.nodeName.toLowerCase())this.helper.replaceMain();this.main.tabIndex=0,this.main.innerHTML=this.helper.getPartHTML("text","span")},r.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",l.bind(this.layer.toggle,this.layer)),this.layer.on("rendered",l.bind(o,this))},r.prototype.getRawValue=function(){var e=[],t=this;return l.each(t.selectedIndices,function(i){if(i>=0)e.push(t.datasource[i].value)}),e},r.prototype.repaint=c.createRepaint(B.prototype.repaint,c.style("width"),c.style("height"),{name:"datasource",paint:function(e){e.layer.repaint()}},{name:["selectedIndices","emptyText","datasource"],paint:s},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),r.prototype.updateDatasource=function(e){if(!e)e=this.datasource;this.datasource=e;var t={name:"datasource"};this.repaint([t],{datasource:t})},r.prototype.setProperties=function(e){if(null==e.datasource)e.datasource=this.datasource;if(null==e.value&&null==e.rawValue&&null==e.selectedIndices&&e.datasource===this.datasource)e.selectedIndices=this.selectedIndices;if(e.datasource&&e.datasource[0]&&!e.datasource[0].value){if(!this.selectAll&&!this.emptyText)this.emptyText=e.datasource[0].name||e.datasource[0].text;e.datasource.shift()}if(!e.hasOwnProperty("emptyText"))e.emptyText=this.emptyText;a(e);var t=B.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("selectedIndices"))this.fire("change");return t},r.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;B.prototype.dispose.apply(this,arguments)}},r.prototype.getSelectedItems=function(){for(var e=[],t=this.get("selectedIndices").length-1;t>=0;t--){var i=this.get("selectedIndices")[t],n=this.get("datasource")[i];e.push(n)}return e},A.inherits(r,B),require("esui").register(r),r}),define("inf-ria/ui/MultiColumnBox",["require","underscore","esui/lib","esui/InputControl","esui/controlHelper","esui/BoxGroup","esui"],function(require){function e(e){s.apply(this,arguments)}function t(e){for(var t=[],i=0;i<e.column;++i){i>0&&t.push(o.format(B,{extraClass:C,title:""}));for(var n=0;n<e.fields.length;++n){var r=e.fields[n].width;t.push(o.format(B,{extraClass:"",title:e.fields[n].title,width:r?"width:"+r:""}))}}return["<tr>",t.join(""),"</tr>"].join("")}function i(e){var t=e.datasource.length,i=e.column,n=t%i;if(n>0)t=t+i-n;for(var r=[],s=0;t>s;++s){if(s%i===0)r.push("<tr>");else r.push(o.format(B,{extraClass:C,content:""}));for(var l=e.datasource[s],u=0;u<e.fields.length;++u){var d;if(l)d=a.isFunction(e.fields[u].content)&&e.fields[u].content.call(null,l)||l[e.fields[u].content];!d&&(d="");var f=null;if(l&&e.fields[u].select){var h=a.contains(e.initValue,d);if(f=o.format(A,{selectType:e.selectType,name:e.id+"Name",index:s,content:d,isChecked:h?"checked":""}),h){var E="radio"===e.selectType?0:s;e.currentValue[E]=d}}var p=e.fields[u].width;r.push(o.format(c,{extraClass:s+i>=t?D:"",title:d&&d.replace(/<[^>]+>/g,""),content:f||d,width:p?"width:"+p:""}))}if(s%i===i-1)r.push("</tr>")}return r.join("")}function n(e){var n=e.width;return/^[0-9]+$/.test(n)&&(n+="px"),o.format(u,{width:n,thead:t(e),tbody:i(e)})}function r(e){var t=e.target||e.srcElement;if("input"===t.nodeName.toLowerCase()){var i=parseInt(o.getAttribute(t,"data-index"),10),n="radio"===this.selectType?0:i;this.currentValue[n]=t.checked?t.value:"",this.fire("change",{value:this.getValue(),item:this.datasource[i]})}}var a=require("underscore"),o=require("esui/lib"),s=require("esui/InputControl"),l=require("esui/controlHelper");require("esui/BoxGroup"),e.prototype.type="MultiColumnBox";var u=['<table cellpadding="0" cellspacing="0" style="width:${width}">',"<thead>${thead}</thead>","<tbody>${tbody}</tbody>","</table>"].join(""),A=["<label>",'<input type="${selectType}" name="${name}" value="${content}" ',' ${isChecked} data-index="${index}" />${content}',"</label>"].join(""),B='<th title="${title}" class="${extraClass}" style="${width}">${title}</th>',c='<td title="${title}" class="${extraClass}" style="${width}">${content}</td>',C="empty",D="last";return e.prototype.initStructure=function(){this.main.innerHTML=n(this),this.initChildren(this.main)},e.prototype.initOptions=function(e){var t={selectType:"radio",column:1,initValue:[],currentValue:[]};if(a.extend(t,e),"string"==typeof t.initValue)t.initValue=t.initValue.split(",");this.setProperties(t)},e.prototype.initEvents=function(){l.addDOMEvent(this,this.main,"click",r)},e.prototype.getValue=function(){for(var e=[],t=0;t<this.currentValue.length;++t){var i=this.currentValue[t];i&&e.push(i)}return e.join()},e.prototype.getRawValue=e.prototype.getValue,o.inherits(e,s),require("esui").register(e),e}),define("inf-ria/ui/InlineEdit",["require","esui/Button","esui/TextBox","inf-i18n","esui/lib","esui/Control","esui/Layer","esui/validator/Validity","esui/validator/ValidityState","underscore","esui"],function(require){function e(){a.apply(this,arguments)}function t(t){r.call(this,t),this.layer=new e(this),this.inputId="input"+u,this.validityId="validity"+u,u++}require("esui/Button"),require("esui/TextBox");var i=require("inf-i18n"),n=require("esui/lib"),r=require("esui/Control"),a=require("esui/Layer"),o=require("esui/validator/Validity"),s=require("esui/validator/ValidityState"),l=require("underscore"),u=35172,A=['<div class="${optClass}">','<div><input data-ui="type:TextBox;id:${inputId};validityLabel:${validityId};childName:input;width:145"/></div>','<div data-ui="childName:ok;type:Button;skin:ok">${okText}</div>','<div data-ui="childName:cancel;type:Button;skin:cancel">',"${cancelText}","</div>","</div>",'<div class="${errorClass}">','<label data-ui="type:Validity;id:${validityId}"></label>',"</div>"].join(""),B=i("确定"),c=i("取消");return n.inherits(e,a),e.prototype.render=function(e){var t=this.control.helper;e.innerHTML=n.format(A,{okText:B,cancelText:c,inputId:this.control.inputId,validityId:this.control.validityId,optClass:t.getPartClassName("editor-opt"),errorClass:t.getPartClassName("editor-error")})},n.inherits(t,r),t.prototype.type="InlineEdit",t.prototype.initStructure=function(){this.main.innerHTML=n.format('<i class="${editorClass}" id="${iconId}">'+i("编辑")+"</i>",{editorClass:this.helper.getPartClassName("editor"),iconId:this.helper.getId("icon")})},t.prototype.initEvents=function(){n.on(this.helper.getPart("icon"),"click",l.bind(this.showLayer,this))},t.prototype.initChildrenEvents=function(){this.getChild("cancel").on("click",l.bind(this.layer.hide,this.layer)),this.getChild("ok").on("click",this.ok,this),this.getChild("input").on("enter",this.ok,this)},t.prototype.ok=function(){var e=this.getChild("input");if(e.validate()){var t={value:e.getValue()};if(t=this.fire("saveedit",t),!t.isDefaultPrevented())this.layer.hide();else;}},t.prototype.showLayer=function(){if(this.layer.getElement(!1))this.layer.show();else{this.layer.show();var e={};e[this.inputId]=l.extend({},this.childInputProperties);var t={properties:e};this.initChildren(this.layer.getElement(),t),this.initChildrenEvents()}this.getChild("input").setValue(this.value);var i=new o;i.addState("InlineEditCustomRule",new s(!0)),this.getChild("input").showValidity(i)},t.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;r.prototype.dispose.apply(this,arguments)}},require("esui").register(t),t}),define("inf-ria/ui/ImageLightBox",["require","esui/Control","esui/lib","inf-i18n","underscore","jquery","esui"],function(require){function e(e){t.call(this,e)}var t=require("esui/Control"),i=require("esui/lib"),n=require("inf-i18n"),r=require("underscore"),a=require("jquery");return i.inherits(e,t),e.prototype.initOptions=function(e){var t={url:"",origin:""};r.extend(t,e),this.setProperties(t)},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",this.showLightBox),this.helper.addDOMEvent(window,"resize",this.resize)},e.prototype.buildButtonHtml=function(){if(!this.get("showOrigin"))return"";else return['<div class="image-lightbox-action-wrap">','<a class="image-lightbox-action-original" href="javascript:void 0;">',n("查看原始图片")+"</a>",'<a class="image-lightbox-action-compressed disabled" href="javascript:void 0;">',n("查看压缩后的图片")+"</a>","<h2>"+n("您现在查看的是 ")+"<span>"+n("压缩后的图片")+"</span></h2>","<p>"+n("点击图片可查看大图。")+"</p>","</div>"].join("")},e.prototype.showLightBox=function(e){var t=this.get("url"),i=this.get("origin"),r=this;if(!t&&(t=i),t){t===i&&(i=null),this.set("showOrigin",!!i);var o=a('<div class="image-lightbox-mask"></div>'),s=a(['<div class="image-lightbox-frame">','<div class="image-lightbox-close"></div>','<div class="image-lightbox-content"></div>',this.buildButtonHtml(),"</div>"].join("")),l=a("body");if(o.appendTo(l),s.appendTo(l),o.click(this.hideLightBox),setTimeout(function(){o.addClass("in"),s.addClass("in"),r.resize()},20),this.renderImage(!1,s),s.find(".image-lightbox-close").click(this.hideLightBox),this.get("showOrigin")){var u=new Image;u.src=i,s.find(".image-lightbox-action-compressed").click(function(){var e=a(this);if(!e.is("disabled"))r.renderImage(!1,s),a(this).addClass("disabled").siblings().removeClass("disabled"),s.find("h2 span").text(n("压缩后的图片"))}),s.find(".image-lightbox-action-original").click(function(){var e=a(this);if(!e.is("disabled"))r.renderImage(!0,s),a(this).addClass("disabled").siblings().removeClass("disabled"),s.find("h2 span").text(n("原始图片"))})}}},e.prototype.renderImage=function(e,t){var i=this;this.active=!0;var r=new Image;r.src=this.get(e?"origin":"url"),t.removeClass("image-lightbox-loaded image-lightbox-error").addClass("image-lightbox-loading");var o=t.find(".image-lightbox-content");o.html('<p><i class="image-lightbox-icon"></i>'+n("加载中……")+"</p>"),this.initPosition(),r.onload=function(){if(i.active){t.removeClass("image-lightbox-loading image-lightbox-error").addClass("image-lightbox-loaded"),o.empty();var e=a('<img class="image-lightbox-pic" data-width="'+r.width+'" data-height="'+r.height+'" src="'+r.src+'" />');e.appendTo(o),e.off("click.imagebox").on("click.imagebox",function(){window.open(r.src,"_blank")}),i.resize()}},r.onerror=function(){t.removeClass("image-lightbox-loading image-lightbox-loaded").addClass("image-lightbox-error"),o.html('<p><i class="image-lightbox-icon"></i>'+n("图片加载失败")+"</p>"),i.initPosition()}},e.prototype.hideLightBox=function(e){this.active=!1;var t=a(".image-lightbox-mask"),i=a(".image-lightbox-frame").addClass("out");setTimeout(function(){t.addClass("out")},100),setTimeout(function(){t.remove(),i.remove()},500)},e.prototype.resize=function(){var e=a(".image-lightbox-frame"),t=e.find(".image-lightbox-content"),i=e.find(".image-lightbox-pic");if(i.length){var n,r,o=a(window).width(),s=a(window).height(),l=+i.attr("data-width"),u=+i.attr("data-height");if(l/u>o/s)n=Math.min(.8*o,l),r=n/l*u;else r=Math.min(.8*s,u),n=r/u*l;t.css({width:Math.max(n,430)+"px",height:r+"px"}),i.css("max-width",n+"px"),e.css({"margin-left":Math.min(-n/2-25,-215)+"px","margin-top":Math.min(-r/2-30,-100)+"px"})}},e.prototype.initPosition=function(){var e=a(".image-lightbox-frame"),t=e.find(".image-lightbox-content");t.css({width:"430px",height:"140px"}),e.css({"margin-left":"-215px","margin-top":"-100px"})},e.prototype.type="ImageLightBox",require("esui").register(e),e}),define("inf-ria/ui/FilePreview",["require","esui/Control","esui/lib","esui/painters","inf-i18n","underscore","esui"],function(require){function e(e){t.call(this,e),this.uploader}var t=require("esui/Control"),i=require("esui/lib"),n=require("esui/painters"),r=require("inf-i18n"),a=require("underscore");return i.inherits(e,t),e.prototype.childTemplate=['<figure class="${childClass}" id="${childId}" title="${name}">',"<p>",'<img src="${image}" class="${imageClass}" id="${imageId}">','<span><i data-item-id="${itemId}" class="${deleteIconClass}" title="',r("删除")+'">'+r("删除")+"</i></span>","</p>","<figcaption>${name}</figcaption>","</figure>"].join(""),e.prototype.addItem=function(e){var t=document.createElement("div"),n=/^WU_FILE/,r=n.test(e.id||"");t.innerHTML=i.format(this.childTemplate,{childClass:this.helper.getPartClassName("child"),deleteIconClass:this.helper.getPartClassName("delete-icon"),itemId:e.id,childId:this.helper.getId(e.id),imageId:this.helper.getId(e.id+"-image"),imageClass:e.thumbnail?r?"":this.helper.getPartClassName("img-file"):this.helper.getPartClassName("loading-file"),name:e.name,image:e.thumbnail||require.toUrl("inf-ria/ui/img/loading.gif")}),this.main.appendChild(t.firstChild)},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",a.bind(this._removeItem,this))},e.prototype.initOptions=function(e){var t={datasource:[]},i={};a.extend(i,t,e),this.setProperties(i)},e.prototype._removeItem=function(e){var t=e.target;if(i.hasClass(t,this.helper.getPartClassName("delete-icon"))){var n=t.getAttribute("data-item-id");this.fire("delete",{id:n}),i.removeNode(this.helper.getId(n))}},e.prototype.attachTo=function(e){this.uploader=e.getNative(),e.on("fileQueued",this._onFileQueued,this),e.on("uploadProgress",this._onUploadProgress,this),e.on("uploadAccept",this._onUploadAccept,this)},e.prototype._onFileQueued=function(e){var t=e.originalEvent;this.addItem(t.file)},e.prototype._onUploadProgress=function(e){},e.prototype._onUploadAccept=function(e){var t,i=e.originalEvent,n=i.object,r=i.ret,a=this.helper.getPartClassName("img-file"),o=this.helper.getPartClassName("default-file"),s=this.helper.getPartClassName("error-file");if(r&&r.success&&r.result)t=this.helper.getPart(n.file.id+"-image"),this.uploader.makeThumb(n.file,function(e,i){t.src=i?i:require.toUrl("inf-ria/ui/img/defaultfile.png"),t.setAttribute("data-url",r.result||""),t.className=i?a:o});else if(r.message&&r.message.redirect)window.location.href=r.message.redirect;else if(t=this.helper.getPart(n.file.id+"-image"))t.src=require.toUrl("inf-ria/ui/img/error.png"),t.className=s},e.prototype._refreshPreviewItems=function(){var e=this;e.main.innerHTML="",a.each(this.datasource,function(t){e.addItem(t)})},e.prototype.type="FilePreview",e.prototype.repaint=n.createRepaint(t.prototype.repaint,{name:"datasource",paint:function(e,t){e._refreshPreviewItems()}}),require("esui").register(e),e}),define("inf-ria/ui/Dragger",["require","underscore","esui/lib","esui/painters","esui/InputControl","esui/controlHelper","esui/TextBox","esui"],function(require){function e(e){d.apply(this,arguments)}function t(e){var t=e.isVertical?"_VERTI":"_HORI",i=C.format(g,{rulingDire:E["RULING"+t]}),n=C.format(m,{content:e.min,ctrlBarDire:E["CONTROL_BAR"+t],css:e.isVertical?"bottom":"left"}),r="",a=parseInt(e.showStep,10);if(a&&!isNaN(a)&&a>0)for(var o=e.length/((e.max-e.min)/a),s=e.min+a,l=1;s<e.max;)r+=C.format(p,{middle:s,middleStyle:e.isVertical?"bottom:"+l*o+"px":"left:"+(l*o-5)+"px"}),s+=a,l++;else r=C.format(p,{middle:Math.floor((e.min+e.max)/2)+e.unit,middleStyle:(e.isVertical?"top: "+(e.length/2-10):"left: "+(e.length/2-8))+"px;"});var u=C.format(F,{barDire:E["BAR"+t],barSelDire:E["BAR_SEL"+t],w:e.isVertical?"":e.length+"px",h:e.isVertical?e.length+"px":"",barLeftDire:E["BAR_"+(e.isVertical?"BOTTOM":"LEFT")],barRightDire:E["BAR_"+(e.isVertical?"TOP":"RIGHT")],ruling:i,min:e.min+e.unit,max:e.max+e.unit,middleContent:r}),A=C.format(H,{inputId:e.helper.getId("input"),placeholder:e.min+e.unit,extraClass:h+"-"+e.id});return C.format(I,{ctrlBar:n,bar:u,inputValue:A,icon:e.opMode?C.format(G,{op:e.opMode}):""})}function i(e){var t=Math.floor(e/this.step),i=e%this.step;if(0!==i)e=t*this.step;return e}function n(e,t){var n=e.target||e.srcElement||{nodeName:"div"},r=C.dom.first(this.main),s=C.dom.next(r),l=C.dom.first(s),u="number"==typeof t;if(u&&this.isVertical)C.addClass(n,E.BAR_VERTI);r.style["-moz-transition"]=v,r.style["-webkit-transition"]=v,r.style.transition=v,l.style["-moz-transition"]=v,l.style["-webkit-transition"]=v,l.style.transition=v;var A=null;if("li"===n.nodeName.toLowerCase())if(A=n.title,this.isVertical)r.style.bottom=n.style.bottom,l.style.height=n.style.bottom;else r.style.left=n.style.left,l.style.width=n.style.left;else if(n.className===E.BAR_RIGHT||n.className===E.BAR_RIGHT+"-text")A=this.max,r.style.left=this.length+"px",l.style.width=this.length+"px";else if(n.className===E.BAR_LEFT)A=this.min,r.style.left="0",l.style.width="0";else if(n.className===E.BAR_BOTTOM)A=this.min,r.style.bottom="0",s.firstChild.style.height="0";else if(n.className===E.BAR_TOP)A=this.max,r.style.bottom=this.length+"px",l.style.height=this.length+"px";else if("ui-dragger-bar-middle"===n.className)A=Math.floor((this.min+this.max)/2),r.style.left=this.length/2+"px",l.style.width=this.length/2+"px";else if(this.isVertical){var B=e.offsetY||e.layerY,c=C.hasClass(n,E.BAR_VERTI)?this.length-B:parseInt(l.style.height,10)-B;A=u?t:Math.round(c/this.length*(this.max-this.min)+this.min);var D=(A-this.min)/(this.max-this.min)*this.length;r.style.bottom=D+"px",l.style.height=D+"px"}else{var d=e.offsetX||e.layerX;A=u?t:Math.round(d/this.length*(this.max-this.min)+this.min);var h=(A-this.min)/(this.max-this.min)*this.length;r.style.left=h+"px",l.style.width=h+"px"}r.innerHTML=A,r.title=A,A=i.call(this,A),this.changeValue(A,{causedByEvent:!u});var r=C.dom.first(this.main),s=C.dom.next(r),l=C.dom.first(s);f.removeDOMEvent(this,document,"mousemove",a),f.removeDOMEvent(this,document,"mouseup",o),delete this.tempState;var p=(A-this.min)/(this.max-this.min)*this.length;if(this.isVertical)r.style.bottom=p+"px",l.style.height=p+"px";else r.style.left=p+"px",l.style.width=p+"px";this.changeValue(parseInt(A,10),{causedByEvent:!0}),this.showTip(A)}function r(e){var t=e.target||e.srcElement,i=C.dom.first(this.main),n=C.dom.next(i),r=C.dom.first(n);if("div"===t.nodeName.toLowerCase())if(t.className===E.BAR_RIGHT||t.className===E.BAR_TOP)n.title=this.max;else if(t.className===E.BAR_LEFT||t.className===E.BAR_BOTTOM)n.title=this.min;else if(this.isVertical){var a=e.offsetY||e.layerY,o=C.hasClass(t,E.BAR_VERTI)?this.length-a:parseInt(r.style.height,10)-a;n.title=""+Math.round(o/this.length*(this.max-this.min)+this.min)}else{var s=e.offsetX||e.layerX;n.title=""+Math.round(s/this.length*(this.max-this.min)+this.min)}}function a(e){var t=C.dom.first(this.main),n=C.dom.next(t),r=C.dom.first(n);t.style["-moz-transition"]=y,t.style["-webkit-transition"]=y,t.style.transition=y,r.style["-moz-transition"]=y,r.style["-webkit-transition"]=y,r.style.transition=y;var a=null,o=null;if(this.isVertical){o=this.tempState.y-e.clientY;
var s=this.tempState.bottom+o;if(0>s)s=0;else if(s>this.length)s=this.length;t.style.bottom=s+"px",r.style.height=s+"px",a=Math.round(s/this.length*(this.max-this.min)+this.min)}else{o=e.clientX-this.tempState.x;var l=this.tempState.left+o;if(0>l)l=0;else if(l>this.length)l=this.length;t.style.left=l+"px",r.style.width=l+"px",a=Math.round(l/this.length*(this.max-this.min)+this.min)}a=i.call(this,a),t.innerHTML=a,t.title=a,this.getChild("input").setValue(a),this.showTip(a)}function o(e){var t=C.dom.first(this.main),i=C.dom.next(t),n=C.dom.first(i);f.removeDOMEvent(this,document,"mousemove",a),f.removeDOMEvent(this,document,"mouseup",o),delete this.tempState;var r=t.innerHTML,s=(r-this.min)/(this.max-this.min)*this.length;if(this.isVertical)t.style.bottom=s+"px",n.style.height=s+"px";else t.style.left=s+"px",n.style.width=s+"px";this.changeValue(parseInt(r,10),{causedByEvent:!0})}function s(e){var t=C.dom.first(this.main);this.tempState={x:e.clientX,y:e.clientY,left:parseFloat(t.style.left),bottom:parseFloat(t.style.bottom)},f.addDOMEvent(this,document,"mousemove",a),f.addDOMEvent(this,document,"mouseup",o),e.preventDefault()}function l(){var e=this.getChild("input"),t=e.getValue(),i="("+this.unit+")",n=new RegExp("^[0-9][0-9]*"+i+"{0,1}$");if(n.test(t)){var r=parseInt(t,10);(r<this.min||r>this.max)&&(r=this.currentValue),this.setValue(r)}else if("0"===t)this.setValue(0);else e.setValue(this.currentValue+this.unit)}function u(){this.fire(this.opMode)}function A(){var e=C.dom.first(this.main),t=C.dom.next(e),i=C.dom.first(t),n=C.dom.next(i),r=C.dom.next(n),a=C.dom.next(r);r.innerHTML=Math.floor((this.min+this.max)/2)+this.unit,a.innerHTML=this.max+this.unit}function B(){var e=C.dom.first(this.main),t=C.dom.next(e),i=C.dom.first(t),n=C.dom.next(i),r=C.dom.next(n);n.innerHTML=this.min+this.unit,r.innerHTML=Math.floor((this.min+this.max)/2)+this.unit}var c=require("underscore"),C=require("esui/lib"),D=require("esui/painters"),d=require("esui/InputControl"),f=require("esui/controlHelper");require("esui/TextBox"),e.prototype.type="Dragger";var h="ui-dragger",E={BAR:h+"-bar",CONTROL_BAR:h+"-control-bar",PANEL:h+"-panel",VALUE_INPUT:h+"-value-input",RULING:h+"-ruling",RULING_NUM:h+"-ruling-num",HORI:"-horizontal",VERTI:"-vertical",SEL:"-selected"};E.MAIN_HORI=h+E.HORI,E.MAIN_VERTI=h+E.VERTI,E.BAR_HORI=E.BAR+E.HORI,E.BAR_VERTI=E.BAR+E.VERTI,E.BAR_SEL=E.BAR+E.SEL,E.BAR_LEFT=E.BAR+"-left",E.BAR_RIGHT=E.BAR+"-right",E.BAR_TOP=E.BAR+"-top",E.BAR_BOTTOM=E.BAR+"-bottom",E.BAR_SEL_HORI=E.BAR_SEL+E.HORI,E.BAR_SEL_VERTI=E.BAR_SEL+E.VERTI,E.CONTROL_BAR_HORI=E.CONTROL_BAR+E.HORI,E.CONTROL_BAR_VERTI=E.CONTROL_BAR+E.VERTI,E.PANEL_HORI=E.PANEL+E.HORI,E.RULING_HORI=E.RULING+E.HORI,E.RULING_VERTI=E.RULING+E.VERTI,E.RULING_NUM_HORI=E.RULING_NUM+E.HORI,E.RULING_NUM_VERTI=E.RULING_NUM+E.VERTI;var p='<div class="ui-dragger-bar-middle" style="${middleStyle}">${middle}</div>',F=['<div class="'+E.BAR+' ${barDire}" style="width:${w};height:${h}">','<div class="'+E.BAR_SEL+' ${barSelDire}"></div>','<div class="${barLeftDire}">${min}</div>',"${middleContent}",'<div class="${barRightDire}"><span class="${barRightDire}-text">${max}</span></div>',"${ruling}","</div>"].join(""),m=['<div title="${content}" class="'+E.CONTROL_BAR+' ${ctrlBarDire}"',' style="${css}:0;text-indent:-1000em">${content}</div>'].join(""),g=['<div class="'+E.RULING+'-box">','<div class="'+E.RULING+' ${rulingDire}"></div>',"</div>"].join(""),H=['<input type="text" class="${extraClass}" data-ui-id="${inputId}" ','data-ui-child-name="input" ','data-ui-type="TextBox" data-ui-width="60" ','data-ui-placeholder="${placeholder}"  />'].join(""),G='<div class="ui-dragger-icon ui-dragger-icon-${op}"></div>',I='${ctrlBar}${bar}${inputValue}<div class="ui-dragger-bar-tip"></div>${icon}';e.prototype.initStructure=function(){this.main.innerHTML=t(this),C.addClass(this.main,E[true?"_VERTI":"_HORI"]),this.main.style[this.isVertical?"height":"width"]=this.length+"px",this.initChildren(this.main)},e.prototype.initOptions=function(e){var t={min:0,max:4,unit:"",opMode:"",isVertical:0,step:1};c.extend(t,e),t.min=parseInt(t.min,10),t.max=parseInt(t.max,10),t.currentValue=t.currentValue||t.min,this.setProperties(t)};var v="all 0.2s ease-out",y="all 0s ease-out";return e.prototype.changeValue=function(e,t){var i=this.currentValue;if(e!==i)this.currentValue=e,this.getChild("input").setValue(e+this.unit),this.fire("change",{old:i,now:e,causedByEvent:t&&t.causedByEvent});else this.getChild("input").setValue(e+this.unit)},e.prototype.showTip=function(e){var t=C.dom.first(this.main),i=C.dom.next(t),n=C.dom.next(i),r=C.dom.next(n);if(e>0){r.innerHTML=e+this.unit;var a=t.style.left;r.style.left=parseInt(a,10)-90+"px",r.style.display="inline-block"}else r.style.display="none"},e.prototype.initEvents=function(){var e=C.dom.first(this.main),t=C.dom.next(e);f.addDOMEvent(this,t,"click",n),f.addDOMEvent(this,t,"mouseover",r),f.addDOMEvent(this,t,"mousemove",r),f.addDOMEvent(this,e,"mousedown",s),this.getChild("input").on("blur",l,this),this.getChild("input").on("keypress",function(e){if(13===e.keyCode)return e.stopPropagation(),e.preventDefault(),l.call(this),!1;else return void 0},this);var i=C.dom.next(C.dom.next(C.dom.next(t)));if(i)f.addDOMEvent(this,i,"click",u);this.on("maxValueChanged",function(){A.call(this)}),this.on("minValueChanged",function(){B.call(this)})},e.prototype.setValue=function(e){if("number"==typeof e&&e>=this.min&&e<=this.max)n.call(this,{},e);else this.getChild("input").setValue(this.currentValue)},e.prototype.getValue=function(){return this.currentValue},e.prototype.getRawValue=e.prototype.getValue,e.prototype.getRawValueProperty=e.prototype.getValue,e.prototype.setProperties=function(e){var t=d.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("min"))this.fire("minValueChanged");if(t.hasOwnProperty("max"))this.fire("maxValueChanged")},e.prototype.repaint=D.createRepaint(d.prototype.repaint,{name:["rawValue"],paint:function(e,t){if("number"==typeof t&&!isNaN(t))e.setValue(t)}}),C.inherits(e,d),require("esui").register(e),e}),define("inf-ria/ui/ConfigPanel",["require","underscore","esui/lib","esui/painters","esui/Control","esui/controlHelper","esui"],function(require){function e(e){o.apply(this,arguments)}function t(e){for(var t=[],i=0;i<e.datasource.length;++i){for(var n=e.datasource[i],a=[r.format(u,{title:n.name})],o=0;o<n.children.length;++o)a.push(r.format(A,{extra:e.parentIndex===i&&e.currentIndex===o?C:"",parentIndex:i,index:o,name:n.children[o].name}));t.push(r.format(l,{extra:e.parentIndex===i?c:"",content:a.join("")}))}if(e.defaultText)t.push(r.format(B,{extra:e.parentIndex<0?c:"",defaultText:e.defaultText}));return t.join("")}function i(e){var t=e.target||e.srcElement;if("a"===t.nodeName.toLowerCase()){var i=parseInt(r.getAttribute(t,"data-index"),10),n=parseInt(r.getAttribute(t,"data-parent"),10);this.setProperties({currentIndex:i,parentIndex:n}),this.fire("change",{item:this.datasource[n].children[i]})}}var n=require("underscore"),r=require("esui/lib"),a=require("esui/painters"),o=require("esui/Control"),s=require("esui/controlHelper");e.prototype.type="ConfigPanel";var l='<div class="config1 ${extra}">${content}</div>',u='<div class="config-title">${title}</div>',A='<a class="config2 ${extra}" data-index="${index}" data-parent="${parentIndex}">${name}</a>',B='<div class="config1 config-title config1-custom ${extra}">${defaultText}</div>',c="config1-selected",C="config2-selected";return e.prototype.initStructure=function(){this.main.innerHTML=t(this),this.initChildren(this.main)},e.prototype.initOptions=function(e){var t={currentIndex:-1,parentIndex:-1};n.extend(t,e),this.setProperties(t)},e.prototype.initEvents=function(){s.addDOMEvent(this,this.main,"click",i)},e.prototype.repaint=a.createRepaint(o.prototype.repaint,{name:["datasource","currentIndex","parentIndex"],paint:function(e){e.main.innerHTML=t(e)}}),r.inherits(e,o),require("esui").register(e),e}),define("inf-ria/ui/BuyBucket",["require","esui/lib","esui/Control","inf-i18n","underscore","etpl","esui/painters","esui"],function(require){function e(e){n.call(this,e)}function t(e){var t=e.getBoundingClientRect(),i=document.documentElement.clientTop,n=document.documentElement.clientLeft;return{top:t.top-i,bottom:t.bottom-i,left:t.left-n,right:t.right-n}}var i=require("esui/lib"),n=require("esui/Control"),r=require("inf-i18n"),a=require("underscore"),o=require("etpl");e.prototype.type="BuyBucket";var s=['<div class="${prefix}-title">',"<span>"+r("所选配置")+"</span>",'<button data-ui="childName:resetBtn;type:Button;skin:stringfy;">'+r("清空配置")+"</button>","</div>",'<div class="${prefix}-body">',"</div>",'<div class="${prefix}-bottom ${prefix}-previous-${needPreBtn}">',"<!-- if: ${needPreBtn} -->",'<button data-ui="childName:preBtn;type:Button;">'+r("上一步")+"</button>","<!-- /if -->",'<button data-ui="childName:confirmBtn;type:Button" ','<!-- if:${confirmBtn.group} -->data-ui-group="${confirmBtn.group}"<!-- /if --> ','<!-- if:${confirmBtn.auth} -->data-auth="${confirmBtn.auth}" data-authtype="${confirmBtn.authtype}"<!-- /if --> ','class="${confirmBtn.skin}">${confirmBtn.text}</button>',"</div>"],l=['<div class="${prefix}-body-item<!-- if: ${hidden} --> ${prefix}-hidden<!-- /if -->">','<label class="${prefix}-body-title">',"${title}","</label>",'<div class="${prefix}-body-content">${content | raw}</div>',"</div>"],u=['<div class="${prefix}-product-link">','<span><span class="color-999">'+r("按需付费")+"</span>"+r("产品在开通后按照实际产生的账单从账户余额扣款")+"</span>",'<a href="${productLink}">'+r("定价和收费说明")+"&gt;&gt;</a>","</div>"];return e.prototype.initStructure=function(){var e=o.compile(s.join("")),t=o.compile(u.join("")),i=this.get("confirmBtn"),n=this.get("productLink"),r=this.get("needPreBtn"),a=e({prefix:this.helper.getPrimaryClassName(),needPreBtn:r,confirmBtn:i});if(n)a+=t({prefix:this.helper.getPrimaryClassName(),productLink:n});this.main.innerHTML=a,this.initChildren(this.main)},e.prototype.initOptions=function(e){var t={fields:[],offsetTop:0,disabled:!1,confirmBtn:{text:r("立即购买"),skin:"confirm-button"},productLink:null,needPreBtn:!1};a.extend(t,e),a.extend(t.confirmBtn,e.confirmBtnExtra),this.setProperties(t)},e.prototype.setRawValue=function(e){var t=this.main.getElementsByClassName(this.helper.getPartClassName("body"))[0],i=o.compile(l.join("")),n=this.get("fields"),r=this,s=a.reduce(n,function(t,n){var o="-";if(a.isFunction(n.content))o=n.content.call(r,e,n)||o;else if(a.isString(n.content)&&e.hasOwnProperty(n.content))o=e[n.content]||o;else o=n.content||o;return t.push(i({title:n.title,content:o,hidden:n.hidden,prefix:r.helper.getPrimaryClassName()})),t},[]);t.innerHTML=s.join("")},e.prototype.setValue=e.prototype.setRawValue,e.prototype.adjustScroll=function(){var e=t(this.main),i=this.get("offsetTop"),n=parseInt(this.get("fixedTop"),10)||70;if(t(document.body).top<=-this.main.top+n){var r=document.documentElement.clientWidth;if("fixed"!==this.main.style.position)this.main.style.top=n+"px",this.main.style.right=r-e.right+"px",this.main.style.position="fixed"}else if("fixed"===this.main.style.position)this.main.style.top=i+"px",this.main.style.right="",this.main.style.position=""},e.prototype.dispose=function(){i.un(window,"scroll",this.scrollHandler),n.prototype.dispose.apply(this,arguments)},e.prototype.initEvents=function(){if(this.scrollHandler=a.bind(this.adjustScroll,this),i.on(window,"scroll",this.scrollHandler),this.getChild("resetBtn").on("click",a.bind(this.fire,this,"reset")),this.getChild("confirmBtn").on("click",a.bind(this.fire,this,"confirm")),this.get("needPreBtn"))this.getChild("preBtn").on("click",a.bind(this.fire,this,"previous"))},e.prototype.disableConfirm=function(){this.getChild("confirmBtn").addState("disabled")},e.prototype.enableConfirm=function(){this.getChild("confirmBtn").removeState("disabled")},e.prototype.repaint=require("esui/painters").createRepaint(n.prototype.repaint,{name:"value",paint:function(e,t){t&&e.setRawValue(t)}},{name:"disabled",paint:function(e,t){var i=e.getChild("preBtn");if(t)i&&i.addState("disabled"),e.getChild("confirmBtn").addState("disabled");else i&&i.removeState("disabled"),e.getChild("confirmBtn").removeState("disabled")}},{name:"offsetTop",paint:function(e,i){if(i>0)e.main.style.top=i+"px";e.main.top=t(e.main).top-t(document.body).top}}),i.inherits(e,n),require("esui").register(e),e}),define("inf-ria/ui/BucketSelect",["require","esui/TextBox","inf-i18n","underscore","esui/lib","esui/InputControl","esui/Layer","er/Deferred","esui/painters","esui"],function(require){function e(){B.apply(this,arguments)}function t(e,t){for(;e&&e!==t&&!u.hasAttribute(e,"data-type");)e=e.parentNode;return e}function i(e){var i=u.event.getTarget(e),n=this.layer.getElement();if(i=t(i,n)){var r=i.getAttribute("data-type");if("back"===r||"folder"===r||"bucket"===r)this.set("_marker",""),this.set("_end",!1);var a=i.getAttribute("data-value"),o="";if(!a)return this.layer.hide(),!1;var s=this.getChild("input");if("bucket"===r)this.set("_bucket",a+"/");if("folder"===r)this.set("_file",""),this.layer.setPrefix(a),o=this.layer.getPrefix();if("file"===r&&!u.hasClass(i,"selected")){o=this.layer.getPrefix(),l.each(u.getChildren(n),function(e,t){u.hasClass("selected")&&u.removeClass(e,"selected")}),u.addClass(i,"selected");var A=this.getValue().replace(RegExp("/"+this.get("_file")+"$"),"");return s.setValue(A+(/\/$/.test(A)?"":"/")+a),this.set("_file",a),this.layer.hide(),this.fire("click",{selectType:r,fileItem:l.find(this.get("fileDatasource"),function(e){return e.name===o+a})}),!1}if("file"===r&&u.hasClass(i,"selected"))return!1;if("back"===r)if(this.get("_file"))this.set("_file",""),o=this.layer.getPrefix();else{if(0===this.get("_prefix").length)return s.setValue(this.urlPrefix),this.set("_bucket",""),this.layer.render(n),this.fire("click",{selectType:r}),!1;this.get("_prefix").pop(),o=this.layer.getPrefix()}if("more"===r)o=this.layer.getPrefix()+this.get("_file");if("create"===r)return this.fire("create"),this.layer.hide(),!1;s.setValue(this.urlPrefix+this.get("_bucket").replace(/\//g,"")+"/"+o),this.fire("click",this)}}function n(e){var t=u.event.getTarget(e);if(/\/$/.test(this.get("_bucket"))&&t.scrollTop+t.clientHeight>=t.scrollHeight)if(!this.get("_end"))this.fire("click",this)}function r(t){A.apply(this,arguments),this.layer=new e(this)}function a(e,t){var i=e||"";return i=i.replace(t,"")}function o(e,t){e=e||"";var i={_bucket:"",_prefix:[],_file:"",urlPrefix:t};e=e.replace(/\s/g,"");var n=e.split("://");if(n.length>1)i.urlPrefix=n[0]+"://";var r=a(e,t),o=r.split("/");if(o.length>0){if(i._bucket=o[0],o.length>1)i._bucket+="/";for(var s=1;s<o.length-1;s++){for(var l="",u=1;s>=u;u++)l+=o[u]+"/";i._prefix.push(l)}if(o.length>1&&o[o.length-1])i._file=o[o.length-1]}return i}require("esui/TextBox");var s=require("inf-i18n"),l=require("underscore"),u=require("esui/lib"),A=require("esui/InputControl"),B=require("esui/Layer"),c=require("er/Deferred"),C=['<li class="ui-bucket-select-item ${type}" ','data-type="${type}" data-value="${name}" title="${name}">${name}</li>'].join(""),D=['<input data-ui-type="TextBox" data-ui-id="${inputId}" ','data-ui-child-name="input" ','data-ui-value="${value}" ','data-ui-width="${width}" data-ui-height="${height}" ','data-ui-placeholder="${placeholder}" ',"/>"].join("");return e.prototype.nodeName="ol",e.prototype.render=function(e){var t=u.format(C,{name:s("+新建bucket"),type:"create"});e.innerHTML="<ol></ol>"+t,this.control.fire("render",this.control)},e.prototype.renderBucket=function(e){var t="",i=this.getElement(),n=u.dom.first(i);l.each(e,function(e,i){t+=u.format(C,{name:l.escape(e.name),type:"bucket"})}),n.innerHTML=t},e.prototype.getPrefix=function(){var e=this.control.get("_prefix");return e.length>0?e[e.length-1]:""},e.prototype.setPrefix=function(e){var t=this.control.get("_prefix");t.push(t.length>0?t[t.length-1]+e:e)},e.prototype.setLayerContent=function(e,t,i){var n=u.dom.first(e);if(""===l.trim(this.control.get("_marker"))){var r=u.format(C,{name:"../",type:"back"});n.innerHTML=r+t}else{var a=u.dom.last(n);u.removeNode(a),n.innerHTML=n.innerHTML+t}if(i!==!1)if(t){var o=u.format(C,{name:s("加载更多"),type:"more"});n=u.dom.first(e),n.innerHTML=n.innerHTML+o}},e.prototype.renderFolder=function(e){var t="",i=this.getElement(),n=this.getPrefix();if(e.folders&&e.folders.length>0)l.each(e.folders,function(e,i){t+=u.format(C,{name:l.escape(e.substring(n.length)),type:"folder"})});else this.control.set("_end",!0);this.setLayerContent(i,t,e.isTruncated),this.control.set("_marker",e.marker)},e.prototype.renderFile=function(e){var t="",i=this.getElement(),n=this.getPrefix();if(e.objects&&e.objects.length>0){var r="";l.each(e.objects,function(e,i){r=!n||/\/$/.test(n)?e.name.substring(n.length):e.name,t+=u.format(C,{name:l.escape(r),type:l.indexOf(r,"/")>-1?"folder":"file"})}),this.control.set("fileDatasource",e.objects)}else this.control.set("_end",!0);this.setLayerContent(i,t),this.control.set("_marker",e.marker)},e.prototype.dock={strictWidth:!0},e.prototype.initBehavior=function(e){this.control.helper.addDOMEvent(e,"click",i);var t=u.dom.first(e);this.control.helper.addDOMEvent(t,"scroll",n)},u.inherits(e,B),r.prototype.initOptions=function(e){var t={height:28,placeholder:e.placeholder||"",viewtype:e.viewtype||"folder",urlPrefix:l.isNull(e.urlPrefix)&&l.isUndefined(e.urlPrefix)?e.urlPrefix:"bos://"};if(e.width)e.width=parseFloat(e.width)-32;var i={_marker:"",_bucket:"",_prefix:[],_end:!1,_loading:!1,_file:""},n={};if(e.value)n=o(e.value,t.urlPrefix);l.extend(i,t,e,n),this.setProperties(i)},r.prototype.initStructure=function(){if(u.isInput(this.main)){var e=this.helper.replaceMain();if(u.removeAttribute(this.main,"tabindex"),this.inputId=e.id||this.helper.getId("input"),this.main.id)this.main.id=this.helper.getId()}else this.inputId=this.helper.getId("input");this.main.innerHTML=u.format(D,{inputId:this.get("inputId"),width:this.get("width"),height:this.get("height"),placeholder:this.get("placeholder"),value:this.get("rawValue")}),this.initChildren(this.main)},r.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",l.bind(this.layer.toggle,this.layer));var e=this.getChild("input");e.on("input",l.bind(function(){this.fire("input")},this)),e.on("blur",l.bind(function(){this.fire("blur")},this)),e.on("focus",l.bind(function(){this.fire("focus")},this))},r.prototype.getValue=function(){var e=this.getChild("input"),t="";if(e)t=e.getValue();return t},r.prototype.getRawValue=function(){var e=this.getChild("input"),t="";if(e)t=e.getRawValue();return u.trim(t)},r.prototype.getBucketName=function(){return this.get("_bucket").replace("/","")},r.prototype.getPrefix=function(){return this.layer.getPrefix()},r.prototype.getMarker=function(){return this.get("_marker")},r.prototype.setValue=function(e){var t=this.getChild("input");t.setValue(e),this.setProperties({value:e})},r.prototype.repaint=require("esui/painters").createRepaint(A.prototype.repaint,{name:"rawValue",paint:function(e,t){var i=o(t||"",e.get("urlPrefix")),n=!1;if(i.urlPrefix!==e.get("urlPrefix"))e.set("urlPrefix",i.urlPrefix);if(i._bucket!==e.get("_bucket"))n=!0,e.set("_bucket",i._bucket);if(i._prefix.join("")!==e.get("_prefix").join(""))n=!0,e.set("_prefix",i._prefix);if(i._file!==e.get("_file")&&"file"===e.get("viewtype"))n=!0,e.set("_file",i._file);if(n)e.set("_marker",""),e.fire("render");e.getChild("input").setValue(t)}},{name:"_loading",paint:function(e,t){var i=u.getChildren(e.layer.getElement())[0];if(t)u.addClass(i,"ui-bucketselect-layer-loading");else u.removeClass(i,"ui-bucketselect-layer-loading")}},{name:"disabled",paint:function(e,t){if(t)e.layer.hide();var i=u.g(e.getChild("input").inputId);i.disabled=t}}),r.prototype.getBucketList=function(){return c.resolved([])},r.prototype.getFolderList=function(){return c.resolved([])},r.prototype.getObjectList=function(){return c.resolved([])},r.prototype.createBucket=function(){return c.resolved([])},r.prototype.getBucketLocations=function(){return c.resolved([])},r.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){var e=this.getChild("input");if(e)e.dispose();if(this.layer)this.layer.dispose(),this.layer=null;A.prototype.dispose.apply(this,arguments)}},r.prototype.getFocusTarget=function(){var e=this.getChild("input");if(e)return e.getFocusTarget();else return void 0},r.prototype.type="BucketSelect",u.inherits(r,A),require("esui").register(r),r}),define("jquery/jquery",["require"],function(require){function e(e){var t=e.length,i=oe.type(e);if(oe.isWindow(e))return!1;if(1===e.nodeType&&t)return!0;else return"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function t(e){var t=me[e]={};return oe.each(e.match(le)||[],function(e,i){t[i]=!0}),t}function i(e,t,i,n){if(oe.acceptData(e)){var r,a,o=oe.expando,s="string"==typeof t,l=e.nodeType,u=l?oe.cache:e,A=l?e[o]:e[o]&&o;if(A&&u[A]&&(n||u[A].data)||!s||void 0!==i){if(!A)if(l)e[o]=A=Z.pop()||oe.guid++;else A=o;if(!u[A])if(u[A]={},!l)u[A].toJSON=oe.noop;if("object"==typeof t||"function"==typeof t)if(n)u[A]=oe.extend(u[A],t);else u[A].data=oe.extend(u[A].data,t);if(r=u[A],!n){if(!r.data)r.data={};r=r.data}if(void 0!==i)r[oe.camelCase(t)]=i;if(s){if(a=r[t],null==a)a=r[oe.camelCase(t)]}else a=r;return a}}}function n(e,t,i){if(oe.acceptData(e)){var n,r,o,s=e.nodeType,l=s?oe.cache:e,u=s?e[oe.expando]:oe.expando;if(l[u]){if(t)if(o=i?l[u]:l[u].data){if(!oe.isArray(t))if(t in o)t=[t];else if(t=oe.camelCase(t),t in o)t=[t];else t=t.split(" ");else t=t.concat(oe.map(t,oe.camelCase));for(n=0,r=t.length;r>n;n++)delete o[t[n]];if(!(i?a:oe.isEmptyObject)(o))return}if(!i)if(delete l[u].data,!a(l[u]))return;if(s)oe.cleanData([e],!0);else if(oe.support.deleteExpando||l!=l.window)delete l[u];else l[u]=null}}}function r(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(He,"-$1").toLowerCase();if(i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ge.test(i)?oe.parseJSON(i):i}catch(r){}oe.data(e,t,i)}else i=void 0}return i}function a(e){var t;for(t in e)if("data"!==t||!oe.isEmptyObject(e[t])){if("toJSON"!==t)return!1}else;return!0}function o(){return!0}function s(){return!1}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function u(e,t,i){if(t=t||0,oe.isFunction(t))return oe.grep(e,function(e,n){var r=!!t.call(e,n,e);return r===i});else if(t.nodeType)return oe.grep(e,function(e){return e===t===i});else if("string"==typeof t){var n=oe.grep(e,function(e){return 1===e.nodeType});if(Re.test(t))return oe.filter(t,n,!i);else t=oe.filter(t,n)}return oe.grep(e,function(e){return oe.inArray(e,t)>=0===i})}function A(e){var t=Ve.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function B(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function c(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function C(e){var t=it.exec(e.type);if(t)e.type=t[1];else e.removeAttribute("type");return e}function D(e,t){for(var i,n=0;null!=(i=e[n]);n++)oe._data(i,"globalEval",!t||oe._data(t[n],"globalEval"))}function d(e,t){if(1===t.nodeType&&oe.hasData(e)){var i,n,r,a=oe._data(e),o=oe._data(t,a),s=a.events;if(s){delete o.handle,o.events={};for(i in s)for(n=0,r=s[i].length;r>n;n++)oe.event.add(t,i,s[i][n])}if(o.data)o.data=oe.extend({},o.data)}}function f(e,t){var i,n,r;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!oe.support.noCloneEvent&&t[oe.expando]){r=oe._data(t);for(n in r.events)oe.removeEvent(t,n,r.handle);t.removeAttribute(oe.expando)}if("script"===i&&t.text!==e.text)c(t).text=e.text,C(t);else if("object"===i){if(t.parentNode)t.outerHTML=e.outerHTML;if(oe.support.html5Clone&&e.innerHTML&&!oe.trim(t.innerHTML))t.innerHTML=e.innerHTML}else if("input"===i&&$e.test(e.type)){if(t.defaultChecked=t.checked=e.checked,t.value!==e.value)t.value=e.value}else if("option"===i)t.defaultSelected=t.selected=e.defaultSelected;else if("input"===i||"textarea"===i)t.defaultValue=e.defaultValue}}function h(e,t){var i,n,r=0,a=typeof e.getElementsByTagName!==U?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==U?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],i=e.childNodes||e;null!=(n=i[r]);r++)if(!t||oe.nodeName(n,t))a.push(n);else oe.merge(a,h(n,t));return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],a):a}function E(e){if($e.test(e.type))e.defaultChecked=e.checked}function p(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,r=gt.length;r--;)if(t=gt[r]+i,t in e)return t;return n}function F(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)}function m(e,t){for(var i,n,r,a=[],o=0,s=e.length;s>o;o++)if(n=e[o],n.style){if(a[o]=oe._data(n,"olddisplay"),i=n.style.display,t){if(!a[o]&&"none"===i)n.style.display="";if(""===n.style.display&&F(n))a[o]=oe._data(n,"olddisplay",I(n.nodeName))}else if(!a[o])if(r=F(n),i&&"none"!==i||!r)oe._data(n,"olddisplay",r?i:oe.css(n,"display"))}else;for(o=0;s>o;o++)if(n=e[o],n.style){if(!t||"none"===n.style.display||""===n.style.display)n.style.display=t?a[o]||"":"none"}else;return e}function g(e,t,i){var n=dt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function H(e,t,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2){if("margin"===i)o+=oe.css(e,i+mt[a],!0,r);if(n){if("content"===i)o-=oe.css(e,"padding"+mt[a],!0,r);if("margin"!==i)o-=oe.css(e,"border"+mt[a]+"Width",!0,r)}else if(o+=oe.css(e,"padding"+mt[a],!0,r),"padding"!==i)o+=oe.css(e,"border"+mt[a]+"Width",!0,r)}return o}function G(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=lt(e),o=oe.support.boxSizing&&"border-box"===oe.css(e,"boxSizing",!1,a);if(0>=r||null==r){if(r=ut(e,t,a),0>r||null==r)r=e.style[t];if(ft.test(r))return r;n=o&&(oe.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+H(e,t,i||(o?"border":"content"),n,a)+"px"}function I(e){var t=W,i=Et[e];if(!i){if(i=v(e,t),"none"===i||!i)st=(st||oe("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(st[0].contentWindow||st[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=v(e,t),st.detach();Et[e]=i}return i}function v(e,t){var i=oe(t.createElement(e)).appendTo(t.body),n=oe.css(i[0],"display");return i.remove(),n}function y(e,t,i,n){var r;if(oe.isArray(t))oe.each(t,function(t,r){if(i||Gt.test(e))n(e,r);else y(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(!i&&"object"===oe.type(t))for(r in t)y(e+"["+r+"]",t[r],i,n);else n(e,t)}function J(e){return function(t,i){if("string"!=typeof t)i=t,t="*";var n,r=0,a=t.toLowerCase().match(le)||[];if(oe.isFunction(i))for(;n=a[r++];)if("+"===n[0])n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i);else(e[n]=e[n]||[]).push(i)}}function L(e,t,i,n){function r(s){var l;return a[s]=!0,oe.each(e[s]||[],function(e,s){var u=s(t,i,n);if("string"==typeof u&&!o&&!a[u])return t.dataTypes.unshift(u),r(u),!1;else if(o)return!(l=u)}),l}var a={},o=e===Rt;return r(t.dataTypes[0])||!a["*"]&&r("*")}function M(e,t){var i,n,r=oe.ajaxSettings.flatOptions||{};for(n in t)if(void 0!==t[n])(r[n]?e:i||(i={}))[n]=t[n];if(i)oe.extend(!0,e,i);return e}function b(e,t,i){var n,r,a,o,s=e.contents,l=e.dataTypes,u=e.responseFields;for(o in u)if(o in i)t[u[o]]=i[o];for(;"*"===l[0];)if(l.shift(),void 0===r)r=e.mimeType||t.getResponseHeader("Content-Type");if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}if(!n)n=o}a=a||n}if(a){if(a!==l[0])l.unshift(a);return i[a]}}function N(e,t){var i,n,r,a,o={},s=0,l=e.dataTypes.slice(),u=l[0];if(e.dataFilter)t=e.dataFilter(t,e.dataType);if(l[1])for(r in e.converters)o[r.toLowerCase()]=e.converters[r];for(;n=l[++s];)if("*"!==n){if("*"!==u&&u!==n){if(r=o[u+" "+n]||o["* "+n],!r)for(i in o)if(a=i.split(" "),a[1]===n)if(r=o[u+" "+a[0]]||o["* "+a[0]]){if(r===!0)r=o[i];else if(o[i]!==!0)n=a[0],l.splice(s--,0,n);break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(A){return{state:"parsererror",error:r?A:"No conversion from "+u+" to "+n}}}u=n}return{state:"success",data:t}}function K(){try{return new window.XMLHttpRequest}catch(e){}}function x(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function P(){return setTimeout(function(){jt=void 0}),jt=oe.now()}function _(e,t){oe.each(t,function(t,i){for(var n=(ii[t]||[]).concat(ii["*"]),r=0,a=n.length;a>r;r++)if(n[r].call(e,t,i))return})}function O(e,t,i){var n,r,a=0,o=ti.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=jt||P(),i=Math.max(0,u.startTime+u.duration-t),n=i/u.duration||0,a=1-n,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(a);if(s.notifyWith(e,[u,a,i]),1>a&&l)return i;else return s.resolveWith(e,[u]),!1},u=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:jt||P(),duration:i.duration,tweens:[],createTween:function(t,i){var n=oe.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)u.tweens[i].run(1);if(t)s.resolveWith(e,[u,t]);else s.rejectWith(e,[u,t]);return this}}),A=u.props;for(T(A,u.opts.specialEasing);o>a;a++)if(n=ti[a].call(u,e,A,u.opts))return n;if(_(u,A),oe.isFunction(u.opts.start))u.opts.start.call(e,u);return oe.fx.timer(oe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function T(e,t){var i,n,r,a,o;for(r in e){if(n=oe.camelCase(r),a=t[n],i=e[r],oe.isArray(i))a=i[1],i=e[r]=i[0];if(r!==n)e[n]=i,delete e[r];if(o=oe.cssHooks[n],o&&"expand"in o){i=o.expand(i),delete e[n];for(r in i)if(!(r in e))e[r]=i[r],t[r]=a}else t[n]=a}}function S(e,t,i){var n,r,a,o,s,l,u,A,B,c=this,C=e.style,D={},d=[],f=e.nodeType&&F(e);if(!i.queue){if(A=oe._queueHooks(e,"fx"),null==A.unqueued)A.unqueued=0,B=A.empty.fire,A.empty.fire=function(){if(!A.unqueued)B()};A.unqueued++,c.always(function(){c.always(function(){if(A.unqueued--,!oe.queue(e,"fx").length)A.empty.fire()})})}if(1===e.nodeType&&("height"in t||"width"in t))if(i.overflow=[C.overflow,C.overflowX,C.overflowY],"inline"===oe.css(e,"display")&&"none"===oe.css(e,"float"))if(!oe.support.inlineBlockNeedsLayout||"inline"===I(e.nodeName))C.display="inline-block";else C.zoom=1;if(i.overflow)if(C.overflow="hidden",!oe.support.shrinkWrapBlocks)c.always(function(){C.overflow=i.overflow[0],C.overflowX=i.overflow[1],C.overflowY=i.overflow[2]});for(r in t)if(o=t[r],qt.exec(o)){if(delete t[r],l=l||"toggle"===o,o===(f?"hide":"show"))continue;d.push(r)}if(a=d.length){if(s=oe._data(e,"fxshow")||oe._data(e,"fxshow",{}),"hidden"in s)f=s.hidden;if(l)s.hidden=!f;if(f)oe(e).show();else c.done(function(){oe(e).hide()});for(c.done(function(){var t;oe._removeData(e,"fxshow");for(t in D)oe.style(e,t,D[t])}),r=0;a>r;r++)if(n=d[r],u=c.createTween(n,f?s[n]:0),D[n]=s[n]||oe.style(e,n),!(n in s))if(s[n]=u.start,f)u.end=u.start,u.start="width"===n||"height"===n?1:0}}function w(e,t,i,n,r){return new w.prototype.init(e,t,i,n,r)}function R(e,t){var i,n={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i=mt[r],n["margin"+i]=n["padding"+i]=e;if(t)n.opacity=n.width=e;return n}function k(e){return oe.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Q,V,U="undefined",W=window.document,z=window.location,Y=window.jQuery,X=window.$,j={},Z=[],q="1.9.1",$=Z.concat,ee=Z.push,te=Z.slice,ie=Z.indexOf,ne=j.toString,re=j.hasOwnProperty,ae=q.trim,oe=function(e,t){return new oe.fn.init(e,t,V)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,le=/\S+/g,ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ae=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,Be=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ce=/^[\],:{}\s]*$/,Ce=/(?:^|:|,)(?:\s*\[)+/g,De=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,de=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,fe=/^-ms-/,he=/-([\da-z])/gi,Ee=function(e,t){
return t.toUpperCase()},pe=function(e){if(W.addEventListener||"load"===e.type||"complete"===W.readyState)Fe(),oe.ready()},Fe=function(){if(W.addEventListener)W.removeEventListener("DOMContentLoaded",pe,!1),window.removeEventListener("load",pe,!1);else W.detachEvent("onreadystatechange",pe),window.detachEvent("onload",pe)};oe.fn=oe.prototype={jquery:q,constructor:oe,init:function(e,t,i){var n,r;if(!e)return this;if("string"==typeof e){if("<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3)n=[null,e,null];else n=Ae.exec(e);if(n&&(n[1]||!t))if(n[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:W,!0)),Be.test(n[1])&&oe.isPlainObject(t))for(n in t)if(oe.isFunction(this[n]))this[n](t[n]);else this.attr(n,t[n]);return this}else{if(r=W.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return i.find(e);this.length=1,this[0]=r}return this.context=W,this.selector=e,this}else if(!t||t.jquery)return(t||i).find(e);else return this.constructor(t).find(e)}else if(e.nodeType)return this.context=this[0]=e,this.length=1,this;else if(oe.isFunction(e))return i.ready(e);if(void 0!==e.selector)this.selector=e.selector,this.context=e.context;return oe.makeArray(e,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return te.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return oe.each(this,e,t)},ready:function(e){return oe.ready.promise().done(e),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(oe.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ee,sort:[].sort,splice:[].splice},oe.fn.init.prototype=oe.fn,oe.extend=oe.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;if("boolean"==typeof o)u=o,o=arguments[1]||{},s=2;if("object"!=typeof o&&!oe.isFunction(o))o={};if(l===s)o=this,--s;for(;l>s;s++)if(null!=(r=arguments[s]))for(n in r)if(e=o[n],i=r[n],o!==i){if(u&&i&&(oe.isPlainObject(i)||(t=oe.isArray(i)))){if(t)t=!1,a=e&&oe.isArray(e)?e:[];else a=e&&oe.isPlainObject(e)?e:{};o[n]=oe.extend(u,a,i)}else if(void 0!==i)o[n]=i}else;return o},oe.extend({noConflict:function(e){if(window.$===oe)window.$=X;if(e&&window.jQuery===oe)window.jQuery=Y;return oe},isReady:!1,readyWait:1,holdReady:function(e){if(e)oe.readyWait++;else oe.ready(!0)},ready:function(e){if(e===!0?!--oe.readyWait:!oe.isReady){if(!W.body)return setTimeout(oe.ready);if(oe.isReady=!0,!(e!==!0&&--oe.readyWait>0))if(Q.resolveWith(W,[oe]),oe.fn.trigger)oe(W).trigger("ready").off("ready")}},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray||function(e){return"array"===oe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){if(null==e)return String(e);else return"object"==typeof e||"function"==typeof e?j[ne.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;try{if(e.constructor&&!re.call(e,"constructor")&&!re.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var i;for(i in e);return void 0===i||re.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;if("boolean"==typeof t)i=t,t=!1;t=t||W;var n=Be.exec(e),r=!i&&[];if(n)return[t.createElement(n[1])];if(n=oe.buildFragment([e],t,r),r)oe(r).remove();return oe.merge([],n.childNodes)},parseJSON:function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e);if(null===e)return e;if("string"==typeof e)if(e=oe.trim(e))if(ce.test(e.replace(De,"@").replace(de,"]").replace(Ce,"")))return new Function("return "+e)();oe.error("Invalid JSON: "+e)},parseXML:function(e){var t,i;if(!e||"string"!=typeof e)return null;try{if(window.DOMParser)i=new DOMParser,t=i.parseFromString(e,"text/xml");else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(n){t=void 0}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)oe.error("Invalid XML: "+e);return t},noop:function(){},globalEval:function(e){if(e&&oe.trim(e))(window.execScript||function(e){window.eval.call(window,e)})(e)},camelCase:function(e){return e.replace(fe,"ms-").replace(he,Ee)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(t,i,n){var r,a=0,o=t.length,s=e(t);if(n){if(s)for(;o>a&&(r=i.apply(t[a],n),r!==!1);a++);else for(a in t)if(r=i.apply(t[a],n),r===!1)break}else if(s)for(;o>a&&(r=i.call(t[a],a,t[a]),r!==!1);a++);else for(a in t)if(r=i.call(t[a],a,t[a]),r===!1)break;return t},trim:ae&&!ae.call("\ufeff ")?function(e){return null==e?"":ae.call(e)}:function(e){return null==e?"":(e+"").replace(ue,"")},makeArray:function(t,i){var n=i||[];if(null!=t)if(e(Object(t)))oe.merge(n,"string"==typeof t?[t]:t);else ee.call(n,t);return n},inArray:function(e,t,i){var n;if(t){if(ie)return ie.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){var i=t.length,n=e.length,r=0;if("number"==typeof i)for(;i>r;r++)e[n++]=t[r];else for(;void 0!==t[r];)e[n++]=t[r++];return e.length=n,e},grep:function(e,t,i){var n,r=[],a=0,o=e.length;for(i=!!i;o>a;a++)if(n=!!t(e[a],a),i!==n)r.push(e[a]);return r},map:function(t,i,n){var r,a=0,o=t.length,s=e(t),l=[];if(s){for(;o>a;a++)if(r=i(t[a],a,n),null!=r)l[l.length]=r}else for(a in t)if(r=i(t[a],a,n),null!=r)l[l.length]=r;return $.apply([],l)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t)r=e[t],t=e,e=r;if(!oe.isFunction(e))return void 0;else return i=te.call(arguments,2),n=function(){return e.apply(t||this,i.concat(te.call(arguments)))},n.guid=e.guid=e.guid||oe.guid++,n},access:function(e,t,i,n,r,a,o){var s=0,l=e.length,u=null==i;if("object"===oe.type(i)){r=!0;for(s in i)oe.access(e,t,s,i[s],!0,a,o)}else if(void 0!==n){if(r=!0,!oe.isFunction(n))o=!0;if(u)if(o)t.call(e,n),t=null;else u=t,t=function(e,t,i){return u.call(oe(e),i)};if(t)for(;l>s;s++)t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)))}return r?e:u?t.call(e):l?t(e[0],i):a},now:function(){return(new Date).getTime()}}),oe.ready.promise=function(e){if(!Q)if(Q=oe.Deferred(),"complete"===W.readyState)setTimeout(oe.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",pe,!1),window.addEventListener("load",pe,!1);else{W.attachEvent("onreadystatechange",pe),window.attachEvent("onload",pe);var t=!1;try{t=null==window.frameElement&&W.documentElement}catch(i){}if(t&&t.doScroll)!function n(){if(!oe.isReady){try{t.doScroll("left")}catch(e){return setTimeout(n,50)}Fe(),oe.ready()}}()}return Q.promise(e)},oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){j["[object "+t+"]"]=t.toLowerCase()}),V=oe(W);var me={};oe.Callbacks=function(e){e="string"==typeof e?me[e]||t(e):oe.extend({},e);var i,n,r,a,o,s,l=[],u=!e.once&&[],A=function(t){for(n=e.memory&&t,r=!0,o=s||0,s=0,a=l.length,i=!0;l&&a>o;o++)if(l[o].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}if(i=!1,l)if(u){if(u.length)A(u.shift())}else if(n)l=[];else B.disable()},B={add:function(){if(l){var t=l.length;if(function r(t){oe.each(t,function(t,i){var n=oe.type(i);if("function"===n){if(!e.unique||!B.has(i))l.push(i)}else if(i&&i.length&&"string"!==n)r(i)})}(arguments),i)a=l.length;else if(n)s=t,A(n)}return this},remove:function(){if(l)oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,l,n))>-1;)if(l.splice(n,1),i){if(a>=n)a--;if(o>=n)o--}});return this},has:function(e){return e?oe.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){if(u=void 0,!n)B.disable();return this},locked:function(){return!u},fireWith:function(e,t){if(t=t||[],t=[e,t.slice?t.slice():t],l&&(!r||u))if(i)u.push(t);else A(t);return this},fire:function(){return B.fireWith(this,arguments),this},fired:function(){return!!r}};return B},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(i){oe.each(t,function(t,a){var o=a[0],s=oe.isFunction(e[t])&&e[t];r[a[1]](function(){var e=s&&s.apply(this,arguments);if(e&&oe.isFunction(e.promise))e.promise().done(i.resolve).fail(i.reject).progress(i.notify);else i[o+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,n):n}},r={};if(n.pipe=n.then,oe.each(t,function(e,a){var o=a[2],s=a[3];if(n[a[1]]=o.add,s)o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock);r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=o.fireWith}),n.promise(r),e)e.call(r,r);return r},when:function(e){var t,i,n,r=0,a=te.call(arguments),o=a.length,s=1!==o||e&&oe.isFunction(e.promise)?o:0,l=1===s?e:oe.Deferred(),u=function(e,i,n){return function(r){if(i[e]=this,n[e]=arguments.length>1?te.call(arguments):r,n===t)l.notifyWith(i,n);else if(!--s)l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)if(a[r]&&oe.isFunction(a[r].promise))a[r].promise().done(u(r,n,a)).fail(l.reject).progress(u(r,i,t));else--s;if(!s)l.resolveWith(n,a);return l.promise()}}),oe.support=function(){var e,t,i,n,r,a,o,s,l,u,A=W.createElement("div");if(A.setAttribute("className","t"),A.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=A.getElementsByTagName("*"),i=A.getElementsByTagName("a")[0],!t||!i||!t.length)return{};r=W.createElement("select"),o=r.appendChild(W.createElement("option")),n=A.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={getSetAttribute:"t"!==A.className,leadingWhitespace:3===A.firstChild.nodeType,tbody:!A.getElementsByTagName("tbody").length,htmlSerialize:!!A.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!n.value,optSelected:o.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!o.disabled;try{delete A.test}catch(B){e.deleteExpando=!1}if(n=W.createElement("input"),n.setAttribute("value",""),e.input=""===n.getAttribute("value"),n.value="t",n.setAttribute("type","radio"),e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),a=W.createDocumentFragment(),a.appendChild(n),e.appendChecked=n.checked,e.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,A.attachEvent)A.attachEvent("onclick",function(){e.noCloneEvent=!1}),A.cloneNode(!0).click();for(u in{submit:!0,change:!0,focusin:!0})A.setAttribute(s="on"+u,"t"),e[u+"Bubbles"]=s in window||A.attributes[s].expando===!1;return A.style.backgroundClip="content-box",A.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===A.style.backgroundClip,oe(function(){var t,i,n,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=W.getElementsByTagName("body")[0];if(a){if(t=W.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(t).appendChild(A),A.innerHTML="<table><tr><td></td><td>t</td></tr></table>",n=A.getElementsByTagName("td"),n[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",e.reliableHiddenOffsets=l&&0===n[0].offsetHeight,A.innerHTML="",A.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===A.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,window.getComputedStyle)e.pixelPosition="1%"!==(window.getComputedStyle(A,null)||{}).top,e.boxSizingReliable="4px"===(window.getComputedStyle(A,null)||{width:"4px"}).width,i=A.appendChild(W.createElement("div")),i.style.cssText=A.style.cssText=r,i.style.marginRight=i.style.width="0",A.style.width="1px",e.reliableMarginRight=!parseFloat((window.getComputedStyle(i,null)||{}).marginRight);if(typeof A.style.zoom!==U)if(A.innerHTML="",A.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===A.offsetWidth,A.style.display="block",A.innerHTML="<div></div>",A.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==A.offsetWidth,e.inlineBlockNeedsLayout)a.style.zoom=1;a.removeChild(t),t=A=n=i=null}}),t=r=a=o=i=n=null,e}();var ge=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,He=/([A-Z])/g;oe.extend({cache:{},expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?oe.cache[e[oe.expando]]:e[oe.expando],!!e&&!a(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return n(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return n(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&oe.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),oe.fn.extend({data:function(e,t){var i,n,a=this[0],o=0,s=null;if(void 0===e){if(this.length)if(s=oe.data(a),1===a.nodeType&&!oe._data(a,"parsedAttrs")){for(i=a.attributes;o<i.length;o++)if(n=i[o].name,!n.indexOf("data-"))n=oe.camelCase(n.slice(5)),r(a,n,s[n]);oe._data(a,"parsedAttrs",!0)}return s}if("object"==typeof e)return this.each(function(){oe.data(this,e)});else return oe.access(this,function(t){if(void 0===t)return a?r(a,e,oe.data(a,e)):null;else return void this.each(function(){oe.data(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){oe.removeData(this,e)})}}),oe.extend({queue:function(e,t,i){var n;if(e){if(t=(t||"fx")+"queue",n=oe._data(e,t),i)if(!n||oe.isArray(i))n=oe._data(e,t,oe.makeArray(i));else n.push(i);return n||[]}},dequeue:function(e,t){t=t||"fx";var i=oe.queue(e,t),n=i.length,r=i.shift(),a=oe._queueHooks(e,t),o=function(){oe.dequeue(e,t)};if("inprogress"===r)r=i.shift(),n--;if(a.cur=r,r){if("fx"===t)i.unshift("inprogress");delete a.stop,r.call(e,o,a)}if(!n&&a)a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return oe._data(e,i)||oe._data(e,i,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(e,t+"queue"),oe._removeData(e,i)})})}}),oe.fn.extend({queue:function(e,t){var i=2;if("string"!=typeof e)t=e,e="fx",i--;if(arguments.length<i)return oe.queue(this[0],e);else return void 0===t?this:this.each(function(){var i=oe.queue(this,e,t);if(oe._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0])oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},delay:function(e,t){return e=oe.fx?oe.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=oe.Deferred(),a=this,o=this.length,s=function(){if(!--n)r.resolveWith(a,[a])};if("string"!=typeof e)t=e,e=void 0;for(e=e||"fx";o--;)if(i=oe._data(a[o],e+"queueHooks"),i&&i.empty)n++,i.empty.add(s);return s(),r.promise(t)}});var Ge,Ie,ve=/[\t\r\n]/g,ye=/\r/g,Je=/^(?:input|select|textarea|button|object)$/i,Le=/^(?:a|area)$/i,Me=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,be=/^(?:checked|selected)$/i,Ne=oe.support.getSetAttribute,Ke=oe.support.input;if(oe.fn.extend({attr:function(e,t){return oe.access(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})},prop:function(e,t){return oe.access(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return e=oe.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})},addClass:function(e){var t,i,n,r,a,o=0,s=this.length,l="string"==typeof e&&e;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(le)||[];s>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ve," "):" ")){for(a=0;r=t[a++];)if(n.indexOf(" "+r+" ")<0)n+=r+" ";i.className=oe.trim(n)}return this},removeClass:function(e){var t,i,n,r,a,o=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(le)||[];s>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ve," "):"")){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");i.className=e?oe.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;if(oe.isFunction(e))return this.each(function(i){oe(this).toggleClass(e.call(this,i,this.className,t),t)});else return this.each(function(){if("string"===i)for(var r,a=0,o=oe(this),s=t,l=e.match(le)||[];r=l[a++];)s=n?s:!o.hasClass(r),o[s?"addClass":"removeClass"](r);else if(i===U||"boolean"===i){if(this.className)oe._data(this,"__className__",this.className);this.className=this.className||e===!1?"":oe._data(this,"__className__")||""}})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ve," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,i,n,r=this[0];if(arguments.length)return n=oe.isFunction(e),this.each(function(t){var r,a=oe(this);if(1===this.nodeType){if(n)r=e.call(this,t,a.val());else r=e;if(null==r)r="";else if("number"==typeof r)r+="";else if(oe.isArray(r))r=oe.map(r,function(e){return null==e?"":e+""});if(i=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],!(i&&"set"in i&&void 0!==i.set(this,r,"value")))this.value=r}});else if(r)if(i=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&void 0!==(t=i.get(r,"value")))return t;else return t=r.value,"string"==typeof t?t.replace(ye,""):null==t?"":t}}),oe.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:n.length,l=0>r?s:a?r:0;s>l;l++)if(i=n[l],!(!i.selected&&l!==r||(oe.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&oe.nodeName(i.parentNode,"optgroup"))){if(t=oe(i).val(),a)return t;o.push(t)}return o},set:function(e,t){var i=oe.makeArray(t);if(oe(e).find("option").each(function(){this.selected=oe.inArray(oe(this).val(),i)>=0}),!i.length)e.selectedIndex=-1;return i}}},attr:function(e,t,i){var n,r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o){if(typeof e.getAttribute===U)return oe.prop(e,t,i);if(r=1!==o||!oe.isXMLDoc(e))t=t.toLowerCase(),n=oe.attrHooks[t]||(Me.test(t)?Ie:Ge);if(void 0!==i)if(null===i)oe.removeAttr(e,t);else if(n&&r&&"set"in n&&void 0!==(a=n.set(e,i,t)))return a;else return e.setAttribute(t,i+""),i;else if(n&&r&&"get"in n&&null!==(a=n.get(e,t)))return a;else{if(typeof e.getAttribute!==U)a=e.getAttribute(t);return null==a?void 0:a}}},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(le);if(a&&1===e.nodeType)for(;i=a[r++];){if(n=oe.propFix[i]||i,Me.test(i))if(!Ne&&be.test(i))e[oe.camelCase("default-"+i)]=e[n]=!1;else e[n]=!1;else oe.attr(e,i,"");e.removeAttribute(Ne?i:n)}},attrHooks:{type:{set:function(e,t){if(!oe.support.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var i=e.value;if(e.setAttribute("type",t),i)e.value=i;return t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,t,i){var n,r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o){if(a=1!==o||!oe.isXMLDoc(e))t=oe.propFix[t]||t,r=oe.propHooks[t];if(void 0!==i)if(r&&"set"in r&&void 0!==(n=r.set(e,i,t)))return n;else return e[t]=i;else if(r&&"get"in r&&null!==(n=r.get(e,t)))return n;else return e[t]}},propHooks:{tabIndex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):Je.test(e.nodeName)||Le.test(e.nodeName)&&e.href?0:void 0}}}}),Ie={get:function(e,t){var i=oe.prop(e,t),n="boolean"==typeof i&&e.getAttribute(t),r="boolean"==typeof i?Ke&&Ne?null!=n:be.test(t)?e[oe.camelCase("default-"+t)]:!!n:e.getAttributeNode(t);return r&&r.value!==!1?t.toLowerCase():void 0},set:function(e,t,i){if(t===!1)oe.removeAttr(e,i);else if(Ke&&Ne||!be.test(i))e.setAttribute(!Ne&&oe.propFix[i]||i,i);else e[oe.camelCase("default-"+i)]=e[i]=!0;return i}},!Ke||!Ne)oe.attrHooks.value={get:function(e,t){var i=e.getAttributeNode(t);return oe.nodeName(e,"input")?e.defaultValue:i&&i.specified?i.value:void 0},set:function(e,t,i){if(oe.nodeName(e,"input"))e.defaultValue=t;else return Ge&&Ge.set(e,t,i)}};if(!Ne)Ge=oe.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&("id"===t||"name"===t||"coords"===t?""!==i.value:i.specified)?i.value:void 0},set:function(e,t,i){var n=e.getAttributeNode(i);if(!n)e.setAttributeNode(n=e.ownerDocument.createAttribute(i));return n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},oe.attrHooks.contenteditable={get:Ge.get,set:function(e,t,i){Ge.set(e,""===t?!1:t,i)}},oe.each(["width","height"],function(e,t){oe.attrHooks[t]=oe.extend(oe.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i;else return void 0}})});if(!oe.support.hrefNormalized)oe.each(["href","src","width","height"],function(e,t){oe.attrHooks[t]=oe.extend(oe.attrHooks[t],{get:function(e){var i=e.getAttribute(t,2);return null==i?void 0:i}})}),oe.each(["href","src"],function(e,t){oe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}});if(!oe.support.style)oe.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}};if(!oe.support.optSelected)oe.propHooks.selected=oe.extend(oe.propHooks.selected,{get:function(e){var t=e.parentNode;if(t)if(t.selectedIndex,t.parentNode)t.parentNode.selectedIndex;return null}});if(!oe.support.enctype)oe.propFix.enctype="encoding";if(!oe.support.checkOn)oe.each(["radio","checkbox"],function(){oe.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}});oe.each(["radio","checkbox"],function(){oe.valHooks[this]=oe.extend(oe.valHooks[this],{set:function(e,t){if(oe.isArray(t))return e.checked=oe.inArray(oe(e).val(),t)>=0;else return void 0}})});var xe=/^(?:input|select|textarea)$/i,Pe=/^key/,_e=/^(?:mouse|contextmenu)|click/,Oe=/^(?:focusinfocus|focusoutblur)$/,Te=/^([^.]*)(?:\.(.+)|)$/;if(oe.event={global:{},add:function(e,t,i,n,r){var a,o,s,l,u,A,B,c,C,D,d,f=oe._data(e);if(f){if(i.handler)l=i,i=l.handler,r=l.selector;if(!i.guid)i.guid=oe.guid++;if(!(o=f.events))o=f.events={};if(!(A=f.handle))A=f.handle=function(e){return typeof oe!==U&&(!e||oe.event.triggered!==e.type)?oe.event.dispatch.apply(A.elem,arguments):void 0},A.elem=e;for(t=(t||"").match(le)||[""],s=t.length;s--;){if(a=Te.exec(t[s])||[],C=d=a[1],D=(a[2]||"").split(".").sort(),u=oe.event.special[C]||{},C=(r?u.delegateType:u.bindType)||C,u=oe.event.special[C]||{},B=oe.extend({type:C,origType:d,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:D.join(".")},l),!(c=o[C]))if(c=o[C]=[],c.delegateCount=0,!u.setup||u.setup.call(e,n,D,A)===!1)if(e.addEventListener)e.addEventListener(C,A,!1);else if(e.attachEvent)e.attachEvent("on"+C,A);if(u.add)if(u.add.call(e,B),!B.handler.guid)B.handler.guid=i.guid;if(r)c.splice(c.delegateCount++,0,B);else c.push(B);oe.event.global[C]=!0}e=null}},remove:function(e,t,i,n,r){var a,o,s,l,u,A,B,c,C,D,d,f=oe.hasData(e)&&oe._data(e);if(f&&(A=f.events)){for(t=(t||"").match(le)||[""],u=t.length;u--;)if(s=Te.exec(t[u])||[],C=d=s[1],D=(s[2]||"").split(".").sort(),C){for(B=oe.event.special[C]||{},C=(n?B.delegateType:B.bindType)||C,c=A[C]||[],s=s[2]&&new RegExp("(^|\\.)"+D.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=c.length;a--;)if(o=c[a],!(!r&&d!==o.origType||i&&i.guid!==o.guid||s&&!s.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector))){if(c.splice(a,1),o.selector)c.delegateCount--;if(B.remove)B.remove.call(e,o)}if(l&&!c.length){if(!B.teardown||B.teardown.call(e,D,f.handle)===!1)oe.removeEvent(e,C,f.handle);delete A[C]}}else for(C in A)oe.event.remove(e,C+t[u],i,n,!0);if(oe.isEmptyObject(A))delete f.handle,oe._removeData(e,"events")}},trigger:function(e,t,i,n){var r,a,o,s,l,u,A,B=[i||W],c=re.call(e,"type")?e.type:e,C=re.call(e,"namespace")?e.namespace.split("."):[];if(o=u=i=i||W,3!==i.nodeType&&8!==i.nodeType)if(!Oe.test(c+oe.event.triggered)){if(c.indexOf(".")>=0)C=c.split("."),c=C.shift(),C.sort();if(a=c.indexOf(":")<0&&"on"+c,e=e[oe.expando]?e:new oe.Event(c,"object"==typeof e&&e),e.isTrigger=!0,e.namespace=C.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,!e.target)e.target=i;if(t=null==t?[e]:oe.makeArray(t,[e]),l=oe.event.special[c]||{},n||!l.trigger||l.trigger.apply(i,t)!==!1){if(!n&&!l.noBubble&&!oe.isWindow(i)){if(s=l.delegateType||c,!Oe.test(s+c))o=o.parentNode;for(;o;o=o.parentNode)B.push(o),u=o;if(u===(i.ownerDocument||W))B.push(u.defaultView||u.parentWindow||window)}for(A=0;(o=B[A++])&&!e.isPropagationStopped();){if(e.type=A>1?s:l.bindType||c,r=(oe._data(o,"events")||{})[e.type]&&oe._data(o,"handle"))r.apply(o,t);if(r=a&&o[a],r&&oe.acceptData(o)&&r.apply&&r.apply(o,t)===!1)e.preventDefault()}if(e.type=c,!n&&!e.isDefaultPrevented())if(!(l._default&&l._default.apply(i.ownerDocument,t)!==!1||"click"===c&&oe.nodeName(i,"a")||!oe.acceptData(i)))if(a&&i[c]&&!oe.isWindow(i)){if(u=i[a])i[a]=null;oe.event.triggered=c;try{i[c]()}catch(D){}if(oe.event.triggered=void 0,u)i[a]=u}return e.result}}},dispatch:function(e){e=oe.event.fix(e);var t,i,n,r,a,o=[],s=te.call(arguments),l=(oe._data(this,"events")||{})[e.type]||[],u=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(o=oe.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(n=r.handlers[a++])&&!e.isImmediatePropagationStopped();)if(!e.namespace_re||e.namespace_re.test(n.namespace))if(e.handleObj=n,e.data=n.data,i=((oe.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,s),void 0!==i)if((e.result=i)===!1)e.preventDefault(),e.stopPropagation();if(u.postDispatch)u.postDispatch.call(this,e);return e.result}},handlers:function(e,t){var i,n,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(r=[],a=0;s>a;a++){if(n=t[a],i=n.selector+" ",void 0===r[i])r[i]=n.needsContext?oe(i,this).index(l)>=0:oe.find(i,this,null,[l]).length;if(r[i])r.push(n)}if(r.length)o.push({elem:l,handlers:r})}if(s<t.length)o.push({elem:this,handlers:t.slice(s)});return o},fix:function(e){if(e[oe.expando])return e;var t,i,n,r=e.type,a=e,o=this.fixHooks[r];if(!o)this.fixHooks[r]=o=_e.test(r)?this.mouseHooks:Pe.test(r)?this.keyHooks:{};for(n=o.props?this.props.concat(o.props):this.props,e=new oe.Event(a),t=n.length;t--;)i=n[t],e[i]=a[i];if(!e.target)e.target=a.srcElement||W;if(3===e.target.nodeType)e.target=e.target.parentNode;return e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(null==e.which)e.which=null!=t.charCode?t.charCode:t.keyCode;return e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button,o=t.fromElement;if(null==e.pageX&&null!=t.clientX)n=e.target.ownerDocument||W,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0);if(!e.relatedTarget&&o)e.relatedTarget=o===e.target?t.toElement:o;if(!e.which&&void 0!==a)e.which=1&a?1:2&a?3:4&a?2:0;return e}},special:{load:{noBubble:!0},click:{trigger:function(){if(oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1;else return void 0}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===W.activeElement&&this.blur)return this.blur(),!1;else return void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(e){if(void 0!==e.result)e.originalEvent.returnValue=e.result}}},simulate:function(e,t,i,n){var r=oe.extend(new oe.Event,i,{type:e,isSimulated:!0,originalEvent:{}});if(n)oe.event.trigger(r,null,t);else oe.event.dispatch.call(t,r);if(r.isDefaultPrevented())i.preventDefault()}},oe.removeEvent=W.removeEventListener?function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;if(e.detachEvent){if(typeof e[n]===U)e[n]=null;e.detachEvent(n,i)}},oe.Event=function(e,t){if(!(this instanceof oe.Event))return new oe.Event(e,t);if(e&&e.type)this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:s;else this.type=e;if(t)oe.extend(this,t);this.timeStamp=e&&e.timeStamp||oe.now(),this[oe.expando]=!0},oe.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;if(this.isDefaultPrevented=o,e)if(e.preventDefault)e.preventDefault();else e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;if(this.isPropagationStopped=o,e){if(e.stopPropagation)e.stopPropagation();e.cancelBubble=!0}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj;if(!r||r!==n&&!oe.contains(n,r))e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t;return i}}}),!oe.support.submitBubbles)oe.event.special.submit={setup:function(){if(oe.nodeName(this,"form"))return!1;else return void oe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=oe.nodeName(t,"input")||oe.nodeName(t,"button")?t.form:void 0;if(i&&!oe._data(i,"submitBubbles"))oe.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),oe._data(i,"submitBubbles",!0)})},postDispatch:function(e){if(e._submit_bubble)if(delete e._submit_bubble,this.parentNode&&!e.isTrigger)oe.event.simulate("submit",this.parentNode,e,!0)},teardown:function(){
if(oe.nodeName(this,"form"))return!1;else return void oe.event.remove(this,"._submit")}};if(!oe.support.changeBubbles)oe.event.special.change={setup:function(){if(xe.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)oe.event.add(this,"propertychange._change",function(e){if("checked"===e.originalEvent.propertyName)this._just_changed=!0}),oe.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger)this._just_changed=!1;oe.event.simulate("change",this,e,!0)});return!1}oe.event.add(this,"beforeactivate._change",function(e){var t=e.target;if(xe.test(t.nodeName)&&!oe._data(t,"changeBubbles"))oe.event.add(t,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger)oe.event.simulate("change",this.parentNode,e,!0)}),oe._data(t,"changeBubbles",!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments);else return void 0},teardown:function(){return oe.event.remove(this,"._change"),!xe.test(this.nodeName)}};if(!oe.support.focusinBubbles)oe.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e),!0)};oe.event.special[t]={setup:function(){if(0===i++)W.addEventListener(e,n,!0)},teardown:function(){if(0===--i)W.removeEventListener(e,n,!0)}}});oe.fn.extend({on:function(e,t,i,n,r){var a,o;if("object"==typeof e){if("string"!=typeof t)i=i||t,t=void 0;for(a in e)this.on(a,t,i,e[a],r);return this}if(null==i&&null==n)n=t,i=t=void 0;else if(null==n)if("string"==typeof t)n=i,i=void 0;else n=i,i=t,t=void 0;if(n===!1)n=s;else if(!n)return this;if(1===r)o=n,n=function(e){return oe().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=oe.guid++);return this.each(function(){oe.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,oe(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}if(t===!1||"function"==typeof t)i=t,t=void 0;if(i===!1)i=s;return this.each(function(){oe.event.remove(this,e,i,t)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return oe.event.trigger(e,t,i,!0);else return void 0}}),function(e,t){function i(e){return De.test(e+"")}function n(){var e,t=[];return e=function(i,n){if(t.push(i+=" ")>G.cacheLength)delete e[t.shift()];return e[i]=n}}function r(e){return e[S]=!0,e}function a(e){var t=b.createElement("div");try{return e(t)}catch(i){return!1}finally{t=null}}function o(e,t,i,n){var r,a,o,s,l,u,A,C,D,d;if((t?t.ownerDocument||t:w)!==b)M(t);if(t=t||b,i=i||[],!e||"string"!=typeof e)return i;if(1!==(s=t.nodeType)&&9!==s)return[];if(!K&&!n){if(r=de.exec(e))if(o=r[1]){if(9===s)if(a=t.getElementById(o),a&&a.parentNode){if(a.id===o)return i.push(a),i}else return i;else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&O(t,a)&&a.id===o)return i.push(a),i}else if(r[2])return Z.apply(i,q.call(t.getElementsByTagName(e),0)),i;else if((o=r[3])&&R.getByClassName&&t.getElementsByClassName)return Z.apply(i,q.call(t.getElementsByClassName(o),0)),i;if(R.qsa&&!x.test(e)){if(A=!0,C=S,D=t,d=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){if(u=B(e),A=t.getAttribute("id"))C=A.replace(Ee,"\\$&");else t.setAttribute("id",C);for(C="[id='"+C+"'] ",l=u.length;l--;)u[l]=C+c(u[l]);D=Ce.test(e)&&t.parentNode||t,d=u.join(",")}if(d)try{return Z.apply(i,q.call(D.querySelectorAll(d),0)),i}catch(f){}finally{if(!A)t.removeAttribute("id")}}}return F(e.replace(se,"$1"),t,i,n)}function s(e,t){var i=t&&e,n=i&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function l(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function u(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function A(e){return r(function(t){return t=+t,r(function(i,n){for(var r,a=e([],i.length,t),o=a.length;o--;)if(i[r=a[o]])i[r]=!(n[r]=i[r])})})}function B(e,t){var i,n,r,a,s,l,u,A=U[e+" "];if(A)return t?0:A.slice(0);for(s=e,l=[],u=G.preFilter;s;){if(!i||(n=le.exec(s))){if(n)s=s.slice(n[0].length)||s;l.push(r=[])}if(i=!1,n=ue.exec(s))i=n.shift(),r.push({value:i,type:n[0].replace(se," ")}),s=s.slice(i.length);for(a in G.filter)if((n=ce[a].exec(s))&&(!u[a]||(n=u[a](n))))i=n.shift(),r.push({value:i,type:a,matches:n}),s=s.slice(i.length);if(!i)break}return t?s.length:s?o.error(e):U(e,l).slice(0)}function c(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function C(e,t,i){var n=t.dir,r=i&&"parentNode"===n,a=Q++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,a)}:function(t,i,o){var s,l,u,A=k+" "+a;if(o){for(;t=t[n];)if(1===t.nodeType||r)if(e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r)if(u=t[S]||(t[S]={}),(l=u[n])&&l[0]===A){if((s=l[1])===!0||s===H)return s===!0}else if(l=u[n]=[A],l[1]=e(t,i,o)||H,l[1]===!0)return!0}}function D(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function d(e,t,i,n,r){for(var a,o=[],s=0,l=e.length,u=null!=t;l>s;s++)if(a=e[s])if(!i||i(a,n,r))if(o.push(a),u)t.push(s);return o}function f(e,t,i,n,a,o){if(n&&!n[S])n=f(n);if(a&&!a[S])a=f(a,o);return r(function(r,o,s,l){var u,A,B,c=[],C=[],D=o.length,f=r||p(t||"*",s.nodeType?[s]:s,[]),h=e&&(r||!t)?d(f,c,e,s,l):f,E=i?a||(r?e:D||n)?[]:o:h;if(i)i(h,E,s,l);if(n)for(u=d(E,C),n(u,[],s,l),A=u.length;A--;)if(B=u[A])E[C[A]]=!(h[C[A]]=B);if(r){if(a||e){if(a){for(u=[],A=E.length;A--;)if(B=E[A])u.push(h[A]=B);a(null,E=[],u,l)}for(A=E.length;A--;)if((B=E[A])&&(u=a?$.call(r,B):c[A])>-1)r[u]=!(o[u]=B)}}else if(E=d(E===o?E.splice(D,E.length):E),a)a(null,o,E,l);else Z.apply(o,E)})}function h(e){for(var t,i,n,r=e.length,a=G.relative[e[0].type],o=a||G.relative[" "],s=a?1:0,l=C(function(e){return e===t},o,!0),u=C(function(e){return $.call(t,e)>-1},o,!0),A=[function(e,i,n){return!a&&(n||i!==L)||((t=i).nodeType?l(e,i,n):u(e,i,n))}];r>s;s++)if(i=G.relative[e[s].type])A=[C(D(A),i)];else{if(i=G.filter[e[s].type].apply(null,e[s].matches),i[S]){for(n=++s;r>n&&!G.relative[e[n].type];n++);return f(s>1&&D(A),s>1&&c(e.slice(0,s-1)).replace(se,"$1"),i,n>s&&h(e.slice(s,n)),r>n&&h(e=e.slice(n)),r>n&&c(e))}A.push(i)}return D(A)}function E(e,t){var i=0,n=t.length>0,a=e.length>0,s=function(r,s,l,u,A){var B,c,C,D=[],f=0,h="0",E=r&&[],p=null!=A,F=L,m=r||a&&G.find.TAG("*",A&&s.parentNode||s),g=k+=null==F?1:Math.random()||.1;if(p)L=s!==b&&s,H=i;for(;null!=(B=m[h]);h++){if(a&&B){for(c=0;C=e[c++];)if(C(B,s,l)){u.push(B);break}if(p)k=g,H=++i}if(n){if(B=!C&&B)f--;if(r)E.push(B)}}if(f+=h,n&&h!==f){for(c=0;C=t[c++];)C(E,D,s,l);if(r){if(f>0)for(;h--;)if(!E[h]&&!D[h])D[h]=j.call(u);D=d(D)}if(Z.apply(u,D),p&&!r&&D.length>0&&f+t.length>1)o.uniqueSort(u)}if(p)k=g,L=F;return E};return n?r(s):s}function p(e,t,i){for(var n=0,r=t.length;r>n;n++)o(e,t[n],i);return i}function F(e,t,i,n){var r,a,o,s,l,u=B(e);if(!n)if(1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&9===t.nodeType&&!K&&G.relative[a[1].type]){if(t=G.find.ID(o.matches[0].replace(Fe,me),t)[0],!t)return i;e=e.slice(a.shift().value.length)}for(r=ce.needsContext.test(e)?0:a.length;r--&&(o=a[r],!G.relative[s=o.type]);)if(l=G.find[s])if(n=l(o.matches[0].replace(Fe,me),Ce.test(a[0].type)&&t.parentNode||t)){if(a.splice(r,1),e=n.length&&c(a),!e)return Z.apply(i,q.call(n,0)),i;break}}return y(e,u)(n,t,K,i,Ce.test(e)),i}function m(){}var g,H,G,I,v,y,J,L,M,b,N,K,x,P,_,O,T,S="sizzle"+-new Date,w=e.document,R={},k=0,Q=0,V=n(),U=n(),W=n(),z=typeof t,Y=1<<31,X=[],j=X.pop,Z=X.push,q=X.slice,$=X.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=te.replace("w","w#"),ne="([*^$|!~]?=)",re="\\["+ee+"*("+te+")"+ee+"*(?:"+ne+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ee+"*\\]",ae=":("+te+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",se=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),le=new RegExp("^"+ee+"*,"+ee+"*"),ue=new RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),Ae=new RegExp(ae),Be=new RegExp("^"+ie+"$"),ce={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),NAME:new RegExp("^\\[name=['\"]?("+te+")['\"]?\\]"),TAG:new RegExp("^("+te.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},Ce=/[\x20\t\r\n\f]*[+~]/,De=/^[^{]+\{\s*\[native code/,de=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fe=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,Ee=/'|\\/g,pe=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Fe=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,me=function(e,t){var i="0x"+t-65536;return i!==i?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(ge){q=function(e){for(var t,i=[];t=this[e++];)i.push(t);return i}}v=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=o.setDocument=function(e){var n=e?e.ownerDocument||e:w;if(n===b||9!==n.nodeType||!n.documentElement)return b;if(b=n,N=n.documentElement,K=v(n),R.tagNameNoComments=a(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),R.attributes=a(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),R.getByClassName=a(function(e){if(e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length)return!1;else return e.lastChild.className="e",2===e.getElementsByClassName("e").length}),R.getByName=a(function(e){e.id=S+0,e.innerHTML="<a name='"+S+"'></a><div name='"+S+"'></div>",N.insertBefore(e,N.firstChild);var t=n.getElementsByName&&n.getElementsByName(S).length===2+n.getElementsByName(S+0).length;return R.getIdNotName=!n.getElementById(S),N.removeChild(e),t}),G.attrHandle=a(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==z&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},R.getIdNotName)G.find.ID=function(e,t){if(typeof t.getElementById!==z&&!K){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},G.filter.ID=function(e){var t=e.replace(Fe,me);return function(e){return e.getAttribute("id")===t}};else G.find.ID=function(e,i){if(typeof i.getElementById!==z&&!K){var n=i.getElementById(e);return n?n.id===e||typeof n.getAttributeNode!==z&&n.getAttributeNode("id").value===e?[n]:t:[]}},G.filter.ID=function(e){var t=e.replace(Fe,me);return function(e){var i=typeof e.getAttributeNode!==z&&e.getAttributeNode("id");return i&&i.value===t}};if(G.find.TAG=R.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==z)return t.getElementsByTagName(e);else return void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[r++];)if(1===i.nodeType)n.push(i);return n}return a},G.find.NAME=R.getByName&&function(e,t){if(typeof t.getElementsByName!==z)return t.getElementsByName(name);else return void 0},G.find.CLASS=R.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==z&&!K)return t.getElementsByClassName(e);else return void 0},P=[],x=[":focus"],R.qsa=i(n.querySelectorAll))a(function(e){if(e.innerHTML="<select><option selected=''></option></select>",!e.querySelectorAll("[selected]").length)x.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");if(!e.querySelectorAll(":checked").length)x.push(":checked")}),a(function(e){if(e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length)x.push("[*^$]="+ee+"*(?:\"\"|'')");if(!e.querySelectorAll(":enabled").length)x.push(":enabled",":disabled");e.querySelectorAll("*,:x"),x.push(",.*:")});if(R.matchesSelector=i(_=N.matchesSelector||N.mozMatchesSelector||N.webkitMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))a(function(e){R.disconnectedMatch=_.call(e,"div"),_.call(e,"[s!='']:x"),P.push("!=",ae)});return x=new RegExp(x.join("|")),P=new RegExp(P.join("|")),O=i(N.contains)||N.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=N.compareDocumentPosition?function(e,t){var i;if(e===t)return J=!0,0;if(i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t)){if(1&i||e.parentNode&&11===e.parentNode.nodeType){if(e===n||O(w,e))return-1;if(t===n||O(w,t))return 1;else return 0}return 4&i?-1:1}return e.compareDocumentPosition?-1:1}:function(e,t){var i,r=0,a=e.parentNode,o=t.parentNode,l=[e],u=[t];if(e===t)return J=!0,0;else if(!a||!o)return e===n?-1:t===n?1:a?-1:o?1:0;else if(a===o)return s(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===w?-1:u[r]===w?1:0},J=!1,[0,0].sort(T),R.detectDuplicates=J,b},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==b)M(e);if(t=t.replace(pe,"='$1']"),!(!R.matchesSelector||K||P&&P.test(t)||x.test(t)))try{var i=_.call(e,t);if(i||R.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(n){}return o(t,b,null,[e]).length>0},o.contains=function(e,t){if((e.ownerDocument||e)!==b)M(e);return O(e,t)},o.attr=function(e,t){var i;if((e.ownerDocument||e)!==b)M(e);if(!K)t=t.toLowerCase();if(i=G.attrHandle[t])return i(e);if(K||R.attributes)return e.getAttribute(t);else return((i=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:i&&i.specified?i.value:null},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,i=[],n=1,r=0;if(J=!R.detectDuplicates,e.sort(T),J){for(;t=e[n];n++)if(t===e[n-1])r=i.push(n);for(;r--;)e.splice(i[r],1)}return e},I=o.getText=function(e){var t,i="",n=0,r=e.nodeType;if(!r)for(;t=e[n];n++)i+=I(t);else if(1===r||9===r||11===r)if("string"==typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)i+=I(e);else if(3===r||4===r)return e.nodeValue;return i},G=o.selectors={cacheLength:50,createPseudo:r,match:ce,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){if(e[1]=e[1].replace(Fe,me),e[3]=(e[4]||e[5]||"").replace(Fe,me),"~="===e[2])e[3]=" "+e[3]+" ";return e.slice(0,4)},CHILD:function(e){if(e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)){if(!e[3])o.error(e[0]);e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])}else if(e[3])o.error(e[0]);return e},PSEUDO:function(e){var t,i=!e[5]&&e[2];if(ce.CHILD.test(e[0]))return null;if(e[4])e[2]=e[4];else if(i&&Ae.test(i)&&(t=B(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length))e[0]=e[0].slice(0,t),e[2]=i.slice(0,t);return e.slice(0,3)}},filter:{TAG:function(e){if("*"===e)return function(){return!0};else return e=e.replace(Fe,me).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&V(e,function(e){return t.test(e.className||typeof e.getAttribute!==z&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=o.attr(n,e);if(null==r)return"!="===t;if(!t)return!0;else return r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r+" ").indexOf(i)>-1:"|="===t?r===i||r.slice(0,i.length+1)===i+"-":!1}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var u,A,B,c,C,D,d=a!==o?"nextSibling":"previousSibling",f=t.parentNode,h=s&&t.nodeName.toLowerCase(),E=!l&&!s;if(f){if(a){for(;d;){for(B=t;B=B[d];)if(s?B.nodeName.toLowerCase()===h:1===B.nodeType)return!1;D=d="only"===e&&!D&&"nextSibling"}return!0}if(D=[o?f.firstChild:f.lastChild],o&&E){for(A=f[S]||(f[S]={}),u=A[e]||[],C=u[0]===k&&u[1],c=u[0]===k&&u[2],B=C&&f.childNodes[C];B=++C&&B&&B[d]||(c=C=0)||D.pop();)if(1===B.nodeType&&++c&&B===t){A[e]=[k,C,c];break}}else if(E&&(u=(t[S]||(t[S]={}))[e])&&u[0]===k)c=u[1];else for(;B=++C&&B&&B[d]||(c=C=0)||D.pop();)if((s?B.nodeName.toLowerCase()===h:1===B.nodeType)&&++c){if(E)(B[S]||(B[S]={}))[e]=[k,c];if(B===t)break}return c-=r,c===n||c%n===0&&c/n>=0}}},PSEUDO:function(e,t){var i,n=G.pseudos[e]||G.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);if(n[S])return n(t);if(n.length>1)return i=[e,e,"",t],G.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,i){for(var r,a=n(e,t),o=a.length;o--;)r=$.call(e,a[o]),e[r]=!(i[r]=a[o])}):function(e){return n(e,0,i)};else return n}},pseudos:{not:r(function(e){var t=[],i=[],n=y(e.replace(se,"$1"));return n[S]?r(function(e,t,i,r){for(var a,o=n(e,null,r,[]),s=e.length;s--;)if(a=o[s])e[s]=!(t[s]=a)}):function(e,r,a){return t[0]=e,n(t,null,a,i),!i.pop()}}),has:r(function(e){return function(t){return o(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||I(t)).indexOf(e)>-1}}),lang:r(function(e){if(!Be.test(e||""))o.error("unsupported lang: "+e);return e=e.replace(Fe,me).toLowerCase(),function(t){var i;do if(i=K?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){if(e.parentNode)e.parentNode.selectedIndex;return e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!G.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:A(function(){return[0]}),last:A(function(e,t){return[t-1]}),eq:A(function(e,t,i){return[0>i?i+t:i]}),even:A(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:A(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:A(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:A(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}};for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})G.pseudos[g]=l(g);for(g in{submit:!0,reset:!0})G.pseudos[g]=u(g);y=o.compile=function(e,t){var i,n=[],r=[],a=W[e+" "];if(!a){if(!t)t=B(e);for(i=t.length;i--;)if(a=h(t[i]),a[S])n.push(a);else r.push(a);a=W(e,E(r,n))}return a},G.pseudos.nth=G.pseudos.eq,G.filters=m.prototype=G.pseudos,G.setFilters=new m,M(),o.attr=oe.attr,oe.find=o,oe.expr=o.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=o.uniqueSort,oe.text=o.getText,oe.isXMLDoc=o.isXML,oe.contains=o.contains}(window);var Se=/Until$/,we=/^(?:parents|prev(?:Until|All))/,Re=/^.[^:#\[\.,]*$/,ke=oe.expr.match.needsContext,Qe={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({find:function(e){var t,i,n,r=this.length;if("string"!=typeof e)return n=this,this.pushStack(oe(e).filter(function(){for(t=0;r>t;t++)if(oe.contains(n[t],this))return!0}));for(i=[],t=0;r>t;t++)oe.find(e,this[t],i);return i=this.pushStack(r>1?oe.unique(i):i),i.selector=(this.selector?this.selector+" ":"")+e,i},has:function(e){var t,i=oe(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(oe.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(u(this,e,!1))},filter:function(e){return this.pushStack(u(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ke.test(e)?oe(e,this.context).index(this[0])>=0:oe.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,r=this.length,a=[],o=ke.test(e)||"string"!=typeof e?oe(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(o?o.index(i)>-1:oe.find.matchesSelector(i,e)){a.push(i);break}i=i.parentNode}return this.pushStack(a.length>1?oe.unique(a):a)},index:function(e){if(!e)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if("string"==typeof e)return oe.inArray(this[0],oe(e));else return oe.inArray(e.jquery?e[0]:e,this)},add:function(e,t){var i="string"==typeof e?oe(e,t):oe.makeArray(e&&e.nodeType?[e]:e),n=oe.merge(this.get(),i);return this.pushStack(oe.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.fn.andSelf=oe.fn.addBack,oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return oe.dir(e,"parentNode")},parentsUntil:function(e,t,i){return oe.dir(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return oe.dir(e,"nextSibling")},prevAll:function(e){return oe.dir(e,"previousSibling")},nextUntil:function(e,t,i){return oe.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return oe.dir(e,"previousSibling",i)},siblings:function(e){return oe.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return oe.sibling(e.firstChild)},contents:function(e){return oe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(i,n){var r=oe.map(this,t,i);if(!Se.test(e))n=i;if(n&&"string"==typeof n)r=oe.filter(n,r);if(r=this.length>1&&!Qe[e]?oe.unique(r):r,this.length>1&&we.test(e))r=r.reverse();return this.pushStack(r)}}),oe.extend({filter:function(e,t,i){if(i)e=":not("+e+")";return 1===t.length?oe.find.matchesSelector(t[0],e)?[t[0]]:[]:oe.find.matches(e,t)},dir:function(e,t,i){for(var n=[],r=e[t];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!oe(r).is(i));){if(1===r.nodeType)n.push(r);r=r[t]}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)if(1===e.nodeType&&e!==t)i.push(e);return i}});var Ve="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ue=/ jQuery\d+="(?:null|\d+)"/g,We=new RegExp("<(?:"+Ve+")[\\s/>]","i"),ze=/^\s+/,Ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Xe=/<([\w:]+)/,je=/<tbody/i,Ze=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,$e=/^(?:checkbox|radio)$/i,et=/checked\s*(?:[^=]|=\s*.checked.)/i,tt=/^$|\/(?:java|ecma)script/i,it=/^true\/(.*)/,nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:oe.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},at=A(W),ot=at.appendChild(W.createElement("div"));rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td,oe.fn.extend({text:function(e){return oe.access(this,function(e){return void 0===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(oe.isFunction(e))return this.each(function(t){oe(this).wrapAll(e.call(this,t))});if(this[0]){var t=oe(e,this[0].ownerDocument).eq(0).clone(!0);if(this[0].parentNode)t.insertBefore(this[0]);t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){if(oe.isFunction(e))return this.each(function(t){oe(this).wrapInner(e.call(this,t))});else return this.each(function(){var t=oe(this),i=t.contents();if(i.length)i.wrapAll(e);else t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(i){oe(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){if(!oe.nodeName(this,"body"))oe(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){if(this.parentNode)this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){if(this.parentNode)this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)if(!e||oe.filter(e,[i]).length>0){if(!t&&1===i.nodeType)oe.cleanData(h(i));if(i.parentNode){if(t&&oe.contains(i.ownerDocument,i))D(h(i,"script"));i.parentNode.removeChild(i)}}return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){if(1===e.nodeType)oe.cleanData(h(e,!1));for(;e.firstChild;)e.removeChild(e.firstChild);if(e.options&&oe.nodeName(e,"select"))e.options.length=0}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return oe.access(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ue,""):void 0;if(!("string"!=typeof e||qe.test(e)||!oe.support.htmlSerialize&&We.test(e)||!oe.support.leadingWhitespace&&ze.test(e)||rt[(Xe.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ye,"<$1></$2>");try{for(;n>i;i++)if(t=this[i]||{},1===t.nodeType)oe.cleanData(h(t,!1)),t.innerHTML=e;t=0}catch(r){}}if(t)this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=oe.isFunction(e);if(!t&&"string"!=typeof e)e=oe(e).not(this).detach();return this.domManip([e],!0,function(e){var t=this.nextSibling,i=this.parentNode;if(i)oe(this).remove(),i.insertBefore(e,t)})},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=$.apply([],e);var n,r,a,o,s,l,u=0,A=this.length,D=this,d=A-1,f=e[0],E=oe.isFunction(f);if(E||!(1>=A||"string"!=typeof f||oe.support.checkClone)&&et.test(f))return this.each(function(n){var r=D.eq(n);if(E)e[0]=f.call(this,n,t?r.html():void 0);r.domManip(e,t,i)});if(A){if(l=oe.buildFragment(e,this[0].ownerDocument,!1,this),n=l.firstChild,1===l.childNodes.length)l=n;if(n){for(t=t&&oe.nodeName(n,"tr"),o=oe.map(h(l,"script"),c),a=o.length;A>u;u++){if(r=l,u!==d)if(r=oe.clone(r,!0,!0),a)oe.merge(o,h(r,"script"));i.call(t&&oe.nodeName(this[u],"table")?B(this[u],"tbody"):this[u],r,u)}if(a)for(s=o[o.length-1].ownerDocument,oe.map(o,C),u=0;a>u;u++)if(r=o[u],tt.test(r.type||"")&&!oe._data(r,"globalEval")&&oe.contains(s,r))if(r.src)oe.ajax({url:r.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0});else oe.globalEval((r.text||r.textContent||r.innerHTML||"").replace(nt,""));l=n=null}}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var i,n=0,r=[],a=oe(e),o=a.length-1;o>=n;n++)i=n===o?this:this.clone(!0),oe(a[n])[t](i),ee.apply(r,i.get());return this.pushStack(r)}}),oe.extend({clone:function(e,t,i){var n,r,a,o,s,l=oe.contains(e.ownerDocument,e);if(oe.support.html5Clone||oe.isXMLDoc(e)||!We.test("<"+e.nodeName+">"))a=e.cloneNode(!0);else ot.innerHTML=e.outerHTML,ot.removeChild(a=ot.firstChild);if(!(oe.support.noCloneEvent&&oe.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(n=h(a),s=h(e),o=0;null!=(r=s[o]);++o)if(n[o])f(r,n[o]);if(t)if(i)for(s=s||h(e),n=n||h(a),o=0;null!=(r=s[o]);o++)d(r,n[o]);else d(e,a);if(n=h(a,"script"),n.length>0)D(n,!l&&h(e,"script"));return n=s=r=null,a},buildFragment:function(e,t,i,n){for(var r,a,o,s,l,u,B,c=e.length,C=A(t),d=[],f=0;c>f;f++)if(a=e[f],a||0===a)if("object"===oe.type(a))oe.merge(d,a.nodeType?[a]:a);else if(!Ze.test(a))d.push(t.createTextNode(a));else{for(s=s||C.appendChild(t.createElement("div")),l=(Xe.exec(a)||["",""])[1].toLowerCase(),B=rt[l]||rt._default,s.innerHTML=B[1]+a.replace(Ye,"<$1></$2>")+B[2],r=B[0];r--;)s=s.lastChild;if(!oe.support.leadingWhitespace&&ze.test(a))d.push(t.createTextNode(ze.exec(a)[0]));if(!oe.support.tbody)for(a="table"===l&&!je.test(a)?s.firstChild:"<table>"===B[1]&&!je.test(a)?s:0,r=a&&a.childNodes.length;r--;)if(oe.nodeName(u=a.childNodes[r],"tbody")&&!u.childNodes.length)a.removeChild(u);for(oe.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=C.lastChild}if(s)C.removeChild(s);if(!oe.support.appendChecked)oe.grep(h(d,"input"),E);for(f=0;a=d[f++];)if(!n||-1===oe.inArray(a,n)){if(o=oe.contains(a.ownerDocument,a),s=h(C.appendChild(a),"script"),o)D(s);if(i)for(r=0;a=s[r++];)if(tt.test(a.type||""))i.push(a)}else;return s=null,C},cleanData:function(e,t){for(var i,n,r,a,o=0,s=oe.expando,l=oe.cache,u=oe.support.deleteExpando,A=oe.event.special;null!=(i=e[o]);o++)if(t||oe.acceptData(i))if(r=i[s],a=r&&l[r]){if(a.events)for(n in a.events)if(A[n])oe.event.remove(i,n);else oe.removeEvent(i,n,a.handle);if(l[r]){if(delete l[r],u)delete i[s];else if(typeof i.removeAttribute!==U)i.removeAttribute(s);else i[s]=null;Z.push(r)}}}});var st,lt,ut,At=/alpha\([^)]*\)/i,Bt=/opacity\s*=\s*([^)]*)/,ct=/^(top|right|bottom|left)$/,Ct=/^(none|table(?!-c[ea]).+)/,Dt=/^margin/,dt=new RegExp("^("+se+")(.*)$","i"),ft=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),ht=new RegExp("^([+-])=("+se+")","i"),Et={BODY:"block"},pt={position:"absolute",visibility:"hidden",display:"block"},Ft={letterSpacing:0,fontWeight:400},mt=["Top","Right","Bottom","Left"],gt=["Webkit","O","Moz","ms"];if(oe.fn.extend({css:function(e,t){return oe.access(this,function(e,t,i){var n,r,a={},o=0;if(oe.isArray(t)){for(r=lt(e),n=t.length;n>o;o++)a[t[o]]=oe.css(e,t[o],!1,r);return a}return void 0!==i?oe.style(e,t,i):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){if(t?e:F(this))oe(this).show();else oe(this).hide()})}}),oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ut(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":oe.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=oe.camelCase(t),l=e.style;if(t=oe.cssProps[s]||(oe.cssProps[s]=p(l,s)),o=oe.cssHooks[t]||oe.cssHooks[s],
void 0!==i){if(a=typeof i,"string"===a&&(r=ht.exec(i)))i=(r[1]+1)*r[2]+parseFloat(oe.css(e,t)),a="number";if(null==i||"number"===a&&isNaN(i))return;if("number"===a&&!oe.cssNumber[s])i+="px";if(!oe.support.clearCloneStyle&&""===i&&0===t.indexOf("background"))l[t]="inherit";if(!(o&&"set"in o&&void 0===(i=o.set(e,i,n))))try{l[t]=i}catch(u){}}else if(o&&"get"in o&&void 0!==(r=o.get(e,!1,n)))return r;else return l[t]}},css:function(e,t,i,n){var r,a,o,s=oe.camelCase(t);if(t=oe.cssProps[s]||(oe.cssProps[s]=p(e.style,s)),o=oe.cssHooks[t]||oe.cssHooks[s],o&&"get"in o)a=o.get(e,!0,i);if(void 0===a)a=ut(e,t,n);if("normal"===a&&t in Ft)a=Ft[t];if(""===i||i)return r=parseFloat(a),i===!0||oe.isNumeric(r)?r||0:a;else return a},swap:function(e,t,i,n){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];r=i.apply(e,n||[]);for(a in t)e.style[a]=o[a];return r}}),window.getComputedStyle)lt=function(e){return window.getComputedStyle(e,null)},ut=function(e,t,i){var n,r,a,o=i||lt(e),s=o?o.getPropertyValue(t)||o[t]:void 0,l=e.style;if(o){if(""===s&&!oe.contains(e.ownerDocument,e))s=oe.style(e,t);if(ft.test(s)&&Dt.test(t))n=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=o.width,l.width=n,l.minWidth=r,l.maxWidth=a}return s};else if(W.documentElement.currentStyle)lt=function(e){return e.currentStyle},ut=function(e,t,i){var n,r,a,o=i||lt(e),s=o?o[t]:void 0,l=e.style;if(null==s&&l&&l[t])s=l[t];if(ft.test(s)&&!ct.test(t)){if(n=l.left,r=e.runtimeStyle,a=r&&r.left)r.left=e.currentStyle.left;if(l.left="fontSize"===t?"1em":s,s=l.pixelLeft+"px",l.left=n,a)r.left=a}return""===s?"auto":s};if(oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,i,n){if(i)return 0===e.offsetWidth&&Ct.test(oe.css(e,"display"))?oe.swap(e,pt,function(){return G(e,t,n)}):G(e,t,n);else return void 0},set:function(e,i,n){var r=n&&lt(e);return g(e,i,n?H(e,t,n,oe.support.boxSizing&&"border-box"===oe.css(e,"boxSizing",!1,r),r):0)}}}),!oe.support.opacity)oe.cssHooks.opacity={get:function(e,t){return Bt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=oe.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||i.filter||"";if(i.zoom=1,(t>=1||""===t)&&""===oe.trim(a.replace(At,""))&&i.removeAttribute)if(i.removeAttribute("filter"),""===t||n&&!n.filter)return;i.filter=At.test(a)?a.replace(At,r):a+" "+r}};if(oe(function(){if(!oe.support.reliableMarginRight)oe.cssHooks.marginRight={get:function(e,t){if(t)return oe.swap(e,{display:"inline-block"},ut,[e,"marginRight"]);else return void 0}};if(!oe.support.pixelPosition&&oe.fn.position)oe.each(["top","left"],function(e,t){oe.cssHooks[t]={get:function(e,i){if(i)return i=ut(e,t),ft.test(i)?oe(e).position()[t]+"px":i;else return void 0}}})}),oe.expr&&oe.expr.filters)oe.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!oe.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||oe.css(e,"display"))},oe.expr.filters.visible=function(e){return!oe.expr.filters.hidden(e)};oe.each({margin:"",padding:"",border:"Width"},function(e,t){if(oe.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+mt[n]+t]=a[n]||a[n-2]||a[0];return r}},!Dt.test(e))oe.cssHooks[e+t].set=g});var Ht=/%20/g,Gt=/\[\]$/,It=/\r?\n/g,vt=/^(?:submit|button|image|reset|file)$/i,yt=/^(?:input|select|textarea|keygen)/i;oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&yt.test(this.nodeName)&&!vt.test(e)&&(this.checked||!$e.test(e))}).map(function(e,t){var i=oe(this).val();return null==i?null:oe.isArray(i)?oe.map(i,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:i.replace(It,"\r\n")}}).get()}}),oe.param=function(e,t){var i,n=[],r=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t)t=oe.ajaxSettings&&oe.ajaxSettings.traditional;if(oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){r(this.name,this.value)});else for(i in e)y(i,e[i],t,r);return n.join("&").replace(Ht,"+")},oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),oe.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var Jt,Lt,Mt=oe.now(),bt=/\?/,Nt=/#.*$/,Kt=/([?&])_=[^&]*/,xt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_t=/^(?:GET|HEAD)$/,Ot=/^\/\//,Tt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,St=oe.fn.load,wt={},Rt={},kt="*/".concat("*");try{Lt=z.href}catch(Qt){Lt=W.createElement("a"),Lt.href="",Lt=Lt.href}Jt=Tt.exec(Lt.toLowerCase())||[],oe.fn.load=function(e,t,i){if("string"!=typeof e&&St)return St.apply(this,arguments);var n,r,a,o=this,s=e.indexOf(" ");if(s>=0)n=e.slice(s,e.length),e=e.slice(0,s);if(oe.isFunction(t))i=t,t=void 0;else if(t&&"object"==typeof t)a="POST";if(o.length>0)oe.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){r=arguments,o.html(n?oe("<div>").append(oe.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,r||[e.responseText,t,e])});return this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,i,n,r){if(oe.isFunction(i))r=r||n,n=i,i=void 0;return oe.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt,type:"GET",isLocal:Pt.test(Jt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,oe.ajaxSettings),t):M(oe.ajaxSettings,e)},ajaxPrefilter:J(wt),ajaxTransport:J(Rt),ajax:function(e,t){function i(e,t,i,n){var r,A,h,E,F,g=t;if(2!==p){if(p=2,s)clearTimeout(s);if(u=void 0,o=n||"",m.readyState=e>0?4:0,i)E=b(B,m,i);if(e>=200&&300>e||304===e){if(B.ifModified){if(F=m.getResponseHeader("Last-Modified"))oe.lastModified[a]=F;if(F=m.getResponseHeader("etag"))oe.etag[a]=F}if(204===e)r=!0,g="nocontent";else if(304===e)r=!0,g="notmodified";else r=N(B,E),g=r.state,A=r.data,h=r.error,r=!h}else if(h=g,e||!g)if(g="error",0>e)e=0;if(m.status=e,m.statusText=(t||g)+"",r)D.resolveWith(c,[A,g,m]);else D.rejectWith(c,[m,g,h]);if(m.statusCode(f),f=void 0,l)C.trigger(r?"ajaxSuccess":"ajaxError",[m,B,r?A:h]);if(d.fireWith(c,[m,g]),l)if(C.trigger("ajaxComplete",[m,B]),!--oe.active)oe.event.trigger("ajaxStop")}}if("object"==typeof e)t=e,e=void 0;t=t||{};var n,r,a,o,s,l,u,A,B=oe.ajaxSetup({},t),c=B.context||B,C=B.context&&(c.nodeType||c.jquery)?oe(c):oe.event,D=oe.Deferred(),d=oe.Callbacks("once memory"),f=B.statusCode||{},h={},E={},p=0,F="canceled",m={readyState:0,getResponseHeader:function(e){var t;if(2===p){if(!A)for(A={};t=xt.exec(o);)A[t[1].toLowerCase()]=t[2];t=A[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===p?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();if(!p)e=E[i]=E[i]||e,h[e]=t;return this},overrideMimeType:function(e){if(!p)B.mimeType=e;return this},statusCode:function(e){var t;if(e)if(2>p)for(t in e)f[t]=[f[t],e[t]];else m.always(e[m.status]);return this},abort:function(e){var t=e||F;if(u)u.abort(t);return i(0,t),this}};if(D.promise(m).complete=d.add,m.success=m.done,m.error=m.fail,B.url=((e||B.url||Lt)+"").replace(Nt,"").replace(Ot,Jt[1]+"//"),B.type=t.method||t.type||B.method||B.type,B.dataTypes=oe.trim(B.dataType||"*").toLowerCase().match(le)||[""],null==B.crossDomain)n=Tt.exec(B.url.toLowerCase()),B.crossDomain=!(!n||n[1]===Jt[1]&&n[2]===Jt[2]&&(n[3]||("http:"===n[1]?80:443))==(Jt[3]||("http:"===Jt[1]?80:443)));if(B.data&&B.processData&&"string"!=typeof B.data)B.data=oe.param(B.data,B.traditional);if(L(wt,B,t,m),2===p)return m;if(l=B.global,l&&0===oe.active++)oe.event.trigger("ajaxStart");if(B.type=B.type.toUpperCase(),B.hasContent=!_t.test(B.type),a=B.url,!B.hasContent){if(B.data)a=B.url+=(bt.test(a)?"&":"?")+B.data,delete B.data;if(B.cache===!1)B.url=Kt.test(a)?a.replace(Kt,"$1_="+Mt++):a+(bt.test(a)?"&":"?")+"_="+Mt++}if(B.ifModified){if(oe.lastModified[a])m.setRequestHeader("If-Modified-Since",oe.lastModified[a]);if(oe.etag[a])m.setRequestHeader("If-None-Match",oe.etag[a])}if(B.data&&B.hasContent&&B.contentType!==!1||t.contentType)m.setRequestHeader("Content-Type",B.contentType);m.setRequestHeader("Accept",B.dataTypes[0]&&B.accepts[B.dataTypes[0]]?B.accepts[B.dataTypes[0]]+("*"!==B.dataTypes[0]?", "+kt+"; q=0.01":""):B.accepts["*"]);for(r in B.headers)m.setRequestHeader(r,B.headers[r]);if(B.beforeSend&&(B.beforeSend.call(c,m,B)===!1||2===p))return m.abort();F="abort";for(r in{success:1,error:1,complete:1})m[r](B[r]);if(u=L(Rt,B,t,m),!u)i(-1,"No Transport");else{if(m.readyState=1,l)C.trigger("ajaxSend",[m,B]);if(B.async&&B.timeout>0)s=setTimeout(function(){m.abort("timeout")},B.timeout);try{p=1,u.send(h,i)}catch(g){if(2>p)i(-1,g);else throw g}}return m},getScript:function(e,t){return oe.get(e,void 0,t,"script")},getJSON:function(e,t,i){return oe.get(e,t,i,"json")}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){if(void 0===e.cache)e.cache=!1;if(e.crossDomain)e.type="GET",e.global=!1}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=W.head||oe("head")[0]||W.documentElement;return{send:function(n,r){if(t=W.createElement("script"),t.async=!0,e.scriptCharset)t.charset=e.scriptCharset;t.src=e.url,t.onload=t.onreadystatechange=function(e,i){if(i||!t.readyState||/loaded|complete/.test(t.readyState)){if(t.onload=t.onreadystatechange=null,t.parentNode)t.parentNode.removeChild(t);if(t=null,!i)r(200,"success")}},i.insertBefore(t,i.firstChild)},abort:function(){if(t)t.onload(void 0,!0)}}}});var Vt=[],Ut=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||oe.expando+"_"+Mt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,a,o=e.jsonp!==!1&&(Ut.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0]){if(n=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o)e[o]=e[o].replace(Ut,"$1"+n);else if(e.jsonp!==!1)e.url+=(bt.test(e.url)?"&":"?")+e.jsonp+"="+n;return e.converters["script json"]=function(){if(!a)oe.error(n+" was not called");return a[0]},e.dataTypes[0]="json",r=window[n],window[n]=function(){a=arguments},i.always(function(){if(window[n]=r,e[n])e.jsonpCallback=t.jsonpCallback,Vt.push(n);if(a&&oe.isFunction(r))r(a[0]);a=r=void 0}),"script"}});var Wt,zt,Yt=0,Xt=window.ActiveXObject&&function(){var e;for(e in Wt)Wt[e](void 0,!0)};if(oe.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&K()||x()}:K,zt=oe.ajaxSettings.xhr(),oe.support.cors=!!zt&&"withCredentials"in zt,zt=oe.support.ajax=!!zt)oe.ajaxTransport(function(e){if(!e.crossDomain||oe.support.cors){var t;return{send:function(i,n){var r,a,o=e.xhr();if(e.username)o.open(e.type,e.url,e.async,e.username,e.password);else o.open(e.type,e.url,e.async);if(e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];if(e.mimeType&&o.overrideMimeType)o.overrideMimeType(e.mimeType);if(!e.crossDomain&&!i["X-Requested-With"])i["X-Requested-With"]="XMLHttpRequest";try{for(a in i)o.setRequestHeader(a,i[a])}catch(s){}if(o.send(e.hasContent&&e.data||null),t=function(i,a){var s,l,u,A;try{if(t&&(a||4===o.readyState)){if(t=void 0,r)if(o.onreadystatechange=oe.noop,Xt)delete Wt[r];if(a){if(4!==o.readyState)o.abort()}else{if(A={},s=o.status,l=o.getAllResponseHeaders(),"string"==typeof o.responseText)A.text=o.responseText;try{u=o.statusText}catch(B){u=""}if(!s&&e.isLocal&&!e.crossDomain)s=A.text?200:404;else if(1223===s)s=204}}}catch(c){if(!a)n(-1,c)}if(A)n(s,u,A,l)},!e.async)t();else if(4===o.readyState)setTimeout(t);else{if(r=++Yt,Xt){if(!Wt)Wt={},oe(window).unload(Xt);Wt[r]=t}o.onreadystatechange=t}},abort:function(){if(t)t(void 0,!0)}}}});var jt,Zt,qt=/^(?:toggle|show|hide)$/,$t=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[S],ii={"*":[function(e,t){var i,n,r=this.createTween(e,t),a=$t.exec(t),o=r.cur(),s=+o||0,l=1,u=20;if(a){if(i=+a[2],n=a[3]||(oe.cssNumber[e]?"":"px"),"px"!==n&&s){s=oe.css(r.elem,e,!0)||i||1;do l=l||".5",s/=l,oe.style(r.elem,e,s+n);while(l!==(l=r.cur()/o)&&1!==l&&--u)}r.unit=n,r.start=s,r.end=a[1]?s+(a[1]+1)*i:i}return r}]};if(oe.Animation=oe.extend(O,{tweener:function(e,t){if(oe.isFunction(e))t=e,e=["*"];else e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){if(t)ti.unshift(e);else ti.push(e)}}),oe.Tween=w,w.prototype={constructor:w,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(oe.cssNumber[i]?"":"px")},cur:function(){var e=w.propHooks[this.prop];return e&&e.get?e.get(this):w.propHooks._default.get(this)},run:function(e){var t,i=w.propHooks[this.prop];if(this.options.duration)this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration);else this.pos=t=e;if(this.now=(this.end-this.start)*t+this.start,this.options.step)this.options.step.call(this.elem,this.now,this);if(i&&i.set)i.set(this);else w.propHooks._default.set(this);return this}},w.prototype.init.prototype=w.prototype,w.propHooks={_default:{get:function(e){var t;if(null!=e.elem[e.prop]&&(!e.elem.style||null==e.elem.style[e.prop]))return e.elem[e.prop];else return t=oe.css(e.elem,e.prop,""),!t||"auto"===t?0:t},set:function(e){if(oe.fx.step[e.prop])oe.fx.step[e.prop](e);else if(e.elem.style&&(null!=e.elem.style[oe.cssProps[e.prop]]||oe.cssHooks[e.prop]))oe.style(e.elem,e.prop,e.now+e.unit);else e.elem[e.prop]=e.now}}},w.propHooks.scrollTop=w.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode)e.elem[e.prop]=e.now}},oe.each(["toggle","show","hide"],function(e,t){var i=oe.fn[t];oe.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(R(t,!0),e,n,r)}}),oe.fn.extend({fadeTo:function(e,t,i,n){return this.filter(F).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=oe.isEmptyObject(e),a=oe.speed(t,i,n),o=function(){var t=O(this,oe.extend({},e),a);if(o.finish=function(){t.stop(!0)},r||oe._data(this,"finish"))t.stop(!0)};return o.finish=o,r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};if("string"!=typeof e)i=t,t=e,e=void 0;if(t&&e!==!1)this.queue(e||"fx",[]);return this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=oe.timers,o=oe._data(this);if(r){if(o[r]&&o[r].stop)n(o[r])}else for(r in o)if(o[r]&&o[r].stop&&ei.test(r))n(o[r]);for(r=a.length;r--;)if(a[r].elem===this&&(null==e||a[r].queue===e))a[r].anim.stop(i),t=!1,a.splice(r,1);if(t||!i)oe.dequeue(this,e)})},finish:function(e){if(e!==!1)e=e||"fx";return this.each(function(){var t,i=oe._data(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=oe.timers,o=n?n.length:0;if(i.finish=!0,oe.queue(this,e,[]),r&&r.cur&&r.cur.finish)r.cur.finish.call(this);for(t=a.length;t--;)if(a[t].elem===this&&a[t].queue===e)a[t].anim.stop(!0),a.splice(t,1);for(t=0;o>t;t++)if(n[t]&&n[t].finish)n[t].finish.call(this);delete i.finish})}}),oe.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),oe.speed=function(e,t,i){var n=e&&"object"==typeof e?oe.extend({},e):{complete:i||!i&&t||oe.isFunction(e)&&e,duration:e,easing:i&&t||t&&!oe.isFunction(t)&&t};if(n.duration=oe.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in oe.fx.speeds?oe.fx.speeds[n.duration]:oe.fx.speeds._default,null==n.queue||n.queue===!0)n.queue="fx";return n.old=n.complete,n.complete=function(){if(oe.isFunction(n.old))n.old.call(this);if(n.queue)oe.dequeue(this,n.queue)},n},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},oe.timers=[],oe.fx=w.prototype.init,oe.fx.tick=function(){var e,t=oe.timers,i=0;for(jt=oe.now();i<t.length;i++)if(e=t[i],!e()&&t[i]===e)t.splice(i--,1);if(!t.length)oe.fx.stop();jt=void 0},oe.fx.timer=function(e){if(e()&&oe.timers.push(e))oe.fx.start()},oe.fx.interval=13,oe.fx.start=function(){if(!Zt)Zt=setInterval(oe.fx.tick,oe.fx.interval)},oe.fx.stop=function(){clearInterval(Zt),Zt=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fx.step={},oe.expr&&oe.expr.filters)oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length};return oe.fn.offset=function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},r=this[0],a=r&&r.ownerDocument;if(a){if(t=a.documentElement,!oe.contains(t,r))return n;if(typeof r.getBoundingClientRect!==U)n=r.getBoundingClientRect();return i=k(a),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}}},oe.offset={setOffset:function(e,t,i){var n=oe.css(e,"position");if("static"===n)e.style.position="relative";var r,a,o=oe(e),s=o.offset(),l=oe.css(e,"top"),u=oe.css(e,"left"),A=("absolute"===n||"fixed"===n)&&oe.inArray("auto",[l,u])>-1,B={},c={};if(A)c=o.position(),r=c.top,a=c.left;else r=parseFloat(l)||0,a=parseFloat(u)||0;if(oe.isFunction(t))t=t.call(e,i,s);if(null!=t.top)B.top=t.top-s.top+r;if(null!=t.left)B.left=t.left-s.left+a;if("using"in t)t.using.call(e,B);else o.css(B)}},oe.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];if("fixed"===oe.css(n,"position"))t=n.getBoundingClientRect();else{if(e=this.offsetParent(),t=this.offset(),!oe.nodeName(e[0],"html"))i=e.offset();i.top+=oe.css(e[0],"borderTopWidth",!0),i.left+=oe.css(e[0],"borderLeftWidth",!0)}return{top:t.top-i.top-oe.css(n,"marginTop",!0),left:t.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||W.documentElement;e&&!oe.nodeName(e,"html")&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||W.documentElement})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);oe.fn[e]=function(n){return oe.access(this,function(e,n,r){var a=k(e);if(void 0===r)return a?t in a?a[t]:a.document.documentElement[n]:e[n];if(a)a.scrollTo(!i?r:oe(a).scrollLeft(),i?r:oe(a).scrollTop());else e[n]=r},e,n,arguments.length,null)}}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){oe.fn[n]=function(n,r){var a=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return oe.access(this,function(t,i,n){var r;if(oe.isWindow(t))return t.document.documentElement["client"+e];if(9===t.nodeType)return r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e]);else return void 0===n?oe.css(t,i,o):oe.style(t,i,n,o)},t,a?n:void 0,a,null)}})}),oe}),define("jquery",["jquery/jquery"],function(e){return e}),define("inf-ria/ui/BucketFolders",["require","underscore","jquery","esui/lib"],function(require){function e(e){if(t.isUndefined(e)||t.isUndefined(e.element)||t.isNull(e.element))return!1;else return this.element=e.element,this.type=e.type||"folder",this.urlPrefix=null!=e.urlPrefix?e.urlPrefix:"bos://",this.panelId="BUCKETFOLDERS_"+this.element.id,this.locations=e.locations||null,this.inputElement=i(this.element.main),this.parentElement=this.inputElement.parent(),this.init(),this.marker="",this.bucketName="",this.prefix=[],this.isLoading=!1,void(this.isEnd=!1)}var t=require("underscore"),i=require("jquery"),n=require("esui/lib"),r='<ul id="${id}" class="bucketfolders-panel"></ul>',a=['<li class="bucketfolders-li bucketfolders-bucket">','<a href="javascript:void(0)" bucket-name="${name}"','name="bucket_item">${name}</a>',"</li>"].join(""),o=['<li class="bucketfolders-li bucketfolders-back">','<a href="javascript:void(0)" name="back"',">../</a></li>"].join(""),s=['<li class="bucketfolders-li bucketfolders-folder">','<a href="javascript:void(0)" folder-name="${name}" ','name="folder_item"',">${name}</a></li>"].join(""),l=['<li class="bucketfolders-li bucketfolders-file">','<a href="javascript:void(0)" file-name="${name}" ','name="file_item"',">${name}</a></li>"].join(""),u=['<li class="bucketfolders-li bucketfolders-more">','<a href="javascript:void(0)" ','name="more"',">加载更多</a></li>"].join("");return e.prototype.init=function(){function e(){if(s.isLoading===!0)return!1;if(""===s.bucketName)return!1;if(s.isEnd===!0)return!1;else return void s.loadFolders(s.getPrefix(),!1)}var t=this.parentElement,a=t.find("#"+this.panelId),o=this.inputElement;if(0===a.length)t.append(n.format(r,{id:this.panelId})),a=t.find("#"+this.panelId);this.panelElement=a,t.css("position","relative");var s=this;o.bind("click",function(e){var n=e.target;if("INPUT"===n.tagName)return!1;if(!a.is(":visible")&&!s.isLoading){if(i("ul.bucketfolders-panel").length>0)i("ul.bucketfolders-panel").hide();s.loadBuckets(function(){a.css({left:o.offset().left-t.offset().left,top:o.offset().top-t.offset().top+o.outerHeight(),width:o.innerWidth()}),o.addClass("bucketfolder-select-active"),a.show()})}}),i("body").bind("click",function(e){var t=e.target;if(a.is(":visible")&&(!i(t).hasClass("bucketfolders-li")&&!i(t).parent().hasClass("bucketfolders-li")||i(t).hasClass("bucketfolder-select")))o.removeClass("bucketfolder-select-active"),a.hide()}),a.delegate('a[name="bucket_item"]',"click",function(e){s.bucketName=i(this).attr("bucket-name"),s.loadFolders("",!0)}),a.delegate('a[name="folder_item"]',"click",function(e){var t=i(this).attr("folder-name");s.setPrefix(t),s.loadFolders(s.getPrefix(),!0)}),a.delegate('a[name="file_item"]',"click",function(e){if(!i(this).hasClass("file-selected")){var t=s.element.getValue(),n=a.find("a.file-selected");if(n.length>0)t=t.substring(0,t.lastIndexOf("/")+1);n.removeClass("file-selected");var r=i(this).attr("file-name");i(this).addClass("file-selected"),s.element.setValue(t+r),a.hide()}}),a.delegate('a[name="back"]',"click",function(e){if(0===s.prefix.length)s.loadBuckets();else s.prefix.pop(),s.loadFolders(s.getPrefix(),!0)}),a.bind("scroll",function(){if(i(this).scrollTop()+i(this).innerHeight()>=this.scrollHeight)e()}),a.delegate('a[name="more"]',"click",function(t){e()})},e.prototype.loadBuckets=function(e){var i=this.panelElement;if(i.empty(),this.bucketName="",this.prefix=[],this.marker="",this.isLoading=!1,this.isEnd=!1,!this.bucketList)return!1;this.isLoading=!0;var r=this,o={all:!0};if(this.locations)o={locations:this.locations};this.bucketList(o).then(function(r){for(var o=0;o<r.result.length;o++)i.append(n.format(a,{name:t.escape(r.result[o].name)}));e&&e()}).ensure(function(){r.isLoading=!1})},e.prototype.loadFolders=function(e,i){var r=this.element;if(i)this.panelElement.empty(),this.panelElement.append(n.format(o,{bucketName:this.bucketName})),r.setValue(this.urlPrefix+this.bucketName+"/"+e),r.fire("change",{value:r.getRawValue()}),this.isEnd=!1,this.isLoading=!1,this.marker="";else this.panelElement.find("li.bucketfolders-more").remove();var a=this;if("folder"===this.type){if(!this.folderList)return!1;this.isLoading=!0,this.folderList({bucketName:this.bucketName,marker:this.marker,prefix:e}).then(function(i){if(a.marker=i.marker,i.folders&&i.folders.length>0){for(var r=0;r<i.folders.length;r++)a.panelElement.append(n.format(s,{name:t.escape(i.folders[r].substring(e.length))}));a.panelElement.append(n.format(u))}else a.isEnd=!0}).ensure(function(){a.isLoading=!1})}else{if(!this.objectList)return!1;this.isLoading=!0,this.objectList({bucketName:this.bucketName,marker:this.marker,prefix:e}).then(function(i){if(a.marker=i.marker,i.objects&&i.objects.length>0){for(var r=0;r<i.objects.length;r++){var o=i.objects[r].name.substring(e.length),A=t.indexOf(o,"/");if(A>=0)a.panelElement.append(n.format(s,{name:o}));else a.panelElement.append(n.format(l,{name:t.escape(o)}))}a.panelElement.append(n.format(u))}else a.isEnd=!0}).ensure(function(){a.isLoading=!1})}},e.prototype.getPrefix=function(){var e=this.prefix;return e.length>0?e[e.length-1]:""},e.prototype.setPrefix=function(e){var t=this.prefix;t.push(t.length>0?t[t.length-1]+e:e)},e.prototype.bucketList=null,e.prototype.folderList=null,e.prototype.objectList=null,e.prototype.destroy=function(){this.inputElement.unbind("click"),i("body").unbind("click"),this.panelElement.remove()},e}),define("echarts/model/mixin/colorPalette",["require","../../util/clazz"],function(require){var e=require("../../util/clazz"),t=e.set,i=e.get;return{clearColorPalette:function(){t(this,"colorIdx",0),t(this,"colorNameMap",{})},getColorFromPalette:function(e,n){n=n||this;var r=i(n,"colorIdx")||0,a=i(n,"colorNameMap")||t(n,"colorNameMap",{});if(a[e])return a[e];var o=this.get("color",!0)||[];if(o.length){var s=o[r];if(e)a[e]=s;return t(n,"colorIdx",(r+1)%o.length),s}}}}),define("zrender/core/vector",[],function(){var e="undefined"==typeof Float32Array?Array:Float32Array,t={create:function(t,i){var n=new e(2);if(null==t)t=0;if(null==i)i=0;return n[0]=t,n[1]=i,n},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},clone:function(t){var i=new e(2);return i[0]=t[0],i[1]=t[1],i},set:function(e,t,i){return e[0]=t,e[1]=i,e},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},scaleAndAdd:function(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e},sub:function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},len:function(e){return Math.sqrt(this.lenSquare(e))},lenSquare:function(e){return e[0]*e[0]+e[1]*e[1]},mul:function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},div:function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},normalize:function(e,i){var n=t.len(i);if(0===n)e[0]=0,e[1]=0;else e[0]=i[0]/n,e[1]=i[1]/n;return e},distance:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},distanceSquare:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:function(e,t,i,n){return e[0]=t[0]+n*(i[0]-t[0]),e[1]=t[1]+n*(i[1]-t[1]),e},applyTransform:function(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[2]*r+i[4],e[1]=i[1]*n+i[3]*r+i[5],e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e},max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}};return t.length=t.len,t.lengthSquare=t.lenSquare,t.dist=t.distance,t.distSquare=t.distanceSquare,t}),define("zrender/core/matrix",[],function(){var e="undefined"==typeof Float32Array?Array:Float32Array,t={create:function(){var i=new e(6);return t.identity(i),i},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},mul:function(e,t,i){var n=t[0]*i[0]+t[2]*i[1],r=t[1]*i[0]+t[3]*i[1],a=t[0]*i[2]+t[2]*i[3],o=t[1]*i[2]+t[3]*i[3],s=t[0]*i[4]+t[2]*i[5]+t[4],l=t[1]*i[4]+t[3]*i[5]+t[5];return e[0]=n,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e},translate:function(e,t,i){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+i[0],e[5]=t[5]+i[1],e},rotate:function(e,t,i){var n=t[0],r=t[2],a=t[4],o=t[1],s=t[3],l=t[5],u=Math.sin(i),A=Math.cos(i);return e[0]=n*A+o*u,e[1]=-n*u+o*A,e[2]=r*A+s*u,e[3]=-r*u+A*s,e[4]=A*a+u*l,e[5]=A*l-u*a,e},scale:function(e,t,i){var n=i[0],r=i[1];return e[0]=t[0]*n,e[1]=t[1]*r,e[2]=t[2]*n,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*r,e},invert:function(e,t){var i=t[0],n=t[2],r=t[4],a=t[1],o=t[3],s=t[5],l=i*o-a*n;if(!l)return null;else return l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*s-o*r)*l,e[5]=(a*r-i*s)*l,e}};return t}),define("zrender/core/BoundingRect",["require","./vector","./matrix"],function(require){"use strict";function e(e,t,i,n){if(0>i)e+=i,i=-i;if(0>n)t+=n,n=-n;this.x=e,this.y=t,this.width=i,this.height=n}var t=require("./vector"),i=require("./matrix"),n=t.applyTransform,r=Math.min,a=Math.max;return e.prototype={constructor:e,union:function(e){var t=r(e.x,this.x),i=r(e.y,this.y);this.width=a(e.x+e.width,this.x+this.width)-t,this.height=a(e.y+e.height,this.y+this.height)-i,this.x=t,this.y=i},applyTransform:function(){var e=[],t=[],i=[],o=[];return function(s){if(s){e[0]=i[0]=this.x,e[1]=o[1]=this.y,t[0]=o[0]=this.x+this.width,t[1]=i[1]=this.y+this.height,n(e,e,s),n(t,t,s),n(i,i,s),n(o,o,s),this.x=r(e[0],t[0],i[0],o[0]),this.y=r(e[1],t[1],i[1],o[1]);var l=a(e[0],t[0],i[0],o[0]),u=a(e[1],t[1],i[1],o[1]);this.width=l-this.x,this.height=u-this.y}}}(),calculateTransform:function(e){var t=this,n=e.width/t.width,r=e.height/t.height,a=i.create();return i.translate(a,a,[-t.x,-t.y]),i.scale(a,a,[n,r]),i.translate(a,a,[e.x,e.y]),a},intersect:function(t){if(!t)return!1;if(!(t instanceof e))t=e.create(t);var i=this,n=i.x,r=i.x+i.width,a=i.y,o=i.y+i.height,s=t.x,l=t.x+t.width,u=t.y,A=t.y+t.height;return!(s>r||n>l||u>o||a>A)},contain:function(e,t){var i=this;return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},clone:function(){return new e(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e}),define("echarts/util/layout",["require","zrender/core/util","zrender/core/BoundingRect","./number","./format"],function(require){"use strict";function e(e,t,i,n,r){var a=0,o=0;if(null==n)n=1/0;if(null==r)r=1/0;var s=0;t.eachChild(function(l,u){var A,B,c=l.position,C=l.getBoundingRect(),D=t.childAt(u+1),d=D&&D.getBoundingRect();if("horizontal"===e){var f=C.width+(d?-d.x+C.x:0);if(A=a+f,A>n||l.newline)a=0,A=f,o+=s+i,s=C.height;else s=Math.max(s,C.height)}else{var h=C.height+(d?-d.y+C.y:0);if(B=o+h,B>r||l.newline)a+=s+i,o=0,B=h,s=C.width;else s=Math.max(s,C.width)}if(!l.newline)c[0]=a,c[1]=o,"horizontal"===e?a=A+i:o=B+i})}var t=require("zrender/core/util"),i=require("zrender/core/BoundingRect"),n=require("./number"),r=require("./format"),a=n.parsePercent,o=t.each,s={},l=s.LOCATION_PARAMS=["left","right","top","bottom","width","height"],u=s.HV_NAMES=[["width","left","right"],["height","top","bottom"]];return s.box=e,s.vbox=t.curry(e,"vertical"),s.hbox=t.curry(e,"horizontal"),s.getAvailableSize=function(e,t,i){var n=t.width,o=t.height,s=a(e.x,n),l=a(e.y,o),u=a(e.x2,n),A=a(e.y2,o);return(isNaN(s)||isNaN(parseFloat(e.x)))&&(s=0),(isNaN(u)||isNaN(parseFloat(e.x2)))&&(u=n),(isNaN(l)||isNaN(parseFloat(e.y)))&&(l=0),(isNaN(A)||isNaN(parseFloat(e.y2)))&&(A=o),i=r.normalizeCssArray(i||0),{width:Math.max(u-s-i[1]-i[3],0),height:Math.max(A-l-i[0]-i[2],0)}},s.getLayoutRect=function(e,t,n){n=r.normalizeCssArray(n||0);var o=t.width,s=t.height,l=a(e.left,o),u=a(e.top,s),A=a(e.right,o),B=a(e.bottom,s),c=a(e.width,o),C=a(e.height,s),D=n[2]+n[0],d=n[1]+n[3],f=e.aspect;
if(isNaN(c))c=o-A-d-l;if(isNaN(C))C=s-B-D-u;if(isNaN(c)&&isNaN(C))if(f>o/s)c=.8*o;else C=.8*s;if(null!=f){if(isNaN(c))c=f*C;if(isNaN(C))C=c/f}if(isNaN(l))l=o-A-c-d;if(isNaN(u))u=s-B-C-D;switch(e.left||e.right){case"center":l=o/2-c/2-n[3];break;case"right":l=o-c-d}switch(e.top||e.bottom){case"middle":case"center":u=s/2-C/2-n[0];break;case"bottom":u=s-C-D}if(l=l||0,u=u||0,isNaN(c))c=o-l-(A||0);if(isNaN(C))C=s-u-(B||0);var h=new i(l+n[3],u+n[0],c,C);return h.margin=n,h},s.positionElement=function(e,n,r,a,o){var l=!o||!o.hv||o.hv[0],u=!o||!o.hv||o.hv[1],A=o&&o.boundingMode||"all";if(l||u){var B;if("raw"===A)B="group"===e.type?new i(0,0,+n.width||0,+n.height||0):e.getBoundingRect();else if(B=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();B=B.clone(),B.applyTransform(c)}n=s.getLayoutRect(t.defaults({width:B.width,height:B.height},n),r,a);var C=e.position,D=l?n.x-B.x:0,d=u?n.y-B.y:0;e.attr("position","raw"===A?[D,d]:[C[0]+D,C[1]+d])}},s.sizeCalculable=function(e,t){return null!=e[u[t][0]]||null!=e[u[t][1]]&&null!=e[u[t][2]]},s.mergeLayoutParam=function(e,i,n){function r(t,n){var r={},l=0,u={},B=0,c=2;if(o(t,function(t){u[t]=e[t]}),o(t,function(e){a(i,e)&&(r[e]=u[e]=i[e]),s(r,e)&&l++,s(u,e)&&B++}),A[n]){if(s(i,t[1]))u[t[2]]=null;else if(s(i,t[2]))u[t[1]]=null;return u}if(B===c||!l)return u;else if(l>=c)return r;else{for(var C=0;C<t.length;C++){var D=t[C];if(!a(r,D)&&a(e,D)){r[D]=e[D];break}}return r}}function a(e,t){return e.hasOwnProperty(t)}function s(e,t){return null!=e[t]&&"auto"!==e[t]}function l(e,t,i){o(e,function(e){t[e]=i[e]})}!t.isObject(n)&&(n={});var A=n.ignoreSize;!t.isArray(A)&&(A=[A,A]);var B=r(u[0],0),c=r(u[1],1);l(u[0],e,B),l(u[1],e,c)},s.getLayoutParams=function(e){return s.copyLayoutParams({},e)},s.copyLayoutParams=function(e,t){return t&&e&&o(l,function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e},s}),define("echarts/model/Series",["require","zrender/core/util","../util/format","../util/clazz","../util/model","./Component","./mixin/colorPalette","zrender/core/env","../util/layout"],function(require){"use strict";var e=require("zrender/core/util"),t=require("../util/format"),i=require("../util/clazz"),n=require("../util/model"),r=require("./Component"),a=require("./mixin/colorPalette"),o=require("zrender/core/env"),s=require("../util/layout"),l=i.set,u=i.get,A=t.encodeHTML,B=t.addCommas,c=r.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",layoutMode:null,init:function(t,i,n,r){this.seriesIndex=this.componentIndex,this.mergeDefaultAndTheme(t,n);var a=this.getInitialData(t,n);if(__DEV__)e.assert(a,"getInitialData returned invalid data.");l(this,"dataBeforeProcessed",a),this.restoreData()},mergeDefaultAndTheme:function(t,i){var r=this.layoutMode,a=r?s.getLayoutParams(t):{};if(e.merge(t,i.getTheme().get(this.subType)),e.merge(t,this.getDefaultOption()),n.defaultEmphasis(t.label,n.LABEL_OPTIONS),this.fillDataTextStyle(t.data),r)s.mergeLayoutParam(t,a,r)},mergeOption:function(t,i){t=e.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;if(n)s.mergeLayoutParam(this.option,t,n);var r=this.getInitialData(t,i);if(r)l(this,"data",r),l(this,"dataBeforeProcessed",r.cloneShallow())},fillDataTextStyle:function(e){if(e)for(var t=0;t<e.length;t++)if(e[t]&&e[t].label)n.defaultEmphasis(e[t].label,n.LABEL_OPTIONS)},getInitialData:function(){},getData:function(e){var t=u(this,"data");return null==e?t:t.getLinkedData(e)},setData:function(e){l(this,"data",e)},getRawData:function(){return u(this,"dataBeforeProcessed")},coordDimToDataDim:function(e){return[e]},dataDimToCoordDim:function(e){return e},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(i,n,r){function a(i){var r=[];return e.each(i,function(e,i){var a,s=o.getDimensionInfo(i),l=s&&s.type;if("ordinal"===l)a=e+"";else if("time"===l)a=n?"":t.formatTime("yyyy/MM/dd hh:mm:ss",e);else a=B(e);a&&r.push(a)}),r.join(", ")}var o=u(this,"data"),s=this.getRawValue(i),l=A(e.isArray(s)?a(s):B(s)),c=o.getName(i),C=o.getItemVisual(i,"color");if(e.isObject(C)&&C.colorStops)C=(C.colorStops[0]||{}).color;C=C||"transparent";var D='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+A(C)+'"></span>',d=this.name;if("\x00-"===d)d="";return!n?(d&&A(d)+"<br />")+D+(c?A(c)+" : "+l:l):D+A(this.name)+" : "+l},isAnimationEnabled:function(){if(o.node)return!1;var e=this.getShallow("animation");if(e)if(this.getData().count()>this.getShallow("animationThreshold"))e=!1;return e},restoreData:function(){l(this,"data",u(this,"dataBeforeProcessed").cloneShallow())},getColorFromPalette:function(e,t){var i=this.ecModel,n=a.getColorFromPalette.call(this,e,t);if(!n)n=i.getColorFromPalette(e,t);return n},getAxisTooltipData:null,getTooltipPosition:null});return e.mixin(c,n.dataFormatMixin),e.mixin(c,a),c}),define("echarts/CoordinateSystem",["require","zrender/core/util"],function(require){"use strict";function e(){this._coordinateSystems=[]}var t=require("zrender/core/util"),i={};return e.prototype={constructor:e,create:function(e,n){var r=[];t.each(i,function(t,i){var a=t.create(e,n);r=r.concat(a||[])}),this._coordinateSystems=r},update:function(e,i){t.each(this._coordinateSystems,function(t){t.update&&t.update(e,i)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},e.register=function(e,t){i[e]=t},e.get=function(e){return i[e]},e}),define("echarts/chart/lines/LinesSeries",["require","../../model/Series","../../data/List","zrender/core/util","../../util/format","../../CoordinateSystem"],function(require){"use strict";function e(e){var t=e.data;if(t&&t[0]&&t[0][0]&&t[0][0].coord){if(__DEV__)console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }");e.data=n.map(t,function(e){var t=[e[0].coord,e[1].coord],i={coords:t};if(e[0].name)i.fromName=e[0].name;if(e[1].name)i.toName=e[1].name;return n.mergeAll([i,e[0],e[1]])})}}var t=require("../../model/Series"),i=require("../../data/List"),n=require("zrender/core/util"),r=require("../../util/format"),a=require("../../CoordinateSystem"),o=t.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.normal.color",init:function(t){e(t),o.superApply(this,"init",arguments)},mergeOption:function(t){e(t),o.superApply(this,"mergeOption",arguments)},getInitialData:function(e,t){if(__DEV__){var n=a.get(e.coordinateSystem);if(!n)throw new Error("Unkown coordinate system "+e.coordinateSystem)}var r=new i(["value"],this);return r.hasItemOption=!1,r.initData(e.data,[],function(e,t,i,n){if(e instanceof Array)return NaN;else{r.hasItemOption=!0;var a=e.value;if(null!=a)return a instanceof Array?a[n]:a}}),r},formatTooltip:function(e){var t=this.getData(),i=t.getItemModel(e),n=i.get("name");if(n)return n;var a=i.get("fromName"),o=i.get("toName"),s=[];return null!=a&&s.push(a),null!=o&&s.push(o),r.encodeHTML(s.join(" > "))},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{normal:{show:!1,position:"end"}},lineStyle:{normal:{opacity:.5}}}})}),define("zrender/graphic/Style",["require"],function(require){function e(e,t,i){var n=null==t.x?0:t.x,r=null==t.x2?1:t.x2,a=null==t.y?0:t.y,o=null==t.y2?0:t.y2;if(!t.global)n=n*i.width+i.x,r=r*i.width+i.x,a=a*i.height+i.y,o=o*i.height+i.y;var s=e.createLinearGradient(n,a,r,o);return s}function t(e,t,i){var n=i.width,r=i.height,a=Math.min(n,r),o=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;if(!t.global)o=o*n+i.x,s=s*r+i.y,l*=a;var u=e.createRadialGradient(o,s,0,o,s,l);return u}var i=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],n=function(e){this.extendFrom(e)};n.prototype={constructor:n,fill:"#000000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,textFill:"#000",textStroke:null,textPosition:"inside",textOffset:null,textBaseline:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textTransform:!1,textRotation:0,blend:null,bind:function(e,t,n){for(var r=this,a=n&&n.style,o=!a,s=0;s<i.length;s++){var l=i[s],u=l[0];if(o||r[u]!==a[u])e[u]=r[u]||l[1]}if(o||r.fill!==a.fill)e.fillStyle=r.fill;if(o||r.stroke!==a.stroke)e.strokeStyle=r.stroke;if(o||r.opacity!==a.opacity)e.globalAlpha=null==r.opacity?1:r.opacity;if(o||r.blend!==a.blend)e.globalCompositeOperation=r.blend||"source-over";if(this.hasStroke()){var A=r.lineWidth;e.lineWidth=A/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1)}},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&this.lineWidth>0},extendFrom:function(e,t){if(e){var i=this;for(var n in e)if(e.hasOwnProperty(n)&&(t||!i.hasOwnProperty(n)))i[n]=e[n]}},set:function(e,t){if("string"==typeof e)this[e]=t;else this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(i,n,r){for(var a="radial"===n.type?t:e,o=a(i,n,r),s=n.colorStops,l=0;l<s.length;l++)o.addColorStop(s[l].offset,s[l].color);return o}};for(var r=n.prototype,a=0;a<i.length;a++){var o=i[a];if(!(o[0]in r))r[o[0]]=o[1]}return n.getGradient=r.getGradient,n}),define("zrender/core/guid",[],function(){var e=2311;return function(){return e++}}),define("zrender/mixin/Eventful",["require"],function(require){var e=Array.prototype.slice,t=function(){this._$handlers={}};return t.prototype={constructor:t,one:function(e,t,i){var n=this._$handlers;if(!t||!e)return this;if(!n[e])n[e]=[];for(var r=0;r<n[e].length;r++)if(n[e][r].h===t)return this;return n[e].push({h:t,one:!0,ctx:i||this}),this},on:function(e,t,i){var n=this._$handlers;if(!t||!e)return this;if(!n[e])n[e]=[];for(var r=0;r<n[e].length;r++)if(n[e][r].h===t)return this;return n[e].push({h:t,one:!1,ctx:i||this}),this},isSilent:function(e){var t=this._$handlers;return t[e]&&t[e].length},off:function(e,t){var i=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var n=[],r=0,a=i[e].length;a>r;r++)if(i[e][r].h!=t)n.push(i[e][r]);i[e]=n}if(i[e]&&0===i[e].length)delete i[e]}else delete i[e];return this},trigger:function(t){if(this._$handlers[t]){var i=arguments,n=i.length;if(n>3)i=e.call(i,1);for(var r=this._$handlers[t],a=r.length,o=0;a>o;){switch(n){case 1:r[o].h.call(r[o].ctx);break;case 2:r[o].h.call(r[o].ctx,i[1]);break;case 3:r[o].h.call(r[o].ctx,i[1],i[2]);break;default:r[o].h.apply(r[o].ctx,i)}if(r[o].one)r.splice(o,1),a--;else o++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var i=arguments,n=i.length;if(n>4)i=e.call(i,1,i.length-1);for(var r=i[i.length-1],a=this._$handlers[t],o=a.length,s=0;o>s;){switch(n){case 1:a[s].h.call(r);break;case 2:a[s].h.call(r,i[1]);break;case 3:a[s].h.call(r,i[1],i[2]);break;default:a[s].h.apply(r,i)}if(a[s].one)a.splice(s,1),o--;else s++}}return this}},t}),define("zrender/mixin/Transformable",["require","../core/matrix","../core/vector"],function(require){"use strict";function e(e){return e>r||-r>e}var t=require("../core/matrix"),i=require("../core/vector"),n=t.identity,r=5e-5,a=function(e){if(e=e||{},!e.position)this.position=[0,0];if(null==e.rotation)this.rotation=0;if(!e.scale)this.scale=[1,1];this.origin=this.origin||null},o=a.prototype;o.transform=null,o.needLocalTransform=function(){return e(this.rotation)||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)},o.updateTransform=function(){var e=this.parent,i=e&&e.transform,r=this.needLocalTransform(),a=this.transform;if(!r&&!i)return void(a&&n(a));if(a=a||t.create(),r)this.getLocalTransform(a);else n(a);if(i)if(r)t.mul(a,e.transform,a);else t.copy(a,e.transform);this.transform=a,this.invTransform=this.invTransform||t.create(),t.invert(this.invTransform,a)},o.getLocalTransform=function(e){return a.getLocalTransform(this,e)},o.setTransform=function(e){var t=this.transform,i=e.dpr||1;if(t)e.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]);else e.setTransform(i,0,0,i,0,0)},o.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var s=[];return o.decomposeTransform=function(){if(this.transform){var i=this.parent,n=this.transform;if(i&&i.transform)t.mul(s,i.invTransform,n),n=s;var r=n[0]*n[0]+n[1]*n[1],a=n[2]*n[2]+n[3]*n[3],o=this.position,l=this.scale;if(e(r-1))r=Math.sqrt(r);if(e(a-1))a=Math.sqrt(a);if(n[0]<0)r=-r;if(n[3]<0)a=-a;o[0]=n[4],o[1]=n[5],l[0]=r,l[1]=a,this.rotation=Math.atan2(-n[1]/a,n[0]/r)}},o.getGlobalScale=function(){var e=this.transform;if(!e)return[1,1];var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(e[2]*e[2]+e[3]*e[3]);if(e[0]<0)t=-t;if(e[3]<0)i=-i;return[t,i]},o.transformCoordToLocal=function(e,t){var n=[e,t],r=this.invTransform;if(r)i.applyTransform(n,n,r);return n},o.transformCoordToGlobal=function(e,t){var n=[e,t],r=this.transform;if(r)i.applyTransform(n,n,r);return n},a.getLocalTransform=function(e,i){i=i||[],n(i);var r=e.origin,a=e.scale||[1,1],o=e.rotation||0,s=e.position||[0,0];if(r)i[4]-=r[0],i[5]-=r[1];if(t.scale(i,i,a),o)t.rotate(i,i,o);if(r)i[4]+=r[0],i[5]+=r[1];return i[4]+=s[0],i[5]+=s[1],i},a}),define("zrender/animation/easing",[],function(){var e={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){if((e*=2)<1)return.5*e*e;else return-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){if((e*=2)<1)return.5*e*e*e;else return.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){if((e*=2)<1)return.5*e*e*e*e;else return-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){if((e*=2)<1)return.5*e*e*e*e*e;else return.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){if(0===e)return 0;if(1===e)return 1;if((e*=2)<1)return.5*Math.pow(1024,e-1);else return.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){if((e*=2)<1)return-.5*(Math.sqrt(1-e*e)-1);else return.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,i=.1,n=.4;if(0===e)return 0;if(1===e)return 1;if(!i||1>i)i=1,t=n/4;else t=n*Math.asin(1/i)/(2*Math.PI);return-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/n))},elasticOut:function(e){var t,i=.1,n=.4;if(0===e)return 0;if(1===e)return 1;if(!i||1>i)i=1,t=n/4;else t=n*Math.asin(1/i)/(2*Math.PI);return i*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/n)+1},elasticInOut:function(e){var t,i=.1,n=.4;if(0===e)return 0;if(1===e)return 1;if(!i||1>i)i=1,t=n/4;else t=n*Math.asin(1/i)/(2*Math.PI);if((e*=2)<1)return-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/n);else return i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/n)*.5+1},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;if((e*=2)<1)return.5*e*e*((t+1)*e-t);else return.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(t){return 1-e.bounceOut(1-t)},bounceOut:function(e){if(1/2.75>e)return 7.5625*e*e;else if(2/2.75>e)return 7.5625*(e-=1.5/2.75)*e+.75;else if(2.5/2.75>e)return 7.5625*(e-=2.25/2.75)*e+.9375;else return 7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(t){if(.5>t)return.5*e.bounceIn(2*t);else return.5*e.bounceOut(2*t-1)+.5}};return e}),define("zrender/animation/Clip",["require","./easing"],function(require){function e(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null==e.loop?!1:e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}var t=require("./easing");return e.prototype={constructor:e,step:function(e,i){if(!this._initialized)this._startTime=e+this._delay,this._initialized=!0;if(this._paused)return void(this._pausedTime+=i);var n=(e-this._startTime-this._pausedTime)/this._life;if(!(0>n)){n=Math.min(n,1);var r=this.easing,a="string"==typeof r?t[r]:r,o="function"==typeof a?a(n):n;if(this.fire("frame",o),1==n)if(this.loop)return this.restart(e),"restart";else return this._needsRemove=!0,"destroy";return null}},restart:function(e){var t=(e-this._startTime-this._pausedTime)%this._life;this._startTime=e-t+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){if(e="on"+e,this[e])this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}},e}),define("zrender/core/LRU",["require"],function(require){var e=function(){this.head=null,this.tail=null,this._len=0},t=e.prototype;t.insert=function(e){var t=new i(e);return this.insertEntry(t),t},t.insertEntry=function(e){if(!this.head)this.head=this.tail=e;else this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e;this._len++},t.remove=function(e){var t=e.prev,i=e.next;if(t)t.next=i;else this.head=i;if(i)i.prev=t;else this.tail=t;e.next=e.prev=null,this._len--},t.len=function(){return this._len},t.clear=function(){this.head=this.tail=null,this._len=0};var i=function(e){this.value=e,this.next,this.prev},n=function(t){this._list=new e,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},r=n.prototype;return r.put=function(e,t){var n=this._list,r=this._map,a=null;if(null==r[e]){var o=n.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=n.head;n.remove(l),delete r[l.key],a=l.value,this._lastRemovedEntry=l}if(s)s.value=t;else s=new i(t);s.key=e,n.insertEntry(s),r[e]=s}return a},r.get=function(e){var t=this._map[e],i=this._list;if(null!=t){if(t!==i.tail)i.remove(t),i.insertEntry(t);return t.value}},r.clear=function(){this._list.clear(),this._map={}},n}),define("zrender/tool/color",["require","../core/LRU"],function(require){function e(e){return e=Math.round(e),0>e?0:e>255?255:e}function t(e){return e=Math.round(e),0>e?0:e>360?360:e}function i(e){return 0>e?0:e>1?1:e}function n(t){if(t.length&&"%"===t.charAt(t.length-1))return e(parseFloat(t)/100*255);else return e(parseInt(t,10))}function r(e){if(e.length&&"%"===e.charAt(e.length-1))return i(parseFloat(e)/100);else return i(parseFloat(e))}function a(e,t,i){if(0>i)i+=1;else if(i>1)i-=1;if(1>6*i)return e+(t-e)*i*6;if(1>2*i)return t;if(2>3*i)return e+(t-e)*(2/3-i)*6;else return e}function o(e,t,i){return e+(t-e)*i}function s(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function u(e,t){if(H)l(H,t);H=g.put(e,H||t.slice())}function A(e,t){if(e){t=t||[];var i=g.get(e);if(i)return l(t,i);e+="";var a=e.replace(/ /g,"").toLowerCase();if(a in m)return l(t,m[a]),u(e,t),t;if("#"!==a.charAt(0)){var o=a.indexOf("("),A=a.indexOf(")");if(-1!==o&&A+1===a.length){var c=a.substr(0,o),C=a.substr(o+1,A-(o+1)).split(","),D=1;switch(c){case"rgba":if(4!==C.length)return void s(t,0,0,0,1);D=r(C.pop());case"rgb":if(3!==C.length)return void s(t,0,0,0,1);else return s(t,n(C[0]),n(C[1]),n(C[2]),D),u(e,t),t;case"hsla":if(4!==C.length)return void s(t,0,0,0,1);else return C[3]=r(C[3]),B(C,t),u(e,t),t;case"hsl":if(3!==C.length)return void s(t,0,0,0,1);else return B(C,t),u(e,t),t;default:return}}s(t,0,0,0,1)}else if(4===a.length){var d=parseInt(a.substr(1),16);if(!(d>=0&&4095>=d))return void s(t,0,0,0,1);else return s(t,(3840&d)>>4|(3840&d)>>8,240&d|(240&d)>>4,15&d|(15&d)<<4,1),u(e,t),t}else if(7===a.length){var d=parseInt(a.substr(1),16);if(!(d>=0&&16777215>=d))return void s(t,0,0,0,1);else return s(t,(16711680&d)>>16,(65280&d)>>8,255&d,1),u(e,t),t}}}function B(t,i){var n=(parseFloat(t[0])%360+360)%360/360,o=r(t[1]),l=r(t[2]),u=.5>=l?l*(o+1):l+o-l*o,A=2*l-u;if(i=i||[],s(i,e(255*a(A,u,n+1/3)),e(255*a(A,u,n)),e(255*a(A,u,n-1/3)),1),4===t.length)i[3]=t[3];return i}function c(e){if(e){var t,i,n=e[0]/255,r=e[1]/255,a=e[2]/255,o=Math.min(n,r,a),s=Math.max(n,r,a),l=s-o,u=(s+o)/2;if(0===l)t=0,i=0;else{if(.5>u)i=l/(s+o);else i=l/(2-s-o);var A=((s-n)/6+l/2)/l,B=((s-r)/6+l/2)/l,c=((s-a)/6+l/2)/l;if(n===s)t=c-B;else if(r===s)t=1/3+A-c;else if(a===s)t=2/3+B-A;if(0>t)t+=1;if(t>1)t-=1}var C=[360*t,i,u];if(null!=e[3])C.push(e[3]);return C}}function C(e,t){var i=A(e);if(i){for(var n=0;3>n;n++)if(0>t)i[n]=i[n]*(1-t)|0;else i[n]=(255-i[n])*t+i[n]|0;return p(i,4===i.length?"rgba":"rgb")}}function D(e,t){var i=A(e);if(i)return((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1);else return void 0}function d(t,n,r){if(n&&n.length&&t>=0&&1>=t){r=r||[];var a=t*(n.length-1),s=Math.floor(a),l=Math.ceil(a),u=n[s],A=n[l],B=a-s;return r[0]=e(o(u[0],A[0],B)),r[1]=e(o(u[1],A[1],B)),r[2]=e(o(u[2],A[2],B)),r[3]=i(o(u[3],A[3],B)),r}}function f(t,n,r){if(n&&n.length&&t>=0&&1>=t){var a=t*(n.length-1),s=Math.floor(a),l=Math.ceil(a),u=A(n[s]),B=A(n[l]),c=a-s,C=p([e(o(u[0],B[0],c)),e(o(u[1],B[1],c)),e(o(u[2],B[2],c)),i(o(u[3],B[3],c))],"rgba");return r?{color:C,leftIndex:s,rightIndex:l,value:a}:C}}function h(e,i,n,a){if(e=A(e))return e=c(e),null!=i&&(e[0]=t(i)),null!=n&&(e[1]=r(n)),null!=a&&(e[2]=r(a)),p(B(e),"rgba");else return void 0}function E(e,t){if(e=A(e),e&&null!=t)return e[3]=i(t),p(e,"rgba");else return void 0}function p(e,t){if(e&&e.length){var i=e[0]+","+e[1]+","+e[2];if("rgba"===t||"hsva"===t||"hsla"===t)i+=","+e[3];return t+"("+i+")"}}var F=require("../core/LRU"),m={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},g=new F(20),H=null;return{parse:A,lift:C,toHex:D,fastMapToColor:d,mapToColor:f,modifyHSL:h,modifyAlpha:E,stringify:p}}),define("zrender/animation/Animator",["require","./Clip","../tool/color","../core/util"],function(require){function e(e,t){return e[t]}function t(e,t,i){e[t]=i}function i(e,t,i){return(t-e)*i+e}function n(e,t,i){return i>.5?t:e}function r(e,t,n,r,a){var o=e.length;if(1==a)for(var s=0;o>s;s++)r[s]=i(e[s],t[s],n);else for(var l=e[0].length,s=0;o>s;s++)for(var u=0;l>u;u++)r[s][u]=i(e[s][u],t[s][u],n)}function a(e,t,i){var n=e.length,r=t.length;if(n!==r){var a=n>r;if(a)e.length=r;else for(var o=n;r>o;o++)e.push(1===i?t[o]:f.call(t[o]))}for(var s=e[0]&&e[0].length,o=0;o<e.length;o++)if(1===i){if(isNaN(e[o]))e[o]=t[o]}else for(var l=0;s>l;l++)if(isNaN(e[o][l]))e[o][l]=t[o][l]}function o(e,t,i){if(e===t)return!0;var n=e.length;if(n!==t.length)return!1;if(1===i){for(var r=0;n>r;r++)if(e[r]!==t[r])return!1}else for(var a=e[0].length,r=0;n>r;r++)for(var o=0;a>o;o++)if(e[r][o]!==t[r][o])return!1;return!0}function s(e,t,i,n,r,a,o,s,u){var A=e.length;if(1==u)for(var B=0;A>B;B++)s[B]=l(e[B],t[B],i[B],n[B],r,a,o);else for(var c=e[0].length,B=0;A>B;B++)for(var C=0;c>C;C++)s[B][C]=l(e[B][C],t[B][C],i[B][C],n[B][C],r,a,o)}function l(e,t,i,n,r,a,o){var s=.5*(i-e),l=.5*(n-t);return(2*(t-i)+s+l)*o+(-3*(t-i)-2*s-l)*a+s*r+t}function u(e){if(d(e)){var t=e.length;if(d(e[0])){for(var i=[],n=0;t>n;n++)i.push(f.call(e[n]));return i}return f.call(e)}return e}function A(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function B(e,t,u,B,D){var f=e._getter,h=e._setter,E="spline"===t,p=B.length;if(p){var F,m=B[0].value,g=d(m),H=!1,G=!1,I=g&&d(m[0])?2:1;B.sort(function(e,t){return e.time-t.time}),F=B[p-1].time;for(var v=[],y=[],J=B[0].value,L=!0,M=0;p>M;M++){v.push(B[M].time/F);var b=B[M].value;if(!(g&&o(b,J,I)||!g&&b===J))L=!1;if(J=b,"string"==typeof b){var N=C.parse(b);if(N)b=N,H=!0;else G=!0}y.push(b)}if(!L){for(var K=y[p-1],M=0;p-1>M;M++)if(g)a(y[M],K,I);else if(isNaN(y[M])&&!isNaN(K)&&!G&&!H)y[M]=K;g&&a(f(e._target,D),K,I);var x,P,_,O,T,S,w=0,R=0;if(H)var k=[0,0,0,0];var Q=function(e,t){var a;if(0>t)a=0;else if(R>t){for(x=Math.min(w+1,p-1),a=x;a>=0&&!(v[a]<=t);a--);a=Math.min(a,p-2)}else{for(a=w;p>a&&!(v[a]>t);a++);a=Math.min(a-1,p-2)}w=a,R=t;var o=v[a+1]-v[a];if(0!==o)if(P=(t-v[a])/o,E)if(O=y[a],_=y[0===a?a:a-1],T=y[a>p-2?p-1:a+1],S=y[a>p-3?p-1:a+2],g)s(_,O,T,S,P,P*P,P*P*P,f(e,D),I);else{var u;if(H)u=s(_,O,T,S,P,P*P,P*P*P,k,1),u=A(k);else if(G)return n(O,T,P);else u=l(_,O,T,S,P,P*P,P*P*P);h(e,D,u)}else if(g)r(y[a],y[a+1],P,f(e,D),I);else{var u;if(H)r(y[a],y[a+1],P,k,1),u=A(k);else if(G)return n(y[a],y[a+1],P);else u=i(y[a],y[a+1],P);h(e,D,u)}},V=new c({target:e._target,life:F,loop:e._loop,delay:e._delay,onframe:Q,ondestroy:u});if(t&&"spline"!==t)V.easing=t;return V}}}var c=require("./Clip"),C=require("../tool/color"),D=require("../core/util"),d=D.isArrayLike,f=Array.prototype.slice,h=function(i,n,r,a){this._tracks={},this._target=i,this._loop=n||!1,this._getter=r||e,this._setter=a||t,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};return h.prototype={when:function(e,t){var i=this._tracks;for(var n in t)if(t.hasOwnProperty(n)){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;if(0!==e)i[n].push({time:0,value:u(r)})}i[n].push({time:e,value:t[n]})}else;return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,i=0;t>i;i++)e[i].call(this)},start:function(e){var t,i=this,n=0,r=function(){if(n--,!n)i._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var o=B(this,e,r,this._tracks[a],a);if(o){if(this._clipList.push(o),n++,this.animation)this.animation.addClip(o);t=o}}else;if(t){var s=t.onframe;t.onframe=function(e,t){s(e,t);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](e,t)}}if(!n)this._doneCallback();return this},stop:function(e){for(var t=this._clipList,i=this.animation,n=0;n<t.length;n++){var r=t[n];if(e)r.onframe(this._target,1);i&&i.removeClip(r)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){if(e)this._doneList.push(e);return this},getClips:function(){return this._clipList}},h}),define("zrender/config",[],function(){var e=1;if("undefined"!=typeof window)e=Math.max(window.devicePixelRatio||1,1);var t={debugMode:0,devicePixelRatio:e};return t}),define("zrender/core/log",["require","../config"],function(require){var e=require("../config");return function(){if(0!==e.debugMode)if(1==e.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(e.debugMode>1)for(var t in arguments)console.log(arguments[t])}}),define("zrender/mixin/Animatable",["require","../animation/Animator","../core/util","../core/log"],function(require){"use strict";var e=require("../animation/Animator"),t=require("../core/util"),i=t.isString,n=t.isFunction,r=t.isObject,a=require("../core/log"),o=function(){this.animators=[]};return o.prototype={constructor:o,animate:function(i,n){var r,o=!1,s=this,l=this.__zr;if(i){var u=i.split("."),A=s;o="shape"===u[0];for(var B=0,c=u.length;c>B;B++)if(A)A=A[u[B]];else;if(A)r=A}else r=s;if(!r)return void a('Property "'+i+'" is not existed in element '+s.id);var C=s.animators,D=new e(r,n);if(D.during(function(e){s.dirty(o)}).done(function(){C.splice(t.indexOf(C,D),1)}),C.push(D),l)l.animation.addAnimator(D);return D},stopAnimation:function(e){for(var t=this.animators,i=t.length,n=0;i>n;n++)t[n].stop(e);return t.length=0,this},animateTo:function(e,t,r,a,o){function s(){if(u--,!u)o&&o()}if(i(r))o=a,a=r,r=0;else if(n(a))o=a,a="linear",r=0;else if(n(r))o=r,r=0;else if(n(t))o=t,t=500;else if(!t)t=500;this.stopAnimation(),this._animateToShallow("",this,e,t,r,a,o);var l=this.animators.slice(),u=l.length;if(!u)o&&o();for(var A=0;A<l.length;A++)l[A].done(s).start(a)},_animateToShallow:function(e,i,n,a,o){
var s={},l=0;for(var u in n)if(n.hasOwnProperty(u)){if(null!=i[u])if(r(n[u])&&!t.isArrayLike(n[u]))this._animateToShallow(e?e+"."+u:u,i[u],n[u],a,o);else s[u]=n[u],l++;else if(null!=n[u])if(!e)this.attr(u,n[u]);else{var A={};A[e]={},A[e][u]=n[u],this.attr(A)}}else;if(l>0)this.animate(e,!1).when(null==a?500:a,s).delay(o||0);return this}},o}),define("zrender/Element",["require","./core/guid","./mixin/Eventful","./mixin/Transformable","./mixin/Animatable","./core/util"],function(require){"use strict";var e=require("./core/guid"),t=require("./mixin/Eventful"),i=require("./mixin/Transformable"),n=require("./mixin/Animatable"),r=require("./core/util"),a=function(r){i.call(this,r),t.call(this,r),n.call(this,r),this.id=r.id||e()};return a.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var i=this.transform;if(!i)i=this.transform=[1,0,0,1,0,0];i[4]+=e,i[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var i=this[e];if(!i)i=this[e]=[];i[0]=t[0],i[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(r.isObject(e))for(var i in e)if(e.hasOwnProperty(i))this.attrKV(i,e[i]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;if(t)e.addSelfToZr(t);if(this.clipPath&&this.clipPath!==e)this.removeClipPath();this.clipPath=e,e.__zr=t,e.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var e=this.clipPath;if(e){if(e.__zr)e.removeSelfFromZr(e.__zr);e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1)}},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);if(this.clipPath)this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);if(this.clipPath)this.clipPath.removeSelfFromZr(e)}},r.mixin(a,n),r.mixin(a,i),r.mixin(a,t),a}),define("zrender/contain/text",["require","../core/util","../core/BoundingRect"],function(require){function e(e,t){var i=e+":"+t;if(a[i])return a[i];for(var n=(e+"").split("\n"),r=0,l=0,u=n.length;u>l;l++)r=Math.max(B.measureText(n[l],t).width,r);if(o>s)o=0,a={};return o++,a[i]=r,r}function t(t,i,n,r){var a=((t||"")+"").split("\n").length,o=e(t,i),s=e("国",i),l=a*s,A=new u(0,0,o,l);switch(A.lineHeight=s,r){case"bottom":case"alphabetic":A.y-=s;break;case"middle":A.y-=s/2}switch(n){case"end":case"right":A.x-=A.width;break;case"center":A.x-=A.width/2}return A}function i(e,t,i,n){var r=t.x,a=t.y,o=t.height,s=t.width,l=i.height,u=i.lineHeight,A=o/2-l/2+u,B="left";switch(e){case"left":r-=n,a+=A,B="right";break;case"right":r+=n+s,a+=A,B="left";break;case"top":r+=s/2,a-=n+l-u,B="center";break;case"bottom":r+=s/2,a+=o+n+u,B="center";break;case"inside":r+=s/2,a+=A,B="center";break;case"insideLeft":r+=n,a+=A,B="left";break;case"insideRight":r+=s-n,a+=A,B="right";break;case"insideTop":r+=s/2,a+=n,B="center";break;case"insideBottom":r+=s/2,a+=o-l-n+u,B="center";break;case"insideTopLeft":r+=n,a+=n,B="left";break;case"insideTopRight":r+=s-n,a+=n,B="right";break;case"insideBottomLeft":r+=n,a+=o-l-n+u;break;case"insideBottomRight":r+=s-n,a+=o-l-n+u,B="right"}return{x:r,y:a,textAlign:B,textBaseline:"alphabetic"}}function n(t,i,n,a,o){if(!i)return"";o=o||{},a=A(a,"...");for(var s=A(o.maxIterations,2),l=A(o.minChar,0),u=e("国",n),B=e("a",n),c=A(o.placeholder,""),C=i=Math.max(0,i-1),D=0;l>D&&C>=B;D++)C-=B;var d=e(a);if(d>C)a="",d=0;C=i-d;for(var f=(t+"").split("\n"),D=0,h=f.length;h>D;D++){var E=f[D],p=e(E,n);if(!(i>=p)){for(var F=0;;F++){if(C>=p||F>=s){E+=a;break}var m=0===F?r(E,C,B,u):p>0?Math.floor(E.length*C/p):0;E=E.substr(0,m),p=e(E,n)}if(""===E)E=c;f[D]=E}else;}return f.join("\n")}function r(e,t,i,n){for(var r=0,a=0,o=e.length;o>a&&t>r;a++){var s=e.charCodeAt(a);r+=s>=0&&127>=s?i:n}return a}var a={},o=0,s=5e3,l=require("../core/util"),u=require("../core/BoundingRect"),A=l.retrieve,B={getWidth:e,getBoundingRect:t,adjustTextPositionOnRect:i,truncateText:n,measureText:function(e,t){var i=l.getContext();return i.font=t||"12px sans-serif",i.measureText(e)}};return B}),define("zrender/graphic/mixin/RectText",["require","../../contain/text","../../core/BoundingRect"],function(require){function e(e,t){if("string"==typeof e)if(e.lastIndexOf("%")>=0)return parseFloat(e)/100*t;else return parseFloat(e);return e}var t=require("../../contain/text"),i=require("../../core/BoundingRect"),n=new i,r=function(){};return r.prototype={constructor:r,drawRectText:function(i,r,a){var o=this.style,s=o.text;if(null!=s&&(s+=""),s){i.save();var l,u,A=o.textPosition,B=o.textOffset,c=o.textDistance,C=o.textAlign,D=o.textFont||o.font,d=o.textBaseline,f=o.textVerticalAlign;a=a||t.getBoundingRect(s,D,C,d);var h=this.transform;if(!o.textTransform){if(h)n.copy(r),n.applyTransform(h),r=n}else this.setTransform(i);if(A instanceof Array){if(l=r.x+e(A[0],r.width),u=r.y+e(A[1],r.height),C=C||"left",d=d||"top",f){switch(f){case"middle":u-=a.height/2-a.lineHeight/2;break;case"bottom":u-=a.height-a.lineHeight/2;break;default:u+=a.lineHeight/2}d="middle"}}else{var E=t.adjustTextPositionOnRect(A,r,a,c);l=E.x,u=E.y,C=C||E.textAlign,d=d||E.textBaseline}if(B)l+=B[0],u+=B[1];i.textAlign=C||"left",i.textBaseline=d||"alphabetic";var p=o.textFill,F=o.textStroke;p&&(i.fillStyle=p),F&&(i.strokeStyle=F),i.font=D||"12px sans-serif",i.shadowBlur=o.textShadowBlur,i.shadowColor=o.textShadowColor||"transparent",i.shadowOffsetX=o.textShadowOffsetX,i.shadowOffsetY=o.textShadowOffsetY;var m=s.split("\n");if(o.textRotation)h&&i.translate(h[4],h[5]),i.rotate(o.textRotation),h&&i.translate(-h[4],-h[5]);for(var g=0;g<m.length;g++)F&&i.strokeText(m[g],l,u),p&&i.fillText(m[g],l,u),u+=a.lineHeight;i.restore()}}},r}),define("zrender/graphic/Displayable",["require","../core/util","./Style","../Element","./mixin/RectText"],function(require){function e(e){e=e||{},n.call(this,e);for(var t in e)if(e.hasOwnProperty(t)&&"style"!==t)this[t]=e[t];this.style=new i(e.style),this._rect=null,this.__clipPaths=[]}var t=require("../core/util"),i=require("./Style"),n=require("../Element"),r=require("./mixin/RectText");return e.prototype={constructor:e,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var i=this.transformCoordToLocal(e,t),n=this.getBoundingRect();return n.contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){if("style"!==e)n.prototype.attrKV.call(this,e,t);else this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new i(e),this.dirty(!1),this}},t.inherits(e,n),t.mixin(e,r),e}),define("zrender/core/curve",["require","./vector"],function(require){"use strict";function e(e){return e>-p&&p>e}function t(e){return e>p||-p>e}function i(e,t,i,n,r){var a=1-r;return a*a*(a*e+3*r*t)+r*r*(r*n+3*a*i)}function n(e,t,i,n,r){var a=1-r;return 3*(((t-e)*a+2*(i-t)*r)*a+(n-i)*r*r)}function r(t,i,n,r,a,o){var s=r+3*(i-n)-t,l=3*(n-2*i+t),u=3*(i-t),A=t-a,B=l*l-3*s*u,c=l*u-9*s*A,C=u*u-3*l*A,D=0;if(e(B)&&e(c))if(e(l))o[0]=0;else{var d=-u/l;if(d>=0&&1>=d)o[D++]=d}else{var f=c*c-4*B*C;if(e(f)){var p=c/B,d=-l/s+p,F=-p/2;if(d>=0&&1>=d)o[D++]=d;if(F>=0&&1>=F)o[D++]=F}else if(f>0){var H=E(f),G=B*l+1.5*s*(-c+H),I=B*l+1.5*s*(-c-H);if(0>G)G=-h(-G,g);else G=h(G,g);if(0>I)I=-h(-I,g);else I=h(I,g);var d=(-l-(G+I))/(3*s);if(d>=0&&1>=d)o[D++]=d}else{var v=(2*B*l-3*s*c)/(2*E(B*B*B)),y=Math.acos(v)/3,J=E(B),L=Math.cos(y),d=(-l-2*J*L)/(3*s),F=(-l+J*(L+m*Math.sin(y)))/(3*s),M=(-l+J*(L-m*Math.sin(y)))/(3*s);if(d>=0&&1>=d)o[D++]=d;if(F>=0&&1>=F)o[D++]=F;if(M>=0&&1>=M)o[D++]=M}}return D}function a(i,n,r,a,o){var s=6*r-12*n+6*i,l=9*n+3*a-3*i-9*r,u=3*n-3*i,A=0;if(e(l)){if(t(s)){var B=-u/s;if(B>=0&&1>=B)o[A++]=B}}else{var c=s*s-4*l*u;if(e(c))o[0]=-s/(2*l);else if(c>0){var C=E(c),B=(-s+C)/(2*l),D=(-s-C)/(2*l);if(B>=0&&1>=B)o[A++]=B;if(D>=0&&1>=D)o[A++]=D}}return A}function o(e,t,i,n,r,a){var o=(t-e)*r+e,s=(i-t)*r+t,l=(n-i)*r+i,u=(s-o)*r+o,A=(l-s)*r+s,B=(A-u)*r+u;a[0]=e,a[1]=o,a[2]=u,a[3]=B,a[4]=B,a[5]=A,a[6]=l,a[7]=n}function s(e,t,n,r,a,o,s,l,u,A,B){var c,C,D,d,h,p=.005,m=1/0;H[0]=u,H[1]=A;for(var g=0;1>g;g+=.05)if(G[0]=i(e,n,a,s,g),G[1]=i(t,r,o,l,g),d=f(H,G),m>d)c=g,m=d;m=1/0;for(var v=0;32>v&&!(F>p);v++)if(C=c-p,D=c+p,G[0]=i(e,n,a,s,C),G[1]=i(t,r,o,l,C),d=f(G,H),C>=0&&m>d)c=C,m=d;else if(I[0]=i(e,n,a,s,D),I[1]=i(t,r,o,l,D),h=f(I,H),1>=D&&m>h)c=D,m=h;else p*=.5;if(B)B[0]=i(e,n,a,s,c),B[1]=i(t,r,o,l,c);return E(m)}function l(e,t,i,n){var r=1-n;return r*(r*e+2*n*t)+n*n*i}function u(e,t,i,n){return 2*((1-n)*(t-e)+n*(i-t))}function A(i,n,r,a,o){var s=i-2*n+r,l=2*(n-i),u=i-a,A=0;if(e(s)){if(t(l)){var B=-u/l;if(B>=0&&1>=B)o[A++]=B}}else{var c=l*l-4*s*u;if(e(c)){var B=-l/(2*s);if(B>=0&&1>=B)o[A++]=B}else if(c>0){var C=E(c),B=(-l+C)/(2*s),D=(-l-C)/(2*s);if(B>=0&&1>=B)o[A++]=B;if(D>=0&&1>=D)o[A++]=D}}return A}function B(e,t,i){var n=e+i-2*t;if(0===n)return.5;else return(e-t)/n}function c(e,t,i,n,r){var a=(t-e)*n+e,o=(i-t)*n+t,s=(o-a)*n+a;r[0]=e,r[1]=a,r[2]=s,r[3]=s,r[4]=o,r[5]=i}function C(e,t,i,n,r,a,o,s,u){var A,B=.005,c=1/0;H[0]=o,H[1]=s;for(var C=0;1>C;C+=.05){G[0]=l(e,i,r,C),G[1]=l(t,n,a,C);var D=f(H,G);if(c>D)A=C,c=D}c=1/0;for(var d=0;32>d&&!(F>B);d++){var h=A-B,p=A+B;G[0]=l(e,i,r,h),G[1]=l(t,n,a,h);var D=f(G,H);if(h>=0&&c>D)A=h,c=D;else{I[0]=l(e,i,r,p),I[1]=l(t,n,a,p);var m=f(I,H);if(1>=p&&c>m)A=p,c=m;else B*=.5}}if(u)u[0]=l(e,i,r,A),u[1]=l(t,n,a,A);return E(c)}var D=require("./vector"),d=D.create,f=D.distSquare,h=Math.pow,E=Math.sqrt,p=1e-8,F=1e-4,m=E(3),g=1/3,H=d(),G=d(),I=d();return{cubicAt:i,cubicDerivativeAt:n,cubicRootAt:r,cubicExtrema:a,cubicSubdivide:o,cubicProjectPoint:s,quadraticAt:l,quadraticDerivativeAt:u,quadraticRootAt:A,quadraticExtremum:B,quadraticSubdivide:c,quadraticProjectPoint:C}}),define("zrender/core/bbox",["require","./vector","./curve"],function(require){var e=require("./vector"),t=require("./curve"),i={},n=Math.min,r=Math.max,a=Math.sin,o=Math.cos,s=e.create(),l=e.create(),u=e.create(),A=2*Math.PI;i.fromPoints=function(e,t,i){if(0!==e.length){var a,o=e[0],s=o[0],l=o[0],u=o[1],A=o[1];for(a=1;a<e.length;a++)o=e[a],s=n(s,o[0]),l=r(l,o[0]),u=n(u,o[1]),A=r(A,o[1]);t[0]=s,t[1]=u,i[0]=l,i[1]=A}},i.fromLine=function(e,t,i,a,o,s){o[0]=n(e,i),o[1]=n(t,a),s[0]=r(e,i),s[1]=r(t,a)};var B=[],c=[];return i.fromCubic=function(e,i,a,o,s,l,u,A,C,D){var d,f=t.cubicExtrema,h=t.cubicAt,E=f(e,a,s,u,B);for(C[0]=1/0,C[1]=1/0,D[0]=-(1/0),D[1]=-(1/0),d=0;E>d;d++){var p=h(e,a,s,u,B[d]);C[0]=n(p,C[0]),D[0]=r(p,D[0])}for(E=f(i,o,l,A,c),d=0;E>d;d++){var F=h(i,o,l,A,c[d]);C[1]=n(F,C[1]),D[1]=r(F,D[1])}C[0]=n(e,C[0]),D[0]=r(e,D[0]),C[0]=n(u,C[0]),D[0]=r(u,D[0]),C[1]=n(i,C[1]),D[1]=r(i,D[1]),C[1]=n(A,C[1]),D[1]=r(A,D[1])},i.fromQuadratic=function(e,i,a,o,s,l,u,A){var B=t.quadraticExtremum,c=t.quadraticAt,C=r(n(B(e,a,s),1),0),D=r(n(B(i,o,l),1),0),d=c(e,a,s,C),f=c(i,o,l,D);u[0]=n(e,s,d),u[1]=n(i,l,f),A[0]=r(e,s,d),A[1]=r(i,l,f)},i.fromArc=function(t,i,n,r,B,c,C,D,d){var f=e.min,h=e.max,E=Math.abs(B-c);if(1e-4>E%A&&E>1e-4)return D[0]=t-n,D[1]=i-r,d[0]=t+n,void(d[1]=i+r);if(s[0]=o(B)*n+t,s[1]=a(B)*r+i,l[0]=o(c)*n+t,l[1]=a(c)*r+i,f(D,s,l),h(d,s,l),B%=A,0>B)B+=A;if(c%=A,0>c)c+=A;if(B>c&&!C)c+=A;else if(c>B&&C)B+=A;if(C){var p=c;c=B,B=p}for(var F=0;c>F;F+=Math.PI/2)if(F>B)u[0]=o(F)*n+t,u[1]=a(F)*r+i,f(D,u,D),h(d,u,d)},i}),define("zrender/core/PathProxy",["require","./curve","./vector","./bbox","./BoundingRect","../config"],function(require){"use strict";var e=require("./curve"),t=require("./vector"),i=require("./bbox"),n=require("./BoundingRect"),r=require("../config").devicePixelRatio,a={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},o=[],s=[],l=[],u=[],A=Math.min,B=Math.max,c=Math.cos,C=Math.sin,D=Math.sqrt,d=Math.abs,f="undefined"!=typeof Float32Array,h=function(e){if(this._saveData=!e,this._saveData)this.data=[];this._ctx=null};return h.prototype={constructor:h,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t){this._ux=d(1/r/e)||0,this._uy=d(1/r/t)||0},getContext:function(){return this._ctx},beginPath:function(e){if(this._ctx=e,e&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData)this._len=0;if(this._lineDash)this._lineDash=null,this._dashOffset=0;return this},moveTo:function(e,t){return this.addData(a.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var i=d(e-this._xi)>this._ux||d(t-this._yi)>this._uy||this._len<5;if(this.addData(a.L,e,t),this._ctx&&i)this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t);if(i)this._xi=e,this._yi=t;return this},bezierCurveTo:function(e,t,i,n,r,o){if(this.addData(a.C,e,t,i,n,r,o),this._ctx)this._needsDash()?this._dashedBezierTo(e,t,i,n,r,o):this._ctx.bezierCurveTo(e,t,i,n,r,o);return this._xi=r,this._yi=o,this},quadraticCurveTo:function(e,t,i,n){if(this.addData(a.Q,e,t,i,n),this._ctx)this._needsDash()?this._dashedQuadraticTo(e,t,i,n):this._ctx.quadraticCurveTo(e,t,i,n);return this._xi=i,this._yi=n,this},arc:function(e,t,i,n,r,o){return this.addData(a.A,e,t,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(e,t,i,n,r,o),this._xi=c(r)*i+e,this._yi=C(r)*i+e,this},arcTo:function(e,t,i,n,r){if(this._ctx)this._ctx.arcTo(e,t,i,n,r);return this},rect:function(e,t,i,n){return this._ctx&&this._ctx.rect(e,t,i,n),this.addData(a.R,e,t,i,n),this},closePath:function(){this.addData(a.Z);var e=this._ctx,t=this._x0,i=this._y0;if(e)this._needsDash()&&this._dashedLineTo(t,i),e.closePath();return this._xi=t,this._yi=i,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e,this._dashIdx=0;for(var t=0,i=0;i<e.length;i++)t+=e[i];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;if((!this.data||this.data.length!=t)&&f)this.data=new Float32Array(t);for(var i=0;t>i;i++)this.data[i]=e[i];this._len=t},appendPath:function(e){if(!(e instanceof Array))e=[e];for(var t=e.length,i=0,n=this._len,r=0;t>r;r++)i+=e[r].len();if(f&&this.data instanceof Float32Array)this.data=new Float32Array(n+i);for(var r=0;t>r;r++)for(var a=e[r].data,o=0;o<a.length;o++)this.data[n++]=a[o];this._len=n},addData:function(e){if(this._saveData){var t=this.data;if(this._len+arguments.length>t.length)this._expandData(),t=this.data;for(var i=0;i<arguments.length;i++)t[this._len++]=arguments[i];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var i,n,r=this._dashSum,a=this._dashOffset,o=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,c=e-l,C=t-u,d=D(c*c+C*C),f=l,h=u,E=o.length;if(c/=d,C/=d,0>a)a=r+a;for(a%=r,f-=a*c,h-=a*C;c>0&&e>=f||0>c&&f>=e||0==c&&(C>0&&t>=h||0>C&&h>=t);)if(n=this._dashIdx,i=o[n],f+=c*i,h+=C*i,this._dashIdx=(n+1)%E,!(c>0&&l>f||0>c&&f>l||C>0&&u>h||0>C&&h>u))s[n%2?"moveTo":"lineTo"](c>=0?A(f,e):B(f,e),C>=0?A(h,t):B(h,t));else;c=f-e,C=h-t,this._dashOffset=-D(c*c+C*C)},_dashedBezierTo:function(t,i,n,r,a,o){var s,l,u,A,B,c=this._dashSum,C=this._dashOffset,d=this._lineDash,f=this._ctx,h=this._xi,E=this._yi,p=e.cubicAt,F=0,m=this._dashIdx,g=d.length,H=0;if(0>C)C=c+C;for(C%=c,s=0;1>s;s+=.1)l=p(h,t,n,a,s+.1)-p(h,t,n,a,s),u=p(E,i,r,o,s+.1)-p(E,i,r,o,s),F+=D(l*l+u*u);for(;g>m&&(H+=d[m],!(H>C));m++);for(s=(H-C)/F;1>=s;)A=p(h,t,n,a,s),B=p(E,i,r,o,s),m%2?f.moveTo(A,B):f.lineTo(A,B),s+=d[m]/F,m=(m+1)%g;m%2!==0&&f.lineTo(a,o),l=a-A,u=o-B,this._dashOffset=-D(l*l+u*u)},_dashedQuadraticTo:function(e,t,i,n){var r=i,a=n;i=(i+2*e)/3,n=(n+2*t)/3,e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,this._dashedBezierTo(e,t,i,n,r,a)},toStatic:function(){var e=this.data;if(e instanceof Array)if(e.length=this._len,f)this.data=new Float32Array(e)},getBoundingRect:function(){o[0]=o[1]=l[0]=l[1]=Number.MAX_VALUE,s[0]=s[1]=u[0]=u[1]=-Number.MAX_VALUE;for(var e=this.data,r=0,A=0,B=0,D=0,d=0;d<e.length;){var f=e[d++];if(1==d)r=e[d],A=e[d+1],B=r,D=A;switch(f){case a.M:B=e[d++],D=e[d++],r=B,A=D,l[0]=B,l[1]=D,u[0]=B,u[1]=D;break;case a.L:i.fromLine(r,A,e[d],e[d+1],l,u),r=e[d++],A=e[d++];break;case a.C:i.fromCubic(r,A,e[d++],e[d++],e[d++],e[d++],e[d],e[d+1],l,u),r=e[d++],A=e[d++];break;case a.Q:i.fromQuadratic(r,A,e[d++],e[d++],e[d],e[d+1],l,u),r=e[d++],A=e[d++];break;case a.A:var h=e[d++],E=e[d++],p=e[d++],F=e[d++],m=e[d++],g=e[d++]+m,H=(e[d++],1-e[d++]);if(1==d)B=c(m)*p+h,D=C(m)*F+E;i.fromArc(h,E,p,F,m,g,H,l,u),r=c(g)*p+h,A=C(g)*F+E;break;case a.R:B=r=e[d++],D=A=e[d++];var G=e[d++],I=e[d++];i.fromLine(B,D,B+G,D+I,l,u);break;case a.Z:r=B,A=D}t.min(o,o,l),t.max(s,s,u)}if(0===d)o[0]=o[1]=s[0]=s[1]=0;return new n(o[0],o[1],s[0]-o[0],s[1]-o[1])},rebuildPath:function(e){for(var t,i,n,r,o,s,l=this.data,u=this._ux,A=this._uy,B=this._len,D=0;B>D;){var f=l[D++];if(1==D)n=l[D],r=l[D+1],t=n,i=r;switch(f){case a.M:t=n=l[D++],i=r=l[D++],e.moveTo(n,r);break;case a.L:if(o=l[D++],s=l[D++],d(o-n)>u||d(s-r)>A||D===B-1)e.lineTo(o,s),n=o,r=s;break;case a.C:e.bezierCurveTo(l[D++],l[D++],l[D++],l[D++],l[D++],l[D++]),n=l[D-2],r=l[D-1];break;case a.Q:e.quadraticCurveTo(l[D++],l[D++],l[D++],l[D++]),n=l[D-2],r=l[D-1];break;case a.A:var h=l[D++],E=l[D++],p=l[D++],F=l[D++],m=l[D++],g=l[D++],H=l[D++],G=l[D++],I=p>F?p:F,v=p>F?1:p/F,y=p>F?F/p:1,J=Math.abs(p-F)>.001,L=m+g;if(J)e.translate(h,E),e.rotate(H),e.scale(v,y),e.arc(0,0,I,m,L,1-G),e.scale(1/v,1/y),e.rotate(-H),e.translate(-h,-E);else e.arc(h,E,I,m,L,1-G);if(1==D)t=c(m)*p+h,i=C(m)*F+E;n=c(L)*p+h,r=C(L)*F+E;break;case a.R:t=n=l[D],i=r=l[D+1],e.rect(l[D++],l[D++],l[D++],l[D++]);break;case a.Z:e.closePath(),n=t,r=i}}}},h.CMD=a,h}),define("zrender/contain/line",[],function(){return{containStroke:function(e,t,i,n,r,a,o){if(0===r)return!1;var s=r,l=0,u=e;if(o>t+s&&o>n+s||t-s>o&&n-s>o||a>e+s&&a>i+s||e-s>a&&i-s>a)return!1;if(e!==i)l=(t-n)/(e-i),u=(e*n-i*t)/(e-i);else return Math.abs(a-e)<=s/2;var A=l*a-o+u,B=A*A/(l*l+1);return s/2*s/2>=B}}}),define("zrender/contain/cubic",["require","../core/curve"],function(require){var e=require("../core/curve");return{containStroke:function(t,i,n,r,a,o,s,l,u,A,B){if(0===u)return!1;var c=u;if(B>i+c&&B>r+c&&B>o+c&&B>l+c||i-c>B&&r-c>B&&o-c>B&&l-c>B||A>t+c&&A>n+c&&A>a+c&&A>s+c||t-c>A&&n-c>A&&a-c>A&&s-c>A)return!1;var C=e.cubicProjectPoint(t,i,n,r,a,o,s,l,A,B,null);return c/2>=C}}}),define("zrender/contain/quadratic",["require","../core/curve"],function(require){var e=require("../core/curve");return{containStroke:function(t,i,n,r,a,o,s,l,u){if(0===s)return!1;var A=s;if(u>i+A&&u>r+A&&u>o+A||i-A>u&&r-A>u&&o-A>u||l>t+A&&l>n+A&&l>a+A||t-A>l&&n-A>l&&a-A>l)return!1;var B=e.quadraticProjectPoint(t,i,n,r,a,o,l,u,null);return A/2>=B}}}),define("zrender/contain/util",["require"],function(require){var e=2*Math.PI;return{normalizeRadian:function(t){if(t%=e,0>t)t+=e;return t}}}),define("zrender/contain/arc",["require","./util"],function(require){var e=require("./util").normalizeRadian,t=2*Math.PI;return{containStroke:function(i,n,r,a,o,s,l,u,A){if(0===l)return!1;var B=l;u-=i,A-=n;var c=Math.sqrt(u*u+A*A);if(c-B>r||r>c+B)return!1;if(Math.abs(a-o)%t<1e-4)return!0;if(s){var C=a;a=e(o),o=e(C)}else a=e(a),o=e(o);if(a>o)o+=t;var D=Math.atan2(A,u);if(0>D)D+=t;return D>=a&&o>=D||D+t>=a&&o>=D+t}}}),define("zrender/contain/windingLine",[],function(){return function(e,t,i,n,r,a){if(a>t&&a>n||t>a&&n>a)return 0;if(n===t)return 0;var o=t>n?1:-1,s=(a-t)/(n-t);if(1===s||0===s)o=t>n?.5:-.5;var l=s*(i-e)+e;return l>r?o:0}}),define("zrender/contain/path",["require","../core/PathProxy","./line","./cubic","./quadratic","./arc","./util","../core/curve","./windingLine"],function(require){"use strict";function e(e,t){return Math.abs(e-t)<f}function t(){var e=E[0];E[0]=E[1],E[1]=e}function i(e,i,n,r,a,o,s,l,u,A){if(A>i&&A>r&&A>o&&A>l||i>A&&r>A&&o>A&&l>A)return 0;var B=c.cubicRootAt(i,r,o,l,A,h);if(0===B)return 0;else{for(var C,D,d=0,f=-1,p=0;B>p;p++){var F=h[p],m=0===F||1===F?.5:1,g=c.cubicAt(e,n,a,s,F);if(!(u>g)){if(0>f){if(f=c.cubicExtrema(i,r,o,l,E),E[1]<E[0]&&f>1)t();if(C=c.cubicAt(i,r,o,l,E[0]),f>1)D=c.cubicAt(i,r,o,l,E[1])}if(2==f)if(F<E[0])d+=i>C?m:-m;else if(F<E[1])d+=C>D?m:-m;else d+=D>l?m:-m;else if(F<E[0])d+=i>C?m:-m;else d+=C>l?m:-m}else;}return d}}function n(e,t,i,n,r,a,o,s){if(s>t&&s>n&&s>a||t>s&&n>s&&a>s)return 0;var l=c.quadraticRootAt(t,n,a,s,h);if(0===l)return 0;else{var u=c.quadraticExtremum(t,n,a);if(u>=0&&1>=u){for(var A=0,B=c.quadraticAt(t,n,a,u),C=0;l>C;C++){var D=0===h[C]||1===h[C]?.5:1,d=c.quadraticAt(e,i,r,h[C]);if(!(o>d))if(h[C]<u)A+=t>B?D:-D;else A+=B>a?D:-D;else;}return A}else{var D=0===h[0]||1===h[0]?.5:1,d=c.quadraticAt(e,i,r,h[0]);if(o>d)return 0;else return t>a?D:-D}}}function r(e,t,i,n,r,a,o,s){if(s-=t,s>i||-i>s)return 0;var l=Math.sqrt(i*i-s*s);h[0]=-l,h[1]=l;var u=Math.abs(n-r);if(1e-4>u)return 0;if(1e-4>u%d){n=0,r=d;var A=a?1:-1;if(o>=h[0]+e&&o<=h[1]+e)return A;else return 0}if(a){var l=n;n=B(r),r=B(l)}else n=B(n),r=B(r);if(n>r)r+=d;for(var c=0,C=0;2>C;C++){var D=h[C];if(D+e>o){var f=Math.atan2(s,D),A=a?1:-1;if(0>f)f=d+f;if(f>=n&&r>=f||f+d>=n&&r>=f+d){if(f>Math.PI/2&&f<1.5*Math.PI)A=-A;c+=A}}}return c}function a(t,a,s,B,c){for(var d=0,f=0,h=0,E=0,p=0,F=0;F<t.length;){var m=t[F++];if(m===o.M&&F>1)if(!s)d+=C(f,h,E,p,B,c);if(1==F)f=t[F],h=t[F+1],E=f,p=h;switch(m){case o.M:E=t[F++],p=t[F++],f=E,h=p;break;case o.L:if(s){if(D(f,h,t[F],t[F+1],a,B,c))return!0}else d+=C(f,h,t[F],t[F+1],B,c)||0;f=t[F++],h=t[F++];break;case o.C:if(s){if(l.containStroke(f,h,t[F++],t[F++],t[F++],t[F++],t[F],t[F+1],a,B,c))return!0}else d+=i(f,h,t[F++],t[F++],t[F++],t[F++],t[F],t[F+1],B,c)||0;f=t[F++],h=t[F++];break;case o.Q:if(s){if(u.containStroke(f,h,t[F++],t[F++],t[F],t[F+1],a,B,c))return!0}else d+=n(f,h,t[F++],t[F++],t[F],t[F+1],B,c)||0;f=t[F++],h=t[F++];break;case o.A:var g=t[F++],H=t[F++],G=t[F++],I=t[F++],v=t[F++],y=t[F++],J=(t[F++],1-t[F++]),L=Math.cos(v)*G+g,M=Math.sin(v)*I+H;if(F>1)d+=C(f,h,L,M,B,c);else E=L,p=M;var b=(B-g)*I/G+g;if(s){if(A.containStroke(g,H,I,v,v+y,J,a,b,c))return!0}else d+=r(g,H,I,v,v+y,J,b,c);f=Math.cos(v+y)*G+g,h=Math.sin(v+y)*I+H;break;case o.R:E=f=t[F++],p=h=t[F++];var N=t[F++],K=t[F++],L=E+N,M=p+K;if(s){if(D(E,p,L,p,a,B,c)||D(L,p,L,M,a,B,c)||D(L,M,E,M,a,B,c)||D(E,M,E,p,a,B,c))return!0}else d+=C(L,p,L,M,B,c),d+=C(E,M,E,p,B,c);break;case o.Z:if(s){if(D(f,h,E,p,a,B,c))return!0}else d+=C(f,h,E,p,B,c);f=E,h=p}}if(!s&&!e(h,p))d+=C(f,h,E,p,B,c)||0;return 0!==d}var o=require("../core/PathProxy").CMD,s=require("./line"),l=require("./cubic"),u=require("./quadratic"),A=require("./arc"),B=require("./util").normalizeRadian,c=require("../core/curve"),C=require("./windingLine"),D=s.containStroke,d=2*Math.PI,f=1e-4,h=[-1,-1,-1],E=[-1,-1];return{contain:function(e,t,i){return a(e,0,!1,t,i)},containStroke:function(e,t,i,n){return a(e,t,!0,i,n)}}}),define("zrender/graphic/Pattern",["require"],function(require){var e=function(e,t){this.image=e,this.repeat=t,this.type="pattern"};return e.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")},e}),define("zrender/graphic/Path",["require","./Displayable","../core/util","../core/PathProxy","../contain/path","./Pattern"],function(require){function e(e){t.call(this,e),this.path=null}var t=require("./Displayable"),i=require("../core/util"),n=require("../core/PathProxy"),r=require("../contain/path"),a=require("./Pattern"),o=a.prototype.getCanvasPattern,s=Math.abs,l=new n(!0);return e.prototype={constructor:e,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(e,t){var i=this.style,n=this.path||l,r=i.hasStroke(),a=i.hasFill(),s=i.fill,u=i.stroke,A=a&&!!s.colorStops,B=r&&!!u.colorStops,c=a&&!!s.image,C=r&&!!u.image;if(i.bind(e,this,t),this.setTransform(e),this.__dirty){var D;if(A)D=D||this.getBoundingRect(),this._fillGradient=i.getGradient(e,s,D);if(B)D=D||this.getBoundingRect(),this._strokeGradient=i.getGradient(e,u,D)}if(A)e.fillStyle=this._fillGradient;else if(c)e.fillStyle=o.call(s,e);if(B)e.strokeStyle=this._strokeGradient;else if(C)e.strokeStyle=o.call(u,e);var d=i.lineDash,f=i.lineDashOffset,h=!!e.setLineDash,E=this.getGlobalScale();if(n.setScale(E[0],E[1]),this.__dirtyPath||d&&!h&&r){if(n.beginPath(e),d&&!h)n.setLineDash(d),n.setLineDashOffset(f);if(this.buildPath(n,this.shape,!1),this.path)this.__dirtyPath=!1}else e.beginPath(),this.path.rebuildPath(e);if(a&&n.fill(e),d&&h)e.setLineDash(d),e.lineDashOffset=f;if(r&&n.stroke(e),d&&h)e.setLineDash([]);if(this.restoreTransform(e),null!=i.text)this.drawRectText(e,this.getBoundingRect())},buildPath:function(e,t,i){},createPathProxy:function(){this.path=new n},getBoundingRect:function(){var e=this._rect,t=this.style,i=!e;if(i){var r=this.path;if(!r)r=this.path=new n;if(this.__dirtyPath)r.beginPath(),this.buildPath(r,this.shape,!1);e=r.getBoundingRect()}if(this._rect=e,t.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||i){a.copy(e);var o=t.lineWidth,s=t.strokeNoScale?this.getLineScale():1;if(!t.hasFill())o=Math.max(o,this.strokeContainThreshold||4);if(s>1e-10)a.width+=o/s,a.height+=o/s,a.x-=o/s/2,a.y-=o/s/2}return a}return e},contain:function(e,t){var i=this.transformCoordToLocal(e,t),n=this.getBoundingRect(),a=this.style;if(e=i[0],t=i[1],n.contain(e,t)){var o=this.path.data;if(a.hasStroke()){var s=a.lineWidth,l=a.strokeNoScale?this.getLineScale():1;if(l>1e-10){if(!a.hasFill())s=Math.max(s,this.strokeContainThreshold);if(r.containStroke(o,s/l,e,t))return!0}}if(a.hasFill())return r.contain(o,e,t)}return!1},dirty:function(e){if(null==e)e=!0;if(e)this.__dirtyPath=e,this._rect=null;if(this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget)this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,i){if("shape"===e)this.setShape(i),this.__dirtyPath=!0,this._rect=null;else t.prototype.attrKV.call(this,e,i)},setShape:function(e,t){var n=this.shape;if(n){if(i.isObject(e)){for(var r in e)if(e.hasOwnProperty(r))n[r]=e[r]}else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&s(e[0]-1)>1e-10&&s(e[3]-1)>1e-10?Math.sqrt(s(e[0]*e[3]-e[2]*e[1])):1}},e.extend=function(t){var n=function(i){if(e.call(this,i),t.style)this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a))r[a]=n[a]}t.init&&t.init.call(this,i)};i.inherits(n,e);for(var r in t)if("style"!==r&&"shape"!==r)n.prototype[r]=t[r];return n},i.inherits(e,t),e}),define("zrender/tool/transformPath",["require","../core/PathProxy","../core/vector"],function(require){function e(e,i){var s,l,u,A,B,c,C=e.data,D=t.M,d=t.C,f=t.L,h=t.R,E=t.A,p=t.Q;for(u=0,A=0;u<C.length;){switch(s=C[u++],A=u,l=0,s){case D:l=1;break;case f:l=1;break;case d:l=3;break;case p:l=2;break;case E:var F=i[4],m=i[5],g=a(i[0]*i[0]+i[1]*i[1]),H=a(i[2]*i[2]+i[3]*i[3]),G=o(-i[1]/H,i[0]/g);C[u++]+=F,C[u++]+=m,C[u++]*=g,C[u++]*=H,C[u++]+=G,C[u++]+=G,u+=2,A=u;break;case h:c[0]=C[u++],c[1]=C[u++],n(c,c,i),C[A++]=c[0],C[A++]=c[1],c[0]+=C[u++],c[1]+=C[u++],n(c,c,i),C[A++]=c[0],C[A++]=c[1]}for(B=0;l>B;B++){var c=r[B];c[0]=C[u++],c[1]=C[u++],n(c,c,i),C[A++]=c[0],C[A++]=c[1]}}}var t=require("../core/PathProxy").CMD,i=require("../core/vector"),n=i.applyTransform,r=[[],[],[]],a=Math.sqrt,o=Math.atan2;return e}),define("zrender/tool/path",["require","../graphic/Path","../core/PathProxy","./transformPath","../core/matrix"],function(require){function e(e,t,i,n,r,a,o,s,c,d,f){var h=c*(B/180),E=A(h)*(e-i)/2+u(h)*(t-n)/2,p=-1*u(h)*(e-i)/2+A(h)*(t-n)/2,F=E*E/(o*o)+p*p/(s*s);if(F>1)o*=l(F),s*=l(F);var m=(r===a?-1:1)*l((o*o*s*s-o*o*p*p-s*s*E*E)/(o*o*p*p+s*s*E*E))||0,g=m*o*p/s,H=m*-s*E/o,G=(e+i)/2+A(h)*g-u(h)*H,I=(t+n)/2+u(h)*g+A(h)*H,v=D([1,0],[(E-g)/o,(p-H)/s]),y=[(E-g)/o,(p-H)/s],J=[(-1*E-g)/o,(-1*p-H)/s],L=D(y,J);if(C(y,J)<=-1)L=B;if(C(y,J)>=1)L=0;if(0===a&&L>0)L-=2*B;if(1===a&&0>L)L+=2*B;f.addData(d,G,I,o,s,v,L,h,a)}function t(t){if(!t)return[];var i,n=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(i=0;i<s.length;i++)n=n.replace(new RegExp(s[i],"g"),"|"+s[i]);var a,o=n.split("|"),l=0,u=0,A=new r,B=r.CMD;for(i=1;i<o.length;i++){var c,C=o[i],D=C.charAt(0),d=0,f=C.slice(1).replace(/e,-/g,"e-").split(",");if(f.length>0&&""===f[0])f.shift();for(var h=0;h<f.length;h++)f[h]=parseFloat(f[h]);for(;d<f.length&&!isNaN(f[d])&&!isNaN(f[0]);){var E,p,F,m,g,H,G,I=l,v=u;switch(D){case"l":l+=f[d++],u+=f[d++],c=B.L,A.addData(c,l,u);break;case"L":l=f[d++],u=f[d++],c=B.L,A.addData(c,l,u);break;case"m":l+=f[d++],u+=f[d++],c=B.M,A.addData(c,l,u),D="l";break;case"M":l=f[d++],u=f[d++],c=B.M,A.addData(c,l,u),D="L";break;case"h":l+=f[d++],c=B.L,A.addData(c,l,u);break;case"H":l=f[d++],c=B.L,A.addData(c,l,u);break;case"v":u+=f[d++],c=B.L,A.addData(c,l,u);break;case"V":u=f[d++],c=B.L,A.addData(c,l,u);break;case"C":c=B.C,A.addData(c,f[d++],f[d++],f[d++],f[d++],f[d++],f[d++]),l=f[d-2],u=f[d-1];break;case"c":c=B.C,A.addData(c,f[d++]+l,f[d++]+u,f[d++]+l,f[d++]+u,f[d++]+l,f[d++]+u),l+=f[d-2],u+=f[d-1];break;case"S":E=l,p=u;var y=A.len(),J=A.data;if(a===B.C)E+=l-J[y-4],p+=u-J[y-3];c=B.C,I=f[d++],v=f[d++],l=f[d++],u=f[d++],A.addData(c,E,p,I,v,l,u);break;case"s":E=l,p=u;var y=A.len(),J=A.data;if(a===B.C)E+=l-J[y-4],p+=u-J[y-3];c=B.C,I=l+f[d++],v=u+f[d++],l+=f[d++],u+=f[d++],A.addData(c,E,p,I,v,l,u);break;case"Q":I=f[d++],v=f[d++],l=f[d++],u=f[d++],c=B.Q,A.addData(c,I,v,l,u);break;case"q":I=f[d++]+l,v=f[d++]+u,l+=f[d++],u+=f[d++],c=B.Q,A.addData(c,I,v,l,u);break;case"T":E=l,p=u;var y=A.len(),J=A.data;if(a===B.Q)E+=l-J[y-4],p+=u-J[y-3];l=f[d++],u=f[d++],c=B.Q,A.addData(c,E,p,l,u);break;case"t":E=l,p=u;var y=A.len(),J=A.data;if(a===B.Q)E+=l-J[y-4],p+=u-J[y-3];l+=f[d++],u+=f[d++],c=B.Q,A.addData(c,E,p,l,u);break;case"A":F=f[d++],m=f[d++],g=f[d++],H=f[d++],G=f[d++],I=l,v=u,l=f[d++],u=f[d++],c=B.A,e(I,v,l,u,H,G,F,m,g,c,A);break;case"a":F=f[d++],m=f[d++],g=f[d++],H=f[d++],G=f[d++],I=l,v=u,l+=f[d++],u+=f[d++],c=B.A,e(I,v,l,u,H,G,F,m,g,c,A)}}if("z"===D||"Z"===D)c=B.Z,A.addData(c);a=c}return A.toStatic(),A}function i(e,i){var n,r=t(e);return i=i||{},i.buildPath=function(e){e.setData(r.data),n&&a(e,n);var t=e.getContext();if(t)e.rebuildPath(t)},i.applyTransform=function(e){if(!n)n=o.create();o.mul(n,e,n),this.dirty(!0)},i}var n=require("../graphic/Path"),r=require("../core/PathProxy"),a=require("./transformPath"),o=require("../core/matrix"),s=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],l=Math.sqrt,u=Math.sin,A=Math.cos,B=Math.PI,c=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},C=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(c(e)*c(t))},D=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(C(e,t))};return{createFromString:function(e,t){return new n(i(e,t))},extendFromString:function(e,t){return n.extend(i(e,t))},mergePath:function(e,t){for(var i=[],r=e.length,a=0;r>a;a++){var o=e[a];if(!o.path)o.createPathProxy();if(o.__dirtyPath)o.buildPath(o.path,o.shape,!0);i.push(o.path)}var s=new n(t);return s.createPathProxy(),s.buildPath=function(e){e.appendPath(i);var t=e.getContext();if(t)e.rebuildPath(t)},s}}}),define("zrender/container/Group",["require","../core/util","../Element","../core/BoundingRect"],function(require){var e=require("../core/util"),t=require("../Element"),i=require("../core/BoundingRect"),n=function(e){
e=e||{},t.call(this,e);for(var i in e)if(e.hasOwnProperty(i))this[i]=e[i];this._children=[],this.__storage=null,this.__dirty=!0};return n.prototype={constructor:n,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},childCount:function(){return this._children.length},add:function(e){if(e&&e!==this&&e.parent!==this)this._children.push(e),this._doAdd(e);return this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var i=this._children,n=i.indexOf(t);if(n>=0)i.splice(n,0,e),this._doAdd(e)}return this},_doAdd:function(e){if(e.parent)e.parent.remove(e);e.parent=this;var t=this.__storage,i=this.__zr;if(t&&t!==e.__storage)if(t.addToStorage(e),e instanceof n)e.addChildrenToStorage(t);i&&i.refresh()},remove:function(t){var i=this.__zr,r=this.__storage,a=this._children,o=e.indexOf(a,t);if(0>o)return this;if(a.splice(o,1),t.parent=null,r)if(r.delFromStorage(t),t instanceof n)t.delChildrenFromStorage(r);return i&&i.refresh(),this},removeAll:function(){var e,t,i=this._children,r=this.__storage;for(t=0;t<i.length;t++){if(e=i[t],r)if(r.delFromStorage(e),e instanceof n)e.delChildrenFromStorage(r);e.parent=null}return i.length=0,this},eachChild:function(e,t){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];e.call(t,r,n)}return this},traverse:function(e,t){for(var i=0;i<this._children.length;i++){var n=this._children[i];if(e.call(t,n),"group"===n.type)n.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(e.addToStorage(i),i instanceof n)i.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(e.delFromStorage(i),i instanceof n)i.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new i(0,0,0,0),r=e||this._children,a=[],o=0;o<r.length;o++){var s=r[o];if(!s.ignore&&!s.invisible){var l=s.getBoundingRect(),u=s.getLocalTransform(a);if(u)n.copy(l),n.applyTransform(u),t=t||n.clone(),t.union(n);else t=t||l.clone(),t.union(l)}else;}return t||n}},e.inherits(n,t),n}),define("zrender/graphic/Image",["require","./Displayable","../core/BoundingRect","../core/util","../core/LRU"],function(require){function e(e){t.call(this,e)}var t=require("./Displayable"),i=require("../core/BoundingRect"),n=require("../core/util"),r=require("../core/LRU"),a=new r(50);return e.prototype={constructor:e,type:"image",brush:function(e,t){var i,n=this.style,r=n.image;if(n.bind(e,this,t),"string"==typeof r)i=this._image;else i=r;if(!i&&r){var o=a.get(r);if(!o)return i=new Image,i.onload=function(){i.onload=null;for(var e=0;e<o.pending.length;e++)o.pending[e].dirty()},o={image:i,pending:[this]},i.src=r,a.put(r,o),void(this._image=i);else if(i=o.image,this._image=i,!i.width||!i.height)return void o.pending.push(this)}if(i){var s=n.x||0,l=n.y||0;if(!i.width||!i.height)return;var u=n.width,A=n.height,B=i.width/i.height;if(null==u&&null!=A)u=A*B;else if(null==A&&null!=u)A=u/B;else if(null==u&&null==A)u=i.width,A=i.height;if(this.setTransform(e),n.sWidth&&n.sHeight){var c=n.sx||0,C=n.sy||0;e.drawImage(i,c,C,n.sWidth,n.sHeight,s,l,u,A)}else if(n.sx&&n.sy){var c=n.sx,C=n.sy,D=u-c,d=A-C;e.drawImage(i,c,C,D,d,s,l,u,A)}else e.drawImage(i,s,l,u,A);if(this.restoreTransform(e),null!=n.text)this.drawRectText(e,this.getBoundingRect())}},getBoundingRect:function(){var e=this.style;if(!this._rect)this._rect=new i(e.x||0,e.y||0,e.width||0,e.height||0);return this._rect}},n.inherits(e,t),e}),define("zrender/graphic/Text",["require","./Displayable","../core/util","../contain/text"],function(require){var e=require("./Displayable"),t=require("../core/util"),i=require("../contain/text"),n=function(t){e.call(this,t)};return n.prototype={constructor:n,type:"text",brush:function(e,t){var n=this.style,r=n.x||0,a=n.y||0,o=n.text;if(null!=o&&(o+=""),n.bind(e,this,t),o){this.setTransform(e);var s,l=n.textAlign,u=n.textFont||n.font;if(n.textVerticalAlign){var A=i.getBoundingRect(o,u,n.textAlign,"top");switch(s="middle",n.textVerticalAlign){case"middle":a-=A.height/2-A.lineHeight/2;break;case"bottom":a-=A.height-A.lineHeight/2;break;default:a+=A.lineHeight/2}}else s=n.textBaseline;if(e.font=u||"12px sans-serif",e.textAlign=l||"left",e.textAlign!==l)e.textAlign="left";if(e.textBaseline=s||"alphabetic",e.textBaseline!==s)e.textBaseline="alphabetic";for(var B=i.measureText("国",e.font).width,c=o.split("\n"),C=0;C<c.length;C++)n.hasStroke()&&e.strokeText(c[C],r,a),n.hasFill()&&e.fillText(c[C],r,a),a+=B;this.restoreTransform(e)}},getBoundingRect:function(){var e=this.style;if(!this._rect){var t=e.textVerticalAlign,n=i.getBoundingRect(e.text+"",e.textFont||e.font,e.textAlign,t?"top":e.textBaseline);switch(t){case"middle":n.y-=n.height/2;break;case"bottom":n.y-=n.height}if(n.x+=e.x||0,n.y+=e.y||0,e.hasStroke()){var r=e.lineWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},t.inherits(n,e),n}),define("zrender/graphic/shape/Circle",["require","../Path"],function(require){"use strict";return require("../Path").extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,i){if(i)e.moveTo(t.cx+t.r,t.cy);e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}})}),define("zrender/graphic/shape/Sector",["require","../../core/env","../Path"],function(require){var e=require("../../core/env"),t=require("../Path"),i=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];return t.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:e.browser.ie&&e.browser.version>=11?function(){var e,n=this.__clipPaths,r=this.style;if(n)for(var a=0;a<n.length;a++){var o=n[a]&&n[a].shape;if(o&&o.startAngle===o.endAngle){for(var s=0;s<i.length;s++)i[s][2]=r[i[s][0]],r[i[s][0]]=i[s][1];e=!0;break}}if(t.prototype.brush.apply(this,arguments),e)for(var s=0;s<i.length;s++)r[i[s][0]]=i[s][2]}:t.prototype.brush,buildPath:function(e,t){var i=t.cx,n=t.cy,r=Math.max(t.r0||0,0),a=Math.max(t.r,0),o=t.startAngle,s=t.endAngle,l=t.clockwise,u=Math.cos(o),A=Math.sin(o);if(e.moveTo(u*r+i,A*r+n),e.lineTo(u*a+i,A*a+n),e.arc(i,n,a,o,s,!l),e.lineTo(Math.cos(s)*r+i,Math.sin(s)*r+n),0!==r)e.arc(i,n,r,s,o,l);e.closePath()}})}),define("zrender/graphic/shape/Ring",["require","../Path"],function(require){return require("../Path").extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=2*Math.PI;e.moveTo(i+t.r,n),e.arc(i,n,t.r,0,r,!1),e.moveTo(i+t.r0,n),e.arc(i,n,t.r0,0,r,!0)}})}),define("zrender/graphic/helper/smoothSpline",["require","../../core/vector"],function(require){function e(e,t,i,n,r,a,o){var s=.5*(i-e),l=.5*(n-t);return(2*(t-i)+s+l)*o+(-3*(t-i)-2*s-l)*a+s*r+t}var t=require("../../core/vector");return function(i,n){for(var r=i.length,a=[],o=0,s=1;r>s;s++)o+=t.distance(i[s-1],i[s]);var l=o/2;l=r>l?r:l;for(var s=0;l>s;s++){var u,A,B,c=s/(l-1)*(n?r:r-1),C=Math.floor(c),D=c-C,d=i[C%r];if(!n)u=i[0===C?C:C-1],A=i[C>r-2?r-1:C+1],B=i[C>r-3?r-1:C+2];else u=i[(C-1+r)%r],A=i[(C+1)%r],B=i[(C+2)%r];var f=D*D,h=D*f;a.push([e(u[0],d[0],A[0],B[0],D,f,h),e(u[1],d[1],A[1],B[1],D,f,h)])}return a}}),define("zrender/graphic/helper/smoothBezier",["require","../../core/vector"],function(require){var e=require("../../core/vector"),t=e.min,i=e.max,n=e.scale,r=e.distance,a=e.add;return function(o,s,l,u){var A,B,c,C,D=[],d=[],f=[],h=[];if(u){c=[1/0,1/0],C=[-(1/0),-(1/0)];for(var E=0,p=o.length;p>E;E++)t(c,c,o[E]),i(C,C,o[E]);t(c,c,u[0]),i(C,C,u[1])}for(var E=0,p=o.length;p>E;E++){var F=o[E];if(l)A=o[E?E-1:p-1],B=o[(E+1)%p];else if(0===E||E===p-1){D.push(e.clone(o[E]));continue}else A=o[E-1],B=o[E+1];e.sub(d,B,A),n(d,d,s);var m=r(F,A),g=r(F,B),H=m+g;if(0!==H)m/=H,g/=H;n(f,d,-m),n(h,d,g);var G=a([],F,f),I=a([],F,h);if(u)i(G,G,c),t(G,G,C),i(I,I,c),t(I,I,C);D.push(G),D.push(I)}if(l)D.push(D.shift());return D}}),define("zrender/graphic/helper/poly",["require","./smoothSpline","./smoothBezier"],function(require){var e=require("./smoothSpline"),t=require("./smoothBezier");return{buildPath:function(i,n,r){var a=n.points,o=n.smooth;if(a&&a.length>=2){if(o&&"spline"!==o){var s=t(a,o,r,n.smoothConstraint);i.moveTo(a[0][0],a[0][1]);for(var l=a.length,u=0;(r?l:l-1)>u;u++){var A=s[2*u],B=s[2*u+1],c=a[(u+1)%l];i.bezierCurveTo(A[0],A[1],B[0],B[1],c[0],c[1])}}else{if("spline"===o)a=e(a,r);i.moveTo(a[0][0],a[0][1]);for(var u=1,C=a.length;C>u;u++)i.lineTo(a[u][0],a[u][1])}r&&i.closePath()}}}}),define("zrender/graphic/shape/Polygon",["require","../helper/poly","../Path"],function(require){var e=require("../helper/poly");return require("../Path").extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,i){e.buildPath(t,i,!0)}})}),define("zrender/graphic/shape/Polyline",["require","../helper/poly","../Path"],function(require){var e=require("../helper/poly");return require("../Path").extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,i){e.buildPath(t,i,!1)}})}),define("zrender/graphic/helper/roundRect",["require"],function(require){return{buildPath:function(e,t){var i,n,r,a,o=t.x,s=t.y,l=t.width,u=t.height,A=t.r;if(0>l)o+=l,l=-l;if(0>u)s+=u,u=-u;if("number"==typeof A)i=n=r=a=A;else if(A instanceof Array)if(1===A.length)i=n=r=a=A[0];else if(2===A.length)i=r=A[0],n=a=A[1];else if(3===A.length)i=A[0],n=a=A[1],r=A[2];else i=A[0],n=A[1],r=A[2],a=A[3];else i=n=r=a=0;var B;if(i+n>l)B=i+n,i*=l/B,n*=l/B;if(r+a>l)B=r+a,r*=l/B,a*=l/B;if(n+r>u)B=n+r,n*=u/B,r*=u/B;if(i+a>u)B=i+a,i*=u/B,a*=u/B;e.moveTo(o+i,s),e.lineTo(o+l-n,s),0!==n&&e.quadraticCurveTo(o+l,s,o+l,s+n),e.lineTo(o+l,s+u-r),0!==r&&e.quadraticCurveTo(o+l,s+u,o+l-r,s+u),e.lineTo(o+a,s+u),0!==a&&e.quadraticCurveTo(o,s+u,o,s+u-a),e.lineTo(o,s+i),0!==i&&e.quadraticCurveTo(o,s,o+i,s)}}}),define("zrender/graphic/shape/Rect",["require","../helper/roundRect","../Path"],function(require){var e=require("../helper/roundRect");return require("../Path").extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,i){var n=i.x,r=i.y,a=i.width,o=i.height;if(!i.r)t.rect(n,r,a,o);else e.buildPath(t,i);t.closePath()}})}),define("zrender/graphic/shape/Line",["require","../Path"],function(require){return require("../Path").extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.x1,n=t.y1,r=t.x2,a=t.y2,o=t.percent;if(0!==o){if(e.moveTo(i,n),1>o)r=i*(1-o)+r*o,a=n*(1-o)+a*o;e.lineTo(r,a)}},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}})}),define("zrender/graphic/shape/BezierCurve",["require","../../core/curve","../../core/vector","../Path"],function(require){"use strict";function e(e,t,i){var n=e.cpx2,r=e.cpy2;if(null===n||null===r)return[(i?l:o)(e.x1,e.cpx1,e.cpx2,e.x2,t),(i?l:o)(e.y1,e.cpy1,e.cpy2,e.y2,t)];else return[(i?s:a)(e.x1,e.cpx1,e.x2,t),(i?s:a)(e.y1,e.cpy1,e.y2,t)]}var t=require("../../core/curve"),i=require("../../core/vector"),n=t.quadraticSubdivide,r=t.cubicSubdivide,a=t.quadraticAt,o=t.cubicAt,s=t.quadraticDerivativeAt,l=t.cubicDerivativeAt,u=[];return require("../Path").extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.x1,a=t.y1,o=t.x2,s=t.y2,l=t.cpx1,A=t.cpy1,B=t.cpx2,c=t.cpy2,C=t.percent;if(0!==C)if(e.moveTo(i,a),null==B||null==c){if(1>C)n(i,l,o,C,u),l=u[1],o=u[2],n(a,A,s,C,u),A=u[1],s=u[2];e.quadraticCurveTo(l,A,o,s)}else{if(1>C)r(i,l,B,o,C,u),l=u[1],B=u[2],o=u[3],r(a,A,c,s,C,u),A=u[1],c=u[2],s=u[3];e.bezierCurveTo(l,A,B,c,o,s)}},pointAt:function(t){return e(this.shape,t,!1)},tangentAt:function(t){var n=e(this.shape,t,!0);return i.normalize(n,n)}})}),define("zrender/graphic/shape/Arc",["require","../Path"],function(require){return require("../Path").extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.cx,n=t.cy,r=Math.max(t.r,0),a=t.startAngle,o=t.endAngle,s=t.clockwise,l=Math.cos(a),u=Math.sin(a);e.moveTo(l*r+i,u*r+n),e.arc(i,n,r,a,o,!s)}})}),define("zrender/graphic/CompoundPath",["require","./Path"],function(require){var e=require("./Path");return e.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,i=0;i<t.length;i++)e=e||t[i].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),i=0;i<e.length;i++){if(!e[i].path)e[i].createPathProxy();e[i].path.setScale(t[0],t[1])}},buildPath:function(e,t){for(var i=t.paths||[],n=0;n<i.length;n++)i[n].buildPath(e,i[n].shape,!0)},afterBrush:function(){for(var e=this.shape.paths,t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),e.prototype.getBoundingRect.call(this)}})}),define("zrender/graphic/Gradient",["require"],function(require){var e=function(e){this.colorStops=e||[]};return e.prototype={constructor:e,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},e}),define("zrender/graphic/LinearGradient",["require","../core/util","./Gradient"],function(require){"use strict";var e=require("../core/util"),t=require("./Gradient"),i=function(e,i,n,r,a,o){this.x=null==e?0:e,this.y=null==i?0:i,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=o||!1,t.call(this,a)};return i.prototype={constructor:i},e.inherits(i,t),i}),define("zrender/graphic/RadialGradient",["require","../core/util","./Gradient"],function(require){"use strict";var e=require("../core/util"),t=require("./Gradient"),i=function(e,i,n,r,a){this.x=null==e?.5:e,this.y=null==i?.5:i,this.r=null==n?.5:n,this.type="radial",this.global=a||!1,t.call(this,r)};return i.prototype={constructor:i},e.inherits(i,t),i}),define("echarts/util/graphic",["require","zrender/core/util","zrender/tool/path","zrender/graphic/Path","zrender/tool/color","zrender/core/matrix","zrender/core/vector","zrender/mixin/Transformable","zrender/core/BoundingRect","zrender/container/Group","zrender/graphic/Image","zrender/graphic/Text","zrender/graphic/shape/Circle","zrender/graphic/shape/Sector","zrender/graphic/shape/Ring","zrender/graphic/shape/Polygon","zrender/graphic/shape/Polyline","zrender/graphic/shape/Rect","zrender/graphic/shape/Line","zrender/graphic/shape/BezierCurve","zrender/graphic/shape/Arc","zrender/graphic/CompoundPath","zrender/graphic/LinearGradient","zrender/graphic/RadialGradient"],function(require){"use strict";function e(e){return null!=e&&"none"!=e}function t(e){return"string"==typeof e?h.lift(e,-.1):e}function i(i){if(i.__hoverStlDirty){var n=i.style.stroke,r=i.style.fill,a=i.__hoverStl;a.fill=a.fill||(e(r)?t(r):null),a.stroke=a.stroke||(e(n)?t(n):null);var o={};for(var s in a)if(a.hasOwnProperty(s))o[s]=i.style[s];i.__normalStl=o,i.__hoverStlDirty=!1}}function n(e){if(!e.__isHover){if(i(e),e.useHoverLayer)e.__zr&&e.__zr.addHover(e,e.__hoverStl);else e.setStyle(e.__hoverStl),e.z2+=1;e.__isHover=!0}}function r(e){if(e.__isHover){var t=e.__normalStl;if(e.useHoverLayer)e.__zr&&e.__zr.removeHover(e);else t&&e.setStyle(t),e.z2-=1;e.__isHover=!1}}function a(e){"group"===e.type?e.traverse(function(e){if("group"!==e.type)n(e)}):n(e)}function o(e){"group"===e.type?e.traverse(function(e){if("group"!==e.type)r(e)}):r(e)}function s(e,t){if(e.__hoverStl=e.hoverStyle||t||{},e.__hoverStlDirty=!0,e.__isHover)i(e)}function l(e){if(!this.__hoverSilentOnTouch||!e.zrByTouch)!this.__isEmphasis&&a(this)}function u(e){if(!this.__hoverSilentOnTouch||!e.zrByTouch)!this.__isEmphasis&&o(this)}function A(){this.__isEmphasis=!0,a(this)}function B(){this.__isEmphasis=!1,o(this)}function c(e,t,i,n,r,a){if("function"==typeof r)a=r,r=null;var o=n&&n.isAnimationEnabled();if(o){var s=e?"Update":"",l=n.getShallow("animationDuration"+s),u=n.getShallow("animationEasing"+s),A=n.getShallow("animationDelay"+s);if("function"==typeof A)A=A(r,n.getAnimationDelayParams?n.getAnimationDelayParams(t,r):null);if("function"==typeof l)l=l(r);l>0?t.animateTo(i,l,A||0,u,a):(t.stopAnimation(),t.attr(i),a&&a())}else t.stopAnimation(),t.attr(i),a&&a()}var C=require("zrender/core/util"),D=require("zrender/tool/path"),d=Math.round,f=require("zrender/graphic/Path"),h=require("zrender/tool/color"),E=require("zrender/core/matrix"),p=require("zrender/core/vector"),F=require("zrender/mixin/Transformable"),m=require("zrender/core/BoundingRect"),g={};return g.Group=require("zrender/container/Group"),g.Image=require("zrender/graphic/Image"),g.Text=require("zrender/graphic/Text"),g.Circle=require("zrender/graphic/shape/Circle"),g.Sector=require("zrender/graphic/shape/Sector"),g.Ring=require("zrender/graphic/shape/Ring"),g.Polygon=require("zrender/graphic/shape/Polygon"),g.Polyline=require("zrender/graphic/shape/Polyline"),g.Rect=require("zrender/graphic/shape/Rect"),g.Line=require("zrender/graphic/shape/Line"),g.BezierCurve=require("zrender/graphic/shape/BezierCurve"),g.Arc=require("zrender/graphic/shape/Arc"),g.CompoundPath=require("zrender/graphic/CompoundPath"),g.LinearGradient=require("zrender/graphic/LinearGradient"),g.RadialGradient=require("zrender/graphic/RadialGradient"),g.BoundingRect=m,g.extendShape=function(e){return f.extend(e)},g.extendPath=function(e,t){return D.extendFromString(e,t)},g.makePath=function(e,t,i,n){var r=D.createFromString(e,t),a=r.getBoundingRect();if(i){var o=a.width/a.height;if("center"===n){var s,l=i.height*o;if(l<=i.width)s=i.height;else l=i.width,s=l/o;var u=i.x+i.width/2,A=i.y+i.height/2;i.x=u-l/2,i.y=A-s/2,i.width=l,i.height=s}g.resizePath(r,i)}return r},g.mergePath=D.mergePath,g.resizePath=function(e,t){if(e.applyTransform){var i=e.getBoundingRect(),n=i.calculateTransform(t);e.applyTransform(n)}},g.subPixelOptimizeLine=function(e){var t=g.subPixelOptimize,i=e.shape,n=e.style.lineWidth;if(d(2*i.x1)===d(2*i.x2))i.x1=i.x2=t(i.x1,n,!0);if(d(2*i.y1)===d(2*i.y2))i.y1=i.y2=t(i.y1,n,!0);return e},g.subPixelOptimizeRect=function(e){var t=g.subPixelOptimize,i=e.shape,n=e.style.lineWidth,r=i.x,a=i.y,o=i.width,s=i.height;return i.x=t(i.x,n,!0),i.y=t(i.y,n,!0),i.width=Math.max(t(r+o,n,!1)-i.x,0===o?0:1),i.height=Math.max(t(a+s,n,!1)-i.y,0===s?0:1),e},g.subPixelOptimize=function(e,t,i){var n=d(2*e);return(n+d(t))%2===0?n/2:(n+(i?1:-1))/2},g.setHoverStyle=function(e,t,i){e.__hoverSilentOnTouch=i&&i.hoverSilentOnTouch,"group"===e.type?e.traverse(function(e){if("group"!==e.type)s(e,t)}):s(e,t),e.on("mouseover",l).on("mouseout",u),e.on("emphasis",A).on("normal",B)},g.setText=function(e,t,i){var n=t.getShallow("position")||"inside",r=t.getShallow("offset"),a=n.indexOf("inside")>=0?"white":i,o=t.getModel("textStyle");C.extend(e,{textDistance:t.getShallow("distance")||5,textFont:o.getFont(),textPosition:n,textOffset:r,textFill:o.getTextColor()||a})},g.updateProps=function(e,t,i,n,r){c(!0,e,t,i,n,r)},g.initProps=function(e,t,i,n,r){c(!1,e,t,i,n,r)},g.getTransform=function(e,t){for(var i=E.identity([]);e&&e!==t;)E.mul(i,e.getLocalTransform(),i),e=e.parent;return i},g.applyTransform=function(e,t,i){if(t&&!C.isArrayLike(t))t=F.getLocalTransform(t);if(i)t=E.invert([],t);return p.applyTransform([],e,t)},g.transformDirection=function(e,t,i){var n=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),r=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),a=["left"===e?-n:"right"===e?n:0,"top"===e?-r:"bottom"===e?r:0];return a=g.applyTransform(a,t,i),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"},g.groupTransition=function(e,t,i,n){function r(e){var t={};return e.traverse(function(e){if(!e.isGroup&&e.anid)t[e.anid]=e}),t}function a(e){var t={position:p.clone(e.position),rotation:e.rotation};if(e.shape)t.shape=C.extend({},e.shape);return t}if(e&&t){var o=r(e);t.traverse(function(e){if(!e.isGroup&&e.anid){var t=o[e.anid];if(t){var n=a(e);e.attr(a(t)),g.updateProps(e,n,i,e.dataIndex)}}})}},g}),define("echarts/util/symbol",["require","./graphic","zrender/core/BoundingRect"],function(require){"use strict";var e=require("./graphic"),t=require("zrender/core/BoundingRect"),i=e.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=t.width/2,a=t.height/2;e.moveTo(i,n-a),e.lineTo(i+r,n+a),e.lineTo(i-r,n+a),e.closePath()}}),n=e.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,n=t.cy,r=t.width/2,a=t.height/2;e.moveTo(i,n-a),e.lineTo(i+r,n),e.lineTo(i,n+a),e.lineTo(i-r,n),e.closePath()}}),r=e.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.x,n=t.y,r=t.width/5*3,a=Math.max(r,t.height),o=r/2,s=o*o/(a-o),l=n-a+o+s,u=Math.asin(s/o),A=Math.cos(u)*o,B=Math.sin(u),c=Math.cos(u);e.arc(i,l,o,Math.PI-u,2*Math.PI+u);var C=.6*o,D=.7*o;e.bezierCurveTo(i+A-B*C,l+s+c*C,i,n-D,i,n),e.bezierCurveTo(i,n-D,i-A+B*C,l+s+c*C,i-A,l+s),e.closePath()}}),a=e.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.height,n=t.width,r=t.x,a=t.y,o=n/3*2;e.moveTo(r,a),e.lineTo(r+o,a+i),e.lineTo(r,a+i/4*3),e.lineTo(r-o,a+i),e.lineTo(r,a),e.closePath()}}),o={line:e.Line,rect:e.Rect,roundRect:e.Rect,square:e.Rect,circle:e.Circle,diamond:n,pin:r,arrow:a,triangle:i},s={line:function(e,t,i,n,r){r.x1=e,r.y1=t+n/2,r.x2=e+i,r.y2=t+n/2},rect:function(e,t,i,n,r){r.x=e,r.y=t,r.width=i,r.height=n},roundRect:function(e,t,i,n,r){r.x=e,r.y=t,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(e,t,i,n,r){var a=Math.min(i,n);r.x=e,r.y=t,r.width=a,r.height=a},circle:function(e,t,i,n,r){r.cx=e+i/2,r.cy=t+n/2,r.r=Math.min(i,n)/2},diamond:function(e,t,i,n,r){r.cx=e+i/2,r.cy=t+n/2,r.width=i,r.height=n},pin:function(e,t,i,n,r){r.x=e+i/2,r.y=t+n/2,r.width=i,r.height=n},arrow:function(e,t,i,n,r){r.x=e+i/2,r.y=t+n/2,r.width=i,r.height=n},triangle:function(e,t,i,n,r){r.cx=e+i/2,r.cy=t+n/2,r.width=i,r.height=n}},l={};for(var u in o)if(o.hasOwnProperty(u))l[u]=new o[u];var A=e.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var e=this.style,t=this.shape;if("pin"===t.symbolType&&"inside"===e.textPosition)e.textPosition=["50%","40%"],e.textAlign="center",e.textVerticalAlign="middle"},buildPath:function(e,t,i){var n=t.symbolType,r=l[n];if("none"!==t.symbolType){if(!r)n="rect",r=l[n];s[n](t.x,t.y,t.width,t.height,r.shape),r.buildPath(e,r.shape,i)}}}),B=function(e){if("image"!==this.type){var t=this.style,i=this.shape;if(i&&"line"===i.symbolType)t.stroke=e;else if(this.__isEmptyBrush)t.stroke=e,t.fill="#fff";else t.fill&&(t.fill=e),t.stroke&&(t.stroke=e);this.dirty(!1)}},c={createSymbol:function(i,n,r,a,o,s){var l=0===i.indexOf("empty");if(l)i=i.substr(5,1).toLowerCase()+i.substr(6);var u;if(0===i.indexOf("image://"))u=new e.Image({style:{image:i.slice(8),x:n,y:r,width:a,height:o}});else if(0===i.indexOf("path://"))u=e.makePath(i.slice(7),{},new t(n,r,a,o));else u=new A({shape:{symbolType:i,x:n,y:r,width:a,height:o}});return u.__isEmptyBrush=l,u.setColor=B,u.setColor(s),u}};return c}),define("echarts/chart/helper/LinePath",["require","../../util/graphic","zrender/core/vector"],function(require){function e(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var t=require("../../util/graphic"),i=require("zrender/core/vector"),n=t.Line.prototype,r=t.BezierCurve.prototype;return t.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,i){(e(i)?n:r).buildPath(t,i)},pointAt:function(t){return e(this.shape)?n.pointAt.call(this,t):r.pointAt.call(this,t)},tangentAt:function(t){var n=this.shape,a=e(n)?[n.x2-n.x1,n.y2-n.y1]:r.tangentAt.call(this,t);return i.normalize(a,a)}})}),define("echarts/chart/helper/Line",["require","../../util/symbol","zrender/core/vector","./LinePath","../../util/graphic","zrender/core/util","../../util/number"],function(require){function e(e){return"_"+e+"Type"}function t(e,t,i){var n=t.getItemVisual(i,"color"),r=t.getItemVisual(i,e),a=t.getItemVisual(i,e+"Size");if(r&&"none"!==r){if(!A.isArray(a))a=[a,a];var s=o.createSymbol(r,-a[0]/2,-a[1]/2,a[0],a[1],n);return s.name=e,s}}function i(e){var t=new l({name:"line"});return n(t.shape,e),t}function n(e,t){var i=t[0],n=t[1],r=t[2];if(e.x1=i[0],e.y1=i[1],e.x2=n[0],e.y2=n[1],e.percent=1,r)e.cpx1=r[0],e.cpy1=r[1];else e.cpx1=NaN,e.cpy1=NaN}function r(){var e=this,t=e.childOfName("fromSymbol"),i=e.childOfName("toSymbol"),n=e.childOfName("label");if(t||i||!n.ignore){for(var r=1,a=this.parent;a;){if(a.scale)r/=a.scale[0];a=a.parent}var o=e.childOfName("line");if(this.__dirty||o.__dirty){var l=o.shape.percent,u=o.pointAt(0),A=o.pointAt(l),B=s.sub([],A,u);if(s.normalize(B,B),t){t.attr("position",u);var c=o.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(c[1],c[0])),t.attr("scale",[r*l,r*l])}if(i){i.attr("position",A);var c=o.tangentAt(1);i.attr("rotation",-Math.PI/2-Math.atan2(c[1],c[0])),i.attr("scale",[r*l,r*l])}if(!n.ignore){n.attr("position",A);var C,D,d,f=5*r;if("end"===n.__position)C=[B[0]*f+A[0],B[1]*f+A[1]],D=B[0]>.8?"left":B[0]<-.8?"right":"center",d=B[1]>.8?"top":B[1]<-.8?"bottom":"middle";else if("middle"===n.__position){var h=l/2,c=o.tangentAt(h),E=[c[1],-c[0]],p=o.pointAt(h);if(E[1]>0)E[0]=-E[0],E[1]=-E[1];C=[p[0]+E[0]*f,p[1]+E[1]*f],D="center",d="bottom";var F=-Math.atan2(c[1],c[0]);if(A[0]<u[0])F=Math.PI+F;n.attr("rotation",F)}else C=[-B[0]*f+u[0],-B[1]*f+u[1]],D=B[0]>.8?"right":B[0]<-.8?"left":"center",d=B[1]>.8?"bottom":B[1]<-.8?"top":"middle";n.attr({style:{textVerticalAlign:n.__verticalAlign||d,textAlign:n.__textAlign||D},position:C,scale:[r,r]})}}}}function a(e,t,i){u.Group.call(this),this._createLine(e,t,i)}var o=require("../../util/symbol"),s=require("zrender/core/vector"),l=require("./LinePath"),u=require("../../util/graphic"),A=require("zrender/core/util"),B=require("../../util/number"),c=["fromSymbol","toSymbol"],C=a.prototype;return C.beforeUpdate=r,C._createLine=function(n,r,a){var o=n.hostModel,s=n.getItemLayout(r),l=i(s);l.shape.percent=0,u.initProps(l,{shape:{percent:1}},o,r),this.add(l);var B=new u.Text({name:"label"});this.add(B),A.each(c,function(i){var a=t(i,n,r);this.add(a),this[e(i)]=n.getItemVisual(r,i)},this),this._updateCommonStl(n,r,a)},C.updateData=function(i,r,a){var o=i.hostModel,s=this.childOfName("line"),l=i.getItemLayout(r),B={shape:{}};n(B.shape,l),u.updateProps(s,B,o,r),A.each(c,function(n){var a=i.getItemVisual(r,n),o=e(n);if(this[o]!==a){this.remove(this.childOfName(n));var s=t(n,i,r);this.add(s)}this[o]=a},this),this._updateCommonStl(i,r,a)},C._updateCommonStl=function(e,t,i){var n=e.hostModel,r=this.childOfName("line"),a=i&&i.lineStyle,o=i&&i.hoverLineStyle,s=i&&i.labelModel,l=i&&i.hoverLabelModel;if(!i||e.hasItemOption){var C=e.getItemModel(t);a=C.getModel("lineStyle.normal").getLineStyle(),o=C.getModel("lineStyle.emphasis").getLineStyle(),s=C.getModel("label.normal"),l=C.getModel("label.emphasis")}var D=e.getItemVisual(t,"color"),d=A.retrieve(e.getItemVisual(t,"opacity"),a.opacity,1);r.useStyle(A.defaults({strokeNoScale:!0,fill:"none",stroke:D,opacity:d},a)),r.hoverStyle=o,A.each(c,function(e){var t=this.childOfName(e);if(t)t.setColor(D),t.setStyle({opacity:d})},this);var f,h,E=s.getShallow("show"),p=l.getShallow("show"),F=this.childOfName("label");if(E||p){var m=n.getRawValue(t);h=null==m?h=e.getName(t):isFinite(m)?B.round(m):m,f=D||"#000"}if(E){var g=s.getModel("textStyle");F.setStyle({text:A.retrieve(n.getFormattedLabel(t,"normal",e.dataType),h),textFont:g.getFont(),fill:g.getTextColor()||f}),F.__textAlign=g.get("align"),F.__verticalAlign=g.get("baseline"),F.__position=s.get("position")}else F.setStyle("text","");if(p){var H=l.getModel("textStyle");F.hoverStyle={text:A.retrieve(n.getFormattedLabel(t,"emphasis",e.dataType),h),textFont:H.getFont(),fill:H.getTextColor()||f}}else F.hoverStyle={text:""};F.ignore=!E&&!p,u.setHoverStyle(this)},C.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},C.setLinePoints=function(e){var t=this.childOfName("line");n(t.shape,e),t.dirty()},A.inherits(a,u.Group),a}),define("echarts/chart/helper/LineDraw",["require","../../util/graphic","./Line"],function(require){function e(e){return isNaN(e[0])||isNaN(e[1])}function t(t){return!e(t[0])&&!e(t[1])}function i(e){this._ctor=e||r,this.group=new n.Group}var n=require("../../util/graphic"),r=require("./Line"),a=i.prototype;return a.updateData=function(e){var i=this._lineData,n=this.group,r=this._ctor,a=e.hostModel,o={lineStyle:a.getModel("lineStyle.normal").getLineStyle(),hoverLineStyle:a.getModel("lineStyle.emphasis").getLineStyle(),labelModel:a.getModel("label.normal"),hoverLabelModel:a.getModel("label.emphasis")};e.diff(i).add(function(i){if(t(e.getItemLayout(i))){var a=new r(e,i,o);e.setItemGraphicEl(i,a),n.add(a)}}).update(function(a,s){var l=i.getItemGraphicEl(s);if(!t(e.getItemLayout(a)))return void n.remove(l);if(!l)l=new r(e,a,o);else l.updateData(e,a,o);e.setItemGraphicEl(a,l),n.add(l)}).remove(function(e){n.remove(i.getItemGraphicEl(e))}).execute(),this._lineData=e},a.updateLayout=function(){var e=this._lineData;e.eachItemGraphicEl(function(t,i){t.updateLayout(e,i)},this)},a.remove=function(){this.group.removeAll()},i}),define("echarts/chart/helper/EffectLine",["require","../../util/graphic","./Line","zrender/core/util","../../util/symbol","zrender/core/vector","zrender/core/curve"],function(require){function e(e,i,n){t.Group.call(this),this.add(this.createLine(e,i,n)),this._updateEffectSymbol(e,i)}var t=require("../../util/graphic"),i=require("./Line"),n=require("zrender/core/util"),r=require("../../util/symbol"),a=require("zrender/core/vector"),o=require("zrender/core/curve"),s=e.prototype;return s.createLine=function(e,t,n){return new i(e,t,n)},s._updateEffectSymbol=function(e,t){var i=e.getItemModel(t),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");if(!n.isArray(o))o=[o,o];var l=a.get("color")||e.getItemVisual(t,"color"),u=this.childAt(1);if(this._symbolType!==s)this.remove(u),u=r.createSymbol(s,-.5,-.5,1,1,l),u.z2=100,u.culling=!0,this.add(u);if(u)u.setStyle("shadowColor",l),u.setStyle(a.getItemStyle(["color"])),u.attr("scale",o),u.setColor(l),u.attr("scale",o),this._symbolType=s,this._updateEffectAnimation(e,a,t)},s._updateEffectAnimation=function(e,t,i){var r=this.childAt(1);if(r){var a=this,o=e.getItemLayout(i),s=1e3*t.get("period"),l=t.get("loop"),u=t.get("constantSpeed"),A=n.retrieve(t.get("delay"),function(t){return t/e.count()*s/3}),B="function"==typeof A;if(r.ignore=!0,this.updateAnimationPoints(r,o),u>0)s=this.getLineLength(r)/u*1e3;if(s!==this._period||l!==this._loop){r.stopAnimation();var c=A;if(B)c=A(i);if(r.__t>0)c=-s*r.__t;r.__t=0;var C=r.animate("",l).when(s,{__t:1}).delay(c).during(function(){a.updateSymbolPosition(r)});if(!l)C.done(function(){a.remove(r)});C.start()}this._period=s,this._loop=l}},s.getLineLength=function(e){return a.dist(e.__p1,e.__cp1)+a.dist(e.__cp1,e.__p2)},s.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},s.updateData=function(e,t,i){this.childAt(0).updateData(e,t,i),this._updateEffectSymbol(e,t)},s.updateSymbolPosition=function(e){var t=e.__p1,i=e.__p2,n=e.__cp1,r=e.__t,a=e.position,s=o.quadraticAt,l=o.quadraticDerivativeAt;a[0]=s(t[0],n[0],i[0],r),a[1]=s(t[1],n[1],i[1],r);var u=l(t[0],n[0],i[0],r),A=l(t[1],n[1],i[1],r);e.rotation=-Math.atan2(A,u)-Math.PI/2,e.ignore=!1},s.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var i=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,i,t)},n.inherits(e,t.Group),e}),define("echarts/chart/helper/Polyline",["require","../../util/graphic","zrender/core/util"],function(require){function e(e,i,n){t.Group.call(this),this._createPolyline(e,i,n)}var t=require("../../util/graphic"),i=require("zrender/core/util"),n=e.prototype;
return n._createPolyline=function(e,i,n){var r=e.getItemLayout(i),a=new t.Polyline({shape:{points:r}});this.add(a),this._updateCommonStl(e,i,n)},n.updateData=function(e,i,n){var r=e.hostModel,a=this.childAt(0),o={shape:{points:e.getItemLayout(i)}};t.updateProps(a,o,r,i),this._updateCommonStl(e,i,n)},n._updateCommonStl=function(e,n,r){var a=this.childAt(0),o=e.getItemModel(n),s=e.getItemVisual(n,"color"),l=r&&r.lineStyle,u=r&&r.hoverLineStyle;if(!r||e.hasItemOption)l=o.getModel("lineStyle.normal").getLineStyle(),u=o.getModel("lineStyle.emphasis").getLineStyle();a.useStyle(i.defaults({strokeNoScale:!0,fill:"none",stroke:s},l)),a.hoverStyle=u,t.setHoverStyle(this)},n.updateLayout=function(e,t){var i=this.childAt(0);i.setShape("points",e.getItemLayout(t))},i.inherits(e,t.Group),e}),define("echarts/chart/helper/EffectPolyline",["require","./Polyline","zrender/core/util","./EffectLine","zrender/core/vector"],function(require){function e(e,t,i){n.call(this,e,t,i),this._lastFrame=0,this._lastFramePercent=0}var t=require("./Polyline"),i=require("zrender/core/util"),n=require("./EffectLine"),r=require("zrender/core/vector"),a=e.prototype;return a.createLine=function(e,i,n){return new t(e,i,n)},a.updateAnimationPoints=function(e,t){this._points=t;for(var i=[0],n=0,a=1;a<t.length;a++){var o=t[a-1],s=t[a];n+=r.dist(o,s),i.push(n)}if(0!==n){for(var a=0;a<i.length;a++)i[a]/=n;this._offsets=i,this._length=n}},a.getLineLength=function(e){return this._length},a.updateSymbolPosition=function(e){var t=e.__t,i=this._points,n=this._offsets,a=i.length;if(n){var o,s=this._lastFrame;if(t<this._lastFramePercent){var l=Math.min(s+1,a-1);for(o=l;o>=0&&!(n[o]<=t);o--);o=Math.min(o,a-2)}else{for(var o=s;a>o&&!(n[o]>t);o++);o=Math.min(o-1,a-2)}r.lerp(e.position,i[o],i[o+1],(t-n[o])/(n[o+1]-n[o]));var u=i[o+1][0]-i[o][0],A=i[o+1][1]-i[o][1];e.rotation=-Math.atan2(A,u)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=t,e.ignore=!1}},i.inherits(e,n),e}),define("echarts/chart/helper/LargeLineDraw",["require","../../util/graphic","zrender/contain/quadratic","zrender/contain/line"],function(require){function e(){this.group=new t.Group,this._lineEl=new r}var t=require("../../util/graphic"),i=require("zrender/contain/quadratic"),n=require("zrender/contain/line"),r=t.extendShape({shape:{polyline:!1,segs:[]},buildPath:function(e,t){for(var i=t.segs,n=t.polyline,r=0;r<i.length;r++){var a=i[r];if(n){e.moveTo(a[0][0],a[0][1]);for(var o=1;o<a.length;o++)e.lineTo(a[o][0],a[o][1])}else if(e.moveTo(a[0][0],a[0][1]),a.length>2)e.quadraticCurveTo(a[2][0],a[2][1],a[1][0],a[1][1]);else e.lineTo(a[1][0],a[1][1])}},findDataIndex:function(e,t){for(var r=this.shape,a=r.segs,o=r.polyline,s=Math.max(this.style.lineWidth,1),l=0;l<a.length;l++){var u=a[l];if(o){for(var A=1;A<u.length;A++)if(n.containStroke(u[A-1][0],u[A-1][1],u[A][0],u[A][1],s,e,t))return l}else if(u.length>2){if(i.containStroke(u[0][0],u[0][1],u[2][0],u[2][1],u[1][0],u[1][1],s,e,t))return l}else if(n.containStroke(u[0][0],u[0][1],u[1][0],u[1][1],s,e,t))return l}return-1}}),a=e.prototype;return a.updateData=function(e){this.group.removeAll();var t=this._lineEl,i=e.hostModel;t.setShape({segs:e.mapArray(e.getItemLayout),polyline:i.get("polyline")}),t.useStyle(i.getModel("lineStyle.normal").getLineStyle());var n=e.getVisual("color");if(n)t.setStyle("stroke",n);t.setStyle("fill"),t.seriesIndex=i.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var i=t.findDataIndex(e.offsetX,e.offsetY);if(i>0)t.dataIndex=i}),this.group.add(t)},a.updateLayout=function(e){var t=e.getData();this._lineEl.setShape({segs:t.mapArray(t.getItemLayout)})},a.remove=function(){this.group.removeAll()},e}),define("echarts/chart/lines/LinesView",["require","../helper/LineDraw","../helper/EffectLine","../helper/Line","../helper/Polyline","../helper/EffectPolyline","../helper/LargeLineDraw","../../echarts"],function(require){var e=require("../helper/LineDraw"),t=require("../helper/EffectLine"),i=require("../helper/Line"),n=require("../helper/Polyline"),r=require("../helper/EffectPolyline"),a=require("../helper/LargeLineDraw");require("../../echarts").extendChartView({type:"lines",init:function(){},render:function(o,s,l){var u=o.getData(),A=this._lineDraw,B=o.get("effect.show"),c=o.get("polyline"),C=o.get("large")&&u.count()>=o.get("largeThreshold");if(__DEV__)if(B&&C)console.warn("Large lines not support effect");if(B!==this._hasEffet||c!==this._isPolyline||C!==this._isLarge){if(A)A.remove();A=this._lineDraw=C?new a:new e(c?B?r:n:B?t:i),this._hasEffet=B,this._isPolyline=c,this._isLarge=C}var D=o.get("zlevel"),d=o.get("effect.trailLength"),f=l.getZr();if(f.painter.getLayer(D).clear(!0),null!=this._lastZlevel)f.configLayer(this._lastZlevel,{motionBlur:!1});if(B&&d){if(__DEV__){var h=!1;s.eachSeries(function(e){if(e!==o&&e.get("zlevel")===D)h=!0}),h&&console.warn("Lines with trail effect should have an individual zlevel")}f.configLayer(D,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})}this.group.add(A.group),A.updateData(u),this._lastZlevel=D},updateLayout:function(e,t,i){this._lineDraw.updateLayout(e);var n=i.getZr();n.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(t,!0)},dispose:function(){}})}),define("echarts/chart/lines/linesLayout",["require"],function(require){return function(e){e.eachSeriesByType("lines",function(e){var t=e.coordinateSystem,i=e.getData();i.each(function(n){var r=i.getItemModel(n),a=r.option instanceof Array?r.option:r.get("coords");if(__DEV__)if(!(a instanceof Array&&a.length>0&&a[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(a)+". Lines must have 2d coords array in data item.");var o=[];if(e.get("polyline"))for(var s=0;s<a.length;s++)o.push(t.dataToPoint(a[s]));else{o[0]=t.dataToPoint(a[0]),o[1]=t.dataToPoint(a[1]);var l=r.get("lineStyle.normal.curveness");if(+l)o[2]=[(o[0][0]+o[1][0])/2-(o[0][1]-o[1][1])*l,(o[0][1]+o[1][1])/2-(o[1][0]-o[0][0])*l]}i.setItemLayout(n,o)})})}}),define("echarts/chart/lines/linesVisual",["require"],function(require){function e(e){if(!(e instanceof Array))e=[e,e];return e}return function(t){t.eachSeriesByType("lines",function(t){var i=t.getData(),n=e(t.get("symbol")),r=e(t.get("symbolSize")),a="lineStyle.normal.opacity".split(".");i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]),i.setVisual("opacity",t.get(a)),i.each(function(t){var n=i.getItemModel(t),r=e(n.getShallow("symbol",!0)),o=e(n.getShallow("symbolSize",!0)),s=n.get(a);r[0]&&i.setItemVisual(t,"fromSymbol",r[0]),r[1]&&i.setItemVisual(t,"toSymbol",r[1]),o[0]&&i.setItemVisual(t,"fromSymbolSize",o[0]),o[1]&&i.setItemVisual(t,"toSymbolSize",o[1]),i.setItemVisual(t,"opacity",s)})})}}),define("echarts/chart/lines",["require","./lines/LinesSeries","./lines/LinesView","../echarts","./lines/linesLayout","./lines/linesVisual"],function(require){require("./lines/LinesSeries"),require("./lines/LinesView");var e=require("../echarts");e.registerLayout(require("./lines/linesLayout")),e.registerVisual(require("./lines/linesVisual"))}),define("echarts/data/helper/completeDimensions",["require","zrender/core/util"],function(require){function e(e,r,a){if(!r)return e;a=a||{};var o=a.dimCount;if(null==o){var s=t(r[0]);o=i.isArray(s)&&s.length||1}for(var l=a.defaultNames||[],u=a.extraPrefix||"extra",A=0;o>A;A++)if(!e[A]){var B=l[A]||u+(A-l.length);e[A]=n(r,A)?{type:"ordinal",name:B}:B}return e}function t(e){return i.isArray(e)?e:i.isObject(e)?e.value:e}var i=require("zrender/core/util"),n=e.guessOrdinal=function(e,n){for(var r=0,a=e.length;a>r;r++){var o=t(e[r]);if(!i.isArray(o))return!1;var o=o[n];if(null!=o&&isFinite(o))return!1;else if(i.isString(o)&&"-"!==o)return!0}return!1};return e}),define("echarts/component/helper/selectableMixin",["require","zrender/core/util"],function(require){var e=require("zrender/core/util");return{updateSelectedMap:function(t){this._selectTargetMap=e.reduce(t||[],function(e,t){return e[t.name]=t,e},{})},select:function(t){var i=this._selectTargetMap,n=i[t],r=this.get("selectedMode");if("single"===r)e.each(i,function(e){e.selected=!1});n&&(n.selected=!0)},unSelect:function(e){var t=this._selectTargetMap[e];t&&(t.selected=!1)},toggleSelected:function(e){var t=this._selectTargetMap[e];if(null!=t)return this[t.selected?"unSelect":"select"](e),t.selected;else return void 0},isSelected:function(e){var t=this._selectTargetMap[e];return t&&t.selected}}}),define("zrender/contain/polygon",["require","./windingLine"],function(require){function e(e,t){return Math.abs(e-t)<n}function t(t,n,r){var a=0,o=t[0];if(!o)return!1;for(var s=1;s<t.length;s++){var l=t[s];a+=i(o[0],o[1],l[0],l[1],n,r),o=l}var u=t[0];if(!e(o[0],u[0])||!e(o[1],u[1]))a+=i(o[0],o[1],u[0],u[1],n,r);return 0!==a}var i=require("./windingLine"),n=1e-8;return{contain:t}}),define("echarts/coord/geo/Region",["require","zrender/contain/polygon","zrender/core/BoundingRect","zrender/core/bbox","zrender/core/vector"],function(require){function e(e,t,i){if(this.name=e,this.geometries=t,!i){var n=this.getBoundingRect();i=[n.x+n.width/2,n.y+n.height/2]}else i=[i[0],i[1]];this.center=i}var t=require("zrender/contain/polygon"),i=require("zrender/core/BoundingRect"),n=require("zrender/core/bbox"),r=require("zrender/core/vector");return e.prototype={constructor:e,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,a=[t,t],o=[-t,-t],s=[],l=[],u=this.geometries,A=0;A<u.length;A++)if("polygon"===u[A].type){var B=u[A].exterior;n.fromPoints(B,s,l),r.min(a,a,s),r.max(o,o,l)}else;if(0===A)a[0]=a[1]=o[0]=o[1]=0;return this._rect=new i(a[0],a[1],o[0]-a[0],o[1]-a[1])},contain:function(e){var i=this.getBoundingRect(),n=this.geometries;if(!i.contain(e[0],e[1]))return!1;e:for(var r=0,a=n.length;a>r;r++)if("polygon"===n[r].type){var o=n[r].exterior,s=n[r].interiors;if(t.contain(o,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(t.contain(s[l]))continue e;return!0}}else;return!1},transformTo:function(e,t,n,a){var o=this.getBoundingRect(),s=o.width/o.height;if(!n)n=s*a;else if(!a)a=n/s;for(var l=new i(e,t,n,a),u=o.calculateTransform(l),A=this.geometries,B=0;B<A.length;B++)if("polygon"===A[B].type){for(var c=A[B].exterior,C=A[B].interiors,D=0;D<c.length;D++)r.applyTransform(c[D],c[D],u);for(var d=0;d<(C?C.length:0);d++)for(var D=0;D<C[d].length;D++)r.applyTransform(C[d][D],C[d][D],u)}else;o=this._rect,o.copy(l),this.center=[o.x+o.width/2,o.y+o.height/2]}},e}),define("echarts/coord/geo/parseGeoJson",["require","zrender/core/util","./Region"],function(require){function e(e){if(!e.UTF8Encoding)return e;var i=e.UTF8Scale;if(null==i)i=1024;for(var n=e.features,r=0;r<n.length;r++)for(var a=n[r],o=a.geometry,s=o.coordinates,l=o.encodeOffsets,u=0;u<s.length;u++){var A=s[u];if("Polygon"===o.type)s[u]=t(A,l[u],i);else if("MultiPolygon"===o.type)for(var B=0;B<A.length;B++){var c=A[B];A[B]=t(c,l[u][B],i)}}return e.UTF8Encoding=!1,e}function t(e,t,i){for(var n=[],r=t[0],a=t[1],o=0;o<e.length;o+=2){var s=e.charCodeAt(o)-64,l=e.charCodeAt(o+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),s+=r,l+=a,r=s,a=l,n.push([s/i,l/i])}return n}var i=require("zrender/core/util"),n=require("./Region");return function(t){return e(t),i.map(i.filter(t.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var t=e.properties,r=e.geometry,a=r.coordinates,o=[];if("Polygon"===r.type)o.push({type:"polygon",exterior:a[0],interiors:a.slice(1)});if("MultiPolygon"===r.type)i.each(a,function(e){if(e[0])o.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})});var s=new n(t.name,o,t.cp);return s.properties=t,s})}}),define("echarts/coord/View",["require","zrender/core/vector","zrender/core/matrix","zrender/mixin/Transformable","zrender/core/util","zrender/core/BoundingRect"],function(require){function e(){a.call(this)}function t(t){this.name=t,this.zoomLimit,a.call(this),this._roamTransform=new e,this._viewTransform=new e,this._center,this._zoom}function i(e,t,i,n){var r=i.seriesModel,a=r?r.coordinateSystem:null;return a===this?a[e](n):null}var n=require("zrender/core/vector"),r=require("zrender/core/matrix"),a=require("zrender/mixin/Transformable"),o=require("zrender/core/util"),s=require("zrender/core/BoundingRect"),l=n.applyTransform;return o.mixin(e,a),t.prototype={constructor:t,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,i,n){return this._rect=new s(e,t,i,n),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,i,n){this.transformTo(e,t,i,n),this._viewRect=new s(e,t,i,n)},transformTo:function(e,t,i,n){var r=this.getBoundingRect(),a=this._viewTransform;a.transform=r.calculateTransform(new s(e,t,i,n)),a.decomposeTransform(),this._updateTransform()},setCenter:function(e){if(e)this._center=e,this._updateCenterAndZoom()},setZoom:function(e){e=e||1;var t=this.zoomLimit;if(t){if(null!=t.max)e=Math.min(t.max,e);if(null!=t.min)e=Math.max(t.min,e)}this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect(),t=e.x+e.width/2,i=e.y+e.height/2;return[t,i]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransform},_updateCenterAndZoom:function(){var e=this._viewTransform.getLocalTransform(),t=this._roamTransform,i=this.getDefaultCenter(),r=this.getCenter(),a=this.getZoom();r=n.applyTransform([],r,e),i=n.applyTransform([],i,e),t.origin=r,t.position=[i[0]-r[0],i[1]-r[1]],t.scale=[a,a],this._updateTransform()},_updateTransform:function(){var e=this._roamTransform,t=this._viewTransform;if(t.parent=e,e.updateTransform(),t.updateTransform(),t.transform&&r.copy(this.transform||(this.transform=[]),t.transform),this.transform)this.invTransform=this.invTransform||[],r.invert(this.invTransform,this.transform);else this.invTransform=null;this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e){var t=this.transform;return t?l([],e,t):[e[0],e[1]]},pointToData:function(e){var t=this.invTransform;return t?l([],e,t):[e[0],e[1]]},convertToPixel:o.curry(i,"dataToPoint"),convertFromPixel:o.curry(i,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},o.mixin(t,a),t}),define("echarts/coord/geo/fix/nanhai",["require","../Region","zrender/core/util"],function(require){for(var e=require("../Region"),t=require("zrender/core/util"),i=[126,25],n=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],r=0;r<n.length;r++)for(var a=0;a<n[r].length;a++)n[r][a][0]/=10.5,n[r][a][1]/=-14,n[r][a][0]+=i[0],n[r][a][1]+=i[1];return function(r){if("china"===r.map)r.regions.push(new e("南海诸岛",t.map(n,function(e){return{type:"polygon",exterior:e}}),i))}}),define("echarts/coord/geo/fix/textCoord",["require","zrender/core/util"],function(require){var e=require("zrender/core/util"),t={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};return function(i){e.each(i.regions,function(e){var i=t[e.name];if(i){var n=e.center;n[0]+=i[0]/10.5,n[1]+=-i[1]/14}})}}),define("echarts/coord/geo/fix/geoCoord",["require","zrender/core/util"],function(require){var e=require("zrender/core/util"),t={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};return function(i){e.each(i.regions,function(e){var i=t[e.name];if(i){var n=e.center;n[0]=i[0],n[1]=i[1]}})}}),define("echarts/coord/geo/Geo",["require","./parseGeoJson","zrender/core/util","zrender/core/BoundingRect","../View","./fix/nanhai","./fix/textCoord","./fix/geoCoord"],function(require){function e(e,t,i,n,r){a.call(this,e),this.map=t,this._nameCoordMap={},this.loadGeoJson(i,n,r)}function t(e,t,i,n){var r=i.geoModel,a=i.seriesModel,o=r?r.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return o===this?o[e](n):null}var i=require("./parseGeoJson"),n=require("zrender/core/util"),r=require("zrender/core/BoundingRect"),a=require("../View"),o=[require("./fix/nanhai"),require("./fix/textCoord"),require("./fix/geoCoord")];return e.prototype={constructor:e,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,i=0;i<t.length;i++)if(t[i].contain(e))return!0;return!1},loadGeoJson:function(e,t,r){try{this.regions=e?i(e):[]}catch(a){throw"Invalid geoJson format\n"+a.message}t=t||{},r=r||{};for(var s=this.regions,l={},u=0;u<s.length;u++){var A=s[u].name;A=r[A]||A,s[u].name=A,l[A]=s[u],this.addGeoCoord(A,s[u].center);var B=t[A];if(B)s[u].transformTo(B.left,B.top,B.width,B.height)}this._regionsMap=l,this._rect=null,n.each(o,function(e){e(this)},this)},transformTo:function(e,t,i,n){var a=this.getBoundingRect();a=a.clone(),a.y=-a.y-a.height;var o=this._viewTransform;o.transform=a.calculateTransform(new r(e,t,i,n)),o.decomposeTransform();var s=o.scale;s[1]=-s[1],o.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap[e]},getRegionByCoord:function(e){for(var t=this.regions,i=0;i<t.length;i++)if(t[i].contain(e))return t[i]},addGeoCoord:function(e,t){this._nameCoordMap[e]=t},getGeoCoord:function(e){return this._nameCoordMap[e]},getBoundingRect:function(){if(this._rect)return this._rect;for(var e,t=this.regions,i=0;i<t.length;i++){var n=t[i].getBoundingRect();e=e||n.clone(),e.union(n)}return this._rect=e||new r(0,0,0,0)},dataToPoints:function(e){var t=[];return e.mapArray(["lng","lat"],function(e,i){return t[0]=e,t[1]=i,this.dataToPoint(t)},this)},dataToPoint:function(e){if("string"==typeof e)e=this.getGeoCoord(e);if(e)return a.prototype.dataToPoint.call(this,e);else return void 0},convertToPixel:n.curry(t,"dataToPoint"),convertFromPixel:n.curry(t,"pointToData")},n.mixin(e,a),e}),define("echarts/coord/geo/geoCreator",["require","./Geo","../../util/layout","zrender/core/util","../../util/number","../../echarts","./parseGeoJson"],function(require){function e(e,t){var i=e.get("boundingCoords");if(null!=i){var r=i[0],o=i[1];if(isNaN(r[0])||isNaN(r[1])||isNaN(o[0])||isNaN(o[1])){if(__DEV__)console.error("Invalid boundingCoords")}else this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}var s,l=this.getBoundingRect(),u=e.get("layoutCenter"),A=e.get("layoutSize"),B=t.getWidth(),c=t.getHeight(),C=e.get("aspectScale")||.75,D=l.width/l.height*C,d=!1;if(u&&A)if(u=[a.parsePercent(u[0],B),a.parsePercent(u[1],c)],A=a.parsePercent(A,Math.min(B,c)),!isNaN(u[0])&&!isNaN(u[1])&&!isNaN(A))d=!0;else if(__DEV__)console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.");var f;if(d){var f={};if(D>1)f.width=A,f.height=A/D;else f.height=A,f.width=A*D;f.y=u[1]-f.height/2,f.x=u[0]-f.width/2}else s=e.getBoxLayoutParams(),s.aspect=D,f=n.getLayoutRect(s,{width:B,height:c});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function t(e,t){r.each(t.get("geoCoord"),function(t,i){e.addGeoCoord(i,t)})}var i=require("./Geo"),n=require("../../util/layout"),r=require("zrender/core/util"),a=require("../../util/number"),o={};if(__DEV__)var s=function(e){console.error("Map "+e+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")};var l={dimensions:i.prototype.dimensions,create:function(n,a){var l=[];n.eachComponent("geo",function(n,r){var u=n.get("map"),A=o[u];if(__DEV__)if(!A)s(u);var B=new i(u+r,u,A&&A.geoJson,A&&A.specialAreas,n.get("nameMap"));B.zoomLimit=n.get("scaleLimit"),l.push(B),t(B,n),n.coordinateSystem=B,B.model=n,B.resize=e,B.resize(n,a)}),n.eachSeries(function(e){var t=e.get("coordinateSystem");if("geo"===t){var i=e.get("geoIndex")||0;e.coordinateSystem=l[i]}});var u={};return n.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();u[t]=u[t]||[],u[t].push(e)}}),r.each(u,function(n,u){var A=o[u];if(__DEV__)if(!A)s(n[0].get("map"));var B=r.map(n,function(e){return e.get("nameMap")}),c=new i(u,u,A&&A.geoJson,A&&A.specialAreas,r.mergeAll(B));c.zoomLimit=r.retrieve.apply(null,r.map(n,function(e){return e.get("scaleLimit")})),l.push(c),c.resize=e,c.resize(n[0],a),r.each(n,function(e){e.coordinateSystem=c,t(c,e)})}),l},registerMap:function(e,t,i){if(t.geoJson&&!t.features)i=t.specialAreas,t=t.geoJson;if("string"==typeof t)t="undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")();o[e]={geoJson:t,specialAreas:i}},getMap:function(e){return o[e]},getFilledRegions:function(e,t){var i=(e||[]).slice(),n=l.getMap(t),r=n&&n.geoJson;if(!r){if(__DEV__)s(t);return e}for(var a={},o=r.features,u=0;u<i.length;u++)a[i[u].name]=i[u];for(var u=0;u<o.length;u++){var A=o[u].properties.name;if(!a[A])i.push({name:A})}return i}},u=require("../../echarts");return u.registerMap=l.registerMap,u.getMap=l.getMap,u.parseGeoJSON=require("./parseGeoJson"),u.loadMap=function(){},u.registerCoordinateSystem("geo",l),l}),define("echarts/chart/map/MapSeries",["require","../../data/List","../../model/Series","zrender/core/util","../../data/helper/completeDimensions","../../util/format","../../component/helper/selectableMixin","../../coord/geo/geoCreator"],function(require){var e=require("../../data/List"),t=require("../../model/Series"),i=require("zrender/core/util"),n=require("../../data/helper/completeDimensions"),r=require("../../util/format"),a=r.encodeHTML,o=r.addCommas,s=require("../../component/helper/selectableMixin"),l=require("../../coord/geo/geoCreator"),u=t.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(e){e=this._fillOption(e,this.getMapType()),this.option=e,u.superApply(this,"init",arguments),this.updateSelectedMap(e.data)},getInitialData:function(t){var i=n(["value"],t.data||[]),r=new e(i,this);return r.initData(t.data),r},mergeOption:function(e){if(e.data)e=this._fillOption(e,this.getMapType());u.superCall(this,"mergeOption",e),this.updateSelectedMap(this.option.data)},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(e,t){return e=i.extend({},e),e.data=l.getFilledRegions(e.data,t),e},getRawValue:function(e){return this.getData().get("value",e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e){for(var t=this.getData(),i=o(this.getRawValue(e)),n=t.getName(e),r=this.seriesGroup,s=[],l=0;l<r.length;l++){var u=r[l].originalData.indexOfName(n);if(!isNaN(r[l].originalData.get("value",u)))s.push(a(r[l].name))}return s.join(", ")+"<br />"+a(n+" : "+i)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),i=this.coordinateSystem,n=i.getRegion(t);return n&&i.dataToPoint(n.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,textStyle:{color:"#000"}},emphasis:{show:!0,textStyle:{color:"rgb(100,0,0)"}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{areaColor:"rgba(255,215,0,0.8)"}}}});return i.mixin(u,s),u}),define("zrender/core/event",["require","../mixin/Eventful","./env"],function(require){"use strict";function e(e){return e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0}}function t(e,t,n,r){if(n=n||{},r||!s.canvasSupported)i(e,t,n);else if(s.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX)n.zrX=t.layerX,n.zrY=t.layerY;else if(null!=t.offsetX)n.zrX=t.offsetX,n.zrY=t.offsetY;else i(e,t,n);return n}function i(t,i,n){var r=e(t);n.zrX=i.clientX-r.left,n.zrY=i.clientY-r.top}function n(e,i,n){if(i=i||window.event,null!=i.zrX)return i;var r=i.type,a=r&&r.indexOf("touch")>=0;if(!a)t(e,i,i,n),i.zrDelta=i.wheelDelta?i.wheelDelta/120:-(i.detail||0)/3;else{var o="touchend"!=r?i.targetTouches[0]:i.changedTouches[0];o&&t(e,o,i,n)}return i}function r(e,t,i){if(l)e.addEventListener(t,i);else e.attachEvent("on"+t,i)}function a(e,t,i){if(l)e.removeEventListener(t,i);else e.detachEvent("on"+t,i)}var o=require("../mixin/Eventful"),s=require("./env"),l="undefined"!=typeof window&&!!window.addEventListener,u=l?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};return{clientToLocal:t,normalizeEvent:n,addEventListener:r,removeEventListener:a,stop:u,Dispatcher:o}}),define("echarts/component/helper/interactionMutex",["require","../../echarts"],function(require){function e(e){return e[t]||(e[t]={})}var t="\x00_ec_interaction_mutex",i={take:function(t,i,n){var r=e(t);r[i]=n},release:function(t,i,n){var r=e(t),a=r[i];if(a===n)r[i]=null},isTaken:function(t,i){return!!e(t)[i]}};return require("../../echarts").registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),i}),define("echarts/component/helper/RoamController",["require","zrender/mixin/Eventful","zrender/core/util","zrender/core/event","./interactionMutex"],function(require){function e(e){this.pointerChecker,this._zr=e;var o=l.bind,u=o(t,this),A=o(i,this),B=o(n,this),c=o(r,this),C=o(a,this);s.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t){if(this.disable(),null==t)t=!0;if(t===!0||"move"===t||"pan"===t)e.on("mousedown",u),e.on("mousemove",A),e.on("mouseup",B);if(t===!0||"scale"===t||"zoom"===t)e.on("mousewheel",c),e.on("pinch",C)},this.disable=function(){e.off("mousedown",u),e.off("mousemove",A),e.off("mouseup",B),e.off("mousewheel",c),e.off("pinch",C)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function t(e){if(!e.target||!e.target.draggable){var t=e.offsetX,i=e.offsetY;if(this.pointerChecker&&this.pointerChecker(e,t,i))this._x=t,this._y=i,this._dragging=!0}}function i(e){if(this._dragging)if(u.stop(e.event),"pinch"!==e.gestureEvent){if(A.isTaken(this._zr,"globalPan"))return;var t=e.offsetX,i=e.offsetY,n=this._x,r=this._y,a=t-n,o=i-r;this._x=t,this._y=i,u.stop(e.event),this.trigger("pan",a,o,n,r,t,i)}}function n(e){this._dragging=!1}function r(e){if(0!==e.wheelDelta){var t=e.wheelDelta>0?1.1:1/1.1;o.call(this,e,t,e.offsetX,e.offsetY)}}function a(e){if(!A.isTaken(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;o.call(this,e,t,e.pinchX,e.pinchY)}}function o(e,t,i,n){if(this.pointerChecker&&this.pointerChecker(e,i,n))u.stop(e.event),this.trigger("zoom",t,i,n)}var s=require("zrender/mixin/Eventful"),l=require("zrender/core/util"),u=require("zrender/core/event"),A=require("./interactionMutex");return l.mixin(e,s),e}),define("echarts/component/helper/roamHelper",["require"],function(require){var e={};return e.updateViewOnPan=function(e,t,i){var n=e.target,r=n.position;r[0]+=t,r[1]+=i,n.dirty()},e.updateViewOnZoom=function(e,t,i,n){var r=e.target,a=e.zoomLimit,o=r.position,s=r.scale,l=e.zoom=e.zoom||1;if(l*=t,a){var u=a.min||0,A=a.max||1/0;l=Math.max(Math.min(A,l),u)}var B=l/e.zoom;e.zoom=l,o[0]-=(i-o[0])*(B-1),o[1]-=(n-o[1])*(B-1),s[0]*=B,s[1]*=B,r.dirty()},e}),define("echarts/component/helper/cursorHelper",["require"],function(require){var e={},t={axisPointer:1,tooltip:1,brush:1};return e.onIrrelevantElement=function(e,i,n){var r=i.getComponentByElement(e.topTarget),a=r&&r.coordinateSystem;return r&&r!==n&&!t[r.mainType]&&a&&a.model!==n},e}),define("echarts/component/helper/MapDraw",["require","./RoamController","../../component/helper/roamHelper","../../component/helper/cursorHelper","../../util/graphic","zrender/core/util"],function(require){function e(e,t){var i=e.getItemStyle(),n=e.get("areaColor");if(null!=n)i.fill=n;return i}function t(e,t,n,r,a){if(n.off("click"),n.off("mousedown"),t.get("selectedMode"))n.on("mousedown",function(){e._mouseDownFlag=!0}),n.on("click",function(o){if(e._mouseDownFlag){e._mouseDownFlag=!1;for(var s=o.target;!s.__regions;)s=s.parent;if(s){var u={type:("geo"===t.mainType?"geo":"map")+"ToggleSelect",batch:l.map(s.__regions,function(e){return{name:e.name,from:a.uid}})};u[t.mainType+"Id"]=t.id,r.dispatchAction(u),i(t,n)}}})}function i(e,t){t.eachChild(function(t){l.each(t.__regions,function(i){t.trigger(e.isSelected(i.name)?"emphasis":"normal")})})}function n(e,t){var i=new s.Group;this._controller=new r(e.getZr()),this._controllerHost={target:t?i:null},this.group=i,this._updateGroup=t,this._mouseDownFlag}var r=require("./RoamController"),a=require("../../component/helper/roamHelper"),o=require("../../component/helper/cursorHelper"),s=require("../../util/graphic"),l=require("zrender/core/util");return n.prototype={constructor:n,draw:function(n,r,a,o,u){var A="geo"===n.mainType,B=n.getData&&n.getData();A&&r.eachComponent({mainType:"series",subType:"map"},function(e){if(!B&&e.getHostGeoModel()===n)B=e.getData()});var c=n.coordinateSystem,C=this.group,D=c.scale,d={position:c.position,scale:D};if(!C.childAt(0)||u)C.attr(d);else s.updateProps(C,d,n);C.removeAll();var f=["itemStyle","normal"],h=["itemStyle","emphasis"],E=["label","normal"],p=["label","emphasis"],F={};l.each(c.regions,function(t){var i=F[t.name]||(F[t.name]=new s.Group),r=new s.CompoundPath({shape:{paths:[]}});i.add(r);var a,o=n.getRegionModel(t.name)||n,u=o.getModel(f),c=o.getModel(h),d=e(u,D),m=e(c,D),g=o.getModel(E),H=o.getModel(p);if(B){a=B.indexOfName(t.name);var G=B.getItemVisual(a,"color",!0);if(G)d.fill=G}var I=g.getModel("textStyle"),v=H.getModel("textStyle");l.each(t.geometries,function(e){if("polygon"===e.type){r.shape.paths.push(new s.Polygon({shape:{points:e.exterior}}));for(var t=0;t<(e.interiors?e.interiors.length:0);t++)r.shape.paths.push(new s.Polygon({shape:{points:e.interiors[t]}}))}}),r.setStyle(d),r.style.strokeNoScale=!0,r.culling=!0;var y=g.get("show"),J=H.get("show"),L=B&&isNaN(B.get("value",a)),M=B&&B.getItemLayout(a);if(A||L&&(y||J)||M&&M.showLabel){var b=B?a:t.name,N=n.getFormattedLabel(b,"normal"),K=n.getFormattedLabel(b,"emphasis"),x=new s.Text({style:{text:y?N||t.name:"",fill:I.getTextColor(),textFont:I.getFont(),textAlign:"center",textVerticalAlign:"middle"},hoverStyle:{text:J?K||t.name:"",fill:v.getTextColor(),textFont:v.getFont()},position:t.center.slice(),scale:[1/D[0],1/D[1]],z2:10,silent:!0});i.add(x)}if(B)B.setItemGraphicEl(a,i);else{var o=n.getRegionModel(t.name);r.eventData={componentType:"geo",geoIndex:n.componentIndex,name:t.name,region:o&&o.option||{}}}var P=i.__regions||(i.__regions=[]);P.push(t),s.setHoverStyle(i,m,{hoverSilentOnTouch:!!n.get("selectedMode")}),C.add(i)}),this._updateController(n,r,a),t(this,n,C,a,o),i(n,C)},remove:function(){this.group.removeAll(),this._controller.dispose(),this._controllerHost={}},_updateController:function(e,t,i){function n(){var t={type:"geoRoam",componentType:A};return t[A+"Id"]=e.id,t}var r=e.coordinateSystem,s=this._controller,u=this._controllerHost;u.zoomLimit=e.get("scaleLimit"),u.zoom=r.getZoom(),s.enable(e.get("roam")||!1);var A=e.mainType;s.off("pan").on("pan",function(e,t){this._mouseDownFlag=!1,a.updateViewOnPan(u,e,t),i.dispatchAction(l.extend(n(),{dx:e,dy:t}))},this),s.off("zoom").on("zoom",function(e,t,r){if(this._mouseDownFlag=!1,a.updateViewOnZoom(u,e,t,r),i.dispatchAction(l.extend(n(),{
zoom:e,originX:t,originY:r})),this._updateGroup){var o=this.group,s=o.scale;o.traverse(function(e){if("text"===e.type)e.attr("scale",[1/s[0],1/s[1]])})}},this),s.setPointerChecker(function(t,n,a){return r.getViewRectAfterRoam().contain(n,a)&&!o.onIrrelevantElement(t,i,e)})}},n}),define("echarts/chart/map/MapView",["require","../../util/graphic","../../component/helper/MapDraw","../../echarts"],function(require){var e=require("../../util/graphic"),t=require("../../component/helper/MapDraw");require("../../echarts").extendChartView({type:"map",render:function(e,i,n,r){if(!r||"mapToggleSelect"!==r.type||r.from!==this.uid){var a=this.group;if(a.removeAll(),!e.getHostGeoModel()){if(!r||"geoRoam"!==r.type||"series"!==r.componentType||r.seriesId!==e.id)if(e.needsDrawMap){var o=this._mapDraw||new t(n,!0);a.add(o.group),o.draw(e,i,n,this,r),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;else{var o=this._mapDraw;o&&a.add(o.group)}e.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(e,i,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,i,n){var r=t.originalData,a=this.group;r.each("value",function(i,n){if(!isNaN(i)){var o=r.getItemLayout(n);if(o&&o.point){var s=o.point,l=o.offset,u=new e.Circle({style:{fill:t.getData().getVisual("color")},shape:{cx:s[0]+9*l,cy:s[1],r:3},silent:!0,z2:10});if(!l){var A=t.mainSeries.getData(),B=r.getName(n),c=B,C=A.indexOfName(B),D=r.getItemModel(n),d=D.getModel("label.normal"),f=D.getModel("label.emphasis"),h=d.getModel("textStyle"),E=f.getModel("textStyle"),p=A.getItemGraphicEl(C);u.setStyle({textPosition:"bottom"});var F=function(){u.setStyle({text:f.get("show")?c:"",textFill:E.getTextColor(),textFont:E.getFont()})},m=function(){u.setStyle({text:d.get("show")?c:"",textFill:h.getTextColor(),textFont:h.getFont()})};p.on("mouseover",F).on("mouseout",m).on("emphasis",F).on("normal",m),m()}a.add(u)}}})}})}),define("echarts/action/roamHelper",["require"],function(require){var e={};return e.updateCenterAndZoom=function(e,t,i){var n=e.getZoom(),r=e.getCenter(),a=t.zoom,o=e.dataToPoint(r);if(null!=t.dx&&null!=t.dy){o[0]-=t.dx,o[1]-=t.dy;var r=e.pointToData(o);e.setCenter(r)}if(null!=a){if(i){var s=i.min||0,l=i.max||1/0;a=Math.max(Math.min(n*a,l),s)/n}e.scale[0]*=a,e.scale[1]*=a;var u=e.position,A=(t.originX-u[0])*(a-1),B=(t.originY-u[1])*(a-1);u[0]-=A,u[1]-=B,e.updateTransform();var r=e.pointToData(o);e.setCenter(r),e.setZoom(a*n)}return{center:e.getCenter(),zoom:e.getZoom()}},e}),define("echarts/action/geoRoam",["require","zrender/core/util","./roamHelper","../echarts"],function(require){var e=require("zrender/core/util"),t=require("./roamHelper"),i=require("../echarts");i.registerAction({type:"geoRoam",event:"geoRoam",update:"updateLayout"},function(i,n){var r=i.componentType||"series";n.eachComponent({mainType:r,query:i},function(n){var a=n.coordinateSystem;if("geo"===a.type){var o=t.updateCenterAndZoom(a,i,n.get("scaleLimit"));if(n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom),"series"===r)e.each(n.seriesGroup,function(e){e.setCenter(o.center),e.setZoom(o.zoom)})}})})}),define("echarts/chart/map/mapSymbolLayout",["require","zrender/core/util"],function(require){var e=require("zrender/core/util");return function(t){var i={};t.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!i[r]){var a={};e.each(n.seriesGroup,function(e){var i=e.coordinateSystem,n=e.originalData;if(e.get("showLegendSymbol")&&t.getComponent("legend"))n.each("value",function(e,t){var r=n.getName(t),o=i.getRegion(r);if(o&&!isNaN(e)){var s=a[r]||0,l=i.dataToPoint(o.center);a[r]=s+1,n.setItemLayout(t,{point:l,offset:s})}})});var o=n.getData();o.each(function(e){var t=o.getName(e),i=o.getItemLayout(e)||{};i.showLabel=!a[t],o.setItemLayout(e,i)}),i[r]=!0}})}}),define("echarts/chart/map/mapVisual",["require"],function(require){return function(e){e.eachSeriesByType("map",function(e){var t=e.get("color"),i=e.getModel("itemStyle.normal"),n=i.get("areaColor"),r=i.get("color")||t[e.seriesIndex%t.length];e.getData().setVisual({areaColor:n,color:r})})}}),define("echarts/chart/map/mapDataStatistic",["require","zrender/core/util"],function(require){function e(e,i){var n={},r=["value"];return t.each(e,function(e){e.each(r,function(t,i){var r=e.getName(i);if(n[r]=n[r]||[],!isNaN(t))n[r].push(t)})}),e[0].map(r,function(t,r){for(var a=e[0].getName(r),o=0,s=1/0,l=-(1/0),u=n[a].length,A=0;u>A;A++)s=Math.min(s,n[a][A]),l=Math.max(l,n[a][A]),o+=n[a][A];var B;if("min"===i)B=s;else if("max"===i)B=l;else if("average"===i)B=o/u;else B=o;return 0===u?NaN:B})}var t=require("zrender/core/util");return function(i){var n={};i.eachSeriesByType("map",function(e){var t=e.getHostGeoModel(),i=t?"o"+t.id:"i"+e.getMapType();(n[i]=n[i]||[]).push(e)}),t.each(n,function(i,n){for(var r=e(t.map(i,function(e){return e.getData()}),i[0].get("mapValueCalculation")),a=0;a<i.length;a++)i[a].originalData=i[a].getData();for(var a=0;a<i.length;a++)i[a].seriesGroup=i,i[a].needsDrawMap=0===a&&!i[a].getHostGeoModel(),i[a].setData(r.cloneShallow()),i[a].mainSeries=i[0]})}}),define("echarts/chart/map/backwardCompat",["require","zrender/core/util"],function(require){var e=require("zrender/core/util");return function(t){var i=[];e.each(t.series,function(e){if("map"===e.type)i.push(e)}),e.each(i,function(t){t.map=t.map||t.mapType,e.defaults(t,t.mapLocation)})}}),define("echarts/action/createDataSelectAction",["require","../echarts","zrender/core/util"],function(require){var e=require("../echarts"),t=require("zrender/core/util");return function(i,n){t.each(n,function(t){t.update="updateView",e.registerAction(t,function(e,n){var r={};return n.eachComponent({mainType:"series",subType:i,query:e},function(i){if(i[t.method])i[t.method](e.name);var n=i.getData();n.each(function(e){var t=n.getName(e);r[t]=i.isSelected(t)||!1})}),{name:e.name,selected:r}})})}}),define("echarts/chart/map",["require","../echarts","./map/MapSeries","./map/MapView","../action/geoRoam","../coord/geo/geoCreator","./map/mapSymbolLayout","./map/mapVisual","./map/mapDataStatistic","./map/backwardCompat","../action/createDataSelectAction"],function(require){var e=require("../echarts"),t=e.PRIORITY;require("./map/MapSeries"),require("./map/MapView"),require("../action/geoRoam"),require("../coord/geo/geoCreator"),e.registerLayout(require("./map/mapSymbolLayout")),e.registerVisual(require("./map/mapVisual")),e.registerProcessor(t.PROCESSOR.STATISTIC,require("./map/mapDataStatistic")),e.registerPreprocessor(require("./map/backwardCompat")),require("../action/createDataSelectAction")("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])}),define("echarts/chart/helper/createListFromArray",["require","../../data/List","../../data/helper/completeDimensions","zrender/core/util","../../util/model","../../CoordinateSystem"],function(require){"use strict";function e(e){for(var t=0;t<e.length&&null==e[t];)t++;return e[t]}function t(t){var i=e(t);return null!=i&&!l.isArray(B(i))}function i(e,i,n){if(e=e||[],__DEV__)if(!l.isArray(e))throw new Error("Invalid data.");var r=i.get("coordinateSystem"),D=C[r],d=A.get(r),f=D&&D(e,i,n),h=f&&f.dimensions;if(!h)h=d&&(d.getDimensionsInfo?d.getDimensionsInfo():d.dimensions.slice())||["x","y"],h=s(h,e,{defaultNames:h.concat(["value"])});var E=f?f.categoryIndex:-1,p=new o(h,i),F=a(f,e),m={},g=E>=0&&t(e)?function(e,t,i,n){if(u.isDataItemOption(e))p.hasItemOption=!0;return n===E?i:c(B(e),h[n])}:function(e,t,i,n){var r=B(e),a=c(r&&r[n],h[n]);if(u.isDataItemOption(e))p.hasItemOption=!0;var o=f&&f.categoryAxesModels;if(o&&o[t])if("string"==typeof a)if(m[t]=m[t]||o[t].getCategories(),a=l.indexOf(m[t],a),0>a&&!isNaN(a))a=+a;return a};return p.hasItemOption=!1,p.initData(e,F,g),p}function n(e){return"category"!==e&&"time"!==e}function r(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function a(e,t){var i,n=[],r=e&&e.dimensions[e.categoryIndex];if(r)i=e.categoryAxesModels[r.name];if(i){var a=i.getCategories();if(a){var o=t.length;if(l.isArray(t[0])&&t[0].length>1){n=[];for(var s=0;o>s;s++)n[s]=a[t[s][e.categoryIndex||0]]}else n=a.slice(0)}}return n}var o=require("../../data/List"),s=require("../../data/helper/completeDimensions"),l=require("zrender/core/util"),u=require("../../util/model"),A=require("../../CoordinateSystem"),B=u.getDataItemValue,c=u.converDataValue,C={cartesian2d:function(e,t,i){var a=l.map(["xAxis","yAxis"],function(e){return i.queryComponents({mainType:e,index:t.get(e+"Index"),id:t.get(e+"Id")})[0]}),o=a[0],u=a[1];if(__DEV__){if(!o)throw new Error('xAxis "'+l.retrieve(t.get("xAxisIndex"),t.get("xAxisId"),0)+'" not found');if(!u)throw new Error('yAxis "'+l.retrieve(t.get("xAxisIndex"),t.get("yAxisId"),0)+'" not found')}var A=o.get("type"),B=u.get("type"),c=[{name:"x",type:r(A),stackable:n(A)},{name:"y",type:r(B),stackable:n(B)}],C="category"===A,D="category"===B;s(c,e,{defaultNames:["x","y","z"]});var d={};if(C)d.x=o;if(D)d.y=u;return{dimensions:c,categoryIndex:C?0:D?1:-1,categoryAxesModels:d}},singleAxis:function(e,t,i){var a=i.queryComponents({mainType:"singleAxis",index:t.get("singleAxisIndex"),id:t.get("singleAxisId")})[0];if(__DEV__)if(!a)throw new Error("singleAxis should be specified.");var o=a.get("type"),l="category"===o,u=[{name:"single",type:r(o),stackable:n(o)}];s(u,e);var A={};if(l)A.single=a;return{dimensions:u,categoryIndex:l?0:-1,categoryAxesModels:A}},polar:function(e,t,i){var a=i.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0],o=a.findAxisModel("angleAxis"),l=a.findAxisModel("radiusAxis");if(__DEV__){if(!o)throw new Error("angleAxis option not found");if(!l)throw new Error("radiusAxis option not found")}var u=l.get("type"),A=o.get("type"),B=[{name:"radius",type:r(u),stackable:n(u)},{name:"angle",type:r(A),stackable:n(A)}],c="category"===A,C="category"===u;s(B,e,{defaultNames:["radius","angle","value"]});var D={};if(C)D.radius=l;if(c)D.angle=o;return{dimensions:B,categoryIndex:c?1:C?0:-1,categoryAxesModels:D}},geo:function(e,t,i){return{dimensions:s([{name:"lng"},{name:"lat"}],e,{defaultNames:["lng","lat","value"]})}}};return i}),define("echarts/chart/scatter/ScatterSeries",["require","../helper/createListFromArray","../../model/Series"],function(require){"use strict";var e=require("../helper/createListFromArray"),t=require("../../model/Series");return t.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis"],getInitialData:function(t,i){var n=e(t.data,this,i);return n},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{normal:{opacity:.8}}}})}),define("echarts/chart/helper/Symbol",["require","zrender/core/util","../../util/symbol","../../util/graphic","../../util/number"],function(require){function e(e,t){var i=e.getItemVisual(t,"symbolSize");return i instanceof Array?i.slice():[+i,+i]}function t(e){return[e[0]/2,e[1]/2]}function i(e,t,i){o.Group.call(this),this.updateData(e,t,i)}function n(e,t){this.parent.drift(e,t)}var r=require("zrender/core/util"),a=require("../../util/symbol"),o=require("../../util/graphic"),s=require("../../util/number"),l=i.prototype;l._createSymbol=function(e,i,r,s){this.removeAll();var l=i.hostModel,u=i.getItemVisual(r,"color"),A=a.createSymbol(e,-1,-1,2,2,u);A.attr({z2:100,culling:!0,scale:[0,0]}),A.drift=n,o.initProps(A,{scale:t(s)},l,r),this._symbolType=e,this.add(A)},l.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},l.getSymbolPath=function(){return this.childAt(0)},l.getScale=function(){return this.childAt(0).scale},l.highlight=function(){this.childAt(0).trigger("emphasis")},l.downplay=function(){this.childAt(0).trigger("normal")},l.setZ=function(e,t){var i=this.childAt(0);i.zlevel=e,i.z=t},l.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":"pointer"},l.updateData=function(i,n,r){this.silent=!1;var a=i.getItemVisual(n,"symbol")||"circle",s=i.hostModel,l=e(i,n);if(a!==this._symbolType)this._createSymbol(a,i,n,l);else{var u=this.childAt(0);u.silent=!1,o.updateProps(u,{scale:t(l)},s,n)}this._updateCommon(i,n,l,r),this._seriesModel=s};var u=["itemStyle","normal"],A=["itemStyle","emphasis"],B=["label","normal"],c=["label","emphasis"];return l._updateCommon=function(e,i,n,a){var l=this.childAt(0),C=e.hostModel,D=e.getItemVisual(i,"color");if("image"!==l.type)l.useStyle({strokeNoScale:!0});a=a||null;var d=a&&a.itemStyle,f=a&&a.hoverItemStyle,h=a&&a.symbolRotate,E=a&&a.symbolOffset,p=a&&a.labelModel,F=a&&a.hoverLabelModel,m=a&&a.hoverAnimation;if(!a||e.hasItemOption){var g=e.getItemModel(i);d=g.getModel(u).getItemStyle(["color"]),f=g.getModel(A).getItemStyle(),h=g.getShallow("symbolRotate"),E=g.getShallow("symbolOffset"),p=g.getModel(B),F=g.getModel(c),m=g.getShallow("hoverAnimation")}else f=r.extend({},f);var H=l.style;if(l.attr("rotation",(h||0)*Math.PI/180||0),E)l.attr("position",[s.parsePercent(E[0],n[0]),s.parsePercent(E[1],n[1])]);l.setColor(D),l.setStyle(d);var G=e.getItemVisual(i,"opacity");if(null!=G)H.opacity=G;for(var I,v,y=e.dimensions.slice();y.length&&(I=y.pop(),v=e.getDimensionInfo(I).type,"ordinal"===v||"time"===v););if(null!=I&&p.getShallow("show"))o.setText(H,p,D),H.text=r.retrieve(C.getFormattedLabel(i,"normal"),e.get(I,i));else H.text="";if(null!=I&&F.getShallow("show"))o.setText(f,F,D),f.text=r.retrieve(C.getFormattedLabel(i,"emphasis"),e.get(I,i));else f.text="";l.off("mouseover").off("mouseout").off("emphasis").off("normal"),l.hoverStyle=f,o.setHoverStyle(l);var J=t(n);if(m&&C.isAnimationEnabled()){var L=function(){var e=J[1]/J[0];this.animateTo({scale:[Math.max(1.1*J[0],J[0]+3),Math.max(1.1*J[1],J[1]+3*e)]},400,"elasticOut")},M=function(){this.animateTo({scale:J},400,"elasticOut")};l.on("mouseover",L).on("mouseout",M).on("emphasis",L).on("normal",M)}},l.fadeOut=function(e){var t=this.childAt(0);this.silent=t.silent=!0,t.style.text="",o.updateProps(t,{scale:[0,0]},this._seriesModel,this.dataIndex,e)},r.inherits(i,o.Group),i}),define("echarts/chart/helper/SymbolDraw",["require","../../util/graphic","./Symbol"],function(require){function e(e){this.group=new i.Group,this._symbolCtor=e||n}function t(e,t,i){var n=e.getItemLayout(t);return!(!n||isNaN(n[0])||isNaN(n[1])||i&&i(t)||"none"===e.getItemVisual(t,"symbol"))}var i=require("../../util/graphic"),n=require("./Symbol"),r=e.prototype;return r.updateData=function(e,n){var r=this.group,a=e.hostModel,o=this._data,s=this._symbolCtor,l={itemStyle:a.getModel("itemStyle.normal").getItemStyle(["color"]),hoverItemStyle:a.getModel("itemStyle.emphasis").getItemStyle(),symbolRotate:a.get("symbolRotate"),symbolOffset:a.get("symbolOffset"),hoverAnimation:a.get("hoverAnimation"),labelModel:a.getModel("label.normal"),hoverLabelModel:a.getModel("label.emphasis")};e.diff(o).add(function(i){var a=e.getItemLayout(i);if(t(e,i,n)){var o=new s(e,i,l);o.attr("position",a),e.setItemGraphicEl(i,o),r.add(o)}}).update(function(u,A){var B=o.getItemGraphicEl(A),c=e.getItemLayout(u);if(!t(e,u,n))return void r.remove(B);if(!B)B=new s(e,u),B.attr("position",c);else B.updateData(e,u,l),i.updateProps(B,{position:c},a);r.add(B),e.setItemGraphicEl(u,B)}).remove(function(e){var t=o.getItemGraphicEl(e);t&&t.fadeOut(function(){r.remove(t)})}).execute(),this._data=e},r.updateLayout=function(){var e=this._data;if(e)e.eachItemGraphicEl(function(t,i){var n=e.getItemLayout(i);t.attr("position",n)})},r.remove=function(e){var t=this.group,i=this._data;if(i)if(e)i.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)})});else t.removeAll()},e}),define("echarts/chart/helper/LargeSymbolDraw",["require","../../util/graphic","../../util/symbol"],function(require){function e(){this.group=new t.Group,this._symbolEl=new n({})}var t=require("../../util/graphic"),i=require("../../util/symbol"),n=t.extendShape({shape:{points:null,sizes:null},symbolProxy:null,buildPath:function(e,t){for(var i=t.points,n=t.sizes,r=this.symbolProxy,a=r.shape,o=0;o<i.length;o++){var s=i[o],l=n[o];if(l[0]<4)e.rect(s[0]-l[0]/2,s[1]-l[1]/2,l[0],l[1]);else a.x=s[0]-l[0]/2,a.y=s[1]-l[1]/2,a.width=l[0],a.height=l[1],r.buildPath(e,a,!0)}},findDataIndex:function(e,t){for(var i=this.shape,n=i.points,r=i.sizes,a=n.length-1;a>=0;a--){var o=n[a],s=r[a],l=o[0]-s[0]/2,u=o[1]-s[1]/2;if(e>=l&&t>=u&&e<=l+s[0]&&t<=u+s[1])return a}return-1}}),r=e.prototype;return r.updateData=function(e){this.group.removeAll();var t=this._symbolEl,n=e.hostModel;t.setShape({points:e.mapArray(e.getItemLayout),sizes:e.mapArray(function(t){var i=e.getItemVisual(t,"symbolSize");if(!(i instanceof Array))i=[i,i];return i})}),t.symbolProxy=i.createSymbol(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor,t.useStyle(n.getModel("itemStyle.normal").getItemStyle(["color"]));var r=e.getVisual("color");if(r)t.setColor(r);t.seriesIndex=n.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var i=t.findDataIndex(e.offsetX,e.offsetY);if(i>0)t.dataIndex=i}),this.group.add(t)},r.updateLayout=function(e){var t=e.getData();this._symbolEl.setShape({points:t.mapArray(t.getItemLayout)})},r.remove=function(){this.group.removeAll()},e}),define("echarts/chart/scatter/ScatterView",["require","../helper/SymbolDraw","../helper/LargeSymbolDraw","../../echarts"],function(require){var e=require("../helper/SymbolDraw"),t=require("../helper/LargeSymbolDraw");require("../../echarts").extendChartView({type:"scatter",init:function(){this._normalSymbolDraw=new e,this._largeSymbolDraw=new t},render:function(e,t,i){var n=e.getData(),r=this._largeSymbolDraw,a=this._normalSymbolDraw,o=this.group,s=e.get("large")&&n.count()>e.get("largeThreshold")?r:a;this._symbolDraw=s,s.updateData(n),o.add(s.group),o.remove(s===r?a.group:r.group)},updateLayout:function(e){this._symbolDraw.updateLayout(e)},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t,!0)},dispose:function(){}})}),define("echarts/visual/symbol",["require"],function(require){return function(e,t,i,n,r){n.eachRawSeriesByType(e,function(e){var r=e.getData(),a=e.get("symbol")||t,o=e.get("symbolSize");if(r.setVisual({legendSymbol:i||a,symbol:a,symbolSize:o}),!n.isSeriesFiltered(e)){if("function"==typeof o)r.each(function(t){var i=e.getRawValue(t),n=e.getDataParams(t);r.setItemVisual(t,"symbolSize",o(i,n))});r.each(function(e){var t=r.getItemModel(e),i=t.getShallow("symbol",!0),n=t.getShallow("symbolSize",!0);if(null!=i)r.setItemVisual(e,"symbol",i);if(null!=n)r.setItemVisual(e,"symbolSize",n)})}})}}),define("echarts/layout/points",["require"],function(require){return function(e,t){t.eachSeriesByType(e,function(e){var t=e.getData(),i=e.coordinateSystem;if(i){var n=i.dimensions;if(1===n.length)t.each(n[0],function(e,n){t.setItemLayout(n,isNaN(e)?[NaN,NaN]:i.dataToPoint(e))});else if(2===n.length)t.each(n,function(e,n,r){t.setItemLayout(r,isNaN(e)||isNaN(n)?[NaN,NaN]:i.dataToPoint([e,n]))},!0)}})}}),define("echarts/scale/Scale",["require","../util/clazz"],function(require){function e(e){this._setting=e||{},this._extent=[1/0,-(1/0)],this._interval=0,this.init&&this.init.apply(this,arguments)}var t=require("../util/clazz"),i=e.prototype;return i.parse=function(e){return e},i.getSetting=function(e){return this._setting[e]},i.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},i.normalize=function(e){var t=this._extent;if(t[1]===t[0])return.5;else return(e-t[0])/(t[1]-t[0])},i.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},i.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},i.unionExtentFromData=function(e,t){this.unionExtent(e.getDataExtent(t,!0))},i.getExtent=function(){return this._extent.slice()},i.setExtent=function(e,t){var i=this._extent;if(!isNaN(e))i[0]=e;if(!isNaN(t))i[1]=t},i.getTicksLabels=function(){for(var e=[],t=this.getTicks(),i=0;i<t.length;i++)e.push(this.getLabel(t[i]));return e},i.isBlank=function(){return this._isBlank},i.setBlank=function(e){this._isBlank=e},t.enableClassExtend(e),t.enableClassManagement(e,{registerWhenExtend:!0}),e}),define("echarts/scale/Ordinal",["require","zrender/core/util","./Scale"],function(require){var e=require("zrender/core/util"),t=require("./Scale"),i=t.prototype,n=t.extend({type:"ordinal",init:function(e,t){this._data=e,this._extent=t||[0,e.length-1]},parse:function(t){return"string"==typeof t?e.indexOf(this._data,t):Math.round(t)},contain:function(e){return e=this.parse(e),i.contain.call(this,e)&&null!=this._data[e]},normalize:function(e){return i.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(i.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,i=t[0];i<=t[1];)e.push(i),i++;return e},getLabel:function(e){return this._data[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getDataExtent(t,!1))},niceTicks:e.noop,niceExtent:e.noop});return n.create=function(){return new n},n}),define("echarts/scale/helper",["require","../util/number"],function(require){function e(e,t,i){e[t]=Math.max(Math.min(e[t],i[1]),i[0])}var t=require("../util/number"),i=t.round,n={};return n.intervalScaleNiceTicks=function(e,r){var a={},o=e[1]-e[0],s=a.interval=t.nice(o/r,!0),l=a.intervalPrecision=t.getPrecisionSafe(s)+2,u=a.niceTickExtent=[i(Math.ceil(e[0]/s)*s,l),i(Math.floor(e[1]/s)*s,l)];return n.fixExtent(u,e),a},n.fixExtent=function(t,i){if(!isFinite(t[0])&&(t[0]=i[0]),!isFinite(t[1])&&(t[1]=i[1]),e(t,0,i),e(t,1,i),t[0]>t[1])t[0]=t[1]},n.intervalScaleGetTicks=function(e,t,n,r){var a=[];if(!e)return a;var o=1e4;if(t[0]<n[0])a.push(t[0]);for(var s=n[0];s<=n[1]&&(a.push(s),s=i(s+e,r),s!==a[a.length-1]);)if(a.length>o)return[];if(t[1]>(a.length?a[a.length-1]:n[1]))a.push(t[1]);return a},n}),define("echarts/scale/Interval",["require","../util/number","../util/format","./Scale","./helper"],function(require){var e=require("../util/number"),t=require("../util/format"),i=require("./Scale"),n=require("./helper"),r=e.round,a=i.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var i=this._extent;if(!isNaN(e))i[0]=parseFloat(e);if(!isNaN(t))i[1]=parseFloat(t)},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),a.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){if(!this._interval)this.niceTicks();return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice()},getTicks:function(){if(!this._interval)this.niceTicks();return n.intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getTicksLabels:function(){for(var e=[],t=this.getTicks(),i=0;i<t.length;i++)e.push(this.getLabel(t[i]));return e},getLabel:function(i,n){if(null==i)return"";var a=n&&n.precision;if(null==a)a=e.getPrecisionSafe(i)||0;else if("auto"===a)a=this._intervalPrecision;return i=r(i,a,!0),t.addCommas(i)},niceTicks:function(e){e=e||5;var t=this._extent,i=t[1]-t[0];if(isFinite(i)){if(0>i)i=-i,t.reverse();var r=n.intervalScaleNiceTicks(t,e);this._intervalPrecision=r.intervalPrecision,this._interval=r.interval,this._niceExtent=r.niceTickExtent}},niceExtent:function(e,t,i){var n=this._extent;if(n[0]===n[1])if(0!==n[0]){var a=n[0];if(!i)n[1]+=a/2,n[0]-=a/2;else n[0]-=a/2}else n[1]=1;var o=n[1]-n[0];if(!isFinite(o))n[0]=0,n[1]=1;this.niceTicks(e);var s=this._interval;if(!t)n[0]=r(Math.floor(n[0]/s)*s);if(!i)n[1]=r(Math.ceil(n[1]/s)*s)}});return a.create=function(){return new a},a}),define("echarts/scale/Time",["require","zrender/core/util","../util/number","../util/format","./helper","./Interval"],function(require){var e=require("zrender/core/util"),t=require("../util/number"),i=require("../util/format"),n=require("./helper"),r=require("./Interval"),a=r.prototype,o=Math.ceil,s=Math.floor,l=1e3,u=60*l,A=60*u,B=24*A,c=function(e,t,i,n){for(;n>i;){var r=i+n>>>1;if(e[r][2]<t)i=r+1;else n=r}return i},C=r.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return i.formatTime(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e,i,n){var r=this._extent;if(r[0]===r[1])r[0]-=B,r[1]+=B;if(r[1]===-(1/0)&&r[0]===1/0){var a=new Date;r[1]=new Date(a.getFullYear(),a.getMonth(),a.getDate()),r[0]=r[1]-B}this.niceTicks(e);var l=this._interval;if(!i)r[0]=t.round(s(r[0]/l)*l);if(!n)r[1]=t.round(o(r[1]/l)*l)},niceTicks:function(e){var i=this.getSetting("useUTC")?0:60*t.getTimezoneOffset()*1e3;e=e||10;var r=this._extent,a=r[1]-r[0],l=a/e,u=D.length,A=c(D,l,0,u),B=D[Math.min(A,u-1)],C=B[2];if("year"===B[0]){var d=a/C,f=t.nice(d/e,!0);C*=f}var h=[Math.round(o((r[0]-i)/C)*C+i),Math.round(s((r[1]-i)/C)*C+i)];n.fixExtent(h,r),this._stepLvl=B,this._interval=C,this._niceExtent=h},parse:function(e){return+t.parseDate(e)}});e.each(["contain","normalize"],function(e){C.prototype[e]=function(t){return a[e].call(this,this.parse(t))}});var D=[["hh:mm:ss",1,l],["hh:mm:ss",5,5*l],["hh:mm:ss",10,10*l],["hh:mm:ss",15,15*l],["hh:mm:ss",30,30*l],["hh:mm\nMM-dd",1,u],["hh:mm\nMM-dd",5,5*u],["hh:mm\nMM-dd",10,10*u],["hh:mm\nMM-dd",15,15*u],["hh:mm\nMM-dd",30,30*u],["hh:mm\nMM-dd",1,A],["hh:mm\nMM-dd",2,2*A],["hh:mm\nMM-dd",6,6*A],["hh:mm\nMM-dd",12,12*A],["MM-dd\nyyyy",1,B],["week",7,7*B],["month",1,31*B],["quarter",3,380*B/4],["half-year",6,380*B/2],["year",1,380*B]];return C.create=function(e){return new C({useUTC:e.ecModel.get("useUTC")})},C}),define("echarts/scale/Log",["require","zrender/core/util","./Scale","../util/number","./Interval"],function(require){function e(e,t){return l(e,s(t))}var t=require("zrender/core/util"),i=require("./Scale"),n=require("../util/number"),r=require("./Interval"),a=i.prototype,o=r.prototype,s=n.getPrecisionSafe,l=n.round,u=Math.floor,A=Math.ceil,B=Math.pow,c=Math.log,C=i.extend({type:"log",base:10,$constructor:function(){i.apply(this,arguments),this._originalScale=new r},getTicks:function(){var i=this._originalScale,r=this._extent,a=i.getExtent();return t.map(o.getTicks.call(this),function(t){var o=n.round(B(this.base,t));return o=t===r[0]&&i.__fixMin?e(o,a[0]):o,o=t===r[1]&&i.__fixMax?e(o,a[1]):o},this)},getLabel:o.getLabel,scale:function(e){return e=a.scale.call(this,e),B(this.base,e)},setExtent:function(e,t){var i=this.base;e=c(e)/c(i),t=c(t)/c(i),o.setExtent.call(this,e,t)},getExtent:function(){var t=this.base,i=a.getExtent.call(this);i[0]=B(t,i[0]),i[1]=B(t,i[1]);var n=this._originalScale,r=n.getExtent();return n.__fixMin&&(i[0]=e(i[0],r[0])),n.__fixMax&&(i[1]=e(i[1],r[1])),i},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=c(e[0])/c(t),e[1]=c(e[1])/c(t),a.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getDataExtent(t,!0,function(e){return e>0}))},niceTicks:function(e){e=e||10;var t=this._extent,i=t[1]-t[0];if(!(i===1/0||0>=i)){var r=n.quantity(i),a=e/i*r;if(.5>=a)r*=10;for(;!isNaN(r)&&Math.abs(r)<1&&Math.abs(r)>0;)r*=10;var o=[n.round(A(t[0]/r)*r),n.round(u(t[1]/r)*r)];this._interval=r,this._niceExtent=o}},niceExtent:function(e,t,i){o.niceExtent.call(this,e,t,i);var n=this._originalScale;n.__fixMin=t,n.__fixMax=i}});return t.each(["contain","normalize"],function(e){C.prototype[e]=function(t){return t=c(t)/c(this.base),a[e].call(this,t)}}),C.create=function(){return new C},C}),define("echarts/coord/axisHelper",["require","../scale/Ordinal","../scale/Interval","../scale/Time","../scale/Log","../scale/Scale","../util/number","zrender/core/util","zrender/contain/text"],function(require){var e=require("../scale/Ordinal"),t=require("../scale/Interval");require("../scale/Time"),require("../scale/Log");var i=require("../scale/Scale"),n=require("../util/number"),r=require("zrender/core/util"),a=require("zrender/contain/text"),o={};return o.getScaleExtent=function(e,t){var i,a,o,s=e.type,l=t.getMin(),u=t.getMax(),A=null!=l,B=null!=u,c=e.getExtent();if("ordinal"===s)i=(t.get("data")||[]).length;else{if(a=t.get("boundaryGap"),!r.isArray(a))a=[a||0,a||0];if("boolean"==typeof a[0]){if(__DEV__)console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.');a=[0,0]}a[0]=n.parsePercent(a[0],1),a[1]=n.parsePercent(a[1],1),o=c[1]-c[0]||Math.abs(c[0])}if(null==l)l="ordinal"===s?i?0:NaN:c[0]-a[0]*o;if(null==u)u="ordinal"===s?i?i-1:NaN:c[1]+a[1]*o;if("dataMin"===l)l=c[0];if("dataMax"===u)u=c[1];if((null==l||!isFinite(l))&&(l=NaN),(null==u||!isFinite(u))&&(u=NaN),e.setBlank(r.eqNaN(l)||r.eqNaN(u)),t.getNeedCrossZero()){if(l>0&&u>0&&!A)l=0;if(0>l&&0>u&&!B)u=0}return[l,u]},o.niceScaleExtent=function(e,t){var i=o.getScaleExtent(e,t),n=null!=t.getMin(),r=null!=t.getMax(),a=t.get("splitNumber");if("log"===e.type)e.base=t.get("logBase");e.setExtent(i[0],i[1]),e.niceExtent(a,n,r);var s=t.get("minInterval");if(isFinite(s)&&!n&&!r&&"interval"===e.type){var l=e.getInterval(),u=Math.max(Math.abs(l),s)/l;i=e.getExtent();var A=(i[1]+i[0])/2;e.setExtent(u*(i[0]-A)+A,u*(i[1]-A)+A),e.niceExtent(a)}var l=t.get("interval");if(null!=l)e.setInterval&&e.setInterval(l)},o.createScaleByModel=function(n,r){if(r=r||n.get("type"))switch(r){case"category":return new e(n.getCategories(),[1/0,-(1/0)]);case"value":return new t;default:return(i.getClass(r)||t).create(n)}},o.ifAxisCrossZero=function(e){var t=e.scale.getExtent(),i=t[0],n=t[1];return!(i>0&&n>0||0>i&&0>n)},o.getAxisLabelInterval=function(e,t,i,n){var r,o=0,s=0,l=1;if(t.length>40)l=Math.floor(t.length/40);for(var u=0;u<e.length;u+=l){var A=e[u],B=a.getBoundingRect(t[u],i,"center","top");if(B[n?"x":"y"]+=A,B[n?"width":"height"]*=1.3,!r)r=B.clone();else if(r.intersect(B))s++,o=Math.max(o,s);else r.union(B),s=0}if(0===o&&l>1)return l;else return(o+1)*l-1},o.getFormattedLabels=function(e,t){var i=e.scale,n=i.getTicksLabels(),a=i.getTicks();if("string"==typeof t)return t=function(e){return function(t){return e.replace("{value}",null!=t?t:"")}}(t),r.map(n,t);else if("function"==typeof t)return r.map(a,function(i,n){return t(o.getAxisRawValue(e,i),n)},this);else return n},o.getAxisRawValue=function(e,t){return"category"===e.type?e.scale.getLabel(t):t},o}),define("echarts/coord/cartesian/Cartesian",["require","zrender/core/util"],function(require){"use strict";function e(e){return this._axes[e]}var t=require("zrender/core/util"),i=function(e){this._axes={},this._dimList=[],this.name=e||""};return i.prototype={constructor:i,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return t.map(this._dimList,e,this)},getAxesByScale:function(e){return e=e.toLowerCase(),t.filter(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var i=this._dimList,n=e instanceof Array?[]:{},r=0;r<i.length;r++){var a=i[r],o=this._axes[a];n[a]=o[t](e[a])}return n}},i}),define("echarts/coord/cartesian/Cartesian2D",["require","zrender/core/util","./Cartesian"],function(require){"use strict";function e(e){i.call(this,e)}var t=require("zrender/core/util"),i=require("./Cartesian");return e.prototype={constructor:e,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),i=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&i.contain(i.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoints:function(e,t){return e.mapArray(["x","y"],function(e,t){return this.dataToPoint([e,t])},t,this)},dataToPoint:function(e,t){var i=this.getAxis("x"),n=this.getAxis("y");
return[i.toGlobalCoord(i.dataToCoord(e[0],t)),n.toGlobalCoord(n.dataToCoord(e[1],t))]},pointToData:function(e,t){var i=this.getAxis("x"),n=this.getAxis("y");return[i.coordToData(i.toLocalCoord(e[0]),t),n.coordToData(n.toLocalCoord(e[1]),t)]},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")}},t.inherits(e,i),e}),define("echarts/coord/Axis",["require","../util/number","zrender/core/util"],function(require){function e(e,t){var i=e[1]-e[0],n=t,r=i/n/2;e[0]+=r,e[1]-=r}var t=require("../util/number"),i=t.linearMap,n=require("zrender/core/util"),r=[0,1],a=function(e,t,i){this.dim=e,this.scale=t,this._extent=i||[0,0],this.inverse=!1,this.onBand=!1};return a.prototype={constructor:a,contain:function(e){var t=this._extent,i=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=i&&n>=e},containData:function(e){return this.contain(this.dataToCoord(e))},getExtent:function(){var e=this._extent.slice();return e},getPixelPrecision:function(e){return t.getPixelPrecision(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var i=this._extent;i[0]=e,i[1]=t},dataToCoord:function(t,n){var a=this._extent,o=this.scale;if(t=o.normalize(t),this.onBand&&"ordinal"===o.type)a=a.slice(),e(a,o.count());return i(t,r,a,n)},coordToData:function(t,n){var a=this._extent,o=this.scale;if(this.onBand&&"ordinal"===o.type)a=a.slice(),e(a,o.count());var s=i(t,a,r,n);return this.scale.scale(s)},pointToData:function(e,t){},getTicksCoords:function(e){if(this.onBand&&!e){for(var t=this.getBands(),i=[],r=0;r<t.length;r++)i.push(t[r][0]);if(t[r-1])i.push(t[r-1][1]);return i}else return n.map(this.scale.getTicks(),this.dataToCoord,this)},getLabelsCoords:function(){return n.map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){for(var e=this.getExtent(),t=[],i=this.scale.count(),n=e[0],r=e[1],a=r-n,o=0;i>o;o++)t.push([a*o/i+n,a*(o+1)/i+n]);return t},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),i=t[1]-t[0]+(this.onBand?1:0);0===i&&(i=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/i}},a}),define("echarts/coord/cartesian/axisLabelInterval",["require","zrender/core/util","../axisHelper"],function(require){"use strict";var e=require("zrender/core/util"),t=require("../axisHelper");return function(i){var n=i.model,r=n.getModel("axisLabel"),a=r.get("interval");if("category"!==i.type||"auto"!==a)return"auto"===a?0:a;else return t.getAxisLabelInterval(e.map(i.scale.getTicks(),i.dataToCoord,i),n.getFormattedLabels(),r.getModel("textStyle").getFont(),i.isHorizontal())}}),define("echarts/coord/cartesian/Axis2D",["require","zrender/core/util","../Axis","./axisLabelInterval"],function(require){var e=require("zrender/core/util"),t=require("../Axis"),i=require("./axisLabelInterval"),n=function(e,i,n,r,a){t.call(this,e,i,n),this.type=r||"value",this.position=a||"bottom"};return n.prototype={constructor:n,index:0,onZero:!1,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},getLabelInterval:function(){var e=this._labelInterval;if(!e)e=this._labelInterval=i(this);return e},isLabelIgnored:function(e){if("category"===this.type){var t=this.getLabelInterval();return"function"==typeof t&&!t(e,this.scale.getLabel(e))||e%(t+1)}},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},e.inherits(n,t),n}),define("echarts/coord/axisDefault",["require","zrender/core/util"],function(require){var e=require("zrender/core/util"),t={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,lineStyle:{color:"#333",width:1,type:"solid"}},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},i=e.merge({boundaryGap:!0,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},t),n=e.merge({boundaryGap:[0,0],splitNumber:5},t),r=e.defaults({scale:!0,min:"dataMin",max:"dataMax"},n),a=e.defaults({logBase:10},n);return a.scale=!0,{categoryAxis:i,valueAxis:n,timeAxis:r,logAxis:a}}),define("echarts/coord/axisModelCreator",["require","./axisDefault","zrender/core/util","../model/Component","../util/layout"],function(require){var e=require("./axisDefault"),t=require("zrender/core/util"),i=require("../model/Component"),n=require("../util/layout"),r=["value","category","time","log"];return function(a,o,s,l){t.each(r,function(i){o.extend({type:a+"Axis."+i,mergeDefaultAndTheme:function(e,r){var o=this.layoutMode,l=o?n.getLayoutParams(e):{},u=r.getTheme();if(t.merge(e,u.get(i+"Axis")),t.merge(e,this.getDefaultOption()),e.type=s(a,e),o)n.mergeLayoutParam(e,l,o)},defaultOption:t.mergeAll([{},e[i+"Axis"],l],!0)})}),i.registerSubTypeDefaulter(a+"Axis",t.curry(s,a))}}),define("echarts/coord/axisModelCommonMixin",["require","zrender/core/util","./axisHelper"],function(require){function e(e){if(t.isObject(e)&&null!=e.value)return e.value;else return e}var t=require("zrender/core/util"),i=require("./axisHelper");return{getFormattedLabels:function(){return i.getFormattedLabels(this.axis,this.get("axisLabel.formatter"))},getCategories:function(){return"category"===this.get("type")&&t.map(this.get("data"),e)},getMin:function(e){var i=this.option,n=!e&&null!=i.rangeStart?i.rangeStart:i.min;if(this.axis&&null!=n&&"dataMin"!==n&&!t.eqNaN(n))n=this.axis.scale.parse(n);return n},getMax:function(e){var i=this.option,n=!e&&null!=i.rangeEnd?i.rangeEnd:i.max;if(this.axis&&null!=n&&"dataMax"!==n&&!t.eqNaN(n))n=this.axis.scale.parse(n);return n},getNeedCrossZero:function(){var e=this.option;return null!=e.rangeStart||null!=e.rangeEnd?!1:!e.scale},getCoordSysModel:t.noop,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}}}),define("echarts/coord/cartesian/AxisModel",["require","../../model/Component","zrender/core/util","../axisModelCreator","../axisModelCommonMixin"],function(require){"use strict";function e(e,t){return t.type||(t.data?"category":"value")}var t=require("../../model/Component"),i=require("zrender/core/util"),n=require("../axisModelCreator"),r=t.extend({type:"cartesian2dAxis",axis:null,init:function(){r.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){r.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){r.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});i.merge(r.prototype,require("../axisModelCommonMixin"));var a={offset:0};return n("x",r,e,a),n("y",r,e,a),r}),define("echarts/coord/cartesian/GridModel",["require","./AxisModel","../../model/Component"],function(require){"use strict";require("./AxisModel");var e=require("../../model/Component");return e.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}})}),define("echarts/coord/cartesian/Grid",["require","exports","../../util/layout","../../coord/axisHelper","zrender/core/util","./Cartesian2D","./Axis2D","./GridModel","../../CoordinateSystem"],function(require,e){function t(e,t,i){return e.getCoordSysModel()===t}function i(e){var t,i=e.model,n=i.getFormattedLabels(),r=i.getModel("axisLabel.textStyle"),a=1,o=n.length;if(o>40)a=Math.ceil(o/40);for(var s=0;o>s;s+=a)if(!e.isLabelIgnored(s)){var l=r.getTextRect(n[s]);t?t.union(l):t=l}return t}function n(e,t,i){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,i),this.model=e}function r(e,t){var i=e.getExtent(),n=i[0]+i[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return n-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return n-e+t}}function a(e,t){return u.map(f,function(t){var i=e.getReferringComponents(t)[0];if(__DEV__)if(!i)throw new Error(t+' "'+u.retrieve(e.get(t+"Index"),e.get(t+"Id"),0)+'" not found');return i})}function o(e){return"cartesian2d"===e.get("coordinateSystem")}var s=require("../../util/layout"),l=require("../../coord/axisHelper"),u=require("zrender/core/util"),A=require("./Cartesian2D"),B=require("./Axis2D"),c=u.each,C=l.ifAxisCrossZero,D=l.niceScaleExtent;require("./GridModel");var d=n.prototype;d.type="grid",d.axisPointerEnabled=!0,d.getRect=function(){return this._rect},d.update=function(e,t){function i(e){var t=n[e];for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(r&&("category"===r.type||!C(r)))return!0}return!1}var n=this._axesMap;this._updateScale(e,this.model),c(n.x,function(e){D(e.scale,e.model)}),c(n.y,function(e){D(e.scale,e.model)}),c(n.x,function(e){if(i("y"))e.onZero=!1}),c(n.y,function(e){if(i("x"))e.onZero=!1}),this.resize(this.model,t)},d.resize=function(e,t){function n(){c(o,function(e){var t=e.isHorizontal(),i=t?[0,a.width]:[0,a.height],n=e.inverse?1:0;e.setExtent(i[n],i[1-n]),r(e,t?a.x:a.y)})}var a=s.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=a;var o=this._axesList;if(n(),e.get("containLabel"))c(o,function(e){if(!e.model.get("axisLabel.inside")){var t=i(e);if(t){var n=e.isHorizontal()?"height":"width",r=e.model.get("axisLabel.margin");if(a[n]-=t[n]+r,"top"===e.position)a.y+=t.height+r;else if("left"===e.position)a.x+=t.width+r}}}),n()},d.getAxis=function(e,t){var i=this._axesMap[e];if(null!=i){if(null==t)for(var n in i)if(i.hasOwnProperty(n))return i[n];return i[t]}},d.getAxes=function(){return this._axesList.slice()},d.getCartesian=function(e,t){if(null!=e&&null!=t){var i="x"+e+"y"+t;return this._coordsMap[i]}if(u.isObject(e))t=e.yAxisIndex,e=e.xAxisIndex;for(var n=0,r=this._coordsList;n<r.length;n++)if(r[n].getAxis("x").index===e||r[n].getAxis("y").index===t)return r[n]},d.getCartesians=function(){return this._coordsList.slice()},d.convertToPixel=function(e,t,i){var n=this._findConvertTarget(e,t);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},d.convertFromPixel=function(e,t,i){var n=this._findConvertTarget(e,t);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},d._findConvertTarget=function(e,t){var i,n,r=t.seriesModel,a=t.xAxisModel||r&&r.getReferringComponents("xAxis")[0],o=t.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=t.gridModel,l=this._coordsList;if(r)i=r.coordinateSystem,u.indexOf(l,i)<0&&(i=null);else if(a&&o)i=this.getCartesian(a.componentIndex,o.componentIndex);else if(a)n=this.getAxis("x",a.componentIndex);else if(o)n=this.getAxis("y",o.componentIndex);else if(s){var A=s.coordinateSystem;if(A===this)i=this._coordsList[0]}return{cartesian:i,axis:n}},d.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e);else return void 0},d._initCartesian=function(e,i,n){function r(n){return function(r,u){if(t(r,e,i)){var A=r.get("position");if("x"===n){if("top"!==A&&"bottom"!==A)if(A="bottom",a[A])A="top"===A?"bottom":"top"}else if("left"!==A&&"right"!==A)if(A="left",a[A])A="left"===A?"right":"left";a[A]=!0;var c=new B(n,l.createScaleByModel(r),[0,0],r.get("type"),A),C="category"===c.type;c.onBand=C&&r.get("boundaryGap"),c.inverse=r.get("inverse"),c.onZero=r.get("axisLine.onZero"),r.axis=c,c.model=r,c.grid=this,c.index=u,this._axesList.push(c),o[n][u]=c,s[n]++}}}var a={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},s={x:0,y:0};if(i.eachComponent("xAxis",r("x"),this),i.eachComponent("yAxis",r("y"),this),!s.x||!s.y)return this._axesMap={},void(this._axesList=[]);else return this._axesMap=o,void c(o.x,function(t,i){c(o.y,function(n,r){var a="x"+i+"y"+r,o=new A(a);o.grid=this,o.model=e,this._coordsMap[a]=o,this._coordsList.push(o),o.addAxis(t),o.addAxis(n)},this)},this)},d._updateScale=function(e,i){function n(e,t,i){c(i.coordDimToDataDim(t.dim),function(i){t.scale.unionExtentFromData(e,i)})}u.each(this._axesList,function(e){e.scale.setExtent(1/0,-(1/0))}),e.eachSeries(function(r){if(o(r)){var s=a(r,e),l=s[0],u=s[1];if(!t(l,i,e)||!t(u,i,e))return;var A=this.getCartesian(l.componentIndex,u.componentIndex),B=r.getData(),c=A.getAxis("x"),C=A.getAxis("y");if("list"===B.type)n(B,c,r),n(B,C,r)}},this)},d.getTooltipAxes=function(e){var t=[],i=[];return c(this.getCartesians(),function(n){var r=null!=e&&"auto"!==e?n.getAxis(e):n.getBaseAxis(),a=n.getOtherAxis(r);u.indexOf(t,r)<0&&t.push(r),u.indexOf(i,a)<0&&i.push(a)}),{baseAxes:t,otherAxes:i}};var f=["xAxis","yAxis"];return n.create=function(e,t){var i=[];return e.eachComponent("grid",function(r,a){var o=new n(r,e,t);o.name="grid_"+a,o.resize(r,t),r.coordinateSystem=o,i.push(o)}),e.eachSeries(function(t){if(o(t)){var i=a(t,e),n=i[0],r=i[1],s=n.getCoordSysModel();if(__DEV__){if(!s)throw new Error('Grid "'+u.retrieve(n.get("gridIndex"),n.get("gridId"),0)+'" not found');if(n.getCoordSysModel()!==r.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var l=s.coordinateSystem;t.coordinateSystem=l.getCartesian(n.componentIndex,r.componentIndex)}}),i},n.dimensions=n.prototype.dimensions=A.prototype.dimensions,require("../../CoordinateSystem").register("cartesian2d",n),n}),define("echarts/component/axis/AxisBuilder",["require","zrender/core/util","../../util/format","../../util/graphic","../../model/Model","../../util/number","zrender/core/vector","zrender/core/matrix"],function(require){function e(e){var t={componentType:e.mainType};return t[e.mainType+"Index"]=e.componentIndex,t}function t(e,t,i,n){var r,a,o=A(i-e.rotation),s=n[0]>n[1],l="start"===t&&!s||"start"!==t&&s;if(B(o-f/2))a=l?"bottom":"top",r="center";else if(B(o-1.5*f))a=l?"top":"bottom",r="center";else if(a="middle",1.5*f>o&&o>f/2)r=l?"left":"right";else r=l?"right":"left";return{rotation:o,textAlign:r,textVerticalAlign:a}}function i(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)}function n(e,t){var i=e.get("axisLabel.showMinLabel"),n=e.get("axisLabel.showMaxLabel"),a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2];if(i===!1)a.ignore=!0;else if(null!=e.getMin()&&r(a,o))i?o.ignore=!0:a.ignore=!0;if(n===!1)s.ignore=!0;else if(null!=e.getMax()&&r(l,s))n?l.ignore=!0:s.ignore=!0}function r(e,t,i){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(n&&r){var a=C.identity([]);return C.rotate(a,a,-e.rotation),n.applyTransform(C.mul([],a,e.getLocalTransform())),r.applyTransform(C.mul([],a,t.getLocalTransform())),n.intersect(r)}}var a=require("zrender/core/util"),o=require("../../util/format"),s=require("../../util/graphic"),l=require("../../model/Model"),u=require("../../util/number"),A=u.remRadian,B=u.isRadianAroundZero,c=require("zrender/core/vector"),C=require("zrender/core/matrix"),D=c.applyTransform,d=a.retrieve,f=Math.PI,h=function(e,t){this.opt=t,this.axisModel=e,a.defaults(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new s.Group;var i=new s.Group({position:t.position.slice(),rotation:t.rotation});i.updateTransform(),this._transform=i.transform,this._dumbGroup=i};h.prototype={constructor:h,hasBuilder:function(e){return!!E[e]},add:function(e){E[e].call(this)},getGroup:function(){return this.group}};var E={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var i=this.axisModel.axis.getExtent(),n=this._transform,r=[i[0],0],o=[i[1],0];if(n)D(r,r,n),D(o,o,n);this.group.add(new s.Line(s.subPixelOptimizeLine({anid:"line",shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},style:a.extend({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle()),strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1})))}},axisTick:function(){var e=this.axisModel,t=e.axis;if(e.get("axisTick.show")&&!t.scale.isBlank())for(var i=e.getModel("axisTick"),n=this.opt,r=i.getModel("lineStyle"),o=i.get("length"),l=m(i,n.labelInterval),u=t.getTicksCoords(i.get("alignWithLabel")),A=t.scale.getTicks(),B=[],c=[],C=this._transform,d=0;d<u.length;d++)if(!F(t,d,l)){var f=u[d];if(B[0]=f,B[1]=0,c[0]=f,c[1]=n.tickDirection*o,C)D(B,B,C),D(c,c,C);this.group.add(new s.Line(s.subPixelOptimizeLine({anid:"tick_"+A[d],shape:{x1:B[0],y1:B[1],x2:c[0],y2:c[1]},style:a.defaults(r.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:!0})))}else;},axisLabel:function(){var t=this.opt,r=this.axisModel,o=r.axis,u=d(t.axisLabelShow,r.get("axisLabel.show"));if(u&&!o.scale.isBlank()){var A=r.getModel("axisLabel"),B=A.getModel("textStyle"),c=A.get("margin"),C=o.scale.getTicks(),D=r.getFormattedLabels(),h=(d(t.labelRotate,A.get("rotate"))||0)*f/180,E=p(t.rotation,h,t.labelDirection),m=r.get("data"),g=[],H=i(r),G=r.get("triggerEvent");a.each(C,function(i,n){if(!F(o,n,t.labelInterval)){var a=B;if(m&&m[i]&&m[i].textStyle)a=new l(m[i].textStyle,B,r.ecModel);var u=a.getTextColor()||r.get("axisLine.lineStyle.color"),A=o.dataToCoord(i),C=[A,t.labelOffset+t.labelDirection*c],d=o.scale.getLabel(i),f=new s.Text({anid:"label_"+i,style:{text:D[n],textAlign:a.get("align",!0)||E.textAlign,textVerticalAlign:a.get("baseline",!0)||E.textVerticalAlign,textFont:a.getFont(),fill:"function"==typeof u?u("category"===o.type?d:"value"===o.type?i+"":i,n):u},position:C,rotation:E.rotation,silent:H,z2:10});if(G)f.eventData=e(r),f.eventData.targetType="axisLabel",f.eventData.value=d;this._dumbGroup.add(f),f.updateTransform(),g.push(f),this.group.add(f),f.decomposeTransform()}},this),n(r,g)}},axisName:function(){var n=this.opt,r=this.axisModel,l=d(n.axisName,r.get("name"));if(l){var u,A=r.get("nameLocation"),B=n.nameDirection,c=r.getModel("nameTextStyle"),C=r.get("nameGap")||0,D=this.axisModel.axis.getExtent(),h=D[0]>D[1]?-1:1,E=["start"===A?D[0]-h*C:"end"===A?D[1]+h*C:(D[0]+D[1])/2,"middle"===A?n.labelOffset+B*C:0],F=r.get("nameRotate");if(null!=F)F=F*f/180;var m;if("middle"===A)u=p(n.rotation,null!=F?F:n.rotation,B);else if(u=t(n,A,F||0,D),m=n.axisNameAvailableWidth,null!=m)m=Math.abs(m/Math.sin(u.rotation)),!isFinite(m)&&(m=null);var g=c.getFont(),H=r.get("nameTruncate",!0)||{},G=H.ellipsis,I=d(n.nameTruncateMaxWidth,H.maxWidth,m),v=null!=G&&null!=I?o.truncateText(l,I,g,G,{minChar:2,placeholder:H.placeholder}):l,y=r.get("tooltip",!0),J=r.mainType,L={componentType:J,name:l,$vars:["name"]};L[J+"Index"]=r.componentIndex;var M=new s.Text({anid:"name",__fullText:l,__truncatedText:v,style:{text:v,textFont:g,fill:c.getTextColor()||r.get("axisLine.lineStyle.color"),textAlign:u.textAlign,textVerticalAlign:u.textVerticalAlign},position:E,rotation:u.rotation,silent:i(r),z2:1,tooltip:y&&y.show?a.extend({content:l,formatter:function(){return l},formatterParams:L},y):null});if(r.get("triggerEvent"))M.eventData=e(r),M.eventData.targetType="axisName",M.eventData.name=l;this._dumbGroup.add(M),M.updateTransform(),this.group.add(M),M.decomposeTransform()}}},p=h.innerTextLayout=function(e,t,i){var n,r,a=A(t-e);if(B(a))r=i>0?"top":"bottom",n="center";else if(B(a-f))r=i>0?"bottom":"top",n="center";else if(r="middle",a>0&&f>a)n=i>0?"right":"left";else n=i>0?"left":"right";return{rotation:a,textAlign:n,textVerticalAlign:r}},F=h.ifIgnoreOnTick=function(e,t,i){var n,r=e.scale;return"ordinal"===r.type&&("function"==typeof i?(n=r.getTicks()[t],!i(n,r.getLabel(n))):t%(i+1))},m=h.getInterval=function(e,t){var i=e.get("interval");if(null==i||"auto"==i)i=t;return i};return h}),define("echarts/component/axisPointer/modelHelper",["require","zrender/core/util","../../model/Model"],function(require){function e(e,i,r){var o=i.getComponent("tooltip"),s=i.getComponent("axisPointer"),A=s.get("link",!0)||[],c=[];l(r.getCoordinateSystems(),function(r){function C(o,l,u){var C=u.model.getModel("axisPointer",s),D=C.get("show");if(D&&("auto"!==D||o||a(C))){if(null==l)l=C.get("triggerTooltip");C=o?t(u,h,s,i,o,l):C;var f=C.get("snap"),E=B(u.model),p=l||f||"category"===u.type,F=e.axesInfo[E]={key:E,axis:u,coordSys:r,axisPointerModel:C,triggerTooltip:l,involveSeries:p,snap:f,useHandle:a(C),seriesModels:[]};d[E]=F,e.seriesInvolved|=p;var m=n(A,u);if(null!=m){var g=c[m]||(c[m]={axesInfo:{}});g.axesInfo[E]=F,g.mapper=A[m].mapper,F.linkGroup=g}}}if(r.axisPointerEnabled){var D=B(r.model),d=e.coordSysAxesInfo[D]={};e.coordSysMap[D]=r;var f=r.model,h=f.getModel("tooltip",o);if(l(r.getAxes(),u(C,!1,null)),r.getTooltipAxes&&o&&h.get("show")){var E="axis"===h.get("trigger"),p="cross"===h.get("axisPointer.type"),F=r.getTooltipAxes(h.get("axisPointer.axis"));if(E||p)l(F.baseAxes,u(C,p?"cross":!0,E));if(p)l(F.otherAxes,u(C,"cross",!1))}}})}function t(e,t,i,n,r,a){var u=t.getModel("axisPointer"),A={};if(l(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){A[e]=o.clone(u.get(e))}),A.snap="category"!==e.type&&!!a,"cross"===u.get("type"))A.type="line";var B=A.label||(A.label={});if(null==B.show&&(B.show=!1),"cross"===r)if(B.show=!0,!a){var c=A.lineStyle=u.get("crossStyle");c&&o.defaults(B.textStyle||(B.textStyle={}),c.textStyle)}return e.model.getModel("axisPointer",new s(A,i,n))}function i(e,t){t.eachSeries(function(t){var i=t.coordinateSystem,n=t.get("tooltip.trigger",!0);if(i&&"none"!==n&&n!==!1&&"item"!==n&&t.get("axisPointer.show",!0)!==!1)l(e.coordSysAxesInfo[B(i.model)],function(e){var n=e.axis;if(i.getAxis(n.dim)===n)e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count()})},this)}function n(e,t){for(var i=t.model,n=t.dim,a=0;a<e.length;a++){var o=e[a]||{};if(r(o[n+"AxisId"],i.id)||r(o[n+"AxisIndex"],i.componentIndex)||r(o[n+"AxisName"],i.name))return a}}function r(e,t){return"all"===e||o.isArray(e)&&o.indexOf(e,t)>=0||e===t}function a(e){return!!e.get("handle.show")}var o=require("zrender/core/util"),s=require("../../model/Model"),l=o.each,u=o.curry,A={};A.collect=function(t,n){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return e(r,t,n),r.seriesInvolved&&i(r,t),r},A.fixValue=function(e){var t=A.getAxisInfo(e);if(t){var i=t.axisPointerModel,n=t.axis.scale,r=i.option,o=i.get("status"),s=i.get("value");if(null!=s)s=n.parse(s);var l=a(i);if(null==o)r.status=l?"show":"hide";var u=n.getExtent().slice();if(u[0]>u[1]&&u.reverse(),null==s||s>u[1])s=u[1];if(s<u[0])s=u[0];if(r.value=s,l)r.status=t.axis.scale.isBlank()?"hide":"show"}},A.getAxisInfo=function(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[B(e)]},A.getAxisPointerModel=function(e){var t=A.getAxisInfo(e);return t&&t.axisPointerModel};var B=A.makeKey=function(e){return e.type+"||"+e.id};return A}),define("echarts/component/axis/AxisView",["require","../axisPointer/modelHelper","../../echarts"],function(require){function e(e,r,a,o,s,l){var u=n.getAxisPointerClass(e.axisPointerClass);if(u){var A=i.getAxisPointerModel(r);A?(e._axisPointer||(e._axisPointer=new u)).render(r,A,o,l):t(e,o)}}function t(e,t,i){var n=e._axisPointer;n&&n.dispose(t,i),e._axisPointer=null}var i=require("../axisPointer/modelHelper"),n=require("../../echarts").extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,r,a,o){this.axisPointerClass&&i.fixValue(t),n.superApply(this,"render",arguments),e(this,t,r,a,o,!0)},updateAxisPointer:function(t,i,n,r,a){e(this,t,i,n,r,!1)},remove:function(e,t){var i=this._axisPointer;i&&i.remove(t),n.superApply(this,"remove",arguments)},dispose:function(e,i){t(this,i),n.superApply(this,"dispose",arguments)}}),r=[];return n.registerAxisPointerClass=function(e,t){if(__DEV__)if(r[e])throw new Error("axisPointer "+e+" exists");r[e]=t},n.getAxisPointerClass=function(e){return e&&r[e]},n}),define("echarts/component/axis/cartesianAxisHelper",["require","zrender/core/util"],function(require){var e=require("zrender/core/util"),t={};return t.layout=function(t,i,n){function r(e,t){var i=a.getAxis(e);return i.toGlobalCoord(i.dataToCoord(0))}n=n||{};var a=t.coordinateSystem,o=i.axis,s={},l=o.position,u=o.onZero?"onZero":l,A=o.dim,B=a.getRect(),c=[B.x,B.x+B.width,B.y,B.y+B.height],C=i.get("offset")||0,D={x:{top:c[2]-C,bottom:c[3]+C},y:{left:c[0]-C,right:c[1]+C}};D.x.onZero=Math.max(Math.min(r("y"),D.x.bottom),D.x.top),D.y.onZero=Math.max(Math.min(r("x"),D.y.right),D.y.left),s.position=["y"===A?D.y[u]:c[0],"x"===A?D.x[u]:c[3]],s.rotation=Math.PI/2*("x"===A?0:1);var d={top:-1,bottom:1,left:-1,right:1};if(s.labelDirection=s.tickDirection=s.nameDirection=d[l],s.labelOffset=o.onZero?D[A][l]-D[A].onZero:0,i.get("axisTick.inside"))s.tickDirection=-s.tickDirection;if(e.retrieve(n.labelInside,i.get("axisLabel.inside")))s.labelDirection=-s.labelDirection;var f=i.get("axisLabel.rotate");return s.labelRotate="top"===u?-f:f,s.labelInterval=o.getLabelInterval(),s.z2=1,s},t}),define("echarts/component/axis/CartesianAxisView",["require","zrender/core/util","../../util/graphic","./AxisBuilder","./AxisView","./cartesianAxisHelper"],function(require){var e=require("zrender/core/util"),t=require("../../util/graphic"),i=require("./AxisBuilder"),n=require("./AxisView"),r=require("./cartesianAxisHelper"),a=i.ifIgnoreOnTick,o=i.getInterval,s=["axisLine","axisLabel","axisTick","axisName"],l=["splitArea","splitLine"],u=n.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(n,a,o,A){this.group.removeAll();var B=this._axisGroup;if(this._axisGroup=new t.Group,this.group.add(this._axisGroup),n.get("show")){var c=n.getCoordSysModel(),C=r.layout(c,n),D=new i(n,C);e.each(s,D.add,D),this._axisGroup.add(D.getGroup()),e.each(l,function(e){if(n.get(e+".show"))this["_"+e](n,c,C.labelInterval)},this),t.groupTransition(B,this._axisGroup,n),u.superCall(this,"render",n,a,o,A)}},_splitLine:function(i,n,r){var s=i.axis;if(!s.scale.isBlank()){var l=i.getModel("splitLine"),u=l.getModel("lineStyle"),A=u.get("color"),B=o(l,r);A=e.isArray(A)?A:[A];for(var c=n.coordinateSystem.getRect(),C=s.isHorizontal(),D=0,d=s.getTicksCoords(),f=s.scale.getTicks(),h=[],E=[],p=u.getLineStyle(),F=0;F<d.length;F++)if(!a(s,F,B)){var m=s.toGlobalCoord(d[F]);if(C)h[0]=m,h[1]=c.y,E[0]=m,E[1]=c.y+c.height;else h[0]=c.x,h[1]=m,E[0]=c.x+c.width,E[1]=m;var g=D++%A.length;this._axisGroup.add(new t.Line(t.subPixelOptimizeLine({anid:"line_"+f[F],shape:{x1:h[0],y1:h[1],x2:E[0],y2:E[1]},style:e.defaults({stroke:A[g]},p),silent:!0})))}else;}},_splitArea:function(i,n,r){var s=i.axis;if(!s.scale.isBlank()){var l=i.getModel("splitArea"),u=l.getModel("areaStyle"),A=u.get("color"),B=n.coordinateSystem.getRect(),c=s.getTicksCoords(),C=s.scale.getTicks(),D=s.toGlobalCoord(c[0]),d=s.toGlobalCoord(c[0]),f=0,h=o(l,r),E=u.getAreaStyle();A=e.isArray(A)?A:[A];for(var p=1;p<c.length;p++)if(!a(s,p,h)){var F,m,g,H,G=s.toGlobalCoord(c[p]);if(s.isHorizontal())F=D,m=B.y,g=G-F,H=B.height;else F=B.x,m=d,g=B.width,H=G-m;var I=f++%A.length;this._axisGroup.add(new t.Rect({anid:"area_"+C[p],shape:{x:F,y:m,width:g,height:H},style:e.defaults({fill:A[I]},E),silent:!0})),D=F+g,d=m+H}else;}}});u.extend({type:"xAxis"}),u.extend({type:"yAxis"})}),define("echarts/component/axis",["require","../coord/cartesian/AxisModel","./axis/CartesianAxisView"],function(require){"use strict";require("../coord/cartesian/AxisModel"),require("./axis/CartesianAxisView")}),define("echarts/component/gridSimple",["require","../util/graphic","zrender/core/util","../echarts","../coord/cartesian/Grid","./axis"],function(require){"use strict";var e=require("../util/graphic"),t=require("zrender/core/util"),i=require("../echarts");require("../coord/cartesian/Grid"),require("./axis"),i.extendComponentView({type:"grid",render:function(i,n){if(this.group.removeAll(),i.get("show"))this.group.add(new e.Rect({shape:i.coordinateSystem.getRect(),style:t.defaults({fill:i.get("backgroundColor")},i.getItemStyle()),silent:!0,z2:-1}))}}),i.registerPreprocessor(function(e){if(e.xAxis&&e.yAxis&&!e.grid)e.grid={}})}),define("echarts/chart/scatter",["require","zrender/core/util","../echarts","./scatter/ScatterSeries","./scatter/ScatterView","../visual/symbol","../layout/points","../component/gridSimple"],function(require){var e=require("zrender/core/util"),t=require("../echarts");require("./scatter/ScatterSeries"),require("./scatter/ScatterView"),t.registerVisual(e.curry(require("../visual/symbol"),"scatter","circle",null)),t.registerLayout(e.curry(require("../layout/points"),"scatter")),require("../component/gridSimple")}),define("echarts/component/legend/LegendModel",["require","zrender/core/util","../../model/Model","../../echarts"],function(require){"use strict";var e=require("zrender/core/util"),t=require("../../model/Model"),i=require("../../echarts").extendComponentModel({type:"legend",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,i){this.mergeDefaultAndTheme(e,i),e.selected=e.selected||{}},mergeOption:function(e){i.superCall(this,"mergeOption",e)},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,i=0;i<e.length;i++){var n=e[i].get("name");if(this.isSelected(n)){this.select(n),t=!0;break}}!t&&this.select(e[0].get("name"))}},_updateData:function(i){var n=e.map(this.get("data")||[],function(e){if("string"==typeof e||"number"==typeof e)e={name:e};return new t(e,this,this.ecModel)},this);this._data=n;var r=e.map(i.getSeries(),function(e){return e.name});i.eachSeries(function(e){if(e.legendDataProvider){var t=e.legendDataProvider();r=r.concat(t.mapArray(t.getName))}}),this._availableNames=r},getData:function(){return this._data},select:function(t){var i=this.option.selected,n=this.get("selectedMode");if("single"===n){var r=this._data;e.each(r,function(e){i[e.get("name")]=!1})}i[t]=!0},unSelect:function(e){if("single"!==this.get("selectedMode"))this.option.selected[e]=!1},toggleSelected:function(e){var t=this.option.selected;if(!t.hasOwnProperty(e))t[e]=!0;this[t[e]?"unSelect":"select"](e)},isSelected:function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&e.indexOf(this._availableNames,t)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:"top",align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}});return i}),define("echarts/component/legend/legendAction",["require","../../echarts","zrender/core/util"],function(require){function e(e,t,n){var r,a={},o="toggleSelected"===e;return n.eachComponent("legend",function(n){if(o&&null!=r)n[r?"select":"unSelect"](t.name);else n[e](t.name),r=n.isSelected(t.name);var s=n.getData();i.each(s,function(e){var t=e.get("name");if("\n"!==t&&""!==t){var i=n.isSelected(t);if(t in a)a[t]=a[t]&&i;else a[t]=i}})}),{name:t.name,selected:a}}var t=require("../../echarts"),i=require("zrender/core/util");t.registerAction("legendToggleSelect","legendselectchanged",i.curry(e,"toggleSelected")),t.registerAction("legendSelect","legendselected",i.curry(e,"select")),t.registerAction("legendUnSelect","legendunselected",i.curry(e,"unSelect"))}),define("echarts/component/helper/listComponent",["require","../../util/layout","../../util/format","../../util/graphic"],function(require){function e(e,i,n){t.positionElement(e,i.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},i.get("padding"))}var t=require("../../util/layout"),i=require("../../util/format"),n=require("../../util/graphic");return{layout:function(i,n,r){var a=t.getLayoutRect(n.getBoxLayoutParams(),{
width:r.getWidth(),height:r.getHeight()},n.get("padding"));t.box(n.get("orient"),i,n.get("itemGap"),a.width,a.height),e(i,n,r)},addBackground:function(e,t){var r=i.normalizeCssArray(t.get("padding")),a=e.getBoundingRect(),o=t.getItemStyle(["color","opacity"]);o.fill=t.get("backgroundColor");var s=new n.Rect({shape:{x:a.x-r[3],y:a.y-r[0],width:a.width+r[1]+r[3],height:a.height+r[0]+r[2]},style:o,silent:!0,z2:-1});n.subPixelOptimizeRect(s),e.add(s)}}}),define("echarts/component/legend/LegendView",["require","zrender/core/util","../../util/symbol","../../util/graphic","../helper/listComponent","../../echarts"],function(require){function e(e,t){t.dispatchAction({type:"legendToggleSelect",name:e})}function t(e,t,i){var n=i.getZr().storage.getDisplayList()[0];if(!n||!n.useHoverLayer)e.get("legendHoverLink")&&i.dispatchAction({type:"highlight",seriesName:e.name,name:t})}function i(e,t,i){var n=i.getZr().storage.getDisplayList()[0];if(!n||!n.useHoverLayer)e.get("legendHoverLink")&&i.dispatchAction({type:"downplay",seriesName:e.name,name:t})}var n=require("zrender/core/util"),r=require("../../util/symbol"),a=require("../../util/graphic"),o=require("../helper/listComponent"),s=n.curry;return require("../../echarts").extendComponentView({type:"legend",init:function(){this._symbolTypeStore={}},render:function(r,l,u){var A=this.group;if(A.removeAll(),r.get("show")){var B=r.get("selectedMode"),c=r.get("align");if("auto"===c)c="right"===r.get("left")&&"vertical"===r.get("orient")?"right":"left";var C={};n.each(r.getData(),function(n){var o=n.get("name");if(""===o||"\n"===o)return void A.add(new a.Group({newline:!0}));var D=l.getSeriesByName(o)[0];if(!C[o]){if(D){var d=D.getData(),f=d.getVisual("color");if("function"==typeof f)f=f(D.getDataParams(0));var h=d.getVisual("legendSymbol")||"roundRect",E=d.getVisual("symbol"),p=this._createItem(o,n,r,h,E,c,f,B);p.on("click",s(e,o,u)).on("mouseover",s(t,D,null,u)).on("mouseout",s(i,D,null,u)),C[o]=!0}else l.eachRawSeries(function(a){if(!C[o])if(a.legendDataProvider){var l=a.legendDataProvider(),A=l.indexOfName(o);if(0>A)return;var D=l.getItemVisual(A,"color"),d="roundRect",f=this._createItem(o,n,r,d,null,c,D,B);f.on("click",s(e,o,u)).on("mouseover",s(t,a,o,u)).on("mouseout",s(i,a,o,u)),C[o]=!0}},this);if(__DEV__)if(!C[o])console.warn(o+" series not exists. Legend data should be same with series name or data name.")}},this),o.layout(A,r,u),o.addBackground(A,r)}},_createItem:function(e,t,i,o,s,l,u,A){var B=i.get("itemWidth"),c=i.get("itemHeight"),C=i.get("inactiveColor"),D=i.isSelected(e),d=new a.Group,f=t.getModel("textStyle"),h=t.get("icon"),E=t.getModel("tooltip"),p=E.parentModel;if(o=h||o,d.add(r.createSymbol(o,0,0,B,c,D?u:C)),!h&&s&&(s!==o||"none"==s)){var F=.8*c;if("none"===s)s="circle";d.add(r.createSymbol(s,(B-F)/2,(c-F)/2,F,F,D?u:C))}var m="left"===l?B+5:-5,g=l,H=i.get("formatter"),G=e;if("string"==typeof H&&H)G=H.replace("{name}",null!=e?e:"");else if("function"==typeof H)G=H(e);var I=new a.Text({style:{text:G,x:m,y:c/2,fill:D?f.getTextColor():C,textFont:f.getFont(),textAlign:g,textVerticalAlign:"middle"}});d.add(I);var v=new a.Rect({shape:d.getBoundingRect(),invisible:!0,tooltip:E.get("show")?n.extend({content:e,formatter:p.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:e,$vars:["name"]}},E.option):null});return d.add(v),d.eachChild(function(e){e.silent=!0}),v.silent=!A,this.group.add(d),a.setHoverStyle(d),d}})}),define("echarts/component/legend/legendFilter",[],function(){return function(e){var t=e.findComponents({mainType:"legend"});if(t&&t.length)e.filterSeries(function(e){for(var i=0;i<t.length;i++)if(!t[i].isSelected(e.name))return!1;return!0})}}),define("echarts/component/legend",["require","./legend/LegendModel","./legend/legendAction","./legend/LegendView","../echarts","./legend/legendFilter"],function(require){require("./legend/LegendModel"),require("./legend/legendAction"),require("./legend/LegendView");var e=require("../echarts");e.registerProcessor(require("./legend/legendFilter"))}),define("echarts/component/dataZoom/typeDefaulter",["require","../../model/Component"],function(require){require("../../model/Component").registerSubTypeDefaulter("dataZoom",function(e){return"slider"})}),define("echarts/component/dataZoom/helper",["require","../../util/format","zrender/core/util"],function(require){var e=require("../../util/format"),t=require("zrender/core/util"),i={},n=["x","y","z","radius","angle","single"],r=["cartesian2d","polar","singleAxis"];return i.isCoordSupported=function(e){return t.indexOf(r,e)>=0},i.createNameEach=function(i,n){i=i.slice();var r=t.map(i,e.capitalFirst);n=(n||[]).slice();var a=t.map(n,e.capitalFirst);return function(e,o){t.each(i,function(t,i){for(var s={name:t,capital:r[i]},l=0;l<n.length;l++)s[n[l]]=t+a[l];e.call(o,s)})}},i.eachAxisDim=i.createNameEach(n,["axisIndex","axis","index","id"]),i.createLinkedNodesFinder=function(e,i,n){function r(e,i){return t.indexOf(i.nodes,e)>=0}function a(e,r){var a=!1;return i(function(i){t.each(n(e,i)||[],function(e){r.records[i.name][e]&&(a=!0)})}),a}function o(e,r){r.nodes.push(e),i(function(i){t.each(n(e,i)||[],function(e){r.records[i.name][e]=!0})})}return function(t){function n(e){if(!r(e,s)&&a(e,s))o(e,s),l=!0}var s={nodes:[],records:{}};if(i(function(e){s.records[e.name]={}}),!t)return s;o(t,s);var l;do l=!1,e(n);while(l);return s}},i}),define("echarts/component/dataZoom/AxisProxy",["require","zrender/core/util","../../util/number","./helper"],function(require){function e(e,i,n){var r=[1/0,-(1/0)];if(o(n,function(e){var t=e.getData();if(t)o(e.coordDimToDataDim(i),function(e){var i=t.getDataExtent(e);i[0]<r[0]&&(r[0]=i[0]),i[1]>r[1]&&(r[1]=i[1])})}),r[1]<r[0])r=[NaN,NaN];return t(e,r),r}function t(e,t){var i=e.getAxisModel(),n=i.getMin(!0),r="category"===i.get("type"),a=r&&(i.get("data")||[]).length;if(null!=n&&"dataMin"!==n)t[0]=n;else if(r)t[0]=a>0?0:NaN;var o=i.getMax(!0);if(null!=o&&"dataMax"!==o)t[1]=o;else if(r)t[1]=a>0?a-1:NaN;if(!i.get("scale",!0))t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0);return t}function i(e,t){var i=e.getAxisModel(),n=e._percentWindow,a=e._valueWindow;if(n){var o=r.getPixelPrecision(a,[0,500]),s=t||0===n[0]&&100===n[1];i.setRange(s?null:+a[0].toFixed(o),s?null:+a[1].toFixed(o))}}var n=require("zrender/core/util"),r=require("../../util/number"),a=require("./helper"),o=n.each,s=r.asc,l=function(e,t,i,n){this._dimName=e,this._axisIndex=t,this._valueWindow,this._percentWindow,this._dataExtent,this.ecModel=n,this._dataZoomModel=i};return l.prototype={constructor:l,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(i){if(a.isCoordSupported(i.get("coordinateSystem"))){var n=this._dimName,r=t.queryComponents({mainType:n+"Axis",index:i.get(n+"AxisIndex"),id:i.get(n+"AxisId")})[0];if(this._axisIndex===(r&&r.componentIndex))e.push(i)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,i=this._dimName,n=this.ecModel,r=this.getAxisModel(),a="x"===i||"y"===i;if(a)t="gridIndex",e="x"===i?"y":"x";else t="polarIndex",e="angle"===i?"radius":"angle";var o;return n.eachComponent(e+"Axis",function(e){if((e.get(t)||0)===(r.get(t)||0))o=e}),o},calculateDataWindow:function(e){var t=this._dataExtent,i=this.getAxisModel(),n=i.axis.scale,a=this._dataZoomModel.getRangePropMode(),l=[0,100],u=[e.start,e.end],A=[];return o(["startValue","endValue"],function(t){A.push(null!=e[t]?n.parse(e[t]):null)}),o([0,1],function(e){var i=A[e],o=u[e];if("percent"===a[e]){if(null==o)o=l[e];i=n.parse(r.linearMap(o,l,t,!0))}else o=r.linearMap(i,t,l,!0);A[e]=i,u[e]=o}),{valueWindow:s(A),percentWindow:s(u)}},reset:function(t){if(t===this._dataZoomModel){this._dataExtent=e(this,this._dimName,this.getTargetSeriesModels());var n=this.calculateDataWindow(t.option);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,i(this)}},restore:function(e){if(e===this._dataZoomModel)this._valueWindow=this._percentWindow=null,i(this,!0)},filterData:function(e){function t(e){return e>=a[0]&&e<=a[1]}if(e===this._dataZoomModel){var i=this._dimName,n=this.getTargetSeriesModels(),r=e.get("filterMode"),a=this._valueWindow,s=this.getOtherAxisModel();if(e.get("$fromToolbox")&&s&&"category"===s.get("type"))r="empty";o(n,function(e){var n=e.getData();n&&o(e.coordDimToDataDim(i),function(i){if("empty"===r)e.setData(n.map(i,function(e){return!t(e)?NaN:e}));else n.filterSelf(i,t)})})}}},l}),define("echarts/component/dataZoom/DataZoomModel",["require","zrender/core/util","zrender/core/env","../../echarts","../../util/model","./helper","./AxisProxy"],function(require){function e(e){var t={};return l(["start","end","startValue","endValue","throttle"],function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t}function t(e,t){l([["start","startValue"],["end","endValue"]],function(i,n){var r=e._rangePropMode;if(null!=t[i[0]])r[n]="percent";else if(null!=t[i[1]])r[n]="value"})}var i=require("zrender/core/util"),n=require("zrender/core/env"),r=require("../../echarts"),a=require("../../util/model"),o=require("./helper"),s=require("./AxisProxy"),l=i.each,u=o.eachAxisDim,A=r.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null},init:function(t,i,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var r=e(t);this.mergeDefaultAndTheme(t,n),this.doInit(r)},mergeOption:function(t){var n=e(t);i.merge(this.option,t,!0),this.doInit(n)},doInit:function(e){var i=this.option;if(!n.canvasSupported)i.realtime=!1;this._setDefaultThrottle(e),t(this,e),l([["start","startValue"],["end","endValue"]],function(e,t){if("value"===this._rangePropMode[t])i[e[0]]=null},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,i,n,r){var a=this.dependentModels[t.axis][i],o=a.__dzAxisProxy||(a.__dzAxisProxy=new s(t.name,i,this,r));e[t.name+"_"+i]=o},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();if(u(function(t){var i=t.axisIndex;e[i]=a.normalizeToArray(e[i])},this),"axisIndex"===t)this._autoSetAxisIndex();else if("orient"===t)this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;u(function(i){if(null!=e[i.axisIndex])t=!0},this);var i=e.orient;if(null==i&&t)return"orient";else if(!t){if(null==i)e.orient="horizontal";return"axisIndex"}},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,r=this.dependentModels;if(e){var a="vertical"===t?"y":"x";if(r[a+"Axis"].length)n[a+"AxisIndex"]=[0],e=!1;else l(r.singleAxis,function(i){if(e&&i.get("orient",!0)===t)n.singleAxisIndex=[i.componentIndex],e=!1})}if(e)u(function(t){if(e){var i=[],r=this.dependentModels[t.axis];if(r.length&&!i.length)for(var a=0,o=r.length;o>a;a++)if("category"===r[a].get("type"))i.push(a);if(n[t.axisIndex]=i,i.length)e=!1}},this);if(e)this.ecModel.eachSeries(function(e){if(this._isSeriesHasAllAxesTypeOf(e,"value"))u(function(t){var r=n[t.axisIndex],a=e.get(t.axisIndex),o=e.get(t.axisId),s=e.ecModel.queryComponents({mainType:t.axis,index:a,id:o})[0];if(__DEV__)if(!s)throw new Error(t.axis+' "'+i.retrieve(a,o,0)+'" not found');if(a=s.componentIndex,i.indexOf(r,a)<0)r.push(a)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){!e&&(e=t.name)},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var i=!0;return u(function(n){var r=e.get(n.axisIndex),a=this.dependentModels[n.axis][r];if(!a||a.get("type")!==t)i=!1},this),i},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle"))this._autoThrottle=!1;if(this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var e;return u(function(t){if(null==e){var i=this.get(t.axisIndex);if(i.length)e=this.dependentModels[t.axis][i[0]]}},this),e},eachTargetAxis:function(e,t){var i=this.ecModel;u(function(n){l(this.get(n.axisIndex),function(r){e.call(t,n,r,this,i)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var i=this.getAxisProxy(e,t);return i&&i.getAxisModel()},setRawRange:function(e,i){l(["start","end","startValue","endValue"],function(t){this.option[t]=e[t]},this),!i&&t(this,e)},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow();else return void 0},getValueRange:function(e,t){if(null==e&&null==t){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},findRepresentativeAxisProxy:function(){var e=this._axisProxies;for(var t in e)if(e.hasOwnProperty(t)&&e[t].hostedBy(this))return e[t];for(var t in e)if(e.hasOwnProperty(t)&&!e[t].hostedBy(this))return e[t]},getRangePropMode:function(){return this._rangePropMode.slice()}});return A}),define("echarts/view/Component",["require","zrender/container/Group","../util/component","../util/clazz"],function(require){var e=require("zrender/container/Group"),t=require("../util/component"),i=require("../util/clazz"),n=function(){this.group=new e,this.uid=t.getUID("viewComponent")};n.prototype={constructor:n,init:function(e,t){},render:function(e,t,i,n){},dispose:function(){}};var r=n.prototype;return r.updateView=r.updateLayout=r.updateVisual=function(e,t,i,n){},i.enableClassExtend(n),i.enableClassManagement(n,{registerWhenExtend:!0}),n}),define("echarts/component/dataZoom/DataZoomView",["require","../../view/Component"],function(require){var e=require("../../view/Component");return e.extend({type:"dataZoom",render:function(e,t,i,n){this.dataZoomModel=e,this.ecModel=t,this.api=i},getTargetCoordInfo:function(){function e(e,t,i,n){for(var r,a=0;a<i.length;a++)if(i[a].model===e){r=i[a];break}if(!r)i.push(r={model:e,axisModels:[],coordIndex:n});r.axisModels.push(t)}var t=this.dataZoomModel,i=this.ecModel,n={};return t.eachTargetAxis(function(t,r){var a=i.getComponent(t.axis,r);if(a){var o=a.getCoordSysModel();o&&e(o,a,n[o.mainType]||(n[o.mainType]=[]),o.componentIndex)}},this),n}})}),define("echarts/component/dataZoom/SliderZoomModel",["require","./DataZoomModel"],function(require){var e=require("./DataZoomModel"),t=e.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});return t}),define("echarts/util/throttle",[],function(){var e={},t="\x00__throttleOriginMethod",i="\x00__throttleRate",n="\x00__throttleType";return e.throttle=function(e,t,i){function n(){A=(new Date).getTime(),B=null,e.apply(o,s||[])}var r,a,o,s,l,u=0,A=0,B=null;t=t||0;var c=function(){r=(new Date).getTime(),o=this,s=arguments;var e=l||t,c=l||i;if(l=null,a=r-(c?u:A)-e,clearTimeout(B),c)B=setTimeout(n,e);else if(a>=0)n();else B=setTimeout(n,-a);u=r};return c.clear=function(){if(B)clearTimeout(B),B=null},c.debounceNextCall=function(e){l=e},c},e.createOrUpdate=function(r,a,o,s){var l=r[a];if(l){var u=l[t]||l,A=l[n],B=l[i];if(B!==o||A!==s){if(null==o||!s)return r[a]=u;l=r[a]=e.throttle(u,o,"debounce"===s),l[t]=u,l[n]=s,l[i]=o}return l}},e.clear=function(e,i){var n=e[i];if(n&&n[t])e[i]=n[t]},e}),define("echarts/component/helper/sliderMove",["require"],function(require){return function(e,t,i,n,r){function a(e,t,i){var n=!t.length?[t,t]:t.slice();if(t[0]>t[1]&&n.reverse(),0>e&&n[0]+e<i[0])e=i[0]-n[0];if(e>0&&n[1]+e>i[1])e=i[1]-n[1];return e}if(!e)return t;if("rigid"===n)e=a(e,t,i),t[0]+=e,t[1]+=e;else if(e=a(e,t[r],i),t[r]+=e,"push"===n&&t[0]>t[1])t[1-r]=t[r];return t}}),define("echarts/component/dataZoom/SliderZoomView",["require","zrender/core/util","../../util/graphic","../../util/throttle","./DataZoomView","../../util/number","../../util/layout","../helper/sliderMove","zrender/core/event"],function(require){function e(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}var t=require("zrender/core/util"),i=require("../../util/graphic"),n=require("../../util/throttle"),r=require("./DataZoomView"),a=i.Rect,o=require("../../util/number"),s=o.linearMap,l=require("../../util/layout"),u=require("../helper/sliderMove"),A=require("zrender/core/event"),B=o.asc,c=t.bind,C=t.each,D=7,d=1,f=30,h="horizontal",E="vertical",p=5,F=["line","bar","candlestick","scatter"],m=r.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=t},render:function(e,t,i,r){if(m.superApply(this,"render",arguments),n.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),this.dataZoomModel.get("show")===!1)return void this.group.removeAll();if(!r||"dataZoom"!==r.type||r.from!==this.uid)this._buildView();this._updateView()},remove:function(){m.superApply(this,"remove",arguments),n.clear(this,"_dispatchZoomAction")},dispose:function(){m.superApply(this,"dispose",arguments),n.clear(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new i.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,i=this.api,n=this._findCoordRect(),r={width:i.getWidth(),height:i.getHeight()},a=this._orient===h?{right:r.width-n.x-n.width,top:r.height-f-D,width:n.width,height:f}:{right:D,top:n.y,width:f,height:n.height},o=l.getLayoutParams(e.option);t.each(["right","top","width","height"],function(e){if("ph"===o[e])o[e]=a[e]});var s=l.getLayoutRect(o,r,e.padding);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===E&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,i=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),r=n&&n.get("inverse"),a=this._displayables.barGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(i===h&&!r?{scale:o?[1,1]:[1,-1]}:i===h&&r?{scale:o?[-1,1]:[-1,-1]}:i===E&&!r?{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2});var s=e.getBoundingRect([a]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this.dataZoomModel,t=this._size;this._displayables.barGroup.add(new a({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var n=this._size,r=e.series,a=r.getRawData(),o=r.getShadowDim?r.getShadowDim():e.otherDim;if(null!=o){var l=a.getDataExtent(o),u=.3*(l[1]-l[0]);l=[l[0]-u,l[1]+u];var A,B=[0,n[1]],c=[0,n[0]],C=[[n[0],0],[0,0]],D=[],d=c[1]/(a.count()-1),f=0,h=Math.round(a.count()/n[0]);a.each([o],function(e,t){if(h>0&&t%h)return void(f+=d);var i=null==e||isNaN(e)||""===e,n=i?0:s(e,l,B,!0);if(i&&!A&&t)C.push([C[C.length-1][0],0]),D.push([D[D.length-1][0],0]);else if(!i&&A)C.push([f,0]),D.push([f,0]);C.push([f,n]),D.push([f,n]),f+=d,A=i});var E=this.dataZoomModel;this._displayables.barGroup.add(new i.Polygon({shape:{points:C},style:t.defaults({fill:E.get("dataBackgroundColor")},E.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new i.Polyline({shape:{points:D},style:E.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var i=this.dataZoomModel,n=i.get("showDataShadow");if(n!==!1){var r,a=this.ecModel;return i.eachTargetAxis(function(o,s){var l=i.getAxisProxy(o.name,s).getTargetSeriesModels();t.each(l,function(i){if(!r)if(!(n!==!0&&t.indexOf(F,i.get("type"))<0)){var l,u=a.getComponent(o.axis,s).axis,A=e(o.name),B=i.coordinateSystem;if(null!=A&&B.getOtherAxis)l=B.getOtherAxis(u).inverse;r={thisAxis:u,series:i,thisDim:o.name,otherDim:A,otherAxisInverse:l}}},this)},this),r}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],r=this._displayables.barGroup,s=this._size,l=this.dataZoomModel;r.add(e.filler=new a({draggable:!0,cursor:"move",drift:c(this._onDragMove,this,"all"),onmousemove:function(e){A.stop(e.event)},ondragstart:c(this._showDataInfo,this,!0),ondragend:c(this._onDragEnd,this),onmouseover:c(this._showDataInfo,this,!0),onmouseout:c(this._showDataInfo,this,!1),style:{fill:l.get("fillerColor"),textPosition:"inside"}})),r.add(new a(i.subPixelOptimizeRect({silent:!0,shape:{x:0,y:0,width:s[0],height:s[1]},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:d,fill:"rgba(0,0,0,0)"}})));var u=l.get("handleIcon");C([0,1],function(e){var a=i.makePath(u,{style:{strokeNoScale:!0},rectHover:!0,cursor:"vertical"===this._orient?"ns-resize":"ew-resize",draggable:!0,drift:c(this._onDragMove,this,e),onmousemove:function(e){A.stop(e.event)},ondragend:c(this._onDragEnd,this),onmouseover:c(this._showDataInfo,this,!0),onmouseout:c(this._showDataInfo,this,!1)},{x:-.5,y:0,width:1,height:1},"center"),s=a.getBoundingRect();this._handleHeight=o.parsePercent(l.get("handleSize"),this._size[1]),this._handleWidth=s.width/s.height*this._handleHeight,a.setStyle(l.getModel("handleStyle").getItemStyle());var B=l.get("handleColor");if(null!=B)a.style.fill=B;r.add(t[e]=a);var C=l.textStyleModel;this.group.add(n[e]=new i.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",fill:C.getTextColor(),textFont:C.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[s(e[0],[0,100],t,!0),s(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var i=this._handleEnds,n=this._getViewExtent();u(t,i,n,"all"===e||this.dataZoomModel.get("zoomLock")?"rigid":"cross",e),this._range=B([s(i[0],n,[0,100],!0),s(i[1],n,[0,100],!0)])},_updateView:function(e){var t=this._displayables,i=this._handleEnds,n=B(i.slice()),r=this._size;C([0,1],function(e){var n=t.handles[e],a=this._handleHeight;n.attr({scale:[a,a],position:[i[e],r[1]/2-a/2]})},this),t.filler.setShape({x:n[0],y:0,width:n[1]-n[0],height:r[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){function t(e){var t=i.getTransform(r.handles[e].parent,this.group),n=i.transformDirection(0===e?"right":"left",t),l=this._handleWidth/2+p,u=i.applyTransform([C[e]+(0===e?-l:l),this._size[1]/2],t);a[e].setStyle({x:u[0],y:u[1],textVerticalAlign:o===h?"middle":n,textAlign:o===h?n:"center",text:s[e]})}var n=this.dataZoomModel,r=this._displayables,a=r.handleLabels,o=this._orient,s=["",""];if(n.get("showDetail")){var l=n.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,A=this._range,c=e?l.calculateDataWindow({start:A[0],end:A[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var C=B(this._handleEnds.slice());t.call(this,0),t.call(this,1)},_formatLabel:function(e,i){var n=this.dataZoomModel,r=n.get("labelFormatter"),a=n.get("labelPrecision");if(null==a||"auto"===a)a=i.getPixelPrecision();var o=null==e||isNaN(e)?"":"category"===i.type||"time"===i.type?i.scale.getLabel(Math.round(e)):e.toFixed(Math.min(a,20));return t.isFunction(r)?r(e,o):t.isString(r)?r.replace("{value}",o):o},_showDataInfo:function(e){e=this._dragging||e;var t=this._displayables.handleLabels;t[0].attr("invisible",!e),t[1].attr("invisible",!e)},_onDragMove:function(e,t,i){this._dragging=!0;var n=this._applyBarTransform([t,i],!0);this._updateInterval(e,n[0]);var r=this.dataZoomModel.get("realtime");if(this._updateView(!r),r)r&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this._dispatchZoomAction()},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_applyBarTransform:function(e,t){var n=this._displayables.barGroup.getLocalTransform();return i.applyTransform(e,n,t)},_findCoordRect:function(){var e;if(C(this.getTargetCoordInfo(),function(t){if(!e&&t.length){var i=t[0].model.coordinateSystem;e=i.getRect&&i.getRect()}}),!e){var t=this.api.getWidth(),i=this.api.getHeight();e={x:.2*t,y:.2*i,width:.6*t,height:.6*i}}return e}});return m}),define("echarts/component/dataZoom/InsideZoomModel",["require","./DataZoomModel"],function(require){return require("./DataZoomModel").extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1}})}),define("echarts/component/dataZoom/roams",["require","zrender/core/util","../../component/helper/RoamController","../../util/throttle"],function(require){function e(e){var t=e.getZr();return t[B]||(t[B]={})}function t(e,t,i){var a=new l(e.getZr());return a.enable(),a.on("pan",A(n,i)),a.on("zoom",A(r,i)),a}function i(e){s.each(e,function(t,i){if(!t.count)t.controller.dispose(),delete e[i]})}function n(e,t,i,n,r,o,s){a(e,function(a){return a.panGetRange(e.controller,t,i,n,r,o,s)})}function r(e,t,i,n){a(e,function(r){return r.zoomGetRange(e.controller,t,i,n)})}function a(e,t){var i=[];s.each(e.dataZoomInfos,function(e){var n=t(e);n&&i.push({dataZoomId:e.dataZoomId,start:n[0],end:n[1]})}),e.dispatchAction(i)}function o(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var s=require("zrender/core/util"),l=require("../../component/helper/RoamController"),u=require("../../util/throttle"),A=s.curry,B="\x00_ec_dataZoom_roams",c={register:function(n,r){var a=e(n),l=r.dataZoomId,A=r.coordId;s.each(a,function(e,t){var i=e.dataZoomInfos;if(i[l]&&s.indexOf(r.allCoordIds,A)<0)delete i[l],e.count--}),i(a);var B=a[A];if(!B)B=a[A]={coordId:A,dataZoomInfos:{},count:0},B.controller=t(n,r,B),B.dispatchAction=s.curry(o,n);B.controller.setPointerChecker(r.containsPoint),u.createOrUpdate(B,"dispatchAction",r.throttleRate,"fixRate"),!B.dataZoomInfos[l]&&B.count++,B.dataZoomInfos[l]=r},unregister:function(t,n){var r=e(t);s.each(r,function(e){e.controller.dispose();var t=e.dataZoomInfos;if(t[n])delete t[n],e.count--}),i(r)},shouldRecordRange:function(e,t){if(e&&"dataZoom"===e.type&&e.batch)for(var i=0,n=e.batch.length;n>i;i++)if(e.batch[i].dataZoomId===t)return!1;return!0},generateCoordId:function(e){return e.type+"\x00_"+e.id}};return c}),define("echarts/component/dataZoom/InsideZoomView",["require","./DataZoomView","zrender/core/util","../helper/sliderMove","./roams"],function(require){function e(e){var t=[0,100];return!(e[0]<=t[1])&&(e[0]=t[1]),!(e[1]<=t[1])&&(e[1]=t[1]),!(e[0]>=t[0])&&(e[0]=t[0]),!(e[1]>=t[0])&&(e[1]=t[0]),e}var t=require("./DataZoomView"),i=require("zrender/core/util"),n=require("../helper/sliderMove"),r=require("./roams"),a=i.bind,o=t.extend({type:"dataZoom.inside",init:function(e,t){this._range},render:function(e,t,n,s){if(o.superApply(this,"render",arguments),r.shouldRecordRange(s,e.id))this._range=e.getPercentRange();i.each(this.getTargetCoordInfo(),function(t,o){var s=i.map(t,function(e){return r.generateCoordId(e.model)});i.each(t,function(t){var i=t.model;r.register(n,{coordId:r.generateCoordId(i),allCoordIds:s,containsPoint:function(e,t,n){return i.coordinateSystem.containPoint([t,n])},dataZoomId:e.id,throttleRate:e.get("throttle",!0),panGetRange:a(this._onPan,this,t,o),zoomGetRange:a(this._onZoom,this,t,o)})},this)},this)},dispose:function(){r.unregister(this.api,this.dataZoomModel.id),o.superApply(this,"dispose",arguments),this._range=null},_onPan:function(e,t,i,r,a,o,l,u,A){if(this.dataZoomModel.option.disabled)return this._range;var B=this._range.slice(),c=e.axisModels[0];if(c){var C=s[t]([o,l],[u,A],c,i,e),D=C.signal*(B[1]-B[0])*C.pixel/C.pixelLength;return n(D,B,[0,100],"rigid"),this._range=B}},_onZoom:function(t,i,n,r,a,o){var l=this.dataZoomModel.option;if(l.disabled||l.zoomLock)return this._range;var u=this._range.slice(),A=t.axisModels[0];if(A){var B=s[i](null,[a,o],A,n,t),c=(B.pixel-B.pixelStart)/B.pixelLength*(u[1]-u[0])+u[0];return r=Math.max(1/r,0),u[0]=(u[0]-c)*r+c,u[1]=(u[1]-c)*r+c,this._range=e(u)}}}),s={grid:function(e,t,i,n,r){var a=i.axis,o={},s=r.model.coordinateSystem.getRect();if(e=e||[0,0],"x"===a.dim)o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1;else o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1;return o},polar:function(e,t,i,n,r){var a=i.axis,o={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();if(e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===i.mainType)o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1;else o.pixel=t[1]-e[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1;return o},singleAxis:function(e,t,i,n,r){var a=i.axis,o=r.model.coordinateSystem.getRect(),s={};if(e=e||[0,0],"horizontal"===a.orient)s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1;else s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1;return s}};return o}),define("echarts/component/dataZoom/dataZoomProcessor",["require","../../echarts"],function(require){function e(e,t,i){i.getAxisProxy(e.name,t).reset(i)}function t(e,t,i){i.getAxisProxy(e.name,t).filterData(i)}var i=require("../../echarts");i.registerProcessor(function(i,n){i.eachComponent("dataZoom",function(i){i.eachTargetAxis(e),i.eachTargetAxis(t)}),i.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy(),i=t.getDataPercentWindow(),n=t.getDataValueWindow();e.setRawRange({start:i[0],end:i[1],startValue:n[0],endValue:n[1]},!0)})})}),define("echarts/component/dataZoom/dataZoomAction",["require","zrender/core/util","./helper","../../echarts"],function(require){var e=require("zrender/core/util"),t=require("./helper"),i=require("../../echarts");i.registerAction("dataZoom",function(i,n){var r=t.createLinkedNodesFinder(e.bind(n.eachComponent,n,"dataZoom"),t.eachAxisDim,function(e,t){return e.get(t.axisIndex)}),a=[];n.eachComponent({mainType:"dataZoom",query:i},function(e,t){a.push.apply(a,r(e).nodes)}),e.each(a,function(e,t){e.setRawRange({start:i.start,end:i.end,startValue:i.startValue,endValue:i.endValue})})})}),define("echarts/component/dataZoom",["require","./dataZoom/typeDefaulter","./dataZoom/DataZoomModel","./dataZoom/DataZoomView","./dataZoom/SliderZoomModel","./dataZoom/SliderZoomView","./dataZoom/InsideZoomModel","./dataZoom/InsideZoomView","./dataZoom/dataZoomProcessor","./dataZoom/dataZoomAction"],function(require){require("./dataZoom/typeDefaulter"),require("./dataZoom/DataZoomModel"),require("./dataZoom/DataZoomView"),require("./dataZoom/SliderZoomModel"),require("./dataZoom/SliderZoomView"),require("./dataZoom/InsideZoomModel"),require("./dataZoom/InsideZoomView"),require("./dataZoom/dataZoomProcessor"),require("./dataZoom/dataZoomAction")}),define("echarts/component/axisPointer/findPointFromSeries",["require","zrender/core/util","../../util/model"],function(require){var e=require("zrender/core/util"),t=require("../../util/model");
return function(i,n){var r,a=[],o=i.seriesIndex;if(null==o||!(r=n.getSeriesByIndex(o)))return{point:[]};var s=r.getData(),l=t.queryDataIndex(s,i);if(null==l||e.isArray(l))return{point:[]};var u=s.getItemGraphicEl(l),A=r.coordinateSystem;if(r.getTooltipPosition)a=r.getTooltipPosition(l)||[];else if(A&&A.dataToPoint)a=A.dataToPoint(s.getValues(e.map(A.dimensions,function(e){return r.coordDimToDataDim(e)[0]}),l,!0))||[];else if(u){var B=u.getBoundingRect().clone();B.applyTransform(u.transform),a=[B.x+B.width/2,B.y+B.height/2]}return{point:a,el:u}}}),define("echarts/component/axisPointer/axisTrigger",["require","zrender/core/util","../../util/model","./modelHelper","./findPointFromSeries"],function(require){function e(e,i,c,C,D,E,p,F,m){if(C=C||{},!c||null==c[0]||null==c[1])c=d({seriesIndex:C.seriesIndex,dataIndex:C.dataIndex},E).point;var g=e.axesInfo,H="leave"===i||B(c),G={},I={},v={list:[],map:{}},y=[],J={showPointer:h(n,I),showTooltip:h(r,v),highlight:h(a,y)};f(e.coordSysMap,function(i,n){var r=i.containPoint(c);f(e.coordSysAxesInfo[n],function(e,i){var n=e.axis;if(!H&&r&&!u(C,n))t(e,n.pointToData(c),J,!1,G)})});var L={};return f(g,function(e,t){var i=e.linkGroup;if(i&&!I[t])f(i.axesInfo,function(t,n){var r=I[n];if(t!==e&&r){var a=r.value;i.mapper&&(a=e.axis.scale.parse(i.mapper(a,A(t),A(e)))),L[e.key]=a}})}),f(L,function(e,i){t(g[i],e,J,!0,G)}),o(I,g),s(v,c,F,D),l(y,D,p,m),G}function t(e,t,n,r,a){var o=e.axis;if(!o.scale.isBlank()&&o.containData(t)){if(!e.involveSeries)return void n.showPointer(e,t);var s=i(t,e),l=s.payloadBatch,u=s.snapToValue;if(l[0]&&null==a.seriesIndex)c.extend(a,l[0]);if(!r&&e.snap)if(o.containData(u)&&null!=u)t=u;n.highlight("highlight",l),n.showPointer(e,t,l),n.showTooltip(e,s,u)}}function i(e,t){var i=t.axis,n=i.dim,r=e,a=[],o=Number.MAX_VALUE,s=-1;return f(t.seriesModels,function(t,l){var u,A,B=t.coordDimToDataDim(n);if(t.getAxisTooltipData){var c=t.getAxisTooltipData(B,e,i);A=c.dataIndices,u=c.nestestValue}else{if(A=t.getData().indicesOfNearest(B[0],e,!1,"category"===i.type?.5:null),!A.length)return;u=t.getData().get(B[0],A[0])}if(null!=u&&isFinite(u)){var C=e-u,D=Math.abs(C);if(o>=D){if(o>D||C>=0&&0>s)o=D,s=C,r=u,a.length=0;f(A,function(e){a.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})})}}}),{payloadBatch:a,snapToValue:r}}function n(e,t,i,n){e[t.key]={value:i,payloadBatch:n}}function r(e,t,i,n){var r=i.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(t.triggerTooltip&&r.length){var l=t.coordSys.model,u=D.makeKey(l),A=e.map[u];if(!A)A=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(A);A.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:n,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}}function a(e,t,i){e.push.apply(e,i)}function o(e,t){f(t,function(t,i){var n=t.axisPointerModel.option,r=e[i];if(r)!t.useHandle&&(n.status="show"),n.value=r.value,n.seriesDataIndices=(r.payloadBatch||[]).slice();else!t.useHandle&&(n.status="hide")})}function s(e,t,i,n){if(B(t)||!e.list.length)return void n({type:"hideTip"});var r=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:i,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:e.list})}function l(e,t,i,n){var r=i.getZr();n="lastHighlights"+(n||"");var a=E(r)[n]||{},o=E(r)[n]={};c.each(e,function(e){var t=e.seriesIndex+" | "+e.dataIndex;o[t]=e});var s=[],l=[];c.each(a,function(e,t){!o[t]&&l.push(e)}),c.each(o,function(e,t){!a[t]&&s.push(e)}),l.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}function u(e,t){var i=1;return f(e,function(e,t){i&=!/^.+(AxisId|AxisName|AxisIndex)$/.test(t)}),!i&&f([["AxisId","id"],["AxisIndex","componentIndex"],["AxisName","name"]],function(n){var r=C.normalizeToArray(e[t.dim+n[0]]);i|=c.indexOf(r,t.model[n[1]])>=0}),!i}function A(e){var t=e.axis.model,i={},n=i.axisDim=e.axis.dim;return i.axisIndex=i[n+"AxisIndex"]=t.componentIndex,i.axisName=i[n+"AxisName"]=t.name,i.axisId=i[n+"AxisId"]=t.id,i}function B(e){return null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}var c=require("zrender/core/util"),C=require("../../util/model"),D=require("./modelHelper"),d=require("./findPointFromSeries"),f=c.each,h=c.curry,E=C.makeGetter();return e}),define("echarts/component/axisPointer/AxisPointerModel",["require","../../echarts"],function(require){var e=require("../../echarts"),t=e.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,textStyle:{color:"#fff"},padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});return t}),define("echarts/component/axisPointer/globalListener",["require","zrender/core/env","zrender/core/util","../../util/model"],function(require){function e(e,a){function u(i,n){e.on(i,function(i){var o=r(a);l(s(e).records,function(e){e&&n(e,i,o.dispatchAction)}),t(o.pendings,a)})}if(!s(e).initialized)s(e).initialized=!0,u("click",o.curry(n,"click")),u("mousemove",o.curry(n,"mousemove")),u("globalout",i)}function t(e,t){var i,n=e.showTip.length,r=e.hideTip.length;if(n)i=e.showTip[n-1];else if(r)i=e.hideTip[r-1];if(i)i.dispatchAction=null,t.dispatchAction(i)}function i(e,t,i){e.handler("leave",null,i)}function n(e,t,i,n){t.handler(e,i,n)}function r(e){var t={showTip:[],hideTip:[]},i=function(n){var r=t[n.type];if(r)r.push(n);else n.dispatchAction=i,e.dispatchAction(n)};return{dispatchAction:i,pendings:t}}var a=require("zrender/core/env"),o=require("zrender/core/util"),s=require("../../util/model").makeGetter(),l=o.each,u={};return u.register=function(t,i,n){if(!a.node){var r=i.getZr();s(r).records||(s(r).records={}),e(r,i);var o=s(r).records[t]||(s(r).records[t]={});o.handler=n}},u.unregister=function(e,t){if(!a.node){var i=t.getZr(),n=(s(i).records||{})[e];if(n)s(i).records[e]=null}},u}),define("echarts/component/axisPointer/AxisPointerView",["require","./globalListener","../../echarts"],function(require){var e=require("./globalListener"),t=require("../../echarts").extendComponentView({type:"axisPointer",render:function(t,i,n){var r=i.getComponent("tooltip"),a=t.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";e.register("axisPointer",n,function(e,t,i){if("none"!==a&&("leave"===e||a.indexOf(e)>=0))i({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})})},remove:function(i,n){e.disopse(n.getZr(),"axisPointer"),t.superApply(this._model,"remove",arguments)},dispose:function(i,n){e.unregister("axisPointer",n),t.superApply(this._model,"dispose",arguments)}})}),define("echarts/component/axisPointer/BaseAxisPointer",["require","zrender/core/util","../../util/clazz","../../util/graphic","../../util/model","./modelHelper","zrender/core/event","../../util/throttle"],function(require){"use strict";function e(){}function t(e,t,n,r){if(!i(A(n).lastProp,r))A(n).lastProp=r,t?u.updateProps(n,r,e):(n.stopAnimation(),n.attr(r))}function i(e,t){if(s.isObject(e)&&s.isObject(t)){var n=!0;return s.each(t,function(t,r){n&=i(e[r],t)}),!!n}else return e===t}function n(e,t){e[t.get("label.show")?"show":"hide"]()}function r(e){return{position:e.position.slice(),rotation:e.rotation||0}}function a(e,t){var i=e.get("icon"),n={x:-1,y:-1,width:2,height:2},r=s.extend({style:{strokeNoScale:!0},rectHover:!0,cursor:"move",draggable:!0},t);return 0===i.indexOf("image://")?(n.image=i.slice(8),r.style=n,new u.Image(r)):u.makePath(i.replace("path://",""),r,n,"center")}function o(e,t,i){var n=t.get("z"),r=t.get("zlevel");e&&e.traverse(function(e){if("group"!==e.type)null!=n&&(e.z=n),null!=r&&(e.zlevel=r),e.silent=i})}var s=require("zrender/core/util"),l=require("../../util/clazz"),u=require("../../util/graphic"),A=require("../../util/model").makeGetter(),B=require("./modelHelper"),c=require("zrender/core/event"),C=require("../../util/throttle"),D=s.clone,d=s.bind;return e.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,i,n,r){var a=i.get("value"),l=i.get("status");if(this._axisModel=e,this._axisPointerModel=i,this._api=n,r||this._lastValue!==a||this._lastStatus!==l){this._lastValue=a,this._lastStatus=l;var A=this._group,B=this._handle;if(!l||"hide"===l)return A&&A.hide(),void(B&&B.hide());A&&A.show(),B&&B.show();var c={};this.makeElOption(c,a,e,i,n);var C=c.graphicKey;if(C!==this._lastGraphicKey)this.clear(n);this._lastGraphicKey=C;var D=this._moveAnimation=this.determineAnimation(e,i);if(!A)A=this._group=new u.Group,this.createPointerEl(A,c,e,i),this.createLabelEl(A,c,e,i),n.getZr().add(A);else{var d=s.curry(t,i,D);this.updatePointerEl(A,c,d,i),this.updateLabelEl(A,c,d,i)}o(A,i,!0),this._renderHandle(a)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var i=t.get("animation"),n=e.axis,r="category"===n.type,a=t.get("snap");if(!a&&!r)return!1;if("auto"===i||null==i){var o=this.animationThreshold;if(r&&n.getBandWidth()>o)return!0;if(a){var s=B.getAxisInfo(e).seriesDataCount,l=n.getExtent();return Math.abs(l[0]-l[1])/s>o}return!1}return i===!0},makeElOption:function(e,t,i,n,r){},createPointerEl:function(e,t,i,n){var r=t.pointer;if(r){var a=A(e).pointerEl=new u[r.type](D(t.pointer));e.add(a)}},createLabelEl:function(e,t,i,r){if(t.label){var a=A(e).labelEl=new u.Rect(D(t.label));e.add(a),n(a,r)}},updatePointerEl:function(e,t,i){var n=A(e).pointerEl;if(n)n.setStyle(t.pointer.style),i(n,{shape:t.pointer.shape})},updateLabelEl:function(e,t,i,r){var a=A(e).labelEl;if(a)a.setStyle(t.label.style),i(a,{shape:t.label.shape,position:t.label.position}),n(a,r)},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t=this._axisPointerModel,i=this._api.getZr(),n=this._handle,r=t.getModel("handle"),l=t.get("status");if(!r.get("show")||!l||"hide"===l)return n&&i.remove(n),void(this._handle=null);var u;if(!this._handle)u=!0,n=this._handle=a(r,{onmousemove:function(e){c.stop(e.event)},onmousedown:d(this._onHandleDragMove,this,0,0),drift:d(this._onHandleDragMove,this),ondragend:d(this._onHandleDragEnd,this)}),i.add(n);o(n,t,!1);var A=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];n.setStyle(r.getItemStyle(null,A));var B=r.get("size");if(!s.isArray(B))B=[B,B];n.attr("scale",[B[0]/2,B[1]/2]),C.createOrUpdate(this,"_doDispatchAxisPointer",r.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,u)}},_moveHandleToValue:function(e,i){t(this._axisPointerModel,!i&&this._moveAnimation,this._handle,r(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(r(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(r(n)),A(i).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){var e=this._handle;if(e){var t=this._payloadInfo,i={type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,highDownKey:"axisPointerHandle"},n=this._axisModel.axis;i[n.dim+"AxisId"]=this._axisModel.id,this._api.dispatchAction(i)}},_onHandleDragEnd:function(e){this._dragging=!1;var t=this._handle;if(t){var i=this._axisPointerModel.get("value");this._moveHandleToValue(i),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,n=this._handle;if(t&&i)this._lastGraphicKey=null,i&&t.remove(i),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null},doClear:function(){},buildLabel:function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}}},e.prototype.constructor=e,l.enableClassExtend(e),e}),define("echarts/component/axisPointer/viewHelper",["require","zrender/core/util","../../util/graphic","zrender/contain/text","../../util/format","zrender/core/matrix","../../coord/axisHelper","../axis/AxisBuilder"],function(require){"use strict";function e(e,t,i,n){var r=n.getWidth(),a=n.getHeight();e[0]=Math.min(e[0]+t,r)-t,e[1]=Math.min(e[1]+i,a)-i,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}var t=require("zrender/core/util"),i=require("../../util/graphic"),n=require("zrender/contain/text"),r=require("../../util/format"),a=require("zrender/core/matrix"),o=require("../../coord/axisHelper"),s=require("../axis/AxisBuilder"),l={};return l.buildElStyle=function(e){var t,i=e.get("type"),n=e.getModel(i+"Style");if("line"===i)t=n.getLineStyle(),t.fill=null;else if("shadow"===i)t=n.getAreaStyle(),t.stroke=null;return t},l.buildLabelElOption=function(t,i,a,o,s){var u=a.get("value"),A=l.getValueLabel(u,i.axis,i.ecModel,a.get("seriesDataIndices"),{precision:a.get("label.precision"),formatter:a.get("label.formatter")}),B=a.getModel("label"),c=B.getModel("textStyle"),C=r.normalizeCssArray(B.get("padding")||0),D=c.getFont(),d=n.getBoundingRect(A,D,s.textAlign,s.textBaseline),f=s.position,h=d.width+C[1]+C[3],E=d.height+C[0]+C[2],p=s.align;"right"===p&&(f[0]-=h),"center"===p&&(f[0]-=h/2);var F=s.verticalAlign;"bottom"===F&&(f[1]-=E),"middle"===F&&(f[1]-=E/2),e(f,h,E,o);var m=B.get("backgroundColor");if(!m||"auto"===m)m=i.get("axisLine.lineStyle.color");t.label={shape:{x:0,y:0,width:h,height:E,r:B.get("borderRadius")},position:f.slice(),style:{text:A,textFont:D,textFill:c.getTextColor(),textPosition:"inside",fill:m,stroke:B.get("borderColor")||"transparent",lineWidth:B.get("borderWidth")||0,shadowBlur:B.get("shadowBlur"),shadowColor:B.get("shadowColor"),shadowOffsetX:B.get("shadowOffsetX"),shadowOffsetY:B.get("shadowOffsetY")}}},l.getValueLabel=function(e,i,n,r,a){var s=i.scale.getLabel(e,{precision:a.precision}),l=a.formatter;if(l){var u={value:o.getAxisRawValue(i,e),seriesData:[]};if(t.each(r,function(e){var t=n.getSeriesByIndex(e.seriesIndex),i=e.dataIndexInside,r=t&&t.getDataParams(i);r&&u.seriesData.push(r)}),t.isString(l))s=l.replace("{value}",s);else if(t.isFunction(l))s=l(u)}return s},l.getTransformedPosition=function(e,t,n){var r=a.create();return a.rotate(r,r,n.rotation),a.translate(r,r,n.position),i.applyTransform([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)},l.buildCartesianSingleLabelElOption=function(e,t,i,n,r,a){var o=s.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=r.get("label.margin"),l.buildLabelElOption(t,n,r,a,{position:l.getTransformedPosition(n.axis,e,i),align:o.textAlign,verticalAlign:o.textVerticalAlign})},l.makeLineShape=function(e,t,i){return i=i||0,{x1:e[i],y1:e[1-i],x2:t[i],y2:t[1-i]}},l.makeRectShape=function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}},l.makeSectorShape=function(e,t,i,n,r,a){return{cx:e,cy:t,r0:i,r:n,startAngle:r,endAngle:a,clockwise:!0}},l}),define("echarts/component/axisPointer/CartesianAxisPointer",["require","../../util/graphic","./BaseAxisPointer","./viewHelper","../axis/cartesianAxisHelper","../axis/AxisView"],function(require){"use strict";function e(e,t){var i={};return i[t.dim+"AxisIndex"]=t.index,e.getCartesian(i)}function t(e){return"x"===e.dim?0:1}var i=require("../../util/graphic"),n=require("./BaseAxisPointer"),r=require("./viewHelper"),a=require("../axis/cartesianAxisHelper"),o=require("../axis/AxisView"),s=n.extend({makeElOption:function(t,i,n,o,s){var u=n.axis,A=u.grid,B=o.get("type"),c=e(A,u).getOtherAxis(u).getGlobalExtent(),C=u.toGlobalCoord(u.dataToCoord(i,!0));if(B&&"none"!==B){var D=r.buildElStyle(o),d=l[B](u,C,c,D);d.style=D,t.graphicKey=d.type,t.pointer=d}var f=a.layout(A.model,n);r.buildCartesianSingleLabelElOption(i,t,f,n,o,s)},getHandleTransform:function(e,t,i){var n=a.layout(t.axis.grid.model,t,{labelInside:!1});return n.labelMargin=i.get("handle.margin"),{position:r.getTransformedPosition(t.axis,e,n),rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,i,n,r){var a=n.axis,o=a.grid,s=a.getGlobalExtent(!0),l=e(o,a).getOtherAxis(a).getGlobalExtent(),u="x"===a.dim?0:1,A=t.position;A[u]+=i[u],A[u]=Math.min(s[1],A[u]),A[u]=Math.max(s[0],A[u]);var B=(l[1]+l[0])/2,c=[B,B];c[u]=A[u];var C=[{verticalAlign:"middle"},{align:"center"}];return{position:A,rotation:t.rotation,cursorPoint:c,tooltipOption:C[u]}}}),l={line:function(e,n,a,o){var s=r.makeLineShape([n,a[0]],[n,a[1]],t(e));return i.subPixelOptimizeLine({shape:s,style:o}),{type:"Line",shape:s}},shadow:function(e,i,n,a){var o=e.getBandWidth(),s=n[1]-n[0];return{type:"Rect",shape:r.makeRectShape([i-o/2,n[0]],[o,s],t(e))}}};return o.registerAxisPointerClass("CartesianAxisPointer",s),s}),define("echarts/component/axisPointer",["require","../echarts","./axisPointer/modelHelper","./axisPointer/axisTrigger","zrender/core/util","./axisPointer/AxisPointerModel","./axisPointer/AxisPointerView","./axisPointer/CartesianAxisPointer"],function(require){var e=require("../echarts"),t=require("./axisPointer/modelHelper"),i=require("./axisPointer/axisTrigger"),n=require("zrender/core/util");require("./axisPointer/AxisPointerModel"),require("./axisPointer/AxisPointerView"),require("./axisPointer/CartesianAxisPointer"),e.registerPreprocessor(function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;if(t&&!n.isArray(t))e.axisPointer.link=[t]}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(e,i){e.getComponent("axisPointer").coordSysAxesInfo=t.collect(e,i)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,r){var a=i(t.getComponent("axisPointer").coordSysAxesInfo,e.currTrigger,[e.x,e.y],e,e.dispatchAction||n.bind(r.dispatchAction,r),t,r,e.tooltipOption,e.highDownKey);return a})}),define("echarts/component/tooltip/TooltipModel",["require","../../echarts"],function(require){require("../../echarts").extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}})}),define("echarts/component/tooltip/TooltipContent",["require","zrender/core/util","zrender/tool/color","zrender/core/event","../../util/format","zrender/core/env"],function(require){function e(e){var t="cubic-bezier(0.23, 1, 0.32, 1)",i="left "+e+"s "+t+",top "+e+"s "+t;return r.map(B,function(e){return e+"transition:"+i}).join(";")}function t(e){var t=[],i=e.get("fontSize"),n=e.getTextColor();return n&&t.push("color:"+n),t.push("font:"+e.getFont()),i&&t.push("line-height:"+Math.round(3*i/2)+"px"),l(["decoration","align"],function(i){var n=e.get(i);n&&t.push("text-"+i+":"+n)}),t.join(";")}function i(i){var n=[],r=i.get("transitionDuration"),o=i.get("backgroundColor"),B=i.getModel("textStyle"),c=i.get("padding");if(r&&n.push(e(r)),o)if(A.canvasSupported)n.push("background-Color:"+o);else n.push("background-Color:#"+a.toHex(o)),n.push("filter:alpha(opacity=70)");if(l(["width","color","radius"],function(e){var t="border-"+e,r=u(t),a=i.get(r);null!=a&&n.push(t+":"+a+("color"===e?"":"px"))}),n.push(t(B)),null!=c)n.push("padding:"+s.normalizeCssArray(c).join("px ")+"px");return n.join(";")+";"}function n(e,t){var i=document.createElement("div"),n=this._zr=t.getZr();this.el=i,this._x=t.getWidth()/2,this._y=t.getHeight()/2,e.appendChild(i),this._container=e,this._show=!1,this._hideTimeout;var r=this;i.onmouseenter=function(){if(r._enterable)clearTimeout(r._hideTimeout),r._show=!0;r._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!r._enterable){var i=n.handler;o.normalizeEvent(e,t,!0),i.dispatch("mousemove",t)}},i.onmouseleave=function(){if(r._enterable)if(r._show)r.hideLater(r._hideDelay);r._inContent=!1}}var r=require("zrender/core/util"),a=require("zrender/tool/color"),o=require("zrender/core/event"),s=require("../../util/format"),l=r.each,u=s.toCamelCase,A=require("zrender/core/env"),B=["","-webkit-","-moz-","-o-"],c="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";return n.prototype={constructor:n,_enterable:!0,update:function(){var e=this._container,t=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;if("absolute"!==i.position&&"absolute"!==t.position)i.position="relative"},show:function(e){clearTimeout(this._hideTimeout);var t=this.el;t.style.cssText=c+i(e)+";left:"+this._x+"px;top:"+this._y+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var i,n=this._zr;if(n&&n.painter&&(i=n.painter.getViewportRoot()))e+=i.offsetLeft||0,t+=i.offsetTop||0;var r=this.el.style;r.left=e+"px",r.top=t+"px",this._x=e,this._y=t},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){if(this._show&&(!this._inContent||!this._enterable))if(e)this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(r.bind(this.hide,this),e);else this.hide()},isShow:function(){return this._show}},n}),define("echarts/component/tooltip/TooltipView",["require","./TooltipContent","zrender/core/util","../../util/format","../../util/number","../../util/graphic","../axisPointer/findPointFromSeries","../../util/layout","zrender/core/env","../../model/Model","../axisPointer/globalListener","../../coord/axisHelper","../axisPointer/viewHelper","../../echarts"],function(require){function e(e){for(var t=e.pop();e.length;){var i=e.pop();if(i){if(i instanceof D)i=i.get("tooltip",!0);if("string"==typeof i)i={formatter:i};t=new D(i,t,t.ecModel)}}return t}function t(e,t){return e.dispatchAction||s.bind(t.dispatchAction,t)}function i(e,t,i,n,r,a,o){var s=i.clientWidth,l=i.clientHeight;if(null!=a)if(e+s+a>n)e-=s+a;else e+=a;if(null!=o)if(t+l+o>r)t-=l+o;else t+=o;return[e,t]}function n(e,t,i,n,r){var a=i.clientWidth,o=i.clientHeight;return e=Math.min(e+a,n)-a,t=Math.min(t+o,r)-o,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function r(e,t,i){var n=i[0],r=i[1],a=5,o=0,s=0,l=t.width,u=t.height;switch(e){case"inside":o=t.x+l/2-n/2,s=t.y+u/2-r/2;break;case"top":o=t.x+l/2-n/2,s=t.y-r-a;break;case"bottom":o=t.x+l/2-n/2,s=t.y+u+a;break;case"left":o=t.x-n-a,s=t.y+u/2-r/2;break;case"right":o=t.x+l+a,s=t.y+u/2-r/2}return[o,s]}function a(e){return"center"===e||"middle"===e}var o=require("./TooltipContent"),s=require("zrender/core/util"),l=require("../../util/format"),u=require("../../util/number"),A=require("../../util/graphic"),B=require("../axisPointer/findPointFromSeries"),c=require("../../util/layout"),C=require("zrender/core/env"),D=require("../../model/Model"),d=require("../axisPointer/globalListener"),f=require("../../coord/axisHelper"),h=require("../axisPointer/viewHelper"),E=s.bind,p=s.each,F=u.parsePercent,m=new A.Rect({shape:{x:-1,y:-1,width:2,height:2}});require("../../echarts").extendComponentView({type:"tooltip",init:function(e,t){if(!C.node){var i=new o(t.getDom(),t);this._tooltipContent=i}},render:function(e,t,i){if(!C.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=i,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var n=this._tooltipContent;n.update(),n.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel,t=e.get("triggerOn");d.register("itemTooltip",this._api,E(function(e,i,n){if("none"!==t)if(t.indexOf(e)>=0)this._tryShow(i,n);else if("leave"===e)this._hide(n)},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,i=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.manuallyShowTip(e,t,i,{x:n._lastX,y:n._lastY})})}},manuallyShowTip:function(e,i,n,r){if(r.from!==this.uid&&!C.node){var a=t(r,n);this._ticket="";var o=r.dataByCoordSys;if(r.tooltip&&null!=r.x&&null!=r.y){var s=m;s.position=[r.x,r.y],s.update(),s.tooltip=r.tooltip,this._tryShow({offsetX:r.x,offsetY:r.y,target:s},a)}else if(o)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,event:{},dataByCoordSys:r.dataByCoordSys,tooltipOption:r.tooltipOption},a);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(e,i,n,r))return;var l=B(r,i),u=l.point[0],A=l.point[1];if(null!=u&&null!=A)this._tryShow({offsetX:u,offsetY:A,position:r.position,target:l.el,event:{}},a)}else if(null!=r.x&&null!=r.y)n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target,event:{}},a)}},manuallyHideTip:function(e,i,n,r){var a=this._tooltipContent;if(!this._alwaysShowContent)a.hideLater(this._tooltipModel.get("hideDelay"));if(this._lastX=this._lastY=null,r.from!==this.uid)this._hide(t(r,n))},_manuallyAxisShowTip:function(t,i,n,r){var a=r.seriesIndex,o=r.dataIndex,s=i.getComponent("axisPointer").coordSysAxesInfo;if(null!=a&&null!=o&&null!=s){var l=i.getSeriesByIndex(a);if(l){var u=l.getData(),t=e([u.getItemModel(o),l,(l.coordinateSystem||{}).model,t]);if("axis"===t.get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o}),!0}}},_tryShow:function(e,t){var i=e.target,n=this._tooltipModel;if(n){this._lastX=e.offsetX,this._lastY=e.offsetY;var r=e.dataByCoordSys;if(r&&r.length)this._showAxisTooltip(r,e);else if(i&&null!=i.dataIndex)this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,i,t);else if(i&&i.tooltip)this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,i,t);else this._lastDataByCoordSys=null,this._hide(t)}},_showOrMove:function(e,t){var i=e.get("showDelay");t=s.bind(t,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(t,i):t()},_showAxisTooltip:function(t,i){var n=this._ecModel,r=this._tooltipModel,a=[i.offsetX,i.offsetY],o=[],u=[],A=e([i.tooltipOption,r]);p(t,function(e){p(e.dataByAxis,function(e){var t=n.getComponent(e.axisDim+"Axis",e.axisIndex),i=e.value,r=[];if(t&&null!=i){var a=h.getValueLabel(i,t.axis,n,e.seriesDataIndices,e.valueLabelOpt);s.each(e.seriesDataIndices,function(o){var s=n.getSeriesByIndex(o.seriesIndex),l=o.dataIndexInside,A=s&&s.getDataParams(l);if(A.axisDim=e.axisDim,A.axisIndex=e.axisIndex,A.axisType=e.axisType,A.axisId=e.axisId,A.axisValue=f.getAxisRawValue(t.axis,i),A.axisValueLabel=a,A)u.push(A),r.push(s.formatTooltip(l,!0))});var A=a;o.push((A?l.encodeHTML(A)+"<br />":"")+r.join("<br />"))}})},this),o.reverse(),o=o.join("<br /><br />");var B=i.position;this._showOrMove(A,function(){if(this._updateContentNotChangedOnAxis(t))this._updatePosition(A,B,a[0],a[1],this._tooltipContent,u);else this._showTooltipContent(A,o,u,Math.random(),a[0],a[1],B)})},_showSeriesItemTooltip:function(t,i,n){var r=this._ecModel,a=i.seriesIndex,o=r.getSeriesByIndex(a),s=i.dataModel||o,l=i.dataIndex,u=i.dataType,A=s.getData(),B=e([A.getItemModel(l),s,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),c=B.get("trigger");if(null==c||"item"===c){var C=s.getDataParams(l,u),D=s.formatTooltip(l,!1,u),d="item_"+s.name+"_"+l;this._showOrMove(B,function(){this._showTooltipContent(B,D,C,d,t.offsetX,t.offsetY,t.position,t.target)}),n({type:"showTip",dataIndexInside:l,dataIndex:A.getRawIndex(l),seriesIndex:a,from:this.uid})}},_showComponentItemTooltip:function(e,t,i){var n=t.tooltip;if("string"==typeof n){var r=n;n={content:r,formatter:r}}var a=new D(n,this._tooltipModel,this._ecModel),o=a.get("content"),s=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,o,a.get("formatterParams")||{},s,e.offsetX,e.offsetY,e.position,t)}),i({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,i,n,r,a,o,s){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent,A=e.get("formatter");o=o||e.get("position");var B=t;if(A&&"string"==typeof A)B=l.formatTpl(A,i,!0);else if("function"==typeof A){var c=E(function(t,n){if(t===this._ticket)u.setContent(n),this._updatePosition(e,o,r,a,u,i,s)},this);this._ticket=n,B=A(i,n,c)}u.setContent(B),u.show(e),this._updatePosition(e,o,r,a,u,i,s)}},_updatePosition:function(e,t,o,l,u,A,B){var C=this._api.getWidth(),D=this._api.getHeight();t=t||e.get("position");var d=u.getSize(),f=e.get("align"),h=e.get("verticalAlign"),E=B&&B.getBoundingRect().clone();if(B&&E.applyTransform(B.transform),"function"==typeof t)t=t([o,l],A,u.el,E,{viewSize:[C,D],contentSize:d.slice()});if(s.isArray(t))o=F(t[0],C),l=F(t[1],D);else if(s.isObject(t)){t.width=d[0],t.height=d[1];var p=c.getLayoutRect(t,{width:C,height:D});o=p.x,l=p.y,f=null,h=null}else if("string"==typeof t&&B){var m=r(t,E,d);o=m[0],l=m[1]}else{var m=i(o,l,u.el,C,D,f?null:20,h?null:20);o=m[0],l=m[1]}if(f&&(o-=a(f)?d[0]/2:"right"===f?d[0]:0),h&&(l-=a(h)?d[1]/2:"bottom"===h?d[1]:0),e.get("confine")){var m=n(o,l,u.el,C,D);o=m[0],l=m[1]}u.moveTo(o,l)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,i=!!t&&t.length===e.length;return p(t,function(t,n){var r=t.dataByAxis||{},a=e[n]||{},o=a.dataByAxis||[];i&=r.length===o.length,p(r,function(e,t){var n=o[t]||{},r=e.seriesDataIndices||[],a=n.seriesDataIndices||[];i&=e.value===n.value&&e.axisType===n.axisType&&e.axisId===n.axisId&&r.length===a.length,p(r,function(e,t){var n=a[t];i&=e.seriesIndex===n.seriesIndex&&e.dataIndex===n.dataIndex})})}),this._lastDataByCoordSys=e,!!i},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){if(!C.node)this._tooltipContent.hide(),d.unregister("itemTooltip",t)}})}),define("echarts/component/tooltip",["require","./axisPointer","./tooltip/TooltipModel","./tooltip/TooltipView","../echarts"],function(require){require("./axisPointer"),require("./tooltip/TooltipModel"),require("./tooltip/TooltipView"),require("../echarts").registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),require("../echarts").registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})}),define("echarts/component/title",["require","../echarts","../util/graphic","../util/layout"],function(require){"use strict";var e=require("../echarts"),t=require("../util/graphic"),i=require("../util/layout");e.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),e.extendComponentView({type:"title",render:function(e,n,r){if(this.group.removeAll(),e.get("show")){var a=this.group,o=e.getModel("textStyle"),s=e.getModel("subtextStyle"),l=e.get("textAlign"),u=e.get("textBaseline"),A=new t.Text({
style:{text:e.get("text"),textFont:o.getFont(),fill:o.getTextColor()},z2:10}),B=A.getBoundingRect(),c=e.get("subtext"),C=new t.Text({style:{text:c,textFont:s.getFont(),fill:s.getTextColor(),y:B.height+e.get("itemGap"),textBaseline:"top"},z2:10}),D=e.get("link"),d=e.get("sublink");if(A.silent=!D,C.silent=!d,D)A.on("click",function(){window.open(D,"_"+e.get("target"))});if(d)C.on("click",function(){window.open(d,"_"+e.get("subtarget"))});a.add(A),c&&a.add(C);var f=a.getBoundingRect(),h=e.getBoxLayoutParams();h.width=f.width,h.height=f.height;var E=i.getLayoutRect(h,{width:r.getWidth(),height:r.getHeight()},e.get("padding"));if(!l){if(l=e.get("left")||e.get("right"),"middle"===l)l="center";if("right"===l)E.x+=E.width;else if("center"===l)E.x+=E.width/2}if(!u){if(u=e.get("top")||e.get("bottom"),"center"===u)u="middle";if("bottom"===u)E.y+=E.height;else if("middle"===u)E.y+=E.height/2;u=u||"top"}a.attr("position",[E.x,E.y]);var p={textAlign:l,textVerticalAlign:u};A.setStyle(p),C.setStyle(p),f=a.getBoundingRect();var F=E.margin,m=e.getItemStyle(["color","opacity"]);m.fill=e.get("backgroundColor");var g=new t.Rect({shape:{x:f.x-F[3],y:f.y-F[0],width:f.width+F[1]+F[3],height:f.height+F[0]+F[2]},style:m,silent:!0});t.subPixelOptimizeRect(g),a.add(g)}}})}),define("echarts/component/grid",["require","./gridSimple","./axisPointer/CartesianAxisPointer","./axisPointer"],function(require){require("./gridSimple"),require("./axisPointer/CartesianAxisPointer"),require("./axisPointer")}),define("echarts/component/toolbox/featureManager",["require"],function(require){"use strict";var e={};return{register:function(t,i){e[t]=i},get:function(t){return e[t]}}}),define("echarts/component/toolbox/ToolboxModel",["require","./featureManager","zrender/core/util","../../echarts"],function(require){var e=require("./featureManager"),t=require("zrender/core/util"),i=require("../../echarts").extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},mergeDefaultAndTheme:function(n){i.superApply(this,"mergeDefaultAndTheme",arguments),t.each(this.option.feature,function(i,n){var r=e.get(n);r&&t.merge(i,r.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{normal:{borderColor:"#666",color:"none"},emphasis:{borderColor:"#3E98C5"}}}});return i}),define("echarts/data/DataDiffer",["require"],function(require){"use strict";function e(e){return e}function t(t,i,n,r){this._old=t,this._new=i,this._oldKeyGetter=n||e,this._newKeyGetter=r||e}function i(e,t,i,n){for(var r=0;r<e.length;r++){var a=n(e[r],r),o=t[a];if(null==o)i.push(a),t[a]=r;else{if(!o.length)t[a]=o=[o];o.push(r)}}}return t.prototype={constructor:t,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e,t=this._old,n=this._new,r=this._oldKeyGetter,a=this._newKeyGetter,o={},s={},l=[],u=[];for(i(t,o,l,r),i(n,s,u,a),e=0;e<t.length;e++){var A=l[e],B=s[A];if(null!=B){var c=B.length;if(c)1===c&&(s[A]=null),B=B.unshift();else s[A]=null;this._update&&this._update(B,e)}else this._remove&&this._remove(e)}for(var e=0;e<u.length;e++){var A=u[e];if(s.hasOwnProperty(A)){var B=s[A];if(null==B)continue;if(!B.length)this._add&&this._add(B);else for(var C=0,c=B.length;c>C;C++)this._add&&this._add(B[C])}}}},t}),define("echarts/component/toolbox/ToolboxView",["require","./featureManager","zrender/core/util","../../util/graphic","../../model/Model","../../data/DataDiffer","../helper/listComponent","zrender/contain/text","../../echarts"],function(require){function e(e){return 0===e.indexOf("my")}var t=require("./featureManager"),i=require("zrender/core/util"),n=require("../../util/graphic"),r=require("../../model/Model"),a=require("../../data/DataDiffer"),o=require("../helper/listComponent"),s=require("zrender/contain/text");return require("../../echarts").extendComponentView({type:"toolbox",render:function(l,u,A,B){function c(i,n){var a,o=E[i],s=E[n],c=f[o],D=new r(c,l,l.ecModel);if(o&&!s){if(e(o))a={model:D,onclick:D.option.onclick,featureName:o};else{var d=t.get(o);if(!d)return;a=new d(D,u,A)}h[o]=a}else{if(a=h[s],!a)return;a.model=D,a.ecModel=u,a.api=A}if(!o&&s)return void(a.dispose&&a.dispose(u,A));if(!D.get("show")||a.unusable)return void(a.remove&&a.remove(u,A));if(C(D,a,o),D.setIconStatus=function(e,t){var i=this.option,n=this.iconPaths;i.iconStatus=i.iconStatus||{},i.iconStatus[e]=t,n[e]&&n[e].trigger(t)},a.render)a.render(D,u,A,B)}function C(e,t,r){var a=e.getModel("iconStyle"),o=t.getIcons?t.getIcons():e.get("icon"),s=e.get("title")||{};if("string"==typeof o){var B=o,c=s;o={},s={},o[r]=B,s[r]=c}var C=e.iconPaths={};i.each(o,function(r,o){var B=a.getModel("normal").getItemStyle(),c=a.getModel("emphasis").getItemStyle(),f={x:-d/2,y:-d/2,width:d,height:d},h=0===r.indexOf("image://")?(f.image=r.slice(8),new n.Image({style:f})):n.makePath(r.replace("path://",""),{style:B,hoverStyle:c,rectHover:!0},f,"center");if(n.setHoverStyle(h),l.get("showTitle"))h.__title=s[o],h.on("mouseover",function(){var e=a.getModel("emphasis").getItemStyle();h.setStyle({text:s[o],textPosition:e.textPosition||"bottom",textFill:e.fill||e.stroke||"#000",textAlign:e.textAlign||"center"})}).on("mouseout",function(){h.setStyle({textFill:null})});h.trigger(e.get("iconStatus."+o)||"normal"),D.add(h),h.on("click",i.bind(t.onclick,t,u,A,o)),C[o]=h})}var D=this.group;if(D.removeAll(),l.get("show")){var d=+l.get("itemSize"),f=l.get("feature")||{},h=this._features||(this._features={}),E=[];i.each(f,function(e,t){E.push(t)}),new a(this._featureNames||[],E).add(c).update(c).remove(i.curry(c,null)).execute(),this._featureNames=E,o.layout(D,l,A),o.addBackground(D,l),D.eachChild(function(e){var t=e.__title,i=e.hoverStyle;if(i&&t){var n=s.getBoundingRect(t,i.font),r=e.position[0]+D.position[0],a=e.position[1]+D.position[1]+d,o=!1;if(a+n.height>A.getHeight())i.textPosition="top",o=!0;var l=o?-5-n.height:d+8;if(r+n.width/2>A.getWidth())i.textPosition=["100%",l],i.textAlign="right";else if(r-n.width/2<0)i.textPosition=[0,l],i.textAlign="left"}})}},updateView:function(e,t,n,r){i.each(this._features,function(e){e.updateView&&e.updateView(e.model,t,n,r)})},updateLayout:function(e,t,n,r){i.each(this._features,function(e){e.updateLayout&&e.updateLayout(e.model,t,n,r)})},remove:function(e,t){i.each(this._features,function(i){i.remove&&i.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){i.each(this._features,function(i){i.dispose&&i.dispose(e,t)})}})}),define("echarts/component/toolbox/feature/SaveAsImage",["require","zrender/core/env","../featureManager"],function(require){function e(e){this.model=e}var t=require("zrender/core/env");e.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:"保存为图片",type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:["右键另存为图片"]},e.prototype.unusable=!t.canvasSupported;var i=e.prototype;return i.onclick=function(e,i){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",a=document.createElement("a"),o=n.get("type",!0)||"png";a.download=r+"."+o,a.target="_blank";var s=i.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if(a.href=s,"function"==typeof MouseEvent&&!t.browser.ie&&!t.browser.edge){var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});a.dispatchEvent(l)}else{var u=n.get("lang"),A='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(u&&u[0]||"")+'" /></body>',B=window.open();B.document.write(A)}},require("../featureManager").register("saveAsImage",e),e}),define("echarts/component/toolbox/feature/MagicType",["require","zrender/core/util","../../../echarts","../featureManager"],function(require){"use strict";function e(e){this.model=e}var t=require("zrender/core/util");e.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"},option:{},seriesIndex:{}};var i=e.prototype;i.getIcons=function(){var e=this.model,i=e.get("icon"),n={};return t.each(e.get("type"),function(e){if(i[e])n[e]=i[e]}),n};var n={line:function(e,i,n,r){if("bar"===e)return t.merge({id:i,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get("option.line")||{},!0);else return void 0},bar:function(e,i,n,r){if("line"===e)return t.merge({id:i,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get("option.bar")||{},!0);else return void 0},stack:function(e,i,n,r){if("line"===e||"bar"===e)return t.merge({id:i,stack:"__ec_magicType_stack__"},r.get("option.stack")||{},!0);else return void 0},tiled:function(e,i,n,r){if("line"===e||"bar"===e)return t.merge({id:i,stack:""},r.get("option.tiled")||{},!0);else return void 0}},r=[["line","bar"],["stack","tiled"]];i.onclick=function(e,i,a){var o=this.model,s=o.get("seriesIndex."+a);if(n[a]){var l={series:[]},u=function(i){var r=i.subType,s=i.id,u=n[a](r,s,i,o);if(u)t.defaults(u,i.option),l.series.push(u);var A=i.coordinateSystem;if(A&&"cartesian2d"===A.type&&("line"===a||"bar"===a)){var B=A.getAxesByScale("ordinal")[0];if(B){var c=B.dim,C=c+"Axis",D=e.queryComponents({mainType:C,index:i.get(name+"Index"),id:i.get(name+"Id")})[0],d=D.componentIndex;l[C]=l[C]||[];for(var f=0;d>=f;f++)l[C][d]=l[C][d]||{};l[C][d].boundaryGap="bar"===a?!0:!1}}};t.each(r,function(e){if(t.indexOf(e,a)>=0)t.each(e,function(e){o.setIconStatus(e,"normal")})}),o.setIconStatus(a,"emphasis"),e.eachComponent({mainType:"series",query:null==s?null:{seriesIndex:s}},u),i.dispatchAction({type:"changeMagicType",currentType:a,newOption:l})}};var a=require("../../../echarts");return a.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),require("../featureManager").register("magicType",e),e}),define("echarts/component/toolbox/feature/DataView",["require","zrender/core/util","zrender/core/event","../featureManager","../../../echarts"],function(require){function e(e){var t={},i=[],n=[];return e.eachRawSeries(function(e){var r=e.coordinateSystem;if(r&&("cartesian2d"===r.type||"polar"===r.type)){var a=r.getBaseAxis();if("category"===a.type){var o=a.dim+"_"+a.index;if(!t[o])t[o]={categoryAxis:a,valueAxis:r.getOtherAxis(a),series:[]},n.push({axisDim:a.dim,axisIndex:a.index});t[o].series.push(e)}else i.push(e)}else i.push(e)}),{seriesGroupByCategoryAxis:t,other:i,meta:n}}function t(e){var t=[];return B.each(e,function(e,i){var n=e.categoryAxis,r=e.valueAxis,a=r.dim,o=[" "].concat(B.map(e.series,function(e){return e.name})),s=[n.model.getCategories()];B.each(e.series,function(e){s.push(e.getRawData().mapArray(a,function(e){return e}))});for(var l=[o.join(D)],u=0;u<s[0].length;u++){for(var A=[],c=0;c<s.length;c++)A.push(s[c][u]);l.push(A.join(D))}t.push(l.join("\n"))}),t.join("\n\n"+C+"\n\n")}function i(e){return B.map(e,function(e){var t=e.getRawData(),i=[e.name],n=[];return t.each(t.dimensions,function(){for(var e=arguments.length,r=arguments[e-1],a=t.getName(r),o=0;e-1>o;o++)n[o]=arguments[o];i.push((a?a+D:"")+n.join(D))}),i.join("\n")}).join("\n\n"+C+"\n\n")}function n(n){var r=e(n);return{value:B.filter([t(r.seriesGroupByCategoryAxis),i(r.other)],function(e){return e.replace(/[\n\t\s]/g,"")}).join("\n\n"+C+"\n\n"),meta:r.meta}}function r(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function a(e){var t=e.slice(0,e.indexOf("\n"));if(t.indexOf(D)>=0)return!0;else return void 0}function o(e){for(var t=e.split(/\n+/g),i=r(t.shift()).split(d),n=[],a=B.map(i,function(e){return{name:e,data:[]}}),o=0;o<t.length;o++){var s=r(t[o]).split(d);n.push(s.shift());for(var l=0;l<s.length;l++)a[l]&&(a[l].data[o]=s[l])}return{series:a,categories:n}}function s(e){for(var t=e.split(/\n+/g),i=r(t.shift()),n=[],a=0;a<t.length;a++){var o,s=r(t[a]).split(d),l="",u=!1;if(isNaN(s[0]))u=!0,l=s[0],s=s.slice(1),n[a]={name:l,value:[]},o=n[a].value;else o=n[a]=[];for(var A=0;A<s.length;A++)o.push(+s[A]);if(1===o.length)u?n[a].value=o[0]:n[a]=o[0]}return{name:i,data:n}}function l(e,t){var i=e.split(new RegExp("\n*"+C+"\n*","g")),n={series:[]};return B.each(i,function(e,i){if(a(e)){var r=o(e),l=t[i],u=l.axisDim+"Axis";if(l)n[u]=n[u]||[],n[u][l.axisIndex]={data:r.categories},n.series=n.series.concat(r.series)}else{var r=s(e);n.series.push(r)}}),n}function u(e){this._dom=null,this.model=e}function A(e,t){return B.map(e,function(e,i){var n=t&&t[i];if(B.isObject(n)&&!B.isArray(n)){if(B.isObject(e)&&!B.isArray(e))e=e.value;return B.defaults({value:e},n)}else return e})}var B=require("zrender/core/util"),c=require("zrender/core/event"),C=new Array(60).join("-"),D="	",d=new RegExp("["+D+"]+","g");return u.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:"数据视图",lang:["数据视图","关闭","刷新"],backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},u.prototype.onclick=function(e,t){function i(){r.removeChild(o),G._dom=null}var r=t.getDom(),a=this.model;if(this._dom)r.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=a.get("lang")||[];s.innerHTML=u[0]||a.get("title"),s.style.cssText="margin: 10px 20px;",s.style.color=a.get("textColor");var A=document.createElement("div"),C=document.createElement("textarea");A.style.cssText="display:block;width:100%;overflow:auto;";var d=a.get("optionToContent"),f=a.get("contentToOption"),h=n(e);if("function"==typeof d){var E=d(t.getOption());if("string"==typeof E)A.innerHTML=E;else if(B.isDom(E))A.appendChild(E)}else A.appendChild(C),C.readOnly=a.get("readOnly"),C.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",C.style.color=a.get("textColor"),C.style.borderColor=a.get("textareaBorderColor"),C.style.backgroundColor=a.get("textareaColor"),C.value=h.value;var p=h.meta,F=document.createElement("div");F.style.cssText="position:absolute;bottom:0;left:0;right:0;";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",g=document.createElement("div"),H=document.createElement("div");m+=";background-color:"+a.get("buttonColor"),m+=";color:"+a.get("buttonTextColor");var G=this;c.addEventListener(g,"click",i),c.addEventListener(H,"click",function(){var e;try{if("function"==typeof f)e=f(A,t.getOption());else e=l(C.value,p)}catch(n){throw i(),new Error("Data view format error "+n)}if(e)t.dispatchAction({type:"changeDataView",newOption:e});i()}),g.innerHTML=u[1],H.innerHTML=u[2],H.style.cssText=m,g.style.cssText=m,!a.get("readOnly")&&F.appendChild(H),F.appendChild(g),c.addEventListener(C,"keydown",function(e){if(9===(e.keyCode||e.which)){var t=this.value,i=this.selectionStart,n=this.selectionEnd;this.value=t.substring(0,i)+D+t.substring(n),this.selectionStart=this.selectionEnd=i+1,c.stop(e)}}),o.appendChild(s),o.appendChild(A),o.appendChild(F),A.style.height=r.clientHeight-80+"px",r.appendChild(o),this._dom=o},u.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},u.prototype.dispose=function(e,t){this.remove(e,t)},require("../featureManager").register("dataView",u),require("../../../echarts").registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var i=[];B.each(e.newOption.series,function(e){var n=t.getSeriesByName(e.name)[0];if(!n)i.push(B.extend({type:"scatter"},e));else{var r=n.get("data");i.push({name:e.name,data:A(e.data,r)})}}),t.mergeOption(B.defaults({series:i},e.newOption))}),u}),define("echarts/component/helper/BrushController",["require","zrender/mixin/Eventful","zrender/core/util","../../util/graphic","./interactionMutex","../../data/DataDiffer"],function(require){function e(e){if(__DEV__)_.assert(e);if(P.call(this),this._zr=e,this.group=new O.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,__DEV__)this._mounted;this._uid="brushController_"+$++,this._handlers={},R(ee,function(e,t){this._handlers[t]=_.bind(e,this)},this)}function t(e,t){var i=e._zr;if(!e._enableGlobalPan)T.take(i,X,e._uid);R(e._handlers,function(e,t){i.on(t,e)}),e._brushType=t.brushType,e._brushOption=_.merge(_.clone(q),t,!0)}function i(e){var t=e._zr;T.release(t,X,e._uid),R(e._handlers,function(e,i){t.off(i,e)}),e._brushType=e._brushOption=null}function n(e,t){var i=te[t.brushType].createCover(e,t);return i.__brushOption=t,o(i,t),e.group.add(i),i}function r(e,t){var i=l(t);if(i.endCreating)i.endCreating(e,t),o(t,t.__brushOption);return t}function a(e,t){var i=t.__brushOption;l(t).updateCoverShape(e,t,i.range,i)}function o(e,t){var i=t.z;null==i&&(i=W),e.traverse(function(e){e.z=i,e.z2=i})}function s(e,t){l(t).updateCommon(e,t),a(e,t)}function l(e){return te[e.__brushOption.brushType]}function u(e,t,i){var n=e._panels;if(!n)return!0;var r,a=e._transform;return R(n,function(e){e.isTargetByCursor(t,i,a)&&(r=e)}),r}function A(e,t){var i=e._panels;if(!i)return!0;var n=t.__brushOption.panelId;return null!=n?i[n]:!0}function B(e){var t=e._covers,i=t.length;return R(t,function(t){e.group.remove(t)},e),t.length=0,!!i}function c(e,t){var i=k(e._covers,function(e){var t=e.__brushOption,i=_.clone(t.range);return{brushType:t.brushType,panelId:t.panelId,range:i}});e.trigger("brush",i,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function C(e){var t=e._track;if(!t.length)return!1;var i=t[t.length-1],n=t[0],r=i[0]-n[0],a=i[1]-n[1],o=U(r*r+a*a,.5);return o>z}function D(e){var t=e.length-1;return 0>t&&(t=0),[e[0],e[t]]}function d(e,t,i,n){var r=new O.Group;return r.add(new O.Rect({name:"main",style:p(i),silent:!0,draggable:!0,cursor:"move",drift:w(e,t,r,"nswe"),ondragend:w(c,t,{isEnd:!0})})),R(n,function(i){r.add(new O.Rect({name:i,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:w(e,t,r,i),ondragend:w(c,t,{isEnd:!0})}))}),r}function f(e,t,i,n){var r=n.brushStyle.lineWidth||0,a=V(r,Y),o=i[0][0],s=i[1][0],l=o-r/2,u=s-r/2,A=i[0][1],B=i[1][1],c=A-a+r/2,C=B-a+r/2,D=A-o,d=B-s,f=D+r,h=d+r;if(E(e,t,"main",o,s,D,d),n.transformable)E(e,t,"w",l,u,a,h),E(e,t,"e",c,u,a,h),E(e,t,"n",l,u,f,a),E(e,t,"s",l,C,f,a),E(e,t,"nw",l,u,a,a),E(e,t,"ne",c,u,a,a),E(e,t,"sw",l,C,a,a),E(e,t,"se",c,C,a,a)}function h(e,t){var i=t.__brushOption,n=i.transformable,r=t.childAt(0);r.useStyle(p(i)),r.attr({silent:!n,cursor:n?"move":"default"}),R(["w","e","n","s","se","sw","ne","nw"],function(i){var r=t.childOfName(i),a=g(e,i);r&&r.attr({silent:!n,invisible:!n,cursor:n?Z[a]+"-resize":null})})}function E(e,t,i,n,r,a,o){var s=t.childOfName(i);s&&s.setShape(y(v(e,t,[[n,r],[n+a,r+o]])))}function p(e){return _.defaults({strokeNoScale:!0},e.brushStyle)}function F(e,t,i,n){var r=[Q(e,i),Q(t,n)],a=[V(e,i),V(t,n)];return[[r[0],a[0]],[r[1],a[1]]]}function m(e){return O.getTransform(e.group)}function g(e,t){if(t.length>1){t=t.split("");var i=[g(e,t[0]),g(e,t[1])];return("e"===i[0]||"w"===i[0])&&i.reverse(),i.join("")}else{var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=O.transformDirection(n[t],m(e));return r[i]}}function H(e,t,i,n,r,a,o,l){var u=n.__brushOption,A=e(u.range),B=I(i,a,o);R(r.split(""),function(e){var t=j[e];A[t[0]][t[1]]+=B[t[0]]}),u.range=t(F(A[0][0],A[1][0],A[0][1],A[1][1])),s(i,n),c(i,{isEnd:!1})}function G(e,t,i,n,r){var a=t.__brushOption.range,o=I(e,i,n);R(a,function(e){e[0]+=o[0],e[1]+=o[1]}),s(e,t),c(e,{isEnd:!1})}function I(e,t,i){var n=e.group,r=n.transformCoordToLocal(t,i),a=n.transformCoordToLocal(0,0);return[r[0]-a[0],r[1]-a[1]]}function v(e,t,i){var n=A(e,t);return n&&n!==!0?n.clipPath(i,e._transform):_.clone(i)}function y(e){var t=Q(e[0][0],e[1][0]),i=Q(e[0][1],e[1][1]),n=V(e[0][0],e[1][0]),r=V(e[0][1],e[1][1]);return{x:t,y:i,width:n-t,height:r-i}}function J(e,t,i){if(e._brushType){var n=e._zr,r=e._covers,a=u(e,t,i);if(!e._dragging)for(var o=0;o<r.length;o++){var s=r[o].__brushOption;if(a&&(a===!0||s.panelId===a.panelId)&&te[s.brushType].contain(r[o],i[0],i[1]))return}a&&n.setCursorStyle("crosshair")}}function L(e){var t=e.event;t.preventDefault&&t.preventDefault()}function M(e,t,i){return e.childOfName("main").contain(t,i)}function b(e,t,i,o){var s,l=e._creatingCover,A=e._creatingPanel,c=e._brushOption;if(e._track.push(i.slice()),C(e)||l){if(A&&!l){"single"===c.brushMode&&B(e);var D=_.clone(c);D.brushType=N(D.brushType,A),D.panelId=A===!0?null:A.panelId,l=e._creatingCover=n(e,D),e._covers.push(l)}if(l){var d=te[N(e._brushType,A)],f=l.__brushOption;if(f.range=d.getCreatingRange(v(e,l,e._track)),o)r(e,l),d.updateCommon(e,l);a(e,l),s={isEnd:o}}}else if(o&&"single"===c.brushMode&&c.removeOnClick)if(u(e,t,i)&&B(e))s={isEnd:o,removeOnClick:!0};return s}function N(e,t){if("auto"===e){if(__DEV__)_.assert(t&&t.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"');return t.defaultBrushType}return e}function K(e){if(this._dragging){L(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY),i=b(this,e,t,!0);this._dragging=!1,this._track=[],this._creatingCover=null,i&&c(this,i)}}function x(e){return{createCover:function(t,i){return d(w(H,function(t){var i=[t,[0,100]];return e&&i.reverse(),i},function(t){return t[e]}),t,i,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var i=D(t),n=Q(i[0][e],i[1][e]),r=V(i[0][e],i[1][e]);return[n,r]},updateCoverShape:function(t,i,n,r){var a,o=A(t,i);if(o!==!0&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(e,t._transform);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[n,a];e&&l.reverse(),f(t,i,l,r)},updateCommon:h,contain:M}}var P=require("zrender/mixin/Eventful"),_=require("zrender/core/util"),O=require("../../util/graphic"),T=require("./interactionMutex"),S=require("../../data/DataDiffer"),w=_.curry,R=_.each,k=_.map,Q=Math.min,V=Math.max,U=Math.pow,W=1e4,z=6,Y=6,X="globalPan",j={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Z={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},q={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},$=0;e.prototype={constructor:e,enableBrush:function(e){if(__DEV__)_.assert(this._mounted);return this._brushType&&i(this),e.brushType&&t(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};_.each(e,function(e){t[e.panelId]=_.clone(e)})}else this._panels=null;return this},mount:function(e){if(e=e||{},__DEV__)this._mounted=!0;this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){R(this._covers,e,t)},updateCovers:function(e){function t(e,t){return(null!=e.id?e.id:l+t)+"-"+e.brushType}function i(e,i){return t(e.__brushOption,i)}function a(t,i){var a=e[t];if(null!=i&&u[i]===c)A[t]=u[i];else{var o=A[t]=null!=i?(u[i].__brushOption=a,u[i]):r(B,n(B,a));s(B,o)}}function o(e){if(u[e]!==c)B.group.remove(u[e])}if(__DEV__)_.assert(this._mounted);e=_.map(e,function(e){return _.merge(_.clone(q),e,!0)});var l="\x00-brush-index-",u=this._covers,A=this._covers=[],B=this,c=this._creatingCover;return new S(u,e,i,t).add(a).update(a).remove(o).execute(),this},unmount:function(){if(__DEV__)if(!this._mounted)return;if(this.enableBrush(!1),B(this),this._zr.remove(this.group),__DEV__)this._mounted=!1;return this},dispose:function(){this.unmount(),this.off()}},_.mixin(e,P);var ee={mousedown:function(e){if(this._dragging)K.call(this,e);else if(!e.target||!e.target.draggable){L(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var i=this._creatingPanel=u(this,e,t);if(i)this._dragging=!0,this._track=[t.slice()]}},mousemove:function(e){var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(J(this,e,t),this._dragging){L(e);var i=b(this,e,t,!1);i&&c(this,i)}},mouseup:K},te={lineX:x(0),lineY:x(1),rect:{createCover:function(e,t){return d(w(H,function(e){return e},function(e){return e}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=D(e);return F(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,i,n){f(e,t,i,n)},updateCommon:h,contain:M},polygon:{createCover:function(e,t){var i=new O.Group;return i.add(new O.Polyline({name:"main",style:p(t),silent:!0})),i},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new O.Polygon({name:"main",draggable:!0,drift:w(G,e,t),ondragend:w(c,e,{isEnd:!0})}))},updateCoverShape:function(e,t,i,n){t.childAt(0).setShape({points:v(e,t,i)})},updateCommon:h,contain:M}};return e}),define("echarts/component/helper/brushHelper",["require","zrender/core/util","./cursorHelper","zrender/core/BoundingRect"],function(require){function e(e){return n.create(e)}var t=require("zrender/core/util"),i=require("./cursorHelper"),n=require("zrender/core/BoundingRect"),r=Math.max,a=Math.min,o={};return o.makeRectPanelClipPath=function(i){return i=e(i),function(e,n){return t.map(e,function(e){var t=e[0];t=r(t,i.x),t=a(t,i.x+i.width);var n=e[1];return n=r(n,i.y),n=a(n,i.y+i.height),[t,n]})}},o.makeLinearBrushOtherExtent=function(t,i){return t=e(t),function(e){var n=null!=i?i:e,r=n?t.width:t.height,a=n?t.x:t.y;return[a,a+(r||0)]}},o.makeRectIsTargetByCursor=function(t,n,r){return t=e(t),function(e,a,o){return t.contain(a[0],a[1])&&!i.onIrrelevantElement(e,n,r)}},o}),define("echarts/component/helper/BrushTargetManager",["require","zrender/core/util","../../util/graphic","../../util/model","./brushHelper"],function(require){function e(e,t,n){var r=this._targetInfoList=[],a={},o=i(t,e);B(h,function(e,t){if(!n||!n.include||c(n.include,t)>=0)e(o,r,a)})}function t(e){return e[0]>e[1]&&e.reverse(),e}function i(e,t){return u.parseFinder(e,t,{includeMainTypes:d})}function n(e,i,n,r){if(__DEV__)s.assert("cartesian2d"===n.type,"lineX/lineY brush is available only in cartesian2d.");var a=n.getAxis(["x","y"][e]),o=t(s.map([0,1],function(e){return i?a.coordToData(a.toLocalCoord(r[e])):a.toGlobalCoord(a.dataToCoord(r[e]))})),l=[];return l[e]=o,l[1-e]=[NaN,NaN],{values:o,xyMinMax:l}}function r(e,t,i,n){return[t[0]-n[e]*i[0],t[1]-n[e]*i[1]]}function a(e,t){var i=o(e),n=o(t),r=[i[0]/n[0],i[1]/n[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function o(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var s=require("zrender/core/util"),l=require("../../util/graphic"),u=require("../../util/model"),A=require("./brushHelper"),B=s.each,c=s.indexOf,C=s.curry,D=["dataToPoint","pointToData"],d=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],f=e.prototype;f.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(e,t,i){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var n=F[e.brushType](0,i,t);e.__rangeOffset={offset:m[e.brushType](n.values,e.range,[1,1]),xyMinMax:n.xyMinMax}}})},f.matchOutputRanges=function(e,t,i){B(e,function(e){var n=this.findTargetInfo(e,t);if(n&&n!==!0)s.each(n.coordSyses,function(n){var r=F[e.brushType](1,n,e.range);i(e,r.values,n,t)})},this)},f.setInputRanges=function(e,t){B(e,function(e){var i=this.findTargetInfo(e,t);if(__DEV__)s.assert(!i||i===!0||e.coordRange,"coordRange must be specified when coord index specified."),s.assert(!i||i!==!0||e.range,"range must be specified in global brush.");if(e.range=e.range||[],i&&i!==!0){e.panelId=i.panelId;var n=F[e.brushType](0,i.coordSys,e.coordRange),r=e.__rangeOffset;e.range=r?m[e.brushType](n.values,r.offset,a(n.xyMinMax,r.xyMinMax)):n.values}},this)},f.makePanelOpts=function(e,t){return s.map(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:t&&t(i),clipPath:A.makeRectPanelClipPath(n),isTargetByCursor:A.makeRectIsTargetByCursor(n,e,i.coordSysModel),getLinearBrushOtherExtent:A.makeLinearBrushOtherExtent(n)}})},f.controlSeries=function(e,t,i){var n=this.findTargetInfo(e,i);return n===!0||n&&c(n.coordSyses,t.coordinateSystem)>=0},f.findTargetInfo=function(e,t){for(var n=this._targetInfoList,r=i(t,e),a=0;a<n.length;a++){var o=n[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var a=0;a<E.length;a++)if(E[a](r,o))return o}return!0};var h={grid:function(e,t){var i=e.xAxisModels,n=e.yAxisModels,r=e.gridModels,a={},o={},s={};if(i||n||r)B(i,function(e){var t=e.axis.grid.model;a[t.id]=t,o[t.id]=!0}),B(n,function(e){var t=e.axis.grid.model;a[t.id]=t,s[t.id]=!0}),B(r,function(e){a[e.id]=e,o[e.id]=!0,s[e.id]=!0}),B(a,function(e){var r=e.coordinateSystem,a=[];B(r.getCartesians(),function(e,t){if(c(i,e.getAxis("x").model)>=0||c(n,e.getAxis("y").model)>=0)a.push(e)}),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:p.grid,xAxisDeclared:o[e.id],yAxisDeclared:s[e.id]})})},geo:function(e,t){B(e.geoModels,function(e){var i=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:i,coordSyses:[i],getPanelRect:p.geo})})}},E=[function(e,t){var i=e.xAxisModel,n=e.yAxisModel,r=e.gridModel;return!r&&i&&(r=i.axis.grid.model),!r&&n&&(r=n.axis.grid.model),r&&r===t.gridModel},function(e,t){var i=e.geoModel;return i&&i===t.geoModel}],p={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(l.getTransform(e)),t}},F={lineX:C(n,0),lineY:C(n,1),rect:function(e,i,n){var r=i[D[e]]([n[0][0],n[1][0]]),a=i[D[e]]([n[0][1],n[1][1]]),o=[t([r[0],a[0]]),t([r[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,i){var n=[[1/0,-(1/0)],[1/0,-(1/0)]],r=s.map(i,function(i){var r=t[D[e]](i);return n[0][0]=Math.min(n[0][0],r[0]),n[1][0]=Math.min(n[1][0],r[1]),n[0][1]=Math.max(n[0][1],r[0]),n[1][1]=Math.max(n[1][1],r[1]),r});return{values:r,xyMinMax:n}}},m={lineX:C(r,0),lineY:C(r,1),rect:function(e,t,i){return[[e[0][0]-i[0]*t[0][0],e[0][1]-i[0]*t[0][1]],[e[1][0]-i[1]*t[1][0],e[1][1]-i[1]*t[1][1]]]},polygon:function(e,t,i){return s.map(e,function(e,n){return[e[0]-i[0]*t[n][0],e[1]-i[1]*t[n][1]]})}};return e}),define("echarts/component/dataZoom/history",["require","zrender/core/util"],function(require){function e(e){var t=e[n];if(!t)t=e[n]=[{}];return t}var t=require("zrender/core/util"),i=t.each,n="\x00_ec_hist_store",r={push:function(t,n){var r=e(t);i(n,function(e,i){for(var n=r.length-1;n>=0;n--){var a=r[n];if(a[i])break}if(0>n){var o=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(o){var s=o.getPercentRange();r[0][i]={dataZoomId:i,start:s[0],end:s[1]}}}}),r.push(n)},pop:function(t){var n=e(t),r=n[n.length-1];n.length>1&&n.pop();var a={};return i(r,function(e,t){for(var i=n.length-1;i>=0;i--){var e=n[i][t];if(e){a[t]=e;break}}}),a},clear:function(e){e[n]=null},count:function(t){return e(t).length}};return r}),define("echarts/component/dataZoom/SelectZoomModel",["require","./DataZoomModel"],function(require){
var e=require("./DataZoomModel");return e.extend({type:"dataZoom.select"})}),define("echarts/component/dataZoom/SelectZoomView",["require","./DataZoomView"],function(require){return require("./DataZoomView").extend({type:"dataZoom.select"})}),define("echarts/component/dataZoomSelect",["require","./dataZoom/typeDefaulter","./dataZoom/DataZoomModel","./dataZoom/DataZoomView","./dataZoom/SelectZoomModel","./dataZoom/SelectZoomView","./dataZoom/dataZoomProcessor","./dataZoom/dataZoomAction"],function(require){require("./dataZoom/typeDefaulter"),require("./dataZoom/DataZoomModel"),require("./dataZoom/DataZoomView"),require("./dataZoom/SelectZoomModel"),require("./dataZoom/SelectZoomView"),require("./dataZoom/dataZoomProcessor"),require("./dataZoom/dataZoomAction")}),define("echarts/component/toolbox/feature/DataZoom",["require","zrender/core/util","../../helper/BrushController","../../helper/BrushTargetManager","../../dataZoom/history","../../dataZoomSelect","../featureManager","../../../echarts"],function(require){"use strict";function e(e,t,i){(this._brushController=new a(i.getZr())).on("brush",r.bind(this._onBrush,this)).mount(),this._isZoomActive}function t(e){var t={};return r.each(["xAxisIndex","yAxisIndex"],function(i){t[i]=e[i],null==t[i]&&(t[i]="all"),(t[i]===!1||"none"===t[i])&&(t[i]=[])}),t}function i(e,t){e.setIconStatus("back",s.count(t)>1?"emphasis":"normal")}function n(e,i,n,r,a){var s=n._isZoomActive;if(r&&"takeGlobalCursor"===r.type)s="dataZoomSelect"===r.key?r.dataZoomSelectActive:!1;n._isZoomActive=s,e.setIconStatus("zoom",s?"emphasis":"normal");var l=new o(t(e.option),i,{include:["grid"]});n._brushController.setPanels(l.makePanelOpts(a,function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"})).enableBrush(s?{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:!1)}var r=require("zrender/core/util"),a=require("../../helper/BrushController"),o=require("../../helper/BrushTargetManager"),s=require("../../dataZoom/history"),l=r.each;require("../../dataZoomSelect");var u="\x00_ec_\x00toolbox-dataZoom_";e.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:{zoom:"区域缩放",back:"区域缩放还原"}};var A=e.prototype;A.render=function(e,t,r,a){this.model=e,this.ecModel=t,this.api=r,n(e,t,this,a,r),i(e,t)},A.onclick=function(e,t,i){B[i].call(this)},A.remove=function(e,t){this._brushController.unmount()},A.dispose=function(e,t){this._brushController.dispose()};var B={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(s.pop(this.ecModel))}};return A._onBrush=function(e,i){function n(e,t,i){var n=r(e,t.getAxis(e).model,l);n&&(a[n.id]={dataZoomId:n.id,startValue:i[0],endValue:i[1]})}function r(e,t,i){var n;return i.eachComponent({mainType:"dataZoom",subType:"select"},function(i){var r=i.getAxisModel(e,t.componentIndex);r&&(n=i)}),n}if(i.isEnd&&e.length){var a={},l=this.ecModel;this._brushController.updateCovers([]);var u=new o(t(this.model.option),l,{include:["grid"]});u.matchOutputRanges(e,l,function(e,t,i){if("cartesian2d"===i.type){var r=e.brushType;if("rect"===r)n("x",i,t[0]),n("y",i,t[1]);else n({lineX:"x",lineY:"y"}[r],i,t)}}),s.push(l,a),this._dispatchZoomAction(a)}},A._dispatchZoomAction=function(e){var t=[];l(e,function(e,i){t.push(r.clone(e))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},require("../featureManager").register("dataZoom",e),require("../../../echarts").registerPreprocessor(function(e){function t(e,t){if(t){var a=e+"Index",o=t[a];if(null!=o&&"all"!=o&&!r.isArray(o))o=o===!1||"none"===o?[]:[o];i(e,function(t,i){if(null==o||"all"==o||-1!==r.indexOf(o,i)){var s={type:"select",$fromToolbox:!0,id:u+e+i};s[a]=i,n.push(s)}})}}function i(t,i){var n=e[t];if(!r.isArray(n))n=n?[n]:[];l(n,i)}if(e){var n=e.dataZoom||(e.dataZoom=[]);if(!r.isArray(n))e.dataZoom=n=[n];var a=e.toolbox;if(a){if(r.isArray(a))a=a[0];if(a&&a.feature){var o=a.feature.dataZoom;t("xAxis",o),t("yAxis",o)}}}}),e}),define("echarts/component/toolbox/feature/Restore",["require","../../dataZoom/history","../featureManager","../../../echarts"],function(require){"use strict";function e(e){this.model=e}var t=require("../../dataZoom/history");e.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:"还原"};var i=e.prototype;return i.onclick=function(e,i,n){t.clear(e),i.dispatchAction({type:"restore",from:this.uid})},require("../featureManager").register("restore",e),require("../../../echarts").registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),e}),define("echarts/component/toolbox",["require","./toolbox/ToolboxModel","./toolbox/ToolboxView","./toolbox/feature/SaveAsImage","./toolbox/feature/MagicType","./toolbox/feature/DataView","./toolbox/feature/DataZoom","./toolbox/feature/Restore"],function(require){require("./toolbox/ToolboxModel"),require("./toolbox/ToolboxView"),require("./toolbox/feature/SaveAsImage"),require("./toolbox/feature/MagicType"),require("./toolbox/feature/DataView"),require("./toolbox/feature/DataZoom"),require("./toolbox/feature/Restore")}),define("inf-ria/echarts",["exports","module","echarts/chart/pie","echarts/chart/bar","echarts/chart/line","echarts/chart/lines","echarts/chart/map","echarts/chart/scatter","echarts/component/legend","echarts/component/dataZoom","echarts/component/tooltip","echarts/component/title","echarts/component/grid","echarts/component/toolbox","echarts","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,i,n,r,a,o,s,l,u,A,B,c,C){var D=C["default"](c),d=/^3\./.test(D["default"].version);D["default"].IS_V3=d,D["default"].infGetColor=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?"#000":arguments[2];if(d)try{var n=e.getModel().getComponent("legend").ecModel._colorNameMap;return n[t]||i}catch(r){return i}return e.component.legend.getColor(t)},module.exports=D["default"]}),define("inf-ria/ui/BcmChart",["require","inf-i18n","underscore","esui/lib","esui/Control","esui/painters","../echarts","../utils/mtools","esui/main"],function(require){function e(e){r.apply(this,arguments)}var t=require("inf-i18n"),i=require("underscore"),n=require("esui/lib"),r=require("esui/Control"),a=require("esui/painters"),o=require("../echarts"),s=require("../utils/mtools");return e.prototype={constructor:e,apiType:"metricName",type:"BcmChart",loaded:!1,initOptions:function(e){var n={lazy:!0,unit:"",noData:t("暂无数据"),statistics:"average"};i.extend(n,e),this.setProperties(n)},resetTop:function(){if(this.conf){var e=n.page.getScrollTop(),t=n.page.getViewHeight(),i=n.getOffset(this.main);if(i.top<e+t&&i.bottom>e)this.loaded=!0,this.renderView()}},renderConf:function(e){if(this.conf=e,this.loaded=!1,this.lazy)return void this.resetTop();else return void this.renderView()},changeConf:function(e){var t=i.extend(this.conf,e);this.renderConf(t)},refresh:function(){var e=s.getUTCTimeRange(this.time,+this.period);this.conf.startTime=e.startTime,this.conf.endTime=e.endTime,this.renderConf(this.conf)},renderView:function(){var e=this,t=this.conf;if(t&&"function"==typeof e.requester)e.requester(t,{"X-silence":!0}).then(function(t){e.renderData(t)})},renderData:function(e){var t=this.conf;if(this.chartview)this.chartview.dispose(),this.chartview=null;var i=this.helper.getPart("chart"),n=s.isMonitorTrendEmpty(e.series,t.statistics);if(n)return void(i.innerHTML='<div class="'+this.helper.getPartClassName("no-data")+'">'+this.noData+"</div>");i.innerHTML='<div style="height: '+this.height+'px;"></div>',s.adjustSeriesData(e,t.statistics);var r=s.getChartOptions(e,this.metricConfig,{type:"line"},{period:t.periodInSecond});this.chartview=o.init(i.firstChild),this.chartview.setOption(r,!0)},initStructure:function(){var e=[];e.push('<div class="'+this.helper.getPartClassName("box")+'">'),e.push('<h1 id="'+this.helper.getId("title")+'"></h1>'),e.push('<div id="'+this.helper.getId("chart")+'" class="'+this.helper.getPartClassName("chart")+'"></div>'),e.push("</div>"),this.main.innerHTML=e.join("")},initEvents:function(){var e=this;if(this.lazy){var t=i.bind(function(){if(!this.loaded)this.resetTop()},this);this.topReset=i.throttle(t,100),n.on(window,"scroll",this.topReset)}this.onresize=function(){if(e.chartview)e.chartview.resize()},n.on(window,"resize",this.onresize)},dispose:function(){if(!this.helper.isInStage("DISPOSED")){if(this.helper.beforeDispose(),this.lazy)n.un(window,"scroll",this.topReset),this.topReset=null;if(n.un(window,"resize",this.onresize),this.chartview)this.chartview.dispose();this.helper.dispose(),this.helper.afterDispose()}},repaint:a.createRepaint(r.prototype.repaint,{name:"width",paint:function(e,t){e.main.style.width=t+"px"}},{name:"height",paint:function(e,t){e.helper.getPart("chart").style.height=t+"px"}},{name:"title",paint:function(e,t){e.helper.getPart("title").innerHTML=t}},{name:["apiType","scope","dimensions","metrics","statistics","period","time","unit"],paint:function(e,t,n,r,a,o,l,u,A){var B={};o=o||"average";var c=s.getUTCTimeRange(u,+l);B.scope=n;var C=s.parseMetrics(a);if(e.metricConfig={unit:A,statistics:o,metrics:C},B.statistics=o,B.periodInSecond=+l,B.startTime=c.startTime,B.endTime=c.endTime,"metricName"===t)B.dimensions=r,B.metricNames=i.pluck(C,"value");else{if(i.isArray(r))B.dimensions=r;else B.dimensions=s.parseDimensions(r);B.metricName=C[0].value}e.renderConf(B)}})},n.inherits(e,r),require("esui/main").register(e),e}),define("uioc/util",[],function(){function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function t(e,t){if("function"==typeof B&&e.indexOf===B)return e.indexOf(t);for(var i=0,n=e.length;n>i;++i)if(e[i]===t)return i;return-1}function i(e,i){return t(e,i)>-1}function n(e,t){!i(e,t)&&e.push(t)}function r(){if("undefined"!=typeof console)Function.prototype.apply.call(console.warn,console,arguments)}function a(e){return null!==e&&void 0!==e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){return a(e)&&"string"==typeof e.$ref}function s(e){var t=c.call(arguments,1);if("function"==typeof e.bind&&e.bind===C)return e.bind.apply(e,t);else return function(){var i=t.shift();t.push.apply(t,arguments),Function.prototype.apply.call(e,i,t)}}function l(){for(var e={},t=0,i=arguments.length;i>t;++t){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function u(e){if("function"==typeof Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t}function A(e,t){this.message=e,this.component=t}var B=Array.prototype.indexOf,c=Array.prototype.slice,C=Function.prototype.bind;return A.prototype=Error.prototype,A.prototype.print=function(){r(this.message)},{CircularError:A,hasOwn:e,contains:i,addToSet:n,merge:l,isObject:a,bind:s,indexOf:t,hasReference:o,warn:r,keys:u}}),define("uioc/Injector",["require","./util"],function(require){function e(e){this.context=e,this.singletons={}}var t=require("./util");return e.prototype.createInstance=function(e,i){if(!e)return i(null);var n=e.id;if("singleton"===e.scope&&t.hasOwn(this.singletons,n))return i(this.singletons[n]);if("static"===e.scope)return i(e.creator);var r=this;this.injectArgs(e,function(t){var a=e.creator.apply(null,t);if("singleton"===e.scope)r.singletons[n]=a;i(a)})},e.prototype.injectArgs=function(e,t){var i=e.args,n=i.length,r=new Array(n),a=this.context.operators.ref;if(!n)return t(r);for(var o=function(e){return function(i){r[e]=i,0===--n&&t(r)}},s=i.length-1;s>-1;--s){var l=i[s];a.has(l)?this.context.getComponent(l.$ref,o(s)):o(s)(l)}},e.prototype.injectProperties=function(e,i,n){var r=i.propDeps,a=i.properties,o=this.context.operators.ref,s=this.context.operators.setter;this.context.getComponent(r,function(){for(var i in a){var l=a[i],u=o.has(l)?arguments[t.indexOf(r,l.$ref)]:l;s.setProperty(e,i,u,s.has(l)&&l.$setter)}n()})},e.prototype.injectSetters=function(e,t,i){var n=t.setterDeps||[],r=this.context.operators.setter;this.context.getComponent(n,function(){for(var t=n.length-1;t>-1;--t){var a=n[t];r.setProperty(e,a,arguments[t])}i()})},e.prototype.injectDependencies=function(e,i,n){var r={prop:!1,setter:!1},a=function(e){r[e]=!0,r.prop&&r.setter&&n()};this.injectProperties(e,i,t.bind(a,null,"prop")),this.injectSetters(e,i,t.bind(a,null,"setter"))},e.prototype.dispose=function(){var e=this.singletons;for(var t in e){var i=e[t];i&&"function"==typeof i.dispose&&i.dispose()}this.singletons=null},e}),define("uioc/main",["require","./Injector","./util","./operator/Ref","./operator/Import","./operator/Setter","./operator/List","./operator/Map","./Loader"],function(require){function e(t){if(t=t||{},!(this instanceof e))return new e(t);else return this.loader=new A(this),this.setLoaderFunction(t.loader||B),this.components={},this.operators={opImport:new o(this),ref:new a(this),setter:new s(this),list:new l(this),map:new u(this)},this.injector=new n(this),this.addComponent(l.LIST_COMPONENT_ID,l.LIST_COMPONENT_CONFIG),this.addComponent(u.MAP_COMPONENT_ID,u.MAP_COMPONENT_CONFIG),void this.addComponent(t.components||{})}function t(e,t){var i={id:e,args:t.args||[],properties:t.properties||{},anonyDeps:null,argDeps:null,propDeps:null,setterDeps:null,scope:t.scope||"transient",creator:t.creator||null,module:t.module||void 0,isFactory:!!t.isFactory,auto:!!t.auto,instance:null};return"function"==typeof i.creator&&this.loader.wrapCreator(i),i}function i(e,t){var i=new Array(e.length);if(0===e.length)return t.apply(null,i);for(var n=this.injector,a=this.loader,o=this,s={},l=e.length,u=function(){0===--l&&t.apply(null,i)},A=function(e,t){return function(l){if(i[e]=l,t)o.operators.setter.resolveDependencies(t,l),s=a.resolveDependentModules(t,{},t.propDeps.concat(t.setterDeps)),a.loadModuleMap(s,r.bind(n.injectDependencies,n,l,t,u));else u()}},B=e.length-1;B>-1;--B){var c=this.hasComponent(e[B])?this.getComponentConfig(e[B]):null;n.createInstance(c,A(B,c))}}var n=require("./Injector"),r=require("./util"),a=require("./operator/Ref"),o=require("./operator/Import"),s=require("./operator/Setter"),l=require("./operator/List"),u=require("./operator/Map"),A=require("./Loader"),B=window.require;return e.prototype.addComponent=function(e,i){if("string"==typeof e){var n={};n[e]=i,this.addComponent(n)}else for(var a in e)if(!this.hasComponent(a))this.components[a]=t.call(this,a,e[a]);else r.warn(a+" has been add! This will be no effect")},e.prototype.getComponent=function(e,t){e=e instanceof Array?e:[e];for(var n={},a=0,o=e.length;o>a;++a){var s=e[a];if(!this.hasComponent(s))r.warn("`%s` has not been added to the Ioc",s);else{var l=this.getComponentConfig(s);this.processStaticConfig(s),n=this.loader.resolveDependentModules(l,n,l.argDeps)}}return this.loader.loadModuleMap(n,r.bind(i,this,e,t)),this},e.prototype.hasComponent=function(e){return!!this.components[e]},e.prototype.getComponentConfig=function(e){return e?this.components[e]:this.components},e.prototype.processStaticConfig=function(e){var t=this.getComponentConfig(e);this.operators.list.process(t),this.operators.map.process(t),this.operators.opImport.process(t),this.operators.ref.process(t)},e.prototype.setLoaderFunction=function(e){this.loader.setLoaderFunction(e)},e.prototype.dispose=function(){this.injector.dispose(),this.components=null},e}),define("uioc",["uioc/main"],function(e){return e}),define("inf-ria/mvc/ioc",["require","bat-ria/extension/underscore","underscore","uioc"],function(require){function e(e){var i={},module=e.module,n=e.remoteModule,r=e.entityName;return t.each(e.actions,function(t){var a={},o=t.name,s=o.charAt(0).toLowerCase()+o.slice(1);if(t.needValidator);var l=(n||module)+"/"+o,u=s+"Model",A=l+"Model";i[u]={module:A,properties:a,auto:!0};var B=s+"View",c=l+"View";i[B]={module:c,properties:{},auto:!0};var C={model:{$ref:u},view:{$ref:B},group:t.group||e.group};i[s]={module:l,args:[r],properties:C,auto:!0}}),i}require("bat-ria/extension/underscore").activate();var t=require("underscore"),i=require("uioc"),n=new i,r={};return n.addComponent(r),n.registerComponents=function(module,i,r){i.module=module,i.entityName=t.camelize(module);var a={},o=e(i);t.extend(a,o,r),n.addComponent(a)},n.addComponentsByEntityName=function(){},n}),define("inf-ria/main",["require"],function(require){return{version:"0.0.0"}}),define("inf-ria",["inf-ria/main"],function(e){return e}),define("fc-storage/sessionStorage",["require","underscore","mini-event/EventTarget","./util","./memory"],function(require){"use strict";var e=require("underscore"),t=require("mini-event/EventTarget"),i=require("./util"),n=window.sessionStorage;if(!n){var r=require("./memory").createInstance();return r.supported=!1,r}var a="function"!=typeof window.document.createElement,o={supported:!0,isIE8:a};return e.extend(o,i.getExtendedStorageMethods(n)),t.enable(o),o}),define("fc-storage/main",["require"],function(require){"use strict";var e={version:"0.0.1-alpha.6"};return e}),define("fc-storage",["fc-storage/main"],function(e){return e}),define("fc-storage/memory",["require","underscore","eoo","mini-event/EventTarget"],function(require){"use strict";function e(e){return Object.prototype.toString.call(e)}var t=require("underscore"),i=require("eoo"),n=require("mini-event/EventTarget"),r={};r.constructor=function(){var i={};this.supported=!0,this.get=this.getItem=function(e){return i[e]},this.set=this.setItem=function(e,t){if("string"!=typeof e||!e)throw new Error("错误的storage.memory.setItem使用，非法键值");return i[e]=t,this.fire("change"),this},this.update=this.updateItem=function(i,n){if("string"!=typeof i||!i)throw new Error("错误的storage.memory.updateItem使用，非法键值");var r=this.getItem(i);if(e(r)!==e(n))return this.setItem(i,n),this.fire("change"),n;if(t.isArray(n)||t.isObject(n))this.setItem(i,t.deepExtend(r,n));else this.setItem(i,n);return this.fire("change"),n},this.fill=function(e,n){if(!t.isObject(e)||t.isArray(e))throw new Error("错误的storage.memory.fill使用，非法值");if(n=n||{},n.update)t.deepExtend(i,e);else t.extend(i,e);return this.fire("change"),this},this.remove=this.removeItem=function(e){return delete i[e],this.fire("change"),this},this.clear=function(){return i={},this.fire("change"),this},this.dump=function(){return t.deepClone(i)}};var a=i.create(n,r),o=new a;return o.createInstance=function(){return new a},o}),define("fc-storage/util",["require","underscore","./memory"],function(require){function e(e){return Object.prototype.toString.call(e)}function t(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}var i=require("underscore"),n={getExtendedStorageMethods:function(n){if(!this.checkSupported(n)){var r=require("./memory").createInstance();n=r,n.supported=!1}var a={getItem:function(e){var t=null;try{t=JSON.parse(n.getItem(e))}catch(i){}return t},setItem:function(e,t){if("string"!=typeof e||!e)throw new Error("错误的storage.setItem使用，非法键值");return n.setItem(e,JSON.stringify(t)),this.fire("change"),n},updateItem:function(i,n){if("string"!=typeof i||!i)throw new Error("错误的storage.updateItem使用，非法键值");var r=this.getItem(i);if(e(r)!==e(n))return this.setItem(i,n),this.fire("change"),n;if($.isPlainObject(n))this.setItem(i,t(r,n));else this.setItem(i,n);return this.fire("change"),this.getItem(i)},fill:function(e,t){if(!i.isObject(e)||i.isArray(e))throw new Error("错误的storage.memory.fill使用，非法值");t=t||{};var r=t.update?n.updateItem:n.setItem;for(var a in e)if(e.hasOwnProperty(a))r.call(n,a,e[a]);return this.fire("change"),n},removeItem:function(e){return n.removeItem(e),this.fire("change"),this},clear:function(){return n.clear(),this.fire("change"),this}};return a.get=a.getItem,a.set=a.setItem,a.update=a.updateItem,a.remove=a.removeItem,a},checkSupported:function(e){var t=!1,i="__FC_STORAGE_TEST_KEY__";try{e.setItem(i,1),e.removeItem(i),t=!0}catch(n){t=!1}return t}};return n}),define("fc-storage/localStorage",["require","underscore","./util","mini-event/EventTarget","./memory"],function(require){"use strict";function e(){if("object"==typeof window.localStorage)return window.localStorage;else if("object"==typeof window.globalStorage)return window.globalStorage[window.location.host];return null}var t=require("underscore"),i=require("./util"),n=require("mini-event/EventTarget"),r=e();if(!r){var a=require("./memory").createInstance();return a.supported=!1,a}var o={supported:!0};return t.extend(o,i.getExtendedStorageMethods(r)),n.enable(o),o}),define("fc-storage/cookie",["require","underscore"],function(require){"use strict";function e(e){return s.raw?e:encodeURIComponent(e)}function t(e){return s.raw?e:decodeURIComponent(e)}function i(t){return e(s.json?JSON.stringify(t):String(t))}function n(e){if(0===e.indexOf('"'))e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");try{e=t(e.replace(o," "))}catch(i){return}try{return s.json?JSON.parse(e):e}catch(i){}}function r(e,t){var i=s.raw?e:n(e);return a.isFunction(t)?t(i):i}var a=require("underscore"),o=/\+/g,s=function(n,o,l){if(void 0!==o&&!a.isFunction(o)){if(l=a.extend({},s.defaults,l),"number"==typeof l.expires){var u=l.expires,A=l.expires=new Date;A.setDate(A.getDate()+u)}return document.cookie=[e(n),"=",i(o),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var B=n?void 0:{},c=document.cookie?document.cookie.split("; "):[],C=0,D=c.length;D>C;C++){var d=c[C].split("="),f=t(d.shift()),h=d.join("=");if(n&&n===f){B=decodeURIComponent(r(h,o));break}if(!n&&void 0!==(h=r(h)))B[f]=h}return B};s.defaults={};var exports={};return exports.remove=exports.removeItem=function(e,t){if(void 0!==s(e))return s(e,"",a.extend({},t,{expires:-1})),!0;else return!1},exports.get=exports.getItem=function(e){return s(e)},exports.set=exports.setItem=function(e,t,i){return s(e,t,i)},exports}),define("esui/validator/RequiredRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="required",e.prototype.errorMessage="${title}不能为空",e.prototype.check=function(e,t){return new i(!!e,this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,0),e}),define("esui/validator/PatternRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="pattern",e.prototype.errorMessage="${title}格式不符合要求",e.prototype.check=function(e,t){var n=new RegExp(this.getLimitCondition(t));return new i(!e||n.test(e),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,200),e}),define("esui/validator/MinRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="min",e.prototype.errorMessage="${title}不能小于${min}",e.prototype.check=function(e,t){var n=+e,r=!isNaN(n)&&n>=this.getLimitCondition(t);return new i(!e||r,this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,300),e}),define("esui/validator/MinLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="minLength",e.prototype.errorMessage="${title}不能小于${minLength}个字符",e.prototype.check=function(e,t){return new i(e.length>=this.getLimitCondition(t),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/validator/MinByteLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="minByteLength",e.prototype.errorMessage="${title}不能小于${minByteLength}个字符",e.prototype.check=function(e,t){var n=e.replace(/[^\x00-\xff]/g,"xx").length;return new i(n>=this.getLimitCondition(t),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/validator/MaxRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="max",e.prototype.errorMessage="${title}不能大于${max}",e.prototype.check=function(e,t){var n=+e,r=!isNaN(n)&&n<=this.getLimitCondition(t);return new i(!e||r,this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,301),e}),define("esui/validator/MaxByteLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="maxByteLength",e.prototype.errorMessage="${title}不能超过${maxByteLength}个字节",e.prototype.check=function(e,t){var n=e.replace(/[^\x00-\xff]/g,"xx").length;return new i(n<=this.getLimitCondition(t),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/lib/lang",["require","underscore"],function(require){var e=require("underscore"),t={},i=8785925;return t.getGUID=function(e){return e=e||"esui",e+i++},t.inherits=function(e,t){var i=function(){};i.prototype=t.prototype;var n=e.prototype,r=e.prototype=new i;for(var a in n)r[a]=n[a];return e.prototype.constructor=e,e.superClass=t.prototype,e},t.clone=function(i){if(!i||"object"!=typeof i)return i;var n=i;if(e.isArray(i)){n=[];for(var r=0;r<i.length;r++)n[r]=t.deepClone(i[r])}else if("[object Object]"==={}.toString.call(i)&&"isPrototypeOf"in i){n={};for(var a in i)if(i.hasOwnProperty(a))n[a]=t.deepClone(i[a])}return n},t.deepClone=t.clone,t.toDictionary=function(t){var i={};return e.each(t,function(e){i[e]=!0}),i},t.isArray=e.isArray,t.toArray=e.toArray,t.extend=e.extend,t.bind=e.bind,t.curry=e.partial,t.indexOf=e.indexOf,t.decodeHTML=e.unescape,t.encodeHTML=e.escape,t}),define("esui/lib/page",["require"],function(require){var e=document.documentElement,t=document.body,i="BackCompat"===document.compatMode?t:e,n={};return n.getWidth=function(){return Math.max(e?e.scrollWidth:0,t?t.scrollWidth:0,i?i.clientWidth:0,0)},n.getHeight=function(){return Math.max(e?e.scrollHeight:0,t?t.scrollHeight:0,i?i.clientHeight:0,0)},n.getViewWidth=function(){return i?i.clientWidth:0},n.getViewHeight=function(){return i?i.clientHeight:0},n.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},n.getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},n.getClientTop=function(){return document.documentElement.clientTop||document.body.clientTop||0},n.getClientLeft=function(){return document.documentElement.clientLeft||document.body.clientLeft||0},{page:n}}),define("esui/lib/event",["require","./dom","./page"],function(require){var e=require("./dom"),t=require("./page").page,i={};return i.preventDefault=function(e){if(e=e||window.event,e.preventDefault)e.preventDefault();else e.returnValue=!1},i.stopPropagation=function(e){if(e=e||window.event,e.stopPropagation)e.stopPropagation();else e.cancelBubble=!0},i.getMousePosition=function(e){if(e=e||window.event,"number"!=typeof e.pageX)e.pageX=e.clientX+t.getScrollLeft()-t.getClientLeft();if("number"!=typeof e.pageY)e.pageY=e.clientY+t.getScrollTop()-t.getClientTop();return e},i.getTarget=function(e){return e=e||window.event,e.target||e.srcElement},{on:function(t,i,n){if(t=e.g(t),t.addEventListener)t.addEventListener(i,n,!1);else if(t.attachEvent)t.attachEvent("on"+i,n)},un:function(t,i,n){if(t=e.g(t),t.addEventListener)t.removeEventListener(i,n,!1);else if(t.attachEvent)t.detachEvent("on"+i,n)},event:i}}),define("esui/lib/date",["require","moment"],function(require){var e=require("moment"),t={};return t.dateFormats=["YYYYMMDDHHmmss","YYYY-MM-DD HH:mm:ss","YYYY/MM/DD HH:mm:ss","YYYY-MM-DDTHH:mm:ss.SSSZ"],t.format=function(t,i){return e(t).format(i)},t.parse=function(i,n){var r=e(i,n||t.dateFormats);return r.toDate()},{date:t}}),define("esui/lib/class",["require","underscore","./dom"],function(require){function e(e){return e.className?e.className.split(/\s+/):[]}var t=require("underscore"),i=require("./dom"),n={};return n.hasClass=function(n,r){if(n=i.g(n),""===r)throw new Error("className must not be empty");if(!n||!r)return!1;if(n.classList)return n.classList.contains(r);var a=e(n);return t.contains(a,r)},n.addClass=function(n,r){if(n=i.g(n),""===r)throw new Error("className must not be empty");if(!n||!r)return n;if(n.classList)return n.classList.add(r),n;var a=e(n);if(t.contains(a,r))return n;else return a.push(r),n.className=a.join(" "),n},n.addClasses=function(n,r){if(n=i.g(n),!n||!r)return n;if(n.classList)return t.each(r,function(e){n.classList.add(e)}),n;var a=e(n),o=t.union(a,r);if(o.length>a.length)n.className=o.join(" ");return n},n.removeClass=function(t,n){if(t=i.g(t),""===n)throw new Error("className must not be empty");if(!t||!n)return t;if(t.classList)return t.classList.remove(n),t;for(var r=e(t),a=!1,o=0;o<r.length;o++)if(r[o]===n)r.splice(o,1),o--,a=!0;if(a)t.className=r.join(" ");return t},n.removeClasses=function(n,r){if(n=i.g(n),!n||!r)return n;if(n.classList)return t.each(r,function(e){n.classList.remove(e)}),n;var a=e(n),o=t.difference(a,r);if(o.length<a.length)n.className=o.join(" ");return n},n.toggleClass=function(t,n){if(t=i.g(t),""===n)throw new Error("className must not be empty");if(!t||!n)return t;if(t.classList)return t.classList.toggle(n),t;for(var r=e(t),a=!1,o=0;o<r.length;o++)if(r[o]===n)r.splice(o,1),a=!0,o--;if(!a)r.push(n);return t.className=r.join(" "),t},n}),define("esui/helper/template",["require","underscore"],function(require){var e=require("underscore"),t={id:function(e,t){return t.helper.getId(e)},"class":function(e,t){return t.helper.getPartClassName(e)},part:function(e,t,i){return i.helper.getPartHTML(e,t)}},i={};return i.setTemplateEngine=function(e){if(this.templateEngine=e,!e.esui)this.initializeTemplateEngineExtension()},i.initializeTemplateEngineExtension=function(){e.each(t,function(e,t){this.addFilter(t,e)},this.templateEngine)},i.renderTemplate=function(e,i){var n=this;i=i||{};var r={get:function(e){if("instance"===e)return n.control;if("function"==typeof i.get)return i.get(e);var r=e,a=null,o=e.lastIndexOf(".");if(o>0){r=e.substring(0,o);var s=e.substring(o+1);if(s&&t.hasOwnProperty(s))a=t[s]}var l=i.hasOwnProperty(r)?i[r]:r;if(a)l=a(l,n.control);return l}};if(!this.templateEngine)throw new Error("No template engine attached to this control");return this.templateEngine.render(e,r)},i}),define("esui/helper/life",["require","underscore","../main"],function(require){var e={NEW:0,INITED:1,RENDERED:2,DISPOSED:4},t=require("underscore"),i=require("../main"),n={};return n.initViewContext=function(){var e=this.control.viewContext||i.getViewContext();this.control.viewContext=null,this.control.setViewContext(e)},n.initExtensions=function(){var e=this.control.extensions;if(!t.isArray(e))e=this.control.extensions=[];Array.prototype.push.apply(e,i.createGlobalExtensions());for(var n={},r=0;r<e.length;r++){var a=e[r];if(!n[a.type])a.attachTo(this.control),n[a.type]=!0}},n.isInStage=function(t){if(null==e[t])throw new Error("Invalid life cycle stage: "+t);return this.control.stage===e[t]},n.changeStage=function(t){if(null==e[t])throw new Error("Invalid life cycle stage: "+t);this.control.stage=e[t]},n.dispose=function(){if(this.control.disposeChildren(),this.control.children=null,this.control.childrenIndex=null,this.clearDOMEvents(),t.invoke(this.control.extensions,"dispose"),
this.control.extensions=null,this.control.parent)this.control.parent.removeChild(this.control);if(this.control.viewContext)this.control.viewContext.remove(this.control);this.control.renderOptions=null},n.beforeDispose=function(){this.control.fire("beforedispose")},n.afterDispose=function(){this.changeStage("DISPOSED"),this.control.fire("afterdispose"),this.control.destroyEvents()},n}),define("esui/helper/html",["require"],function(require){var e={},t={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};return e.getPartBeginTag=function(e,t){var i="<"+t+' id="'+this.getId(e)+'" class="'+this.getPartClassName(e)+'">';return i},e.getPartEndTag=function(e,i){var n=t.hasOwnProperty(i)?" />":"</"+i+">";return n},e.getPartHTML=function(e,t){return this.getPartBeginTag(e,t)+this.getPartEndTag(e,t)},e}),define("mini-event/EventQueue",["require","./lib"],function(require){function e(e,t,i){return e&&e.handler===t&&e.thisObject==i}function t(){this.queue=[]}var i=require("./lib");return t.prototype.add=function(t,n){if(t!==!1&&"function"!=typeof t)throw new Error("event handler must be a function or const false");var r={handler:t};i.extend(r,n);for(var a=0;a<this.queue.length;a++){var o=this.queue[a];if(e(o,t,r.thisObject))return}this.queue.push(r)},t.prototype.remove=function(t,i){if(!t)return void this.clear();for(var n=0;n<this.queue.length;n++){var r=this.queue[n];if(e(r,t,i))return void(this.queue[n]=null)}},t.prototype.clear=function(){this.queue.length=0},t.prototype.execute=function(e,t){for(var i=this.queue,n=0;n<i.length;n++){if("function"==typeof e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())return;var r=i[n];if(r){var a=r.handler;if(a===!1){if("function"==typeof e.preventDefault)e.preventDefault();if("function"==typeof e.stopPropagation)e.stopPropagation()}else a.call(r.thisObject||t,e);if(r.once)this.remove(r.handler,r.thisObject)}else;}},t.prototype.getLength=function(){for(var e=0,t=0;t<this.queue.length;t++)if(this.queue[t])e++;return e},t.prototype.length=t.prototype.getLength,t.prototype.dispose=function(){this.clear(),this.queue=null},t}),define("esui/helper/event",["require","underscore","mini-event/EventQueue","../lib","mini-event"],function(require){function e(e){if(e===window)return s.window;if(e===document)return s.document;if(e===document.documentElement)return s.documentElement;if(e===document.body)return s.body;else return null}function t(t,i){var n=e(t);if(n){var r=n[i.type];if(r)l.each(r,function(e){a(e,t,i)})}}function i(e,t){t=t||40;var i=0;return function(n){if(!i){var r=this;n=n||window.event,n={type:n.type,srcElement:n.srcElement,target:n.target,currentTarget:n.currentTarget},i=setTimeout(function(){e.call(r,n),i=0},t)}}}function n(n,r,a){var o=e(a);if(!o)return!1;var s=o[r];if(!s){s=o[r]=[];var u=l.partial(t,a);if("resize"===r||"scroll"===r)u=i(u);s.handler=u,A.on(a,r,s.handler)}if(!(l.indexOf(s,n)>=0))return s.push(n),!0}function r(t,i,n){var r=e(n);if(!r)return!1;if(!r[i])return!0;for(var a=r[i],o=0;o<a.length;o++)if(a[o]===t){a[o]=null;break}var s=l.all(a,function(e){return null==e});if(s){var u=a.handler;A.un(n,i,u),r[i]=null}return!0}function a(e,t,i){i=i||window.event;var n=!e||l.any(e.ignoreStates,function(t){return e.hasState(t)});if(!n){if(!i.target)i.target=i.srcElement;if(!i.currentTarget)i.currentTarget=t;if(!i.preventDefault)i.preventDefault=function(){i.returnValue=!1};if(!i.stopPropagation)i.stopPropagation=function(){i.cancelBubble=!0};var r=e.domEvents[i.currentTarget[o]][i.type];if(r)r.execute(i,e)}}var o="_esuiDOMEvent",s={window:{},document:{},documentElement:{},body:{}},l=require("underscore"),u=require("mini-event/EventQueue"),A=require("../lib"),B={};return B.addDOMEvent=function(e,t,i){if("string"==typeof e)e=this.getPart(e);if(!this.control.domEvents)this.control.domEvents={};var r=e[o];if(!r)r=e[o]=A.getGUID();var s=this.control.domEvents[r];if(!s)s=this.control.domEvents[r]={element:e};var B=n(this.control,t,e),c=s[t];if(!c)if(c=s[t]=new u,!B)c.handler=l.partial(a,this.control,e),A.on(e,t,c.handler);c.add(i)},B.delegateDOMEvent=function(e,t,i){var n=function(e){var t=require("mini-event").fromDOMEvent(e);if(this.fire(i||e.type,t),t.isDefaultPrevented())A.event.preventDefault(e);if(t.isPropagationStopped())A.event.stopPropagation(e)};this.addDOMEvent(e,t,n)},B.removeDOMEvent=function(e,t,i){if("string"==typeof e)e=this.getPart(e);if(this.control.domEvents){var n=e[o],a=this.control.domEvents[n];if(a&&a[t])if(!i)a[t].clear();else{var s=a[t];if(s.remove(i),!s.getLength())r(this.control,t,e)}}},B.clearDOMEvents=function(e){if("string"==typeof e)e=this.getPart(e);if(this.control.domEvents){if(!e)return l.each(l.pluck(this.control.domEvents,"element"),this.clearDOMEvents,this),void(this.control.domEvents=null);var t=e[o],i=this.control.domEvents[t];delete i.element,l.each(i,function(t,i){var n=r(this.control,i,e);if(!n){var a=t.handler;t.dispose(),t.handler=null,A.un(e,i,a)}},this),delete this.control.domEvents[t]}},B}),define("esui/helper/dom",["require","underscore","../lib","../main"],function(require){function e(e){var t=e.styleType||e.type;return t.toLowerCase()}function t(){return[].slice.call(arguments,0).join("-")}var i=require("underscore"),n=require("../lib"),r=require("../main"),a={};a.getPartClasses=function(i){if(i&&this.partClassCache&&this.partClassCache.hasOwnProperty(i))return this.partClassCache[i].slice();var n=e(this.control),a=this.control.skin,o=r.getConfig("uiClassPrefix"),s=r.getConfig("skinClassPrefix"),l=[];if(i){if(l.push(t(o,n,i)),a)l.push(t(s,a,n,i));if(!this.partClassCache)this.partClassCache={},this.partClassCache[i]=l.slice()}else if(l.push(t(o,"ctrl")),l.push(t(o,n)),a)l.push(t(s,a),t(s,a,n));return l},a.getPartClassName=function(e){return this.getPartClasses(e).join(" ")},a.getPrimaryClassName=function(i){var n=e(this.control);if(i)return t(r.getConfig("uiClassPrefix"),n,i);else return t(r.getConfig("uiClassPrefix"),n)},a.addPartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.addClasses(t,this.getPartClasses(e))},a.removePartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.removeClasses(t,this.getPartClasses(e))},a.getStateClasses=function(i){if(this.stateClassCache&&this.stateClassCache.hasOwnProperty(i))return this.stateClassCache[i].slice();var n=e(this.control),a=r.getConfig,o=[t(a("uiClassPrefix"),n,i),t(a("stateClassPrefix"),i)],s=this.control.skin;if(s){var l=a("skinClassPrefix");o.push(t(l,s,i),t(l,s,n,i))}if(!this.stateClassCache)this.stateClassCache={},this.stateClassCache[i]=o.slice();return o},a.addStateClasses=function(e){var t=this.control.main;if(t)n.addClasses(t,this.getStateClasses(e))},a.removeStateClasses=function(e){var t=this.control.main;if(t)n.removeClasses(t,this.getStateClasses(e))},a.getId=function(e){if(e=e?"-"+e:"",!this.control.domIDPrefix)this.control.domIDPrefix=this.control.viewContext&&this.control.viewContext.id;var t=this.control.domIDPrefix?this.control.domIDPrefix+"-":"";return"ctrl-"+t+this.control.id+e},a.createPart=function(e,t){t=t||"div";var i=document.createElement(t);return i.id=this.getId(e),this.addPartClasses(e,i),i},a.getPart=function(e){return n.g(this.getId(e))},a.isPart=function(e,t){var i=this.getPartClasses(t)[0];return n.hasClass(e,i)};var o={type:!0,name:!0,alt:!0,autocomplete:!0,autofocus:!0,checked:!0,dirname:!0,disabled:!0,form:!0,formaction:!0,formenctype:!0,formmethod:!0,formnovalidate:!0,formtarget:!0,width:!0,height:!0,inputmode:!0,list:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,pattern:!0,placeholder:!0,readonly:!0,required:!0,size:!0,src:!0,step:!0,value:!0};a.replaceMain=function(e){e=e||this.control.createMain();var t=this.control.main;t.setAttribute(r.getConfig("instanceAttr"),n.getGUID());for(var i=t.attributes,a=0;a<i.length;a++){var s=i[a],l=s.name;if(n.hasAttribute(t,l)&&!o.hasOwnProperty(l))n.setAttribute(e,l,s.value)}return n.insertBefore(e,t),t.parentNode.removeChild(t),this.control.main=e,t};var s={name:{name:"name"},maxlength:{name:"maxLength",type:"number"},required:{name:"required",type:"boolean"},pattern:{name:"pattern"},min:{name:"min",type:"number"},max:{name:"max",type:"number"},autofocus:{name:"autoFocus",type:"boolean"},disabled:{name:"disabled",type:"boolean"},readonly:{name:"readOnly",type:"boolean"}};return a.extractOptionsFromInput=function(e,t){var r={};if(i.each(s,function(t,i){var a=n.hasAttribute(e,i);if(a){var o=n.getAttribute(e,i);switch(t.type){case"boolean":o=a;break;case"number":o=parseInt(o,10)}r[t.name]=o}}),n.hasAttribute(e,"value")||"select"!==e.nodeName.toLowerCase()&&e.value)r.value=e.value;return i.defaults(t||{},r)},a}),define("esui/extension/TableSubrow",["require","../Extension","../lib","../controlHelper","../main","../Table"],function(require){function e(e,t){return I.getId(e,t)}function t(e,t){return I.getPartClasses(e,t).join(" ")}function i(e,t){return G.getAttribute(e,"data-"+t)}function n(e,t,i){G.setAttribute(e,"data-"+t,i)}function r(e){return!("undefined"==typeof e||null===e)}function a(t,i){return e(t,"subrow")+i}function o(t,i,n){return e(t,"subentry")+i+n}function s(e,t){return{subrow:e.subrow&&"false"!=e.subrow}}function l(e,t){u(this,e)}function u(e,t){var i=/subentry-opened/.test(t.className),n="subentry-hover";if(i)n="subentry-opened-hover";I.addPartClasses(e,n,t)}function A(e,t){B(this,e)}function B(e,t){I.removePartClasses(e,"subentry-hover",t),I.removePartClasses(e,"subentry-opened-hover",t)}function c(e,n){var r=this,a=i(e,"index"),o=i(e,"fieldIndex"),s=r.datasource,l=s instanceof Array&&s.length;if(l&&!(a>=l)){if(!i(e,"subrowopened")){var A=s[a],B={index:a,item:A,fieldIndex:o};B=r.fire("subrowopen",B);for(var c=r.getRow(a).querySelectorAll("."+t(r,"subentry-opened")),D=0;D<c.length;D++){var d=c[D];if(e!=d&&i(d,"subrowopened"))C(r,a,d)}if(!B.isDefaultPrevented())h(r,a,e)}else f(r,a,e);u(r,e)}}function C(e,t,i){B(e,i),I.removePartClasses(e,"subentry-opened",i),n(i,"title",e.subEntryOpenTip),n(i,"subrowopened",""),G.g(a(e,t)).style.display="none",G.g(a(e,"-arrow-"+t)).style.display="none"}function D(e,t,n){var r=i(n,"fieldIndex"),o=G.g(e.getBodyCellId(t,r)),s=G.g(a(e,t)),l=G.g(a(e,"-arrow-"+t));l.style.left=n.offsetLeft+o.offsetLeft+1+"px",l.style.top=s.offsetTop-13+"px"}function d(e,i){if(!e.subrowMutex)for(var n=parseInt(i)+1;n<e.datasource.length;n++)for(var r=e.getRow(n).querySelectorAll("."+t(e,"subentry-opened")),a=0;a<r.length;a++)D(e,n,r[a])}function f(e,t,n){var r=i(n,"fieldIndex"),a={index:t,item:e.datasource[t],fieldIndex:r};if(a=e.fire("subrowclose",a),!a.isDefaultPrevented())return e.subrowIndex=null,I.removePartClasses(e,"row-unfolded",e.getRow(t)),C(e,t,n),d(e,t),!0;else return!1}function h(e,t,s){var l=e.subrowIndex,u=1,A=i(s,"fieldIndex");if(r(l))u=f(e,l,G.g(o(e,l,A)));if(u){I.addPartClasses(e,"subentry-opened",s),I.addPartClasses(e,"row-unfolded",e.getRow(t)),n(s,"title",e.subEntryCloseTip),n(s,"subrowopened","1");var B=G.g(a(e,t)),c=G.g(a(e,"-arrow-"+t));B.style.display="",c.style.display="",D(e,t,s),G.g(a(e,t)).style.display="",e.subrowMutex&&(e.subrowIndex=t),d(e,t)}}function E(e,i,n,r,a,s){var l=s.subrow,u=l&&n.subEntry,A={notInText:!0,width:e.subEntryWidth,align:"right"};if(u){var B="function"==typeof n.isSubEntryShow?n.isSubEntryShow.call(e,i,r,a):!0;if(B!==!1)A.html=G.format(J,{className:t(e,"subentry"),id:o(e,r,a),title:e.subEntryOpenTip,index:r,fieldIndex:a});A.colClass=t(e,"subentryfield")}return A}function p(i,n,r){var o=i.datasource?i.datasource.length:0;return r.subrow?'<span class="'+t(i,"subrow-arrow")+'" id="'+e(i,"subrow-arrow-"+n)+'" style="display:none"></span><div id="'+a(i,n)+'" class="'+t(i,"subrow")+" "+(o===n+1?t(i,"subrow-last"):"")+'" style="display:none"></div>':""}function F(e,t){return G.g(a(e,t))}function m(t,i){var n=F(t,i),r=e(t,"subrow-panel-"+i),a=t.viewContext.get(r);if(!a)n.innerHTML=G.format(L,{id:r,index:i}),t.initChildren(n),a=t.viewContext.get(r),t.addChild(a);return a}function g(){H.apply(this,arguments)}var H=require("../Extension"),G=require("../lib"),I=require("../controlHelper"),v=require("../main"),y=require("../Table"),J='<div class="${className}" id="${id}" title="${title}" data-index="${index}" data-fieldIndex="${fieldIndex}"></div>',L='<div data-ui="type:Panel;id:${id}" data-index="${index}"></div>';return g.prototype.type="TableSubrow",g.prototype.activate=function(){var e=this.target;if(e instanceof y){var t=I.getPartClasses,i=t(e,"subentry")[0];e.addRowBuilders([{index:0,getRowArgs:s,getColHtml:E,getSubrowHtml:p}]),e.addHandlers("click",{handler:c,matchFn:i}),e.addHandlers("mouseover",{handler:l,matchFn:i}),e.addHandlers("mouseout",{handler:A,matchFn:i}),e.getSubrow=function(e){return F(this,e)},e.setSubrowContent=function(e,t){var i=m(this,t);if(i)i.set("content",e)},e.getSubrowContainer=function(e){return m(this,e)};var n=e.setDatasource;e.setDatasource=function(t,i){if(i=i||!0)for(var r in e.viewContext.controls)if(e.viewContext.controls.hasOwnProperty(r)&&r.indexOf("subrow-panel")>-1)e.viewContext.controls[r]=null;n.call(this,arguments[0])},H.prototype.activate.apply(this,arguments)}},g.prototype.inactivate=function(){var e=this.target;if(e instanceof y)delete e.getSubrow,H.prototype.inactivate.apply(this,arguments)},G.inherits(g,H),v.registerExtension(g),g}),define("esui/validator/Rule",["require","./ValidityState","../lib"],function(require){function e(){}return e.prototype.type=null,e.prototype.errorMessage="${title}验证失败",e.prototype.check=function(e,t){var i=require("./ValidityState");return new i(!0,"")},e.prototype.getErrorMessage=function(e){var t=require("../lib"),i=e.get(this.type+"ErrorMessage")||this.errorMessage;return t.format(i,e)},e.prototype.getLimitCondition=function(e){return e.get(this.type)},e.prototype.getName=function(){return this.type},e}),define("esui/validator/MaxLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="maxLength",e.prototype.errorMessage="${title}不能超过${maxLength}个字符",e.prototype.check=function(e,t){var n=this.getLimitCondition(t);if("function"==typeof n)return new i(n.call(t,e),this.getErrorMessage(t));else return new i(e.length<=n,this.getErrorMessage(t))},e.prototype.getErrorMessage=function(e){var t=require("../lib"),i=e.get(this.type+"ErrorMessage")||this.errorMessage,n=this.getLimitCondition(e),r={title:e.get("title"),maxLength:n,length:n};return t.format(i,r)},e.prototype.getLimitCondition=function(e){return e.get("length")||e.get("maxLength")},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/extension/TableEdit",["require","../validator/MaxLengthRule","../validator/MaxRule","../validator/MinRule","../validator/RequiredRule","../validator/PatternRule","inf-i18n","../Extension","../lib","../controlHelper","../main","../Table","../validator/ValidityState","../validator/Validity"],function(require){function e(e,n){if(se=e,$=n.rowIndex,ee=n.columnIndex,!ie)ie=_.layer.create(),document.body.appendChild(ie),ie.className=e.helper.getPartClassName("editor"),t(n);if(ie.style.zIndex=e.zIndex||"",n.field&&n.field.editWidth)ie.style.width=n.field.editWidth+"px";else ie.style.width="200px";i(Ae,n),r(n)}function t(e){o(),Ae=O.init(ie),n(Ae)}function i(e,t){if(t.field&&t.field.editNote){if(!re)re=s(e,Q);re.setText(t.field.editNote),re.show()}else if(re)re.setText("")}function n(e){ae=s(e,W),oe=s(e,z),ae.on("click",c()),oe.on("click",f()),g(1)}function r(e){if(e.field&&le!==e.field){ne&&ne.dispose(),ne=null;var t=V+ue++,i=U+ue,n=P.g(k),r=P.g(Y);n.innerHTML=P.format(Z,{inputId:t}),r.innerHTML=P.format(q,{validId:i});var a={properties:{}};a.properties[t]=P.extend({id:t,width:e.field.editWidth-22||178,height:28,validityLabel:U+ue},e.field.editRules),ne=O.init(n,a)[0],O.init(r),ne.on("enter",c()),le=e.field}}function a(e){if(e===se){l(),ne.dispose(),ae.dispose(),oe.dispose();try{ie&&document.body.removeChild(ie)}catch(t){}ie=null,ne=null,ae=null,oe=null,se=null,le=null}}function o(){ie.innerHTML=P.format(R,{inputFieldId:k,okId:W,cancelId:z,okText:N.okText||X,cancelText:N.cancelText||j,optClass:se.helper.getPartClassName("editor-opt"),errorClass:se.helper.getPartClassName("editor-error"),errorId:Y,labelId:Q,noteClass:se.helper.getPartClassName("editor-note")})}function s(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.id===t)return n}}function l(){ie&&(ie.style.display="none")}function u(){ie&&(ie.style.display="")}function A(e){if(e){var t=new w;t.addState("TableEditCustomRule",new S(!1,e)),ne.showValidity(t)}}function B(e){var t=new w;t.addState("TableEditCustomRule",new S(!0)),ne.showValidity(t)}function c(){return function(){C()}}function C(){if(ne.validate()){var e={value:G(),rowIndex:$,columnIndex:ee,field:se.realFields[ee]};if(e=se.fire("saveedit",e),b(se,"saveedit",e),!e.isDefaultPrevented())D.call(se,e);else d.call(se,e)}}function D(e){if(this===se)l(),te=0}function d(e){if(this===se&&e.errorMsg)A(e.errorMsg)}function f(){return function(){F()}}function h(){if(this===se)p(this)}function E(){if(this===se)p(this)}function p(e){if(ie){var t=P.g(e.getBodyCellId($,ee));if(t)_.layer.attachTo(ie,t)}}function F(){te=0,l(),g(1);var e={rowIndex:$,columnIndex:ee,field:se.realFields[ee]};e=se.fire("canceledit",e),b(se,"canceledit",e)}function m(t,i){if(te&&se)F();te=1,e(t,i),g(0),u();var n=P.g(t.getBodyCellId(i.rowIndex,i.columnIndex));_.layer.attachTo(ie,n),H(i.value),B()}function g(e){ae.setDisabled(e),oe.setDisabled(e)}function H(e){ne.setValue(e)}function G(){return ne.getValue()}function I(e,t){var i=this;if(i.startEdit){var n=P.getAttribute(e,"data-row"),r=P.getAttribute(e,"data-col");i.startEdit(n,r,e)}}function v(e,t,i){if(this.editable){var n=this.realFields[t],r={rowIndex:e,columnIndex:t,field:n};if(r=this.fire("startedit",r),b(this,"startedit",r),!r.isDefaultPrevented()){var a=this.datasource[e],o=n.editContent,s="function"==typeof o?o.call(this,a,e,t):a[n.field];m(this,{field:n,rowIndex:e,columnIndex:t,element:i,value:s})}}}function y(){if(this===se)F()}function J(){if(this===se)l()}function L(e){if(this===se)u(),e&&A(e)}function M(e,t,i,n,r,a){var o=i.editable;if("function"==typeof o)o=o.call(e,t,n,r,a);if(e.editable&&o)return{textClass:e.getClass("cell-editable"),html:P.format(Be,{className:e.getClass("cell-editentry"),row:n,col:r})};else return void 0}function b(e,t,i){var n=i.field["on"+t];if(n&&"[object Function]"===Object.prototype.toString.call(n))n.call(e,i)}function N(){x.apply(this,arguments)}require("../validator/MaxLengthRule"),require("../validator/MaxRule"),require("../validator/MinRule"),require("../validator/RequiredRule"),require("../validator/PatternRule");var K=require("inf-i18n"),x=require("../Extension"),P=require("../lib"),_=require("../controlHelper"),O=require("../main"),T=require("../Table"),S=require("../validator/ValidityState"),w=require("../validator/Validity"),R=['<div class="${optClass}">','<div id="${inputFieldId}"></div>','<div data-ui="id:${labelId};type:Label;hidden:true;" class="${noteClass}"></div>','<div data-ui="id:${okId};type:Button;skin:ok">${okText}</div>','<div data-ui="id:${cancelId};type:Button;skin:cancel">',"${cancelText}","</div>","</div>",'<div class="${errorClass}" id="${errorId}"></div>'].join(""),k="ctrl-table-editor-inputField",Q="ctrl-table-editor-note",V="ctrl-table-editorInput",U="ctrl-table-editor-validityLabel",W="ctrl-table-editor-ok",z="ctrl-table-editor-cancel",Y="ctrl-table-editor-error",X=K("确定"),j=K("取消"),Z='<input data-ui="type:TextBox;id:${inputId}"/>',q='<label data-ui="type:Validity;id:${validId}"></label>',$=-1,ee=-1,te=0,ie=null,ne=null,re=null,ae=null,oe=null,se=null,le=null,ue=1,Ae=null,Be='<div class="${className}" data-row="${row}" data-col="${col}"></div>';return N.prototype.type="TableEdit",N.prototype.activate=function(){var e=this.target;if(e instanceof T)e.startEdit=v,e.cancelEdit=y,e.hideEditLayer=J,e.showEditError=L,e.addRowBuilders([{index:3,getColHtml:M}]),e.addHandlers("click",{handler:I,matchFn:_.getPartClasses(e,"cell-editentry")[0]}),e.on("enddrag",h),e.on("resize",E),x.prototype.activate.apply(this,arguments)},N.prototype.inactivate=function(){var e=this.target;if(e instanceof T)delete e.startEdit,delete e.cancelEdit,e.un("enddrag",h),e.un("resize",E),a(e),x.prototype.inactivate.apply(this,arguments)},P.inherits(N,x),O.registerExtension(N),N}),define("esui/extension/CustomData",["require","../Extension","../main","../lib"],function(require){function e(){t.apply(this,arguments)}var t=require("../Extension");e.prototype.type="CustomData";var i=/^data[A-Z0-9]/;return e.prototype.activate=function(){t.prototype.activate.apply(this,arguments);var e=this.target.data;if("object"!=typeof e)e=require("../main").parseAttribute(this.target.data);for(var n in this.target)if(this.target.hasOwnProperty(n)&&i.test(n)){var r=n.charAt(4).toLowerCase()+n.slice(5);e[r]=this.target[n]}this.target.getData=function(t){return e[t]},this.target.setData=function(t,i){e[t]=i}},e.prototype.inactivate=function(){t.prototype.inactivate.apply(this,arguments),delete this.target.getData,delete this.target.setData},require("../lib").inherits(e,t),require("../main").registerExtension(e),e}),define("esui/extension/Command",["require","underscore","../lib","../Extension","mini-event","../main"],function(require){function e(e){if(e=e||{},!e.events)e.events=["click"];else e.events=i.splitTokenList(e.events);n.apply(this,arguments)}var t=require("underscore"),i=require("../lib"),n=require("../Extension");return e.prototype.type="Command",e.prototype.handleCommand=function(e){for(var t=e.target,i=this.main&&this.main.parentNode;t&&t!==i;){if(1===t.nodeType&&(t.disabled!==!0||"click"!==e.type)){var n=t.getAttribute("data-command");if(n){var r=t.getAttribute("data-command-args"),a=require("mini-event").fromDOMEvent(e,"command",{name:n,triggerType:e.type,args:r});if(a=this.fire("command",a),a.isPropagationStopped())return}}t=t.parentNode}},e.prototype.activate=function(){for(var e=0;e<this.events.length;e++)this.target.helper.addDOMEvent(this.target.main,this.events[e],this.handleCommand);n.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){for(var e=0;e<this.events.length;e++)this.target.helper.removeDOMEvent(this.target.main,this.events[e],this.handleCommand);n.prototype.inactivate.apply(this,arguments)},e.createDispatcher=function(e){var n=e;if(t.isArray(e)){n={};for(var r=0;r<e.length;r++){var a=e[r],o=a.triggerType?a.triggerType+":"+a.name:a.name;n[o]=a.handler}}return function(e){var t=n[e.triggerType+":"+e.name];if(!t)t=n[e.name];if(!t){var r="execute"+i.pascalize(e.name)+i.pascalize(e.triggerType);t=this[r]}if("function"!=typeof t){var r="execute"+i.pascalize(e.name);t=this[r]}if("function"!=typeof t)t=n[e.triggerType+":*"];if(!t)t=n["*"];if("function"==typeof t)t.apply(this,arguments)}},i.inherits(e,n),require("../main").registerExtension(e),e}),define("esui/extension/AutoSort",["require","underscore","../Table","../Extension","../lib","../main"],function(require){function e(){r.apply(this,arguments)}function t(e){function t(t,i){var r=n(t,i);return"asc"===e.order?r:-r}var n=e.field.comparer;if(!n){var r=e.field.field;n=function(e,t){if(r)e=e[r],t=t[r];return i.isString(e)&&i.isString(t)?e.localeCompare(t):e-t}}var a=this.datasource;a.sort(t),this.setDatasource(a)}var i=require("underscore"),n=require("../Table"),r=require("../Extension");return e.prototype.type="AutoSort",e.prototype.activate=function(){if(this.target instanceof n)this.target.on("sort",t),r.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){if(this.target instanceof n)this.target.un("sort",t),r.prototype.inactivate.apply(this,arguments)},require("../lib").inherits(e,r),require("../main").registerExtension(e),e}),define("esui/Wizard",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){a.apply(this,arguments)}function t(e,t,i){var n=t&&t.panel&&r.g(t.panel);if(n){var a=i?"removePartClasses":"addPartClasses";e.helper[a]("panel-hidden",n)}}function i(e){for(var i="",n=0;n<e.steps.length;n++){var r=e.steps[n],a=e.helper.getPartClasses("node");if(0===n)a.push.apply(a,e.helper.getPartClasses("node-first"));if(n===e.steps.length-1&&!e.finishText)a.push.apply(a,e.helper.getPartClasses("node-last"));if(n===e.activeIndex-1)a.push.apply(a,e.helper.getPartClasses("node-active-prev"));if(n<=e.activeIndex-1)a.push.apply(a,e.helper.getPartClasses("node-done"));var o=n===e.activeIndex;if(t(e,r,o),o)if(a.push.apply(a,e.helper.getPartClasses("node-active")),n===e.steps.length-1)a.push.apply(a,e.helper.getPartClasses("node-last-active"));i+='<li class="'+a.join(" ")+'">',i+=e.getNodeHTML(r),i+="</li>"}if(e.finishText){var a=[].concat(e.helper.getPartClasses("node"),e.helper.getPartClasses("node-last"),e.helper.getPartClasses("node-finish"),e.activeIndex===e.steps.length?e.helper.getPartClasses("node-active"):[]);i+='<li class="'+a.join(" ")+'">',i+="<span>"+e.finishText+"</span>",i+="</li>"}return i}var n=require("underscore"),r=require("./lib"),a=require("./Control");e.prototype.type="Wizard",e.prototype.createMain=function(){return document.createElement("ol")},e.prototype.initOptions=function(e){var t={steps:[],activeIndex:0},i=r.getChildren(this.main);if(!e.steps&&i.length)t.steps=n.map(i,function(e){var t={text:r.getText(e)},i=e.getAttribute("data-for");if(i)t.panel=i;return t});if(n.extend(t,e),"string"==typeof t.activeIndex)t.activeIndex=+t.activeIndex;this.setProperties(t)},e.prototype.nodeTemplate="<span>${text}</span>",e.prototype.getNodeHTML=function(e){return r.format(this.nodeTemplate,{text:r.encodeHTML(e.text)})};var o=require("./painters");return e.prototype.repaint=o.createRepaint(a.prototype.repaint,{name:["steps","finishText"],paint:function(e){e.main.innerHTML=i(e)}},{name:"activeIndex",paint:function(e,i){if(e.helper.isInStage("RENDERED"))for(var n=e.main.getElementsByTagName("li"),r=n.length-1;r>=0;r--){var a=r===e.activeIndex;t(e,e.steps[r],a);var o=n[r],s=a?"addPartClasses":"removePartClasses";if(e.helper[s]("node-active",o),r===e.steps.length-1)e.helper[s]("node-last-active",o);var l=r<=e.activeIndex-1,s=l?"addPartClasses":"removePartClasses";e.helper[s]("node-done",o);var u=r===e.activeIndex-1,s=u?"addPartClasses":"removePartClasses";e.helper[s]("node-active-prev",o)}}}),e.prototype.setProperties=function(e){if(e.hasOwnProperty("steps")){if(e.hasOwnProperty("activeIndex"))this.activeIndex=e.activeIndex,delete e.activeIndex;else this.activeIndex=0;if(e.hasOwnProperty("finishText"))this.finishText=e.finishText,delete e.finishText}var t=a.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("steps")||t.hasOwnProperty("activeIndex"))this.fire("enter")},e.prototype.getActiveStep=function(){return this.get("steps")[this.get("activeIndex")]},e.prototype.stepNext=function(){var e=this.finishText?this.steps.length:this.steps.length-1;if(this.activeIndex<e)this.set("activeIndex",this.activeIndex+1)},e.prototype.stepPrevious=function(){if(this.activeIndex>0)this.set("activeIndex",this.activeIndex-1)},require("./main").register(e),r.inherits(e,a),e}),define("esui/Tree",["require","./Control","./lib","./controlHelper","underscore","./TreeStrategy","./main"],function(require){function e(){h.apply(this,arguments)}function t(){C.apply(this,arguments)}function i(e,t,i,n,r){var a=r-n,o=0===a?"current":1===a?"previous":"far-previous",s=[].concat(d.getPartClasses(e,"node-indicator"),d.getPartClasses(e,"node-indicator-"+i),d.getPartClasses(e,"node-indicator-level-"+n),d.getPartClasses(e,"node-indicator-"+o)),l=0===a?E[i||"collapsed"]:"第"+n+"级",u="<span ";if(0===a)u+='id="'+d.getId(e,"indicator-"+t.id)+'" ';return u+='class="'+s.join(" ")+'">'+l+"</span>"}function n(e,t,n,r){var o=d.getPartClasses(e,"content-wrapper");if(e.selectedNodeIndex[t.id])o=o.concat(d.getPartClasses(e,"content-wrapper-selected"));o=o.join(" ");for(var s=d.getId(e,"content-wrapper-"+t.id),l='<div id="'+s+'" class="'+o+'">',u=e.strategy.isLeafNode(t)?"empty":r?"expanded":"collapsed",A=0;n>=A;A++)l+=i(e,t,u,A,n);var B=d.getPartClasses(e,"item-content");if(l+='<div class="'+B.join(" ")+'">'+e.getItemHTML(t)+"</div>",l+="</div>",r&&!e.strategy.isLeafNode(t)){var c=[].concat(d.getPartClasses(e,"sub-root"),d.getPartClasses(e,"sub-root-"+u));l+='<ul class="'+c.join(" ")+'">';for(var A=0;A<t.children.length;A++){var C=t.children[A];l+=a(e,C,n+1,e.strategy.shouldExpand(C))}l+="</ul>"}return l}function r(e,t,i,n){var r=e.strategy.isLeafNode(t)?"empty":n?"expanded":"collapsed",a=[].concat(d.getPartClasses(e,"node"),d.getPartClasses(e,"node-"+r),d.getPartClasses(e,"node-level-"+i));if(t===e.datasource)a=[].concat(d.getPartClasses(e,"root"),d.getPartClasses(e,"root-"+r),a);return a}function a(e,t,i,a,o){o=o||"li";var s=r(e,t,i,a),l="<"+o+' class="'+s.join(" ")+'" id="'+d.getId(e,"node-"+t.id)+'" data-id="'+t.id+'" data-level="'+i+'">';return l+=n(e,t,i,a),l+="</"+o+">"}function o(e){var t=e.target,i=d.getPartClasses(this,"node-indicator")[0],n=D.hasClass(t,i),r=!n;if(!n){for(var a=d.getPartClasses(this,"content-wrapper")[0];t&&t!==this.main&&!D.hasClass(t,a);)t=t.parentNode;if(D.hasClass(t,a))n=this.wideToggleArea,r=r&&!0}if(n||r){for(;t&&t!==this.main&&!D.hasAttribute(t,"data-id");)t=t.parentNode;var o=t.getAttribute("data-id");if(n)this.triggerToggleStrategy(o);if(r)this.triggerSelectStrategy(o)}}function s(e,t){if(t=t||{},t[e.id]=e,e.children)for(var i=0;i<e.children.length;i++)s(e.children[i],t);return t}function l(e,t){if(e.selectedNodeIndex[t.id])return!1;else return e.selectedNodes.push(t),e.selectedNodeIndex[t.id]=t,!0}function u(e,t){if(e.selectedNodeIndex[t.id]){delete e.selectedNodeIndex[t.id];for(var i=0;i<e.selectedNodes.length;i++)if(e.selectedNodes[i]===t)e.selectedNodes.splice(i,1);return!0}return!1}function A(e,t,i){if(i.force||e.allowUnselectNode){var n=e.nodeIndex[t];if(n){var r=u(e,n);if(r){if(i.modifyDOM){var a=D.g(d.getId(e,"content-wrapper-"+t));d.removePartClasses(e,"content-wrapper-selected",a)}if(!i.silent)e.fire("unselectnode",{node:n}),e.fire("selectionchange")}}}}function B(e,t){var i=d.getPartClasses(e,"node-empty")[0];return D.hasClass(t,i)}function c(e,t){var i=d.getPartClasses(e,"node-expanded")[0];return D.hasClass(t,i)}var C=require("./Control"),D=require("./lib"),d=require("./controlHelper"),f=require("underscore"),h=require("./TreeStrategy");e.prototype.attachTo=function(){},D.inherits(e,h),t.prototype.type="Tree",t.defaultProperties={selectMode:"single",hideRoot:!1},t.prototype.initOptions=function(i){var n={datasource:{},strategy:new e,selectedNodes:[],selectedNodeIndex:{}},r=D.extend(n,t.defaultProperties,i);if(null==r.allowUnselectNode)r.allowUnselectNode="single"!==r.selectMode;this.setProperties(r)},t.prototype.itemTemplate="<span>${text}</span>",t.prototype.getItemHTML=function(e){var t={id:D.encodeHTML(e.id),text:D.encodeHTML(e.text)};return D.format(this.itemTemplate,t)};var E={collapsed:"展开",expanded:"收起",busy:"加载中",empty:"无内容"};return t.prototype.clickNode=function(e){o.apply(this,arguments)},t.prototype.initStructure=function(){this.strategy.attachTo(this)},t.prototype.initEvents=function(){d.addDOMEvent(this,this.main,"click",this.clickNode)},t.prototype.removeNodeFromIndex=function(e){var t=this.nodeIndex[e];if(t)if(this.nodeIndex[e]=void 0,t.children)f.each(t.children,this.removeNodeFromIndex,this)},t.prototype.repaint=d.createRepaint(C.prototype.repaint,{name:"datasource",paint:function(e,t){e.selectedNodes=[],e.selectedNodeIndex={},e.nodeIndex=s(t),e.main.innerHTML=a(e,t,0,!0,"div")}},{name:"hideRoot",paint:function(e,t){var i=t?"addState":"removeState";e[i]("hide-root")}}),t.prototype.triggerSelectStrategy=function(e){var t=this.nodeIndex[e];if(t)if(this.selectedNodeIndex[e])this.fire("unselect",{node:t});else this.fire("select",{node:t})},t.prototype.getSelectedNodes=function(){
return this.selectedNodes.slice()},t.prototype.toggleNodeSelection=function(e){var t=this.selectedNodeIndex[e]?"unselectNode":"selectNode";this[t](e)},t.prototype.selectNode=function(e,t){var i=this.nodeIndex[e];if(i){var n=l(this,i);if(n){if("single"===this.selectMode&&this.selectedNodes.length>1)A(this,this.selectedNodes[0].id,{force:!0,silent:!0,modifyDOM:!0});var r=D.g(d.getId(this,"content-wrapper-"+e));if(d.addPartClasses(this,"content-wrapper-selected",r),!t)this.fire("selectnode",{node:i}),this.fire("selectionchange")}}},t.prototype.unselectNode=function(e,t){A(this,e,{force:!0,silent:t,modifyDOM:!0})},t.prototype.expandNode=function(e,t){var i=D.g(d.getId(this,"node-"+e));if(i){var a=+D.getAttribute(i,"data-level");if(t||"ul"!==i.lastChild.nodeName.toLowerCase()){var o=this.nodeIndex[e];if(!o)return;if(t){if(o.children)for(var l=0;l<o.children.length;l++)A(this,o.children[l].id,{force:!0,silent:!0,modifyDOM:!1}),this.removeNodeFromIndex(o.children[l].id);o.children=t,s(o,this.nodeIndex)}i.innerHTML=n(this,o,a,!0)}else{var u=D.g(d.getId(this,"indicator-"+e));u.innerHTML=E.expanded;var B=[].concat(d.getPartClasses(this,"node-indicator"),d.getPartClasses(this,"node-indicator-level-"+a),d.getPartClasses(this,"node-indicator-current"),d.getPartClasses(this,"node-indicator-expanded"));u.className=B.join(" ");var c=[].concat(d.getPartClasses(this,"sub-root"),d.getPartClasses(this,"sub-root-expanded"));i.lastChild.className=c.join(" ")}var o=this.nodeIndex[e],C=r(this,o,a,!0);i.className=C.join(" ")}},t.prototype.collapseNode=function(e,t){var i=D.g(d.getId(this,"node-"+e));if(i){var n=this.nodeIndex[e],a=i.getElementsByTagName("ul")[0];if(a)if(t){if(a.parentNode.removeChild(a),n.children)for(var o=0;o<n.children.length;o++)A(this,n.children[o].id,{force:!0,silent:!1,modifyDOM:!1})}else{var s=[].concat(d.getPartClasses(this,"sub-root"),d.getPartClasses(this,"sub-root-collapsed"));a.className=s.join(" ")}var l=+D.getAttribute(i,"data-level"),u=r(this,n,l,!1);i.className=u.join(" ");var B=D.g(d.getId(this,"indicator-"+e)),c=[].concat(d.getPartClasses(this,"node-indicator"),d.getPartClasses(this,"node-indicator-level-"+l),d.getPartClasses(this,"node-indicator-current"),d.getPartClasses(this,"node-indicator-collapsed"));B.className=c.join(" "),B.innerHTML=E.collapsed}},t.prototype.toggleNode=function(e,t,i){if(this.nodeIndex[e]){var n=D.g(d.getId(this,"node-"+e));if(n)if(!B(this,n))if(c(this,n))this.collapseNode(e,i);else this.expandNode(e,t)}},t.prototype.triggerToggleStrategy=function(e){var t=this.nodeIndex[e];if(t){var i=D.g(d.getId(this,"node-"+e));if(i)if(!B(this,i))if(c(this,i))this.fire("collapse",{node:t});else this.fire("expand",{node:t})}},t.prototype.indicateNodeLoading=function(e){var t=D.g(d.getId(this,"node-"+e));if(t){for(var i=D.getChildren(t),n=0;!this.helper.isPart(i[n],"item-content");)n++;var r=i[n];r.innerHTML=E.busy;var a=[].concat(d.getPartClasses(this,"node-indicator"),d.getPartClasses(this,"node-indicator-level-"+n),d.getPartClasses(this,"node-indicator-current"),d.getPartClasses(this,"node-indicator-busy"));r.className=a.join(" ")}},t.prototype.dispose=function(){C.prototype.dispose.apply(this,arguments),this.nodeIndex=null,this.selectedNodes=null,this.selectedNodeIndex=null},require("./main").register(t),D.inherits(t,C),t}),define("esui/Toast",["require","./lib","./Control","./painters","./main"],function(require){function e(e){r.apply(this,arguments)}function t(){var e=require("./main").getConfig("uiClassPrefix"),t=e+"-toast-collection-area",i=document.getElementById(t);if(!i)i=document.createElement("div"),i.id=t,this.helper.addPartClasses("collection-area",i),document.body.appendChild(i);return i}function i(i){return function(a,o){if("show"===i)i="normal";o=n.extend({content:a},o),o.messageType=o.messageType||i;var s=new e(o);return r.prototype.hide.apply(s),s.appendTo(t.call(s)),s}}var n=require("./lib"),r=require("./Control");e.defaultProperties={duration:3e3,messageType:"normal",disposeOnHide:!0,autoShow:!1},e.prototype.type="Toast",e.prototype.initOptions=function(t){var i={};if(n.extend(i,e.defaultProperties,t),null==i.content)i.content=this.main.innerHTML;this.setProperties(i)},e.prototype.initStructure=function(){this.main.innerHTML=this.helper.getPartHTML("content","p"),this.addState("hidden")},e.prototype.repaint=require("./painters").createRepaint(r.prototype.repaint,{name:"content",paint:function(e,t){var i=e.main.firstChild;if(i.innerHTML=t,e.autoShow&&e.helper.isInStage("INITED"))e.show()}},{name:"messageType",paint:function(e,t){e.helper.addPartClasses(e.messageType)}}),e.prototype.show=function(){if(!this.helper.isInStage("DISPOSED")){if(!(this.main.parentElement||this.main.parentNode&&this.main.parentNode.tagName))this.appendTo(t.call(this));if(this.isHidden())if(r.prototype.show.apply(this,arguments),this.fire("show"),clearTimeout(this.timer),!isNaN(this.duration)&&this.duration!==1/0)this.timer=setTimeout(n.bind(this.hide,this),this.duration)}},e.prototype.hide=function(){if(!this.isHidden())if(r.prototype.hide.apply(this,arguments),clearTimeout(this.timer),this.fire("hide"),this.disposeOnHide)this.dispose()},e.prototype.dispose=function(){if(clearTimeout(this.timer),!this.helper.isInStage("DISPOSED"))n.removeNode(this.main),r.prototype.dispose.apply(this,arguments)};var a=["show","info","alert","error","success"];for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];e[s]=i(s)}return n.inherits(e,r),require("./main").register(e),e}),define("esui/TipLayer",["require","./Button","./Label","./Panel","underscore","./lib","./controlHelper","./Control","./main","./painters"],function(require){function e(e){B.apply(this,arguments)}function t(e){var t=e.main;if(t){for(var i,n=u.getChildren(t),r=n.length,a={};r--;)if(i=n[r].getAttribute("data-role"))a[i]=n[r];e.roles=a}}function i(e,t){if(t)e.title=t.innerHTML;else if(t=document.createElement("h3"),e.main.firstChild)u.insertBefore(t,e.main.firstChild);else e.main.appendChild(t);var i=[].concat(A.getPartClasses(e,"title"));u.addClasses(t,i);var n={main:t,childName:"title"},r=c.create("Label",n);return r.render(),e.addChild(r),r}function n(e,t,i){if(i)e.content=i.innerHTML;else if(i=document.createElement("div"),"body"===t){var n=e.getChild("title");if(n)u.insertAfter(i,n.main);else if(e.main.firstChild)u.insertBefore(i,n,e.main.firstChild);else e.main.appendChild(i)}else e.main.appendChild(i);u.addClasses(i,A.getPartClasses(e,t+"-panel"));var r={main:i,renderOptions:e.renderOptions},a=c.create("Panel",r);return a.render(),e.addChild(a,t),a}function r(e,t,i){if(e.isShow)e.autoPosition(t,i)}function a(e,t,i,n){if(t=t||D)clearTimeout(e.showTimeout),clearTimeout(e.hideTimeout),e.showTimeout=setTimeout(u.bind(e.show,e,i,n),t);else e.show(i,n)}function o(e,t){t=t||d,clearTimeout(e.showTimeout),clearTimeout(e.hideTimeout),e.hideTimeout=setTimeout(u.bind(e.hide,e),t)}function s(e,t){if("string"==typeof t)t=e.viewContext.get(t);return t.main}require("./Button"),require("./Label"),require("./Panel");var l=require("underscore"),u=require("./lib"),A=require("./controlHelper"),B=require("./Control"),c=require("./main"),C=require("./painters"),D=0,d=150;return e.prototype={constructor:e,type:"TipLayer",initOptions:function(e){t(e);var i={roles:{}};u.extend(i,e),this.setProperties(i)},initStructure:function(){var e=this.main;if(e.parentNode&&"body"!==e.parentNode.nodeName.toLowerCase())document.body.appendChild(e);if(this.main.style.left="-10000px",this.helper.addStateClasses("init"),this.title||this.roles.title)i(this,this.roles.title);if(n(this,"body",this.roles.content),this.foot||this.roles.foot)n(this,"foot",this.roles.foot);if(this.arrow){var t=document.createElement("div");t.id=A.getId(this,"arrow"),t.className=A.getPartClasses(this,"arrow").join(" "),this.main.appendChild(t)}},repaint:A.createRepaint(B.prototype.repaint,C.style("width"),{name:"title",paint:function(e,t){var n=e.getHead();if(null==t){if(n)e.removeChild(n)}else{if(!n)n=i(e);n.setText(t)}}},{name:"content",paint:function(e,t){var i='<div class="${class}" id="${id}">${content}</div>',n=e.getBody(),r=A.getId(e,"body"),a=A.getPartClasses(e,"body"),o={"class":a.join(" "),id:r,content:t};n.setContent(u.format(i,o))}},{name:"foot",paint:function(e,t){var i='<div class="${class}" id="${id}">${content}</div>',r=A.getId(e,"foot"),a=A.getPartClasses(e,"foot"),o=e.getFoot();if(null==t){if(o)e.removeChild(o)}else{var s={"class":a.join(" "),id:r,content:t};if(!o)o=n(e,"foot");o.setContent(u.format(i,s))}}},{name:["targetDOM","targetControl","showMode","positionOpt","delayTime","showDuration"],paint:function(e,t,i,n,r,a,o){var s={targetDOM:t,targetControl:i,showMode:n,delayTime:a||D,showDuration:o||d};if(r)r=r.split("|"),s.positionOpt={top:r[0]||"top",right:r[1]||"left"};e.attachTo(s)}}),autoPosition:function(e,t){var i=this,n=this.main;if(t=t||{left:"right",top:"top"},e){var r=e.getBoundingClientRect(),a=u.getOffset(e),o={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.right-r.left,height:r.bottom-r.top},s=n.style.display;n.style.display="block",this.helper.removeStateClasses("init");var B=n.offsetHeight,c=n.offsetWidth;n.style.display="none";var C=l.omit(t,"targetControl"),D=u.page.getViewWidth(),d=u.page.getViewHeight(),f=o.left-c,h=D-o.right-c,E=d-o.top-B,p=o.bottom-B;if(!C.center){if(f>=0)if(h>=0){if(!C.right&&!C.left)if(f>h)C.left="right",C.right=null;else C.right="left",C.left=null}else C.left="right",C.right=null;else C.right="left",C.left=null;if(E>=0)if(p>=0){if(!C.bottom&&!C.top)if(E>p)C.top="top",C.bottom=null;else C.bottom="bottom",C.top=null}else C.top="top",C.bottom=null;else C.bottom="bottom",C.top=null}var F,m={};if(C.center){if(m.left=a.left-(c-r.width)/2,"top"===C.center)F="tc",m.top=a.top-r.height-B;else if("bottom"===C.center)F="bc",m.top=a.top+r.height+11}else{if(C.right)if(m.left=a.right,C.top)F="lt";else F="lb";else if(C.left)if(m.left=a.left-c,C.top)F="rt";else F="rb";if(C.top)m.top=a.top-(B-r.height)/2;else if(C.bottom)m.top=a.bottom-B}n.style.display=s,n.className=""+A.getPartClasses(i).join(" ")+" "+A.getPartClasses(i,F).join(" ");var g=u.g(A.getId(i,"arrow"));if(g)g.className=""+A.getPartClasses(i,"arrow").join(" ")+" "+A.getPartClasses(i,"arrow-"+F).join(" ");i.renderLayer(n,m)}},renderLayer:function(e,t){var i=u.clone(t||{});if(i.hasOwnProperty("top")&&i.hasOwnProperty("bottom"))i.height=i.bottom-i.top,delete i.bottom;if(i.hasOwnProperty("left")&&i.hasOwnProperty("right"))i.width=i.right-i.left,delete i.right;if(i.hasOwnProperty("top")||i.hasOwnProperty("bottom"))e.style.top="",e.style.bottom="";if(i.hasOwnProperty("left")||i.hasOwnProperty("right"))e.style.left="",e.style.right="";for(var n in i)if(i.hasOwnProperty(n))e.style[n]=i[n]+"px"},attachTo:function(e){var t,i=e.showMode||"over";if(e.targetDOM)t=u.g(e.targetDOM);else if(e.targetControl)t=s(this,e.targetControl);if(t)switch(i){case"auto":this.initAutoMode(e);break;case"over":this.initOverMode(e),A.addDOMEvent(this,t,"mouseout",u.curry(o,this,150));break;case"click":if(this.initClickMode(e),!e.disableClickAutoHide)A.addDOMEvent(this,t,"mouseout",u.curry(o,this,150))}},getInitHandlers:function(e){var t,i=this;if(e.targetDOM)t=u.g(e.targetDOM);else if(e.targetControl)t=s(this,e.targetControl);if(t){var n={targetElement:t,layer:{show:u.curry(a,i,e.delayTime,t,e.positionOpt),hide:u.curry(o,i),bind:function(e,r){e=e||"mouseup",A.addDOMEvent(i,t,e,function(e){if(n.layer.show(),n.clickOutsideHide.bind(),"function"==typeof r)r();e.stopPropagation()})}},clickOutsideHide:{preventPopMethod:function(e){e.stopPropagation()},method:function(){n.layer.hide(),n.clickOutsideHide.unbind()},bind:function(){A.addDOMEvent(i,document.documentElement,"mouseup",n.clickOutsideHide.method),A.addDOMEvent(i,i.main,"mouseup",n.clickOutsideHide.preventPopMethod)},unbind:function(){A.removeDOMEvent(i,document.documentElement,"mouseup",n.clickOutsideHide.method),A.removeDOMEvent(i,i.main,"mouseup",n.clickOutsideHide.preventPopMethod)}}};return n}},initAutoMode:function(e){var t=this.getInitHandlers(e);if(t.layer.show(),!e.showDuration)t.clickOutsideHide.bind(),t.layer.bind("mouseup");else setTimeout(function(){t.layer.hide(e.showDuration),t.layer.bind("mouseup")},e.delayTime)},initClickMode:function(e){var t=this.getInitHandlers(e);t.layer.bind("mouseup")},initOverMode:function(e){var t=this.getInitHandlers(e);t.layer.bind("mouseover"),A.addDOMEvent(this,t.targetElement,"mouseup",function(e){e.stopPropagation()}),A.addDOMEvent(this,this.main,"mouseover",u.bind(this.show,this,t.targetElement,e.positionOpt)),A.addDOMEvent(this,this.main,"mouseout",u.curry(o,this,150))},getHead:function(){return this.getChild("title")},getBody:function(){return this.getChild("body")},getFoot:function(){return this.getChild("foot")},show:function(e,t){if(A.isInStage(this,"INITED"))this.render();else if(A.isInStage(this,"DISPOSED"))return;if(clearTimeout(this.hideTimeout),A.addDOMEvent(this,window,"resize",u.curry(r,this,e,t)),this.main.style.zIndex=A.layer.getZIndex(e),this.removeState("hidden"),this.autoPosition(e,t),!this.isShow)this.isShow=!0,this.fire("show")},hide:function(){if(this.isShow)this.isShow=!1,this.addState("hidden"),this.fire("hide")},setTitle:function(e){this.setProperties({title:e})},setContent:function(e){this.setProperties({content:e})},setFoot:function(e){this.setProperties({foot:e})},dispose:function(){if(!A.isInStage(this,"DISPOSED")){this.hide();var e=this.main.id;u.removeNode(e),B.prototype.dispose.apply(this,arguments)}}},e.onceNotice=function(e){function t(e){var t=e.onok,i="function"==typeof t;if(i)t(e);e.fire("ok"),e.dispose()}var i="tipLayer-once-notice",n="tipLayer-notice-ok",r=u.encodeHTML(e.content)||"",a={type:"onceNotice",skin:"onceNotice",arrow:!0};u.extend(a,e);var o=document.createElement("div");document.body.appendChild(o);var s=A.getGUID(i);a.id=s,a.main=o,a.type=null;var l=c.create("TipLayer",a);l.setContent(r);var B=e.okText||"知道了";l.setFoot('<div data-ui="type:Button;childName:okBtn;id:'+s+"-"+n+';width:50;"class="'+A.getPartClasses(l,"once-notice")+'">'+B+"</div>"),l.render();var C=l.getFoot().getChild("okBtn");return C.on("click",u.curry(t,l,"ok")),l.attachTo({targetDOM:e.targetDOM,targetControl:e.targetControl,showMode:"auto",positionOpt:{top:"top",right:"left"}}),l},u.inherits(e,B),c.register(e),e}),define("esui/Tip",["require","underscore","./Control","./main","./TipLayer","./painters","./lib"],function(require){function e(e){n.apply(this,arguments)}function t(e,t){t.title=t.title||e.getAttribute("title"),e.removeAttribute("title"),t.content=t.content||e.innerHTML,e.innerHTML=""}var i=require("underscore"),n=require("./Control"),r=require("./main");return require("./TipLayer"),e.prototype.type="Tip",e.prototype.initOptions=function(e){var n={title:"",content:"",arrow:!0,showMode:"over",delayTime:500,showDuration:0};if("false"===e.arrow)e.arrow=!1;t(this.main,n),i.extend(n,e),this.setProperties(n)},e.prototype.initStructure=function(){var e=document.createElement("div");document.body.appendChild(e);var t=r.create("TipLayer",{main:e,childName:"layer",content:this.content,title:this.title,arrow:this.arrow,width:this.layerWidth||200,viewContext:this.viewContext});if(this.addChild(t),t.render(),this.positionOpt)try{this.positionOpt=JSON.parse(this.positionOpt)}catch(i){}var n={showMode:this.showMode,delayTime:+this.delayTime,showDuration:+this.showDuration,targetControl:this,positionOpt:this.positionOpt||{top:"top",right:"left"}};if(this.disableClickAutoHide)n.disableClickAutoHide=!0;t.attachTo(n)},e.prototype.repaint=require("./painters").createRepaint(n.prototype.repaint,{name:"title",paint:function(e,t){var i=e.getChild("layer");if(i)i.setTitle(t)}},{name:"content",paint:function(e,t){var i=e.getChild("layer");if(i)i.setContent(t)}}),require("./lib").inherits(e,n),r.register(e),e}),define("esui/TextLine",["require","underscore","./lib","./InputControl","./main","./TextBox","./painters"],function(require){function e(e){o.apply(this,arguments)}function t(e){var t='<textarea wrap="off" id="'+e.helper.getId("text")+'"</textarea>',i=[e.helper.getPartBeginTag("num-line","div"),"1",e.helper.getPartEndTag("num-line","div"),e.helper.getPartBeginTag("text-container","div"),t,e.helper.getPartEndTag("text-container","div")];return i.join("")}function i(e){if("input"===e.type||"value"===e.propertyName)n.call(this)}function n(){var e=this.helper.getPart("text").value.split("\n").length;if(e!==this.number){this.number=e;var t=this.helper.getPart("num-line");t.innerHTML=r.range(1,e+1).join("<br />")}this.resetScroll(),this.fire("change")}var r=require("underscore"),a=require("./lib"),o=require("./InputControl"),s=require("./main");return require("./TextBox"),e.prototype={type:"TextLine",initOptions:function(e){var t={width:300,height:200,value:""};if(a.isInput(this.main))this.helper.extractOptionsFromInput(this.main,t);if(r.extend(t,e),!t.hasOwnProperty("title")&&this.main.title)t.title=this.main.title;this.setProperties(t)},initStructure:function(){if(a.isInput(this.main))this.helper.replaceMain();this.main.innerHTML=t(this),this.helper.initChildren()},initEvents:function(){var e=this.helper.getPart("text"),t="oninput"in e?"input":"propertychange";this.helper.addDOMEvent(e,t,i),this.helper.addDOMEvent(e,"scroll",this.resetScroll)},repaint:require("./painters").createRepaint(o.prototype.repaint,{name:"height",paint:function(e,t){t=t||300;var i=e.helper.getPart("num-line");i.style.height=t+"px",e.main.style.height=t+"px"}},{name:"width",paint:function(e,t){t=t||300,e.main.style.width=t+"px"}},{name:"rawValue",paint:function(e,t){var a=e.helper.getPart("text");if(t){if(r.isArray(t))e.value=r.unescape(t.join("\n"));else if("string"==typeof t)e.value=r.unescape(t);var o="oninput"in a?"input":"propertychange";e.helper.removeDOMEvent(a,o,i),a.value=e.value,e.helper.addDOMEvent(a,o,i),n.call(e)}}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=e.helper.getPart("text");n.disabled=!!t,n.readOnly=!!i}}),resetScroll:function(){var e=this.helper.getPart("text"),t=this.helper.getPart("num-line");t.style.height=e.clientHeight+"px",t.scrollTop=e.scrollTop},stringifyValue:function(e){return e.join("\n")},parseValue:function(e){return a.trim(e.replace(/\n{2,}/g,"\n")).split("\n")},getRawValue:function(){return r.unique(this.getValueRepeatableItems())},getValueRepeatableItems:function(){var e=this.helper.getPart("text").value,t=e.split("\n");return r.chain(t).map(a.trim).compact().value()},getRowsNumber:function(){var e=this.getValue().split("\n");return e.length},addLines:function(e){var t=e.join("\n"),i=this.getValue();if(i.length>0)t=i+"\n"+t;this.setRawValue(t)}},a.inherits(e,o),s.register(e),e}),define("esui/Table",["require","inf-i18n","underscore","./lib","./controlHelper","./Control","./main"],function(require){function e(e){var t={followHeightArr:[0,0],followWidthArr:[],handlers:[]};Oe.call(this,xe.extend({},e,t))}function t(e){return!("undefined"==typeof e||null===e)}function i(e){return!t(e)||!e.toString().length}function n(e,t,i){Pe.setAttribute(e,"data-"+t,i)}function r(e,t){return Pe.getAttribute(e,"data-"+t)}function a(e,t){var i=Pe.getStyle(e,t);return""===i?0:parseInt(i,10)||0}function o(e,t){return _e.getId(e,t)}function s(e,t){return _e.getPartClasses(e,t).join(" ")}function l(e){return Pe.g(o(e,"head"))}function u(e){return Pe.g(o(e,"body"))}function A(e){return Pe.g(o(e,"foot"))}function B(e,t){return Pe.g(o(e,"row")+t)}function c(e){return Pe.g(o(e,"select-all"))}function C(e,t){e.selectedIndex=t;for(var i={},n=t.length-1;n>=0;n--)i[t[n]]=1;e.selectedIndexMap=i}function D(e,t){if(e.selectedIndexMap)return!!e.selectedIndexMap[t];else return!1}function d(e){for(var t=0,i=e.realFields,n=e.minColsWidth,r=0,a=i.length;a>r;r++){var o=i[r];t+=o.width||n[r]}return t}function f(e){if(e.width)return e.width;var t=document.createElement("div"),i=e.main.parentNode;i.appendChild(t);var n=t.offsetWidth;return t.parentNode.removeChild(t),n}function h(e){if(e.fields){for(var t=e.fields,i=t.slice(0),n=i.length;n--;)if(!i[n])i.splice(n,1);if(e.realFields=i,e.select)switch(e.select.toLowerCase()){case"multi":i.unshift(ce(e));break;case"single":i.unshift(Ce(e))}}}function E(e){if(e.followHead)if(F(e),!e.noFollowHeadCache)H(e)}function p(e){if(e.followHead)F(e),H(e)}function F(e){if(e.followHead){for(var t=e.followDoms=[],i=e.main.parentNode.firstChild,n=e.id;i;){if(1===i.nodeType&&r(i,"follow-thead")===n)t.push(i);i=i.nextSibling}g(e),m(e)}}function m(e){var t=e.followDoms,i=e.followHeightArr;i[0]=parseInt(e.followHeadOffsetH,10)||0;for(var n=0,r=t.length;r>n;n++){var a=t[n];i[n+1]=i[n]+a.offsetHeight}i[n+1]=i[n],i.length=n+2}function g(e){for(var t=e.followDoms,i=e.followWidthArr,n=0,r=t.length;r>n;n++){var o=t[n],s=a(o,"padding-left")+a(o,"padding-right")+a(o,"border-left-width")+a(o,"border-right-width");i[n]=s,t[n].style.width=e.realWidth-s+"px"}}function H(e){var t=e.followDoms,i=Pe.getOffset(t[0]||e.main);e.followTop=i.top,e.followLeft=i.left}function G(e){var t=e.realFields,i=[],n=e.fontSize,r=2*e.colPadding+5;if(!e.noHead)for(var a=0,o=t.length;o>a;a++){var s=t[a],l=s.minWidth;if(!l&&!s.breakLine)l=s.title.length*n+r+(e.sortable&&s.sortable?e.sortWidth:0)+(s.tip?e.tipWidth:0);i[a]=l}else for(var u=n+r,a=0,o=t.length;o>a;a++)i[a]=u;e.minColsWidth=i}function I(e,t,i){var n=i.realFields,r=""===i.select?t:t-n[0].width;return e?/%/.test(e)?r*parseInt(e,10)/100:parseInt(e,10):0}function v(e){var t=e.realFields,i=[];e.colsWidth=[];var n="auto"===e.overflowX?d(e):e.realWidth;n=Math.max(n,e.realWidth),e.bodyWidth=n;for(var r=n-1,a=0,o=t.length;o>a;a++){var s=t[a],l=s.width;if(l=I(l,n,e),e.colsWidth.push(l),r-=l,!s.stable)i.push(a)}for(var o=i.length,u=Math.round(r/o),a=0;o>a;a++){var A=i[a],B=Math.abs(r)<Math.abs(u)?r:u;r-=B,e.colsWidth[A]+=B;var c=e.minColsWidth[A];if(c>e.colsWidth[A])r+=e.colsWidth[A]-c,e.colsWidth[A]=c}if(0>r)for(var a=0;o>a&&0!==r;){var A=i[a],c=e.minColsWidth[A];if(c<e.colsWidth[A]){var B=e.colsWidth[i[a]]-c;B=B>Math.abs(r)?r:-B,r+=Math.abs(B),e.colsWidth[A]+=B}a++}else if(r>0)e.colsWidth[i[0]]+=r}function y(e){var t=A(e);if(!(e.foot instanceof Array))t&&(t.style.display="none");else{if(!t)t=document.createElement("div"),t.id=o(e,"foot"),t.className=s(e,"foot"),n(t,"control-table",e.id),e.main.appendChild(t);if(t.style.display="",e.realWidth)t.style.width=e.realWidth+"px";t.innerHTML=J(e)}}function J(e){var t=[],n=e.foot,r=0,a=e.colsWidth,o=s(e,"fcell"),l=s(e,"fcell-text"),u=e.rowWidthOffset;t.push(Pe.format(Te,{width:"100%",controlTableId:e.id}),"<tr>");for(var A=0,B=n.length;B>A;A++){var c=n[A],C=a[r],D=c.colspan||1,d=[o],f=c.content;if("function"==typeof f)f=f.call(e);if(i(f))f="&nbsp;";for(var h=1;D>h;h++)C+=a[r+h];if(r+=D,c.align)d.push(s(e,"cell-align-"+c.align));C+=u,0>C&&(C=0),t.push('<th id="'+K(e,A)+'" class="'+d.join(" ")+'"',' style="width:'+C+"px;",(C?"":"display:none;")+'">','<div class="'+l+'">',f,"</div></th>")}return t.push("</tr></table>"),t.join("")}function L(e){var t=l(e),i=o(e,"head-panel");if(!t)t=document.createElement("div"),t.id=o(e,"head"),t.className=s(e,"head"),n(t,"control-table",e.id),e.main.appendChild(t),t.innerHTML=Pe.format('<div id="${id}" data-ui="type:Panel;id:${id};"></div>',{id:i}),e.initChildren(t),e.headPanel=e.viewContext.get(i),_e.addDOMEvent(e,t,"mousemove",xe.bind(S,t,e)),_e.addDOMEvent(e,t,"mousedown",xe.bind(R,t,e));if(e.noHead)return void(t.style.display="none");if(t.style.display="",e.bodyWidth)t.style.width=e.bodyWidth+"px";Pe.g(i).innerHTML=b(e),M(e,e.viewContext.get(i))}function M(e,t){if(t.children)t.disposeChildren();if(e.hasTip)t.initChildren()}function b(e){var t=e.realFields,n=s(e,"hcell"),r=s(e,"hcell-text"),a=s(e,"cell-break"),l=s(e,"hsort"),u=s(e,"hcell-sel"),A=-1,B=-1,c=e.rowWidthOffset;if(!e.disabled){for(var C=0,D=t.length;D>C;C++)if(!t[C].stable){A=C;break}for(var C=D-1;C>=0;C--)if(!t[C].stable){B=C;break}}var d=[];d.push(Pe.format(Te,{width:"100%",controlTableId:e.id}),"<tr>");for(var C=0,D=t.length;D>C;C++){var f=[n],h=t[C],E=h.title,p=e.sortable&&h.sortable,F=p&&h.field&&h.field===e.orderBy,m=r;if(0===C)m+=" "+s(e,"hcell-text-first");if(C===D-1)m+=" "+s(e,"hcell-text-last");var g="";if(p){if(f.push(s(e,"hcell-sort")),F)f.push(s(e,"hcell-"+e.order));g=Pe.format(Se,{className:l})}if(h.align)f.push(s(e,"cell-align-"+h.align));if(e.breakLine||h.breakLine)f.push(a);var H="",G="",I=h.tip;if("function"==typeof I)G=I.call(e);else G=I;if(G)H=Pe.format(we,{id:o(e,"htip"+C),className:s(e,"htip"),content:G,skin:h.tipSkin}),e.hasTip=!0;var v;if("function"==typeof E)v=E.call(e);else v=E;if(i(v))v="&nbsp;";d.push('<th id="'+N(e,C)+'"',' data-index="'+C+'"',' class="'+f.join(" ")+'"',p?' data-sortable="1"':"",C>=A&&B>C?' data-dragright="1"':"",B>=C&&C>A?' data-dragleft="1"':"",' style="',"width:"+(e.colsWidth[C]+c)+"px;",(e.colsWidth[C]?"":"display:none")+'">','<div class="'+m+(h.select?" "+u:"")+'">',v,H,g,"</div></th>")}return d.push("</tr></table>"),d.join("")}function N(e,t){return o(e,"title-cell")+t}function K(e,t){return o(e,"foot-cell")+t}function x(e,t){P(this,e)}function P(e,t){if(!e.isDraging&&!e.dragReady)if(_e.addPartClasses(e,"hcell-hover",t),e.sortable){e.sortReady=1;var i=r(t,"index"),n=e.realFields[i];if(n&&n.sortable)_e.addPartClasses(e,"hcell-sort-hover",t)}}function _(e,t){O(this,e)}function O(e,t){if(_e.removePartClasses(e,"hcell-hover",t),e.sortable)e.sortReady=0,_e.removePartClasses(e,"hcell-sort-hover",t)}function T(e,t){var i=this;if(i.sortable&&i.sortReady){var n=r(e,"index"),a=i.realFields[n];if(a.sortable){var o=i.orderBy,s=i.order;if(o===a.field)s=!s||"asc"===s?"desc":"asc";else s="desc";i.setProperties({order:s,orderBy:a.field}),i.fire("sort",{field:a,order:s})}}}function S(e,t){if(e.columnResizable){var i="startdrag",n=8;if(!e.isDraging){var a=t.target;if(a=w(e,a)){var o=this,s=t.pageX||t.clientX+Pe.page.getScrollLeft(),l=Pe.getOffset(a),u=r(a,"sortable");if(r(a,"dragleft")&&s-l.left<n)u&&O(e,a),_e.addPartClasses(e,i,o),e.dragPoint="left",e.dragReady=1;else if(r(a,"dragright")&&l.left+a.offsetWidth-s<n)u&&O(e,a),_e.addPartClasses(e,i,o),e.dragPoint="right",e.dragReady=1;else _e.removePartClasses(e,i,o),u&&P(e,a),e.dragPoint="",e.dragReady=0}}}}function w(e,t){for(;1===t.nodeType;){if("TH"===t.nodeName)return t;t=t.parentNode}return null}function R(e,t){if(e.columnResizable){e.fire("startdrag"),e.fire("dragstart");var i=s(e,"startdrag"),n=t.target;if(n=w(e,n))if(!(Pe.g(o(e,"head")).className.indexOf(i)<0)){e.htmlHeight=document.documentElement.clientHeight,e.isDraging=!0,e.dragIndex=r(n,"index"),e.dragStart=t.pageX||t.clientX+Pe.page.getScrollLeft(),k(e);var a=xe.partial(Q,e),l=function(t){var i=!0;try{i=xe.partial(Y,e)(t)}catch(n){}return Pe.un(document,"mousemove",a),Pe.un(document,"mouseup",l),i};return Pe.on(document,"mousemove",a),Pe.on(document,"mouseup",l),V(e,e.dragStart),Pe.event.preventDefault(t),!1}}}function k(e){var t=Pe.getOffset(e.main);e.top=t.top,e.left=t.left}function Q(e,t){var i=t||window.event;return V(e,i.pageX||i.clientX+Pe.page.getScrollLeft()),Pe.event.preventDefault(i),!1}function V(e,t){var i=z(e),n=e.left+e.realWidth,r=e.left+1,a=n-1;if(t=r>t?r:t,t=t>a?a:t,!i)i=W(e);i.style.top=e.top+"px",i.style.left=t+"px",i.style.zIndex=e.zIndex||"";var o=e.htmlHeight-e.top+Pe.page.getScrollTop(),s=e.main.offsetHeight;o=s>o?o:s,i.style.height=o+"px"}function U(e){var t=z(e);t.style.left="-10000px",t.style.top="-10000px"}function W(e){var t=document.createElement("div");return t.id=o(e,"drag-mark"),t.className=s(e,"mark "),t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t),t}function z(e){return Pe.g(o(e,"drag-mark"))}function Y(e,t){var i=t||window.event,n=parseInt(e.dragIndex,10),r=i.pageX||i.clientX+Pe.page.getScrollLeft(),a=e.realFields,o=a.length,s=0,l=e.colsWidth,u=0;if("left"===e.dragPoint)n--;var A=e.minColsWidth[n],B=r-e.dragStart,c=l[n]+B;if(A>c)B+=A-c,c=A;for(var C=[],D=[],d=n+1;o>d;d++)if(!a[d].stable&&l[d]>0)C.push(d),p=l[d],D.push(p),s+=p;for(var f=B,h=C.length,d=0;h>d;d++){var E=C[d],p=D[d],F=B*p/s,m=f>0?Math.ceil(F):Math.floor(F);if(m=Math.abs(m)<Math.abs(f)?m:f,p-=m,f-=m,A=e.minColsWidth[E],A>p)u+=A-p,p=A;l[E]=p}return c-=u,l[n]=c,Be(e),e.isDraging=!1,U(e),e.fire("enddrag"),e.fire("dragend"),Pe.event.preventDefault(i),!1}function X(e){var t=u(e),i=o(e,"body-panel");if(!t){var n="body",r=o(e,n);t=document.createElement("div"),t.id=r,t.className=s(e,n),e.main.appendChild(t),t.innerHTML=Pe.format('<div id="${id}" data-ui="type:Panel;id:${id}"></div>',{id:i}),e.initChildren(t),e.bodyPanel=e.viewContext.get(i)}var a=t.style;if(a.overflowX="auto",a.overflowY="auto",e.bodyWidth)a.width=e.bodyWidth+"px";e.bodyPanel.disposeChildren(),Pe.g(i).innerHTML=Z(e),e.fire("bodyChange")}function j(e){var t=u(e),i=t.style,n=e.datasource.length,r=e.bodyMaxHeight;if(r>0&&n>0){var a=r,s=Pe.g(o(e,"body-panel"));if(s)a=s.offsetHeight;if(a>=r)return void(i.height=r+"px")}i.height="auto"}function Z(e){var t=e.datasource||[],i=t.length,n=[];if(!i)return Pe.format(Re,{className:s(e,"body-nodata"),html:e.noDataHtml});for(var r=e.rowBuilderList,a=0;i>a;a++){var o=t[a];n.push(te(e,o,a,r))}return n.join("")}function q(e,t,i){return o(e,"cell")+t+"-"+i}function $(e,i){for(var n=e.rowBuilderList||[],r=0,a=i.length;a>r;r++){var o=i[r];if(o.getColHtml){if(o.getSubrowHtml)e.hasSubrow=!0;if(!t(o.index))o.index=1e3;n.push(o)}else;}n.sort(function(e,t){return e.index-t.index}),e.rowBuilderList=n}function ee(e){$(e,[{index:1,getRowArgs:ie,getColHtml:ne}])}function te(e,i,n,r){function a(e,t){return e.index-t.index}for(var s=[],l=e.realFields,u=e.rowWidthOffset,A=[],B=[],c=[],C=0,D=r.length;D>C;C++){var d=r[C],f=d.getRowArgs?d.getRowArgs(e,n)||{}:{};A.push(f),f.rowClass&&B.push(f.rowClass),f.rowAttr&&c.push(f.rowAttr)}for(var C=0,D=l.length;D>C;C++){for(var h=l[C],E=e.colsWidth[C],p=[],F=[],m=[],g=[],H=[],G=[],I=-1,v=0,y=r.length;y>v;v++){var J=r[v].getColHtml(e,i,h,n,C,A[v]);if(J){var L=J.html;if(J.colClass)p.push(J.colClass);if(J.textClass)F.push(J.textClass);if(J.colAttr)m.push(J.colAttr);if(J.textAttr)g.push(J.textAttr);if(t(L))if(J.notInText)J.index=v,G.push(J);else H.push(L),0>I&&(I=v)}else;}var M="";if(H=['<div class="'+F.join(" ")+'" ',g.join(" ")+">",H.join(""),"</div>"].join(""),G.push({html:H,index:I}),G.sort(a),G.length>1){for(var M=['<table width="100%" cellpadding="0" cellspacing="0">',"<tr>"],v=0,y=G.length;y>v;v++){var b=G[v];M.push("<td ",t(b.width)?' width="'+b.width+'" ':"",b.align?' align="'+b.align+'">':">",b.html,"</td>")}M.push("</tr></table>"),M=M.join("")}else M=H;s.push('<td id="'+q(e,n,C)+'" ','class="'+p.join(" ")+'" ',m.join(" ")+" ",'style="width:'+(E+u)+"px;",(E?"":"display:none")+'" ','data-control-table="'+e.id+'" ','data-row="'+n+'" data-col="'+C+'">',M,"</td>")}if(s.unshift(Pe.format(ke,{id:o(e,"row")+n,className:B.join(" "),attr:c.join(" "),index:n}),Pe.format(Te,{width:"100%",controlTableId:e.id})),s.push("</tr></table></div>"),e.hasSubrow)for(var C=0,D=r.length;D>C;C++){var N=r[C].getSubrowHtml;if(N)s.push(N(e,n,A[C]))}return s.join("")}function ie(e,t){var i=e.datasource||[],n=i.length;return{tdCellClass:s(e,"cell"),tdBreakClass:s(e,"cell-break"),tdTextClass:s(e,"cell-text"),fieldLen:e.realFields.length,rowClass:[s(e,"row"),s(e,"row-"+(t%2?"odd":"even")),D(e,t)?s(e,"row-selected"):"",n-1===t?s(e,"row-last"):""].join(" ")}}function ne(e,t,n,r,a,l){var u=l.tdCellClass,A=l.tdBreakClass,B=l.tdTextClass,c=[u],C=[B],D=n.content;if(0===a)C.push(s(e,"cell-text-first"));if(a===l.fieldLen-1)C.push(s(e,"cell-text-last"));if(e.breakLine||n.breakLine)c.push(A);if(n.select)C.push(s(e,"cell-sel"));if(n.align)c.push(s(e,"cell-align-"+n.align));if(n.field&&n.field===e.orderBy)c.push(s(e,"cell-sorted"));var d="function"==typeof D?D.call(e,t,r,a):e.encode?Pe.encodeHTML(t[D]):t[D];if(i(d))d="&nbsp;";return{colClass:c.join(" "),textClass:C.join(" "),html:Pe.format(Qe,{colTextId:o(e,"cell-textfield-"+r+"-"+a),content:d})}}function re(e,t){if(!this.isDraging)_e.addPartClasses(this,"row-hover",e)}function ae(e,t){_e.removePartClasses(this,"row-hover",e)}
function oe(e,t){var i=this,n=_e.getPartClasses(i,"cell-text")[0];if("line"===i.selectMode&&Pe.hasClass(t.target,n)){if(i.dontSelectLine)return void(i.dontSelectLine=!1);var a=r(e,"index");switch(i.select){case"multi":var s=Pe.g(o(i,"multi-select")+a);de(i,a,!s.checked),fe(i);break;case"single":me(i,a,!0)}}}function se(e){e.viewWidth=Pe.page.getViewWidth(),e.viewHeight=Pe.page.getViewHeight();var t=function(){var t=Pe.page.getViewWidth(),i=Pe.page.getViewHeight(),n=f(e);if(t!==e.viewWidth||i!==e.viewHeight||n!==e.realWidth)e.viewWidth=t,e.viewHeight=i,le(e)};_e.addDOMEvent(e,window,"resize",t)}function le(e){var t=l(e),i=A(e);e.realWidth=f(e);var n=e.realWidth+"px";if(e.realWidth)e.main.style.width=n;v(e),Be(e);var r=e.bodyWidth+"px";if(e.realWidth)u(e).style.width=r,t&&(t.style.width=r),i&&(i.style.width=n);if(e.followHead)g(e),m(e);k(e),e.fire("resize"),e.topReseter&&e.topReseter()}function ue(e,t,i,n){if(e)e.style.top=i+"px",e.style.left=n+"px",e.style.position=t}function Ae(e){if(e.followHead&&!e.topReseter){var t=l(e),i=o(e,"top-placeholder"),n=document.createElement("div");n.id=i,n.style.width="100%",n.style.display="none",Pe.insertBefore(n,e.main),n=null,e.topReseter=function(){if(e.followHead){var n=Pe.page.getScrollTop(),r=Pe.ie&&Pe.ie<7?"absolute":"fixed",a=e.main.offsetHeight,o="absolute"===r,s=Pe.g(i),l=e.followDoms;if(s){if(n+=parseInt(e.followHeadOffsetH,10)||0,e.noFollowHeadCache){var u=t.style.position;if("fixed"!==u&&"absolute"!==u)H(e)}if(n>e.followTop&&(o||n-e.followTop<a)){var A=Pe.page.getScrollLeft(),B=e.followHeightArr,c=B.length;k(e);var C=o?e.left:e.left-A;if(s.style.height=B[c-1]+t.offsetHeight-(parseInt(e.followHeadOffsetH,10)||0)+"px",s.style.display="",Pe.ie&&Pe.ie<8)t.style.zIndex=e.zIndex+1;if(o){for(var D=0,d=l.length;d>D;D++)ue(l[D],r,B[D]+n,C);ue(t,r,B[c-1]+n,C)}else{for(var D=0,d=l.length;d>D;D++)ue(l[D],r,B[D],C);ue(t,r,B[c-1],C)}}else{s.style.height=0,s.style.display="none",r="";for(var D=0,d=l.length;d>D;D++)ue(l[D],r,0,0);ue(t,r,0,0),t.style.zIndex=""}}}},_e.addDOMEvent(e,window,"scroll",e.topReseter)}}function Be(e){var t=u(e);if(t){var i=e.colsWidth,n=e.foot,a=e.id,o=n instanceof Array&&n.length,s=t.getElementsByTagName("td"),l=s.length,A=e.rowWidthOffset;if(o)for(var B=0,c=0;o>c;c++){for(var C=n[c],D=i[B],d=C.colspan||1,f=1;d>f;f++)D+=i[B+f];B+=d;var h=Pe.g(K(e,c));D=Math.max(D+A,0),h.style.width=D+"px",h.style.display=D?"":"none"}if(o=i.length,!e.noHead)for(var c=0;o>c;c++){var D=Math.max(i[c]+A,0),h=Pe.g(N(e,c));h.style.width=D+"px",h.style.display=D?"":"none"}for(var f=0,c=0;l>c;c++){var h=s[c];if(r(h,"control-table")===a){var D=Math.max(i[f%o]+A,0);h.style.width=D+"px",h.style.display=D?"":"none",f++}}}}function ce(e){return{width:30,stable:!0,select:!0,title:function(t,i){var n={id:o(e,"select-all"),className:s(e,"select-all"),disabled:e.disabled?'disabled="disabled"':"",index:i};return Pe.format(Ve,n)},content:function(t,i){var n={id:o(e,"multi-select")+i,className:s(e,"multi-select"),disabled:e.disabled?'disabled="disabled"':"",index:i,checked:D(e,i)?'checked="checked"':""};return Pe.format(Ue,n)}}}function Ce(e){return{width:50,stable:!0,title:e.selectTitle||"&nbsp;",select:!0,content:function(t,i){var n=o(e,"single-select"),r={id:n+i,name:n,className:s(e,"single-select"),index:i,disabled:e.disabled?'disabled="disabled"':"",checked:D(e,i)?'checked="checked"':""};return Pe.format(We,r)}}}function De(e,t){var i=r(e,"index");de(this,i),fe(this)}function de(e,i,n){var a="row-selected";if(i>=0){var s=Pe.g(o(e,"multi-select")+i);if(s){t(n)&&(s.checked=n);var l=B(e,i);if(s.checked)_e.addPartClasses(e,a,l);else _e.removePartClasses(e,a,l)}}else if(t(n))for(var u=Ee(e,"checkbox"),A=0,c=u.length;c>A;A++){var s=u[A];s.checked=n;var C=r(s,"index"),l=B(e,C);if(n)_e.addPartClasses(e,a,l);else _e.removePartClasses(e,a,l)}}function fe(e){for(var t=c(e),i=Ee(e,"checkbox"),n=!0,a=[],s=o(e,"multi-select"),l=0,u=i.length;u>l;l++){var A=i[l];if(A.id.indexOf(s)>=0){var B=r(A,"index");if(!A.checked)n=!1;else a.push(B)}}if(C(e,a),e.fire("select",{selectedIndex:a}),0===i.length)n=!1;t.checked=n}function he(e){pe(this,c(this).checked)}function Ee(e,t){for(var i=u(e).getElementsByTagName("input"),n=[],r=0,a=i.length;a>r;r++){var o=i[r],s=o.id;if(o.getAttribute("type")===t&&s)n.push(o)}return n}function pe(e,t){de(e,-1,t),fe(e)}function Fe(e,t){me(this,r(e,"index"))}function me(e,i,n){var r=e.selectedIndex,a=Pe.g(o(e,"single-select")+i);if(a){if(t(n)&&(a.checked=n),e.fire("select",{selectedIndex:i}),r&&r.length)_e.removePartClasses(e,"row-selected",B(e,r[0]));C(e,[i]),_e.addPartClasses(e,"row-selected",B(e,i))}}function ge(e){e.main.style.zIndex=e.zIndex||""}function He(e){for(var t=Ee(e,"multi"===e.select?"checkbox":"radio"),i=t.length-1;i>=0;i--)if(e.disabled)t[i].setAttribute("disabled","disabled");else t[i].removeAttribute("disabled");if("multi"===e.select){var n=c(e);if(n)if(e.disabled)n.setAttribute("disabled","disabled");else n.removeAttribute("disabled")}if(e.children&&e.children.length)for(var r=e.children,i=r.length-1;i>=0;i--)r[i].setDisabled(e.disabled)}function Ge(e){var t=" "+e+" ";return function(e){var i=" "+e.className+" ";return i.replace(ze," ").indexOf(t)>=0}}function Ie(e,t){var i=null;if(t)i="function"==typeof t?t:Ge(t);return{handler:e,matchFn:i}}function ve(e,t,i){var n=t.id,r=e.handlers[n];if(!r)r=e.handlers[n]={};if(i)if(r=e.handlers[i],!r)r=e.handlers[i]=[];return r}function ye(e,t,i,n){var r=ve(e,t,i),a=[];if(!r.length)Me(e,t,i);for(var o=0,s=n.length;s>o;o++){var l=n[o],u=Ie(l.handler,l.matchFn);r.push(u),a.push(u)}return a}function Je(e,t,i,n){for(var r=ve(e,t,i),a=0,o=n.length;o>a;a++)for(var s=n[a],l=0,u=r.length;u>l;l++)if(r[l]===s)r.splice(l,1),l--;if(!r.length)be(e,t,i)}function Le(e,t,i){return function(n){for(var n=n||window.event,r=n.target;r;){if(1===r.nodeType)for(var a=t.length-1;a>=0;a--){var o=t[a];if(!o.matchFn||o.matchFn(r))o.handler.call(i,r,n)}if(r===e)break;r=r.parentNode}}}function Me(e,t,i){var n=ve(e,t,i);_e.addDOMEvent(e,t,i,Le(t,n,e))}function be(e,t,i){_e.removeDOMEvent(e,t,i)}function Ne(e){var t=_e.getPartClasses,i=t(e,"row")[0],n=t(e,"hcell")[0],r=t(e,"select-all")[0],a=t(e,"multi-select")[0],o=t(e,"single-select")[0];ye(e,e.main,"mouseover",[{handler:re,matchFn:i},{handler:x,matchFn:n}]),ye(e,e.main,"mouseout",[{handler:ae,matchFn:i},{handler:_,matchFn:n}]),ye(e,e.main,"click",[{handler:oe,matchFn:i},{handler:T,matchFn:n},{handler:he,matchFn:r},{handler:De,matchFn:a},{handler:Fe,matchFn:o}])}var Ke=require("inf-i18n"),xe=require("underscore"),Pe=require("./lib"),_e=require("./controlHelper"),Oe=require("./Control");e.defaultProperties={noDataHtml:Ke("没有数据"),noFollowHeadCache:!1,followHead:!1,sortable:!1,encode:!1,columnResizable:!1,rowWidthOffset:-1,select:"",selectMode:"box",subrowMutex:1,subEntryOpenTip:Ke("点击展开"),subEntryCloseTip:Ke("点击收起"),subEntryWidth:18,breakLine:!1,hasTip:!1,hasSubrow:!1,tipWidth:18,sortWidth:9,fontSize:13,colPadding:8,zIndex:0,overflowX:"hidden"};var Te='<table cellpadding="0" cellspacing="0" width="${width}" data-control-table="${controlTableId}">',Se='<div class="${className}"></div>',we='<div id="${id}" class="${className}" data-ui="type:Tip;id:${id};content:${content};skin:${skin}"></div>',Re='<div class="${className}">${html}</div>',ke='<div id="${id}" class="${className}" data-index="${index}" ${attr}>',Qe='<span id="${colTextId}">${content}</span>',Ve='<input type="checkbox" id="${id}" class="${className}" data-index="${index}" ${disabled}/>',Ue='<input type="checkbox" id="${id}" class="${className}" data-index="${index}" ${disabled} ${checked} />',We='<input type="radio" id="${id}" name="${name}" class="${className}" data-index="${index}" ${disabled} ${checked} />',ze=/[\t\r\n]/g;return e.prototype={type:"Table",initOptions:function(t){var i={};xe.extend(i,e.defaultProperties,t),this.setProperties(i)},initStructure:function(){if(this.realWidth=f(this),this.realWidth)this.main.style.width=this.realWidth+"px";ge(this),ee(this),se(this),Ne(this)},repaint:function(t,i){Oe.prototype.repaint.apply(this,arguments);var n=this;if(!n.realWidth)if(n.realWidth=f(n),n.realWidth)n.main.style.width=n.realWidth+"px";var r=e.defaultProperties,a={};if(!t){for(var o in r)if(r.hasOwnProperty(o))a[o]=!0}else for(var s=0;s<t.length;s++){var l=t[s];a[l.name]=!0}var u=!1,A=!1,B=!1;if(a.fields||a.select||a.selectMode||a.sortable)h(n),u=!0;if(u||a.breakLine||a.colPadding||a.fontSize)G(n),v(n),A=!0;if(u||A||a.noHead||a.order||a.orderBy||a.selectedIndex)L(n);if(a.followHead||a.noFollowHeadCache)E(n),Ae(n);if(u||A||a.encode||a.noDataHtml||a.datasource||a.selectedIndex)X(n),B=!0;if(B||a.bodyMaxHeight)j(n);if(u||A||a.foot)y(n);if(n.extraRepaint=_e.createRepaint([{name:"disabled",paint:He},{name:"width",paint:le},{name:"zIndex",paint:ge}]),n.extraRepaint(t,i),B&&_e.isInStage(n,"RENDERED"))switch(n.select){case"multi":C(n,n.selectedIndex),n.fire("select",{selectedIndex:n.selectedIndex})}if(n.realWidth!==f(n))le(n)},getId:function(e){return o(this,e)},getBodyCellId:function(e,t){return q(this,e,t)},setCellText:function(e,t,n,r){if(r)e=Pe.encodeHTML(e);e=i(e)?"&nbsp":e,Pe.g(o(this,"cell-textfield-"+t+"-"+n)).innerHTML=e},getClass:function(e){return s(this,e)},getRow:function(e){return B(this,e)},addRowBuilders:function(e){$(this,e)},addHandlers:function(e,t){if(!t.length)t=[t];return ye(this,this.main,e,t)},removeHandlers:function(e,t){if(!t.length)t=[t];Je(this,this.main,e,t)},adjustWidth:function(){le(this)},setDatasource:function(e,t){this.datasource=e,C(this,t||[]);var i={name:"datasource"},n={name:"selectedIndex"};this.repaint([i,n],{datasource:i,selectedIndex:n})},updateRowAt:function(e,t){t&&(this.datasource[e]=t);var i=this.datasource[e],n=B(this,e);if(i&&n){this.fire("beforerowupdate",{index:e,data:i});var r=document.createElement("div");r.innerHTML=te(this,t,e,this.rowBuilderList);var a=r.children[0];n.parentNode.replaceChild(a,n),this.fire("afterrowupdate",{index:e,data:i})}},getSelectedItems:function(){var e=this.selectedIndex,t=[];if(e){var i=this.datasource;if(i)for(var n=0;n<e.length;n++)t.push(i[e[n]])}return t},setRowSelected:function(e,t){var i=this,n="multi"===i.select,r=n?de:me;if(xe.isArray(e))if(n)xe.each(e,function(e){r(i,e,t)});else r(i,e[0],t);else r(i,e,t);if(n)fe(i)},setAllRowSelected:function(e){this.setRowSelected(-1,e)},resetFollowHead:function(){p(this)},dispose:function(){if(!_e.isInStage(this,"DISPOSED")){_e.beforeDispose(this);var e=this.main;if(e){this.followDoms=null;var t=Pe.g(o(this,"drag-mark"));if(t)document.body.removeChild(t)}this.rowBuilderList=null,this.headPanel.disposeChildren(),this.bodyPanel.disposeChildren(),this.headPanel=null,this.bodyPanel=null,_e.dispose(this),_e.afterDispose(this)}}},Pe.inherits(e,Oe),require("./main").register(e),e}),define("esui/Tab",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){l.apply(this,arguments)}function t(e){for(var t=[],i=s.getChildren(e),n=0;n<i.length;n++){var r=i[n],a={title:s.getText(r),panel:r.getAttribute("data-for")};if(r.className)a.classes=r.className.split(/\s+/);t.push(a)}return t}function i(e){for(var t=e.target,i=t;i&&"li"!==i.nodeName.toLowerCase();)i=i.parentNode;if(i&&"li"===i.nodeName.toLowerCase())for(var n=i.parentNode,r=s.getChildren(n),a=0;a<r.length;a++)if(r[a]===i){if(this.helper.isPart(t,"close"))this.removeAt(a);else this.set("activeIndex",a);return}}function n(e,t,i,n){var r=document.createElement("li");if(e.helper.addPartClasses("item",r),t.classes)s.addClasses(r,t.classes);if(i)e.helper.addPartClasses("item-active",r);return r.innerHTML=e.getContentHTML(t,n),r}function r(e){var t=e.helper.getPart("navigator"),i=t.parentNode,r=t.nextSibling;t.innerHTML="",t.parentNode.removeChild(t);for(var a=0;a<e.tabs.length;a++){var o=e.tabs[a],s=e.activeIndex===a,l=n(e,o,s,e.allowClose);t.appendChild(l)}i.insertBefore(t,r)}function a(e,t){for(var i=0;i<e.tabs.length;i++){var n=e.tabs[i];if(n.panel){var r=s.g(n.panel);if(r)r.style.display=i===t?"":"none"}var a=e.helper.getPart("navigator"),o=s.getChildren(a),l=o[i],u=i===t?"addPartClasses":"removePartClasses";e.helper[u]("item-active",l)}var A={activeIndex:t,tab:e.tabs[t]};e.fire("activate",A)}var o=require("underscore"),s=require("./lib"),l=require("./Control");return e.prototype.type="Tab",e.prototype.initOptions=function(e){var i={tabs:[],activeIndex:0,allowClose:!1,orientation:"horizontal"};o.extend(i,e);var n=s.getChildren(this.main);if(n.length){for(var r=[],a=0;a<n.length;a++){var l=n[a];if("navigator"===l.getAttribute("data-role")){this.navigatorElement=l,i.tabs=t(l);break}else{var u={title:l.getAttribute("title"),panel:l.id};r.push(u)}}if(!i.tabs.length)i.tabs=r}if("string"==typeof i.activeIndex)i.activeIndex=+i.activeIndex;this.setProperties(i)},e.prototype.initStructure=function(){var e=this.navigatorElement;if(this.navigatorElement=null,!e)e=document.createElement("ul"),this.main.insertBefore(e,this.main.firstChild||null);e.id=this.helper.getId("navigator"),this.helper.addPartClasses("navigator",e)},e.prototype.initEvents=function(){this.helper.addDOMEvent("navigator","click",i)},e.prototype.contentTemplate="<span>${title}</span>",e.prototype.getContentHTML=function(e,t){var i=s.format(this.contentTemplate,{title:o.escape(e.title)});if(t)i+='<span class="'+this.helper.getPartClassName("close")+'">关闭</span>';return i},e.prototype.setProperties=function(e){if(e.tabs){if(null==e.activeIndex){for(var t=this.tabs[this.activeIndex],i=-1,n=0;n<e.tabs.length;n++)if(e.tabs[n]===t){i=n;break}if(-1===i)this.activeIndex=-1,e.activeIndex=0;else this.activeIndex=i}if(null!=e.allowClose)this.allowClose=e.allowClose,delete e.allowClose}l.prototype.setProperties.apply(this,arguments)},e.prototype.repaint=require("./painters").createRepaint(l.prototype.repaint,{name:["tabs","allowClose"],paint:r},{name:"activeIndex",paint:a},{name:"orientation",paint:function(e,t){e.removeState("vertical"),e.removeState("horizontal"),e.addState(t)}}),e.prototype.activate=function(e){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t]===e)this.set("activeIndex",t)},e.prototype.add=function(e){this.insert(e,this.tabs.length)},e.prototype.insert=function(e,t){t=Math.min(t,this.tabs.length),t=Math.max(t,0),this.tabs.splice(t,0,e);var i=n(this,e,!1,this.allowClose),r=this.helper.getPart("navigator"),o=s.getChildren(r);if(r.insertBefore(i,o[t]||null),1===this.tabs.length)this.activeIndex=0,a(this,0);else{if(t<=this.activeIndex)this.activeIndex++;if(e.panel){var l=s.g(e.panel);if(l)l.style.display="none"}}this.fire("add",{tab:e,index:t})},e.prototype.remove=function(e){for(var t=0;(t=o.indexOf(this.tabs,e,t))>=0;)this.removeAt(t)},e.prototype.removeAt=function(e){var t=this.tabs.splice(e,1)[0],i=this.helper.getPart("navigator");if(t){var n=s.getChildren(i),r=n[e];if(r.parentNode.removeChild(r),e<this.activeIndex)this.activeIndex--;else if(e===this.activeIndex)this.activeIndex=Math.min(this.activeIndex,this.tabs.length-1),a(this,this.activeIndex);if(t.panel){var o=s.g(t.panel);if(o)o.style.display="none"}this.fire("remove",{tab:t,index:e})}},e.prototype.getActiveTab=function(){return this.get("tabs")[this.get("activeIndex")]},s.inherits(e,l),require("./main").register(e),e}),define("esui/Sidebar",["require","./lib","./Control","./main","./Panel","./controlHelper","./Button"],function(require){function e(){F.apply(this,arguments)}function t(e){return p.g(H.getId(e,"mat"))}function i(e){return p.g(H.getId(e,"minibar"))}function n(e){var t=p.dom.first(e.main);if(t){p.addClasses(t,H.getPartClasses(e,"head")),e.headEl=t;var i=p.dom.next(t);if(i){e.bodyEl=i,p.addClasses(i,H.getPartClasses(e,"body"));var n=new g({main:i,renderOptions:e.renderOptions});e.addChild(n,"content"),n.render()}}}function r(e){var t=e,i=document.createElement("div"),n=H.getPartClasses(t,"mat");i.id=H.getId(t,"mat"),i.className=n.join(" "),document.body.appendChild(i)}function a(e){var t=e,i=document.createElement("div"),n=[],r=H.getPartClasses(t,"minibar-text");t.headEl&&n.push('<div class="'+r.join(" ")+'">'+t.headEl.innerHTML+"</div>");var a=H.getPartClasses(t,"minibar-arrow");n.push('<div class="'+a.join(" ")+'"></div>'),i.innerHTML=n.join(""),i.id=H.getId(t,"minibar"),i.className=H.getPartClasses(t,"minibar").join(" "),H.addDOMEvent(t,i,"mouseover",p.bind(c,null,t,i)),H.addDOMEvent(t,i,"mouseout",p.bind(C,null,t,i)),document.body.appendChild(i)}function o(e){var t=e,i=t.main;require("./Button");var n=m.create("Button",{id:H.getId(t,"autohide"),skin:"autohide"}),r=m.create("Button",{id:H.getId(t,"fixed"),skin:"fixed"});n.appendTo(i),r.appendTo(i),t.addChild(n,"btnAutoHide"),t.addChild(r,"btnFixed"),n.onclick=p.curry(d,t),r.onclick=p.curry(D,t)}function s(e){var n=e,r=p.page.getScrollTop(),a=n.marginTop||0,o=Math.max(n.top+a-r,a),s=n.main,l=t(n),u=i(n);s.style.top=o+"px",u.style.top=o+"px",l.style.top=o-a+"px"}function l(e){var t=e,n=t.main;n.style.cssText+=";left: "+(t.marginLeft?t.marginLeft+"px":0)+";bottom:"+(t.marginBottom?t.marginBottom+"px":0)+";";var r=t.bodyEl;r.style.top=t.headHeight?t.headHeight+"px":0;var a=i(t);a.style.bottom=t.marginBottom?t.marginBottom+"px":0,s(t)}function u(e){t(e).style.display="none"}function A(e){if(t(e).style.display="block",e.main.style.display="block",i(e).style.display="none",!e.isAutoHide())u(e)}function B(e){u(e),e.main.style.display="none",i(e).style.display="block"}function c(e,t){var i=e,n=H.getPartClasses(i,"minibar-hover");if(!p.hasClass(t,n[0]))p.addClasses(t,n),i.minibarDisplayTick=setTimeout(function(){A(i)},i.autoDelay)}function C(e,t){var i=e,n=H.getPartClasses(i,"minibar-hover");p.removeClasses(t,n),clearTimeout(i.minibarDisplayTick)}function D(e){e.setMode("fixed")}function d(e){e.setMode("autohide")}function f(e,t){var i=e;if(t=t.toLowerCase(),"fixed"===t)i.getChild("btnAutoHide").show(),i.getChild("btnFixed").hide();else i.getChild("btnAutoHide").hide(),i.getChild("btnFixed").show();i.mode=t}function h(e){clearTimeout(e.minibarDisplayTick)}function E(e,t){var i=e;if(e.isAutoHide()){t=t||window.event;var n=t.relatedTarget||t.toElement;if(!p.dom.contains(e.main,n))i.minibarDisplayTick=setTimeout(function(){B(i)},i.autoDelay)}}var p=require("./lib"),F=require("./Control"),m=require("./main"),g=require("./Panel"),H=require("./controlHelper");return e.prototype.type="Sidebar",e.prototype.createMain=function(e){if(!e.tagName)return F.prototype.createMain.call(this);else return document.createElement(e.tagName)},e.prototype.initOptions=function(e){var t={headHeight:37,marginTop:10,marginLeft:10,marginBottom:10,autoDelay:300,mode:"fixed"};p.extend(t,e);var i=this.main,n=i.parentNode,r=p.getOffset(n),a=p.getOffset(i);if(null==this.initialOffsetTop)this.initialOffsetTop=a.top-r.top,t.top=a.top,t.left=a.left;else t.top=r.top+this.initialOffsetTop;p.extend(this,t)},e.prototype.initStructure=function(){if(n(this),r(this),a(this),o(this),!p.ie||p.ie>=7)this.topReset=p.curry(s,this),p.on(window,"scroll",this.topReset);if(l(this),this.isAutoHide())B(this)},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"mouseover",p.bind(h,null,this)),this.helper.addDOMEvent(this.main,"mouseout",p.bind(E,null,this))},e.prototype.repaint=H.createRepaint(F.prototype.repaint,{name:"mode",paint:function(e,t){if(f(e,t),e.isAutoHide())B(e);else A(e);if(H.isInStage(e,"RENDERED"))e.fire("modechange",{mode:t})}}),e.prototype.setMode=function(e){this.setProperties({mode:e})},e.prototype.getMode=function(){return this.mode},e.prototype.getPanel=function(){return this.getChild("content")},e.prototype.setContent=function(e){var t=this.getPanel();if(t)t.setProperties({content:e})},e.prototype.isAutoHide=function(){return"autohide"===this.mode},e.prototype.dispose=function(){if(!H.isInStage(this,"DISPOSED")){if(H.beforeDispose(this),this.topReset)p.un(window,"scroll",this.topReset),this.topReseter=null;var e=t(this),n=i(this);document.body.removeChild(n),document.body.removeChild(e),this.headEl=null,this.bodyEl=null,H.dispose(this),H.afterDispose(this)}},p.inherits(e,F),m.register(e),e}),define("esui/SearchBox",["require","./lib","esui","./Control","./TextBox","./Button","mini-event","./painters"],function(require){function e(e){a.apply(this,arguments)}function t(){this.removeState("clear"),this.addState("focus")}function i(){if(this.hasState("clear"))this.getChild("text").setValue(""),this.removeState("clear");this.fire("search")}var n=require("./lib"),r=require("esui"),a=require("./Control");require("./TextBox"),require("./Button"),e.prototype.type="SearchBox",e.prototype.initOptions=function(e){var t={};if(n.extend(t,e),"false"===t.disabled)t.disabled=!1;if(n.isInput(this.main)){if(!t.placeholder)t.placeholder=n.getAttribute(this.main,"placeholder");if(!t.text)t.text=this.main.value;if(!t.maxLength&&(n.hasAttribute(this.main,"maxlength")||this.main.maxLength>0))t.maxLength=this.main.maxLength}else if(!t.text)t.text=n.getText(this.main);if(!t.title)t.title=this.main.title;a.prototype.initOptions.call(this,t)},e.prototype.initStructure=function(){var e={mode:"text",childName:"text",height:this.height,viewContext:this.viewContext,placeholder:this.placeholder};if(n.isInput(this.main))this.helper.replaceMain();var t=r.create("TextBox",e);t.appendTo(this.main),this.addChild(t);var i={main:document.createElement("span"),childName:"button",content:"搜索",viewContext:this.viewContext},a=r.create("Button",i);a.appendTo(this.main),this.addChild(a)},e.prototype.initEvents=function(){var e=this.getChild("text"),r=require("mini-event").delegate;r(e,this,"input"),r(e,"enter",this,"search"),e.on("keypress",function(e){if(13===e.keyCode)e.preventDefault()}),e.on("focus",t,this),e.on("blur",n.bind(this.removeState,this,"focus"));var a=this.getChild("button");a.on("click",i,this)},e.prototype.getValue=function(){var e=this.getChild("text");return e.getValue()};var o=require("./painters");return e.prototype.repaint=o.createRepaint(a.prototype.repaint,o.attribute("title"),{name:["maxLength","placeholder","text","width","disabled","readOnly"],paint:function(e,t,i,n,r,a,o){var s={maxLength:t,placeholder:i,value:n,width:r,disabled:a,readOnly:o};e.getChild("text").setProperties(s)}},{name:"disabled",paint:function(e,t){if("false"===t)t=!1;var i=e.getChild("button");i.set("disabled",t)}},{name:"fitWidth",paint:function(e,t){var i=t?"addState":"removeState";e[i]("fit-width")}}),e.prototype.getTextProperty=function(){var e=this.getChild("text");return e?e.getValue():this.text},n.inherits(e,a),r.register(e),e}),define("esui/Schedule",["require","./lib","./InputControl","./controlHelper","./main"],function(require){function e(e){P.apply(this,arguments)}function t(){function e(e){for(var t=[],i=0;7>i&&i<e.length;i++){t[i]=[];for(var n=0;24>n;n++)t[i][n]=e[i]}return t}return[{text:"全周投放",tip:"周一到周日全天投放",getValue:function(){return e([1,1,1,1,1,1,1])}},{text:"周一到周五投放",tip:"周一到周五全天投放",getValue:function(){return e([1,1,1,1,1,0,0])}},{text:"周末投放",tip:"周六、周日全天投放",getValue:function(){return e([0,0,0,0,0,1,1])}}]}function i(){for(var e=[],t=0;7>t;t++){var i=[];e.push(i);for(var n=0;24>n;n++)i.push(0)}return e}function n(e,t){return _.getPartClasses(e,t).join(" ")}function r(e,t){return _.getId(e,t)}function a(e){var t=e,i=[],r='<span class="${clazz}" data-item="${index}" >${text}</span>',a=n(t,"shortcut-text-item");i.push('<span class="'+a+'">快速设定：</span>');for(var o=t.shortcut,s=n(t,"shortcut-item"),l=0,u=o.length;u>l;l++){var A=o[l];i.push(x.format(r,{clazz:s,text:A.text,index:l}))}return i.join("")}function o(e){x.g(r(e,"body")).innerHTML=""+s(e)+l(e)+u(e)}function s(e){var t=e,i=[],a=n(t,"time-line"),o=r("body-head");i.push('<div class="',a,'" id="',o+'">');for(var s=n(t,"time-head"),l=0;24>=l;l+=2)i.push('<div class="',s,'" data-time="',l,'" ','id="',r(t,"time-head"+l),'">',l+":00","</div>");return i.push("</div>"),i.join("")}function l(e){var t=e,i=[],a=n(t,"day-head"),o=r(t,"day-head");i.push('<div id="',o,'" class="',a,'">');for(var s=n(t,"day"),l='<div class="'+s+'"><input type="checkbox" id="${dayId}" value="${value}">&nbsp;<label for="${dayId}">${dayWord}</label></div>',u=t.dayTexts,A=0;7>A;A++)i.push(x.format(l,{dayWord:u[A],dayId:r(t,"line-state"+A),value:A}));return i.push("</div>"),i.join("")}function u(e){var t=e,i=[],a='<div class="${timeClass}" id="${itemId}" data-day="${dayIndex}" data-time-item="1" data-time="${timeIndex}"></div>',o=n(t,"time-body"),s=r(t,"time-body");i.push('<div id="',s,'" class="',o,'">');for(var l=n(t,"line"),u=0;7>u;u++){var A=r(t,"line"+u);i.push('<div class="',l,'" id="',A,'">');for(var B=0;24>B;B++){var c=r(t,"time_"+u+"_"+B);i.push(x.format(a,{itemId:c,timeClass:n(t,"time"),dayIndex:u,timeIndex:B}))}i.push("</div>")}return i.push("</div>"),i.join("")}function A(e,t){for(var i=e,n=_.getPartClasses(i,"time-selected"),a=_.getPartClasses(i,"time-hover"),o=0;7>o;o++){var s=[],l=x.g(r(i,"line"+o));C(e,l);for(var u=0;24>u;u++){var A=x.g(r(i,"time_"+o+"_"+u)),c=t[o][u];if(c)x.addClasses(A,n);else x.removeClasses(A,n);x.removeClasses(A,a),s.push(c)}B(i,s,l,o)}}function B(e,t,i,a){var o=e,s=a,l=x.g(r(o,"line-state"+s));l.checked=!1;for(var u,A=/1{3,}/g,B=t.join(""),C=n(o,"continue-covertimes"),D='<div class="${coverClass}"><strong>${text}</strong></div>';null!=(u=A.exec(B));){var d=u[0].length,f=u.index,h=f+d,E=document.createElement("aside"),p=";width:"+25*d+"px;top:0;left:"+25*f+"px;";l.checked=24===d?!0:!1,E.setAttribute("data-start-time",f),E.setAttribute("data-end-time",h),E.setAttribute("data-day",s),E.className=C,E.style.cssText+=p,E.innerHTML=x.format(D,{start:f,end:h,text:24===d?"全天投放":f+".00-"+h+".00",coverClass:n(o,"covertimes-tip")}),i.appendChild(E),_.addDOMEvent(o,E,"mouseover",x.curry(c,E))}}function c(e){e.style.display="none"}function C(e,t){for(var i=t.getElementsByTagName("aside"),n=i.length;n;){var r=i[0];if(null!=r.getAttribute("data-day"))_.clearDOMEvents(e,r),t.removeChild(r);n--}}function D(e,t,i,a){var o=e;t=t||r(o,"tip");var s=x.g(t);if(s)s.style.top=i.y+"px",s.style.left=i.x+"px",s.innerHTML=a;else{var l=";position:absolute;z-index:50;background:#fff6bd;top:"+i.y+"px;left:"+i.x+"px;display:none;",u=n(o,"shortcut-item-tip");s=document.createElement("div"),s.style.cssText=l,s.id=t,s.className=u,s.innerHTML=a,document.body.appendChild(s),o.followTip[t]=s}return o.tipElementTime=setTimeout(function(){s.style.display="block"},100),s}function d(e,t){clearTimeout(e.tipElementTime);var i=x.g(t);i&&(i.style.display="none")}function f(e){var t=x.event.getTarget(e);if("input"===t.nodeName.toLowerCase()){for(var i=this,n=t,r=parseInt(n.value,10),a=n.checked,o=b(i.rawValue),s=o[r],l=0,u=s.length;u>l;l++)s[l]=a?1:0;i.setRawValue(o)}}function h(e){var t=x.event.getTarget(e);if(t&&x.hasAttribute(t,"data-item")){var i=t.getAttribute("data-item"),n=this.shortcut[i].getValue;"function"==typeof n&&n.call(this);var r;if("function"==typeof n)r=n.call(this);else r=n;this.setRawValue(r)}}function E(e){var t=x.event.getTarget(e);if(t&&t.getAttribute("data-item")){var i=t,n=this;x.event.getMousePosition(e);var a={};a.y=e.pageY+20,a.x=e.pageX+10;var o=i,s=o.getAttribute("data-item"),l=r(n,"shortcut-item")+s;setTimeout(function(){var e=x.g(l);if(e)e.style.top=a.y+"px",e.style.left=a.x+"px"},0)}}function p(e,t){var i=x.event.getTarget(t);if(i&&i.getAttribute("data-item")){var n=i;x.event.getMousePosition(t);var a={};a.y=t.pageY+20,a.x=t.pageX+10;var o=this,s=n,l=s.getAttribute("data-item"),u=r(o,"shortcut-item")+l,A=_.getPartClasses(o,"shortcut-item-hover");if(e){x.addClasses(s,A);var B=o.shortcut[l].tip;D(o,u,a,B)}else x.removeClasses(s,A),d(o,u)}}function F(e){var t=x.event.getTarget(e);if(t&&t.getAttribute("data-time-item")){var i=t;x.addClasses(i,_.getPartClasses(this,"time-hover")),x.event.getMousePosition(e);var a={};a.y=e.pageY+20,a.x=e.pageX+10;var o=this,s=parseInt(i.getAttribute("data-time"),10),l=parseInt(i.getAttribute("data-day"),10),u=x.format(S,{time:"<strong>"+s+":00</strong>&nbsp;—&nbsp;<strong>"+(s+1)+":00</strong>",text:"点击/拖动鼠标选择",timeId:r(o,"timeitem-tip-head"),textId:r(o,"timeitem-tip-body"),timeClass:n(o,"timeitem-tip-head"),textClass:n(o,"timeitem-tip-body")}),A=r(o,"timeitem-tip");D(o,A,a,u);for(var B=x.g(r(o,"time-body")),c=B.getElementsByTagName("aside"),C=0,d=c.length;d>C;C++){var f=c[C],h=parseInt(f.getAttribute("data-start-time"),10),E=parseInt(f.getAttribute("data-end-time"),10),p=parseInt(f.getAttribute("data-day"),10);if(s>=h&&E>s&&l===p)f.style.display="none";else f.style.display="block"}}}function m(e){var t=x.event.getTarget(e);if(t&&t.getAttribute("data-time-item"))x.removeClasses(t,_.getPartClasses(this,"time-hover")),d(this,r(this,"timeitem-tip"))}function g(e){var t=this,i=document;O=x.bind(H,t),T=x.bind(G,t),x.on(i,"mousemove",O),x.on(i,"mouseup",T),x.event.getMousePosition(e),this.dragStartPos={x:e.pageX,y:e.pageY};var n=x.g(r(t,"time-body"));t.dragRange=[];var a=x.getOffset(n).top,o=x.getOffset(n).left;t.dragRange.push(a),t.dragRange.push(o+n.offsetWidth),t.dragRange.push(a+n.offsetHeight),t.dragRange.push(o),J(n);var s=v(this,{x:e.pageX,y:e.pageY}),l=r(t,"timeitem-tip");x.g(l)&&(x.g(l).style.display="none"),y(this,s)}function H(e){x.event.getMousePosition(e);var t=v(this,{x:e.pageX,y:e.pageY});y(this,t)}function G(e){var t=this;L(x.g(r(t,"time-body")));var i=x.g(r(t,"follow-item"));i.style.display="none",x.event.getMousePosition(e);var n=v(t,{x:e.pageX,y:e.pageY});setTimeout(function(){I(t,n)},10);var a=document;x.un(a,"mousemove",O),x.un(a,"mouseup",T)}function I(e,t){for(var i=e,n=t.startcell,r=t.endcell,a=Math.min(n.x,r.x),o=Math.min(n.y,r.y),s=Math.max(n.x,r.x),l=Math.max(n.y,r.y),u=b(i.rawValue),A=o;l>=A;A++)for(var B=a;s>=B;B++)if(u[A][B])u[A][B]=0;else u[A][B]=1;i.setRawValue(u)}function v(e,t){var i=e,n=i.dragRange,r=i.dragStartPos,a={};if(t.x<=n[1]&&t.x>=n[3])a.x=t.x;else a.x=t.x-r.x<0?n[3]:n[1];if(t.y<=n[2]&&t.y>=n[0])a.y=t.y;else a.y=t.y-r.y<0?n[0]:n[2];var o={startcell:{},endcell:{}};if(o.startcell.x=Math.floor((r.x-i.dragRange[3])/25),o.startcell.y=Math.floor((r.y-i.dragRange[0])/25),o.endcell.x=Math.floor((a.x-i.dragRange[3])/25),o.endcell.y=Math.floor((a.y-i.dragRange[0])/25),o.endcell.x>=23)o.endcell.x=23;if(o.endcell.y>=6)o.endcell.y=6;return o}function y(e,t){var i=e,a=r(e,"follow-item"),o=x.g(a);if(!o)o=document.createElement("div"),o.className=n(i,"follow-item"),o.id=a,x.g(r(i,"time-body")).appendChild(o);var s,l,u,A,B=t.startcell,c=t.endcell,C=B.x,D=B.y,d=c.x,f=c.y;if(f>=D)s=25*D,u=25*(f-D+1)-2;else s=25*f,u=25*(D-f+1)-2;if(d>=C)l=25*C,A=25*(d-C+1)-2;else l=25*d,A=25*(C-d+1)-2;var h=";display:block;;width:"+A+"px;height:"+u+"px;top:"+s+"px;left:"+l+"px;background:#faffbe";o.style.cssText+=h}function J(e){var t=document;if(x.on(t,"selectstart",M),e.setCapture)e.setCapture();else if(window.captureEvents)window.captureEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP);if(document.selection)document.selection.empty&&document.selection.empty();else if(window.getSelection)window.getSelection().removeAllRanges()}function L(e){var t=document;if(e.releaseCapture)e.releaseCapture();else if(window.releaseEvents)window.releaseEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP);x.un(t,"selectstart",M)}function M(e){x.event.preventDefault(e)}function b(e){for(var t=[],i=0,n=e.length;n>i;i++)t.push([].slice.call(e[i],0));return t}function N(e,t,i){for(var n=x.g(r(e,"day-head")),a=n.getElementsByTagName("input"),o=0,s=a.length;s>o;o++)a[o][t]=i}function K(e,t,i){for(var n=b(e.rawValue),r=0,a=i.length;a>r;r++){var o=i[r];if(null!=n[o[0]]&&null!=n[o[0]][o[1]])n[o[0]][o[1]]=t?1:0}e.setRawValue(n)}var x=require("./lib"),P=require("./InputControl"),_=require("./controlHelper");e.defaultProperties={helpSelectedText:"投放时间段",helpText:"暂停时间段",dayTexts:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],shortcut:t()};var O,T,S='<div id="${timeId}" class="${timeClass}">${time}</div><div id="${textId}" class="${textClass}">${text}</div>';return e.prototype={constructor:e,type:"Schedule",createMain:function(e){if(!e.tagName)return P.prototype.createMain.call(this);else return document.createElement(e.tagName)},initOptions:function(t){
var n={};if(x.extend(n,e.defaultProperties,t),this.setProperties(n),null==this.rawValue)this.setRawValue(i());this.followTip={}},initStructure:function(){var e=this;this.main.tabIndex=0;var t='<input type="hidden" name="${name}" id="${inputId}"/><div class="${bodyClass}" id="${bodyId}"></div><div class="${headClass}"><div class="${helpClass}"><div class="${helpSelectedClass}"></div><div class="${helpTextClass}">${helpSelected}</div><div class="${helpUnselectedClass}"></div><div class="${helpTextClass}">${help}</div></div><div class="${shortcutClass}" id="${shortcutId}">${shortcutHtml}</div></div>';this.main.innerHTML=x.format(t,{name:this.name,inputId:r(e,"value-input"),headClass:n(e,"head"),bodyClass:n(e,"body"),helpClass:n(e,"help"),helpSelectedClass:n(e,"help-selected"),helpUnselectedClass:n(e,"help-unselected"),helpTextClass:n(e,"help-text"),shortcutClass:n(e,"shortcut"),shortcutId:r(e,"shortcut"),bodyId:r(e,"body"),helpSelected:e.helpSelectedText,help:e.helpText,shortcutHtml:a(e)}),o(e)},initEvents:function(){var e=x.g(r(this,"time-body"));this.helper.addDOMEvent(e,"mousedown",g),this.helper.addDOMEvent(e,"mouseover",F),this.helper.addDOMEvent(e,"mouseout",m),this.helper.addDOMEvent(x.g(r(this,"day-head")),"click",f);var t=this.helper.getPart("shortcut");this.helper.addDOMEvent(t,"click",h),this.helper.addDOMEvent(t,"mouseover",x.curry(p,!0)),this.helper.addDOMEvent(t,"mouseout",x.curry(p,!1)),this.helper.addDOMEvent(t,"mousemove",E)},setProperties:function(e){var t=P.prototype.setProperties.call(this,e),i=t.rawValue;if(i&&this.stringifyValue(i.oldValue)!==this.stringifyValue(i.newValue))this.fire("change",{rawValue:this.rawValue})},repaint:_.createRepaint(P.prototype.repaint,{name:"rawValue",paint:function(e,t){var i=e.stringifyValue(t);x.g(r(e,"value-input")).value=null==i?"":i,A(e,t)}},{name:"disabled",paint:function(e,t){N(e,"disabled",t)}},{name:"readonly",paint:function(e,t){N(e,"readonly",t)}}),parseValue:function(e){for(var t=[],i=24,n=0,r=e.length;r>n;n+=i){for(var a=e.substring(n,n+i).split(""),o=[],s=0;s<a.length;s++)o.push(a[s]-0);t.push(o)}return t},stringifyValue:function(e){var t=[];if(!e)return null;for(var i=0,n=e.length;n>i;i++)t.push(e[i].join(""));return t.join("")},setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){return this.rawValue},select:function(e){K(this,1,[].slice.call(arguments))},unselect:function(e){K(this,0,[].slice.call(arguments))},dispose:function(){_.beforeDispose(this);var e=this.followTip;for(var t in e)if(e[t])document.body.removeChild(e[t]);_.dispose(this),_.afterDispose(this)}},x.inherits(e,P),require("./main").register(e),e}),define("mini-event/Event",["require","./lib"],function(require){function e(){return!0}function t(){return!1}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e,t){if("object"==typeof e)t=e,e=t.type;if(i(t))r.extend(this,t);else if(t)this.data=t;if(e)this.type=e}var r=require("./lib");n.prototype.isDefaultPrevented=t,n.prototype.preventDefault=function(){this.isDefaultPrevented=e},n.prototype.isPropagationStopped=t,n.prototype.stopPropagation=function(){this.isPropagationStopped=e},n.prototype.isImmediatePropagationStopped=t,n.prototype.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=e,this.stopPropagation()};var a=function(){return this}();n.fromDOMEvent=function(e,t,i){e=e||a.event;var r=new n(t,i);return r.preventDefault=function(){if(e.preventDefault)e.preventDefault();else e.returnValue=!1;n.prototype.preventDefault.call(this)},r.stopPropagation=function(){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=!0;n.prototype.stopPropagation.call(this)},r.stopImmediatePropagation=function(){if(e.stopImmediatePropagation)e.stopImmediatePropagation();n.prototype.stopImmediatePropagation.call(this)},r};var o={type:!0,target:!0,preventDefault:!0,isDefaultPrevented:!0,stopPropagation:!0,isPropagationStopped:!0,stopImmediatePropagation:!0,isImmediatePropagationStopped:!0};return n.fromEvent=function(e,t){var i={type:e.type,preserveData:!1,syncState:!1};t=r.extend(i,t);var a=new n(t.type);if(t.preserveData)for(var s in e)if(e.hasOwnProperty(s)&&!o.hasOwnProperty(s))a[s]=e[s];if(t.extend)r.extend(a,t.extend);if(t.syncState)a.preventDefault=function(){e.preventDefault(),n.prototype.preventDefault.call(this)},a.stopPropagation=function(){e.stopPropagation(),n.prototype.stopPropagation.call(this)},a.stopImmediatePropagation=function(){e.stopImmediatePropagation(),n.prototype.stopImmediatePropagation.call(this)};return a},n.delegate=function(e,t,i,a,o){var s="string"==typeof t,l={object:e,type:s?t:i},u={object:s?i:t,type:s?a:i},A=s?o:a;if(A=r.extend({preserveData:!1},A),"function"==typeof l.object.on&&"function"==typeof u.object.on&&"function"==typeof u.object.fire){var B=function(e){var t=n.fromEvent(e,A);t.type=u.type,t.target=u.object,u.object.fire(u.type,t)};l.object.on(l.type,B)}},n}),define("mini-event/main",["require","./Event"],function(require){var e=require("./Event");return{version:"1.0.2",Event:e,fromDOMEvent:e.fromDOMEvent,fromEvent:e.fromEvent,delegate:e.delegate}}),define("mini-event",["mini-event/main"],function(e){return e}),define("esui/TextBox",["require","underscore","./lib","./main","./InputControl","mini-event","./painters"],function(require){function e(e){u.apply(this,arguments)}function t(e){var t=e.which||e.keyCode;if(13===t)this.fire("enter");var i={keyCode:t,key:String.fromCharCode(t),ctrlKey:e.ctrlKey,altKey:e.altKey},n=require("mini-event").fromDOMEvent(e,"keypress",i);this.fire("keypress",n)}function i(e,t){var i=s.g(e.inputId);if(!A){var n=e.helper.getPart("placeholder");if("boolean"!=typeof t)t=document.activeElement===i;if(!t&&!e.getRawValue())e.helper.removePartClasses("placeholder-hidden",n);else e.helper.addPartClasses("placeholder-hidden",n)}}function n(e){if(i(this,!0),this.autoSelect){var t=s.g(this.inputId);t.select()}this.fire("focus")}function r(e){i(this,!1),this.fire("blur")}function a(e){if("input"===e.type||"value"===e.propertyName)this.fire("input")}var o=require("underscore"),s=require("./lib"),l=require("./main"),u=require("./InputControl"),A="placeholder"in document.createElement("input");return e.defaultProperties={width:200},e.prototype.type="TextBox",e.prototype.initOptions=function(t){var i={mode:"text",placeholder:"",autoSelect:!1};if(o.extend(i,e.defaultProperties),!i.name)i.name=this.main.getAttribute("name");if(s.isInput(this.main)){var n=this.main.nodeName.toLowerCase();if("textarea"===n)i.mode="textarea";else{var r=this.main.type;i.mode="password"===r?"password":"text"}if(!i.placeholder)i.placeholder=this.main.getAttribute("placeholder");this.helper.extractOptionsFromInput(this.main,i)}if(o.extend(i,t),!i.hasOwnProperty("title")&&this.main.title)i.title=this.main.title;this.setProperties(i)},e.prototype.getFocusTarget=function(){return s.g(this.inputId)},e.prototype.initStructure=function(){if(s.isInput(this.main)){var e=this.helper.replaceMain();if(s.removeAttribute(this.main,"tabindex"),this.inputId=e.id||this.helper.getId("input"),this.main.id)this.main.id=this.helper.getId();var t=e.cloneNode(!1);s.removeAttribute(t,l.getConfig("instanceAttr")),t.id=this.inputId,this.main.appendChild(t)}else{this.inputId=this.helper.getId("input");var i="textarea"===this.mode?'<textarea id="'+this.inputId+'"':'<input type="'+this.mode+'" placeholder="'+this.placeholder+'" id="'+this.inputId+'"';if(this.name)i+=' name="'+o.escape(this.name)+'"';i+="textarea"===this.mode?"></textarea>":" />",this.main.innerHTML=i}if(!A){var t=s.g(this.inputId),n=document.createElement("label");n.id=this.helper.getId("placeholder"),s.setAttribute(n,"for",t.id),this.helper.addPartClasses("placeholder",n),s.insertAfter(n,t)}},e.prototype.initEvents=function(){var e=s.g(this.inputId);this.helper.addDOMEvent(e,"keypress",t),this.helper.addDOMEvent(e,"focus",n),this.helper.addDOMEvent(e,"blur",r);var i="oninput"in e?"input":"propertychange";this.helper.addDOMEvent(e,i,a),this.helper.delegateDOMEvent(e,"change")},e.prototype.repaint=require("./painters").createRepaint(u.prototype.repaint,{name:"rawValue",paint:function(e,t){var n=s.g(e.inputId),r="oninput"in n?"input":"propertychange";e.helper.removeDOMEvent(n,r),n.value=e.stringifyValue(t),e.helper.addDOMEvent(n,r,a),i(e)}},{name:"title",paint:function(e,t){var i=s.g(e.inputId),n=e.helper.getPart("placeholder");if(t){if(s.setAttribute(e.main,"title",t),s.setAttribute(i,"title",t),n)s.setAttribute(n,"title",t)}else if(s.removeAttribute(e.main,"title"),s.removeAttribute(i,"title"),n)s.removeAttribute(n,"title")}},{name:"maxLength",paint:function(e,t){var i=s.g(e.inputId);if(t=parseInt(t,10),!t||0>=t){try{i.maxLength=void 0,delete i.maxLength}catch(n){}s.removeAttribute(i,"maxlength"),s.removeAttribute(i,"maxLength")}else i.maxLength=t,s.setAttribute(i,"maxlength",t)}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=s.g(e.inputId);n.disabled=t,n.readOnly=i}},{name:"placeholder",paint:function(e,t){var n=s.g(e.inputId);if(A)if(t)s.setAttribute(n,"placeholder",t);else s.removeAttribute(n,"placeholder");else{var r=e.helper.getPart("placeholder");r.innerHTML=o.escape(t||"")}i(e)}},{name:["hint","hintType"],paint:function(e,t,i){var n=e.helper.getPart("hint");if(e.removeState("hint-prefix"),e.removeState("hint-suffix"),!t&&n)s.removeNode(n);if(t){if(!n)n=document.createElement("label"),n.id=e.helper.getId("hint"),e.helper.addPartClasses("hint",n),s.setAttribute(n,"for",e.inputId);n.innerHTML=o.escape(t);var r=s.g(e.inputId);s.insertAfter(n,r),e.addState("hint-"+i)}}},{name:["width","hint","hidden"],paint:function(e,t,i,n){if(!n&&!isNaN(t)){if(i){var r=e.helper.getPart("hint");if(r)t-=r.offsetWidth}var a=s.g(e.inputId);a.style.width=t+"px";var o=e.helper.getPart("placeholder");if(o)o.style.maxWidth=t+"px"}}},{name:"height",paint:function(e,t){if(!isNaN(t)){var i=e.helper.getPart("hint"),n=t+"px";if(i)i.style.height=n,i.style.lineHeight=n;var r=s.g(e.inputId);r.style.height=n;var a=e.helper.getPart("placeholder");if(a)a.style.height=n,a.style.lineHeight=n}}}),e.prototype.getValidityLabel=function(){var e=u.prototype.getValidityLabel.apply(this,arguments);if(e)e.set("targetType","textarea"===this.mode?"TextArea":"TextBox");return e},e.prototype.getRawValue=function(){var e=s.g(this.inputId);return e?e.value:this.rawValue||this.value||""},e.prototype.getRawValueProperty=e.prototype.getRawValue,s.inherits(e,u),l.register(e),e}),define("esui/RichCalendar",["require","./Button","./MonthView","./TextBox","./lib","./controlHelper","./InputControl","./Layer","./main","moment","underscore"],function(require){function e(){p.apply(this,arguments)}function t(e){for(var t=e.displayNum,n='<div id="${id}" class="${className}">${monthView}</div>',r=[],a=0;t>a;a++)r.push(f.format(n,{id:e.helper.getId("month-"+a),className:e.helper.getPartClassName("month-container"),monthView:i(e,a)}));return f.format('<div id="${id}" class="${className}">${monthViews}</div>',{id:e.helper.getId("months"),className:e.helper.getPartClassName("months"),monthViews:r.join("")})}function i(e,t){var i='<div data-ui-type="MonthView" data-ui-child-name="${calName}" data-ui-mode="multi"></div>';return f.format(i,{calName:"monthView"+t})}function n(t){E.apply(this,arguments),this.layer=new e(this)}function r(e,t){for(var i=this.getRawValue(),n=e.displayNum,r=0;n>r;r++)if(r!==t){var a=e.getChild("monthView"+r);a.setRawValueWithoutFireChange(i)}e.rawValue=i,l(e,i)}function a(e,t){for(var i=e.displayNum,n=new Date(this.year,this.month,1),r=0;i>r;r++)if(r!==t){var o=e.getChild("monthView"+r);o.un("changemonth"),o.un("changeyear");var s,l=t-r;if(l>0)s=m(n).subtract("month",l);else s=m(n).add("month",-l);o.setProperties({month:s.month()+1,year:s.year()}),o.on("changeyear",f.curry(a,e,r)),o.on("changemonth",f.curry(a,e,r))}}function o(e,t){for(var i=e.displayNum,n=e.startMonth,r=e.startYear,a=0;i>a;a++){var o,l,u,A=e.range.begin,B=e.range.end,c=A.getFullYear(),C=A.getMonth(),D=B.getFullYear(),d=B.getMonth();if(0===a)l=new Date(D,d-i+2,0),o={begin:e.range.begin,end:l};else if(a===i-1)u=new Date(c,C+i-1,1),o={begin:u,end:e.range.end};else u=new Date(c,C+a,1),l=new Date(D,d-i-a+2,0),o={begin:u,end:l};var f={year:r,month:n+a,rawValue:e.rawValue,range:e.range,viewRange:o};s(e,f,a,t)}}function s(e,t,i,n){var o=e.getChild("monthView"+i);if(o.setProperties(t),n===!0)o.on("change",f.curry(r,e,i)),o.on("changeyear",f.curry(a,e,i)),o.on("changemonth",f.curry(a,e,i))}function l(e,t){var i=h.getId(e,"param-value");f.g(i).value=e.stringifyValue(t);var n=e.getChild("textInput"),r=C(e,t);n.setProperties({rawValue:r}),u(e,t),e.fire("change")}function u(e,t){var i=f.g(h.getId(e,"total-num"));i.innerHTML=t.length}function A(e){e.set("rawValue",[])}function B(e){var t=e.split(",");if(1===t.length)t.push("2046-11-04");else if(""===t[0])t[0]="1983-09-03";else if(""===t[1])t[1]="2046-11-04";return{begin:c(t[0]),end:c(t[1])}}function c(e){function t(e){var t=e.split("-");if(t)return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else return null}if(!e)return null;e+="";var i=e.split(" "),n=t(i[0]);if(i[1]){var r=i[1].split(":");n.setHours(r[0]),n.setMinutes(r[1]),n.setSeconds(r[2])}return n}function C(e,t){for(var i=[],n=[],r=0,a=864e5,o=0;o<t.length;o++)if(0===o)i.push(f.date.format(t[o],e.paramFormat)),n.push(t[o]),r++;else if(t[o]-t[o-1]>a){if(t[o-1]-n[r-1]!==0)i.push("至"),i.push(f.date.format(t[o-1],e.paramFormat)),n.push(t[o-1]),r++;i.push("\n"),i.push(f.date.format(t[o],e.paramFormat)),n.push(t[o]),r++}else if(o===t.length-1)i.push("至"),i.push(f.date.format(t[o],e.paramFormat));else continue;return i.join("")}function D(e){for(var t=this.getValue(),i=t.replace(/\n{2,}/g,"\n").split("\n"),n=[],r={},a=!1,o=0,s=i.length;s>o;o++){var l=f.trim(i[o]);if(0!==l.length&&!r[l]){r[l]=1;var u=l.split("至"),A=u[0],B=A;if(u.length>1)B=u[1];if(d(A)&&d(B))n.push(A),n.push(B);else a=!0}else;}var c=n.join(",");e.rawValue=e.parseValue(c),this.setProperties({rawValue:C(e,e.rawValue)}),e.fire("change")}function d(e){var t=/^(\d{4})(-)(\d{2})\2(\d{2})$/,i=e.match(t);if(null==i)return!1;var n=new Date(i[1],i[3]-1,i[4]),r=""+n.getFullYear()+i[2]+(n.getMonth()+1)+i[2]+n.getDate();return e=i[1]+i[2]+(i[3]-1+1)+i[2]+(i[4]-1+1),r===e}require("./Button"),require("./MonthView"),require("./TextBox");var f=require("./lib"),h=require("./controlHelper"),E=require("./InputControl"),p=require("./Layer"),F=require("./main"),m=require("moment"),g=require("underscore");return f.inherits(e,p),e.prototype.render=function(e){document.body.appendChild(e);var i=this.control;e.innerHTML=t(i),i.helper.initChildren(e),o(i,!0)},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden"))o(this.control,!0),this.show();else this.hide()},n.prototype={type:"RichCalendar",initOptions:function(e){var t=new Date,i={now:t,range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},paramFormat:"YYYY-MM-DD",rawValue:[],displayNum:2,startYear:t.getFullYear(),startMonth:t.getMonth()+1};if(h.extractValueFromInput(this,e),e.range&&"string"==typeof e.range)e.range=B(e.range);f.extend(i,e),this.setProperties(i)},setProperties:function(e){if(null==e.rawValue||0===e.rawValue.length)if(e.value)e.rawValue=this.parseValue(e.value);if(e.rawValue&&e.rawValue.length){var t=e.rawValue[0];e.startYear=t.getFullYear(),e.startMonth=t.getMonth()+1}var i=E.prototype.setProperties.apply(this,arguments);return i},initStructure:function(){if(f.isInput(this.main))h.replaceMain(this);var e=['<div class="${className}" id="${id}">','<textarea data-ui-type="TextBox"',' data-ui-mode="textarea"',' data-ui-width="${textBoxWidth}"',' data-ui-height="${textBoxHeight}"',' data-ui-child-name="textInput"></textarea>','<div data-ui-type="Panel" class="${generalPanelClass}"',' data-ui-child-name="generalPanel">','共<span id="${totalNumId}" ','class="${totalNumClass}"></span>天,','<span data-ui-type="Button" data-ui-skin="link"',' data-ui-child-name="deleteBtn">全部删除</span>',"</div>",'<div data-ui-type="Button" data-ui-skin="calendar"',' data-ui-child-name="modifyBtn">修改时间</div>',"</div>",'<input type="hidden" id="${inputId}" name="${name}"',' value="" />'],t=h.getPartClasses;this.main.innerHTML=f.format(e.join("\n"),{className:t(this,"text").join(" "),id:h.getId(this,"text"),textBoxWidth:this.textBoxWidth||200,textBoxHeight:this.textBoxHeight||100,name:this.name,inputId:h.getId(this,"param-value"),generalPanelClass:t(this,"general-info").join(" "),totalNumId:h.getId(this,"total-num"),totalNumClass:t(this,"total-num").join(" ")}),this.initChildren(this.main)},initEvents:function(){var e=this.getChild("modifyBtn");e.on("click",g.bind(this.layer.toggle,this.layer));var t=this.getChild("generalPanel").getChild("deleteBtn");t.on("click",f.curry(A,this));var i=this.getChild("textInput");i.on("blur",f.curry(D,this))},repaint:h.createRepaint(E.prototype.repaint,{name:["rawValue","range"],paint:function(e,t,i){if(i){if("string"==typeof i)i=B(i);if(!i.begin)i.begin=new Date(1983,8,3);else if(!i.end)i.end=new Date(2046,10,4);e.range=i}if(t)l(e,t);if(e.helper.getPart("months"))o(e)}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){return this.rawValue},stringifyValue:function(e){for(var t=[],i=864e5,n=0;n<e.length;n++){if(0===n)t.push(f.date.format(e[n],this.paramFormat));else if(e[n]-e[n-1]>i)t.push(f.date.format(e[n-1],this.paramFormat)),t.push(f.date.format(e[n],this.paramFormat));if(n===e.length-1)t.push(f.date.format(e[n],this.paramFormat))}return t.join(",")},getRanges:function(){for(var e=this.rawValue,t=this.stringifyValue(e).split(","),i=[],n=0;n<t.length-1;n+=2){var r=c(t[n]),a=c(t[n+1]);i.push({begin:r,end:a})}return i},setRanges:function(e){for(var t={},i=0;i<e.length;i++){var n,r=e[i].begin,a=e[i].end;if(r&&a)if(r-a===0)t[r]=r;else for(n=r;a>=n;)t[n]=n,n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);else;}var o=[];for(var s in t)o.push(t[s]);o.sort(function(e,t){return e-t}),this.set("rawValue",o)},parseValue:function(e){for(var t=e.split(","),i={},n=0;n<t.length-1;n+=2){var r,a=c(t[n]),o=c(t[n+1]);if(a&&o)if(a-o===0)i[a]=a;else for(r=a;o>=r;)i[r]=r,r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1);else;}var s=[];for(var l in i)s.push(i[l]);return s.sort(function(e,t){return e-t}),s},dispose:function(){if(!h.isInStage(this,"DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;E.prototype.dispose.apply(this,arguments)}}},f.inherits(n,E),F.register(n),n}),define("esui/Region",["require","./Select","./lib","./controlHelper","./InputControl","./main","underscore"],function(require){function e(e){G.apply(this,arguments)}function t(e){for(var t=e.regionData,i=t.length,n=[],r=0;i>r;r++)n.push(l(e,t[r],1));var a='<input type="hidden" id="${inputId}" name="${name}" />';n.push(g.format(a,{inputId:H.getId(e,"param-value"),name:e.name})),e.main.innerHTML=n.join("")}function i(e,t,n){t.call(n,e),v.each(e.children,function(e){i(e,t,n)})}function n(e,t){var n=e.regionDataIndex,o=[];v.each(t,function(e){var t=n[e];if(t)i(t,function(e){o.push(e.id)})});var s={};v.each(o,function(e){s[e]=1}),v.each(e.regionDataIndex,function(t,i){var n=s.hasOwnProperty(i),a=r(e,i);if(a)a.checked=n;else t.isSelected=n}),a(e),F(e)}function r(e,t){return g.g(H.getId(e,"item-"+t))}function a(e,t,i,n){var n=n||0;t=t||{children:e.regionData};var o=e.regionDataIndex[t.id];if(!i)e.rawValue=[];var l,u=0,A=t.id&&r(e,t.id),B=t.children,c=B instanceof Array&&B.length;if(c){for(var C=!0,D=0;c>D;D++){if(l=a(e,B[D],1,n+1))u++;C=C&&l}if(A)A.checked=C,C&&e.rawValue.push(t.id),o.isSelected=C;if(3===n)if(!C)s(e,u,c,t.id);else s(e,1,1,t.id);return C}else{if(A){if(A.checked)e.rawValue.push(t.id);return A.checked}else if(o.isSelected)e.rawValue.push(t.id);return o.isSelected}}function o(){return I.getConfig("stateClassPrefix")+"-hidden"}function s(e,t,i,n){var r=g.g(H.getId(e,"info-"+n));if(0!==t&&t!==i)g.removeClass(r,o()),r.innerHTML=t+"/"+i;else g.addClass(r,o()),r.innerHTML=""}function l(e,t,i){t.level=i;var n=[],r=t.children;if(null!=r)if(t.isSelected=!1,3===t.level){if(t.children&&t.children.length>0)e.cityCache[t.id]=u(e,t)}else for(var a=r instanceof Array&&r.length,s=0;a>s;s++){var A="";if(1===i&&3===e.regionDataLevel)A=l(e,t.children[s],i+2);else A=l(e,t.children[s],i+1);n.push(A)}switch(i){case 1:return g.format(J,{boxClass:H.getPartClasses(e,"country-box").join(" "),itemClasses:H.getPartClasses(e,"country-check").join(" "),itemWrapperId:"",itemValue:t.id,itemId:H.getId(e,"item-"+t.id),level:t.level,text:t.text,contentClass:"",content:n.join("")});case 2:return g.format(J,{boxClass:H.getPartClasses(e,"region-box"+b++%2).join(" "),itemClasses:H.getPartClasses(e,"region-check").join(" "),itemWrapperId:"",itemValue:t.id,itemId:H.getId(e,"item-"+t.id),level:t.level,text:t.text,contentClass:H.getPartClasses(e,"province-box").join(" "),content:n.join("")});case 3:var B=g.format(L,{popLayerClass:H.getPartClasses(e,"locator").join(" "),layerBoxClass:H.getPartClasses(e,"city-box").join(" "),hiddenClass:o(),id:H.getId(e,"sub-"+t.id),infoId:H.getId(e,"info-"+t.id),innerHTML:n.join("")}),c=g.format(y,{itemClasses:H.getPartClasses(e,"text").join(" "),itemWrapperId:H.getId(e,"wrapper-"+t.id),itemValue:t.id,itemId:H.getId(e,"item-"+t.id),level:t.level,text:t.text});return g.format(M,{classes:H.getPartClasses(e,"province-item").join(" "),content:B+c});case 4:return g.format(y,{itemClasses:H.getPartClasses(e,"city").join(" "),itemWrapperId:"",itemValue:t.id,itemId:H.getId(e,"item-"+t.id),level:t.level,text:t.text})}}function u(e,t){if(3===t.level&&null!=t.children){for(var i=[],n=0,r=0,a=0;a<t.children.length;a++){if(t.children[a].parent=t,t.children[a].level=t.level+1,i.push(l(e,t.children[a],t.level+1)),a%2===0&&t.children[a].text.length>n)n=t.children[a].text.length;if(a%2===1&&t.children[a].text.length>r)r=t.children[a].text.length}if(i.length%2===1)i.push("");for(var o=['<table border="0" cellspacing="0" cellpadding="0"',' width="',14*(n+r)+66,'">'].join(""),s=["<tr>",'<td width="',14*n+33,'">${firstItem}',"</td>",'<td width="',14*r+33,'">${secondItem}',"</td>","</tr>"].join(""),u=0;u<i.length;u+=2)o+=g.format(s,{firstItem:i[u],secondItem:i[u+1]});return o+"</table>"}return""}function A(e,t){function i(e,n){var r,a,o=e instanceof Array&&e.length;if(o)for(var r=0;o>r;r++){var a=g.clone(e[r]);a.parent=n,t.regionDataIndex[a.id]=a,i(a.children,a)}}var n=t.regionData;t.regionDataIndex={},i(n,{children:n})}function B(e){if(!this.disabled&&!this.readOnly)for(var t=e.target;t&&t!==document.body;){var i=!1;if("input"===t.nodeName.toLowerCase())i=!0;else if("label"===t.nodeName.toLowerCase()){var n=g.getAttribute(t,"for");t=g.g(n),i=!0}if(i)return c(this,t),void this.fire("change");t=t.parentNode}}function c(e,t,i){var n=g.getAttribute(t,"data-optionId"),o=t.checked,l=e.regionDataIndex[n];l.isSelected=o;var u=l.children,A=u instanceof Array&&u.length;if(A)v.each(u,function(t){var i=r(e,t.id);if(i)i.checked=o,c(e,i,1);else e.regionDataIndex[t.id].isSelected=o});else if(0===A)if(3===g.getAttribute(t,"level")){var B=0,C=e.regionDataIndex[n].parent.children;v.each(C,function(e){if(r(e.id).checked===!0)B++}),s(e,B,C.length,e.regionDataIndex[n].parent.id)}if(!i)a(e),F(e)}function C(e,t){if(!this.disabled&&!this.readOnly){var i=t.target,n=H.getPartClasses(this,"text"),r=H.getPartClasses(this,"city-box"),a=D;if("hide"===e)a=d;for(var o;i&&i!==document.body;){var s;if(g.hasClass(i,n[0]))o=g.getAttribute(i.firstChild,"value"),s=i.previousSibling.firstChild;else if(g.hasClass(i,r[0]))s=i;if(s)return void a(this,s,o);i=i.parentNode}}}function D(e,t,i){if(i){var r=e.cityCache[i];if(!r)return;t.innerHTML=r,n(e,e.rawValue)}g.removeClass(t,o());var a=t.parentNode.nextSibling;H.addPartClasses(e,"text-over",a)}function d(e,t,i){g.addClass(t,o());var n=t.parentNode.nextSibling;H.removePartClasses(e,"text-over",n)}function f(e,t){function i(e){var t=e.children,r=!!t;if(e.id)n.push({text:e.text,value:e.id,disabled:r});if(r)for(var a=t.length,o=0,a=t.length;a>o;o++)i(t[o])}var n=[];i({children:t.regionData}),t.singleRegionData=n}function h(e){var t='<div data-ui="type:Select;childName:regionSel;id:regionSel;width:100;"></div><input type="hidden" id="${inputId}" name="${name}" />';e.main.innerHTML=g.format(t,{inputId:H.getId(e,"param-value"),name:e.name}),e.initChildren(e.main);var i=e.getChild("regionSel");i.setProperties({datasource:e.singleRegionData}),i.on("change",g.bind(E,null,e,i))}function E(e,t){var i=parseInt(t.getValue(),10);e.rawValue=i,F(e)}function p(e,t){if("multi"===e.mode)for(var i=e.main.getElementsByTagName("input"),n=0,r=i.length;r>n;n++){var a=i[n];a.disabled=t}else{var o=e.getChild("regionSel");o.setProperties({disabled:t})}}function F(e){var t=g.g(H.getId(e,"param-value")),i=e.rawValue;if(g.isArray(i))t.value=i.join(",");else t.value=i}function m(e,t){var i=e.regionDataIndex,n=[];if(i[t.id]&&i[t.id].isSelected)n.push(t.id);else v.each(t.children,function(t){var r=i[t.id];n.push.apply(n,m(e,r))});return n}require("./Select");var g=require("./lib"),H=require("./controlHelper"),G=require("./InputControl"),I=require("./main"),v=require("underscore"),y=['<div class="${itemClasses}" id="${itemWrapperId}" >','<input type="checkbox" value="${itemValue}" id="${itemId}"',' data-optionId="${itemValue}" data-level="${level}">','<label for="${itemId}">${text}</label>',"</div>"].join(""),J=['<div class="${boxClass}">',y,'<div class="${contentClass}">${content}</div>',"</div>"].join(""),L=['<div class="${popLayerClass}">','<div class="${hiddenClass} ${layerBoxClass}" id="${id}">',"${innerHTML}</div>",'<b class="${hiddenClass}" id="${infoId}"></b>',"</div>"].join(""),M='<div class="${classes}">${content}</div>',b=0;return e.prototype={type:"Region",initOptions:function(t){var i={regionData:g.clone(e.REGION_LIST),regionDataLevel:4,mode:"multi",pureSelect:!1,rawValue:[]};if(H.extractValueFromInput(this,t),t.value)t.rawValue=t.value.split(",");if(g.extend(i,t),"multi"===i.mode)A(this,i),this.cityCache={};else i.rawValue="",f(this,i);if("false"===i.pureSelect)i.pureSelect=!1;this.setProperties(i)},initStructure:function(){if(g.isInput(this.main))H.replaceMain(this);if("multi"===this.mode)t(this);else h(this),g.addClass(this.main,H.getPartClasses(this,"single").join(" "))},initEvents:function(){if("multi"===this.mode)this.helper.addDOMEvent(this.main,"click",B),this.helper.addDOMEvent(this.main,"mouseover",g.curry(C,"show")),this.helper.addDOMEvent(this.main,"mouseout",g.curry(C,"hide"));else{var e=this.getChild("regionSel");e.on("change",g.bind(E,null,this,e))}},repaint:H.createRepaint(G.prototype.repaint,{name:"rawValue",paint:function(e,t){if("multi"===e.mode)n(e,t);else{var i=e.getChild("regionSel");i.setProperties({value:t})}}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=!0;if(t||i)n=!1;if(p(e,!n),!t&&i){var r=g.g(H.getId(e,"param-value"));r.disabled=!1}}}),setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){if("single"===this.mode)return this.getChild("regionSel").getValue();if(this.pureSelect){var e={id:"-100",children:this.regionData},t=m(this,e);return t}return this.rawValue},stringifyValue:function(e){if("multi"===this.mode)return e.join(",");else return e},parseValue:function(e){return e.split(",")},checkRegion:function(e){var t=r(this,e);if(t)t.checked=!0,c(this,t);else{var i=this.regionDataIndex[e];if(i)i.isSelected=!0,a(this),F(this)}}},e.REGION_LIST=[{id:"90",text:"中国",children:[{id:"80",text:"华北地区",children:[{id:"1",text:"北京",children:[{id:"742",text:"昌平区"},{id:"743",text:"朝阳区"},{id:"744",text:"崇文区"},{id:"745",text:"大兴区"},{id:"746",text:"东城区"},{id:"747",text:"房山区"},{id:"748",text:"丰台区"},{id:"749",text:"海淀区"},{id:"750",text:"怀柔区"},{id:"751",text:"门头沟区"},{id:"752",text:"密云县"},{id:"753",text:"平谷区"},{id:"754",text:"石景山区"},{id:"755",text:"顺义区"},{id:"756",text:"通州区"},{id:"757",text:"西城区"},{id:"758",text:"宣武区"},{id:"759",text:"延庆县"}]},{id:"3",text:"天津",children:[{id:"760",text:"宝坻区"},{id:"761",text:"北辰区"},{id:"763",text:"东丽区"},{id:"765",text:"河北区"},{id:"766",text:"河东区"},{id:"767",text:"和平区"},{id:"768",text:"河西区"},{id:"769",text:"红桥区"},{id:"770",text:"蓟县"},{id:"771",text:"津南区"},{id:"772",text:"静海县"},{id:"773",text:"南开区"},{id:"774",text:"宁河县"},{id:"776",text:"武清区"},{id:"777",text:"西青区"},{id:"900",text:"滨海新区"}]},{id:"15",text:"河北",children:[{id:"226",text:"保定市"},{id:"228",text:"沧州市"},{id:"229",text:"承德市"},{id:"230",text:"邯郸市"},{id:"231",text:"衡水市"},{id:"234",text:"廊坊市"},{id:"236",text:"秦皇岛市"},{id:"239",text:"石家庄市"},{id:"240",text:"唐山市"},{id:"241",text:"邢台市"},{id:"242",text:"张家口市"}]},{id:"24",text:"内蒙古",children:[{id:"428",text:"阿拉善盟"},{id:"429",text:"巴彦淖尔市"},{id:"430",text:"包头市"},{id:"431",text:"赤峰市"},{id:"432",text:"鄂尔多斯市"},{id:"434",text:"呼和浩特市"},{id:"435",text:"呼伦贝尔市"},{id:"437",text:"通辽市"},{id:"438",text:"乌海市"},{id:"439",text:"乌兰察布市"},{id:"442",text:"锡林郭勒盟"},{id:"444",text:"兴安盟"}]},{id:"28",text:"山西",children:[{id:"486",text:"大同市"},{id:"491",text:"晋城市"},{id:"492",text:"晋中市"},{id:"493",text:"临汾市"},{id:"494",text:"吕梁市"},{id:"495",text:"朔州市"},{id:"496",text:"太原市"},{id:"497",text:"忻州市"},{id:"498",text:"阳泉市"},{id:"501",text:"运城市"},{id:"502",text:"长治市"}]}]},{id:"81",text:"东北地区",children:[{id:"17",text:"黑龙江",children:[{id:"272",text:"大庆市"},{id:"273",text:"大兴安岭地区"},{id:"276",text:"哈尔滨市"},{id:"278",text:"鹤岗市"},{id:"279",text:"黑河市"},{id:"282",text:"鸡西市"},{id:"284",text:"佳木斯市"},{id:"287",text:"牡丹江市"},{id:"289",text:"七台河市"},{id:"290",text:"齐齐哈尔市"},{id:"291",text:"双鸭山市"},{id:"293",text:"绥化市"},{id:"298",text:"伊春市"}]},{id:"20",text:"吉林",children:[{id:"345",text:"白城市"},{id:"346",text:"白山市"},{id:"351",text:"吉林市"},{id:"352",text:"辽源市"},{id:"355",text:"四平市"},{id:"356",text:"松原市"},{id:"358",text:"通化市"},{id:"359",text:"延边朝鲜族自治州"},{id:"361",text:"长春市"}]},{id:"23",text:"辽宁",children:[{id:"413",text:"鞍山市"},{id:"414",text:"本溪市"},{id:"415",text:"朝阳市"},{id:"416",text:"大连市"},{id:"417",text:"丹东市"},{id:"418",text:"抚顺市"},{id:"419",text:"阜新市"},{id:"421",text:"葫芦岛市"},{id:"422",text:"锦州市"},{id:"423",text:"辽阳市"},{id:"424",text:"盘锦市"},{id:"425",text:"沈阳市"},{id:"426",text:"铁岭市"},{id:"427",text:"营口市"}]}]},{id:"82",text:"华东地区",children:[{id:"2",text:"上海",children:[{id:"818",text:"宝山区"},{id:"819",text:"崇明县"},{id:"820",text:"奉贤区"},{id:"821",text:"虹口区"},{id:"822",text:"黄浦区"},{id:"823",text:"嘉定区"},{id:"824",text:"金山区"},{id:"825",text:"静安区"},{id:"826",text:"卢湾区"},{id:"827",text:"闵行区"},{id:"830",text:"浦东新区"},{id:"831",text:"普陀区"},{id:"832",text:"青浦区"},{id:"833",text:"松江区"},{id:"834",text:"徐汇区"},{id:"835",text:"杨浦区"},{id:"836",text:"闸北区"},{id:"837",text:"长宁区"}]},{id:"8",text:"安徽",children:[{id:"101",text:"安庆市"},{id:"102",text:"蚌埠市"},{id:"103",text:"亳州市"},{id:"104",text:"巢湖市"},{id:"105",text:"池州市"},{id:"106",text:"滁州市"},{id:"107",text:"阜阳市"},{id:"110",text:"合肥市"},{id:"111",text:"淮北市"},{id:"112",text:"淮南市"},{id:"113",text:"黄山市"},{id:"115",text:"六安市"},{id:"116",text:"马鞍山市"},{id:"118",text:"铜陵市"},{id:"119",text:"芜湖市"},{id:"120",text:"宿州市"},{id:"121",text:"宣城市"}]},{id:"9",text:"福建",children:[{id:"124",text:"福州市"},{id:"126",text:"龙岩市"},{id:"127",text:"南平市"},{id:"128",text:"宁德市"},{id:"129",text:"莆田市"},{id:"130",text:"泉州市"},{id:"131",text:"三明市"},{id:"132",text:"厦门市"},{id:"138",text:"漳州市"}]},{id:"21",text:"江苏",children:[{id:"363",text:"常州市"},{id:"367",text:"淮安市"},{id:"375",text:"连云港市"},{id:"376",text:"南京市"},{id:"377",text:"南通市"},{id:"381",text:"苏州市"},{id:"383",text:"泰州市"},{id:"386",text:"无锡市"},{id:"391",text:"宿迁市"},{id:"392",text:"徐州市"},{id:"393",text:"盐城市"},{id:"395",text:"扬州市"},{id:"399",text:"镇江市"}]},{id:"22",text:"江西",children:[{id:"401",text:"抚州市"},{id:"402",text:"赣州市"},{id:"403",text:"吉安市"},{id:"404",text:"景德镇市"},{id:"406",text:"九江市"},{id:"407",text:"南昌市"},{id:"408",text:"萍乡市"},{id:"409",text:"上饶市"},{id:"410",text:"新余市"},{id:"411",text:"宜春市"},{id:"412",text:"鹰潭市"}]},{id:"27",text:"山东",children:[{id:"461",text:"滨州市"},{id:"462",text:"德州市"},{id:"463",text:"东营市"},{id:"466",text:"菏泽市"},{id:"467",text:"济南市"
},{id:"468",text:"济宁市"},{id:"470",text:"莱芜市"},{id:"472",text:"聊城市"},{id:"473",text:"临沂市"},{id:"474",text:"青岛市"},{id:"476",text:"日照市"},{id:"477",text:"泰安市"},{id:"479",text:"威海市"},{id:"480",text:"潍坊市"},{id:"481",text:"烟台市"},{id:"482",text:"枣庄市"},{id:"485",text:"淄博市"}]},{id:"34",text:"浙江",children:[{id:"604",text:"杭州市"},{id:"605",text:"湖州市"},{id:"606",text:"嘉兴市"},{id:"608",text:"金华市"},{id:"611",text:"丽水市"},{id:"615",text:"宁波市"},{id:"617",text:"衢州市"},{id:"619",text:"绍兴市"},{id:"621",text:"台州市"},{id:"624",text:"温州市"},{id:"630",text:"舟山市"}]}]},{id:"83",text:"华中地区",children:[{id:"16",text:"河南",children:[{id:"243",text:"安阳市"},{id:"246",text:"鹤壁市"},{id:"249",text:"焦作市"},{id:"250",text:"开封市"},{id:"252",text:"漯河市"},{id:"253",text:"洛阳市"},{id:"254",text:"南阳市"},{id:"255",text:"平顶山市"},{id:"256",text:"濮阳市"},{id:"257",text:"三门峡市"},{id:"258",text:"商丘市"},{id:"261",text:"新乡市"},{id:"262",text:"信阳市"},{id:"263",text:"许昌市"},{id:"266",text:"郑州市"},{id:"267",text:"周口市"},{id:"268",text:"驻马店市"},{id:"901",text:"济源市"}]},{id:"18",text:"湖北",children:[{id:"304",text:"鄂州市"},{id:"305",text:"恩施市"},{id:"307",text:"黄冈市"},{id:"308",text:"黄石市"},{id:"309",text:"荆门市"},{id:"310",text:"荆州市"},{id:"311",text:"潜江市"},{id:"312",text:"神农架林区"},{id:"313",text:"十堰市"},{id:"314",text:"随州市"},{id:"315",text:"天门市"},{id:"317",text:"武汉"},{id:"319",text:"仙桃市"},{id:"320",text:"咸宁市"},{id:"321",text:"襄樊市"},{id:"323",text:"孝感市"},{id:"324",text:"宜昌市"}]},{id:"19",text:"湖南",children:[{id:"328",text:"常德市"},{id:"329",text:"郴州市"},{id:"330",text:"衡阳市"},{id:"331",text:"怀化市"},{id:"334",text:"娄底市"},{id:"335",text:"邵阳市"},{id:"337",text:"湘潭市"},{id:"338",text:"湘西土家族苗族自治州"},{id:"339",text:"益阳市"},{id:"340",text:"永州市"},{id:"341",text:"岳阳市"},{id:"342",text:"张家界市"},{id:"343",text:"长沙市"},{id:"344",text:"株洲市"}]}]},{id:"84",text:"华南地区",children:[{id:"11",text:"广东",children:[{id:"157",text:"潮州市"},{id:"158",text:"东莞市"},{id:"160",text:"佛山市"},{id:"162",text:"广州市"},{id:"163",text:"河源市"},{id:"164",text:"惠州市"},{id:"166",text:"江门市"},{id:"167",text:"揭阳市"},{id:"169",text:"茂名市"},{id:"170",text:"梅州市"},{id:"172",text:"清远市"},{id:"173",text:"汕头市"},{id:"174",text:"汕尾市"},{id:"175",text:"韶关市"},{id:"176",text:"深圳市"},{id:"180",text:"阳江市"},{id:"182",text:"云浮市"},{id:"184",text:"湛江市"},{id:"185",text:"肇庆市"},{id:"186",text:"中山市"},{id:"187",text:"珠海市"}]},{id:"12",text:"广西",children:[{id:"188",text:"百色市"},{id:"189",text:"北海市"},{id:"191",text:"防城港市"},{id:"193",text:"贵港市"},{id:"194",text:"桂林市"},{id:"195",text:"河池市"},{id:"196",text:"贺州市"},{id:"197",text:"来宾市"},{id:"198",text:"柳州市"},{id:"199",text:"南宁市"},{id:"200",text:"钦州市"},{id:"201",text:"梧州市"},{id:"203",text:"玉林市"}]},{id:"14",text:"海南",children:[{id:"218",text:"儋州市"},{id:"219",text:"东方市"},{id:"220",text:"海口市"},{id:"221",text:"琼海市"},{id:"223",text:"三亚市"},{id:"225",text:"文昌市"},{id:"867",text:"五指山"},{id:"868",text:"万宁"}]}]},{id:"85",text:"西南地区",children:[{id:"4",text:"重庆",children:[{id:"778",text:"巴南区"},{id:"779",text:"北碚区"},{id:"780",text:"璧山县"},{id:"781",text:"城口县"},{id:"782",text:"大渡口区"},{id:"783",text:"大足县"},{id:"784",text:"垫江县"},{id:"785",text:"丰都县"},{id:"786",text:"奉节县"},{id:"787",text:"涪陵区"},{id:"788",text:"合川区"},{id:"789",text:"江北区"},{id:"790",text:"江津区"},{id:"791",text:"九龙坡区"},{id:"792",text:"开县"},{id:"793",text:"梁平县"},{id:"794",text:"南岸区"},{id:"795",text:"南川区"},{id:"796",text:"彭水县"},{id:"797",text:"綦江县"},{id:"798",text:"黔江区"},{id:"799",text:"荣昌县"},{id:"800",text:"沙坪坝区"},{id:"801",text:"石柱县"},{id:"802",text:"双桥区"},{id:"803",text:"铜梁县"},{id:"804",text:"潼南县"},{id:"805",text:"万盛区"},{id:"806",text:"万州区"},{id:"807",text:"巫山县"},{id:"808",text:"巫溪县"},{id:"809",text:"武隆县"},{id:"810",text:"秀山县"},{id:"811",text:"永川区"},{id:"812",text:"酉阳县"},{id:"813",text:"渝北区"},{id:"814",text:"渝中区"},{id:"815",text:"云阳县"},{id:"816",text:"长寿区"},{id:"817",text:"忠县"}]},{id:"13",text:"贵州",children:[{id:"204",text:"安顺市"},{id:"205",text:"毕节市"},{id:"208",text:"贵阳市"},{id:"210",text:"六盘水市"},{id:"211",text:"黔东南苗族侗族自治州"},{id:"212",text:"黔南布依族苗族自治州"},{id:"213",text:"黔西南布依族苗族自治州"},{id:"215",text:"铜仁市"},{id:"217",text:"遵义市"}]},{id:"30",text:"四川",children:[{id:"516",text:"阿坝藏族羌族自治州"},{id:"517",text:"巴中市"},{id:"518",text:"成都市"},{id:"519",text:"达州市"},{id:"520",text:"德阳市"},{id:"523",text:"甘孜藏族自治州"},{id:"524",text:"广安市"},{id:"526",text:"广元市"},{id:"528",text:"乐山市"},{id:"529",text:"凉山彝族自治州"},{id:"530",text:"泸州市"},{id:"531",text:"眉山市"},{id:"532",text:"绵阳市"},{id:"534",text:"南充市"},{id:"535",text:"内江市"},{id:"536",text:"攀枝花市"},{id:"538",text:"遂宁市"},{id:"540",text:"雅安市"},{id:"541",text:"宜宾市"},{id:"542",text:"资阳市"},{id:"543",text:"自贡市"}]},{id:"31",text:"西藏",children:[{id:"546",text:"拉萨市"},{id:"547",text:"林芝地区"},{id:"548",text:"那曲地区"},{id:"549",text:"日喀则地区"}]},{id:"33",text:"云南",children:[{id:"578",text:"保山市"},{id:"579",text:"楚雄市"},{id:"580",text:"大理市"},{id:"581",text:"德宏傣族景颇族自治州"},{id:"585",text:"红河哈尼族彝族自治州"},{id:"587",text:"昆明市"},{id:"589",text:"丽江市"},{id:"590",text:"临沧市"},{id:"593",text:"普洱市"},{id:"594",text:"曲靖市"},{id:"595",text:"文山市"},{id:"597",text:"玉溪市"},{id:"598",text:"昭通市"}]}]},{id:"86",text:"西北地区",children:[{id:"10",text:"甘肃",children:[{id:"139",text:"白银市"},{id:"140",text:"定西市"},{id:"144",text:"嘉峪关市"},{id:"145",text:"金昌市"},{id:"146",text:"酒泉市"},{id:"147",text:"兰州市"},{id:"148",text:"临夏回族自治州"},{id:"150",text:"陇南市"},{id:"151",text:"平凉市"},{id:"152",text:"庆阳市"},{id:"153",text:"天水市"},{id:"154",text:"武威市"},{id:"156",text:"张掖市"}]},{id:"25",text:"宁夏",children:[{id:"446",text:"固原市"},{id:"447",text:"石嘴山市"},{id:"448",text:"吴忠市"},{id:"449",text:"银川市"},{id:"450",text:"中卫市"}]},{id:"26",text:"青海",children:[{id:"454",text:"海东地区"},{id:"456",text:"海西蒙古族藏族自治州"},{id:"458",text:"西宁市"},{id:"459",text:"玉树藏族自治州"}]},{id:"29",text:"陕西",children:[{id:"503",text:"安康市"},{id:"504",text:"宝鸡市"},{id:"506",text:"汉中市"},{id:"508",text:"商洛市"},{id:"509",text:"铜川市"},{id:"510",text:"渭南市"},{id:"511",text:"西安市"},{id:"512",text:"咸阳市"},{id:"513",text:"延安市"},{id:"515",text:"榆林市"}]},{id:"32",text:"新疆",children:[{id:"551",text:"阿克苏地区"},{id:"554",text:"阿勒泰市"},{id:"556",text:"巴音郭楞蒙古自治州"},{id:"557",text:"博尔塔拉蒙古自治州"},{id:"560",text:"昌吉回族自治州"},{id:"563",text:"哈密市"},{id:"564",text:"和田市"},{id:"565",text:"喀什市"},{id:"566",text:"克拉玛依市"},{id:"570",text:"石河子市"},{id:"571",text:"塔城市"},{id:"572",text:"吐鲁番市"},{id:"573",text:"乌鲁木齐市"},{id:"576",text:"伊犁市"},{id:"869",text:"克孜勒苏柯尔克孜"},{id:"870",text:"五家渠"}]}]},{id:"87",text:"港澳台",children:[{id:"5",text:"澳门"},{id:"6",text:"香港"},{id:"7",text:"台湾"}]}]},{id:"999",text:"国外"},{id:"0",text:"其他"}],g.inherits(e,G),I.register(e),e}),define("esui/RangeCalendar",["require","./Button","./MonthView","./CheckBox","./Label","inf-i18n","moment","underscore","./lib","./InputControl","./controlHelper","./Layer","./main"],function(require){function e(){M.apply(this,arguments)}function t(e,t,i){if("render"===i){if(!e.hideShortCut){var n=e.helper.getPart("shortcut");L.addDOMEvent(e,n,"click",f)}var r=e.getChild("endlessCheck");if(r)if(r.on("change",y.curry(A,e)),e.isEndless)r.setChecked(!0),e.helper.addPartClasses("shortcut-disabled",e.helper.getPart(e));var a=e.getChild("okBtn");a.on("click",y.curry(E,e));var o=e.getChild("cancelBtn");o.on("click",v.bind(e.layer.hide,e.layer));var s=e.getChild("closeBtn");s.on("click",v.bind(e.layer.hide,e.layer))}else{e.view.begin=t.begin,e.view.end=t.end,e.value=e.convertToParam(t);var l;if(!t.end)l=!0;else l=!1;e.setProperties({isEndless:l})}d(e,"begin",e.view.begin,"render"===i),d(e,"end",e.view.end,"render"===i);var u=c(e,e.view);D(e,u)}function i(t){this.now=new Date,J.apply(this,arguments),this.layer=new e(this)}function n(e){var t="";if(!e.hideShortCut)t+='<div class="${shortCutClass}" id="${shortcutId}">${shortCut}</div>';return t+='<div class="${bodyClass}">${beginCalendar}${endCalendar}</div><div class="${footClass}"><div class="${okBtnClass}" data-ui="type:Button;childName:okBtn;skin:ok">'+G("确定")+'</div><div class="${cancelBtnClass}" data-ui="type:Button;childName:cancelBtn;skin:cancel">'+G("取消")+'</div></div><div data-ui="type:Button;childName:closeBtn;skin:layerClose;height:12;"></div>',y.format(t,{bodyClass:e.helper.getPartClassName("body"),shortcutId:e.helper.getId("shortcut"),shortCutClass:e.helper.getPartClassName("shortcut"),shortCut:s(e),beginCalendar:l(e,"begin"),endCalendar:l(e,"end"),footClass:e.helper.getPartClassName("foot"),okBtnClass:e.helper.getPartClassName("okBtn"),cancelBtnClass:e.helper.getPartClassName("cancelBtn")})}function r(e){return I(e).startOf("day").toDate()}function a(e){return I(e).endOf("day").toDate()}function o(e,t){var i=e.range,n=t.getValue.call(e,e.now);if(r(i.begin)>r(i.begin)||a(n.end)<a(n.end))return!0;else return!1}function s(e){for(var t=e.shownShortCut.split(","),i={},n=0;n<t.length;n++)i[t[n]]=!0;for(var r='<span data-index="${shortIndex}" class="'+e.helper.getPartClassName("shortcut-item")+' ${shortClass}" id="${shortId}">${shortName}</span>',a=e.shortCutItems,s=a.length,l=[],u=0;s>u;u++){var A=a[u];if(i[A.name]){var B=A.name,c=[];if(0===u)c=c.concat(e.helper.getPartClasses("shortcut-item-first"));var C=o(e,A);if(C)c=c.concat(e.helper.getPartClasses("shortcut-item-disabled"));var D=e.helper.getId("shortcut-item"+u);l.push(y.format(r,{shortIndex:u,shortClass:c.join(" "),shortId:D,shortName:B}))}}return l.join("")}function l(e,t){var i="";if(e.endlessCheck&&"end"===t)i='<input type="checkbox" title="不限结束" data-ui-type="CheckBox" data-ui-child-name="endlessCheck" />';var n="begin"===t?e.rawValue.begin:e.rawValue.end;if(n)var r=I(n).format("YYYY-MM-DD HH:mm:ss");var a='<div class="${frameClass}"><div class="${labelClass}"><h3>${labelTitle}</h3>'+i+'</div><div class="${calClass}"><div data-ui="type:MonthView;childName:${calName}"'+(e.time?'data-ui-time="true" data-ui-value="'+r+'"':"")+"></div></div></div>";return y.format(a,{frameClass:e.helper.getPartClassName(t),labelClass:e.helper.getPartClassName("label"),labelTitle:"begin"===t?"开始日期":"结束日期",titleId:e.helper.getId(t+"Label"),calClass:e.helper.getPartClassName(t+"-cal"),calName:t+"Cal"})}function u(e,t){e.getChild("hourInput").setProperties({readOnly:t}),e.getChild("minuteInput").setProperties({readOnly:t}),e.getChild("secondInput").setProperties({readOnly:t})}function A(e){var t=e.getChild("endCal"),i=e.helper.getPart("shortcut");if(this.isChecked()){if(e.isEndless=!0,t.disable(),e.view.end=null,e.helper.addPartClasses("shortcut-disabled",i),t.time)u(t,!0)}else if(e.isEndless=!1,t.enable(),h.apply(e,[t,"end"]),e.helper.removePartClasses("shortcut-disabled",i),t.time)u(t,!1)}function B(e,t){if(!e&&t||e&&!t)return!1;else if(!e&&!t)return!0;return I(e).isSame(t,"day")}function c(e,t){for(var i=e.shortCutItems,n=i.length,r=0;n>r;r++){var a=i[r],o=a.getValue.call(e,e.now);if(B(t.begin,o.begin)&&B(t.end,o.end))return r}return-1}function C(e,t){var i=e,n=e.shortCutItems;if(!(0>t||t>=n.length)){var r=n[t].getValue.call(i,i.now),a=r.begin,o=r.end,s=g({begin:a,end:o},t);a=s.begin,o=s.end,e.view={begin:a,end:o},d(e,"begin",a),d(e,"end",o),D(i,t)}}function D(e,t){if(!e.hideShortCut){var i=e.shortCutItems,n=e.miniMode;if(null!==n&&n!==t)e.helper.removePartClasses("shortcut-item-selected",e.helper.getPart("shortcut-item"+n));if(e.miniMode=t,t>=0)e.helper.addPartClasses("shortcut-item-selected",e.helper.getPart("shortcut-item"+t)),e.curMiniName=i[t].name;else e.curMiniName=null}}function d(e,t,i,n){var r=e.getChild(t+"Cal");if(r){if(n===!0)r.on("change",v.bind(h,e,r,t)),r.on("changemonth",v.bind(H,null,e));r.setProperties({rawValue:i,range:e.range})}}function f(e){if(!this.isEndless)for(var t=e.target||e.srcElement,i=this.helper.getPartClasses("shortcut-item"),n=this.helper.getPartClasses("shortcut-item-disabled");t&&t!==document.body;){if(y.hasClass(t,i[0])&&!y.hasClass(t,n[0])){var r=t.getAttribute("data-index");return void C(this,r)}t=t.parentNode}}function h(e,t){var i=e.getRawValue();if(i){this.view[t]=i;var n=c(this,this.view);D(this,n),H(this)}}function E(e){var t=e,i=e.view,n=i.begin,r=i.end;if(e.isEndless)r=null;var a=r-n;if(!r)a=n;var o;if(a>0)o={begin:n,end:r};else if(null!==r)o={begin:r,end:n};var s=t.fire("beforechange",{value:o});if(s.isDefaultPrevented())return!1;else return t.rawValue=o,t.value=t.convertToParam(o),p(t,o),t.getChild("beginCal").setRawValue(o.begin),t.getChild("endCal").setRawValue(o.end),t.layer.hide(),void t.fire("change",o)}function p(e,t){var i=e.helper.getPart("text");i.innerHTML=F(e,t)}function F(e,t){var i=m(e,t);if(e.isEndless&&i)return i;var n="";if(!e.curMiniName&&null!==e.miniMode&&e.miniMode>=0&&e.miniMode<e.shortCutItems.length)e.curMiniName=e.shortCutItems[e.miniMode].name;if(e.curMiniName)n=e.curMiniName+"&nbsp;&nbsp;";if(i)return n+i;else return""}function m(e,t){t=t||e.getRawValue();var i=t.begin,n=t.end,r=e.dateFormat;if(i&&n)return I(i).format(r)+" - "+I(n).format(r);else if(!n)return I(i).format(r)+" 起 ";return""}function g(e,t){if(3!==t)e.end.setHours("23"),e.end.setMinutes("59"),e.end.setSeconds("59");return e.begin.setHours("0"),e.begin.setMinutes("0"),e.begin.setSeconds("0"),e}function H(e){function t(e,t){var n=new Date(e.year,e.month,1);n=I(n);for(var r=n.clone().endOf("month"),s=n;r>=s;){var l=!0;if("begin"===t&&(s<=I(a)||s>I(o)))l=!1;else if("end"===t&&(s<I(a)||s>=I(o)))l=!1;i(e,s.toDate(),l),s.add("day",1)}}function i(e,t,i){var n=e.getDateItemHTML(t);if(i)e.helper.addPartClasses("month-item-highlight",n);else e.helper.removePartClasses("month-item-highlight",n)}var n=e.getChild("beginCal"),r=e.getChild("endCal"),a=e.view.begin,o=e.view.end;t(n,"begin"),t(r,"end")}require("./Button"),require("./MonthView"),require("./CheckBox"),require("./Label");var G=require("inf-i18n"),I=require("moment"),v=require("underscore"),y=require("./lib"),J=require("./InputControl"),L=require("./controlHelper"),M=require("./Layer"),b=require("./main");return y.inherits(e,M),e.prototype.render=function(e){var i=this.control;document.body.appendChild(e),e.innerHTML=n(i),i.helper.initChildren(e),t(i,i.view,"render")},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden")){var i=this.control;t(i,i.rawValue,"repaint"),this.show()}else this.hide()},e.prototype.hide=function(){M.prototype.hide.call(this);var e=this.control.getChild("beginCal"),t=this.control.getChild("endCal");if(e&&t){var i=e.getChild("yearSel"),n=t.getChild("monthSel");i&&i.layer.hide(),n&&n.layer.hide()}},i.prototype.convertToParam=function(e){var t=e.begin,i=e.end,n=[];if(n.push(I(t).format(this.dateFormat)),i)n.push(I(i).format(this.dateFormat));return n.join(",")},i.prototype.convertToRaw=function(e,t){var i=e.split(",");if(1===i.length)i.push("2046-11-04");else if(""===i[0])i[0]="1983-09-03";else if(""===i[1])i[1]="2046-11-04";var n=t?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD";return{begin:I(i[0],n).toDate(),end:I(i[1],n).toDate()}},i.defaultProperties={dateFormat:"YYYY-MM-DD",endlessCheck:!1,shortCutItems:[{name:G("昨天"),value:0,getValue:function(){var e=new Date;e.setDate(e.getDate()-1);var t=new Date(this.now.getTime());return t.setDate(t.getDate()-1),g({begin:e,end:t},0)}},{name:G("最近7天"),value:1,getValue:function(){var e=I(this.now);return g({begin:e.clone().subtract("day",7).toDate(),end:e.clone().subtract("day",1).toDate()},1)}},{name:G("上周"),value:2,getValue:function(){var e=this.now,t=new Date(e.getTime()),i=new Date(e.getTime()),n=1;if(t.getDay()<n%7)t.setDate(t.getDate()-14+n-t.getDay());else t.setDate(t.getDate()-7-t.getDay()+n%7);return t.setHours(0,0,0,0),i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+6),i.setHours(0,0,0,0),g({begin:t,end:i},2)}},{name:G("本月"),value:3,getValue:function(){return g({begin:I(this.now).startOf("month").toDate(),end:I(this.now).toDate()},3)}},{name:G("上个月"),value:4,getValue:function(){var e=I(this.now).subtract("month",1).startOf("month").toDate(),t=I(this.now).startOf("month").subtract("day",1).toDate();return g({begin:e,end:t},4)}},{name:G("上个季度"),value:5,getValue:function(){var e=this.now,t=I(e).subtract("month",e.getMonth()%3+3).startOf("month").toDate(),i=I(e).subtract("month",e.getMonth()%3).startOf("month").subtract("day",1).toDate();return g({begin:t,end:i},5)}}]},i.prototype.type="RangeCalendar",i.prototype.initOptions=function(e){var t=this.now,n={begin:t,end:t},r={range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},rawValue:n,view:v.clone(n),value:this.convertToParam(n),shownShortCut:[G("昨天"),G("最近7天"),G("上周"),G("本月"),G("上个月"),G("上个季度")].join(","),hideShortCut:!1};if(y.extend(r,i.defaultProperties),L.extractValueFromInput(this,e),e.value)e.rawValue=this.convertToRaw(e.value,e.time),e.view={begin:e.rawValue.begin,end:e.rawValue.end},e.miniMode=null;else if(e.rawValue)e.miniMode=null;else if(!e.rawValue&&null!=e.miniMode){var a=r.shortCutItems[e.miniMode];if(a)e.rawValue=a.getValue.call(this,this.now),e.miniMode=parseInt(e.miniMode,10);else e.miniMode=null}if(y.extend(r,e),r.range&&"string"==typeof r.range)r.range=this.convertToRaw(r.range,r.time);if("false"===r.endlessCheck)r.endlessCheck=!1;if(r.endlessCheck){if("false"===r.isEndless)r.isEndless=!1}else if(!r.rawValue.end)r.endlessCheck=!0,r.isEndless=!0;if(r.isEndless)r.endlessCheck=!0,r.rawValue.end=null,r.view.end=null,r.view.value=this.convertToParam({begin:t,end:null});if("true"===r.time||r.time===!0)r.time=!0,r.dateFormat="YYYY-MM-DD HH:mm:ss";this.setProperties(r)},i.prototype.initStructure=function(){if(y.isInput(this.main))L.replaceMain(this);var e=['<div class="${className}" id="${id}"></div>','<div class="${arrow}"></div>'];this.main.innerHTML=y.format(e.join("\n"),{className:this.helper.getPartClassName("text"),id:L.getId(this,"text"),arrow:this.helper.getPartClassName("arrow")})},i.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"mousedown",v.bind(this.layer.toggle,this.layer))},i.prototype.repaint=L.createRepaint(J.prototype.repaint,{name:["rawValue","range"],paint:function(e,i,n){if(n){if("string"==typeof n)n=e.convertToRaw(n,e.time);if(!n.begin)n.begin=new Date(1983,8,3);else if(!n.end)n.end=new Date(2046,10,4);e.range=n}if(i)p(e,i);if(e.layer)t(e,i)}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}},{name:"isEndless",paint:function(e,t){if(!e.endlessCheck)e.isEndless=!1;else{var i=e.getChild("endlessCheck");if(i)i.setChecked(t)}}}),i.prototype.setRawValue=function(e){this.setProperties({rawValue:e})},i.prototype.getRawValue=function(){return this.rawValue},i.prototype.stringifyValue=function(e){return this.convertToParam(e)||""},i.prototype.parseValue=function(e){return this.convertToRaw(e,this.time)},i.prototype.dispose=function(){if(!L.isInStage(this,"DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;J.prototype.dispose.apply(this,arguments)}},y.inherits(i,J),b.register(i),i}),define("esui/Pager",["require","underscore","./lib","./main","./Control","./Select","./painters"],function(require){function e(e){var t=['<div id="${pagerWrapperId}" class="${pagerWrapperClass}">','<div id="${selectWrapperId}" ','class="${selectWrapperClass}">','<span id="${labelId}" class="${labelClass}">',"${labelText}</span>",'<div data-ui="type:Select;childName:select;','id:${selectId};width:50;"></div>',"</div>",'<ul id="${mainId}" class="${mainClass}"></ul>',"</div>"];return B.format(t.join(""),{pagerWrapperId:e.helper.getId("pager-wrapper"),pagerWrapperClass:e.helper.getPartClasses(e.layout)[0],selectWrapperId:e.helper.getId("select-wrapper"),selectWrapperClass:e.helper.getPartClassName("select-wrapper"),labelId:e.helper.getId("label"),labelClass:e.helper.getPartClassName("label"),labelText:"每页显示",selectId:e.helper.getId("select"),mainId:e.helper.getId("main"),mainClass:e.helper.getPartClassName("main")})}function t(e){function t(t){return B.format(e.urlTemplate,{page:t,pageSize:e.pageSize})}function i(i,n,r,a){var o={className:e.helper.getPartClassName(i)};if(arguments.length>1)o.link=t(n),o.id=e.helper.getId(r),o.page=n,o.text=a;return o}function n(t,i){if(!i){var n={anchor:o,plain:a};i=n[e.pageType]||n.anchor}return B.format(i,t)}function r(e,t){if("number"==typeof e)e=i("item",e,"page-"+e,e);var r=n(e,t);C.push(r)}var a='<li class="${className}" id="${id}" data-page="${page}">${text}</li>',o='<li class="${className}" id="${id}"><a href="${link}">${text}</a></li>',s='<li class="${className}">…</li>',l=e.page,u=e.backCount,A=e.forwardCount,c=Math.ceil(e.count/e.pageSize),C=[];if(l>1){var D=i("item-extend",l-1,"page-back",e.backText);r(D)}else{var D=i("item-extend-disabled",l-1,"page-back-disabled",e.backText);r(D)}if(l>u+1)if(r(1),l>u+2){var D=i("item-omit");r(D,s)}for(var d=l>u?u:l-1,f=l-d;l>f;f++)r(f);var D=i("item-current",l,"page-"+l,l);r(D,a);for(var d=c-l>A?A:c-l,f=l+1;l+d+1>f;f++)r(f);if(c-A>l){if(c-A-1>l){var D=i("item-omit");r(D,s)}r(c)}if(c>l){var D=i("item-extend",l+1,"page-forward",e.forwardText);r(D)}else{var D=i("item-extend-disabled",l+1,"page-forward-disabled",e.forwardText);r(D)}return C.join("")}function i(e){var i=e.pageSize;i=i>0?i:1,e.pageSize=i,e.getChild("select").set("value",i+"");var n=Math.ceil(e.count/i),r=e.page;r=r>n?n:r,r=r>0?r:1,e.page=r;var a=e.helper.getPart("main");a.innerHTML=t(e)}function n(e,t){function i(){for(var t=[],i=0,n=arguments.length;n>i;i++)t.push(e.helper.getPartClasses(arguments[i])[0]);return t}var n=e.helper.getPart("pager-wrapper");B.removeClasses(n,i("alignLeft","alignLeftReversed","alignRight","alignRightReversed","distributed","distributedReversed")),B.addClass(n,e.helper.getPartClasses(t)[0])}function r(e){var t=e.target;if(this.helper.isPart(t,"disabled"))return!1;var i=this.helper.getId("page-back"),n=this.helper.getId("page-forward"),r=this.page;if(this.helper.isPart(t,"item")||this.helper.isPart(t,"item-extend")){if(t.id===i)r--;else if(t.id===n)r++;else r=+B.getAttribute(t,"data-page");this.set("page",r)}}function a(e){var t=A.map(e,function(e){return{text:e+"",value:e+""}});return t}function o(e){var t=parseInt(this.getChild("select").getValue()||this.pageSize,10);this.pageSize=t,i(this),this.fire("changepagesize"),this.fire("pagesizechange")}function s(e){var t=e.helper.getPart("select-wrapper");e.helper.removePartClasses("select-hidden",t)}function l(e){var t=e.helper.getPart("select-wrapper");e.helper.addPartClasses("select-hidden",t)}function u(e){C.apply(this,arguments)}var A=require("underscore"),B=require("./lib"),c=require("./main"),C=require("./Control");return require("./Select"),u.defaultProperties={},u.prototype={type:"Pager",defaultProperties:{pageSizes:[15,30,50,100],pageSize:15},initOptions:function(e){var t={pageType:"anchor",count:0,page:1,backCount:3,forwardCount:3,backText:"上一页",forwardText:"下一页",urlTemplate:"",layout:"alignLeft"};A.extend(t,this.defaultProperties,u.defaultProperties,e),this.setProperties(t)},initStructure:function(){this.main.innerHTML=e(this),this.helper.initChildren();var t=this.getChild("select");if(!this.pageSizes||!this.pageSizes.length)l(this);else{var i={datasource:a(this.pageSizes),value:this.pageSize+""};t.setProperties(i)}o.call(this)},initEvents:function(){var e=this.getChild("select");e.on("change",o,this),this.helper.addDOMEvent("main","click",r)},setProperties:function(e){if(e=A.clone(e),e.hasOwnProperty("pageIndex")&&!e.hasOwnProperty("page"))e.page=+e.pageIndex+1;var t=["count","page","backCount","forwardCount","pageSize"];A.each(t,function(t){var i=e[t];if(A.isString(i))e[t]=+i});var i=C.prototype.setProperties.apply(this,arguments);if(i.hasOwnProperty("page"))this.fire("changepage"),this.fire("pagechange")},repaint:require("./painters").createRepaint(C.prototype.repaint,{name:"pageSizes",paint:function(e,t){var i=e.getChild("select");if(!t||!t.length)l(e);else{var n={datasource:a(t),value:e.pageSize+""};i.setProperties(n),s(e)}}},{name:"layout",paint:n},{name:["pageType","count","pageSize","page","backCount","forwardCount","backText","forwardText","urlTemplate"],paint:i}),getPageIndex:function(){return this.get("page")-1}},B.inherits(u,C),c.register(u),u}),define("esui/Link",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){n.apply(this,arguments)}var t=require("underscore"),i=require("./lib"),n=require("./Control"),r=require("./painters");return e.prototype={constructor:e,type:"Link",getCategory:function(){return"container"},createMain:function(){return document.createElement("a")},initOptions:function(e){var i={};if(t.extend(i,e),null==e.href)i.href=this.main.href;if(null==e.target)i.target=this.main.target;if(null==e.content)i.content=this.main.innerHTML;t.extend(this,i)},initEvents:function(){this.helper.delegateDOMEvent(this.main,"click")},render:function(){if(this.main&&"a"===this.main.nodeName.toLowerCase())n.prototype.render.apply(this,arguments)},repaint:r.createRepaint(n.prototype.repaint,r.attribute("href"),r.attribute("target"),{name:"content",paint:function(e,t){e.helper.disposeChildren(),e.main.innerHTML=t,e.helper.initChildren()}})},i.inherits(e,n),require("./main").register(e),e}),define("esui/Label",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(e){n.apply(this,arguments)}var t=require("underscore"),i=require("./lib"),n=require("./Control");e.prototype.type="Label",e.prototype.createMain=function(e){if(!e.tagName)return n.prototype.createMain.call(this);else return document.createElement(e.tagName)},e.prototype.initOptions=function(e){var n={};if(t.extend(n,e),n.tagName=this.main.nodeName.toLowerCase(),null==e.text)n.text=i.trim(i.getText(this.main));t.extend(this,n)},e.prototype.initEvents=function(){this.helper.delegateDOMEvent(this.main,"click")};var r=require("./painters");return e.prototype.repaint=r.createRepaint(n.prototype.repaint,{name:"title",paint:function(e){e.title&&e.main.setAttribute("title",e.title)}},r.text("text"),{name:"forTarget",paint:function(e,t){if("label"===e.main.nodeName.toLowerCase())e.helper.addDOMEvent(e.main,"mousedown",function n(){var e=this.viewContext.get(t),r=e&&"function"==typeof e.getFocusTarget&&e.getFocusTarget();if(r&&r.id)i.setAttribute(this.main,"for",r.id);this.helper.removeDOMEvent(this.main,"mousedown",n)})}}),e.prototype.setText=function(e){this.setProperties({text:e})},e.prototype.getText=function(){return this.text},e.prototype.setTitle=function(e){this.setProperties({title:e})},e.prototype.getTitle=function(){return this.title},i.inherits(e,n),require("./main").register(e),e}),define("esui/Frame",["require","esui/lib","esui/Control","esui/painters","esui"],function(require){function e(e){i.apply(this,arguments)}var t=require("esui/lib"),i=require("esui/Control");e.prototype.type="Frame",e.prototype.createMain=function(){return document.createElement("iframe")},e.prototype.initOptions=function(e){var i={};if(t.extend(i,e),!i.src)i.src=this.main.src;this.setProperties(i)},e.prototype.initStructure=function(){this.main.frameborder="no",this.main.marginHeight="0",this.main.marginWeight="0"},e.prototype.initEvents=function(){this.helper.delegateDOMEvent(this.main,"load"),this.helper.addDOMEvent(this.main,"message",function(e){var t={origin:e.origin,data:e.data};this.fire("message",t)})};var n=require("esui/painters");return e.prototype.repaint=n.createRepaint(i.prototype.repaint,{name:"src",paint:function(e,t){if(e.main.src!==t)e.main.src=t}},n.style("height"),n.style("width")),e.prototype.callContentMethod=function(e){var t=[].slice.call(arguments,1),i=this.main.contentWindow;if(!i)throw new Error("No content window on this iframe");if("function"!=typeof i[e])throw new Error('No "'+e+'" method on window');return i[e].apply(i,t)},e.prototype.postMessage=function(e,t){var i=this.main.contentWindow;if(!i)throw new Error("No content window on this iframe");if("function"!=typeof i.postMessage)throw new Error("Current browser does not support postMessage");i.postMessage(e,t)},t.inherits(e,i),require("esui").register(e),e}),define("esui/Panel",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){a.apply(this,arguments)}function t(e,t){var i=this.main,r=document.createElement("div");r.innerHTML=e;for(var a=n.extend({},this.renderOptions,{viewContext:this.viewContext,parent:this}),o=r.childNodes,s=[],l=0;l<o.length;l++)s.push(o[l]);var u=require("./main");n.each(s,function(e){if(t)i.insertBefore(e,i.firstChild);else i.appendChild(e);u.init(i,a)})}function i(e){if(e.indexOf("-")>=0)e=e.replace(/-\w/g,function(e){return e.charAt(1).toUpperCase()});return e}var n=require("underscore"),r=require("./lib"),a=require("./Control");return e.prototype.type="Panel",e.prototype.getCategory=function(){return"container"},e.prototype.createMain=function(e){if(!e.tagName)return a.prototype.createMain.call(this);else return document.createElement(e.tagName)},e.prototype.initOptions=function(e){var t={};n.extend(t,e),t.tagName=this.main.nodeName.toLowerCase(),this.setProperties(t)},e.prototype.repaint=require("./painters").createRepaint(a.prototype.repaint,{name:"content",paint:function(e,t){if(null!=t)e.helper.disposeChildren(),e.main.innerHTML=t;e.helper.initChildren()}}),e.prototype.setContent=function(e){this.setProperties({content:e})},e.prototype.prependContent=function(e){t.call(this,e,!0)},e.prototype.appendContent=function(e){t.call(this,e,!1)},e.prototype.getStyle=function(e){return e=i(e),this.main?this.main.style[e]:""},e.prototype.setStyle=function(e,t){if(e=i(e),this.main)this.main.style[e]=t||""},r.inherits(e,a),require("./main").register(e),e}),define("esui/Form",["require","underscore","./lib","./main","./Panel"],function(require){function e(e){this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}function t(e,t){for(var i={},n=0;n<e.length;n++){var r=e[n];if("check"!==r.getCategory()||r.isChecked())if(!r.isDisabled()){var a=r.get("name"),o=t(r);if(i.hasOwnProperty(a))i[a]=[].concat(i[a],o);else i[a]=o}else;else;}return i}function i(e){s.apply(this,arguments)}function n(e){var t=e.getCategory();return"input"===t||"check"===t}var r=require("underscore"),a=require("./lib"),o=require("./main"),s=require("./Panel");return e.prototype.splice=Array.prototype.splice,e.prototype.getData=function(){return t(this,function(e){return e.getRawValue()})},e.prototype.getDataAsString=function(){var e=t(this,function(e){var t=e.getValue();return encodeURIComponent(t)}),i="";return r.each(e,function(e,t){i+=encodeURIComponent(t)+"="+e}),i},e.prototype.getValueAsString=function(e){var t=this.getData(),i=t[e],n=i?"string"==typeof i?i:i.join(","):"";return n},e.prototype.checkAll=function(){for(var e=0;e<this.length;e++){var t=this[e];if("check"===t.getCategory())t.setChecked(!0)}},e.prototype.uncheckAll=function(){for(var e=0;e<this.length;e++){var t=this[e];if("check"===t.getCategory())t.setChecked(!1)}},e.prototype.checkInverse=function(){for(var e=0;e<this.length;e++){var t=this[e];if("check"===t.getCategory())t.setChecked(!t.isChecked())}},e.prototype.checkByValue=function(e){for(var t=a.toDictionary(e),i=0;i<this.length;i++){var n=this[i];if("check"===n.getCategory()){var r=t.hasOwnProperty(n.getValue());n.setChecked(r)}}},i.defaultProperties={autoValidate:!1},i.prototype.type="Form",i.prototype.validateAndSubmit=function(){var e=this.fire("beforevalidate");if(!e.isDefaultPrevented())try{var t=this.get("autoValidate")?this.validate():!0,e=this.fire("aftervalidate",{isValid:t});if(e.isDefaultPrevented())return;var i={triggerSource:this};if(t)this.fire("submit",i);else this.fire("invalid",i)}catch(n){this.fire("submitfail",{error:n})}},i.prototype.initEvents=function(){if("form"===this.main.nodeName.toLowerCase())this.helper.addDOMEvent(this.main,"submit",function(e){return this.validateAndSubmit(),e.preventDefault(),!1})},i.prototype.createMain=function(e){var t=document.createElement("form");return t.method="POST",t.action=e.action||"",t},i.prototype.initOptions=function(e){var t=r.extend({},i.defaultProperties,e);if("form"===this.main.nodeName.toLowerCase())t.action=this.main.getAttribute("action"),t.method=this.main.getAttribute("method");else t.method=this.method||"POST";if("false"===e.autoValidate)t.autoValidate=!1;else t.autoValidate=!!t.autoValidate;s.prototype.initOptions.call(this,t)},i.prototype.getInputControls=function(t,i){function r(e,s){for(var l=s.children,u=l.length,A=0;u>A;A++){
var B=l[A];if(1===B.nodeType){var c=o.getControlByDOM(B);if(c&&n(c)&&c.viewContext===e.viewContext&&c.get("name")&&(!t||c.get("name")===t)&&(!i||c.get("type")===i))a.push(c);else r(e,B)}else;}}var a=[];return r(this,this.main),new e(a)},i.prototype.getData=function(){var e=this.getInputControls();return e.getData()},i.prototype.getDataAsString=function(){var e=this.getInputControls();return e.getDataAsString()},i.prototype.validate=function(){for(var e=this.getInputControls(),t=!0,i=0;i<e.length;i++){var n=e[i];if(!n.isDisabled())t&=n.validate();else;}return!!t},i.prototype.repaint=function(e,t){s.prototype.repaint.apply(this,arguments);var i=!1;if(!t&&this.submitButton)i=!0;if(t&&t.hasOwnProperty("submitButton")){var n=t.submitButton;if(n.oldValue){for(var r=0;r<n.oldValue.length;r++){var a=this.viewContext.get(n.oldValue[r]);if(a)a.un("click",this.validateAndSubmit,this)}i=!!this.submitButton}}if(i)for(var r=0;r<this.submitButton.length;r++){var o=this.viewContext.get(this.submitButton[r]);if(o)o.on("click",this.validateAndSubmit,this)}},i.prototype.setProperties=function(e){e=r.clone(e),e.submitButton=a.splitTokenList(e.submitButton),s.prototype.setProperties.call(this,e)},a.inherits(i,s),o.register(i),i}),define("esui/Crumb",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){a.apply(this,arguments)}function t(e){for(var t=e.target,n=r.getChildren(this.main);t!==this.main;){if(this.helper.isPart(t,"node")){var a=r.hasAttribute(t,"data-index")?t.getAttribute("data-index"):i(n,t),o=this.fire("click",{item:this.path[a]});return o.isDefaultPrevented()&&e.preventDefault(),void(o.isPropagationStopped()&&e.stopPropagation())}t=t.parentNode}}function i(e,t){for(var i=e.length-1;i>-1;i-=2)if(e[i]===t)return i/2}var n=require("underscore"),r=require("./lib"),a=require("./Control");e.defaultProperties={separator:">"},e.prototype.type="Crumb",e.prototype.initOptions=function(t){var i={path:[]};n.extend(i,e.defaultProperties,t);var a=r.getChildren(this.main);if(!t.path&&a.length)i.path=n.map(a,function(e){var t={text:r.getText(e)};if("a"===e.nodeName.toLowerCase())t.href=r.getAttribute(e,"href");return t});this.setProperties(i)},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",t)},e.prototype.textNodeTemplate='<span class="${classes}" data-index="${index}">${text}</span>',e.prototype.linkNodeTemplate='<a class="${classes}" href="${href}" data-index="${index}">${text}</a>',e.prototype.separatorTemplate='<span class="${classes}">${text}</span>',e.prototype.getNodeHTML=function(e,t){var i=this.helper.getPartClasses("node");if(0===t)i.push.apply(i,this.helper.getPartClasses("node-first"));if(t===this.path.length-1)i.push.apply(i,this.helper.getPartClasses("node-last"));var a=e.href?this.linkNodeTemplate:this.textNodeTemplate,o={href:n.escape(e.href),text:n.escape(e.text),index:t,classes:i.join(" ")};return r.format(a,o)},e.prototype.getSeparatorHTML=function(){return r.format(this.separatorTemplate,{classes:this.helper.getPartClassName("separator"),text:n.escape(this.separator)})};var o=require("./painters");return e.prototype.repaint=o.createRepaint(a.prototype.repaint,{name:["path","separator"],paint:function(e,t){var i=n.map(t,e.getNodeHTML,e),r=e.getSeparatorHTML();e.main.innerHTML=i.join(r)}}),require("./main").register(e),r.inherits(e,a),e}),define("esui/CommandMenu",["require","underscore","./lib","./Control","./Layer","./painters","./main"],function(require){function e(e){for(var t=e.target;t!==e.currentTarget&&!r.hasAttribute(t,"data-index");)t=t.parentNode;var i=+t.getAttribute("data-index"),n=this.datasource[i];if(!n.disabled)if(this.layer.hide(),t!==e.currentTarget){if(n)if("function"==typeof n.handler)n.handler.call(this,n,i);this.fire("select",{item:n,index:i})}}function t(){o.apply(this,arguments)}function i(){a.apply(this,arguments),this.layer=new t(this)}var n=require("underscore"),r=require("./lib"),a=require("./Control"),o=require("./Layer");r.inherits(t,o),t.prototype.nodeName="ul",t.prototype.dock={strictWidth:!0},t.prototype.render=function(e){for(var t="",i=0;i<this.control.datasource.length;i++){var n=this.control.helper.getPartClasses("node");if(i===this.control.activeIndex)n.push.apply(n,this.control.helper.getPartClasses("node-active"));if(this.control.datasource[i].disabled)n.push.apply(n,this.control.helper.getPartClasses("node-disabled"));t+='<li data-index="'+i+'" class="'+n.join(" ")+'">',t+=this.control.getItemHTML(this.control.datasource[i])}e.innerHTML=t},t.prototype.initBehavior=function(t){this.control.helper.addDOMEvent(t,"click",e)},i.prototype.type="CommandMenu",i.prototype.itemTemplate="<span>${text}</span>",i.prototype.getItemHTML=function(e){var t={text:n.escape(e.text)};return r.format(this.itemTemplate,t)},i.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",n.bind(this.layer.toggle,this.layer))};var s=require("./painters");return i.prototype.repaint=s.createRepaint(a.prototype.repaint,s.style("width"),s.style("height"),{name:"datasource",paint:function(e){e.layer.repaint()}},s.text("displayText"),{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),i.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;a.prototype.dispose.apply(this,arguments)}},r.inherits(i,a),require("./main").register(i),i}),define("esui/CheckBox",["require","underscore","./lib","./InputControl","./painters","./main"],function(require){function e(e){var t=n.g(this.boxId).checked;this.setProperties({checked:t})}function t(){r.apply(this,arguments)}var i=require("underscore"),n=require("./lib"),r=require("./InputControl");return t.prototype={type:"CheckBox",createMain:function(){return document.createElement("label")},getCategory:function(){return"check"},initOptions:function(e){var t={value:this.main.value||"on",checked:this.main.checked||!1};i.extend(t,e),t.name=t.name||this.main.getAttribute("name");var n=t.datasource;if(delete t.datasource,this.setProperties(t),null!=n)if(i.isArray(n))this.checked=i.any(n,function(e){return e.value==this.value},this);else if(this.rawValue==n)this.checked=!0;if(!this.title)this.title=this.main.title||("on"===this.getValue()?"":this.getValue())},initStructure:function(){if("input"===this.main.nodeName.toLowerCase())this.boxId=this.main.id||this.helper.getId("box"),this.helper.replaceMain(),this.main.id=this.helper.getId();else this.boxId=this.helper.getId("box");var e='<input type="checkbox" name="${name}" id="${id}" /><span id="${textId}"></span>';this.main.innerHTML=n.format(e,{name:this.name,id:this.boxId,textId:this.helper.getId("text")})},initEvents:function(){var t=n.g(this.boxId);if(this.helper.addDOMEvent(t,"click",function(i){if(this.fire("click"),!t.addEventListener)e.call(this,i)}),t.addEventListener)this.helper.addDOMEvent(t,"change",e)},setProperties:function(e){var t=r.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("checked"))this.fire("change")},getFocusTarget:function(){var e=n.g(this.boxId);return e},updateTitle:function(e){this.title=e,e=i.escape(e),this.helper.getPart("text").innerHTML=e,n.setAttribute(this.boxId,"title",e)},repaint:require("./painters").createRepaint(r.prototype.repaint,{name:["rawValue","checked"],paint:function(e,t,i){var r=e.stringifyValue(t),e=n.g(e.boxId);e.value=r,e.checked=i}},{name:["disabled","readOnly"],paint:function(e,t,i){var e=n.g(e.boxId);e.disabled=t,e.readOnly=i}},{name:"title",paint:function(e,t){e.updateTitle(t)}}),setChecked:function(e){this.setProperties({checked:e})},isChecked:function(){if(this.helper.isInStage("RENDERED")){var e=n.g(this.boxId);return e.checked}else return this.checked}},n.inherits(t,r),require("./main").register(t),t}),define("esui/Layer",["require","underscore","./lib","./main","mini-event/EventTarget"],function(require){function e(e){this.control=e}function t(e){if(this.control.active){var t=e.target,i=this.getElement(this),n=this.control.main;if(!i)return;for(;t&&t!==i&&t!==n;)t=t.parentNode;if(t!==i&&t!==n)this.hide()}}function i(e){var t=e.control.helper.getPartClasses("layer-hidden");return t.unshift(o.getConfig("uiClassPrefix")+"-layer-hidden"),t}function n(e,t){var i=a.clone(t||{});if(i.hasOwnProperty("top")&&i.hasOwnProperty("bottom"))i.height=i.bottom-i.top,delete i.bottom;if(i.hasOwnProperty("left")&&i.hasOwnProperty("right"))i.width=i.right-i.left,delete i.right;if(i.hasOwnProperty("top")||i.hasOwnProperty("bottom"))e.style.top="",e.style.bottom="";if(i.hasOwnProperty("left")||i.hasOwnProperty("right"))e.style.left="",e.style.right="";for(var n in i)if(i.hasOwnProperty(n))e.style[n]=i[n]+"px"}var r=require("underscore"),a=require("./lib"),o=require("./main");e.prototype.nodeName="div",e.prototype.autoHide=!0,e.prototype.enableAutoHide=function(e){var t="onwheel"in document.body?"wheel":"mousewheel";this.control.helper.addDOMEvent(document.documentElement,t,r.bind(this.hide,this)),this.control.helper.addDOMEvent(e,t,function(e){e.stopPropagation()})},e.prototype.create=function(){var e=this.control.helper.createPart("layer",this.nodeName);if(a.addClass(e,o.getConfig("uiClassPrefix")+"-layer"),this.autoHide)this.enableAutoHide(e);return e},e.prototype.addCustomClasses=function(e){var t=this.getElement();a.addClasses(t,e)},e.prototype.render=function(e){},e.prototype.syncState=function(e){},e.prototype.repaint=function(){var e=this.getElement(!1);if(e)this.render(e)},e.prototype.initBehavior=function(e){},e.prototype.getElement=function(e){var n=this.control.helper.getPart("layer");if(!n&&e!==!1){if(n=this.create(),this.render(n),a.addClasses(n,i(this)),this.initBehavior(n),this.control.helper.addDOMEvent(document,"mousedown",r.bind(t,this)),this.control.helper.addDOMEvent(n,"mousedown",function(e){e.stopPropagation()}),this.syncState(n),!n.parentElement)document.body.appendChild(n);this.fire("rendered")}return n},e.prototype.hide=function(){if(this.control.active){var e=i(this),t=this.getElement();a.addClasses(t,e),this.control.removeState("active"),this.fire("hide")}},e.prototype.show=function(){var e=this.getElement();e.style.zIndex=this.getZIndex(),this.position();var t=i(this);a.removeClasses(e,t),this.control.addState("active"),this.fire("show")},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden"))this.show();else this.hide()},e.prototype.position=function(){var t=this.getElement();e.attachTo(t,this.control.main,this.dock)},e.prototype.getZIndex=function(){return e.getZIndex(this.control.main)},e.prototype.dispose=function(){var e=this.getElement(!1);if(e)e.innerHTML="",a.removeNode(e);this.control=null};var s=1e3;e.create=function(e){var t=document.createElement(e||"div");return t.style.position="absolute",t},e.getZIndex=function(e){for(var t=0;e&&e!==document;){var i=parseInt(a.getComputedStyle(e,"zIndex"),10);if(i)t+=i;e=e.parentNode}return t=t||0,t+1},e.moveToTop=function(e){e.style.zIndex=++s},e.moveTo=function(e,t,i){n(e,{top:t,left:i})},e.resize=function(e,t,i){n(e,{width:t,height:i})},e.attachTo=function(e,t,i){i=i||{strictWidth:!1};var r=a.page.getViewWidth(),o=a.page.getViewHeight(),s=a.page.getScrollTop(),l=a.page.getScrollLeft(),u=a.getOffset(t),A=e.style.display;if(e.style.display="block",e.style.top="-5000px",e.style.left="-5000px",i.strictWidth)e.style.minWidth=u.width+"px";var B=a.getOffset(e);e.style.top="",e.style.left="",e.style.display=A;var c={},C=o-(u.bottom-s),D=u.top-s;if(C<=B.height&&D>B.height)c.top=u.top-B.height;else c.top=u.bottom;var d=r-(u.left-l),f=u.right-l;if(d<=B.width&&f>B.width)c.left=u.right-B.width;else c.left=u.left;n(e,c)},e.centerToView=function(e,t){var i=t?a.clone(t):{};if("number"!=typeof i.width)i.width=this.width;if("number"!=typeof i.height)i.height=this.height;i.left=(a.page.getViewWidth()-i.width)/2;var n=a.page.getViewHeight();if(i.height>=n&&t.hasOwnProperty("minTop"))i.top=t.minTop;else i.top=Math.floor((n-i.height)/2);var r=a.page.getViewWidth();if(i.height>=r&&t.hasOwnProperty("minLeft"))i.left=t.minLeft;else i.left=Math.floor((r-i.width)/2);i.top+=a.page.getScrollTop(),this.setProperties(i)};var l=require("mini-event/EventTarget");return a.inherits(e,l),e}),define("esui/Select",["require","underscore","./lib","./InputControl","./Layer","./painters","./main"],function(require){function e(e){for(var t=l.event.getTarget(e),i=this.layer.getElement();t&&t!==i&&!l.hasAttribute(t,"data-index");)t=t.parentNode;if(t&&!this.helper.isPart(t,"item-disabled")&&t!==i){var n=t.getAttribute("data-index"),r=this.fire("beforechange",{index:n});if(!r.isDefaultPrevented())this.set("selectedIndex",+n);this.layer.hide()}}function t(){A.apply(this,arguments)}function i(e){if("input"===e.type||"value"===e.propertyName){var t=this.helper.getId("search"),i=l.g(t);this.fire("input",{keyword:i.value})}}function n(){u.apply(this,arguments),this.layer=new t(this)}function r(e){if(null==e.selectedIndex&&null==e.rawValue&&null==e.value)e.selectedIndex=-1;if(null!=e.rawValue)e.value=null,e.selectedIndex=null;else if(null!=e.value)e.selectedIndex=null;if(null==e.selectedIndex&&(null!=e.value||null!=e.rawValue)){e.selectedIndex=-1;for(var t=e.rawValue||e.value,i=0;i<e.datasource.length;i++)if(e.datasource[i].value==t){e.selectedIndex=i;break}delete e.value,delete e.rawValue}if(e.selectedIndex<0||e.selectedIndex>=e.datasource.length)if(e.emptyText)e.selectedIndex=-1;else for(e.selectedIndex=-1,i=0;i<e.datasource.length;i++)if(!e.datasource[i].disabled){e.selectedIndex=i;break}}function a(){this.fire("layerrendered",{layer:this.layer})}function o(e){var t=e.helper.getPart("text"),i=-1===e.selectedIndex?null:e.datasource[e.selectedIndex];if(t)t.innerHTML=e.getDisplayHTML(i);else if(e.getChild("input")){var n=e.getDisplayHTML(i);if(i)e.getChild("input").setValue(n);else e.getChild("input").setProperties({placeholder:n})}var r=e.layer.getElement(!1);if(r)e.layer.syncState(r)}var s=require("underscore"),l=require("./lib"),u=require("./InputControl"),A=require("./Layer");l.inherits(t,A),t.prototype.nodeName="ol",t.prototype.initSearchStructure=function(e){var t=this.control.helper.getId("search");if(l.g(t))return!1;var i="",n=this.control.helper.getPartClasses("search");i+='<li class="'+n.join(" ")+'"><table><tr><td><i class="iconfont icon-magnifier"></i></td><td><input id="'+t+'"'+(this.control.searchPlaceholder?' placeholder="'+this.control.searchPlaceholder+'"':"")+" /></td></tr></table></li>",i+="<ol></ol>",e.innerHTML=i},t.prototype.getSearchElement=function(e){return this.control.search?l.dom.last(e):e},t.prototype.create=function(){var e=A.prototype.create.call(this);return e},t.prototype.render=function(e){var t="";if(this.control.search)this.initSearchStructure(e);e=this.getSearchElement(e);for(var i=0;i<this.control.datasource.length;i++){var n=this.control.datasource[i],r=this.control.helper.getPartClasses("item");if(n.disabled)r.push.apply(r,this.control.helper.getPartClasses("item-disabled"));if(n.hidden)r.push.apply(r,this.control.helper.getPartClasses("item-hidden"));if(t+='<li data-index="'+i+'" class="'+r.join(" ")+'"',n.background)t+='style="background:'+n.background+';"';t+=">",t+=this.control.getItemHTML(n),t+="</li>"}e.innerHTML=t},t.prototype.initBehavior=function(t){this.control.helper.addDOMEvent(t,"click",e),this.on("rendered",function(){if(this.control.search)this.control.helper.addDOMEvent(t,"input",i)})},t.prototype.syncState=function(e){var t=this.control.helper.getPartClasses("item-selected");e=this.getSearchElement(e);for(var i=l.getChildren(e),n=i.length-1;n>=0;n--){var r=i[n];if(n===this.control.selectedIndex)l.addClasses(r,t);else l.removeClasses(r,t)}},t.prototype.dock={strictWidth:!0},n.prototype.type="Select",n.prototype.initOptions=function(e){var t={datasource:[]},i={};if(s.extend(i,t,e),"select"===this.main.nodeName.toLowerCase()){i.datasource=[];for(var n=this.main.getElementsByTagName("option"),r=0,a=n.length;a>r;r++){var o=n[r],l={name:o.name||o.text,value:o.value,title:o.title||""};if(o.disabled)l.disabled=!0;if(i.datasource.push(l),o.selected&&null==i.selectedIndex&&null==i.value&&null==i.rawValue)i.selectedIndex=o.value?r:0}this.helper.extractOptionsFromInput(this.main,i)}if("string"==typeof i.selectedIndex)i.selectedIndex=+i.selectedIndex;this.setProperties(i)},n.prototype.itemTemplate='<span title="${title}">${text}</span>',n.prototype.getItemHTML=function(e){var t={text:s.escape(e.name||e.text),value:s.escape(e.value),title:s.escape(e.title||"")};return l.format(this.itemTemplate,t)},n.prototype.displayTemplate="${text}",n.prototype.inputTemplate='<input data-ui-type="TextBox" data-ui-child-name="input" autocomplete="off" />',n.prototype.getDisplayHTML=function(e){if(!e)return s.escape(this.emptyText||"");var t={text:s.escape(e.name||e.text),value:s.escape(e.value)};return l.format(this.displayTemplate,t)},n.prototype.initStructure=function(){if("select"===this.main.nodeName.toLowerCase())this.helper.replaceMain();if(this.main.tabIndex=0,this.editable)this.main.innerHTML=l.format(this.inputTemplate),this.initChildren(this.main);else this.main.innerHTML=this.helper.getPartHTML("text","span")},n.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",s.bind(this.layer.toggle,this.layer)),this.layer.on("rendered",s.bind(a,this));var e=this.getChild("input");if(e)e.on("input",s.bind(s.debounce(function(){if(-1===this.get("selectedIndex"))this.fire("change");else this.setProperties({selectedIndex:-1});this.fire("selectinput")},100),this))},n.prototype.getRawValue=function(){if(this.editable&&this.getChild("input"))return this.getChild("input").getValue();if(this.selectedIndex<0)return null;var e=this.datasource[this.selectedIndex];return e?e.value:null};var B=require("./painters");return n.prototype.repaint=B.createRepaint(u.prototype.repaint,B.style("width"),B.style("height"),{name:"datasource",paint:function(e){e.layer.repaint()}},{name:["selectedIndex","emptyText","datasource"],paint:o},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),n.prototype.updateDatasourceBySearch=function(e,t){e=e||[];var i=this.getSelectedItem();if(i)if(-1===s.indexOf(s.pluck(e,"value"),i.value))i.hidden=!0,e=[i].concat(e);else i.hidden=!1;this.updateDatasource(e);var n=this.helper.getPartClasses("search-empty"),r=this.layer.getElement(!1),a=s.filter(e,function(e){return!e.hidden});if(a&&a.length>0)l.removeClasses(r,n);else l.addClasses(r,n);return e},n.prototype.updateDatasource=function(e){if(!e)e=this.datasource;this.datasource=e,this.selectedIndex=e.length>0?0:-1;var t={name:"datasource"},i={name:"selectedIndex"};this.repaint([t,i],{datasource:t,selectedIndex:i}),this.fire("change")},n.prototype.clearSearch=function(){var e=this.helper.getId("search"),t=l.g(e);if(t)t.value=""},n.prototype.setProperties=function(e){if(null==e.datasource)e.datasource=this.datasource;if(null==e.value&&null==e.rawValue&&null==e.selectedIndex&&e.datasource===this.datasource)e.selectedIndex=this.selectedIndex;if(!e.hasOwnProperty("emptyText"))e.emptyText=this.emptyText;r(e);var t=u.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("selectedIndex"))this.fire("change");return t},n.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;u.prototype.dispose.apply(this,arguments)}},n.prototype.getSelectedItem=function(){return this.get("datasource")[this.get("selectedIndex")]},l.inherits(n,u),require("./main").register(n),n}),define("esui/MonthView",["require","./Button","./Select","./TextBox","./Panel","./lib","./controlHelper","./Control","./main","moment","underscore"],function(require){function e(e){Q.apply(this,arguments)}function t(e){for(var t=e.viewRange||e.range,i=[],n=t.end.getFullYear(),r=t.begin.getFullYear();n>=r;r++)i.push({text:r,value:r});return i}function i(e,t){var i=e.viewRange||e.range,n=[],r=11,a=0;if(t===i.begin.getFullYear())a=i.begin.getMonth();if(t===i.end.getFullYear())r=i.end.getMonth();for(;r>=a;a++)n.push({text:a+1,value:a});return n}function n(e){var t=['<div class="${headClass}"><table><tr>','<td width="30" align="left">','<div class="${monthBackClass}"',' data-ui-type="Button"',' data-ui-child-name="monthBack"',' data-ui-id="${monthBackId}"',"></div>","</td>","<td>",'<div class="${yearSelectClass}"',' data-ui="type:Select;childName:yearSel;',' id:${yearSelId};skin:light;"></div>',"</td>","<td>",'<div class="${monthSelectClass}"',' data-ui="type:Select;childName:monthSel;',' id:${monthSelId};skin:light;"></div>',"</td>",'<td width="30" align="right">','<div class="${monthForClass}"',' data-ui-type="Button"',' data-ui-child-name="monthForward"',' data-ui-id="${monthForwardId}"',"></div>","</td>","</tr></table></div>",'<div id="${monthMainId}" class="${monthMainClass}"></div>'];if(t=t.join(""),e.time)t+='<div class="${timeClass}"><input data-ui="type:TextBox;id:${hourInputId};childName:hourInput;width:20;"class="${timeInputClass}" /> : <input data-ui="type:TextBox;id:${minuteInputId};childName:minuteInput;width:20;" class="${timeInputClass}" /> : <input data-ui="type:TextBox;id:${secondInputId};childName:secondInput;width:20;" class="${timeInputClass}" /></div>';return R.format(t,{headClass:e.helper.getPartClassName("head"),monthBackId:e.helper.getId("monthBack"),monthForwardId:e.helper.getId("monthForward"),yearSelId:e.helper.getId("yearSel"),monthSelId:e.helper.getId("monthSel"),monthMainId:e.helper.getId("monthMain"),monthMainClass:e.helper.getPartClassName("month"),monthBackClass:e.helper.getPartClassName("month-back"),monthForClass:e.helper.getPartClassName("month-forward"),yearSelectClass:e.helper.getPartClassName("year-select"),monthSelectClass:e.helper.getPartClassName("month-select"),timeClass:e.helper.getPartClassName("time"),timeInputClass:e.helper.getPartClassName("time-input"),hourInputId:e.helper.getId("hourInput"),minuteInputId:e.helper.getId("minuteInput"),secondInputId:e.helper.getId("secondInput")})}function r(e){var t=[];if("multi"===e.mode)t.push("");t=t.concat(["一","二","三","四","五","六","日"]);var i='<table border="0" cellpadding="0" cellspacing="0" class="${className}"><thead><tr>',n=[];n.push(R.format(i,{className:e.helper.getPartClassName("month-main")}));for(var r='<td id="${id}" data-index="${index}" class="${className}">${text}</td>',o=e.helper.getPartClassName("month-title"),s=e.helper.getId("month-title"),l=e.helper.getPartClassName("month-select-all"),u=t.length,A=0;u>A;A++)n.push(R.format(r,{className:""===t[A]?l:o,text:t[A],index:A,id:s+"-"+A}));n.push("</tr></thead><tbody><tr>");var B='<td data-year="${year}" data-month="${month}" data-date="${date}" class="${className}" id="${id}">${date}</td>',c=e.helper.getPartClassName("month-row-select"),C=e.helper.getId("row-select"),D=0,d='<td id="${id}" class="'+c+'">&gt;</td>',f=0,h=e.year,E=e.month,p=new Date(h,E,1),F=new Date(h,E+1,1),m=1-(p.getDay()+6)%7;p.setDate(m);var g=e.helper.getPartClassName("month-item"),H=e.helper.getPartClassName("month-item-today"),G=e.helper.getPartClassName("month-item-virtual"),I=e.helper.getPartClassName("month-item-disabled"),v=e.range;if("multi"===e.mode)n.push(R.format(d,{id:C+"-"+D++}));for(;F-p>0||f%7!==0;){if(m>1&&f%7===0)if(n.push("</tr><tr>"),"multi"===e.mode)n.push(R.format(d,{id:C+"-"+D++}));var y=p.getMonth()!==E,J=!1;if(p<v.begin)J=!0;else if(p>v.end)J=!0;var L=g;if(y)L+=" "+G;else if(U().isSame(p,"day"))L+=" "+H;if(J)L+=" "+I;n.push(R.format(B,{year:p.getFullYear(),month:p.getMonth(),date:p.getDate(),className:L,id:a(e,p)})),p=new Date(h,E,++m),f++}return e.rowTagNum=D,n.push("</tr></tbody></table>"),n.join("")}function a(e,t){return e.helper.getId(t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate())}function o(e){for(var t=e.target||e.srcElement,i=k.getPartClasses(this,"month-select-all"),n=k.getPartClasses(this,"month-title"),r=k.getPartClasses(this,"month-item"),a=k.getPartClasses(this,"month-row-select"),o=k.getPartClasses(this,"month-item-virtual"),s=k.getPartClasses(this,"month-item-disabled");t&&t!==document.body;){if(R.hasClass(t,r[0])&&!R.hasClass(t,o[0])&&!R.hasClass(t,s[0]))return void G(this,t);else if("multi"===this.mode){if(R.hasClass(t,a[0]))return void f(this,t);if(R.hasClass(t,n[0]))return void c(this,t);if(R.hasClass(t,i[0]))return void E(this)}t=t.parentNode}}function s(e){var t=e.rawValue;e.viewValue={};for(var i=0;i<t.length;i++){var n=t[i],r=n.getFullYear(),a=n.getMonth(),o=n.getDate(),s=r+"-"+a+"-"+o;e.viewValue[s]={isSelected:!0,value:new Date(r,a,o)}}}function l(e,t){var i=k.getPartClasses(e,"month-item-virtual"),n=k.getPartClasses(e,"month-item-disabled");if(!R.hasClass(t,i[0])&&!R.hasClass(t,n[0]))return 1;else if(R.hasClass(t,i[0])&&!R.hasClass(t,n[0]))return-1;return 0}function u(e,t,i){if(k.removePartClasses(e,"month-row-select-selected",t),i)k.addPartClasses(e,"month-row-select-selected",t)}function A(e){for(var t=e.rowTagNum,i=k.getId(e,"row-select"),n=0;t>n;n++){var r=R.g(i+"-"+n);B(e,r)}}function B(e,t){for(var i=k.getPartClasses(e,"month-item-selected"),n=t.nextSibling,r=!0,a=0;n;){if(1===l(e,n))if(++a,!R.hasClass(n,i[0])){r=!1;break}n=n.nextSibling}if(0===a)r=!1;u(e,t,r)}function c(e,t){var i=t.getAttribute("data-index"),n=k.getPartClasses(e,"month-title-selected"),r=!0;if(R.hasClass(t,n[0]))r=!1,k.removePartClasses(e,"month-title-selected",t);else k.addPartClasses(e,"month-title-selected",t);for(var a=e.rowTagNum,o=k.getId(e,"row-select"),s=e.viewValue,u=[],B=0;a>B;B++){var c=R.g(o+"-"+B),C=c.parentNode.children[i];if(1===l(e,C)){var D=C.getAttribute("data-date"),d=C.getAttribute("data-month"),f=C.getAttribute("data-year"),E=f+"-"+d+"-"+D;s[E]={isSelected:r,value:new Date(f,d,D)},u.push(E)}}if(u&&u.length>0)p(e),F(e,u,r),A(e),h(e)}function C(e,t,i){if(k.removePartClasses(e,"month-title-selected",t),i)k.addPartClasses(e,"month-title-selected",t)}function D(e){for(var t=k.getId(e,"month-title"),i=1;7>=i;i++){var n=R.g(t+"-"+i);d(e,n)}}function d(e,t){for(var i=k.getPartClasses(e,"month-item-selected"),n=t.getAttribute("data-index"),r=!0,a=0,o=e.rowTagNum,s=k.getId(e,"row-select"),u=0;o>u;u++){var A=R.g(s+"-"+u),B=A.parentNode.children[n];if(1===l(e,B))if(++a,!R.hasClass(B,i[0])){r=!1;break}}if(0===a)r=!1;C(e,t,r)}function f(e,t){var i=t.parentNode,n=k.getPartClasses(e,"month-row-select"),r=k.getPartClasses(e,"month-row-select-selected"),a=k.getPartClasses(e,"month-item-virtual"),o=k.getPartClasses(e,"month-item-disabled"),s=!0;if(R.hasClass(t,r[0]))s=!1,k.removePartClasses(e,"month-row-select-selected",t);else k.addPartClasses(e,"month-row-select-selected",t);for(var l=i.children,u=e.viewValue,A=[],B=0;B<l.length;B++){var c=l[B];if(1===c.nodeType&&!R.hasClass(c,n[0])&&!R.hasClass(c,a[0])&&!R.hasClass(c,o[0])){var C=c.getAttribute("data-date"),d=c.getAttribute("data-month"),f=c.getAttribute("data-year"),E=f+"-"+d+"-"+C;u[E]={isSelected:s,value:new Date(f,d,C)},A.push(E)}}if(A&&A.length>0)p(e),F(e,A,s),D(e),h(e)}function h(e){for(var t=e.rowTagNum,i=k.getId(e,"row-select"),n=R.g(k.getId(e,"month-title-0")),r=k.getPartClasses(e,"month-row-select-selected"),a=0,o=0;t>o;o++){var s=R.g(i+"-"+o);if(R.hasClass(s,r[0]))a++}if(a===t)k.addPartClasses(e,"month-select-all-selected",n);else k.removePartClasses(e,"month-select-all-selected",n)}function E(e){for(var t=e.rowTagNum,i=k.getId(e,"row-select"),n=0;t>n;n++){var r=R.g(i+"-"+n);k.removePartClasses(e,"month-row-select-selected",r),f(e,r)}}function p(e){var t=[];for(var i in e.viewValue)if(e.viewValue[i].isSelected)t.push(e.viewValue[i].value);t.sort(function(e,t){return e-t}),e.rawValue=t,e.fire("change")}function F(e,t,i){if(i)g(e,t);else m(e,t)}function m(e,t){for(var i=e,n=0;n<t.length;n++){var r=k.getId(e,t[n]),a=R.g(r);if(a)R.removeClasses(a,k.getPartClasses(i,"month-item-selected"))}}function g(e,t){for(var i=e,n=0;n<t.length;n++){var r=k.getId(e,t[n]),a=R.g(r);if(a)R.addClasses(a,k.getPartClasses(i,"month-item-selected"))}}function H(e,t,i){if(!t)return!1;var n=k.getPartClasses(e,i);if(R.hasClass(t,n[0]))return k.removePartClasses(e,i,t),!1;else return k.addPartClasses(e,i,t),!0}function G(e,t){var i=t.getAttribute("data-date"),n=t.getAttribute("data-month"),r=t.getAttribute("data-year"),a=r+"-"+n+"-"+i;if("multi"===e.mode){var o=H(e,t,"month-item-selected");e.viewValue[a]={isSelected:o,value:new Date(r,n,i)},p(e);var s=t.parentNode.firstChild;B(e,s),D(e),h(e)}else{var l=k.getPartClasses(e,"month-item-selected");if(R.hasClass(t,l[0]))return;var u=new Date(r,n,i);if(M(e,e.rawValue,u),e.rawValue=u,e.time)e.rawValue.setHours(e.hour),e.rawValue.setMinutes(e.minute),e.rawValue.setSeconds(e.second);e.fire("change"),e.fire("itemclick")}}function I(e,t,i){var n=e,r=n.viewRange||n.range,a=12*r.begin.getFullYear()+r.begin.getMonth(),o=12*r.end.getFullYear()+r.end.getMonth(),s=12*t+i,l=new Date(t,i,1);if(i=l.getMonth(),a-s>0)i+=a-s;else if(s-o>0)i-=s-o;return l.setMonth(i),i=l.getMonth(),t=l.getFullYear(),{year:t,month:i}}function v(e,i,n){if(null==i)i=e.year;if(null==n)n=e.month;var r=e,a=I(r,i,n);r.month=a.month,r.year=a.year;var o=r.getChild("yearSel"),s=o.getValue();if(o.setProperties({datasource:t(r),value:r.year}),s==r.year)o.fire("change");if(e.time&&e.rawValue)y(e)}function y(e){var t=U(e.rawValue).format("HH"),i=U(e.rawValue).format("mm"),n=U(e.rawValue).format("ss");t=L(t,"hour").result?t:"00",i=L(i,"minute").result?i:"00",n=L(n,"second").result?n:"00";var r=e.getChild("hourInput");r.setValue(t);var a=e.getChild("minuteInput");a.setValue(i);var o=e.getChild("secondInput");o.setValue(n)}function J(e,t,i){var n=t.getValue(),r=L(n,i);if(1===n.length)n="0"+n;if(r.result===!1)n=r.checkedValue,t.setValue(r.checkedValue);if(2===n.length){if("hour"===i)e.hour=n,e.rawValue.setHours(n);if("minute"===i)e.minute=n,e.rawValue.setMinutes(n);if("second"===i)e.second=n,e.rawValue.setSeconds(n);e.fire("change")}}function L(e,t){var i=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],n=!0,r="";if(e.length>2)n=!1,r=e.substring(0,2);else if(2===e.length){var a=W.filter(i,function(e){return 23>=e});if("hour"===t&&W.contains(a,e)===!1)n=!1,r="00";else if(("minute"===t||"second"===t)&&W.contains(i,e)===!1)n=!1,r="00"}return{result:n,checkedValue:r}}function M(e,t,i){if(t!==i){if(t){var n=R.g(a(e,t));if(n)H(e,n,"month-item-selected")}var r=R.g(a(e,i));if(r)if(l(e,r))H(e,r,"month-item-selected");else return e.rawValue=null,null}return i}function b(e){var t=new Date(e.year,e.month,1),i=U(t).add("month",1);v(e,i.year(),i.month())}function N(e){var t=new Date(e.year,e.month,1),i=U(t).subtract("month",1);v(e,i.year(),i.month())}function K(e,t){var n=parseInt(t.getValue(),10);e.year=n;var r=e.month,a=I(e,n,r);r=a.month,e.month=r;var o=e.getChild("monthSel"),s=o.setProperties({datasource:i(e,e.year),value:e.month});if(!s.hasOwnProperty("rawValue"))x(e,o);e.fire("changeyear")}function x(e,t){var i=parseInt(t.getValue(),10);e.month=i,P(e),e.fire("changemonth")}function P(e){var t=k.getId(e,"monthMain"),i=R.g(t);i.innerHTML=r(e);var n=i.getElementsByTagName("tr"),a=n[n.length-1];k.addPartClasses(e,"last-row",a),S(e)}function _(e){var t=null,i=null;if("string"==typeof e){var n=e.split(",");t=O(n[0]),i=O(n[1])}else t=e.begin,i=e.end;if(t>i)return{begin:i,end:t};else return{begin:t,end:i}}function O(e){function t(e){var t=e.split("-");if(t)return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else return null}e+="";var i=e.split(" "),n=t(i[0]);if(i[1]){var r=i[1].split(":");n.setHours(r[0]),n.setMinutes(r[1]),n.setSeconds(r[2])}return n}function T(e,t){if("single"===t)return O(e);else{for(var i=e.split(","),n=[],r=0;r<i.length-1;r+=2){var a,o=O(i[r]),s=O(i[r+1]);if(o&&s)if(o-s===0)n.push(o);else for(a=o;s>=a;)n.push(a),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);else;
}return n}}function S(e){if("multi"!==e.mode)return void M(e,null,e.rawValue);var t=e.viewValue;for(var i in t){var n=R.g(k.getId(e,i));if(n){var r=l(e,n);if(1===r)if(t[i].isSelected)k.addPartClasses(e,"month-item-selected",n);else k.removePartClasses(e,"month-item-selected",n);else if(0===r)t[i].isSelected=!1,p(e)}}A(e),D(e),h(e)}function w(e,t,i){var n=e.helper.getPartClasses(t+"-layer"),r=i.layer;r.addCustomClasses(n),e.fire("selectlayerrendered",{layer:r})}require("./Button"),require("./Select"),require("./TextBox"),require("./Panel");var R=require("./lib"),k=require("./controlHelper"),Q=require("./Control"),V=require("./main"),U=require("moment"),W=require("underscore");return e.prototype={type:"MonthView",initOptions:function(e){var t={range:{begin:new Date(1982,10,4),end:new Date(2046,10,4)},dateFormat:"YYYY-MM-DD",paramFormat:"YYYY-MM-DD",viewValue:{},mode:"single"};if(R.extend(t,e),t.time)t.dateFormat="YYYY-MM-DD HH:mm:ss",t.paramFormat="YYYY-MM-DD HH:mm:ss";this.setProperties(t)},setProperties:function(e){if(e.range)e.range=_(e.range);var t=new Date,i=e.mode||this.mode;if(null==e.rawValue)if(e.value)e.rawValue=T(e.value,i);else if(null==this.rawValue)if("single"===i)e.rawValue=t;else e.rawValue=[];var n=e.year,r=e.month;if(!n&&null==r)if("single"===i){if(e.rawValue)n=e.rawValue.getFullYear(),r=e.rawValue.getMonth()+1}else n=t.getFullYear(),r=t.getMonth()+1;if(n&&r)e.year=parseInt(n,10),e.month=parseInt(r,10)-1;else if(e.hasOwnProperty("year")){if(null==this.month)delete e.year}else if(e.hasOwnProperty("month"))if(null==this.year)delete e.month;else e.month=parseInt(r,10)-1;if((this.time||e.time)&&e.rawValue){var a=U(e.rawValue).format("HH"),o=U(e.rawValue).format("mm"),s=U(e.rawValue).format("ss");e.hour=a,e.minute=o,e.second=s,this.hour=a,this.minute=o,this.second=s}var l=Q.prototype.setProperties.apply(this,arguments);if(l.hasOwnProperty("rawValue"))this.fire("change");return l},initStructure:function(){if(this.main.innerHTML=n(this),this.initChildren(this.main),"multi"===this.mode)this.addState("multi-select")},initEvents:function(){var e=this.getChild("monthBack");e.on("click",R.curry(N,this));var t=this.getChild("monthForward");t.on("click",R.curry(b,this));var i=this.getChild("monthSel");i.on("change",R.curry(x,this,i)),i.on("layerrendered",R.curry(w,this,"month-select"));var n=this.getChild("yearSel");n.on("change",R.curry(K,this,n)),n.on("layerrendered",R.curry(w,this,"year-select"));var r=this.helper.getPart("monthMain");if(k.addDOMEvent(this,r,"click",o),this.time){var a=this.getChild("hourInput");a.on("input",R.curry(J,this,a,"hour"));var s=this.getChild("minuteInput");s.on("input",R.curry(J,this,s,"minute"));var l=this.getChild("secondInput");l.on("input",R.curry(J,this,l,"second"))}},repaint:k.createRepaint(Q.prototype.repaint,{name:["range","rawValue","year","month"],paint:function(e,t,i,n,r){if(i)if("multi"===e.mode)s(e);v(e,e.year,e.month)}},{name:"disabled",paint:function(e,t){var i=e.getChild("monthBack");i.setProperties({disabled:t});var n=e.getChild("monthForward");n.setProperties({disabled:t});var r=e.getChild("monthSel");r.setProperties({disabled:t});var a=e.getChild("yearSel");a.setProperties({disabled:t})}}),disable:function(){this.setProperties({disabled:!0}),this.addState("disabled")},enable:function(){this.setProperties({disabled:!1}),this.removeState("disabled")},setRange:function(e){this.setProperties({range:e})},setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){return this.rawValue},getValue:function(){if(this.time)this.rawValue.setHours(this.hour),this.rawValue.setMinutes(this.minute),this.rawValue.setSeconds(this.second);return this.stringifyValue(this.rawValue)},stringifyValue:function(e){if("single"===this.mode)return R.date.format(e,this.paramFormat)||"";else{for(var t=[],i=864e5,n=0;n<e.length;n++)if(0===n)t.push(R.date.format(e[n],this.paramFormat));else if(e[n]-e[n-1]>i)t.push(R.date.format(e[n-1],this.paramFormat)),t.push(R.date.format(e[n],this.paramFormat));else if(n===e.length-1)t.push(R.date.format(e[n],this.paramFormat));else continue;return t.join(",")}},parseValue:function(e){return T(e,this.mode)},setRawValueWithoutFireChange:function(e){this.rawValue=e,s(this)},getDateItemHTML:function(e){return R.g(a(this,e))}},R.inherits(e,Q),V.register(e),e}),define("esui/Calendar",["require","./MonthView","underscore","moment","./lib","./main","./InputControl","./Layer","./painters"],function(require){function e(){u.apply(this,arguments)}function t(){l.apply(this,arguments),this.layer=new e(this)}function i(){var e=this.getChild("monthView"),t=e.getRawValue();if(t)this.rawValue=t,n(this),this.fire("change")}function n(e){var t=e.helper.getPart("text");t.innerHTML=r.escape(e.getValue())}require("./MonthView");var r=require("underscore"),a=require("moment"),o=require("./lib"),s=require("./main"),l=require("./InputControl"),u=require("./Layer");return o.inherits(e,u),e.prototype.render=function(e){var t=this.control;document.body.appendChild(e);var n=a(t.rawValue).format(t.paramFormat);e.innerHTML='<div data-ui-type="MonthView" data-ui-child-name="monthView" '+(t.time?'data-ui-time="true" data-ui-value="'+n+'"':"")+"></div>",t.helper.initChildren(e);var o=t.getChild("monthView");if(o.setProperties({rawValue:t.rawValue,range:t.range}),o.on("change",i,t),t.autoHideLayer)o.on("itemclick",r.bind(t.layer.toggle,t.layer))},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden")){var t=this.control,i=t.getChild("monthView");i.setProperties({rawValue:t.rawValue,range:t.range}),this.show()}else this.hide()},t.prototype={type:"Calendar",initOptions:function(e){var t=new Date,i={range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},dateFormat:"YYYY-MM-DD",paramFormat:"YYYY-MM-DD",rawValue:t,autoHideLayer:!1};if("false"===e.autoHideLayer)e.autoHideLayer=!1;if(r.extend(i,e),e.time)i.dateFormat="YYYY-MM-DD HH:mm:ss",i.paramFormat="YYYY-MM-DD HH:mm:ss";if(o.isInput(this.main))this.helper.extractOptionsFromInput(this.main,i);if(this.paramFormat=i.paramFormat,i.value)i.rawValue=this.parseValue(i.value);var n=i.range;if("string"==typeof n){var a=n.split(","),s=this.parseValue(a[0]),l=this.parseValue(a[1]);i.range={begin:s,end:l}}this.setProperties(i)},initStructure:function(){if(o.isInput(this.main))this.helper.replaceMain();var e=['<div class="${classes}" id="${id}">${value}</div>','<div class="${arrow}"></div>'];this.main.innerHTML=o.format(e.join(""),{classes:this.helper.getPartClassName("text"),id:this.helper.getId("text"),arrow:this.helper.getPartClassName("arrow")})},initEvents:function(){this.helper.addDOMEvent(this.main,"click",r.bind(this.layer.toggle,this.layer))},repaint:require("./painters").createRepaint(l.prototype.repaint,{name:["rawValue","range"],paint:function(e,t,i){if(!e.disabled&&!e.readOnly){n(e);var r=e.getChild("monthView");if(r)r.setProperties({rawValue:t,range:i})}}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),setRange:function(e){this.setProperties({range:e})},stringifyValue:function(e){return a(e).format(this.dateFormat)||""},parseValue:function(e){var t=a(e,this.paramFormat).toDate();return t},dispose:function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;l.prototype.dispose.apply(this,arguments)}}},o.inherits(t,l),s.register(t),t}),define("esui/Validity",["require","underscore","./lib","./Control","./Helper","./painters","./main"],function(require){function e(){r.apply(this,arguments)}function t(e,t){var i=e.target,n=null;if(i||e.targetType){var r={type:e.targetType||i.type,skin:i&&i.skin};n=new a(r)}var o=e.helper.getPartClasses();if(n)o.push.apply(o,n.getPartClasses("validity-label"));if(t)if(o.push.apply(o,e.helper.getPartClasses(t)),n)o.push.apply(o,n.getPartClasses("validity-label-"+t));if(i&&i.isHidden()||e.isHidden())if(o.push.apply(o,e.helper.getStateClasses("hidden")),i)o.push.apply(o,i.helper.getPartClasses("validity-label-hidden"));return o}var i=require("underscore"),n=require("./lib"),r=require("./Control"),a=require("./Helper");return e.prototype.type="Validity",e.prototype.createMain=function(){return document.createElement("label")},e.prototype.initOptions=function(t){var n=i.extend({},e.defaultProperties,t);r.prototype.initOptions.call(this,n)},e.prototype.display=function(e,t,i){this.main.innerHTML=t},e.prototype.repaint=require("./painters").createRepaint(r.prototype.repaint,{name:["target","targetType"],paint:function(e){var i=e.validity?e.validity.getValidState():"",n=t(e,i);e.main.className=n.join(" ")}},{name:"focusTarget",paint:function(e,t){if("label"===e.main.nodeName.toLowerCase())if(t&&t.id)n.setAttribute(e.main,"for",t.id);else n.removeAttribute(e.main,"for")}},{name:"validity",paint:function(e,n){var r=n&&n.getValidState(),a=t(e,r);if(e.main.className=a.join(" "),e.disposeChildren(),n){var o=n.getCustomMessage();if(!o){var s=i.find(n.getStates(),function(e){return!e.getState()});o=s&&s.getMessage()}if(e.display(r,o||"",n),e.helper.initChildren(),o)e.show();else e.hide()}else e.main.innerHTML="",e.hide()}}),e.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.target)this.target.validityLabel=null,this.target=null;if(this.focusTarget=null,this.main.parentNode)this.main.parentNode.removeChild(this.main);r.prototype.dispose.apply(this,arguments)}},n.inherits(e,r),require("./main").register(e),e}),define("esui/InputControl",["require","./lib","./controlHelper","./Control","./Validity","./validator/Validity","./main"],function(require){function e(e){if(e=e?t.extend({},e):{},e.main&&!e.name)e.name=e.main.getAttribute("name");n.call(this,e)}var t=require("./lib"),i=require("./controlHelper"),n=require("./Control"),r=require("./Validity"),a=require("./validator/Validity"),o=require("./main");return e.prototype={constructor:e,ignoreStates:n.prototype.ignoreStates.concat("read-only"),getCategory:function(){return"input"},getFocusTarget:function(){return null},getValue:function(){return this.stringifyValue(this.getRawValue())},setValue:function(e){var t=this.parseValue(e);this.setRawValue(t)},getRawValue:function(){return this.rawValue},setRawValue:function(e){this.setProperties({rawValue:e})},setProperties:function(e){var t=e.value;if(delete e.value,null!=t&&null==e.rawValue)e.rawValue=this.parseValue(t);if(this.hasOwnProperty("readOnly"))this.readOnly=!!this.readOnly;return n.prototype.setProperties.call(this,e)},repaint:i.createRepaint(n.prototype.repaint,{name:"disabled",paint:function(e,t){var i=e.main.nodeName.toLowerCase();if("input"===i||"select"===i||"textarea"===i)e.main.disabled=t}},{name:"readOnly",paint:function(e,t){var i=t?"addState":"removeState";e[i]("read-only");var n=e.main.nodeName.toLowerCase();if("input"===n||"select"===n||"textarea"===n)e.main.readOnly=t}},{name:"hidden",paint:function(e,n){var r=e.getValidityLabel(!0);if(r){var a=o.getConfig("uiClassPrefix"),s=[].concat(a+"-hidden",a+"-validity-hidden",i.getPartClasses(e,"validity-hidden")),l=e.isHidden()?"addClasses":"removeClasses";t[l](r,s)}}}),stringifyValue:function(e){return null!=e?e+"":""},parseValue:function(e){return e},setReadOnly:function(e){e=!!e,this[e?"addState":"removeState"]("read-only")},isReadOnly:function(){return this.hasState("read-only")},getValidationResult:function(){var e=new a,t={validity:e};t=this.fire("beforevalidate",t);for(var i=o.createRulesByControl(this),n=0,r=i.length;r>n;n++){var s=i[n];e.addState(s.getName(),s.check(this.getValue(),this))}if(!e.isValid())t=this.fire("invalid",t);return this.fire("aftervalidate",t),e},checkValidity:function(){var e=this.getValidationResult();return e.isValid()},validate:function(){var e=this.getValidationResult();return this.showValidity(e),e.isValid()},getValidityLabel:function(e){if(!i.isInStage(this,"RENDERED"))return null;var n=this.validityLabel&&this.viewContext.get(this.validityLabel);if(!n&&!e){var a={id:this.id+"-validity",viewContext:this.viewContext};if(n=new r(a),this.main.nextSibling){var o=this.main.nextSibling;n.insertBefore(o)}else n.appendTo(this.main.parentNode);this.validityLabel=n.id}if((8===t.ie||7===t.ie)&&n)t.toggleClass(n.main.parentNode,"fuck-the-ie");return n},showValidity:function(e){if(this.validity)this.removeState("validity-"+this.validity.getValidState());this.validity=e,this.addState("validity-"+e.getValidState());var t=this.getValidityLabel();if(t){var i=this.getFocusTarget(),n={target:this,focusTarget:i,validity:e};if(t.setProperties(n),i&&!this.validity.isValid()&&"function"==typeof i.focus){var r=document.activeElement;if(r&&r.placeholder){var a=navigator.userAgent.match(/MSIE\s([\d\.]+)/)||navigator.userAgent.match(/(?:trident)(?:.*rv:([\w.]+))?/i),o="INPUT"===r.nodeName||"TEXTAREA"===r.nodeName;if(a&&o)return}i.focus()}}},hideValidity:function(){var e=new a;this.showValidity(e)},showValidationMessage:function(e,t){t=t||"";var i=new a;i.setCustomValidState(e),i.setCustomMessage(t),this.showValidity(i)},dispose:function(){if(!i.isInStage(this,"DISPOSED")){var e=this.getValidityLabel(!0);if(e)e.dispose();n.prototype.dispose.apply(this,arguments)}}},t.inherits(e,n),e}),define("esui/BoxGroup",["require","underscore","./lib","./InputControl","./painters","./main"],function(require){function e(){s.apply(this,arguments)}function t(e,t){for(var i=e.getElementsByTagName("input"),n=e.getElementsByTagName("label"),r={},a=n.length-1;a>=0;a--){var s=n[a],l=o.getAttribute(s,"for");if(l)r[l]=s}for(var u=[],A=[],B=0,c=i.length;c>B;B++){var C=i[B];if(C.type===t.boxType&&(t.name||"")===C.name){var D={value:C.value},d=C.id&&r[C.id];if(D.title=d?o.getText(d):"",!D.title)D.title=C.title||("on"===C.value?C.value:"");if(u.push(D),o.hasAttribute(C,"checked"))A.push(C.value)}}if(t.datasource=u,!t.rawValue&&!t.value)t.rawValue=A}function i(e){var t=e.parentNode,i=this.helper.getPartClasses("wrapper-checked");if(e.checked)o.addClasses(t,i);else o.removeClasses(t,i)}function n(){a.each(this.getBoxElements(),i,this);var e=a.chain(this.getBoxElements()).where({checked:!0}).pluck("value").value();this.rawValue=e,this.fire("change")}function r(e,t,i){e.helper.clearDOMEvents();for(var r="",s=[].concat(e.helper.getPartClasses(i),e.helper.getPartClasses("wrapper")),u=o.toDictionary(e.rawValue),A=e.name||o.getGUID(),B=0;B<t.length;B++){var c=t[B],C="";if(u[c.value])C+=" "+e.helper.getPartClassName("wrapper-checked");var D={wrapperClass:s.join(" ")+C,id:e.helper.getId("box-"+B),type:e.boxType,name:A,title:o.trim(c.title||c.name||c.text),content:o.trim(c.content||c.title||c.name||c.text),value:c.value,checked:u[c.value]?' checked="checked"':""};r+=o.format(l,D)}e.main.innerHTML=r;var d=e.main.addEventListener?"change":"click";a.each(e.getBoxElements(),function(e){this.helper.addDOMEvent(e,d,n)},e)}var a=require("underscore"),o=require("./lib"),s=require("./InputControl");e.prototype.type="BoxGroup",e.prototype.initOptions=function(e){var i={datasource:[],orientation:"horizontal",boxType:"radio"};a.extend(i,e);var n=i.datasource;if(!n.length)t(this.main,i);if(!i.hasOwnProperty("rawValue")&&!i.hasOwnProperty("value"))if("radio"===i.boxType&&n.length)i.rawValue=[n[0].value];else i.rawValue=[];this.setProperties(i)};var l=['<label title="${title}" class="${wrapperClass}">','<input type="${type}" name="${name}" id="${id}" title="${title}" value="${value}"${checked} />',"<span>${content}</span>","</label>"];return l=l.join(""),e.prototype.setProperties=function(e){if(!(!e.datasource&&!e.boxType||e.rawValue||e.value||this.rawValue&&this.rawValue.length))e.rawValue=[];var t=s.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("rawValue"))this.fire("change")},e.prototype.repaint=require("./painters").createRepaint(s.prototype.repaint,{name:["datasource","boxType"],paint:r},{name:["disabled","readOnly"],paint:function(e,t,i){a.each(e.getBoxElements(),function(e){e.disabled=t,e.readOnly=i})}},{name:"rawValue",paint:function(e,t){t=t||[],e.rawValue=t;for(var n={},r=0;r<t.length;r++)n[t[r]]=!0;a.each(e.getBoxElements(),function(t){t.checked=n.hasOwnProperty(t.value),i.call(e,t)})}},{name:"orientation",paint:function(e,t){e.removeState("vertical"),e.removeState("horizontal"),e.addState(t)}}),e.prototype.parseValue=function(e){return e.split(",")},e.prototype.getBoxElements=function(){return a.where(this.main.getElementsByTagName("input"),{type:this.boxType})},o.inherits(e,s),require("./main").register(e),e}),define("er-track/trackers/console",["require","underscore"],function(require){function e(e){if(window.console)if("function"==typeof console.log)console.log.apply(console,e);else console.log(e.join(" "))}function t(t){if(window.console)if(console.groupCollapsed){console.groupCollapsed(t);for(var i=1;i<arguments.length;i++)e(arguments[i]);console.groupEnd(t)}else{console.log("➤"+t);for(var n="├───",i=1;i<arguments.length;i++){if(i===arguments.length-1)n="└───";var r=arguments[i];if("string"==typeof r)r=n+r;else r[0]=n+r[0];e(r)}}}var i=require("underscore"),exports={name:"console"};return exports.create=function(e){return{name:"console",trackException:function(e){var n=["我靠，有个Promise出异常了",["出事的Deferred对象: ",e.deferred],["出事时给的参数: ",e.args],["出事的原因大概是: "+e.reason]],r=null,a=i.flatten(e.args);if(a[0]&&a[0].error instanceof Error)r=a[0].error;else if(e.reason instanceof Error)r=e.reason;else if(Array.isArray(e.reason)&&e.reason[0]instanceof Error)r=e.reason[0];if(r)n.push(["好像是一个异常对象，所以把调用堆栈给你看看好了：\n"+r.stack]);t.apply(null,n)},trackEnterAction:function(e){if(!e.action.disposed&&e.action.view)t('亲你正在进入"'+e.url+'"',["Action：",e.action],["Model：",e.action.model],["Model里的数据：",e.action.model.dump()],["View：",e.action.view],["DOM容器：",e.action.view.getContainerElement()])},trackLeaveAction:function(e){t('亲你已经离开"'+e.action.context.url+'"',["当前的Action：",e.action],["前往的URL："+e.to.url])},load:function(e){e()}}},exports}),define("er-track/trackers/baidu",["require","../loadScript"],function(require){if(!window._hmt)window._hmt=[];var exports={name:"baidu"};return exports.create=function(e){return{name:"baidu",trackPageView:function(e){var t=e.referrer||document.referrer;return window._hmt.push(["_setReferrerOverride",t]),window._hmt.push(["_trackPageview",e.url]),this},load:function(t){if(!e.account)return t();else return setTimeout(function(){var t=e.scriptURL||"//hm.baidu.com/hm.js";t+="?"+e.account;var i=require("../loadScript");i(t,function(){})},3e3),void t()}}},exports}),define("er-track/main",["require","./events"],function(require){var exports={},e={packageName:"er-track"};return exports.config=function(t,i){return e[t]=i,this},exports.create=function(){function t(t){return a[t]||e[t]||null}function i(e,t){for(var i in o)if(o.hasOwnProperty(i)){var n=o[i];n[e]&&n[e].apply(n,t)}}function n(){for(var e=0;e<l.length;e++){var t=l[e][0],n=l[e][1];i(t,n)}}function r(){l.push.apply(l,arguments)}var a={},o={},s={};s.config=function(e,t){return a[e]=t,this},s.use=function(e){if(o[e])return o[e];var t={name:e,configuration:{},config:function(e,t){return this.configuration[e]=t,this},setAccount:function(e){return this.config("account",e)}};return o[e]=t,t};var l=[];s.start=function(){var e=[];for(var r in o)if(o.hasOwnProperty(r)){var a=t("packageName")+"/trackers/"+r;e.push(a)}window.require(e,function(){function e(){if(t--,0===t)n(),l={push:function(e){i(e[0],e[1])}}}for(var t=arguments.length,r=0;r<arguments.length;r++){var a=arguments[r],s=o[a.name].configuration,u=a.create(s);o[a.name]=u,u.load(e)}})};var u=require("./events");return s.include=function(e){if(u.hasOwnProperty(e))u[e](r);return this},s.includeAll=function(){for(var e in u)s.include(e);return this},s},exports}),define("er-track",["er-track/main"],function(e){return e}),define("er-track/loadScript",["require"],function(require){return function(e,t){var i=document.createElement("script");if(i.charset="utf-8",i.async=!0,i.src=e,t){var n=!1;i.onload=i.onreadystatechange=function(){if(!(n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState))n=!0,t()}}var r=document.getElementsByTagName("script")[0];if(r&&r.parentNode)r.parentNode.insertBefore(i,r);else{var a=document.getElementsByTagName("head")[0]||document.body;a.insertBefore(i,a.firstChild)}}}),define("er-track/events",["require","er/events","er/Deferred","er/ajax"],function(require){var e=require("er/events"),t=require("er/Deferred"),i=require("er/ajax");return{pageView:function(t){e.on("redirect",function(e){t(["trackPageView",[e]])})},exception:function(e){t.on("exception",function(t){e(["trackException",[t]])})},requestTimeout:function(e){i.on("timeout",function(t){var i=[t.options.url,t.options,t.xhr];e(["trackRequestTimeout",i])})},requestComplete:function(e){i.on("done",function(t){var i=[t.options.url,t.options,t.xhr];e(["trackRequestComplete",i])})},forwardAction:function(t){e.on("forwardaction",function(e){t(["trackForwardAction",[e]])})},actionLoaded:function(t){e.on("actionloaded",function(e){t(["trackActionLoaded",[e]])})},beforeEnterAction:function(t){e.on("enteraction",function(e){t(["trackBeforeEnterAction",[e]])})},enterAction:function(t){e.on("enteractioncomplete",function(e){t(["trackEnterAction",[e]])})},afterEnterAction:function(t){e.on("afterenteraction",function(e){t(["trackAfterEnterAction",[e]])})},leaveAction:function(t){e.on("leaveaction",function(e){t(["trackLeaveAction",[e]])})}}}),define("etpl/tpl",["require","exports","module","."],function(require,exports,module){var e=require(".");return{load:function(t,i,n){var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("GET",i.toUrl(t),!0),r.onreadystatechange=function(){if(4===r.readyState){if(r.status>=200&&r.status<300){var t=r.responseText,i=module.config();if(i.autoCompile||null==i.autoCompile)e.compile(t);n(t)}r.onreadystatechange=new Function,r=null}},r.send(null)}}}),define("er/tpl",["require","etpl/tpl"],function(require){return require("etpl/tpl")}),define("er/template",["require","etpl/main"],function(require){var e=require("etpl/main");return e.merge=function(t,i,n){var r="";try{var r=e.render(i,n)}catch(a){}if(t)t.innerHTML=r;return r},e}),define("er/main",["require","./controller","./router","./locator"],function(require){var e={version:"3.1.0-beta.5",start:function(){require("./controller").start(),require("./router").start(),require("./locator").start()}};return e}),define("er",["er/main"],function(e){return e}),define("er/router",["require","./URL","eoo","mini-event/EventTarget","./locator","./events"],function(require){function e(e){for(var t=require("./URL").parse(e.url),i=t.getPath(),n=0;n<this.routes.length;n++){var r=this.routes[n];if(r.rule instanceof RegExp&&r.rule.test(i)||r.rule===i)return void r.handler.call(this,t)}if(this.backup)this.backup(t);this.getEventBus().fire("route",{url:t,router:this})}var exports={};exports.constructor=function(){this.routes=[],this.backup=null},exports.add=function(e,t){this.routes.push({rule:e,handler:t})},exports.setBackup=function(e){this.backup=e},exports.getLocator=function(){return this.locator},exports.setLocator=function(e){this.locator=e},exports.getEventBus=function(){return this.eventBus},exports.setEventBus=function(e){this.eventBus=e},exports.start=function(){this.getLocator().on("redirect",e,this)};var t=require("eoo").create(require("mini-event/EventTarget"),exports),i=new t;return i.setLocator(require("./locator")),i.setEventBus(require("./events")),i.Router=t,i}),define("er/controller",["require","./Deferred","./URL","./config","./util","./assert","mini-event/EventTarget","eoo","./locator","./router","./events","./permission"],function(require){function e(e,t,i){var n=e.childActionMapping[t.id];if(n){if(e.childActionMapping[t.id]=void 0,n.hijack)if(t.removeEventListener)t.removeEventListener("click",n.hijack,!1);else t.detachEvent("onclick",n.hijack);if(n.action){if(!i)i={url:null,referrer:n.url,container:t.id,isChildAction:!0};if(e.getEventBus().fire("leaveaction",{controller:e,action:n.action,to:i}),"function"==typeof n.action.leave)n.action.leave()}}}function t(t,i,n,r,a){if(e(t,i,a),i.addEventListener)i.addEventListener("click",r,!1);else i.attachEvent("onclick",r);var o={url:a.url,container:i.id,action:n,hijack:r};t.childActionMapping[i.id]=o;var s=require("mini-event/EventTarget");if(n instanceof s)n.on("leave",function(){e(t,i)})}var i=require("./Deferred"),n=require("./URL"),r=require("./config"),a=require("./util"),o=require("./assert"),exports={};exports.constructor=function(){this.actionPathMapping={},this.childActionMapping={},this.currentURL=null,this.currentAction=null,this.globalActionLoader=null,this.childActionLoaders={}},exports.registerAction=function(e){if(!e.hasOwnProperty("length"))e=[e];for(var t=0;t<e.length;t++){var i=e[t];o.hasProperty(i,"path",'action config should contains a "path" property'),this.actionPathMapping[i.path]=i}},exports.getDefaultTitle=function(){return this.defaultTitle},exports.setDefaultTitle=function(e){this.defaultTitle=e},exports.getRouter=function(){return this.router},exports.setRouter=function(e){this.router=e},exports.getLocator=function(){return this.locator},exports.setLocator=function(e){this.locator=e},exports.getEventBus=function(){return this.eventBus},exports.setEventBus=function(e){this.eventBus=e},exports.getPermissionProvider=function(){return this.permissionProvider},exports.setPermissionProvider=function(e){this.permissionProvider=e},exports.getMainContainer=function(){return this.mainContainer||r.mainElement},exports.setMainContainer=function(e){this.mainContainer=e},exports.getNoAuthorityLocation=function(){return this.noAuthorityLocation||r.noAuthorityLocation},exports.setNoAuthorityLocation=function(e){this.noAuthorityLocation=e},exports.getNotFoundLocation=function(){return this.notFoundLocation||r.notFoundLocation},exports.setNotFoundLocation=function(e){this.notFoundLocation=e},exports.start=function(){if(!this.getDefaultTitle())this.setDefaultTitle(r.systemName||document.title);this.getRouter().setBackup(a.bind(this.renderAction,this))},exports.findActionConfig=function(e){var t=e.url.getPath(),i=this.actionPathMapping[t];return i},exports.resolveActionConfig=function(e,t){return e},exports.checkAuthority=function(e,t){var i=e.authority;if(!i)return!0;var n=this.getPermissionProvider();if("function"==typeof i)return i(t,e,n);if("string"==typeof i)i=i.split("|");for(var r=0;r<i.length;r++)if(n.isAllow(a.trim(i[r])))return!0;return!1},exports.findEligibleActionConfig=function(e){var t=this.findActionConfig(e);if(t&&t.movedTo)return this.getEventBus().fire("actionmoved",{controller:this,url:e.url,config:t,movedTo:t.movedTo}),e.originalURL=e.url,e.url=n.parse(t.movedTo),this.findEligibleActionConfig(e);if(t&&t.childActionOnly&&!e.isChildAction)t=null;if(!t)if(this.getEventBus().fire("actionnotfound",a.mix({controller:this,failType:"NotFound",reason:"Not found"},e)),e.originalURL=e.url,e.url=n.parse(this.getNotFoundLocation()),!this.actionPathMapping[e.url.getPath()])return null;else return this.findEligibleActionConfig(e);var i=this.checkAuthority(t,e);if(!i){this.getEventBus().fire("permissiondenied",a.mix({controller:this,failType:"PermissionDenied",reason:"Permission denied",config:t},e));var r=t.noAuthorityLocation||this.getNoAuthorityLocation();return e.originalURL=e.url,e.url=n.parse(r),this.findEligibleActionConfig(e)}return t},exports.loadAction=function(e){var t=this.findEligibleActionConfig(e);if(t=this.resolveActionConfig(t,e),!t){var n=new i;return n.syncModeEnabled=!1,n.reject("no action configured for url "+e.url.getPath()),n.promise}if(t.title)e.title=t.title,e.args.title=t.title;if(t.documentTitle)e.documentTitle=t.documentTitle,e.args.documentTitle=t.documentTitle;if(t.args)for(var r in t.args)if(t.args.hasOwnProperty(r)){if(!e.args.hasOwnProperty(r))e.args[r]=t.args[r];if(!e.hasOwnProperty(r))e[r]=t.args[r]}var o=new i;o.syncModeEnabled=!1;var s=o.promise,l=!1,u=function(){if(!l)l=!0,this.getEventBus().fire("actionabort",a.mix({controller:this},e))};if(s.abort=a.bind(u,this),!e.isChildAction)this.currentURL=e.url;var A=function(n){if(!l){if(!n){var r="No action implement for "+t.type,s=a.mix({controller:this,failType:"NoModule",config:t,reason:r},e);return this.getEventBus().fire("actionfail",s),this.getEventBus().notifyError(s),void o.reject(r)}if(this.getEventBus().fire("actionloaded",{controller:this,url:e.url,config:t,action:n}),"function"==typeof n)o.resolve(new n,e);else if("function"==typeof n.createRuntimeAction){var u=function(i){if(!i){var n="Action factory returns non-action",r=a.mix({controller:this,failType:"InvalidFactory",config:t,reason:n,action:i},e);this.getEventBus().fire("actionfail",r),this.getEventBus().notifyError(r),o.reject(n)}else o.resolve(i,e)};u=a.bind(u,this);var A=n.createRuntimeAction(e);i.when(A).then(u)}else o.resolve(n,e)}};if(A=a.bind(A,this),"string"==typeof t.type)window.require([t.type],A);else A(t.type);return s},exports.enterAction=function(e,t){if(!t.isChildAction){if(t.url!==this.currentURL)return;if(this.currentAction)if(this.getEventBus().fire("leaveaction",{controller:this,action:this.currentAction,to:a.mix({},t)}),"function"==typeof this.currentAction.leave)this.currentAction.leave();this.currentAction=e,document.title=t.title||t.documentTitle||this.getDefaultTitle()}this.getEventBus().fire("enteraction",a.mix({controller:this,action:e},t));var i=function(){this.getEventBus().fire("enteractioncomplete",a.mix({controller:this,action:e},t))};i=a.bind(i,this);var n=function(e){var i="";if(!e)i="Invoke action.enter() causes error";else if(e.message){if(i=e.message,e.stack)i+="\n"+e.stack}else if(window.JSON&&"function"==typeof JSON.stringify)try{i=JSON.stringify(e)}catch(n){i=e}else i=e;var r=a.mix({failType:"EnterFail",reason:i},t);this.getEventBus().fire("enteractionfail",r),this.getEventBus().notifyError(r)};n=a.bind(n,this);var r=e.enter(t);return r.then(i,n),r},exports.forward=function(e,t,n,r){var s={url:e,container:t,isChildAction:!!r};if(r){var l=this.childActionMapping[t];s.referrer=l?l.url:null}else s.referrer=this.currentURL;a.mix(s,n),s.args=a.mix({},s),a.mix(s.args,e.getQuery());var u=this.getEventBus().fire("forwardaction",a.mix({controller:this},s));if(u&&u.isDefaultPrevented()===!0)return i.rejected();var A=this.loadAction(s);return o.has(A,"loadAction should always return a Promise"),A},exports.renderAction=function(e){if("string"==typeof e)e=n.parse(e);if(this.globalActionLoader&&"function"==typeof this.globalActionLoader.abort)this.globalActionLoader.abort();if(this.currentAction&&"function"==typeof this.currentAction.filterRedirect&&this.currentAction.filterRedirect(e)===!1)return i.rejected("Redirect aborted by previous action");this.globalActionLoader=this.forward(e,this.getMainContainer(),null,!1);var t=this.getEventBus();return this.globalActionLoader.then(a.bind(this.enterAction,this)).fail(a.bind(t.notifyError,t))},exports.enterChildAction=function(i,n){function r(t,i,r){if(i=i||{},t=u.resolveURL(t,i),i.global){var a=document.getElementById(n.container),o=u.redirect(t,i);if(o&&a)e(A,a);return o}var s=A.childActionMapping[n.container],l=t.toString()!==s.url.toString(),B=l||i.force;if(B)if(i.silent)s.url=t;else A.renderChildAction(t,s.container,r);return B}function o(e){if(e.isChildActionRedirected)return!0;for(var t=e.target||e.srcElement;t&&(!t.id||!A.childActionMapping[t.id]);)t=t.parentNode;if(t.id!==n.container)return e.isChildActionRedirected=!0,!0;else return!1}function s(e){e=e||window.event;var t=e.target||e.srcElement;if("a"===t.nodeName.toLowerCase()){var i=t.getAttribute("href",2)||"";if("#"===i.charAt(0))if(!o(e)){if(e.preventDefault)e.preventDefault();else e.returnValue=!1;for(var n=i.substring(1),s=(t.getAttribute("data-redirect")||"").split(/[,\s]/),l={},u=0;u<s.length;u++){var A=a.trim(s[u]);l[A]=!0}r(n,l)}}}this.childActionLoaders[n.container]=null;var l=document.getElementById(n.container);if(l){var u=this.getLocator(),A=this;return i.redirect=r,i.reload=function(e){this.redirect(n.url,{
force:!0},e)},i.back=function(e,t){var i=this.context&&this.context.referrer,n=i||e;this.redirect(n,null,t)},t(this,l,i,s,n),this.enterAction(i,n)}},exports.renderChildAction=function(e,t,r){if(o.has(t),"string"==typeof e)e=n.parse(e);var s=this.childActionLoaders[t];if(s&&"function"==typeof s.abort)s.abort();var l=this.childActionMapping[t],u=l&&l.action;if(u&&"function"==typeof u.filterRedirect&&u.filterRedirect(e)===!1)return i.rejected("Redirect aborted by previous action");var A=this.forward(e,t,r,!0),B=this.getEventBus(),c=A.then(a.bind(this.enterChildAction,this)).fail(a.bind(B.notifyError,B));return c.abort=A.abort,this.childActionLoaders[t]=c,c};var s=require("eoo").create(require("mini-event/EventTarget"),exports),l=new s;return l.setLocator(require("./locator")),l.setRouter(require("./router")),l.setEventBus(require("./events")),l.setPermissionProvider(require("./permission")),l.Controller=s,l}),define("er/Observable",["require","mini-event/EventTarget"],function(require){return require("mini-event/EventTarget")}),define("er/Enum",["require","eoo"],function(require){var exports={};exports.constructor=function(){this.valueIndex=[],this.aliasIndex={},this.textIndex={};for(var e=0;e<arguments.length;e++){var t=arguments[e];if(null==t.value)t.value=e;this.addElement(t)}},exports.addElement=function(e){if(this.hasOwnProperty(e.value))throw new Error("Already defined an element with value"+e.value+" in this enum type");if(this.hasOwnProperty(e.alias))throw new Error('Already defined an element with alias "'+e.alias+'" in this enum type');this[e.value]=e.alias,this[e.alias]=e.value,this.valueIndex[e.value]=e,this.aliasIndex[e.alias]=e,this.textIndex[e.text]=e},exports.fromValue=function(e){return this.valueIndex[e]},exports.fromAlias=function(e){return this.aliasIndex[e]},exports.fromText=function(e){return this.textIndex[e]},exports.getTextFromValue=function(e){return this.fromValue(e).text},exports.getTextFromAlias=function(e){return this.fromAlias(e).text},exports.getValueFromAlias=function(e){return this.fromAlias(e).value},exports.getValueFromText=function(e){return this.fromText(e).value},exports.getAliasFromValue=function(e){return this.fromValue(e).alias},exports.getAliasFromText=function(e){return this.fromText(e).alias},exports.toArray=function(){var e=[];if(arguments.length>0)for(var t=0;t<arguments.length;t++){var i=arguments[t];if("string"==typeof i)e.push(this.fromAlias(i));else e.push(i)}else for(var t=0;t<this.valueIndex.length;t++)if(this.valueIndex[t])e.push(this.valueIndex[t]);return e};var e=require("eoo").create(exports);return e}),define("er/Action",["require","./util","./Deferred","./events","./locator","eoo","mini-event/EventTarget"],function(require){function e(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(!i.success)e.push(i)}return this.handleError(e)}var t=require("./util"),exports={};exports.constructor=function(){this.disposed=!1,this.initialize()},exports.initialize=t.noop,exports.context=null,exports.modelType=null,exports.viewType=null,exports.enter=function(i){this.context=i||{},this.fire("enter");var n=t.mix({},i&&i.args);if(this.model)this.model.fill(n);else this.model=this.createModel(n);if(this.fire("beforemodelload"),this.model&&"function"==typeof this.model.load){var r=this.model.load();return r.then(t.bind(this.forwardToView,this),t.bind(e,this))}else return this.forwardToView(),require("./Deferred").resolved(this)},exports.handleError=function(e){throw e},exports.createModel=function(e){if(this.modelType){var t=new this.modelType(e);return t}else return{}},exports.forwardToView=function(){if(this.disposed)return this;if(this.fire("modelloaded"),!this.view)this.view=this.createView();if(this.view){if(this.view.model=this.model,!this.view.container)this.view.container=this.context.container;this.fire("beforerender"),this.view.render(),this.fire("rendered"),this.initBehavior(),this.fire("entercomplete")}else{var e=require("./events");e.notifyError("No view attached to this action")}return this},exports.createView=function(){return this.viewType?new this.viewType:null},exports.initBehavior=t.noop,exports.filterRedirect=t.noop,exports.leave=function(){if(this.disposed)return this;if(this.disposed=!0,this.fire("beforeleave"),this.model){if("function"==typeof this.model.dispose)this.model.dispose();this.model=null}if(this.view){if("function"==typeof this.view.dispose)this.view.dispose();this.view=null}this.fire("leave"),this.destroyEvents()},exports.redirect=function(e,t){var i=require("./locator");i.redirect(e,t)},exports.reload=function(){var e=require("./locator");e.reload()},exports.back=function(e){var t=this.context&&this.context.referrer,i=t||e;if(i)this.redirect(i)};var i=require("eoo").create(require("mini-event/EventTarget"),exports);return i}),define("eoo/defineAccessor",["require"],function(require){function e(e){var t="return typeof this."+i+" === 'object' ? this."+i+"['"+e+"'] : undefined;";return new Function(t)}function t(e){var t="this."+i+" = this."+i+" || {};\nthis."+i+"['"+e+"'] = value;";return new Function("value",t)}var i="__eooPrivateMembers__";return function(i,n,r){var a=n.charAt(0).toUpperCase()+n.slice(1),o="get"+a,s="set"+a;if(!r)i[o]=!r||"function"!=typeof r.get?e(n):r.get,i[s]=!r||"function"!=typeof r.set?t(n):r.set;else"function"==typeof r.get&&(i[o]=r.get),"function"==typeof r.set&&(i[s]=r.set)}}),define("er/View",["require","./util","./Model","etpl","eoo","mini-event/EventTarget"],function(require){var e=require("./util"),exports={};exports.constructor=function(){this.initialize()},exports.initialize=e.noop,exports.template="",exports.getTemplateName=function(){return this.template||""},exports.model=null,exports.container="",exports.getContainerElement=function(){return e.getElement(this.container)||null},exports.getTemplateData=function(){var e=this.model;if(e&&"function"!=typeof e.get){var t=require("./Model");e=new t(e)}var i=function(t){for(var i=t.replace(/\[(\d+)\]/g,".$1").split("."),n=i.shift(),r=e.get(n);r&&(n=i.shift());)r=r[n];return r};return{get:i,relatedModel:e}},exports.render=function(){var e=this.getContainerElement();if(!e){var t=this.model&&"function"==typeof this.model.get&&this.model.get("url");throw new Error("Container not found when rendering "+(t?'"'+t+'"':"view"))}var i=require("etpl"),n=i.render(this.getTemplateName(),this.getTemplateData());e.innerHTML=n,this.enterDocument()},exports.enterDocument=require("./util").noop,exports.dispose=function(){var e=this.getContainerElement();e&&(e.innerHTML="")};var t=require("eoo").create(require("mini-event/EventTarget"),exports);return t}),define("ef/UIView",["require","underscore","er/View","ef/ActionDialog","esui","esui/Dialog","esui/main","esui/ViewContext","eoo"],function(require){function e(e,t){for(var i=e,n=0;n<t.length;n++)i=i[t[n]];return i}function t(e,t,i,n){if("string"==typeof n)n=e[n];if("function"!=typeof n)return n;var r=e.get(t);if(r)r.on(i,n,e);return n}function i(){return"ef-"+a++}var n=require("underscore"),r=require("er/View");require("ef/ActionDialog");var exports={};exports.replaceValue=function(t){if("string"!=typeof t)return t;if("@@"===t||"**"===t)return this.model;var i=t.charAt(0),n=t.substring(1);if("@"===i||"*"===i){var r=n.split(".");return t=this.model.get(r[0]),r.length>1?e(t,r.slice(1)):t}return t},exports.get=function(e){return this.viewContext.get(e)},exports.getSafely=function(e){return this.viewContext.getSafely(e)},exports.getGroup=function(e){return this.viewContext.getGroup(e)},exports.create=function(e,t){if(t=t||{},!t.viewContext)t.viewContext=this.viewContext;return require("esui").create(e,t)},exports.alert=function(e,t){var i="string"==typeof e?{title:t||document.title,content:e}:n.clone(e);if(!i.viewContext)i.viewContext=this.viewContext;var r=require("esui/Dialog");return r.alert(i)},exports.confirm=function(e,t){var i="string"==typeof e?{title:t||document.title,content:e}:n.clone(e);if(!i.viewContext)i.viewContext=this.viewContext;var r=require("esui/Dialog");return r.confirm(i)},exports.popActionDialog=function(e){var t=document.createElement("div");document.body.appendChild(t);var i={width:600,needFoot:!1,draggable:!0,closeOnHide:!0,autoClose:!0,main:t,viewContext:this.viewContext};e=n.defaults({},e,i);var r=require("esui/main"),a=r.create("ActionDialog",e);return a.render(),a.show(),t.style.visibility="hidden",t.style.opacity="0",a},exports.uiEvents=null,exports.getUIEvents=function(){return this.uiEvents||{}},exports.uiProperties=null,exports.getUIProperties=function(){return this.uiProperties},exports.bindEvents=function(){var e=this.getUIEvents();if(e)for(var i in e)if(e.hasOwnProperty(i)){var n=i.split(":");if(n.length>1){var r=n[0],a=n[1],o=e[i];t(this,r,a,o)}else{var s=e[i];if("object"!=typeof s)return;for(a in s)if(s.hasOwnProperty(a))o=s[a],t(this,i,a,o)}}else;};var a=8785925;exports.getViewName=function(){if(this.name)return this.name;var e=this.constructor&&this.constructor.name;if(!e&&this.constructor){var t=this.constructor.toString(),n=/function\s+([^\(]*)/.exec(t);e=n&&n[1].replace(/\s+$/g,"")}if(!e)e=i();if(e=e.replace(/View$/,""),e=e.replace(/[A-Z]{2,}/g,function(e){return e.charAt(0)+e.slice(1,-1).toLowerCase()+e.charAt(e.length-1)}),e=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),"-"===e.charAt(0))e=e.substring(1);return e},exports.createViewContext=function(){var e=require("esui/ViewContext"),t=this.getViewName();return new e(t||null)},exports.enterDocument=function(){this.viewContext=this.createViewContext();var e=this.getContainerElement(),t={viewContext:this.viewContext,properties:this.getUIProperties(),valueReplacer:n.bind(this.replaceValue,this)};try{require("esui").init(e,t)}catch(i){var r=new Error("ESUI initialization error on view because: "+i.message);throw r.actualError=i,r}this.bindEvents()},exports.dispose=function(){if(this.viewContext)this.viewContext.dispose(),this.viewContext=null;this.$super(arguments)};var o=require("eoo").create(r,exports);return o}),define("esui/TreeStrategy",["require","underscore"],function(require){function e(e){var i={defaultExpand:!1};t.extend(this,i,e)}var t=require("underscore");return e.prototype.isLeafNode=function(e){return!e.children||!e.children.length},e.prototype.shouldExpand=function(e){return this.defaultExpand},e.prototype.attachTo=function(e){this.enableToggleStrategy(e),this.enableSelectStrategy(e)},e.prototype.enableToggleStrategy=function(e){e.on("expand",function(e){this.expandNode(e.node.id)}),e.on("collapse",function(e){this.collapseNode(e.node.id,!1)})},e.prototype.enableSelectStrategy=function(e){e.on("select",function(e){this.selectNode(e.node.id)}),e.on("unselect",function(t){if(e.get("allowUnselectNode"))e.unselectNode(t.node.id)})},e}),define("ef/RemoteTreeStrategy",["require","esui/lib","esui/TreeStrategy","er/ajax","eoo"],function(require){function e(e,i,n){var r=n.node;if(r.children)return void e.expandNode(r.id);var a=e.workingRequests[r.id];if(a)a.abort();a=this.requestNodeData(r),e.workingRequests[r.id]=a,a.done(t.bind(e.expandNode,e,r.id))}var t=require("esui/lib"),i=require("esui/TreeStrategy"),exports={};exports.constructor=function(e){if(e.requestMethod)e.requestMethod=e.requestMethod.toLowerCase();i.apply(this,arguments),this.workingRequests={}},exports.urlTemplate="",exports.requestMethod="get",exports.getRequestURL=function(e){return t.format(this.urlTemplate,e)},exports.getRequestData=function(e){return null},exports.requestNodeData=function(e){var t=this.getRequestURL(e),i=this.getRequestData(e),n=require("er/ajax");return"get"===this.requestMethod?n.getJSON(t,i,this.useCache||!1):n.post(t,i,"json")},exports.enableToggleStrategy=function(i){i.on("expand",t.curry(e,i,this)),i.on("collapse",function(e){this.collapseNode(e.node.id,!1)})};var n=require("eoo").create(i,exports);return t.inherits(n,i),n}),define("esui/SafeWrapper",["require","underscore"],function(require){function e(){}var t=require("underscore");return t.each(["enable","disable","setDisabled","show","hide","toggle","setValue","setRawValue","addChild","removeChild","set","addState","removeState","toggleState","on","off","fire","dispose","destroy","initOptions","createMain","initStructure","setViewContext","render","repaint","appendTo","insertBefore","initChildren","disposeChildren"],function(t){e.prototype[t]=function(){}}),t.each(["isDisabled","isHidden","hasState","isPropertyChanged"],function(t){e.prototype[t]=function(){return!1}}),t.each(["getRawValue","getChild","get"],function(t){e.prototype[t]=function(){return null}}),t.each(["getValue"],function(t){e.prototype[t]=function(){return""}}),t.each(["setProperties"],function(t){e.prototype[t]=function(){return{}}}),e.prototype.getCategory=function(){return"control"},e.prototype.getChildSafely=function(t){var i=new e;if(i.childName=t,i.parent=this,this.viewContext)i.viewContext=this.viewContext;return i},e}),define("esui/Control",["require","./lib","underscore","./main","./Helper","./SafeWrapper","mini-event/EventTarget"],function(require){function e(e){if(e=e||{},this.helper=new r(this),this.helper.changeStage("NEW"),this.children=[],this.childrenIndex={},this.currentStates={},this.domEvents={},this.main=e.main?e.main:this.createMain(e),!this.id&&!e.id)this.id=t.getGUID();this.initOptions(e),this.helper.initViewContext(),this.helper.initExtensions(),this.helper.changeStage("INITED"),this.fire("init")}var t=require("./lib"),i=require("underscore"),n=require("./main"),r=require("./Helper");e.prototype={constructor:e,ignoreStates:["disabled"],getCategory:function(){return"control"},initOptions:function(e){e=e||{},this.setProperties(e)},createMain:function(){if(!this.type)return document.createElement("div");var e=this.type.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()});return document.createElement(n.getConfig("customElementPrefix")+"-"+e.slice(1))},initStructure:function(){},initEvents:function(){},render:function(){if(this.helper.isInStage("INITED")){if(this.fire("beforerender"),this.domIDPrefix=this.viewContext.id,this.initStructure(),this.initEvents(),!this.main.id)this.main.id=this.helper.getId();if(this.main.setAttribute(n.getConfig("instanceAttr"),this.id),this.main.setAttribute(n.getConfig("viewContextAttr"),this.viewContext.id),this.helper.addPartClasses(),this.states)this.states="string"==typeof this.states?this.states.split(" "):this.states,i.each(this.states,this.addState,this)}if(this.repaint(),this.helper.isInStage("INITED"))this.helper.changeStage("RENDERED"),this.fire("afterrender")},repaint:function(e,t){if(!t||t.hasOwnProperty("disabled")){var i=this.disabled?"addState":"removeState";this[i]("disabled")}if(!t||t.hasOwnProperty("hidden")){var i=this.hidden?"addState":"removeState";this[i]("hidden")}},appendTo:function(t){if(t instanceof e)t=t.main;if(t.appendChild(this.main),this.helper.isInStage("NEW")||this.helper.isInStage("INITED"))this.render()},insertBefore:function(t){if(t instanceof e)t=t.main;if(t.parentNode.insertBefore(this.main,t),this.helper.isInStage("NEW")||this.helper.isInStage("INITED"))this.render()},dispose:function(){if(!this.helper.isInStage("DISPOSED"))this.helper.beforeDispose(),this.helper.dispose(),this.helper.afterDispose()},destroy:function(){var e=this.main;this.dispose(),t.removeNode(e)},get:function(e){var i=this["get"+t.pascalize(e)];if("function"==typeof i)return i.call(this);else return this[e]},set:function(e,i){var n=this["set"+t.pascalize(e)];if("function"==typeof n)return n.call(this,i);var r={};r[e]=i,this.setProperties(r)},isPropertyChanged:function(e,t,i){return i!==t},setProperties:function(e){if(!this.stage){if(e.hasOwnProperty("id"))this.id=e.id;if(e.hasOwnProperty("group"))this.group=e.group;if(e.hasOwnProperty("skin"))this.skin=e.skin}if(delete e.id,delete e.group,delete e.skin,e.hasOwnProperty("viewContext"))this.setViewContext(e.viewContext),delete e.viewContext;if(this.hasOwnProperty("disabled"))this.disabled=!!this.disabled;if(this.hasOwnProperty("hidden"))this.hidden=!!this.hidden;var i=[],n={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r],o="get"+t.pascalize(r)+"Property",s=this[o]?this[o]():this[r],l=this.isPropertyChanged(r,a,s);if(l){this[r]=a;var u={name:r,oldValue:s,newValue:a};i.push(u),n[r]=u}}if(i.length&&this.helper.isInStage("RENDERED"))this.repaint(i,n);return n},setViewContext:function(e){var t=this.viewContext;if(t!==e){if(t)this.viewContext=null,t.remove(this);this.viewContext=e,e&&e.add(this);var i=this.children;if(i)for(var r=0,a=i.length;a>r;r++)i[r].setViewContext(e);if(this.viewContext&&this.helper.isInStage("RENDERED"))this.main.setAttribute(n.getConfig("viewContextAttr"),this.viewContext.id)}},setDisabled:function(e){this[e?"disable":"enable"]()},disable:function(){this.addState("disabled")},enable:function(){this.removeState("disabled")},isDisabled:function(){return this.hasState("disabled")},show:function(){this.removeState("hidden")},hide:function(){this.addState("hidden")},toggle:function(){this[this.isHidden()?"show":"hide"]()},isHidden:function(){return this.hasState("hidden")},addState:function(e){if(!this.hasState(e)){this.currentStates[e]=!0,this.helper.addStateClasses(e);var t={},i=e.replace(/-(\w)/,function(e,t){return t.toUpperCase()});t[i]=!0,this.setProperties(t)}},removeState:function(e){if(this.hasState(e)){this.currentStates[e]=!1,this.helper.removeStateClasses(e);var t={},i=e.replace(/-(\w)/,function(e,t){return t.toUpperCase()});t[i]=!1,this.setProperties(t)}},toggleState:function(e){var t=this.hasState(e)?"removeState":"addState";this[t](e)},hasState:function(e){return!!this.currentStates[e]},addChild:function(e,t){if(t=t||e.childName,e.parent)e.parent.removeChild(e);if(this.children.push(e),e.parent=this,t)e.childName=t,this.childrenIndex[t]=e;if(this.viewContext!==e.viewContext)e.setViewContext(this.viewContext)},removeChild:function(e){for(var t=this.children,i=t.length;i--;)if(t[i]===e)t.splice(i,1);var n=e.childName;if(n)this.childrenIndex[n]=null;e.parent=null},disposeChildren:function(){for(var e=this.children.slice(),t=0;t<e.length;t++)e[t].dispose();this.children=[],this.childrenIndex={}},getChild:function(e){return this.childrenIndex[e]||null},getChildSafely:function(e){var t=this.getChild(e);if(!t){var i=require("./SafeWrapper");if(t=new i,t.childName=e,t.parent=this,this.viewContext)t.viewContext=this.viewContext}return t},initChildren:function(e,t){this.helper.initChildren(e,t)}};var a=require("mini-event/EventTarget");return t.inherits(e,a),e}),define("ef/ChildView",["require","underscore","esui/Control","esui/painters","er/Deferred","mini-event","eoo","esui"],function(require){function e(e){var t=require("mini-event").fromEvent(e,{preserveData:!0,syncState:!0});t.type="view@"+e.type,this.fire(t)}var t=require("underscore"),i=require("esui/Control"),exports={};exports.type="ChildView",exports.repaint=require("esui/painters").createRepaint(i.prototype.repaint,{name:"viewType",paint:function(e,i){e.disposeView();var n=require("er/Deferred");e.view=n.require([i]),e.view.then(t.bind(e.fire,e,"viewloaded")),e.view.then(t.bind(e.renderView,e))}}),exports.disposeView=function(){var e=this.get("view");if(e&&"function"==typeof e.dispose)e.dispose();this.view=null},exports.renderView=function(t){if(this.helper.isInStage("RENDERED")){this.loadedViewModule=t;var i=this.view="function"==typeof t?new t:t;i.model=this.get("model"),i.container=this.main.id,i.render(),this.fire("viewrendered"),i.on("*",e,this)}},exports.refresh=function(){var e=this.get("loadedViewModule");if(!e)throw new Error("No view module loaded yet");this.disposeView(),this.renderView(e)};var n=require("eoo").create(i,exports);return require("esui").register(n),n}),define("mini-event/lib",["require"],function(require){var e={};return e.extend=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i){for(var n in i)if(i.hasOwnProperty(n))e[n]=i[n]}else;}return e},e}),define("mini-event/EventTarget",["require","./lib","./Event","./EventQueue"],function(require){function e(){}var t=require("./lib"),i=require("./Event"),n=require("./EventQueue");return e.prototype.on=function(e,i,r,a){if(!this.miniEventPool)this.miniEventPool={};if(!this.miniEventPool.hasOwnProperty(e))this.miniEventPool[e]=new n;var o=this.miniEventPool[e];if(a=t.extend({},a),r)a.thisObject=r;o.add(i,a)},e.prototype.once=function(e,i,n,r){r=t.extend({},r),r.once=!0,this.on(e,i,n,r)},e.prototype.un=function(e,t,i){if(this.miniEventPool&&this.miniEventPool.hasOwnProperty(e)){var n=this.miniEventPool[e];n.remove(t,i)}},e.prototype.fire=function(e,t){if(1===arguments.length&&"object"==typeof e)t=e,e=t.type;if(!e)throw new Error("No event type specified");if("*"===e)throw new Error("Cannot fire global event");var n=t instanceof i?t:new i(e,t);n.target=this;var r=this["on"+e];if("function"==typeof r)r.call(this,n);if(this.miniEventPool&&this.miniEventPool.hasOwnProperty(e)){var a=this.miniEventPool[e];a.execute(n,this)}if(this.miniEventPool&&this.miniEventPool.hasOwnProperty("*")){var o=this.miniEventPool["*"];o.execute(n,this)}return n},e.prototype.destroyEvents=function(){if(this.miniEventPool){for(var e in this.miniEventPool)if(this.miniEventPool.hasOwnProperty(e))this.miniEventPool[e].dispose();this.miniEventPool=null}},e.enable=function(i){i.miniEventPool={},t.extend(i,e.prototype)},e}),define("er/events",["require","eoo","mini-event/EventTarget"],function(require){var exports={};exports.notifyError=function(e){if("string"==typeof e)e=new Error(e);return this.fire("error",{error:e}),e};var e=require("eoo").create(require("mini-event/EventTarget"),exports),t=new e;return t.EventBus=e,t}),define("ef/ActionPanel",["require","er/events","esui/Panel","mini-event","er/Deferred","esui/painters","er/controller","eoo","esui"],function(require){function e(e){var t=require("mini-event").fromEvent(e,{preserveData:!0,syncState:!0});t.type="action@"+e.type,this.fire(t)}function t(t){if(t.isChildAction&&t.container===this.main.id){if(this.action=t.action,"function"==typeof this.action.on)this.action.on("*",e,this);this.fire("actionattach")}}function i(e){if(e.isChildAction&&e.container===this.main.id)this.fire("actionloaded")}function n(e){if(e.isChildAction&&e.container===this.main.id)this.action=null,this.fire("actionloadfail",{failType:e.failType,reason:e.reason})}function r(e){if(e.isChildAction&&e.container===this.main.id)this.fire("actionloadabort")}var a=require("er/events"),o=require("esui/Panel"),exports={};exports.type="ActionPanel",exports.setContent=function(){},exports.actionType=null,exports.action=null,exports.initStructure=function(){a.on("enteraction",t,this),a.on("enteractioncomplete",i,this),a.on("actionnotfound",n,this),a.on("permissiondenied",n,this),a.on("actionfail",n,this),a.on("enteractionfail",n,this),a.on("actionabort",r,this)},exports.disposeAction=function(){var t=require("er/Deferred"),i=this.action;if(i){if(t.isPromise(i)&&"function"==typeof i.abort)i.abort();else{if("function"==typeof i.un)i.un("*",e,this);if("function"==typeof i.leave)i.leave()}this.action=null,this.main.innerHTML=""}},exports.repaint=require("esui/painters").createRepaint(o.prototype.repaint,{name:["url","actionOptions"],paint:function(e,t,i){if(e.disposeAction(),t)if(!e.lazy||!e.helper.isInStage("INITED")){var n=require("er/controller");if(e.action=n.renderChildAction(t,e.main.id,i),"function"!=typeof e.action.abort)e.action=null}}}),exports.dispose=function(){this.disposeAction(),a.un("enteraction",t,this),a.un("enteractioncomplete",i,this),a.un("actionnotfound",n,this),a.un("permissiondenied",n,this),a.un("actionfail",n,this),a.un("enteractionfail",n,this),a.un("actionabort",r,this),this.$super(arguments)},exports.reload=function(e){var t=this.url;this.url=null,this.setProperties({url:t,actionOptions:e})};var s=require("eoo").create(o,exports);return require("esui").register(s),s}),define("ef/ActionDialog",["require","esui/main","esui/Dialog","./ActionPanel","mini-event","esui/painters","eoo","esui"],function(require){var e=require("esui/main"),t=require("esui/Dialog");require("./ActionPanel");var exports={};exports.type="ActionDialog",exports.styleType="Dialog",exports.setContent=function(){},exports.createBF=function(t,i){if(i)this.content=i.innerHTML;else i=document.createElement("div"),this.main.appendChild(i);this.helper.addPartClasses(t+"-panel",i);var n={main:i},r="Panel";if("body"===t)n.url=this.url,n.actionOptions=this.actionOptions,r="ActionPanel";var a=e.create(r,n);if("body"===t){a.on("actionattach",function(){if(this.resize(),this.autoClose){var e=this.get("action");if("function"==typeof e.on)e.on("handlefinish",!1),e.on("handlefinish",this.dispose,this)}this.fire("actionattach")},this),a.on("*",function(e){if(0===e.type.indexOf("action@"))this.fire(e)},this);var o=require("mini-event");o.delegate(a,this,"actionloaded"),o.delegate(a,this,"actionloadfail"),o.delegate(a,this,"actionloadabort")}return a.render(),this.addChild(a,t),a},exports.repaint=require("esui/painters").createRepaint(t.prototype.repaint,{name:["url","actionOptions"],paint:function(e,t,i){var n=e.getBody(),r={url:t,actionOptions:i};n.setProperties(r)}}),exports.getAction=function(){var e=this.getBody();if(e)return e.get("action");else return null},exports.reload=function(){var e=this.getBody();if(e)e.reload()};var i=require("eoo").create(t,exports);return require("esui").register(i),i}),define("echarts/util/component",["require","zrender/core/util","./clazz"],function(require){var e=require("zrender/core/util"),t=require("./clazz"),i=t.parseClassType,n=0,r={},a="_";return r.getUID=function(e){return[e||"",n++,Math.random()].join(a)},r.enableSubTypeDefaulter=function(e){var t={};return e.registerSubTypeDefaulter=function(e,n){e=i(e),t[e.main]=n},e.determineSubType=function(n,r){var a=r.type;if(!a){var o=i(n).main;if(e.hasSubTypes(n)&&t[o])a=t[o](r)}return a},e},r.enableTopologicalTravel=function(t,i){function n(t){var n={},o=[];return e.each(t,function(s){var l=r(n,s),u=l.originalDeps=i(s),A=a(u,t);if(l.entryCount=A.length,0===l.entryCount)o.push(s);e.each(A,function(t){if(e.indexOf(l.predecessor,t)<0)l.predecessor.push(t);var i=r(n,t);if(e.indexOf(i.successor,t)<0)i.successor.push(s)})}),{graph:n,noEntryList:o}}function r(e,t){if(!e[t])e[t]={predecessor:[],successor:[]};return e[t]}function a(t,i){var n=[];return e.each(t,function(t){e.indexOf(i,t)>=0&&n.push(t)}),n}t.topologicalTravel=function(t,i,r,a){function o(e){if(u[e].entryCount--,0===u[e].entryCount)A.push(e)}function s(e){B[e]=!0,o(e)}if(t.length){var l=n(i),u=l.graph,A=l.noEntryList,B={};for(e.each(t,function(e){B[e]=!0});A.length;){var c=A.pop(),C=u[c],D=!!B[c];if(D)r.call(a,c,C.originalDeps.slice()),delete B[c];e.each(C.successor,D?s:o)}e.each(B,function(){throw new Error("Circle dependency may exists")})}}},r}),define("echarts/model/mixin/boxLayout",["require"],function(require){return{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}}),define("echarts/model/Component",["require","./Model","zrender/core/util","../util/component","../util/clazz","../util/layout","./mixin/boxLayout"],function(require){function e(e){var t=[];return i.each(s.getClassesByMainType(e),function(e){n.apply(t,e.prototype.dependencies||[])}),i.map(t,function(e){return a.parseClassType(e).main})}var t=require("./Model"),i=require("zrender/core/util"),n=Array.prototype.push,r=require("../util/component"),a=require("../util/clazz"),o=require("../util/layout"),s=t.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,i,n,a){t.call(this,e,i,n,a),this.uid=r.getUID("componentModel")},init:function(e,t,i,n){this.mergeDefaultAndTheme(e,i)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,r=n?o.getLayoutParams(e):{},a=t.getTheme();if(i.merge(e,a.get(this.mainType)),i.merge(e,this.getDefaultOption()),n)o.mergeLayoutParam(e,r,n)},mergeOption:function(e,t){i.merge(this.option,e,!0);var n=this.layoutMode;if(n)o.mergeLayoutParam(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){if(!a.hasOwn(this,"__defaultOption")){for(var e=[],t=this.constructor;t;){var n=t.prototype.defaultOption;n&&e.push(n),t=t.superClass}for(var r={},o=e.length-1;o>=0;o--)r=i.merge(r,e[o],!0);a.set(this,"__defaultOption",r)}return a.get(this,"__defaultOption")},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});return a.enableClassManagement(s,{registerWhenExtend:!0}),r.enableSubTypeDefaulter(s),r.enableTopologicalTravel(s,e),i.mixin(s,require("./mixin/boxLayout")),s}),define("echarts/model/globalDefault",[],function(){var e="";if("undefined"!=typeof navigator)e=navigator.platform||"";return{color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],textStyle:{fontFamily:e.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1}}),define("echarts/model/Global",["require","zrender/core/util","../util/model","./Model","./Component","./globalDefault","./mixin/colorPalette"],function(require){function e(e,t){s.each(t,function(t,i){if(!f.hasClass(i))if("object"==typeof t)e[i]=!e[i]?s.clone(t):s.merge(e[i],t,!1);else if(null==e[i])e[i]=t})}function t(t){t=t,this.option={},this.option[E]=1,this._componentsMap={series:[]},this._seriesIndices=null,e(t,this._theme.option),s.merge(t,h,!1),this.mergeOption(t)}function i(e,t){if(!s.isArray(t))t=t?[t]:[];var i={};return A(t,function(t){i[t]=(e[t]||[]).slice()}),i}function n(e,t,i){var n=t.type?t.type:i?i.subType:f.determineSubType(e,t);return n}function r(e){return c(e,function(e){return e.componentIndex})||[]}function a(e,t){return t.hasOwnProperty("subType")?B(e,function(e){return e.subType===t.subType}):e}function o(e){if(__DEV__)if(!e._seriesIndices)throw new Error("Series has not been initialized yet.")}var s=require("zrender/core/util"),l=require("../util/model"),u=require("./Model"),A=s.each,B=s.filter,c=s.map,C=s.isArray,D=s.indexOf,d=s.isObject,f=require("./Component"),h=require("./globalDefault"),E="\x00_ec_inner",p=u.extend({constructor:p,init:function(e,t,i,n){i=i||{},this.option=null,this._theme=new u(i),this._optionManager=n},setOption:function(e,t,i){s.assert(!(E in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null,i)},resetOption:function(e,i){var n=!1,r=this._optionManager;if(!e||"recreate"===e){var a=r.mountOption("recreate"===e);if(!this.option||"recreate"===e)t.call(this,a);else!i&&this.restoreData(),this.mergeOption(a);n=!0}if("timeline"===e||"media"===e)this.restoreData();if(!e||"recreate"===e||"timeline"===e){var o=r.getTimelineOption(this);o&&(this.mergeOption(o),n=!0)}if(!e||"recreate"===e||"media"===e){var s=r.getMediaOption(this,this._api);if(s.length)A(s,function(e){this.mergeOption(e,n=!0)},this)}return n},mergeOption:function(e){function t(t,u){var B=l.normalizeToArray(e[t]),c=l.mappingToExists(o[t],B);l.makeIdAndName(c),A(c,function(e,i){var r=e.option;if(d(r))e.keyInfo.mainType=t,e.keyInfo.subType=n(t,r,e.exist)});var C=i(o,u);if(a[t]=[],o[t]=[],A(c,function(e,i){var n=e.exist,r=e.option;if(s.assert(d(r)||n,"Empty component definition"),!r)n.mergeOption({},this),n.optionUpdated({},!1);else{var l=f.getClass(t,e.keyInfo.subType,!0);if(n&&n instanceof l)n.name=e.keyInfo.name,n.mergeOption(r,this),n.optionUpdated(r,!1);else{var u=s.extend({dependentModels:C,componentIndex:i},e.keyInfo);n=new l(r,this,this,u),s.extend(n,u),n.init(r,this,this,u),n.optionUpdated(null,!0)}}o[t][i]=n,a[t][i]=n.option},this),
"series"===t)this._seriesIndices=r(o.series)}var a=this.option,o=this._componentsMap,u=[];A(e,function(e,t){if(null!=e)if(!f.hasClass(t))a[t]=null==a[t]?s.clone(e):s.merge(a[t],e,!0);else u.push(t)}),f.topologicalTravel(u,f.getAllClassMainTypes(),t,this),this._seriesIndices=this._seriesIndices||[]},getOption:function(){var e=s.clone(this.option);return A(e,function(t,i){if(f.hasClass(i)){for(var t=l.normalizeToArray(t),n=t.length-1;n>=0;n--)if(l.isIdInner(t[n]))t.splice(n,1);e[i]=t}}),delete e[E],e},getTheme:function(){return this._theme},getComponent:function(e,t){var i=this._componentsMap[e];if(i)return i[t||0];else return void 0},queryComponents:function(e){var t=e.mainType;if(!t)return[];var i=e.index,n=e.id,r=e.name,o=this._componentsMap[t];if(!o||!o.length)return[];var s;if(null!=i){if(!C(i))i=[i];s=B(c(i,function(e){return o[e]}),function(e){return!!e})}else if(null!=n){var l=C(n);s=B(o,function(e){return l&&D(n,e.id)>=0||!l&&e.id===n})}else if(null!=r){var u=C(r);s=B(o,function(e){return u&&D(r,e.name)>=0||!u&&e.name===r})}else s=o.slice();return a(s,e)},findComponents:function(e){function t(e){var t=r+"Index",i=r+"Id",n=r+"Name";return e&&(null!=e[t]||null!=e[i]||null!=e[n])?{mainType:r,index:e[t],id:e[i],name:e[n]}:null}function i(t){return e.filter?B(t,e.filter):t}var n=e.query,r=e.mainType,o=t(n),s=o?this.queryComponents(o):this._componentsMap[r];return i(a(s,e))},eachComponent:function(e,t,i){var n=this._componentsMap;if("function"==typeof e)i=t,t=e,A(n,function(e,n){A(e,function(e,r){t.call(i,n,e,r)})});else if(s.isString(e))A(n[e],t,i);else if(d(e)){var r=this.findComponents(e);A(r,t,i)}},getSeriesByName:function(e){var t=this._componentsMap.series;return B(t,function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.series[e]},getSeriesByType:function(e){var t=this._componentsMap.series;return B(t,function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.series.slice()},eachSeries:function(e,t){o(this),A(this._seriesIndices,function(i){var n=this._componentsMap.series[i];e.call(t,n,i)},this)},eachRawSeries:function(e,t){A(this._componentsMap.series,e,t)},eachSeriesByType:function(e,t,i){o(this),A(this._seriesIndices,function(n){var r=this._componentsMap.series[n];if(r.subType===e)t.call(i,r,n)},this)},eachRawSeriesByType:function(e,t,i){return A(this.getSeriesByType(e),t,i)},isSeriesFiltered:function(e){return o(this),s.indexOf(this._seriesIndices,e.componentIndex)<0},filterSeries:function(e,t){o(this);var i=B(this._componentsMap.series,e,t);this._seriesIndices=r(i)},restoreData:function(){var e=this._componentsMap;this._seriesIndices=r(e.series);var t=[];A(e,function(e,i){t.push(i)}),f.topologicalTravel(t,f.getAllClassMainTypes(),function(t,i){A(e[t],function(e){e.restoreData()})})}});return s.mixin(p,require("./mixin/colorPalette")),p}),define("echarts/ExtensionAPI",["require","zrender/core/util"],function(require){"use strict";function e(e){t.each(i,function(i){this[i]=t.bind(e[i],e)},this)}var t=require("zrender/core/util"),i=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];return e}),define("echarts/model/OptionManager",["require","zrender/core/util","../util/model","./Component"],function(require){function e(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function t(e,t,i){var n,r,a=[],s=[],l=e.timeline;if(e.baseOption)r=e.baseOption;if(l||e.options)r=r||{},a=(e.options||[]).slice();if(e.media){r=r||{};var A=e.media;u(A,function(e){if(e&&e.option)if(e.query)s.push(e);else if(!n)n=e})}if(!r)r=e;if(!r.timeline)r.timeline=l;return u([r].concat(a).concat(o.map(s,function(e){return e.option})),function(e){u(t,function(t){t(e,i)})}),{baseOption:r,timelineOptions:a,mediaDefault:n,mediaList:s}}function i(e,t,i){var r={width:t,height:i,aspectratio:t/i},a=!0;return o.each(e,function(e,t){var i=t.match(C);if(i&&i[1]&&i[2]){var o=i[1],s=i[2].toLowerCase();if(!n(r[s],e,o))a=!1}}),a}function n(e,t,i){if("min"===i)return e>=t;else if("max"===i)return t>=e;else return e===t}function r(e,t){return e.join(",")===t.join(",")}function a(e,t){t=t||{},u(t,function(t,i){if(null!=t){var n=e[i];if(!l.hasClass(i))e[i]=c(n,t,!0);else{t=s.normalizeToArray(t),n=s.normalizeToArray(n);var r=s.mappingToExists(n,t);e[i]=B(r,function(e){return e.option&&e.exist?c(e.exist,e.option,!0):e.exist||e.option})}}})}var o=require("zrender/core/util"),s=require("../util/model"),l=require("./Component"),u=o.each,A=o.clone,B=o.map,c=o.merge,C=/^(min|max)?(.+)$/;return e.prototype={constructor:e,setOption:function(e,i){e=A(e,!0);var n=this._optionBackup,r=t.call(this,e,i,!n);if(this._newBaseOption=r.baseOption,n){if(a(n.baseOption,r.baseOption),r.timelineOptions.length)n.timelineOptions=r.timelineOptions;if(r.mediaList.length)n.mediaList=r.mediaList;if(r.mediaDefault)n.mediaDefault=r.mediaDefault}else this._optionBackup=r},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=B(t.timelineOptions,A),this._mediaList=B(t.mediaList,A),this._mediaDefault=A(t.mediaDefault),this._currentMediaIndices=[],A(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,i=this._timelineOptions;if(i.length){var n=e.getComponent("timeline");if(n)t=A(i[n.getCurrentIndex()],!0)}return t},getMediaOption:function(e){var t=this._api.getWidth(),n=this._api.getHeight(),a=this._mediaList,o=this._mediaDefault,s=[],l=[];if(!a.length&&!o)return l;for(var u=0,c=a.length;c>u;u++)if(i(a[u].query,t,n))s.push(u);if(!s.length&&o)s=[-1];if(s.length&&!r(s,this._currentMediaIndices))l=B(s,function(e){return A(-1===e?o.option:a[e].option)});return this._currentMediaIndices=s,l}},e}),define("echarts/view/Chart",["require","zrender/container/Group","../util/component","../util/clazz","../util/model","zrender/core/util"],function(require){function e(){this.group=new n,this.uid=r.getUID("viewChart")}function t(e,i){if(e)if(e.trigger(i),"group"===e.type)for(var n=0;n<e.childCount();n++)t(e.childAt(n),i)}function i(e,i,n){var r=o.queryDataIndex(e,i);if(null!=r)s.each(o.normalizeToArray(r),function(i){t(e.getItemGraphicEl(i),n)});else e.eachItemGraphicEl(function(e){t(e,n)})}var n=require("zrender/container/Group"),r=require("../util/component"),a=require("../util/clazz"),o=require("../util/model"),s=require("zrender/core/util");e.prototype={type:"chart",init:function(e,t){},render:function(e,t,i,n){},highlight:function(e,t,n,r){i(e.getData(),r,"emphasis")},downplay:function(e,t,n,r){i(e.getData(),r,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){}};var l=e.prototype;return l.updateView=l.updateLayout=l.updateVisual=function(e,t,i,n){this.render(e,t,i,n)},a.enableClassExtend(e,["dispose"]),a.enableClassManagement(e,{registerWhenExtend:!0}),e}),define("zrender/mixin/Draggable",["require"],function(require){function e(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function t(e,t){return{target:e,topTarget:t&&t.topTarget}}return e.prototype={constructor:e,_dragStart:function(e){var i=e.target;if(i&&i.draggable)this._draggingTarget=i,i.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(t(i,e),"dragstart",e.event)},_drag:function(e){var i=this._draggingTarget;if(i){var n=e.offsetX,r=e.offsetY,a=n-this._x,o=r-this._y;this._x=n,this._y=r,i.drift(a,o,e),this.dispatchToElement(t(i,e),"drag",e.event);var s=this.findHover(n,r,i).target,l=this._dropTarget;if(this._dropTarget=s,i!==s){if(l&&s!==l)this.dispatchToElement(t(l,e),"dragleave",e.event);if(s&&s!==l)this.dispatchToElement(t(s,e),"dragenter",e.event)}}},_dragEnd:function(e){var i=this._draggingTarget;if(i)i.dragging=!1;if(this.dispatchToElement(t(i,e),"dragend",e.event),this._dropTarget)this.dispatchToElement(t(this._dropTarget,e),"drop",e.event);this._draggingTarget=null,this._dropTarget=null}},e}),define("zrender/Handler",["require","./core/util","./mixin/Draggable","./mixin/Eventful"],function(require){"use strict";function e(e,t,i){return{type:e,event:i,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch}}function t(){}function i(e,t,i){if(e[e.rectHover?"rectContain":"contain"](t,i)){for(var n,r=e;r;){if(r.clipPath&&!r.clipPath.contain(t,i))return!1;if(r.silent)n=!0;r=r.parent}return n?o:!0}return!1}var n=require("./core/util"),r=require("./mixin/Draggable"),a=require("./mixin/Eventful"),o="silent";t.prototype.dispose=function(){};var s=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],l=function(e,i,o,l){a.call(this),this.storage=e,this.painter=i,this.painterRoot=l,o=o||new t,this.proxy=o,o.handler=this,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,r.call(this),n.each(s,function(e){o.on&&o.on(e,this[e],this)},this)};return l.prototype={constructor:l,mousemove:function(e){var t=e.zrX,i=e.zrY,n=this._hovered,r=this._hovered=this.findHover(t,i),a=r.target,o=n.target,s=this.proxy;if(s.setCursor&&s.setCursor(a?a.cursor:"default"),o&&a!==o&&o.__zr)this.dispatchToElement(n,"mouseout",e);if(this.dispatchToElement(r,"mousemove",e),a&&a!==o)this.dispatchToElement(r,"mouseover",e)},mouseout:function(e){this.dispatchToElement(this._hovered,"mouseout",e);var t,i=e.toElement||e.relatedTarget;do i=i&&i.parentNode;while(i&&9!=i.nodeType&&!(t=i===this.painterRoot));!t&&this.trigger("globalout",{event:e})},resize:function(e){this._hovered={}},dispatch:function(e,t){var i=this[e];i&&i.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(t,i,n){t=t||{};for(var r="on"+i,a=e(i,t,n),o=t.target;o&&(o[r]&&(a.cancelBubble=o[r].call(o,a)),o.trigger(i,a),o=o.parent,!a.cancelBubble););if(!a.cancelBubble)this.trigger(i,a),this.painter&&this.painter.eachOtherLayer(function(e){if("function"==typeof e[r])e[r].call(e,a);if(e.trigger)e.trigger(i,a)})},findHover:function(e,t,n){for(var r=this.storage.getDisplayList(),a={},s=r.length-1;s>=0;s--){var l;if(r[s]!==n&&!r[s].ignore&&(l=i(r[s],e,t)))if(!a.topTarget&&(a.topTarget=r[s]),l!==o){a.target=r[s];break}}return a}},n.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){l.prototype[e]=function(t){var i=this.findHover(t.zrX,t.zrY),n=i.target;if("mousedown"===e)this._downel=n,this._upel=n;else if("mosueup"===e)this._upel=n;else if("click"===e)if(this._downel!==this._upel)return;this.dispatchToElement(i,e,t)}}),n.mixin(l,a),n.mixin(l,r),l}),define("zrender/core/timsort",[],function(){function e(e){for(var t=0;e>=l;)t|=1&e,e>>=1;return e+t}function t(e,t,n,r){var a=t+1;if(a===n)return 1;if(r(e[a++],e[t])<0){for(;n>a&&r(e[a],e[a-1])<0;)a++;i(e,t,a)}else for(;n>a&&r(e[a],e[a-1])>=0;)a++;return a-t}function i(e,t,i){for(i--;i>t;){var n=e[t];e[t++]=e[i],e[i--]=n}}function n(e,t,i,n,r){if(n===t)n++;for(;i>n;n++){for(var a,o=e[n],s=t,l=n;l>s;)if(a=s+l>>>1,r(o,e[a])<0)l=a;else s=a+1;var u=n-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=o}}function r(e,t,i,n,r,a){var o=0,s=0,l=1;if(a(e,t[i+r])>0){for(s=n-r;s>l&&a(e,t[i+r+l])>0;)if(o=l,l=(l<<1)+1,0>=l)l=s;if(l>s)l=s;o+=r,l+=r}else{for(s=r+1;s>l&&a(e,t[i+r-l])<=0;)if(o=l,l=(l<<1)+1,0>=l)l=s;if(l>s)l=s;var u=o;o=r-l,l=r-u}for(o++;l>o;){var A=o+(l-o>>>1);if(a(e,t[i+A])>0)o=A+1;else l=A}return l}function a(e,t,i,n,r,a){var o=0,s=0,l=1;if(a(e,t[i+r])<0){for(s=r+1;s>l&&a(e,t[i+r-l])<0;)if(o=l,l=(l<<1)+1,0>=l)l=s;if(l>s)l=s;var u=o;o=r-l,l=r-u}else{for(s=n-r;s>l&&a(e,t[i+r+l])>=0;)if(o=l,l=(l<<1)+1,0>=l)l=s;if(l>s)l=s;o+=r,l+=r}for(o++;l>o;){var A=o+(l-o>>>1);if(a(e,t[i+A])<0)l=A;else o=A+1}return l}function o(e,t){function i(e,t){c[E]=e,C[E]=t,E+=1}function n(){for(;E>1;){var e=E-2;if(e>=1&&C[e-1]<=C[e]+C[e+1]||e>=2&&C[e-2]<=C[e]+C[e-1]){if(C[e-1]<C[e+1])e--}else if(C[e]>C[e+1])break;s(e)}}function o(){for(;E>1;){var e=E-2;if(e>0&&C[e-1]<C[e+1])e--;s(e)}}function s(i){var n=c[i],o=C[i],s=c[i+1],u=C[i+1];if(C[i]=o+u,i===E-3)c[i+1]=c[i+2],C[i+1]=C[i+2];E--;var A=a(e[s],e,n,o,0,t);if(n+=A,o-=A,0!==o)if(u=r(e[n+o-1],e,s,u,u-1,t),0!==u)if(u>=o)l(n,o,s,u);else B(n,o,s,u)}function l(i,n,o,s){var l=0;for(l=0;n>l;l++)p[l]=e[i+l];var A=0,B=o,c=i;if(e[c++]=e[B++],0!==--s){if(1===n){for(l=0;s>l;l++)e[c+l]=e[B+l];return void(e[c+s]=p[A])}for(var C,d,f,h=D;;){C=0,d=0,f=!1;do if(t(e[B],p[A])<0){if(e[c++]=e[B++],d++,C=0,0===--s){f=!0;break}}else if(e[c++]=p[A++],C++,d=0,1===--n){f=!0;break}while(h>(C|d));if(f)break;do{if(C=a(e[B],p,A,n,0,t),0!==C){for(l=0;C>l;l++)e[c+l]=p[A+l];if(c+=C,A+=C,n-=C,1>=n){f=!0;break}}if(e[c++]=e[B++],0===--s){f=!0;break}if(d=r(p[A],e,B,s,0,t),0!==d){for(l=0;d>l;l++)e[c+l]=e[B+l];if(c+=d,B+=d,s-=d,0===s){f=!0;break}}if(e[c++]=p[A++],1===--n){f=!0;break}h--}while(C>=u||d>=u);if(f)break;if(0>h)h=0;h+=2}if(D=h,1>D&&(D=1),1===n){for(l=0;s>l;l++)e[c+l]=e[B+l];e[c+s]=p[A]}else if(0===n)throw new Error;else for(l=0;n>l;l++)e[c+l]=p[A+l]}else for(l=0;n>l;l++)e[c+l]=p[A+l]}function B(i,n,o,s){var l=0;for(l=0;s>l;l++)p[l]=e[o+l];var A=i+n-1,B=s-1,c=o+s-1,C=0,d=0;if(e[c--]=e[A--],0!==--n){if(1===s){for(c-=n,A-=n,d=c+1,C=A+1,l=n-1;l>=0;l--)e[d+l]=e[C+l];return void(e[c]=p[B])}for(var f=D;;){var h=0,E=0,F=!1;do if(t(p[B],e[A])<0){if(e[c--]=e[A--],h++,E=0,0===--n){F=!0;break}}else if(e[c--]=p[B--],E++,h=0,1===--s){F=!0;break}while(f>(h|E));if(F)break;do{if(h=n-a(p[B],e,i,n,n-1,t),0!==h){for(c-=h,A-=h,n-=h,d=c+1,C=A+1,l=h-1;l>=0;l--)e[d+l]=e[C+l];if(0===n){F=!0;break}}if(e[c--]=p[B--],1===--s){F=!0;break}if(E=s-r(e[A],p,0,s,s-1,t),0!==E){for(c-=E,B-=E,s-=E,d=c+1,C=B+1,l=0;E>l;l++)e[d+l]=p[C+l];if(1>=s){F=!0;break}}if(e[c--]=e[A--],0===--n){F=!0;break}f--}while(h>=u||E>=u);if(F)break;if(0>f)f=0;f+=2}if(D=f,1>D)D=1;if(1===s){for(c-=n,A-=n,d=c+1,C=A+1,l=n-1;l>=0;l--)e[d+l]=e[C+l];e[c]=p[B]}else if(0===s)throw new Error;else for(C=c-(s-1),l=0;s>l;l++)e[C+l]=p[l]}else for(C=c-(s-1),l=0;s>l;l++)e[C+l]=p[l]}var c,C,D=u,d=0,f=A,h=0,E=0;if(d=e.length,2*A>d)f=d>>>1;var p=[];h=120>d?5:1542>d?10:119151>d?19:40,c=[],C=[],this.mergeRuns=n,this.forceMergeRuns=o,this.pushRun=i}function s(i,r,a,s){if(!a)a=0;if(!s)s=i.length;var u=s-a;if(!(2>u)){var A=0;if(l>u)return A=t(i,a,s,r),void n(i,a,s,a+A,r);var B=new o(i,r),c=e(u);do{if(A=t(i,a,s,r),c>A){var C=u;if(C>c)C=c;n(i,a,a+C,a+A,r),A=C}B.pushRun(a,A),B.mergeRuns(),u-=A,a+=A}while(0!==u);B.forceMergeRuns()}}var l=32,u=7,A=256;return s}),define("zrender/Storage",["require","./core/util","./core/env","./container/Group","./core/timsort"],function(require){"use strict";function e(e,t){if(e.zlevel===t.zlevel)if(e.z===t.z)return e.z2-t.z2;else return e.z-t.z;return e.zlevel-t.zlevel}var t=require("./core/util"),i=require("./core/env"),n=require("./container/Group"),r=require("./core/timsort"),a=function(){this._roots=[],this._displayList=[],this._displayListLen=0};return a.prototype={constructor:a,traverse:function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},getDisplayList:function(e,t){if(t=t||!1,e)this.updateDisplayList(t);return this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var n=this._roots,a=this._displayList,o=0,s=n.length;s>o;o++)this._updateAndAddDisplayable(n[o],null,t);a.length=this._displayListLen,i.canvasSupported&&r(a,e)},_updateAndAddDisplayable:function(e,t,i){if(!e.ignore||i){if(e.beforeUpdate(),e.__dirty)e.update();e.afterUpdate();var n=e.clipPath;if(n){if(t)t=t.slice();else t=[];for(var r=n,a=e;r;)r.parent=a,r.updateTransform(),t.push(r),a=r,r=r.clipPath}if(e.isGroup){for(var o=e._children,s=0;s<o.length;s++){var l=o[s];if(e.__dirty)l.__dirty=!0;this._updateAndAddDisplayable(l,t,i)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){if(e.__storage!==this){if(e instanceof n)e.addChildrenToStorage(this);this.addToStorage(e),this._roots.push(e)}},delRoot:function(e){if(null==e){for(var i=0;i<this._roots.length;i++){var r=this._roots[i];if(r instanceof n)r.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(!(e instanceof Array)){var a=t.indexOf(this._roots,e);if(a>=0)if(this.delFromStorage(e),this._roots.splice(a,1),e instanceof n)e.delChildrenFromStorage(this)}else for(var i=0,o=e.length;o>i;i++)this.delRoot(e[i])},addToStorage:function(e){return e.__storage=this,e.dirty(!1),this},delFromStorage:function(e){if(e)e.__storage=null;return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:e},a}),define("zrender/animation/requestAnimationFrame",["require"],function(require){return"undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)}}),define("zrender/animation/Animation",["require","../core/util","../core/event","./requestAnimationFrame","./Animator"],function(require){"use strict";var e=require("../core/util"),t=require("../core/event").Dispatcher,i=require("./requestAnimationFrame"),n=require("./Animator"),r=function(e){e=e||{},this.stage=e.stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,t.call(this)};return r.prototype={constructor:r,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),i=0;i<t.length;i++)this.addClip(t[i])},removeClip:function(t){var i=e.indexOf(this._clips,t);if(i>=0)this._clips.splice(i,1)},removeAnimator:function(e){for(var t=e.getClips(),i=0;i<t.length;i++)this.removeClip(t[i]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,i=this._clips,n=i.length,r=[],a=[],o=0;n>o;o++){var s=i[o],l=s.step(e,t);if(l)r.push(l),a.push(s)}for(var o=0;n>o;)if(i[o]._needsRemove)i[o]=i[n-1],i.pop(),n--;else o++;n=r.length;for(var o=0;n>o;o++)a[o].fire(r[o]);if(this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update)this.stage.update()},_startLoop:function(){function e(){if(t._running)i(e),!t._paused&&t._update()}var t=this;this._running=!0,i(e)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){if(!this._paused)this._pauseStart=(new Date).getTime(),this._paused=!0},resume:function(){if(this._paused)this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1},clear:function(){this._clips=[]},animate:function(e,t){t=t||{};var i=new n(e,t.loop,t.getter,t.setter);return this.addAnimator(i),i}},e.mixin(r,t),r}),define("zrender/core/GestureMgr",["require","./event"],function(require){"use strict";function e(e){var t=e[1][0]-e[0][0],i=e[1][1]-e[0][1];return Math.sqrt(t*t+i*i)}function t(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var i=require("./event"),n=function(){this._track=[]};n.prototype={constructor:n,recognize:function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var r=e.touches;if(r){for(var a={points:[],touches:[],target:t,event:e},o=0,s=r.length;s>o;o++){var l=r[o],u=i.clientToLocal(n,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},_recognize:function(e){for(var t in r)if(r.hasOwnProperty(t)){var i=r[t](this._track,e);if(i)return i}}};var r={pinch:function(i,n){var r=i.length;if(r){var a=(i[r-1]||{}).points,o=(i[r-2]||{}).points||a;if(o&&o.length>1&&a&&a.length>1){var s=e(a)/e(o);!isFinite(s)&&(s=1),n.pinchScale=s;var l=t(a);return n.pinchX=l[0],n.pinchY=l[1],{type:"pinch",target:i[0].target,event:n}}}}};return n}),define("zrender/dom/HandlerProxy",["require","../core/event","../core/util","../mixin/Eventful","../core/env","../core/GestureMgr"],function(require){function e(e){return"mousewheel"===e&&u.browser.firefox?"DOMMouseScroll":e}function t(e,t,i){var n=e._gestureMgr;"start"===i&&n.clear();var r=n.recognize(t,e.handler.findHover(t.zrX,t.zrY,null).target,e.dom);if("end"===i&&n.clear(),r){var a=r.type;t.gestureEvent=a,e.handler.dispatchToElement({target:r.target},a,r.event)}}function i(e){e._touching=!0,clearTimeout(e._touchTimer),e._touchTimer=setTimeout(function(){e._touching=!1},700)}function n(e){var t=e.pointerType;return"pen"===t||"touch"===t}function r(e){function t(e,t){return function(){if(!t._touching)return e.apply(t,arguments);else return void 0}}s.each(f,function(t){e._handlers[t]=s.bind(p[t],e)}),s.each(E,function(t){e._handlers[t]=s.bind(p[t],e)}),s.each(d,function(i){e._handlers[i]=t(p[i],e)})}function a(t){function i(i,n){s.each(i,function(i){B(t,e(i),n._handlers[i])},n)}if(l.call(this),this.dom=t,this._touching=!1,this._touchTimer,this._gestureMgr=new A,this._handlers={},r(this),u.pointerEventsSupported)i(E,this);else{if(u.touchEventsSupported)i(f,this);i(d,this)}}var o=require("../core/event"),s=require("../core/util"),l=require("../mixin/Eventful"),u=require("../core/env"),A=require("../core/GestureMgr"),B=o.addEventListener,c=o.removeEventListener,C=o.normalizeEvent,D=300,d=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],f=["touchstart","touchend","touchmove"],h={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},E=s.map(d,function(e){var t=e.replace("mouse","pointer");return h[t]?t:e}),p={mousemove:function(e){e=C(this.dom,e),this.trigger("mousemove",e)},mouseout:function(e){e=C(this.dom,e);var t=e.toElement||e.relatedTarget;if(t!=this.dom)for(;t&&9!=t.nodeType;){if(t===this.dom)return;t=t.parentNode}this.trigger("mouseout",e)},touchstart:function(e){e=C(this.dom,e),e.zrByTouch=!0,this._lastTouchMoment=new Date,t(this,e,"start"),p.mousemove.call(this,e),p.mousedown.call(this,e),i(this)},touchmove:function(e){e=C(this.dom,e),e.zrByTouch=!0,t(this,e,"change"),p.mousemove.call(this,e),i(this)},touchend:function(e){if(e=C(this.dom,e),e.zrByTouch=!0,t(this,e,"end"),p.mouseup.call(this,e),+new Date-this._lastTouchMoment<D)p.click.call(this,e);i(this)},pointerdown:function(e){p.mousedown.call(this,e)},pointermove:function(e){if(!n(e))p.mousemove.call(this,e)},pointerup:function(e){p.mouseup.call(this,e)},pointerout:function(e){if(!n(e))p.mouseout.call(this,e)}};s.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){p[e]=function(t){t=C(this.dom,t),this.trigger(e,t)}});var F=a.prototype;return F.dispose=function(){for(var t=d.concat(f),i=0;i<t.length;i++){var n=t[i];c(this.dom,e(n),this._handlers[n])}},F.setCursor=function(e){this.dom.style.cursor=e||"default"},s.mixin(a,l),a}),define("zrender/Layer",["require","./core/util","./config","./graphic/Style","./graphic/Pattern"],function(require){function e(){return!1}function t(e,t,i,n){var r=document.createElement(t),a=i.getWidth(),o=i.getHeight(),s=r.style;return s.position="absolute",s.left=0,s.top=0,s.width=a+"px",s.height=o+"px",r.width=a*n,r.height=o*n,r.setAttribute("data-zr-dom-id",e),r}var i=require("./core/util"),n=require("./config"),r=require("./graphic/Style"),a=require("./graphic/Pattern"),o=function(r,a,o){var s;if(o=o||n.devicePixelRatio,"string"==typeof r)s=t(r,"canvas",a,o);else if(i.isObject(r))s=r,r=s.id;this.id=r,this.dom=s;var l=s.style;if(l)s.onselectstart=e,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",l.padding=0,l.margin=0,l["border-width"]=0;this.domBack=null,this.ctxBack=null,this.painter=a,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=o};return o.prototype={constructor:o,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;if(this.domBack=t("back-"+this.id,"canvas",this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!=e)this.ctxBack.scale(e,e)},resize:function(e,t){var i=this.dpr,n=this.dom,r=n.style,a=this.domBack;if(r.width=e+"px",r.height=t+"px",n.width=e*i,n.height=t*i,a)if(a.width=e*i,a.height=t*i,1!=i)this.ctxBack.scale(i,i)},clear:function(e){var t=this.dom,i=this.ctx,n=t.width,o=t.height,s=this.clearColor,l=this.motionBlur&&!e,u=this.lastFrameAlpha,A=this.dpr;if(l){if(!this.domBack)this.createBackBuffer();this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,n/A,o/A)}if(i.clearRect(0,0,n,o),s){var B;if(s.colorStops)B=s.__canvasGradient||r.getGradient(i,s,{x:0,y:0,width:n,height:o}),s.__canvasGradient=B;else if(s.image)B=a.prototype.getCanvasPattern.call(s,i);i.save(),i.fillStyle=B||s,i.fillRect(0,0,n,o),i.restore()}if(l){var c=this.domBack;i.save(),i.globalAlpha=u,i.drawImage(c,0,0,n,o),i.restore()}}},o}),define("zrender/Painter",["require","./config","./core/util","./core/log","./core/BoundingRect","./core/timsort","./Layer","./animation/requestAnimationFrame","./graphic/Image"],function(require){"use strict";function e(e){return parseInt(e,10)}function t(e){if(!e)return!1;if(e.__builtin__)return!0;if("function"!=typeof e.resize||"function"!=typeof e.refresh)return!1;else return!0}function i(e){e.__unusedCount++}function n(e){if(1==e.__unusedCount)e.clear()}function r(e,t,i){if(f.copy(e.getBoundingRect()),e.transform)f.applyTransform(e.transform);return h.width=t,h.height=i,!f.intersect(h)}function a(e,t){if(e==t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!0}function o(e,t){for(var i=0;i<e.length;i++){var n=e[i];n.setTransform(t),t.beginPath(),n.buildPath(t,n.shape),t.clip(),n.restoreTransform(t)}}function s(e,t){var i=document.createElement("div");return i.style.cssText=["position:relative","overflow:hidden","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}var l=require("./config"),u=require("./core/util"),A=require("./core/log"),B=require("./core/BoundingRect"),c=require("./core/timsort"),C=require("./Layer"),D=require("./animation/requestAnimationFrame"),d=5,f=new B(0,0,0,0),h=new B(0,0,0,0),E=function(e,t,i){var n=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=i=u.extend({},i||{}),this.dpr=i.devicePixelRatio||l.devicePixelRatio,this._singleCanvas=n,this.root=e;var r=e.style;if(r)r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",e.innerHTML="";this.storage=t;var a=this._zlevelList=[],o=this._layers={};if(this._layerConfig={},!n){this._width=this._getSize(0),this._height=this._getSize(1);var A=this._domRoot=s(this._width,this._height);e.appendChild(A)}else{if(null!=i.width)e.width=i.width;if(null!=i.height)e.height=i.height;var B=e.width,c=e.height;this._width=B,this._height=c;var D=new C(e,this,1);D.initContext(),o[0]=D,a.push(0),this._domRoot=e}this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]};return E.prototype={constructor:E,isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},refresh:function(e){var t=this.storage.getDisplayList(!0),i=this._zlevelList;this._paintList(t,e);for(var n=0;n<i.length;n++){var r=i[n],a=this._layers[r];if(!a.__builtin__&&a.refresh)a.refresh()}if(this.refreshHover(),this._progressiveLayers.length)this._startProgessive();return this},addHover:function(e,t){if(!e.__hoverMir){var i=new e.constructor({style:e.style,shape:e.shape});i.__from=e,e.__hoverMir=i,i.setStyle(t),this._hoverElements.push(i)}},removeHover:function(e){var t=e.__hoverMir,i=this._hoverElements,n=u.indexOf(i,t);if(n>=0)i.splice(n,1);e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,i=0;i<t.length;i++){var n=t[i].__from;if(n)n.__hoverMir=null}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,i=this._hoverlayer;if(i&&i.clear(),t){if(c(e,this.storage.displayableSortFunc),!i)i=this._hoverlayer=this.getLayer(1e5);var n={};i.ctx.save();for(var r=0;t>r;){var a=e[r],o=a.__from;if(o&&o.__zr){if(r++,!o.invisible)a.transform=o.transform,a.invTransform=o.invTransform,a.__clipPaths=o.__clipPaths,this._doPaintEl(a,i,!0,n)}else e.splice(r,1),o.__hoverMir=null,t--}i.ctx.restore()}},_startProgessive:function(){function e(){if(i===t._progressiveToken&&t.storage)if(t._doPaintList(t.storage.getDisplayList()),t._furtherProgressive)t._progress++,D(e);else t._progressiveToken=-1}var t=this;if(t._furtherProgressive){var i=t._progressiveToken=+new Date;t._progress++,D(e)}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,u.each(this._progressiveLayers,function(e){e.__dirty&&e.clear()})},_paintList:function(e,t){if(null==t)t=!1;this._updateLayerStatus(e),this._clearProgressive(),this.eachBuiltinLayer(i),this._doPaintList(e,t),this.eachBuiltinLayer(n)},_doPaintList:function(e,t){function i(e){var t=a.dpr||1;a.save(),a.globalAlpha=1,a.shadowBlur=0,n.__dirty=!0,a.setTransform(1,0,0,1,0,0),a.drawImage(e.dom,0,0,c*t,C*t),a.restore()}for(var n,r,a,o,s,l,B=0,c=this._width,C=this._height,D=this._progress,f=0,h=e.length;h>f;f++){var E=e[f],p=this._singleCanvas?0:E.zlevel,F=E.__frame;if(0>F&&s)i(s),s=null;if(r!==p){if(a)a.restore();if(o={},r=p,n=this.getLayer(r),!n.__builtin__)A("ZLevel "+r+" has been used by unkown layer "+n.id);if(a=n.ctx,a.save(),n.__unusedCount=0,n.__dirty||t)n.clear()}if(n.__dirty||t){if(F>=0){if(!s){if(s=this._progressiveLayers[Math.min(B++,d-1)],s.ctx.save(),s.renderScope={},s&&s.__progress>s.__maxProgress){f=s.__nextIdxNotProg-1;continue}if(l=s.__progress,!s.__dirty)D=l;s.__progress=D+1}if(F===D)this._doPaintEl(E,s,!0,s.renderScope)}else this._doPaintEl(E,n,t,o);E.__dirty=!1}else;}if(s)i(s);a&&a.restore(),this._furtherProgressive=!1,u.each(this._progressiveLayers,function(e){if(e.__maxProgress>=e.__progress)this._furtherProgressive=!0},this)},_doPaintEl:function(e,t,i,n){var s=t.ctx,l=e.transform;if(!(!t.__dirty&&!i||e.invisible||0===e.style.opacity||l&&!l[0]&&!l[3]||e.culling&&r(e,this._width,this._height))){var u=e.__clipPaths;if(n.prevClipLayer!==t||a(u,n.prevElClipPaths)){if(n.prevElClipPaths)n.prevClipLayer.ctx.restore(),n.prevClipLayer=n.prevElClipPaths=null,n.prevEl=null;if(u)s.save(),o(u,s),n.prevClipLayer=t,n.prevElClipPaths=u}e.beforeBrush&&e.beforeBrush(s),e.brush(s,n.prevEl||null),n.prevEl=e,e.afterBrush&&e.afterBrush(s)}},getLayer:function(e){if(this._singleCanvas)return this._layers[0];var t=this._layers[e];if(!t){if(t=new C("zr_"+e,this,this.dpr),t.__builtin__=!0,this._layerConfig[e])u.merge(t,this._layerConfig[e],!0);this.insertLayer(e,t),t.initContext()}return t},insertLayer:function(e,i){var n=this._layers,r=this._zlevelList,a=r.length,o=null,s=-1,l=this._domRoot;if(n[e])return void A("ZLevel "+e+" has been used already");if(!t(i))return void A("Layer of zlevel "+e+" is not valid");if(a>0&&e>r[0]){for(s=0;a-1>s&&!(r[s]<e&&r[s+1]>e);s++);o=n[r[s]]}if(r.splice(s+1,0,e),n[e]=i,!i.virtual)if(o){var u=o.dom;if(u.nextSibling)l.insertBefore(i.dom,u.nextSibling);else l.appendChild(i.dom)}else if(l.firstChild)l.insertBefore(i.dom,l.firstChild);else l.appendChild(i.dom)},eachLayer:function(e,t){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],e.call(t,this._layers[i],i)},eachBuiltinLayer:function(e,t){var i,n,r,a=this._zlevelList;for(r=0;r<a.length;r++)if(n=a[r],i=this._layers[n],i.__builtin__)e.call(t,i,n)},eachOtherLayer:function(e,t){var i,n,r,a=this._zlevelList;for(r=0;r<a.length;r++)if(n=a[r],i=this._layers[n],!i.__builtin__)e.call(t,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){var t=this._layers,i=this._progressiveLayers,n={},r={};this.eachBuiltinLayer(function(e,t){n[t]=e.elCount,e.elCount=0,e.__dirty=!1}),u.each(i,function(e,t){
r[t]=e.elCount,e.elCount=0,e.__dirty=!1});for(var a,o,s=0,l=0,A=0,B=e.length;B>A;A++){var c=e[A],D=this._singleCanvas?0:c.zlevel,f=t[D],h=c.progressive;if(f)f.elCount++,f.__dirty=f.__dirty||c.__dirty;if(h>=0){if(o!==h)o=h,l++;var E=c.__frame=l-1;if(!a){var p=Math.min(s,d-1);if(a=i[p],!a)a=i[p]=new C("progressive",this,this.dpr),a.initContext();a.__maxProgress=0}if(a.__dirty=a.__dirty||c.__dirty,a.elCount++,a.__maxProgress=Math.max(a.__maxProgress,E),a.__maxProgress>=a.__progress)f.__dirty=!0}else if(c.__frame=-1,a)a.__nextIdxNotProg=A,s++,a=null}if(a)s++,a.__nextIdxNotProg=A;this.eachBuiltinLayer(function(e,t){if(n[t]!==e.elCount)e.__dirty=!0}),i.length=Math.min(s,d),u.each(i,function(e,t){if(r[t]!==e.elCount)c.__dirty=!0;if(e.__dirty)e.__progress=0})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},configLayer:function(e,t){if(t){var i=this._layerConfig;if(!i[e])i[e]=t;else u.merge(i[e],t,!0);var n=this._layers[e];if(n)u.merge(n,i[e],!0)}},delLayer:function(e){var t=this._layers,i=this._zlevelList,n=t[e];if(n)n.dom.parentNode.removeChild(n.dom),delete t[e],i.splice(u.indexOf(i,e),1)},resize:function(e,t){var i=this._domRoot;i.style.display="none";var n=this._opts;if(null!=e&&(n.width=e),null!=t&&(n.height=t),e=this._getSize(0),t=this._getSize(1),i.style.display="",this._width!=e||t!=this._height){i.style.width=e+"px",i.style.height=t+"px";for(var r in this._layers)if(this._layers.hasOwnProperty(r))this._layers[r].resize(e,t);u.each(this._progressiveLayers,function(i){i.resize(e,t)}),this.refresh(!0)}return this._width=e,this._height=t,this},clearLayer:function(e){var t=this._layers[e];if(t)t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(e=e||{},this._singleCanvas)return this._layers[0].dom;var t=new C("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clearColor=e.backgroundColor,t.clear();for(var i=this.storage.getDisplayList(!0),n={},r=0;r<i.length;r++){var a=i[r];this._doPaintEl(a,t,!0,n)}return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var i=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=i[n]&&"auto"!==i[n])return parseFloat(i[n]);var s=this.root,l=document.defaultView.getComputedStyle(s);return(s[r]||e(l[n])||e(s.style[n]))-(e(l[a])||0)-(e(l[o])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var i=document.createElement("canvas"),n=i.getContext("2d"),r=e.getBoundingRect(),a=e.style,o=a.shadowBlur,s=a.shadowOffsetX,l=a.shadowOffsetY,u=a.hasStroke()?a.lineWidth:0,A=Math.max(u/2,-s+o),B=Math.max(u/2,s+o),c=Math.max(u/2,-l+o),C=Math.max(u/2,l+o),D=r.width+A+B,d=r.height+c+C;i.width=D*t,i.height=d*t,n.scale(t,t),n.clearRect(0,0,D,d),n.dpr=t;var f={position:e.position,rotation:e.rotation,scale:e.scale};if(e.position=[A-r.x,c-r.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e)e.brush(n);var h=require("./graphic/Image"),E=new h({style:{x:0,y:0,image:i}});if(null!=f.position)E.position=e.position=f.position;if(null!=f.rotation)E.rotation=e.rotation=f.rotation;if(null!=f.scale)E.scale=e.scale=f.scale;return E}},E}),define("zrender/zrender",["require","./core/guid","./core/env","./core/util","./Handler","./Storage","./animation/Animation","./dom/HandlerProxy","./Painter"],function(require){function e(e){delete A[e]}var t=require("./core/guid"),i=require("./core/env"),n=require("./core/util"),r=require("./Handler"),a=require("./Storage"),o=require("./animation/Animation"),s=require("./dom/HandlerProxy"),l=!i.canvasSupported,u={canvas:require("./Painter")},A={},B={};B.version="3.4.3",B.init=function(e,i){var n=new c(t(),e,i);return A[n.id]=n,n},B.dispose=function(e){if(e)e.dispose();else{for(var t in A)if(A.hasOwnProperty(t))A[t].dispose();A={}}return B},B.getInstance=function(e){return A[e]},B.registerPainter=function(e,t){u[e]=t};var c=function(e,t,A){A=A||{},this.dom=t,this.id=e;var B=this,c=new a,C=A.renderer;if(l){if(!u.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");C="vml"}else if(!C||!u[C])C="canvas";var D=new u[C](t,c,A);this.storage=c,this.painter=D;var d=!i.node?new s(D.getViewportRoot()):null;this.handler=new r(c,D,d,D.root),this.animation=new o({stage:{update:n.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var f=c.delFromStorage,h=c.addToStorage;c.delFromStorage=function(e){f.call(c,e),e&&e.removeSelfFromZr(B)},c.addToStorage=function(e){h.call(c,e),e.addSelfToZr(B)}};return c.prototype={constructor:c,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer(e,t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){if(this._needsRefresh)this.refreshImmediately();if(this._needsRefreshHover)this.refreshHoverImmediately()},addHover:function(e,t){if(this.painter.addHover)this.painter.addHover(e,t),this.refreshHover()},removeHover:function(e){if(this.painter.removeHover)this.painter.removeHover(e),this.refreshHover()},clearHover:function(){if(this.painter.clearHover)this.painter.clearHover(),this.refreshHover()},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,i){this.handler.on(e,t,i)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,e(this.id)}},B}),define("zrender",["zrender/zrender"],function(e){return e}),define("echarts/visual/seriesColor",["require","zrender/graphic/Gradient"],function(require){var e=require("zrender/graphic/Gradient");return function(t){function i(i){var n=(i.visualColorAccessPath||"itemStyle.normal.color").split("."),r=i.getData(),a=i.get(n)||i.getColorFromPalette(i.get("name"));if(r.setVisual("color",a),!t.isSeriesFiltered(i)){if("function"==typeof a&&!(a instanceof e))r.each(function(e){r.setItemVisual(e,"color",a(i.getDataParams(e)))});r.each(function(e){var t=r.getItemModel(e),i=t.get(n,!0);if(null!=i)r.setItemVisual(e,"color",i)})}}t.eachRawSeries(i)}}),define("echarts/preprocessor/helper/compatStyle",["require","zrender/core/util"],function(require){function e(e){var n=e&&e.itemStyle;if(n)t.each(i,function(i){var r=n.normal,a=n.emphasis;if(r&&r[i]){if(e[i]=e[i]||{},!e[i].normal)e[i].normal=r[i];else t.merge(e[i].normal,r[i]);r[i]=null}if(a&&a[i]){if(e[i]=e[i]||{},!e[i].emphasis)e[i].emphasis=a[i];else t.merge(e[i].emphasis,a[i]);a[i]=null}})}var t=require("zrender/core/util"),i=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];return function(i){if(i){e(i),e(i.markPoint),e(i.markLine);var n=i.data;if(n){for(var r=0;r<n.length;r++)e(n[r]);var a=i.markPoint;if(a&&a.data)for(var o=a.data,r=0;r<o.length;r++)e(o[r]);var s=i.markLine;if(s&&s.data)for(var l=s.data,r=0;r<l.length;r++)if(t.isArray(l[r]))e(l[r][0]),e(l[r][1]);else e(l[r])}}}}),define("echarts/preprocessor/backwardCompat",["require","zrender/core/util","./helper/compatStyle"],function(require){function e(e,t){t=t.split(",");for(var i=e,n=0;n<t.length&&(i=i&&i[t[n]],null!=i);n++);return i}function t(e,t,i,n){t=t.split(",");for(var r,a=e,o=0;o<t.length-1;o++){if(r=t[o],null==a[r])a[r]={};a=a[r]}if(n||null==a[t[o]])a[t[o]]=i}function i(e){l(a,function(t){if(t[0]in e&&!(t[1]in e))e[t[1]]=e[t[0]]})}var n=require("zrender/core/util"),r=require("./helper/compatStyle"),a=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],o=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],s=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"],l=n.each;return function(a){if(l(a.series,function(a){if(n.isObject(a)){var o=a.type;if(r(a),"pie"===o||"gauge"===o)if(null!=a.clockWise)a.clockwise=a.clockWise;if("gauge"===o){var l=e(a,"pointer.color");null!=l&&t(a,"itemStyle.normal.color",l)}for(var u=0;u<s.length;u++)if(s[u]===a.type){i(a);break}}}),a.dataRange)a.visualMap=a.dataRange;l(o,function(e){var t=a[e];if(t){if(!n.isArray(t))t=[t];l(t,function(e){i(e)})}})}}),define("echarts/loading/default",["require","../util/graphic","zrender/core/util"],function(require){var e=require("../util/graphic"),t=require("zrender/core/util"),i=Math.PI;return function(n,r){r=r||{},t.defaults(r,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var a=new e.Rect({style:{fill:r.maskColor},zlevel:r.zlevel,z:1e4}),o=new e.Arc({shape:{startAngle:-i/2,endAngle:-i/2+.1,r:10},style:{stroke:r.color,lineCap:"round",lineWidth:5},zlevel:r.zlevel,z:10001}),s=new e.Rect({style:{fill:"none",text:r.text,textPosition:"right",textDistance:10,textFill:r.textColor},zlevel:r.zlevel,z:10001});o.animateShape(!0).when(1e3,{endAngle:3*i/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*i/2}).delay(300).start("circularInOut");var l=new e.Group;return l.add(o),l.add(s),l.add(a),l.resize=function(){var e=n.getWidth()/2,t=n.getHeight()/2;o.setShape({cx:e,cy:t});var i=o.shape.r;s.setShape({x:e-i,y:t-i,width:2*i,height:2*i}),a.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},l.resize(),l}}),define("echarts/helper",["require","./chart/helper/createListFromArray","./util/symbol","./coord/axisHelper","./coord/axisModelCommonMixin","./model/Model","zrender/core/util","./data/helper/completeDimensions"],function(require){var e=require("./chart/helper/createListFromArray"),t=require("./util/symbol"),i=require("./coord/axisHelper"),n=require("./coord/axisModelCommonMixin"),r=require("./model/Model"),a=require("zrender/core/util");return{createList:function(t){var i=t.get("data");return e(i,t,t.ecModel)},completeDimensions:require("./data/helper/completeDimensions"),createSymbol:t.createSymbol,createScale:function(e,t){var o=t;if(!(t instanceof r))o=new r(t),a.mixin(o,n);var s=i.createScaleByModel(o);return s.setExtent(e[0],e[1]),i.niceScaleExtent(s,o),s},mixinAxisModelCommonMethods:function(e){a.mixin(e,n)}}}),"undefined"==typeof __DEV__)if("undefined"!=typeof window)window.__DEV__=!0;else if("undefined"!=typeof global)global.__DEV__=!0;if(define("echarts/echarts",["require","zrender/core/env","./model/Global","./ExtensionAPI","./CoordinateSystem","./model/OptionManager","./model/Component","./model/Series","./view/Component","./view/Chart","./util/graphic","./util/model","./util/throttle","zrender","zrender/core/util","zrender/tool/color","zrender/mixin/Eventful","zrender/core/timsort","./visual/seriesColor","./preprocessor/backwardCompat","./loading/default","./data/List","./model/Model","./coord/Axis","./util/number","./util/format","zrender/core/matrix","zrender/core/vector","./helper"],function(require){function e(e){return function(t,i,n){t=t&&t.toLowerCase(),P.prototype[e].call(this,t,i,n)}}function t(){P.call(this)}function i(e,i,n){function r(e,t){return e.prio-t.prio}if(n=n||{},"string"==typeof i)i=ae[i];this.id,this.group,this._dom=e;var a=this._zr=N.init(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=b.throttle(K.bind(a.flush,a),17),this._theme=K.clone(i),this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new H,this._api=E(this),P.call(this),this._messageCenter=new t,this._initEvents(),this.resize=K.bind(this.resize,this),this._pendingActions=[],_(re,r),_(te,r),a.animation.on("frame",this._onframe,this),K.setAsPrimitive(this)}function n(e,t,i){var n,r=this._model,a=this._coordSysMgr.getCoordinateSystems();t=M.parseFinder(r,t);for(var o=0;o<a.length;o++){var s=a[o];if(s[e]&&null!=(n=s[e](r,t,i)))return n}if(__DEV__)console.warn("No coordinate system that supports "+e+" found by the given finder.")}function r(e,t,i,n,r){function a(n){n&&n.__alive&&n[t]&&n[t](n.__model,o,e._api,i)}var o=e._model;if(!n)return void O(e._componentsViews.concat(e._chartsViews),a);var s={};s[n+"Id"]=i[n+"Id"],s[n+"Index"]=i[n+"Index"],s[n+"Name"]=i[n+"Name"];var l={mainType:n,query:s};r&&(l.subType=r),o&&o.eachComponent(l,function(t,i){a(e["series"===n?"_chartsMap":"_componentsMap"][t.__viewId])},e)}function a(e,t){var i=e.type,n=e.escapeConnect,a=$[i],o=a.actionInfo,s=(o.update||"update").split(":"),l=s.pop();s=null!=s[0]&&T(s[0]),this[W]=!0;var u=[e],A=!1;if(e.batch)A=!0,u=K.map(e.batch,function(t){return t=K.defaults(K.extend({},t),e),t.batch=null,t});var B,c=[],C="highlight"===i||"downplay"===i;if(O(u,function(e){if(B=a.action(e,this._model,this._api),B=B||K.extend({},e),B.type=o.event||B.type,c.push(B),C)r(this,l,e,"series");else if(s)r(this,l,e,s.main,s.sub)},this),"none"!==l&&!C&&!s)if(this[Y])Z.prepareAndUpdate.call(this,e),this[Y]=!1;else Z[l].call(this,e);if(A)B={type:o.event||i,escapeConnect:n,batch:c};else B=c[0];this[W]=!1,!t&&this._messageCenter.trigger(B.type,B)}function o(e){for(var t=this._pendingActions;t.length;){var i=t.shift();a.call(this,i,e)}}function s(e){!e&&this.trigger("updated")}function l(e,t,i){var n=this._api;O(this._componentsViews,function(r){var a=r.__model;r[e](a,t,n,i),h(a,r)},this),t.eachSeries(function(r,a){var o=this._chartsMap[r.__viewId];o[e](r,t,n,i),h(r,o),f(r,o)},this),d(this._zr,t),O(ne,function(e){e(t,n)})}function u(e,t){for(var i="component"===e,n=i?this._componentsViews:this._chartsViews,r=i?this._componentsMap:this._chartsMap,a=this._zr,o=0;o<n.length;o++)n[o].__alive=!1;t[i?"eachComponent":"eachSeries"](function(e,o){if(i){if("series"===e)return}else o=e;var s=o.id+"_"+o.type,l=r[s];if(!l){var u=T(o.type),A=i?y.getClass(u.main,u.sub):J.getClass(u.sub);if(A)l=new A,l.init(t,this._api),r[s]=l,n.push(l),a.add(l.group);else return}o.__viewId=l.__id=s,l.__alive=!0,l.__model=o,l.group.__ecComponentInfo={mainType:o.mainType,index:o.componentIndex}},this);for(var o=0;o<n.length;){var s=n[o];if(!s.__alive)a.remove(s.group),s.dispose(t,this._api),n.splice(o,1),delete r[s.__id],s.__id=s.group.__ecComponentInfo=null;else o++}}function A(e,t){O(te,function(i){i.func(e,t)})}function B(e){var t={};e.eachSeries(function(e){var i=e.get("stack"),n=e.getData();if(i&&"list"===n.type){var r=t[i];if(r)n.stackedOn=r;t[i]=n}})}function c(e,t){var i=this._api;O(re,function(n){if(n.isLayout)n.func(e,i,t)})}function C(e,t,i){var n=this._api;e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()}),O(re,function(r){(!i||!r.isLayout)&&r.func(e,n,t)})}function D(e,t){var i=this._api;O(this._componentsViews,function(n){var r=n.__model;n.render(r,e,i,t),h(r,n)},this),O(this._chartsViews,function(e){e.__alive=!1},this),e.eachSeries(function(n,r){var a=this._chartsMap[n.__viewId];a.__alive=!0,a.render(n,e,i,t),a.group.silent=!!n.get("silent"),h(n,a),f(n,a)},this),d(this._zr,e),O(this._chartsViews,function(t){if(!t.__alive)t.remove(e,i)},this)}function d(e,t){var i=e.storage,n=0;if(i.traverse(function(e){if(!e.isGroup)n++}),n>t.get("hoverLayerThreshold")&&!F.node)i.traverse(function(e){if(!e.isGroup)e.useHoverLayer=!0})}function f(e,t){var i=0;t.group.traverse(function(e){if("group"!==e.type&&!e.ignore)i++});var n=+e.get("progressive"),r=i>e.get("progressiveThreshold")&&n&&!F.node;if(r)t.group.traverse(function(e){if(!e.isGroup)if(e.progressive=r?Math.floor(i++/n):-1,r)e.stopAnimation(!0)});var a=e.get("blendMode")||null;if(__DEV__)if(!F.canvasSupported&&a&&"source-over"!==a)console.warn("Only canvas support blendMode");t.group.traverse(function(e){if(!e.isGroup)e.setStyle("blend",a)})}function h(e,t){var i=e.get("z"),n=e.get("zlevel");t.group.traverse(function(e){if("group"!==e.type)null!=i&&(e.z=i),null!=n&&(e.zlevel=n)})}function E(e){var t=e._coordSysMgr;return K.extend(new g(e),{getCoordinateSystems:K.bind(t.getCoordinateSystems,t),getComponentByElement:function(t){for(;t;){var i=t.__ecComponentInfo;if(null!=i)return e._model.getComponent(i.mainType,i.index);t=t.parent}}})}function p(e){function t(e,t){for(var i=0;i<e.length;i++){var n=e[i];n[a]=t}}var i=0,n=1,r=2,a="__connectUpdateStatus";K.each(ee,function(o,s){e._messageCenter.on(s,function(o){if(le[e.group]&&e[a]!==i){if(o&&o.escapeConnect)return;var s=e.makeActionFromEvent(o),l=[];K.each(se,function(t){if(t!==e&&t.group===e.group)l.push(t)}),t(l,i),O(l,function(e){if(e[a]!==n)e.dispatchAction(s)}),t(l,r)}})})}var F=require("zrender/core/env"),m=require("./model/Global"),g=require("./ExtensionAPI"),H=require("./CoordinateSystem"),G=require("./model/OptionManager"),I=require("./model/Component"),v=require("./model/Series"),y=require("./view/Component"),J=require("./view/Chart"),L=require("./util/graphic"),M=require("./util/model"),b=require("./util/throttle"),N=require("zrender"),K=require("zrender/core/util"),x=require("zrender/tool/color"),P=require("zrender/mixin/Eventful"),_=require("zrender/core/timsort"),O=K.each,T=I.parseClassType,S=1e3,w=5e3,R=1e3,k=2e3,Q=3e3,V=4e3,U=5e3,W="__flagInMainProcess",z="__hasGradientOrPatternBg",Y="__optionUpdated",X=/^[a-zA-Z0-9_]+$/;t.prototype.on=e("on"),t.prototype.off=e("off"),t.prototype.one=e("one"),K.mixin(t,P);var j=i.prototype;j._onframe=function(){if(this[Y]){var e=this[Y].silent;this[W]=!0,Z.prepareAndUpdate.call(this),this[W]=!1,this[Y]=!1,o.call(this,e),s.call(this,e)}},j.getDom=function(){return this._dom},j.getZr=function(){return this._zr},j.setOption=function(e,t,i){if(__DEV__)K.assert(!this[W],"`setOption` should not be called during main process.");var n;if(K.isObject(t))i=t.lazyUpdate,n=t.silent,t=t.notMerge;if(this[W]=!0,!this._model||t){var r=new G(this._api),a=this._theme,l=this._model=new m(null,null,a,r);l.init(null,null,a,r)}if(this.__lastOnlyGraphic=!(!e||!e.graphic),K.each(e,function(e,t){"graphic"!==t&&(this.__lastOnlyGraphic=!1)},this),this._model.setOption(e,ie,this.__lastOnlyGraphic),i)this[Y]={silent:n},this[W]=!1;else Z.prepareAndUpdate.call(this),this._zr.flush(),this[Y]=!1,this[W]=!1,o.call(this,n),s.call(this,n)},j.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},j.getModel=function(){return this._model},j.getOption=function(){return this._model&&this._model.getOption()},j.getWidth=function(){return this._zr.getWidth()},j.getHeight=function(){return this._zr.getHeight()},j.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},j.getRenderedCanvas=function(e){if(F.canvasSupported){e=e||{},e.pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor");var t=this._zr,i=t.storage.getDisplayList();return K.each(i,function(e){e.stopAnimation(!0)}),t.painter.getRenderedCanvas(e)}},j.getDataURL=function(e){e=e||{};var t=e.excludeComponents,i=this._model,n=[],r=this;O(t,function(e){i.eachComponent({mainType:e},function(e){var t=r._componentsMap[e.__viewId];if(!t.group.ignore)n.push(t),t.group.ignore=!0})});var a=this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return O(n,function(e){e.group.ignore=!1}),a},j.getConnectedDataURL=function(e){if(F.canvasSupported){var t=this.group,i=Math.min,n=Math.max,r=1/0;if(le[t]){var a=r,o=r,s=-r,l=-r,u=[],A=e&&e.pixelRatio||1;K.each(se,function(r,A){if(r.group===t){var B=r.getRenderedCanvas(K.clone(e)),c=r.getDom().getBoundingClientRect();a=i(c.left,a),o=i(c.top,o),s=n(c.right,s),l=n(c.bottom,l),u.push({dom:B,left:c.left,top:c.top})}}),a*=A,o*=A,s*=A,l*=A;var B=s-a,c=l-o,C=K.createCanvas();C.width=B,C.height=c;var D=N.init(C);return O(u,function(e){var t=new L.Image({style:{x:e.left*A-a,y:e.top*A-o,image:e.dom}});D.add(t)}),D.refreshImmediately(),C.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)}},j.convertToPixel=K.curry(n,"convertToPixel"),j.convertFromPixel=K.curry(n,"convertFromPixel"),j.containPixel=function(e,t){var i,n=this._model;return e=M.parseFinder(n,e),K.each(e,function(e,n){n.indexOf("Models")>=0&&K.each(e,function(e){var r=e.coordinateSystem;if(r&&r.containPoint)i|=!!r.containPoint(t);else if("seriesModels"===n){var a=this._chartsMap[e.__viewId];if(a&&a.containPoint)i|=a.containPoint(t,e);else if(__DEV__)console.warn(n+": "+(a?"The found component do not support containPoint.":"No view mapping to the found component."))}else if(__DEV__)console.warn(n+": containPoint is not supported")},this)},this),!!i},j.getVisual=function(e,t){var i=this._model;e=M.parseFinder(i,e,{defaultMainType:"series"});var n=e.seriesModel;if(__DEV__)if(!n)console.warn("There is no specified seires model");var r=n.getData(),a=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?r.indexOfRawIndex(e.dataIndex):null;return null!=a?r.getItemVisual(a,t):r.getVisual(t)},j.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},j.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var Z={update:function(e){var t=this._model,i=this._api,n=this._coordSysMgr,r=this._zr;if(t){t.restoreData(),n.create(this._model,this._api),A.call(this,t,i),B.call(this,t),n.update(t,i),C.call(this,t,e),D.call(this,t,e);var a=t.get("backgroundColor")||"transparent",o=r.painter;if(o.isSingleCanvas&&o.isSingleCanvas())r.configLayer(0,{clearColor:a});else{if(!F.canvasSupported){var s=x.parse(a);if(a=x.stringify(s,"rgb"),0===s[3])a="transparent"}if(a.colorStops||a.image)r.configLayer(0,{clearColor:a}),this[z]=!0,this._dom.style.background="transparent";else{if(this[z])r.configLayer(0,{clearColor:null});this[z]=!1,this._dom.style.background=a}}O(ne,function(e){e(t,i)})}},updateView:function(e){var t=this._model;if(t)t.eachSeries(function(e){e.getData().clearAllVisual()}),C.call(this,t,e),l.call(this,"updateView",t,e)},updateVisual:function(e){var t=this._model;if(t)t.eachSeries(function(e){e.getData().clearAllVisual()}),C.call(this,t,e,!0),l.call(this,"updateVisual",t,e)},updateLayout:function(e){var t=this._model;if(t)c.call(this,t,e),l.call(this,"updateLayout",t,e)},prepareAndUpdate:function(e){var t=this._model;if(u.call(this,"component",t),u.call(this,"chart",t),this.__lastOnlyGraphic)O(this._componentsViews,function(i){var n=i.__model;if(n&&"graphic"===n.mainType)i.render(n,t,this._api,e),h(n,i)},this),this.__lastOnlyGraphic=!1;else Z.update.call(this,e)}};j.resize=function(e){if(__DEV__)K.assert(!this[W],"`resize` should not be called during main process.");this[W]=!0,this._zr.resize(e);var t=this._model&&this._model.resetOption("media"),i=t?"prepareAndUpdate":"update";Z[i].call(this),this._loadingFX&&this._loadingFX.resize(),this[W]=!1;var n=e&&e.silent;o.call(this,n),s.call(this,n)},j.showLoading=function(e,t){if(K.isObject(e))t=e,e="";if(e=e||"default",this.hideLoading(),oe[e]){var i=oe[e](this._api,t),n=this._zr;this._loadingFX=i,n.add(i)}else if(__DEV__)console.warn("Loading effects "+e+" not exists.")},j.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},j.makeActionFromEvent=function(e){var t=K.extend({},e);return t.type=ee[e.type],t},j.dispatchAction=function(e,t){if(!K.isObject(t))t={silent:!!t};if($[e.type]){if(this[W])return void this._pendingActions.push(e);if(a.call(this,e,t.silent),t.flush)this._zr.flush(!0);else if(t.flush!==!1&&F.browser.weChat)this._throttledZrFlush();o.call(this,t.silent),s.call(this,t.silent)}},j.on=e("on"),j.off=e("off"),j.one=e("one");var q=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];j._initEvents=function(){O(q,function(e){this._zr.on(e,function(t){var i,n=this.getModel(),r=t.target;if("globalout"===e)i={};else if(r&&null!=r.dataIndex){var a=r.dataModel||n.getSeriesByIndex(r.seriesIndex);i=a&&a.getDataParams(r.dataIndex,r.dataType)||{}}else if(r&&r.eventData)i=K.extend({},r.eventData);if(i)i.event=t,i.type=e,this.trigger(e,i)},this)},this),O(ee,function(e,t){this._messageCenter.on(t,function(e){this.trigger(t,e)},this)},this)},j.isDisposed=function(){return this._disposed},j.clear=function(){this.setOption({series:[]},!0)},j.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._api,t=this._model;O(this._componentsViews,function(i){i.dispose(t,e)}),O(this._chartsViews,function(i){i.dispose(t,e)}),this._zr.dispose(),delete se[this.id]}else if(__DEV__)console.warn("Instance "+this.id+" has been disposed")},K.mixin(i,P);var $={},ee={},te=[],ie=[],ne=[],re=[],ae={},oe={},se={},le={},ue=new Date-0,Ae=new Date-0,Be="_echarts_instance_",ce={version:"3.5.3",dependencies:{zrender:"3.4.3"}};return ce.init=function(e,t,n){if(__DEV__){if(N.version.replace(".","")-0<ce.dependencies.zrender.replace(".","")-0)throw new Error("ZRender "+N.version+" is too old for ECharts "+ce.version+". Current version need ZRender "+ce.dependencies.zrender+"+");if(!e)throw new Error("Initialize failed: invalid dom.");if(!(!K.isDom(e)||"CANVAS"===e.nodeName.toUpperCase()||(e.clientWidth||n&&null!=n.width)&&(e.clientHeight||n&&null!=n.height)))console.warn("Can't get dom width or height")}var r=new i(e,t,n);return r.id="ec_"+ue++,se[r.id]=r,e.setAttribute&&e.setAttribute(Be,r.id),p(r),r},ce.connect=function(e){if(K.isArray(e)){var t=e;e=null,K.each(t,function(t){if(null!=t.group)e=t.group}),e=e||"g_"+Ae++,K.each(t,function(t){t.group=e})}return le[e]=!0,e},ce.disConnect=function(e){le[e]=!1},ce.disconnect=ce.disConnect,ce.dispose=function(e){if(K.isDom(e))e=ce.getInstanceByDom(e);else if("string"==typeof e)e=se[e];if(e instanceof i&&!e.isDisposed())e.dispose()},ce.getInstanceByDom=function(e){var t=e.getAttribute(Be);return se[t]},ce.getInstanceById=function(e){return se[e]},ce.registerTheme=function(e,t){ae[e]=t},ce.registerPreprocessor=function(e){ie.push(e)},ce.registerProcessor=function(e,t){if("function"==typeof e)t=e,e=S;if(__DEV__)if(isNaN(e))throw new Error("Unkown processor priority");te.push({prio:e,func:t})},ce.registerPostUpdate=function(e){ne.push(e)},ce.registerAction=function(e,t,i){if("function"==typeof t)i=t,t="";var n=K.isObject(e)?e.type:[e,e={event:t}][0];if(e.event=(e.event||n).toLowerCase(),t=e.event,K.assert(X.test(n)&&X.test(t)),!$[n])$[n]={action:i,actionInfo:e};ee[t]=n},ce.registerCoordinateSystem=function(e,t){H.register(e,t)},ce.registerLayout=function(e,t){if("function"==typeof e)t=e,e=R;if(__DEV__)if(isNaN(e))throw new Error("Unkown layout priority");re.push({prio:e,func:t,isLayout:!0})},ce.registerVisual=function(e,t){if("function"==typeof e)t=e,e=Q;if(__DEV__)if(isNaN(e))throw new Error("Unkown visual priority");re.push({prio:e,func:t})},ce.registerLoading=function(e,t){oe[e]=t},ce.extendComponentModel=function(e){return I.extend(e)},ce.extendComponentView=function(e){return y.extend(e)},ce.extendSeriesModel=function(e){return v.extend(e)},ce.extendChartView=function(e){return J.extend(e)},ce.setCanvasCreator=function(e){K.createCanvas=e},ce.registerVisual(k,require("./visual/seriesColor")),ce.registerPreprocessor(require("./preprocessor/backwardCompat")),ce.registerLoading("default",require("./loading/default")),ce.registerAction({type:"highlight",event:"highlight",update:"highlight"},K.noop),ce.registerAction({type:"downplay",event:"downplay",update:"downplay"},K.noop),ce.zrender=N,ce.List=require("./data/List"),ce.Model=require("./model/Model"),ce.Axis=require("./coord/Axis"),ce.graphic=require("./util/graphic"),ce.number=require("./util/number"),ce.format=require("./util/format"),ce.throttle=b.throttle,ce.matrix=require("zrender/core/matrix"),ce.vector=require("zrender/core/vector"),ce.color=require("zrender/tool/color"),ce.util={},O(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){ce.util[e]=K[e]}),ce.helper=require("./helper"),ce.PRIORITY={PROCESSOR:{FILTER:S,STATISTIC:w},VISUAL:{LAYOUT:R,GLOBAL:k,CHART:Q,COMPONENT:V,BRUSH:U}},ce}),define("echarts",["echarts/echarts"],function(e){return e}),define("echarts/util/number",["require"],function(require){function e(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function t(e){return Math.floor(Math.log(e)/Math.LN10)}var i={},n=1e-4;i.linearMap=function(e,t,i,n){var r=t[1]-t[0],a=i[1]-i[0];if(0===r)return 0===a?i[0]:(i[0]+i[1])/2;if(n){if(r>0){if(e<=t[0])return i[0];else if(e>=t[1])return i[1]}else if(e>=t[0])return i[0];else if(e<=t[1])return i[1]}else{if(e===t[0])return i[0];if(e===t[1])return i[1]}return(e-t[0])/r*a+i[0]},i.parsePercent=function(t,i){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}if("string"==typeof t)if(e(t).match(/%$/))return parseFloat(t)/100*i;else return parseFloat(t);return null==t?NaN:+t},i.round=function(e,t,i){if(null==t)t=10;return t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),i?e:+e},i.asc=function(e){return e.sort(function(e,t){return e-t}),e},i.getPrecision=function(e){if(e=+e,isNaN(e))return 0;for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i},i.getPrecisionSafe=function(e){var t=e.toString(),i=t.indexOf("e");if(i>0){var n=+t.slice(i+1);return 0>n?-n:0}else{var r=t.indexOf(".");return 0>r?0:t.length-1-r}},i.getPixelPrecision=function(e,t){var i=Math.log,n=Math.LN10,r=Math.floor(i(e[1]-e[0])/n),a=Math.round(i(Math.abs(t[1]-t[0]))/n),o=Math.min(Math.max(-r+a,0),20);return!isFinite(o)?20:o},i.MAX_SAFE_INTEGER=9007199254740991,i.remRadian=function(e){var t=2*Math.PI;return(e%t+t)%t},i.isRadianAroundZero=function(e){return e>-n&&n>e};var r=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;return i.getTimezoneOffset=function(){return(new Date).getTimezoneOffset()},i.parseDate=function(e){if(e instanceof Date)return e;else if("string"==typeof e){var t=r.exec(e);if(!t)return new Date(NaN);var n=i.getTimezoneOffset(),a=!t[8]?0:"Z"===t[8].toUpperCase()?n:60*+t[8].slice(0,3)+n;return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0)-a,+t[6]||0,+t[7]||0)}else if(null==e)return new Date(NaN);return new Date(Math.round(e))},i.quantity=function(e){return Math.pow(10,t(e))},i.nice=function(e,i){var n,r=t(e),a=Math.pow(10,r),o=e/a;if(i)if(1.5>o)n=1;else if(2.5>o)n=2;else if(4>o)n=3;else if(7>o)n=5;else n=10;else if(1>o)n=1;else if(2>o)n=2;else if(3>o)n=3;else if(5>o)n=5;else n=10;return e=n*a,r>=-20?+e.toFixed(0>r?-r:0):e},i.reformIntervals=function(e){function t(e,i,n){return e.interval[n]<i.interval[n]||e.interval[n]===i.interval[n]&&(e.close[n]-i.close[n]===(!n?1:-1)||!n&&t(e,i,1))}e.sort(function(e,i){return t(e,i,0)?-1:1});for(var i=-(1/0),n=1,r=0;r<e.length;){for(var a=e[r].interval,o=e[r].close,s=0;2>s;s++){if(a[s]<=i)a[s]=i,o[s]=!s?1-n:1;i=a[s],n=o[s]}if(a[0]===a[1]&&o[0]*o[1]!==1)e.splice(r,1);else r++}return e},i.isNumeric=function(e){return e-parseFloat(e)>=0},i}),define("echarts/util/format",["require","zrender/core/util","./number","zrender/contain/text"],function(require){var e=require("zrender/core/util"),t=require("./number"),i=require("zrender/contain/text"),n={};n.addCommas=function(e){if(isNaN(e))return"-";else return e=(e+"").split("."),e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")},n.toCamelCase=function(e,t){
if(e=(e||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),t&&e)e=e.charAt(0).toUpperCase()+e.slice(1);return e},n.normalizeCssArray=function(e){var t=e.length;if("number"==typeof e)return[e,e,e,e];else if(2===t)return[e[0],e[1],e[0],e[1]];else if(3===t)return[e[0],e[1],e[2],e[1]];return e};var r=n.encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},a=["a","b","c","d","e","f","g"],o=function(e,t){return"{"+e+(null==t?"":t)+"}"};n.formatTpl=function(t,i,n){if(!e.isArray(i))i=[i];var s=i.length;if(!s)return"";for(var l=i[0].$vars||[],u=0;u<l.length;u++){var A=a[u],B=o(A,0);t=t.replace(o(A),n?r(B):B)}for(var c=0;s>c;c++)for(var C=0;C<l.length;C++){var B=i[c][l[C]];t=t.replace(o(a[C],c),n?r(B):B)}return t},n.formatTplSimple=function(t,i,n){return e.each(i,function(e,i){t=t.replace("{"+i+"}",n?r(e):e)}),t};var s=function(e){return 10>e?"0"+e:e};return n.formatTime=function(e,i,n){if("week"===e||"month"===e||"quarter"===e||"half-year"===e||"year"===e)e="MM-dd\nyyyy";var r=t.parseDate(i),a=n?"UTC":"",o=r["get"+a+"FullYear"](),l=r["get"+a+"Month"]()+1,u=r["get"+a+"Date"](),A=r["get"+a+"Hours"](),B=r["get"+a+"Minutes"](),c=r["get"+a+"Seconds"]();return e=e.replace("MM",s(l)).toLowerCase().replace("yyyy",o).replace("yy",o%100).replace("dd",s(u)).replace("d",u).replace("hh",s(A)).replace("h",A).replace("mm",s(B)).replace("m",B).replace("ss",s(c)).replace("s",c)},n.capitalFirst=function(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e},n.truncateText=i.truncateText,n}),define("echarts/util/model",["require","./format","./number","../model/Model","zrender/core/util"],function(require){function e(e,t){return e&&e.hasOwnProperty(t)}var t=require("./format"),i=require("./number"),n=require("../model/Model"),r=require("zrender/core/util"),a=r.each,o=r.isObject,s={};return s.normalizeToArray=function(e){return e instanceof Array?e:null==e?[]:[e]},s.defaultEmphasis=function(e,t){if(e){var i=e.emphasis=e.emphasis||{},n=e.normal=e.normal||{};a(t,function(e){var t=r.retrieve(i[e],n[e]);if(null!=t)i[e]=t})}},s.LABEL_OPTIONS=["position","offset","show","textStyle","distance","formatter"],s.getDataItemValue=function(e){return e&&(null==e.value?e:e.value)},s.isDataItemOption=function(e){return o(e)&&!(e instanceof Array)},s.converDataValue=function(e,t){var n=t&&t.type;if("ordinal"===n)return e;if("time"===n&&"number"!=typeof e&&null!=e&&"-"!==e)e=+i.parseDate(e);return null==e||""===e?NaN:+e},s.createDataFormatModel=function(e,t){var i=new n;return r.mixin(i,s.dataFormatMixin),i.seriesIndex=t.seriesIndex,i.name=t.name||"",i.mainType=t.mainType,i.subType=t.subType,i.getData=function(){return e},i},s.dataFormatMixin={getDataParams:function(e,t){var i=this.getData(t),n=this.getRawValue(e,t),r=i.getRawIndex(e),a=i.getName(e,!0),o=i.getRawDataItem(e);return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:a,dataIndex:r,data:o,dataType:t,value:n,color:i.getItemVisual(e,"color"),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,i,n,r){i=i||"normal";var a=this.getData(n),o=a.getItemModel(e),s=this.getDataParams(e,n);if(null!=r&&s.value instanceof Array)s.value=s.value[r];var l=o.get(["label",i,"formatter"]);if("function"==typeof l)return s.status=i,l(s);else if("string"==typeof l)return t.formatTpl(l,s)},getRawValue:function(e,t){var i=this.getData(t),n=i.getRawDataItem(e);if(null!=n)return o(n)&&!(n instanceof Array)?n.value:n;else return void 0},formatTooltip:r.noop},s.mappingToExists=function(e,t){t=(t||[]).slice();var i=r.map(e||[],function(e,t){return{exist:e}});return a(t,function(e,n){if(o(e)){for(var r=0;r<i.length;r++)if(!i[r].option&&null!=e.id&&i[r].exist.id===e.id+"")return i[r].option=e,void(t[n]=null);for(var r=0;r<i.length;r++){var a=i[r].exist;if(!(i[r].option||null!=a.id&&null!=e.id||null==e.name||s.isIdInner(e)||s.isIdInner(a)||a.name!==e.name+""))return i[r].option=e,void(t[n]=null)}}}),a(t,function(e,t){if(o(e)){for(var n=0;n<i.length;n++){var r=i[n].exist;if(!i[n].option&&!s.isIdInner(r)&&null==e.id){i[n].option=e;break}}if(n>=i.length)i.push({option:e})}}),i},s.makeIdAndName=function(e){var t={};a(e,function(e,i){var n=e.exist;n&&(t[n.id]=e)}),a(e,function(e,i){var n=e.option;r.assert(!n||null==n.id||!t[n.id]||t[n.id]===e,"id duplicates: "+(n&&n.id)),n&&null!=n.id&&(t[n.id]=e),!e.keyInfo&&(e.keyInfo={})}),a(e,function(e,i){var n=e.exist,r=e.option,a=e.keyInfo;if(o(r)){if(a.name=null!=r.name?r.name+"":n?n.name:"\x00-",n)a.id=n.id;else if(null!=r.id)a.id=r.id+"";else{var s=0;do a.id="\x00"+a.name+"\x00"+s++;while(t[a.id])}t[a.id]=e}})},s.isIdInner=function(e){return o(e)&&e.id&&0===(e.id+"").indexOf("\x00_ec_\x00")},s.compressBatches=function(e,t){function i(e,t,i){for(var n=0,r=e.length;r>n;n++)for(var a=e[n].seriesId,o=s.normalizeToArray(e[n].dataIndex),l=i&&i[a],u=0,A=o.length;A>u;u++){var B=o[u];if(l&&l[B])l[B]=null;else(t[a]||(t[a]={}))[B]=1}}function n(e,t){var i=[];for(var r in e)if(e.hasOwnProperty(r)&&null!=e[r])if(t)i.push(+r);else{var a=n(e[r],!0);a.length&&i.push({seriesId:r,dataIndex:a})}return i}var r={},a={};return i(e||[],r),i(t||[],a,r),[n(r),n(a)]},s.queryDataIndex=function(e,t){if(null!=t.dataIndexInside)return t.dataIndexInside;else if(null!=t.dataIndex)return r.isArray(t.dataIndex)?r.map(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex);else if(null!=t.name)return r.isArray(t.name)?r.map(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name)},s.makeGetter=function(){var e=0;return function(){var t="\x00__ec_prop_getter_"+e++;return function(e){return e[t]||(e[t]={})}}}(),s.parseFinder=function(t,i,n){if(r.isString(i)){var o={};o[i+"Index"]=0,i=o}var s=n&&n.defaultMainType;if(s&&!e(i,s+"Index")&&!e(i,s+"Id")&&!e(i,s+"Name"))i[s+"Index"]=0;var l={};return a(i,function(e,a){var e=i[a];if("dataIndex"===a||"dataIndexInside"===a)return void(l[a]=e);var o=a.match(/^(\w+)(Index|Id|Name)$/)||[],s=o[1],u=(o[2]||"").toLowerCase();if(!(!s||!u||null==e||"index"===u&&"none"===e||n&&n.includeMainTypes&&r.indexOf(n.includeMainTypes,s)<0)){var A={mainType:s};if("index"!==u||"all"!==e)A[u]=e;var B=t.queryComponents(A);l[s+"Models"]=B,l[s+"Model"]=B[0]}}),l},s}),define("echarts/chart/pie/PieSeries",["require","../../data/List","zrender/core/util","../../util/model","../../data/helper/completeDimensions","../../component/helper/selectableMixin","../../echarts"],function(require){"use strict";var e=require("../../data/List"),t=require("zrender/core/util"),i=require("../../util/model"),n=require("../../data/helper/completeDimensions"),r=require("../../component/helper/selectableMixin"),a=require("../../echarts").extendSeriesModel({type:"series.pie",init:function(e){a.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(e.data),this._defaultLabelLine(e)},mergeOption:function(e){a.superCall(this,"mergeOption",e),this.updateSelectedMap(this.option.data)},getInitialData:function(t,i){var r=n(["value"],t.data),a=new e(r,this);return a.initData(t.data),a},getDataParams:function(e){var t=this.getData(),i=a.superCall(this,"getDataParams",e),n=t.getSum("value");return i.percent=!n?0:+(t.get("value",e)/n*100).toFixed(2),i.$vars.push("percent"),i},_defaultLabelLine:function(e){i.defaultEmphasis(e.labelLine,["show"]);var t=e.labelLine.normal,n=e.labelLine.emphasis;t.show=t.show&&e.label.normal.show,n.show=n.show&&e.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,avoidLabelOverlap:!0,stillShowZeroSum:!0,label:{normal:{rotate:!1,show:!0,position:"outer"},emphasis:{}},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationType:"expansion",animationEasing:"cubicOut",data:[]}});return t.mixin(a,r),a}),define("echarts/chart/pie/PieView",["require","../../util/graphic","zrender/core/util","../../view/Chart"],function(require){function e(e,i,n,r){var a=i.getData(),o=this.dataIndex,s=a.getName(o),l=i.get("selectedOffset");r.dispatchAction({type:"pieToggleSelect",from:e,name:s,seriesId:i.id}),a.each(function(e){t(a.getItemGraphicEl(e),a.getItemLayout(e),i.isSelected(a.getName(e)),l,n)})}function t(e,t,i,n,r){var a=(t.startAngle+t.endAngle)/2,o=Math.cos(a),s=Math.sin(a),l=i?n:0,u=[o*l,s*l];r?e.animate().when(200,{position:u}).start("bounceOut"):e.attr("position",u)}function i(e,t){function i(){o.ignore=o.hoverIgnore,s.ignore=s.hoverIgnore}function n(){o.ignore=o.normalIgnore,s.ignore=s.normalIgnore}r.Group.call(this);var a=new r.Sector({z2:2}),o=new r.Polyline,s=new r.Text;this.add(a),this.add(o),this.add(s),this.updateData(e,t,!0),this.on("emphasis",i).on("normal",n).on("mouseover",i).on("mouseout",n)}function n(e,t,i,n,r){var o=n.getModel("textStyle"),s="inside"===r||"inner"===r;return{fill:o.getTextColor()||(s?"#fff":e.getItemVisual(t,"color")),opacity:e.getItemVisual(t,"opacity"),textFont:o.getFont(),text:a.retrieve(e.hostModel.getFormattedLabel(t,i),e.getName(t))}}var r=require("../../util/graphic"),a=require("zrender/core/util"),o=i.prototype;o.updateData=function(e,i,n){function o(){l.stopAnimation(!0),l.animateTo({shape:{r:B.r+10}},300,"elasticOut")}function s(){l.stopAnimation(!0),l.animateTo({shape:{r:B.r}},300,"elasticOut")}var l=this.childAt(0),u=e.hostModel,A=e.getItemModel(i),B=e.getItemLayout(i),c=a.extend({},B);if(c.label=null,n){l.setShape(c);var C=u.getShallow("animationType");if("scale"===C)l.shape.r=B.r0,r.initProps(l,{shape:{r:B.r}},u,i);else l.shape.endAngle=B.startAngle,r.updateProps(l,{shape:{endAngle:B.endAngle}},u,i)}else r.updateProps(l,{shape:c},u,i);var D=A.getModel("itemStyle"),d=e.getItemVisual(i,"color");if(l.useStyle(a.defaults({lineJoin:"bevel",fill:d},D.getModel("normal").getItemStyle())),l.hoverStyle=D.getModel("emphasis").getItemStyle(),t(this,e.getItemLayout(i),A.get("selected"),u.get("selectedOffset"),u.get("animation")),l.off("mouseover").off("mouseout").off("emphasis").off("normal"),A.get("hoverAnimation")&&u.isAnimationEnabled())l.on("mouseover",o).on("mouseout",s).on("emphasis",o).on("normal",s);this._updateLabel(e,i),r.setHoverStyle(this)},o._updateLabel=function(e,t){var i=this.childAt(1),a=this.childAt(2),o=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t),u=l.label,A=e.getItemVisual(t,"color");r.updateProps(i,{shape:{points:u.linePoints||[[u.x,u.y],[u.x,u.y],[u.x,u.y]]}},o,t),r.updateProps(a,{style:{x:u.x,y:u.y}},o,t),a.attr({style:{textVerticalAlign:u.verticalAlign,textAlign:u.textAlign,textFont:u.font},rotation:u.rotation,origin:[u.x,u.y],z2:10});var B=s.getModel("label.normal"),c=s.getModel("label.emphasis"),C=s.getModel("labelLine.normal"),D=s.getModel("labelLine.emphasis"),d=B.get("position")||c.get("position");a.setStyle(n(e,t,"normal",B,d)),a.ignore=a.normalIgnore=!B.get("show"),a.hoverIgnore=!c.get("show"),i.ignore=i.normalIgnore=!C.get("show"),i.hoverIgnore=!D.get("show"),i.setStyle({stroke:A,opacity:e.getItemVisual(t,"opacity")}),i.setStyle(C.getModel("lineStyle").getLineStyle()),a.hoverStyle=n(e,t,"emphasis",c,d),i.hoverStyle=D.getModel("lineStyle").getLineStyle();var f=C.get("smooth");if(f&&f===!0)f=.4;i.setShape({smooth:f})},a.inherits(i,r.Group);var s=require("../../view/Chart").extend({type:"pie",init:function(){var e=new r.Group;this._sectorGroup=e},render:function(t,n,r,o){if(!o||o.from!==this.uid){var s=t.getData(),l=this._data,u=this.group,A=n.get("animation"),B=!l,c=t.get("animationType"),C=a.curry(e,this.uid,t,A,r),D=t.get("selectedMode");if(s.diff(l).add(function(e){var t=new i(s,e);if(B&&"scale"!==c)t.eachChild(function(e){e.stopAnimation(!0)});D&&t.on("click",C),s.setItemGraphicEl(e,t),u.add(t)}).update(function(e,t){var i=l.getItemGraphicEl(t);i.updateData(s,e),i.off("click"),D&&i.on("click",C),u.add(i),s.setItemGraphicEl(e,i)}).remove(function(e){var t=l.getItemGraphicEl(e);u.remove(t)}).execute(),A&&B&&s.count()>0&&"scale"!==c){var d=s.getItemLayout(0),f=Math.max(r.getWidth(),r.getHeight())/2,h=a.bind(u.removeClipPath,u);u.setClipPath(this._createClipPath(d.cx,d.cy,f,d.startAngle,d.clockwise,h,t))}this._data=s}},dispose:function(){},_createClipPath:function(e,t,i,n,a,o,s){var l=new r.Sector({shape:{cx:e,cy:t,r0:0,r:i,startAngle:n,endAngle:n,clockwise:a}});return r.initProps(l,{shape:{endAngle:n+(a?1:-1)*Math.PI*2}},s,o),l},containPoint:function(e,t){var i=t.getData(),n=i.getItemLayout(0);if(n){var r=e[0]-n.cx,a=e[1]-n.cy,o=Math.sqrt(r*r+a*a);return o<=n.r&&o>=n.r0}}});return s}),define("echarts/visual/dataColor",["require"],function(require){return function(e,t){var i={};t.eachRawSeriesByType(e,function(e){var n=e.getRawData(),r={};if(!t.isSeriesFiltered(e)){var a=e.getData();a.each(function(e){var t=a.getRawIndex(e);r[t]=e}),n.each(function(t){var o=r[t],s=null!=o&&a.getItemVisual(o,"color",!0);if(!s){var l=n.getItemModel(t),u=l.get("itemStyle.normal.color")||e.getColorFromPalette(n.getName(t),i);if(n.setItemVisual(t,"color",u),null!=o)a.setItemVisual(o,"color",u)}else n.setItemVisual(t,"color",s)})}})}}),define("echarts/chart/pie/labelLayout",["require","zrender/contain/text"],function(require){"use strict";function e(e,t,i,n,r,a,o){function s(t,i,n,r){for(var a=t;i>a;a++)if(e[a].y+=n,a>t&&i>a+1&&e[a+1].y>e[a].y+e[a].height)return void l(a,n/2);l(i-1,n/2)}function l(t,i){for(var n=t;n>=0&&(e[n].y-=i,!(n>0&&e[n].y>e[n-1].y+e[n-1].height));n--);}function u(e,t,i,n,r,a){for(var o=a>0?t?Number.MAX_VALUE:0:t?Number.MAX_VALUE:0,s=0,l=e.length;l>s;s++)if("center"!==e[s].position){var u=Math.abs(e[s].y-n),A=e[s].len,B=e[s].len2,c=r+A>u?Math.sqrt((r+A+B)*(r+A+B)-u*u):Math.abs(e[s].x-i);if(t&&c>=o)c=o-10;if(!t&&o>=c)c=o+10;e[s].x=i+c*a,o=c}else;}e.sort(function(e,t){return e.y-t.y});for(var A,B=0,c=e.length,C=[],D=[],d=0;c>d;d++){if(A=e[d].y-B,0>A)s(d,c,-A,r);B=e[d].y+e[d].height}if(0>o-B)l(c-1,B-o);for(var d=0;c>d;d++)if(e[d].y>=i)D.push(e[d]);else C.push(e[d]);u(C,!1,t,i,n,r),u(D,!0,t,i,n,r)}function t(t,i,n,r,a,o){for(var s=[],l=[],u=0;u<t.length;u++)if(t[u].x<i)s.push(t[u]);else l.push(t[u]);e(l,i,n,r,1,a,o),e(s,i,n,r,-1,a,o);for(var u=0;u<t.length;u++){var A=t[u].linePoints;if(A){var B=A[1][0]-A[2][0];if(t[u].x<i)A[2][0]=t[u].x+3;else A[2][0]=t[u].x-3;A[1][1]=A[2][1]=t[u].y,A[1][0]=A[2][0]+B}}}var i=require("zrender/contain/text");return function(e,n,r,a){var o,s,l=e.getData(),u=[],A=!1;if(l.each(function(t){var r,a,B,c,C=l.getItemLayout(t),D=l.getItemModel(t),d=D.getModel("label.normal"),f=d.get("position")||D.get("label.emphasis.position"),h=D.getModel("labelLine.normal"),E=h.get("length"),p=h.get("length2"),F=(C.startAngle+C.endAngle)/2,m=Math.cos(F),g=Math.sin(F);o=C.cx,s=C.cy;var H="inside"===f||"inner"===f;if("center"===f)r=C.cx,a=C.cy,c="center";else{var G=(H?(C.r+C.r0)/2*m:C.r*m)+o,I=(H?(C.r+C.r0)/2*g:C.r*g)+s;if(r=G+3*m,a=I+3*g,!H){var v=G+m*(E+n-C.r),y=I+g*(E+n-C.r),J=v+(0>m?-1:1)*p,L=y;r=J+(0>m?-5:5),a=L,B=[[G,I],[v,y],[J,L]]}c=H?"center":m>0?"left":"right"}var M=d.getModel("textStyle").getFont(),b=d.get("rotate")?0>m?-F+Math.PI:-F:0,N=e.getFormattedLabel(t,"normal")||l.getName(t),K=i.getBoundingRect(N,M,c,"top");if(A=!!b,C.label={x:r,y:a,position:f,height:K.height,len:E,len2:p,linePoints:B,textAlign:c,verticalAlign:"middle",font:M,rotation:b},!H)u.push(C.label)}),!A&&e.get("avoidLabelOverlap"))t(u,o,s,n,r,a)}}),define("echarts/chart/pie/pieLayout",["require","../../util/number","./labelLayout","zrender/core/util"],function(require){var e=require("../../util/number"),t=e.parsePercent,i=require("./labelLayout"),n=require("zrender/core/util"),r=2*Math.PI,a=Math.PI/180;return function(o,s,l,u){s.eachSeriesByType(o,function(o){var s=o.get("center"),u=o.get("radius");if(!n.isArray(u))u=[0,u];if(!n.isArray(s))s=[s,s];var A=l.getWidth(),B=l.getHeight(),c=Math.min(A,B),C=t(s[0],A),D=t(s[1],B),d=t(u[0],c/2),f=t(u[1],c/2),h=o.getData(),E=-o.get("startAngle")*a,p=o.get("minAngle")*a,F=h.getSum("value"),m=Math.PI/(F||h.count())*2,g=o.get("clockwise"),H=o.get("roseType"),G=o.get("stillShowZeroSum"),I=h.getDataExtent("value");I[0]=0;var v=r,y=0,J=E,L=g?1:-1;if(h.each("value",function(t,i){var n;if(isNaN(t))return void h.setItemLayout(i,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:C,cy:D,r0:d,r:H?NaN:f});if("area"!==H)n=0===F&&G?m:t*m;else n=r/(h.count()||1);if(p>n)n=p,v-=p;else y+=t;var a=J+L*n;h.setItemLayout(i,{angle:n,startAngle:J,endAngle:a,clockwise:g,cx:C,cy:D,r0:d,r:H?e.linearMap(t,I,[d,f]):f}),J=a},!0),r>v)if(.001>=v){var M=r/h.count();h.each(function(e){var t=h.getItemLayout(e);t.startAngle=E+L*e*M,t.endAngle=E+L*(e+1)*M})}else m=v/y,J=E,h.each("value",function(e,t){var i=h.getItemLayout(t),n=i.angle===p?p:e*m;i.startAngle=J,i.endAngle=J+L*n,J+=L*n});i(o,f,A,B)})}}),define("echarts/processor/dataFilter",[],function(){return function(e,t){var i=t.findComponents({mainType:"legend"});if(i&&i.length)t.eachSeriesByType(e,function(e){var t=e.getData();t.filterSelf(function(e){for(var n=t.getName(e),r=0;r<i.length;r++)if(!i[r].isSelected(n))return!1;return!0},this)},this)}}),define("echarts/chart/pie",["require","zrender/core/util","../echarts","./pie/PieSeries","./pie/PieView","../action/createDataSelectAction","../visual/dataColor","./pie/pieLayout","../processor/dataFilter"],function(require){var e=require("zrender/core/util"),t=require("../echarts");require("./pie/PieSeries"),require("./pie/PieView"),require("../action/createDataSelectAction")("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),t.registerVisual(e.curry(require("../visual/dataColor"),"pie")),t.registerLayout(e.curry(require("./pie/pieLayout"),"pie")),t.registerProcessor(e.curry(require("../processor/dataFilter"),"pie"))}),define("zrender/core/env",[],function(){function e(e){var t={},i={},n=e.match(/Firefox\/([\d.]+)/),r=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(e);if(n)i.firefox=!0,i.version=n[1];if(r)i.ie=!0,i.version=r[1];if(a)i.edge=!0,i.version=a[1];if(o)i.weChat=!0;return{browser:i,os:t,node:!1,canvasSupported:document.createElement("canvas").getContext?!0:!1,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=11)}}var t={};if("undefined"==typeof navigator)t={browser:{},os:{},node:!0,canvasSupported:!0};else t=e(navigator.userAgent);return t}),"undefined"==typeof __DEV__)if("undefined"!=typeof window)window.__DEV__=!0;else if("undefined"!=typeof global)global.__DEV__=!0;define("echarts/echarts",["require","zrender/core/env","./model/Global","./ExtensionAPI","./CoordinateSystem","./model/OptionManager","./model/Component","./model/Series","./view/Component","./view/Chart","./util/graphic","./util/model","./util/throttle","zrender","zrender/core/util","zrender/tool/color","zrender/mixin/Eventful","zrender/core/timsort","./visual/seriesColor","./preprocessor/backwardCompat","./loading/default","./data/List","./model/Model","./coord/Axis","./util/number","./util/format","zrender/core/matrix","zrender/core/vector","./helper"],function(require){function e(e){return function(t,i,n){t=t&&t.toLowerCase(),P.prototype[e].call(this,t,i,n)}}function t(){P.call(this)}function i(e,i,n){function r(e,t){return e.prio-t.prio}if(n=n||{},"string"==typeof i)i=ae[i];this.id,this.group,this._dom=e;var a=this._zr=N.init(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=b.throttle(K.bind(a.flush,a),17),this._theme=K.clone(i),this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new H,this._api=E(this),P.call(this),this._messageCenter=new t,this._initEvents(),this.resize=K.bind(this.resize,this),this._pendingActions=[],_(re,r),_(te,r),a.animation.on("frame",this._onframe,this),K.setAsPrimitive(this)}function n(e,t,i){var n,r=this._model,a=this._coordSysMgr.getCoordinateSystems();t=M.parseFinder(r,t);for(var o=0;o<a.length;o++){var s=a[o];if(s[e]&&null!=(n=s[e](r,t,i)))return n}if(__DEV__)console.warn("No coordinate system that supports "+e+" found by the given finder.")}function r(e,t,i,n,r){function a(n){n&&n.__alive&&n[t]&&n[t](n.__model,o,e._api,i)}var o=e._model;if(!n)return void O(e._componentsViews.concat(e._chartsViews),a);var s={};s[n+"Id"]=i[n+"Id"],s[n+"Index"]=i[n+"Index"],s[n+"Name"]=i[n+"Name"];var l={mainType:n,query:s};r&&(l.subType=r),o&&o.eachComponent(l,function(t,i){a(e["series"===n?"_chartsMap":"_componentsMap"][t.__viewId])},e)}function a(e,t){var i=e.type,n=e.escapeConnect,a=$[i],o=a.actionInfo,s=(o.update||"update").split(":"),l=s.pop();s=null!=s[0]&&T(s[0]),this[W]=!0;var u=[e],A=!1;if(e.batch)A=!0,u=K.map(e.batch,function(t){return t=K.defaults(K.extend({},t),e),t.batch=null,t});var B,c=[],C="highlight"===i||"downplay"===i;if(O(u,function(e){if(B=a.action(e,this._model,this._api),B=B||K.extend({},e),B.type=o.event||B.type,c.push(B),C)r(this,l,e,"series");else if(s)r(this,l,e,s.main,s.sub)},this),"none"!==l&&!C&&!s)if(this[Y])Z.prepareAndUpdate.call(this,e),this[Y]=!1;else Z[l].call(this,e);if(A)B={type:o.event||i,escapeConnect:n,batch:c};else B=c[0];this[W]=!1,!t&&this._messageCenter.trigger(B.type,B)}function o(e){for(var t=this._pendingActions;t.length;){var i=t.shift();a.call(this,i,e)}}function s(e){!e&&this.trigger("updated")}function l(e,t,i){var n=this._api;O(this._componentsViews,function(r){var a=r.__model;r[e](a,t,n,i),h(a,r)},this),t.eachSeries(function(r,a){var o=this._chartsMap[r.__viewId];o[e](r,t,n,i),h(r,o),f(r,o)},this),d(this._zr,t),O(ne,function(e){e(t,n)})}function u(e,t){for(var i="component"===e,n=i?this._componentsViews:this._chartsViews,r=i?this._componentsMap:this._chartsMap,a=this._zr,o=0;o<n.length;o++)n[o].__alive=!1;t[i?"eachComponent":"eachSeries"](function(e,o){if(i){if("series"===e)return}else o=e;var s=o.id+"_"+o.type,l=r[s];if(!l){var u=T(o.type),A=i?y.getClass(u.main,u.sub):J.getClass(u.sub);if(A)l=new A,l.init(t,this._api),r[s]=l,n.push(l),a.add(l.group);else return}o.__viewId=l.__id=s,l.__alive=!0,l.__model=o,l.group.__ecComponentInfo={mainType:o.mainType,index:o.componentIndex}},this);for(var o=0;o<n.length;){var s=n[o];if(!s.__alive)a.remove(s.group),s.dispose(t,this._api),n.splice(o,1),delete r[s.__id],s.__id=s.group.__ecComponentInfo=null;else o++}}function A(e,t){O(te,function(i){i.func(e,t)})}function B(e){var t={};e.eachSeries(function(e){var i=e.get("stack"),n=e.getData();if(i&&"list"===n.type){var r=t[i];if(r)n.stackedOn=r;t[i]=n}})}function c(e,t){var i=this._api;O(re,function(n){if(n.isLayout)n.func(e,i,t)})}function C(e,t,i){var n=this._api;e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()}),O(re,function(r){(!i||!r.isLayout)&&r.func(e,n,t)})}function D(e,t){var i=this._api;O(this._componentsViews,function(n){var r=n.__model;n.render(r,e,i,t),h(r,n)},this),O(this._chartsViews,function(e){e.__alive=!1},this),e.eachSeries(function(n,r){var a=this._chartsMap[n.__viewId];a.__alive=!0,a.render(n,e,i,t),a.group.silent=!!n.get("silent"),h(n,a),f(n,a)},this),d(this._zr,e),O(this._chartsViews,function(t){if(!t.__alive)t.remove(e,i)},this)}function d(e,t){var i=e.storage,n=0;if(i.traverse(function(e){if(!e.isGroup)n++}),n>t.get("hoverLayerThreshold")&&!F.node)i.traverse(function(e){if(!e.isGroup)e.useHoverLayer=!0})}function f(e,t){var i=0;t.group.traverse(function(e){if("group"!==e.type&&!e.ignore)i++});var n=+e.get("progressive"),r=i>e.get("progressiveThreshold")&&n&&!F.node;if(r)t.group.traverse(function(e){if(!e.isGroup)if(e.progressive=r?Math.floor(i++/n):-1,r)e.stopAnimation(!0)});var a=e.get("blendMode")||null;if(__DEV__)if(!F.canvasSupported&&a&&"source-over"!==a)console.warn("Only canvas support blendMode");t.group.traverse(function(e){if(!e.isGroup)e.setStyle("blend",a)})}function h(e,t){var i=e.get("z"),n=e.get("zlevel");t.group.traverse(function(e){if("group"!==e.type)null!=i&&(e.z=i),null!=n&&(e.zlevel=n)})}function E(e){var t=e._coordSysMgr;return K.extend(new g(e),{getCoordinateSystems:K.bind(t.getCoordinateSystems,t),getComponentByElement:function(t){for(;t;){var i=t.__ecComponentInfo;if(null!=i)return e._model.getComponent(i.mainType,i.index);t=t.parent}}})}function p(e){function t(e,t){for(var i=0;i<e.length;i++){var n=e[i];n[a]=t}}var i=0,n=1,r=2,a="__connectUpdateStatus";K.each(ee,function(o,s){e._messageCenter.on(s,function(o){if(le[e.group]&&e[a]!==i){if(o&&o.escapeConnect)return;var s=e.makeActionFromEvent(o),l=[];K.each(se,function(t){if(t!==e&&t.group===e.group)l.push(t)}),t(l,i),O(l,function(e){if(e[a]!==n)e.dispatchAction(s)}),t(l,r)}})})}var F=require("zrender/core/env"),m=require("./model/Global"),g=require("./ExtensionAPI"),H=require("./CoordinateSystem"),G=require("./model/OptionManager"),I=require("./model/Component"),v=require("./model/Series"),y=require("./view/Component"),J=require("./view/Chart"),L=require("./util/graphic"),M=require("./util/model"),b=require("./util/throttle"),N=require("zrender"),K=require("zrender/core/util"),x=require("zrender/tool/color"),P=require("zrender/mixin/Eventful"),_=require("zrender/core/timsort"),O=K.each,T=I.parseClassType,S=1e3,w=5e3,R=1e3,k=2e3,Q=3e3,V=4e3,U=5e3,W="__flagInMainProcess",z="__hasGradientOrPatternBg",Y="__optionUpdated",X=/^[a-zA-Z0-9_]+$/;t.prototype.on=e("on"),t.prototype.off=e("off"),t.prototype.one=e("one"),K.mixin(t,P);var j=i.prototype;j._onframe=function(){if(this[Y]){var e=this[Y].silent;this[W]=!0,Z.prepareAndUpdate.call(this),this[W]=!1,this[Y]=!1,o.call(this,e),s.call(this,e)}},j.getDom=function(){return this._dom},j.getZr=function(){return this._zr},j.setOption=function(e,t,i){if(__DEV__)K.assert(!this[W],"`setOption` should not be called during main process.");var n;if(K.isObject(t))i=t.lazyUpdate,n=t.silent,t=t.notMerge;if(this[W]=!0,!this._model||t){var r=new G(this._api),a=this._theme,l=this._model=new m(null,null,a,r);l.init(null,null,a,r)}if(this.__lastOnlyGraphic=!(!e||!e.graphic),K.each(e,function(e,t){"graphic"!==t&&(this.__lastOnlyGraphic=!1)},this),this._model.setOption(e,ie,this.__lastOnlyGraphic),i)this[Y]={silent:n},this[W]=!1;else Z.prepareAndUpdate.call(this),this._zr.flush(),this[Y]=!1,this[W]=!1,o.call(this,n),s.call(this,n)},j.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},j.getModel=function(){return this._model},j.getOption=function(){return this._model&&this._model.getOption()},j.getWidth=function(){return this._zr.getWidth()},j.getHeight=function(){return this._zr.getHeight()},j.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},j.getRenderedCanvas=function(e){if(F.canvasSupported){e=e||{},e.pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor");var t=this._zr,i=t.storage.getDisplayList();return K.each(i,function(e){e.stopAnimation(!0)}),t.painter.getRenderedCanvas(e)}},j.getDataURL=function(e){e=e||{};var t=e.excludeComponents,i=this._model,n=[],r=this;O(t,function(e){i.eachComponent({mainType:e},function(e){var t=r._componentsMap[e.__viewId];if(!t.group.ignore)n.push(t),t.group.ignore=!0})});var a=this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return O(n,function(e){e.group.ignore=!1}),a},j.getConnectedDataURL=function(e){if(F.canvasSupported){var t=this.group,i=Math.min,n=Math.max,r=1/0;if(le[t]){var a=r,o=r,s=-r,l=-r,u=[],A=e&&e.pixelRatio||1;K.each(se,function(r,A){if(r.group===t){var B=r.getRenderedCanvas(K.clone(e)),c=r.getDom().getBoundingClientRect();a=i(c.left,a),o=i(c.top,o),s=n(c.right,s),l=n(c.bottom,l),u.push({dom:B,left:c.left,top:c.top})}}),a*=A,o*=A,s*=A,l*=A;var B=s-a,c=l-o,C=K.createCanvas();C.width=B,C.height=c;var D=N.init(C);return O(u,function(e){var t=new L.Image({style:{x:e.left*A-a,y:e.top*A-o,image:e.dom}});D.add(t)}),D.refreshImmediately(),C.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)}},j.convertToPixel=K.curry(n,"convertToPixel"),j.convertFromPixel=K.curry(n,"convertFromPixel"),j.containPixel=function(e,t){var i,n=this._model;return e=M.parseFinder(n,e),K.each(e,function(e,n){n.indexOf("Models")>=0&&K.each(e,function(e){var r=e.coordinateSystem;if(r&&r.containPoint)i|=!!r.containPoint(t);else if("seriesModels"===n){var a=this._chartsMap[e.__viewId];if(a&&a.containPoint)i|=a.containPoint(t,e);else if(__DEV__)console.warn(n+": "+(a?"The found component do not support containPoint.":"No view mapping to the found component."))}else if(__DEV__)console.warn(n+": containPoint is not supported")},this)},this),!!i},j.getVisual=function(e,t){var i=this._model;e=M.parseFinder(i,e,{defaultMainType:"series"});var n=e.seriesModel;if(__DEV__)if(!n)console.warn("There is no specified seires model");var r=n.getData(),a=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?r.indexOfRawIndex(e.dataIndex):null;return null!=a?r.getItemVisual(a,t):r.getVisual(t)},j.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},j.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var Z={update:function(e){var t=this._model,i=this._api,n=this._coordSysMgr,r=this._zr;if(t){t.restoreData(),n.create(this._model,this._api),A.call(this,t,i),B.call(this,t),n.update(t,i),C.call(this,t,e),D.call(this,t,e);var a=t.get("backgroundColor")||"transparent",o=r.painter;if(o.isSingleCanvas&&o.isSingleCanvas())r.configLayer(0,{clearColor:a});else{if(!F.canvasSupported){var s=x.parse(a);if(a=x.stringify(s,"rgb"),0===s[3])a="transparent"}if(a.colorStops||a.image)r.configLayer(0,{clearColor:a}),this[z]=!0,this._dom.style.background="transparent";else{if(this[z])r.configLayer(0,{clearColor:null});this[z]=!1,this._dom.style.background=a}}O(ne,function(e){e(t,i)})}},updateView:function(e){var t=this._model;if(t)t.eachSeries(function(e){e.getData().clearAllVisual()}),C.call(this,t,e),l.call(this,"updateView",t,e)},updateVisual:function(e){var t=this._model;if(t)t.eachSeries(function(e){e.getData().clearAllVisual()}),C.call(this,t,e,!0),l.call(this,"updateVisual",t,e)},updateLayout:function(e){var t=this._model;if(t)c.call(this,t,e),l.call(this,"updateLayout",t,e)},prepareAndUpdate:function(e){var t=this._model;if(u.call(this,"component",t),u.call(this,"chart",t),this.__lastOnlyGraphic)O(this._componentsViews,function(i){var n=i.__model;if(n&&"graphic"===n.mainType)i.render(n,t,this._api,e),h(n,i)},this),this.__lastOnlyGraphic=!1;else Z.update.call(this,e)}};j.resize=function(e){if(__DEV__)K.assert(!this[W],"`resize` should not be called during main process.");this[W]=!0,this._zr.resize(e);var t=this._model&&this._model.resetOption("media"),i=t?"prepareAndUpdate":"update";Z[i].call(this),this._loadingFX&&this._loadingFX.resize(),this[W]=!1;var n=e&&e.silent;o.call(this,n),s.call(this,n)},j.showLoading=function(e,t){if(K.isObject(e))t=e,e="";if(e=e||"default",this.hideLoading(),oe[e]){var i=oe[e](this._api,t),n=this._zr;this._loadingFX=i,n.add(i)}else if(__DEV__)console.warn("Loading effects "+e+" not exists.")},j.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},j.makeActionFromEvent=function(e){var t=K.extend({},e);return t.type=ee[e.type],t},j.dispatchAction=function(e,t){if(!K.isObject(t))t={silent:!!t};if($[e.type]){if(this[W])return void this._pendingActions.push(e);if(a.call(this,e,t.silent),t.flush)this._zr.flush(!0);else if(t.flush!==!1&&F.browser.weChat)this._throttledZrFlush();o.call(this,t.silent),s.call(this,t.silent)}},j.on=e("on"),j.off=e("off"),j.one=e("one");var q=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];j._initEvents=function(){O(q,function(e){
this._zr.on(e,function(t){var i,n=this.getModel(),r=t.target;if("globalout"===e)i={};else if(r&&null!=r.dataIndex){var a=r.dataModel||n.getSeriesByIndex(r.seriesIndex);i=a&&a.getDataParams(r.dataIndex,r.dataType)||{}}else if(r&&r.eventData)i=K.extend({},r.eventData);if(i)i.event=t,i.type=e,this.trigger(e,i)},this)},this),O(ee,function(e,t){this._messageCenter.on(t,function(e){this.trigger(t,e)},this)},this)},j.isDisposed=function(){return this._disposed},j.clear=function(){this.setOption({series:[]},!0)},j.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._api,t=this._model;O(this._componentsViews,function(i){i.dispose(t,e)}),O(this._chartsViews,function(i){i.dispose(t,e)}),this._zr.dispose(),delete se[this.id]}else if(__DEV__)console.warn("Instance "+this.id+" has been disposed")},K.mixin(i,P);var $={},ee={},te=[],ie=[],ne=[],re=[],ae={},oe={},se={},le={},ue=new Date-0,Ae=new Date-0,Be="_echarts_instance_",ce={version:"3.5.3",dependencies:{zrender:"3.4.3"}};return ce.init=function(e,t,n){if(__DEV__){if(N.version.replace(".","")-0<ce.dependencies.zrender.replace(".","")-0)throw new Error("ZRender "+N.version+" is too old for ECharts "+ce.version+". Current version need ZRender "+ce.dependencies.zrender+"+");if(!e)throw new Error("Initialize failed: invalid dom.");if(!(!K.isDom(e)||"CANVAS"===e.nodeName.toUpperCase()||(e.clientWidth||n&&null!=n.width)&&(e.clientHeight||n&&null!=n.height)))console.warn("Can't get dom width or height")}var r=new i(e,t,n);return r.id="ec_"+ue++,se[r.id]=r,e.setAttribute&&e.setAttribute(Be,r.id),p(r),r},ce.connect=function(e){if(K.isArray(e)){var t=e;e=null,K.each(t,function(t){if(null!=t.group)e=t.group}),e=e||"g_"+Ae++,K.each(t,function(t){t.group=e})}return le[e]=!0,e},ce.disConnect=function(e){le[e]=!1},ce.disconnect=ce.disConnect,ce.dispose=function(e){if(K.isDom(e))e=ce.getInstanceByDom(e);else if("string"==typeof e)e=se[e];if(e instanceof i&&!e.isDisposed())e.dispose()},ce.getInstanceByDom=function(e){var t=e.getAttribute(Be);return se[t]},ce.getInstanceById=function(e){return se[e]},ce.registerTheme=function(e,t){ae[e]=t},ce.registerPreprocessor=function(e){ie.push(e)},ce.registerProcessor=function(e,t){if("function"==typeof e)t=e,e=S;if(__DEV__)if(isNaN(e))throw new Error("Unkown processor priority");te.push({prio:e,func:t})},ce.registerPostUpdate=function(e){ne.push(e)},ce.registerAction=function(e,t,i){if("function"==typeof t)i=t,t="";var n=K.isObject(e)?e.type:[e,e={event:t}][0];if(e.event=(e.event||n).toLowerCase(),t=e.event,K.assert(X.test(n)&&X.test(t)),!$[n])$[n]={action:i,actionInfo:e};ee[t]=n},ce.registerCoordinateSystem=function(e,t){H.register(e,t)},ce.registerLayout=function(e,t){if("function"==typeof e)t=e,e=R;if(__DEV__)if(isNaN(e))throw new Error("Unkown layout priority");re.push({prio:e,func:t,isLayout:!0})},ce.registerVisual=function(e,t){if("function"==typeof e)t=e,e=Q;if(__DEV__)if(isNaN(e))throw new Error("Unkown visual priority");re.push({prio:e,func:t})},ce.registerLoading=function(e,t){oe[e]=t},ce.extendComponentModel=function(e){return I.extend(e)},ce.extendComponentView=function(e){return y.extend(e)},ce.extendSeriesModel=function(e){return v.extend(e)},ce.extendChartView=function(e){return J.extend(e)},ce.setCanvasCreator=function(e){K.createCanvas=e},ce.registerVisual(k,require("./visual/seriesColor")),ce.registerPreprocessor(require("./preprocessor/backwardCompat")),ce.registerLoading("default",require("./loading/default")),ce.registerAction({type:"highlight",event:"highlight",update:"highlight"},K.noop),ce.registerAction({type:"downplay",event:"downplay",update:"downplay"},K.noop),ce.zrender=N,ce.List=require("./data/List"),ce.Model=require("./model/Model"),ce.Axis=require("./coord/Axis"),ce.graphic=require("./util/graphic"),ce.number=require("./util/number"),ce.format=require("./util/format"),ce.throttle=b.throttle,ce.matrix=require("zrender/core/matrix"),ce.vector=require("zrender/core/vector"),ce.color=require("zrender/tool/color"),ce.util={},O(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){ce.util[e]=K[e]}),ce.helper=require("./helper"),ce.PRIORITY={PROCESSOR:{FILTER:S,STATISTIC:w},VISUAL:{LAYOUT:R,GLOBAL:k,CHART:Q,COMPONENT:V,BRUSH:U}},ce}),define("echarts/chart/line/LineSeries",["require","../helper/createListFromArray","../../model/Series"],function(require){"use strict";var e=require("../helper/createListFromArray"),t=require("../../model/Series");return t.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,i){if(__DEV__){var n=t.coordinateSystem;if("polar"!==n&&"cartesian2d"!==n)throw new Error("Line not support coordinateSystem besides cartesian and polar")}return e(t.data,this,i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{normal:{position:"top"}},lineStyle:{normal:{width:2,type:"solid"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}})}),define("echarts/chart/line/lineAnimationDiff",["require"],function(require){function e(e){return e>=0?1:-1}function t(t,i,n){for(var r,a=t.getBaseAxis(),o=t.getOtherAxis(a),s=a.onZero?0:o.scale.getExtent()[0],l=o.dim,u="x"===l||"radius"===l?1:0,A=i.stackedOn,B=i.get(l,n);A&&e(A.get(l,n))===e(B);){r=A;break}var c=[];return c[u]=i.get(a.dim,n),c[1-u]=r?r.get(l,n,!0):s,t.dataToPoint(c)}function i(e,t){var i=[];return t.diff(e).add(function(e){i.push({cmd:"+",idx:e})}).update(function(e,t){i.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){i.push({cmd:"-",idx:e})}).execute(),i}return function(e,n,r,a,o,s){for(var l=i(e,n),u=[],A=[],B=[],c=[],C=[],D=[],d=[],f=s.dimensions,h=0;h<l.length;h++){var E=l[h],p=!0;switch(E.cmd){case"=":var F=e.getItemLayout(E.idx),m=n.getItemLayout(E.idx1);if(isNaN(F[0])||isNaN(F[1]))F=m.slice();u.push(F),A.push(m),B.push(r[E.idx]),c.push(a[E.idx1]),d.push(n.getRawIndex(E.idx1));break;case"+":var g=E.idx;u.push(o.dataToPoint([n.get(f[0],g,!0),n.get(f[1],g,!0)])),A.push(n.getItemLayout(g).slice()),B.push(t(o,n,g)),c.push(a[g]),d.push(n.getRawIndex(g));break;case"-":var g=E.idx,H=e.getRawIndex(g);if(H!==g)u.push(e.getItemLayout(g)),A.push(s.dataToPoint([e.get(f[0],g,!0),e.get(f[1],g,!0)])),B.push(r[g]),c.push(t(s,e,g)),d.push(H);else p=!1}if(p)C.push(E),D.push(D.length)}D.sort(function(e,t){return d[e]-d[t]});for(var G=[],I=[],v=[],y=[],J=[],h=0;h<D.length;h++){var g=D[h];G[h]=u[g],I[h]=A[g],v[h]=B[g],y[h]=c[g],J[h]=C[g]}return{current:G,next:I,stackedOnCurrent:v,stackedOnNext:y,status:J}}}),define("echarts/chart/line/poly",["require","zrender/graphic/Path","zrender/core/vector"],function(require){function e(e){return isNaN(e[0])||isNaN(e[1])}function t(t,i,n,c,C,D,d,f,h,E,p){for(var F=0,m=n,g=0;c>g;g++){var H=i[m];if(m>=C||0>m)break;if(e(H)){if(p){m+=D;continue}break}if(m===n)t[D>0?"moveTo":"lineTo"](H[0],H[1]),l(A,H);else if(h>0){var G=m+D,I=i[G];if(p)for(;I&&e(i[G]);)G+=D,I=i[G];var v=.5,y=i[F],I=i[G];if(!I||e(I))l(B,H);else{if(e(I)&&!p)I=H;r.sub(u,I,y);var J,L;if("x"===E||"y"===E){var M="x"===E?0:1;J=Math.abs(H[M]-y[M]),L=Math.abs(H[M]-I[M])}else J=r.dist(H,y),L=r.dist(H,I);v=L/(L+J),s(B,H,u,-h*(1-v))}a(A,A,f),o(A,A,d),a(B,B,f),o(B,B,d),t.bezierCurveTo(A[0],A[1],B[0],B[1],H[0],H[1]),s(A,H,u,h*v)}else t.lineTo(H[0],H[1]);F=m,m+=D}return g}function i(e,t){var i=[1/0,1/0],n=[-(1/0),-(1/0)];if(t)for(var r=0;r<e.length;r++){var a=e[r];if(a[0]<i[0])i[0]=a[0];if(a[1]<i[1])i[1]=a[1];if(a[0]>n[0])n[0]=a[0];if(a[1]>n[1])n[1]=a[1]}return{min:t?i:n,max:t?n:i}}var n=require("zrender/graphic/Path"),r=require("zrender/core/vector"),a=r.min,o=r.max,s=r.scaleAndAdd,l=r.copy,u=[],A=[],B=[];return{Polyline:n.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},buildPath:function(n,r){var a=r.points,o=0,s=a.length,l=i(a,r.smoothConstraint);if(r.connectNulls){for(;s>0&&e(a[s-1]);s--);for(;s>o&&e(a[o]);o++);}for(;s>o;)o+=t(n,a,o,s,s,1,l.min,l.max,r.smooth,r.smoothMonotone,r.connectNulls)+1}}),Polygon:n.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},buildPath:function(n,r){var a=r.points,o=r.stackedOnPoints,s=0,l=a.length,u=r.smoothMonotone,A=i(a,r.smoothConstraint),B=i(o,r.smoothConstraint);if(r.connectNulls){for(;l>0&&e(a[l-1]);l--);for(;l>s&&e(a[s]);s++);}for(;l>s;){var c=t(n,a,s,l,l,1,A.min,A.max,r.smooth,u,r.connectNulls);t(n,o,s+c-1,c,l,-1,B.min,B.max,r.stackedOnSmooth,u,r.connectNulls),s+=c+1,n.closePath()}}})}}),define("echarts/chart/line/LineView",["require","zrender/core/util","../helper/SymbolDraw","../helper/Symbol","./lineAnimationDiff","../../util/graphic","../../util/model","./poly","../../view/Chart"],function(require){"use strict";function e(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++){var n=e[i],r=t[i];if(n[0]!==r[0]||n[1]!==r[1])return}return!0}}function t(e){return"number"==typeof e?e:e?.3:0}function i(e){var t=e.getGlobalExtent();if(e.onBand){var i=e.getBandWidth()/2-1,n=t[1]>t[0]?1:-1;t[0]+=n*i,t[1]-=n*i}return t}function n(e){return e>=0?1:-1}function r(e,t){var i=e.getBaseAxis(),r=e.getOtherAxis(i),a=i.onZero?0:r.scale.getExtent()[0],o=r.dim,s="x"===o||"radius"===o?1:0;return t.mapArray([o],function(r,l){for(var u,A=t.stackedOn;A&&n(A.get(o,l))===n(r);){u=A;break}var B=[];return B[s]=t.get(i.dim,l),B[1-s]=u?u.get(o,l,!0):a,e.dataToPoint(B)},!0)}function a(e,t,n){var r=i(e.getAxis("x")),a=i(e.getAxis("y")),o=e.getBaseAxis().isHorizontal(),s=Math.min(r[0],r[1]),l=Math.min(a[0],a[1]),u=Math.max(r[0],r[1])-s,A=Math.max(a[0],a[1])-l,B=n.get("lineStyle.normal.width")||2,c=n.get("clipOverflow")?B/2:Math.max(u,A);if(o)l-=c,A+=2*c;else s-=c,u+=2*c;var C=new D.Rect({shape:{x:s,y:l,width:u,height:A}});if(t)C.shape[o?"width":"height"]=0,D.initProps(C,{shape:{width:u,height:A}},n);return C}function o(e,t,i){var n=e.getAngleAxis(),r=e.getRadiusAxis(),a=r.getExtent(),o=n.getExtent(),s=Math.PI/180,l=new D.Sector({shape:{cx:e.cx,cy:e.cy,r0:a[0],r:a[1],startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:n.inverse}});if(t)l.shape.endAngle=-o[0]*s,D.initProps(l,{shape:{endAngle:-o[1]*s}},i);return l}function s(e,t,i){return"polar"===e.type?o(e,t,i):a(e,t,i)}function l(e,t,i){for(var n=t.getBaseAxis(),r="x"===n.dim||"radius"===n.dim?0:1,a=[],o=0;o<e.length-1;o++){var s=e[o+1],l=e[o];a.push(l);var u=[];switch(i){case"end":u[r]=s[r],u[1-r]=l[1-r],a.push(u);break;case"middle":var A=(l[r]+s[r])/2,B=[];u[r]=B[r]=A,u[1-r]=l[1-r],B[1-r]=s[1-r],a.push(u),a.push(B);break;default:u[r]=l[r],u[1-r]=s[1-r],a.push(u)}}return e[o]&&a.push(e[o]),a}function u(e,t){var i=e.getVisual("visualMeta");if(i&&i.length&&e.count()){for(var n,r=i.length-1;r>=0;r--)if(i[r].dimension<2){n=i[r];break}if(n&&"cartesian2d"===t.type){var a=n.dimension,o=e.dimensions[a],s=t.getAxis(o),l=A.map(n.stops,function(e){return{coord:s.toGlobalCoord(s.dataToCoord(e.value)),color:e.color}}),u=l.length,B=n.outerColors.slice();if(u&&l[0].coord>l[u-1].coord)l.reverse(),B.reverse();var c=10,C=l[0].coord-c,d=l[u-1].coord+c,f=d-C;if(.001>f)return"transparent";A.each(l,function(e){e.offset=(e.coord-C)/f}),l.push({offset:u?l[u-1].offset:.5,color:B[1]||"transparent"}),l.unshift({offset:u?l[0].offset:.5,color:B[0]||"transparent"});var h=new D.LinearGradient(0,0,0,0,l,!0);return h[o]=C,h[o+"2"]=d,h}else if(__DEV__)console.warn("Visual map on line style only support x or y dimension.")}}var A=require("zrender/core/util"),B=require("../helper/SymbolDraw"),c=require("../helper/Symbol"),C=require("./lineAnimationDiff"),D=require("../../util/graphic"),d=require("../../util/model"),f=require("./poly"),h=require("../../view/Chart");return h.extend({type:"line",init:function(){var e=new D.Group,t=new B;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(i,n,a){var o=i.coordinateSystem,B=this.group,c=i.getData(),C=i.getModel("lineStyle.normal"),D=i.getModel("areaStyle.normal"),d=c.mapArray(c.getItemLayout,!0),f="polar"===o.type,h=this._coordSys,E=this._symbolDraw,p=this._polyline,F=this._polygon,m=this._lineGroup,g=i.get("animation"),H=!D.isEmpty(),G=r(o,c),I=i.get("showSymbol"),v=I&&!f&&!i.get("showAllSymbol")&&this._getSymbolIgnoreFunc(c,o),y=this._data;if(y&&y.eachItemGraphicEl(function(e,t){if(e.__temp)B.remove(e),y.setItemGraphicEl(t,null)}),!I)E.remove();B.add(m);var J=!f&&i.get("step");if(!p||h.type!==o.type||J!==this._step){if(I&&E.updateData(c,v),J)d=l(d,o,J),G=l(G,o,J);if(p=this._newPolyline(d,o,g),H)F=this._newPolygon(d,G,o,g);m.setClipPath(s(o,!0,i))}else{if(H&&!F)F=this._newPolygon(d,G,o,g);else if(F&&!H)m.remove(F),F=this._polygon=null;if(m.setClipPath(s(o,!1,i)),I&&E.updateData(c,v),c.eachItemGraphicEl(function(e){e.stopAnimation(!0)}),!e(this._stackedOnPoints,G)||!e(this._points,d))if(g)this._updateAnimation(c,G,o,a,J);else{if(J)d=l(d,o,J),G=l(G,o,J);p.setShape({points:d}),F&&F.setShape({points:d,stackedOnPoints:G})}}var L=u(c,o)||c.getVisual("color");p.useStyle(A.defaults(C.getLineStyle(),{fill:"none",stroke:L,lineJoin:"bevel"}));var M=i.get("smooth");if(M=t(i.get("smooth")),p.setShape({smooth:M,smoothMonotone:i.get("smoothMonotone"),connectNulls:i.get("connectNulls")}),F){var b=c.stackedOn,N=0;if(F.useStyle(A.defaults(D.getAreaStyle(),{fill:L,opacity:.7,lineJoin:"bevel"})),b){var K=b.hostModel;N=t(K.get("smooth"))}F.setShape({smooth:M,stackedOnSmooth:N,smoothMonotone:i.get("smoothMonotone"),connectNulls:i.get("connectNulls")})}this._data=c,this._coordSys=o,this._stackedOnPoints=G,this._points=d,this._step=J},dispose:function(){},highlight:function(e,t,i,n){var r=e.getData(),a=d.queryDataIndex(r,n);if(!(a instanceof Array)&&null!=a&&a>=0){var o=r.getItemGraphicEl(a);if(!o){var s=r.getItemLayout(a);if(!s)return;o=new c(r,a),o.position=s,o.setZ(e.get("zlevel"),e.get("z")),o.ignore=isNaN(s[0])||isNaN(s[1]),o.__temp=!0,r.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else h.prototype.highlight.call(this,e,t,i,n)},downplay:function(e,t,i,n){var r=e.getData(),a=d.queryDataIndex(r,n);if(null!=a&&a>=0){var o=r.getItemGraphicEl(a);if(o)if(o.__temp)r.setItemGraphicEl(a,null),this.group.remove(o);else o.downplay()}else h.prototype.downplay.call(this,e,t,i,n)},_newPolyline:function(e){var t=this._polyline;if(t)this._lineGroup.remove(t);return t=new f.Polyline({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t,t},_newPolygon:function(e,t){var i=this._polygon;if(i)this._lineGroup.remove(i);return i=new f.Polygon({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(i),this._polygon=i,i},_getSymbolIgnoreFunc:function(e,t){var i=t.getAxesByScale("ordinal")[0];if(i&&i.isLabelIgnored)return A.bind(i.isLabelIgnored,i);else return void 0},_updateAnimation:function(e,t,i,n,r){var a=this._polyline,o=this._polygon,s=e.hostModel,u=C(this._data,e,this._stackedOnPoints,t,this._coordSys,i),A=u.current,B=u.stackedOnCurrent,c=u.next,d=u.stackedOnNext;if(r)A=l(u.current,i,r),B=l(u.stackedOnCurrent,i,r),c=l(u.next,i,r),d=l(u.stackedOnNext,i,r);if(a.shape.__points=u.current,a.shape.points=A,D.updateProps(a,{shape:{points:c}},s),o)o.setShape({points:A,stackedOnPoints:B}),D.updateProps(o,{shape:{points:c,stackedOnPoints:d}},s);for(var f=[],h=u.status,E=0;E<h.length;E++){var p=h[E].cmd;if("="===p){var F=e.getItemGraphicEl(h[E].idx1);if(F)f.push({el:F,ptIdx:E})}}if(a.animators&&a.animators.length)a.animators[0].during(function(){for(var e=0;e<f.length;e++){var t=f[e].el;t.attr("position",a.shape.__points[f[e].ptIdx])}})},remove:function(e){var t=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(e,n){if(e.__temp)t.remove(e),i.setItemGraphicEl(n,null)}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}})}),define("echarts/processor/dataSample",[],function(){var e={average:function(e){for(var t=0,i=0,n=0;n<e.length;n++)if(!isNaN(e[n]))t+=e[n],i++;return 0===i?NaN:t/i},sum:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i]||0;return t},max:function(e){for(var t=-(1/0),i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return t},min:function(e){for(var t=1/0,i=0;i<e.length;i++)e[i]<t&&(t=e[i]);return t},nearest:function(e){return e[0]}},t=function(e,t){return Math.round(e.length/2)};return function(i,n,r){n.eachSeriesByType(i,function(i){var n=i.getData(),r=i.get("sampling"),a=i.coordinateSystem;if("cartesian2d"===a.type&&r){var o=a.getBaseAxis(),s=a.getOtherAxis(o),l=o.getExtent(),u=l[1]-l[0],A=Math.round(n.count()/u);if(A>1){var B;if("string"==typeof r)B=e[r];else if("function"==typeof r)B=r;if(B)n=n.downSample(s.dim,1/A,B,t),i.setData(n)}}},this)}}),define("echarts/chart/line",["require","zrender/core/util","../echarts","./line/LineSeries","./line/LineView","../visual/symbol","../layout/points","../processor/dataSample","../component/gridSimple"],function(require){var e=require("zrender/core/util"),t=require("../echarts"),i=t.PRIORITY;require("./line/LineSeries"),require("./line/LineView"),t.registerVisual(e.curry(require("../visual/symbol"),"line","circle","line")),t.registerLayout(e.curry(require("../layout/points"),"line")),t.registerProcessor(i.PROCESSOR.STATISTIC,e.curry(require("../processor/dataSample"),"line")),require("../component/gridSimple")}),define("echarts/util/clazz",["require","zrender/core/util"],function(require){function e(e){n.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function t(e,t){var i=n.slice(arguments,2);return this.superClass.prototype[t].apply(e,i)}function i(e,t,i){return this.superClass.prototype[t].apply(e,i)}var n=require("zrender/core/util"),r={},a=".",o="___EC__COMPONENT__CONTAINER___",s="\x00ec_\x00";r.set=function(e,t,i){return e[s+t]=i},r.get=function(e,t){return e[s+t]},r.hasOwn=function(e,t){return e.hasOwnProperty(s+t)};var l=r.parseClassType=function(e){var t={main:"",sub:""};if(e)e=e.split(a),t.main=e[0]||"",t.sub=e[1]||"";return t};return r.enableClassExtend=function(e,r){e.$constructor=e,e.extend=function(e){if(__DEV__)n.each(r,function(t){if(!e[t])console.warn("Method `"+t+"` should be implemented"+(e.type?" in "+e.type:"")+".")});var a=this,o=function(){if(!e.$constructor)a.apply(this,arguments);else e.$constructor.apply(this,arguments)};return n.extend(o.prototype,e),o.extend=this.extend,o.superCall=t,o.superApply=i,n.inherits(o,this),o.superClass=a,o}},r.enableClassManagement=function(t,i){function r(e){var t=a[e.main];if(!t||!t[o])t=a[e.main]={},t[o]=!0;return t}i=i||{};var a={};if(t.registerClass=function(t,i){if(i)if(e(i),i=l(i),!i.sub){if(__DEV__)if(a[i.main])console.warn(i.main+" exists.");a[i.main]=t}else if(i.sub!==o){var n=r(i);n[i.sub]=t}return t},t.getClass=function(e,t,i){var n=a[e];if(n&&n[o])n=t?n[t]:null;if(i&&!n)throw new Error(!t?e+".type should be specified.":"Component "+e+"."+(t||"")+" not exists. Load it first.");return n},t.getClassesByMainType=function(e){e=l(e);var t=[],i=a[e.main];if(i&&i[o])n.each(i,function(e,i){i!==o&&t.push(e)});else t.push(i);return t},t.hasClass=function(e){return e=l(e),!!a[e.main]},t.getAllClassMainTypes=function(){var e=[];return n.each(a,function(t,i){e.push(i)}),e},t.hasSubTypes=function(e){e=l(e);var t=a[e.main];return t&&t[o]},t.parseClassType=l,i.registerWhenExtend){var s=t.extend;if(s)t.extend=function(e){var i=s.call(this,e);return t.registerClass(i,e.type)}}return t},r.setReadOnly=function(e,t){},r}),define("echarts/model/mixin/makeStyleMapper",["require","zrender/core/util"],function(require){var e=require("zrender/core/util");return function(t){for(var i=0;i<t.length;i++)if(!t[i][1])t[i][1]=t[i][0];return function(i,n){for(var r={},a=0;a<t.length;a++){var o=t[a][1];if(!(i&&e.indexOf(i,o)>=0||n&&e.indexOf(n,o)<0)){var s=this.getShallow(o);if(null!=s)r[t[a][0]]=s}else;}return r}}}),define("echarts/model/mixin/lineStyle",["require","./makeStyleMapper"],function(require){var e=require("./makeStyleMapper")([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);return{getLineStyle:function(t){var i=e.call(this,t),n=this.getLineDash(i.lineWidth);return n&&(i.lineDash=n),i},getLineDash:function(e){if(null==e)e=1;var t=this.get("type"),i=Math.max(e,2),n=4*e;return"solid"===t||null==t?null:"dashed"===t?[n,n]:[i,i]}}}),define("echarts/model/mixin/areaStyle",["require","./makeStyleMapper"],function(require){return{getAreaStyle:require("./makeStyleMapper")([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]])}}),define("echarts/model/mixin/textStyle",["require","zrender/contain/text"],function(require){function e(e,t){return e&&e.getShallow(t)}var t=require("zrender/contain/text");return{getTextColor:function(){var e=this.ecModel;return this.getShallow("color")||e&&e.get("textStyle.color")},getFont:function(){var t=this.ecModel,i=t&&t.getModel("textStyle");return[this.getShallow("fontStyle")||e(i,"fontStyle"),this.getShallow("fontWeight")||e(i,"fontWeight"),(this.getShallow("fontSize")||e(i,"fontSize")||12)+"px",this.getShallow("fontFamily")||e(i,"fontFamily")||"sans-serif"].join(" ")},getTextRect:function(e){return t.getBoundingRect(e,this.getFont(),this.getShallow("align"),this.getShallow("baseline"))},truncateText:function(e,i,n,r){return t.truncateText(e,i,this.getFont(),n,r)}}}),define("echarts/model/mixin/itemStyle",["require","./makeStyleMapper"],function(require){var e=require("./makeStyleMapper")([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]);return{getItemStyle:function(t,i){var n=e.call(this,t,i),r=this.getBorderLineDash();return r&&(n.lineDash=r),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}}}),define("echarts/model/Model",["require","zrender/core/util","../util/clazz","zrender/core/env","./mixin/lineStyle","./mixin/areaStyle","./mixin/textStyle","./mixin/itemStyle"],function(require){function e(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}function t(e,t,i){for(var n=0;n<t.length;n++)if(t[n]){if(e=e&&"object"==typeof e?e[t[n]]:null,null==e)break}else;if(null==e&&i)e=i.get(t);return e}function i(e,t){var i=r.get(e,"getParent");return i?i.call(e,t):e.parentModel}var n=require("zrender/core/util"),r=require("../util/clazz"),a=require("zrender/core/env");e.prototype={constructor:e,init:null,mergeOption:function(e){n.merge(this.option,e,!0)},get:function(e,n){if(null==e)return this.option;else return t(this.option,this.parsePath(e),!n&&i(this,e))},getShallow:function(e,t){var n=this.option,r=null==n?n:n[e],a=!t&&i(this,e);if(null==r&&a)r=a.getShallow(e);return r},getModel:function(n,r){var a,o=null==n?this.option:t(this.option,n=this.parsePath(n));return r=r||(a=i(this,n))&&a.getModel(n),new e(o,r,this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var e=this.constructor;return new e(n.clone(this.option))},setReadOnly:function(e){r.setReadOnly(this,e)},parsePath:function(e){if("string"==typeof e)e=e.split(".");return e},customizeGetParent:function(e){r.set(this,"getParent",e)},isAnimationEnabled:function(){if(!a.node)if(null!=this.option.animation)return!!this.option.animation;else if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.enableClassExtend(e);var o=n.mixin;return o(e,require("./mixin/lineStyle")),o(e,require("./mixin/areaStyle")),o(e,require("./mixin/textStyle")),o(e,require("./mixin/itemStyle")),e}),define("echarts/data/List",["require","../model/Model","./DataDiffer","zrender/core/util","../util/model"],function(require){function e(e){if(!u.isArray(e))e=[e];return e}function t(e,t){var i=e.dimensions,n=new D(u.map(i,e.getDimensionInfo,e),e.hostModel);C(n,e);for(var r=n._storage={},a=e._storage,o=0;o<i.length;o++){var s=i[o],l=a[s];if(u.indexOf(t,s)>=0)r[s]=new l.constructor(a[s].length);else r[s]=a[s]}return n}var i="undefined",n="undefined"==typeof window?global:window,r=typeof n.Float64Array===i?Array:n.Float64Array,a=typeof n.Int32Array===i?Array:n.Int32Array,o={"float":r,"int":a,ordinal:Array,number:Array,time:Array},s=require("../model/Model"),l=require("./DataDiffer"),u=require("zrender/core/util"),A=require("../util/model"),B=u.isObject,c=["stackedOn","hasItemOption","_nameList","_idList","_rawData"],C=function(e,t){u.each(c.concat(t.__wrappedMethods||[]),function(i){if(t.hasOwnProperty(i))e[i]=t[i]}),e.__wrappedMethods=t.__wrappedMethods},D=function(e,t){e=e||["x","y"];for(var i={},n=[],r=0;r<e.length;r++){var a,o={};if("string"==typeof e[r])a=e[r],o={name:a,stackable:!1,type:"number"};else o=e[r],a=o.name,o.type=o.type||"number";n.push(a),i[a]=o}this.dimensions=n,this._dimensionInfos=i,this.hostModel=t,this.dataType,this.indices=[],this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this.stackedOn=null,this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawData,this._extent},d=D.prototype;d.type="list",d.hasItemOption=!0,d.getDimension=function(e){if(!isNaN(e))e=this.dimensions[e]||e;return e},d.getDimensionInfo=function(e){return u.clone(this._dimensionInfos[this.getDimension(e)])},d.initData=function(e,t,i){if(e=e||[],__DEV__)if(!u.isArray(e))throw new Error("Invalid data.");this._rawData=e;var n=this._storage={},r=this.indices=[],a=this.dimensions,s=e.length,l=this._dimensionInfos,B=[],c={};t=t||[];for(var C=0;C<a.length;C++){var D=l[a[C]],d=o[D.type];n[a[C]]=new d(s)}var f=this;if(!i)f.hasItemOption=!1;i=i||function(e,t,i,n){var r=A.getDataItemValue(e);if(A.isDataItemOption(e))f.hasItemOption=!0;return A.converDataValue(r instanceof Array?r[n]:r,l[t])};for(var h=0;h<e.length;h++){for(var E=e[h],p=0;p<a.length;p++){var F=a[p],m=n[F];m[h]=i(E,F,h,p)}r.push(h)}for(var C=0;C<e.length;C++){if(!t[C])if(e[C]&&null!=e[C].name)t[C]=e[C].name;var g=t[C]||"",H=e[C]&&e[C].id;if(!H&&g){if(c[g]=c[g]||0,H=g,c[g]>0)H+="__ec__"+c[g];c[g]++}H&&(B[C]=H)}this._nameList=t,this._idList=B},d.count=function(){return this.indices.length},d.get=function(e,t,i){var n=this._storage,r=this.indices[t];if(null==r)return NaN;var a=n[e]&&n[e][r];if(i){var o=this._dimensionInfos[e];if(o&&o.stackable)for(var s=this.stackedOn;s;){var l=s.get(e,t);if(a>=0&&l>0||0>=a&&0>l)a+=l;s=s.stackedOn}}return a},d.getValues=function(e,t,i){var n=[];if(!u.isArray(e))i=t,t=e,e=this.dimensions;for(var r=0,a=e.length;a>r;r++)n.push(this.get(e[r],t,i));return n},d.hasValue=function(e){for(var t=this.dimensions,i=this._dimensionInfos,n=0,r=t.length;r>n;n++)if("ordinal"!==i[t[n]].type&&isNaN(this.get(t[n],e)))return!1;return!0},d.getDataExtent=function(e,t,i){e=this.getDimension(e);var n=this._storage[e],r=this.getDimensionInfo(e);t=r&&r.stackable&&t;var a,o=(this._extent||(this._extent={}))[e+!!t];if(o)return o;if(n){for(var s=1/0,l=-(1/0),u=0,A=this.count();A>u;u++)if(a=this.get(e,u,t),!i||i(a,e,u))s>a&&(s=a),a>l&&(l=a);return this._extent[e+!!t]=[s,l]}else return[1/0,-(1/0)]},d.getSum=function(e,t){var i=this._storage[e],n=0;if(i)for(var r=0,a=this.count();a>r;r++){var o=this.get(e,r,t);if(!isNaN(o))n+=o}return n},d.indexOf=function(e,t){var i=this._storage,n=i[e],r=this.indices;if(n)for(var a=0,o=r.length;o>a;a++){var s=r[a];if(n[s]===t)return a}return-1},d.indexOfName=function(e){for(var t=this.indices,i=this._nameList,n=0,r=t.length;r>n;n++){var a=t[n];if(i[a]===e)return n}return-1},d.indexOfRawIndex=function(e){var t=this.indices,i=t[e];if(null!=i&&i===e)return e;for(var n=0,r=t.length-1;r>=n;){var a=(n+r)/2|0;if(t[a]<e)n=a+1;else if(t[a]>e)r=a-1;else return a}return-1},d.indicesOfNearest=function(e,t,i,n){var r=this._storage,a=r[e],o=[];if(!a)return o;if(null==n)n=1/0;for(var s=Number.MAX_VALUE,l=-1,u=0,A=this.count();A>u;u++){var B=t-this.get(e,u,i),c=Math.abs(B);if(n>=B&&s>=c){if(s>c||B>=0&&0>l)s=c,l=B,o.length=0;o.push(u)}}return o},d.getRawIndex=function(e){var t=this.indices[e];return null==t?-1:t},d.getRawDataItem=function(e){return this._rawData[this.getRawIndex(e)]},d.getName=function(e){return this._nameList[this.indices[e]]||""},d.getId=function(e){return this._idList[this.indices[e]]||this.getRawIndex(e)+""},d.each=function(t,i,n,r){if("function"==typeof t)r=n,n=i,i=t,t=[];t=u.map(e(t),this.getDimension,this);var a=[],o=t.length,s=this.indices;r=r||this;for(var l=0;l<s.length;l++)switch(o){case 0:i.call(r,l);break;case 1:i.call(r,this.get(t[0],l,n),l);break;case 2:i.call(r,this.get(t[0],l,n),this.get(t[1],l,n),l);break;default:for(var A=0;o>A;A++)a[A]=this.get(t[A],l,n);a[A]=l,i.apply(r,a)}},d.filterSelf=function(t,i,n,r){if("function"==typeof t)r=n,n=i,i=t,t=[];t=u.map(e(t),this.getDimension,this);var a=[],o=[],s=t.length,l=this.indices;r=r||this;for(var A=0;A<l.length;A++){var B;if(1===s)B=i.call(r,this.get(t[0],A,n),A);else{for(var c=0;s>c;c++)o[c]=this.get(t[c],A,n);o[c]=A,B=i.apply(r,o)}if(B)a.push(l[A])}return this.indices=a,this._extent={},this},d.mapArray=function(e,t,i,n){if("function"==typeof e)n=i,i=t,t=e,e=[];var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},i,n),r},d.map=function(i,n,r,a){i=u.map(e(i),this.getDimension,this);var o=t(this,i),s=o.indices=this.indices,l=o._storage,A=[];return this.each(i,function(){var e=arguments[arguments.length-1],t=n&&n.apply(this,arguments);if(null!=t){if("number"==typeof t)A[0]=t,t=A;for(var r=0;r<t.length;r++){var a=i[r],o=l[a],u=s[e];if(o)o[u]=t[r]}}},r,a),o},d.downSample=function(e,i,n,r){for(var a=t(this,[e]),o=this._storage,s=a._storage,l=this.indices,u=a.indices=[],A=[],B=[],c=Math.floor(1/i),C=s[e],D=this.count(),d=0;d<o[e].length;d++)s[e][d]=o[e][d];for(var d=0;D>d;d+=c){if(c>D-d)c=D-d,A.length=c;for(var f=0;c>f;f++){var h=l[d+f];A[f]=C[h],B[f]=h}var E=n(A),h=B[r(A,E)||0];C[h]=E,u.push(h)}return a},d.getItemModel=function(e){var t=this.hostModel;return e=this.indices[e],new s(this._rawData[e],t,t&&t.ecModel)},d.diff=function(e){var t,i=this._idList,n=e&&e._idList,r="e\x00\x00";return new l(e?e.indices:[],this.indices,function(e){return null!=(t=n[e])?t:r+e},function(e){return null!=(t=i[e])?t:r+e})},d.getVisual=function(e){var t=this._visual;return t&&t[e]},d.setVisual=function(e,t){if(!B(e))this._visual=this._visual||{},this._visual[e]=t;else for(var i in e)if(e.hasOwnProperty(i))this.setVisual(i,e[i])},d.setLayout=function(e,t){if(!B(e))this._layout[e]=t;else for(var i in e)if(e.hasOwnProperty(i))this.setLayout(i,e[i])},d.getLayout=function(e){return this._layout[e]},d.getItemLayout=function(e){return this._itemLayouts[e]},d.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?u.extend(this._itemLayouts[e]||{},t):t},d.clearItemLayouts=function(){this._itemLayouts.length=0},d.getItemVisual=function(e,t,i){var n=this._itemVisuals[e],r=n&&n[t];if(null==r&&!i)return this.getVisual(t);else return r},d.setItemVisual=function(e,t,i){var n=this._itemVisuals[e]||{};if(this._itemVisuals[e]=n,!B(t))n[t]=i;else for(var r in t)if(t.hasOwnProperty(r))n[r]=t[r]},d.clearAllVisual=function(){this._visual={},this._itemVisuals=[]};var f=function(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType};return d.setItemGraphicEl=function(e,t){var i=this.hostModel;if(t)if(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=i&&i.seriesIndex,"group"===t.type)t.traverse(f,t);this._graphicEls[e]=t},d.getItemGraphicEl=function(e){return this._graphicEls[e]},d.eachItemGraphicEl=function(e,t){u.each(this._graphicEls,function(i,n){if(i)e&&e.call(t,i,n)})},d.cloneShallow=function(){var e=u.map(this.dimensions,this.getDimensionInfo,this),t=new D(e,this.hostModel);if(t._storage=this._storage,C(t,this),t.indices=this.indices.slice(),this._extent)t._extent=u.extend({},this._extent);return t;
},d.wrapMethod=function(e,t){var i=this[e];if("function"==typeof i)this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=i.apply(this,arguments);return t.apply(this,[e].concat(u.slice(arguments)))}},d.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],d.CHANGABLE_METHODS=["filterSelf"],D}),define("echarts/chart/gauge/GaugeSeries",["require","../../data/List","../../model/Series","zrender/core/util"],function(require){var e=require("../../data/List"),t=require("../../model/Series"),i=require("zrender/core/util"),n=t.extend({type:"series.gauge",getInitialData:function(t,n){var r=new e(["value"],this),a=t.data||[];if(!i.isArray(a))a=[a];return r.initData(a),r},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,textStyle:{color:"auto"}},pointer:{show:!0,length:"80%",width:8},itemStyle:{normal:{color:"auto"}},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{color:"#333",fontSize:15}},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],textStyle:{color:"auto",fontSize:30}}}});return n}),define("echarts/chart/gauge/PointerPath",["require","zrender/graphic/Path"],function(require){return require("zrender/graphic/Path").extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var i=Math.cos,n=Math.sin,r=t.r,a=t.width,o=t.angle,s=t.x-i(o)*a*(a>=r/3?1:2),l=t.y-n(o)*a*(a>=r/3?1:2);o=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+i(o)*a,t.y+n(o)*a),e.lineTo(t.x+i(t.angle)*r,t.y+n(t.angle)*r),e.lineTo(t.x-i(o)*a,t.y-n(o)*a),e.lineTo(s,l)}})}),define("echarts/chart/gauge/GaugeView",["require","./PointerPath","../../util/graphic","../../util/number","../../view/Chart"],function(require){function e(e,t){var i=e.get("center"),n=t.getWidth(),r=t.getHeight(),o=Math.min(n,r),s=a(i[0],t.getWidth()),l=a(i[1],t.getHeight()),u=a(e.get("radius"),o/2);return{cx:s,cy:l,r:u}}function t(e,t){if(t)if("string"==typeof t)e=t.replace("{value}",null!=e?e:"");else if("function"==typeof t)e=t(e);return e}var i=require("./PointerPath"),n=require("../../util/graphic"),r=require("../../util/number"),a=r.parsePercent,o=2*Math.PI,s=require("../../view/Chart").extend({type:"gauge",render:function(t,i,n){this.group.removeAll();var r=t.get("axisLine.lineStyle.color"),a=e(t,n);this._renderMain(t,i,n,r,a)},dispose:function(){},_renderMain:function(e,t,i,r,a){for(var s=this.group,l=e.getModel("axisLine"),u=l.getModel("lineStyle"),A=e.get("clockwise"),B=-e.get("startAngle")/180*Math.PI,c=-e.get("endAngle")/180*Math.PI,C=(c-B)%o,D=B,d=u.get("width"),f=0;f<r.length;f++){var h=Math.min(Math.max(r[f][0],0),1),c=B+C*h,E=new n.Sector({shape:{startAngle:D,endAngle:c,cx:a.cx,cy:a.cy,clockwise:A,r0:a.r-d,r:a.r},silent:!0});E.setStyle({fill:r[f][1]}),E.setStyle(u.getLineStyle(["color","borderWidth","borderColor"])),s.add(E),D=c}var p=function(e){if(0>=e)return r[0][1];for(var t=0;t<r.length;t++)if(r[t][0]>=e&&(0===t?0:r[t-1][0])<e)return r[t][1];return r[t-1][1]};if(!A){var F=B;B=c,c=F}this._renderTicks(e,t,i,p,a,B,c,A),this._renderPointer(e,t,i,p,a,B,c,A),this._renderTitle(e,t,i,p,a),this._renderDetail(e,t,i,p,a)},_renderTicks:function(e,i,o,s,l,u,A,B){for(var c=this.group,C=l.cx,D=l.cy,d=l.r,f=+e.get("min"),h=+e.get("max"),E=e.getModel("splitLine"),p=e.getModel("axisTick"),F=e.getModel("axisLabel"),m=e.get("splitNumber"),g=p.get("splitNumber"),H=a(E.get("length"),d),G=a(p.get("length"),d),I=u,v=(A-u)/m,y=v/g,J=E.getModel("lineStyle").getLineStyle(),L=p.getModel("lineStyle").getLineStyle(),M=F.getModel("textStyle"),b=0;m>=b;b++){var N=Math.cos(I),K=Math.sin(I);if(E.get("show")){var x=new n.Line({shape:{x1:N*d+C,y1:K*d+D,x2:N*(d-H)+C,y2:K*(d-H)+D},style:J,silent:!0});if("auto"===J.stroke)x.setStyle({stroke:s(b/m)});c.add(x)}if(F.get("show")){var P=t(r.round(b/m*(h-f)+f),F.get("formatter")),_=F.get("distance"),O=new n.Text({style:{text:P,x:N*(d-H-_)+C,y:K*(d-H-_)+D,fill:M.getTextColor(),textFont:M.getFont(),textVerticalAlign:-.4>K?"top":K>.4?"bottom":"middle",textAlign:-.4>N?"left":N>.4?"right":"center"},silent:!0});if("auto"===O.style.fill)O.setStyle({fill:s(b/m)});c.add(O)}if(p.get("show")&&b!==m){for(var T=0;g>=T;T++){var N=Math.cos(I),K=Math.sin(I),S=new n.Line({shape:{x1:N*d+C,y1:K*d+D,x2:N*(d-G)+C,y2:K*(d-G)+D},silent:!0,style:L});if("auto"===L.stroke)S.setStyle({stroke:s((b+T/g)/m)});c.add(S),I+=y}I-=y}else I+=v}},_renderPointer:function(e,t,o,s,l,u,A,B){var c=this.group,C=this._data;if(!e.get("pointer.show"))return void(C&&C.eachItemGraphicEl(function(e){c.remove(e)}));var D=[+e.get("min"),+e.get("max")],d=[u,A],f=e.getData();f.diff(C).add(function(t){var a=new i({shape:{angle:u}});n.initProps(a,{shape:{angle:r.linearMap(f.get("value",t),D,d,!0)}},e),c.add(a),f.setItemGraphicEl(t,a)}).update(function(t,i){var a=C.getItemGraphicEl(i);n.updateProps(a,{shape:{angle:r.linearMap(f.get("value",t),D,d,!0)}},e),c.add(a),f.setItemGraphicEl(t,a)}).remove(function(e){var t=C.getItemGraphicEl(e);c.remove(t)}).execute(),f.eachItemGraphicEl(function(e,t){var i=f.getItemModel(t),o=i.getModel("pointer");if(e.setShape({x:l.cx,y:l.cy,width:a(o.get("width"),l.r),r:a(o.get("length"),l.r)}),e.useStyle(i.getModel("itemStyle.normal").getItemStyle()),"auto"===e.style.fill)e.setStyle("fill",s(r.linearMap(f.get("value",t),D,[0,1],!0)));n.setHoverStyle(e,i.getModel("itemStyle.emphasis").getItemStyle())}),this._data=f},_renderTitle:function(e,t,i,o,s){var l=e.getModel("title");if(l.get("show")){var u=l.getModel("textStyle"),A=l.get("offsetCenter"),B=s.cx+a(A[0],s.r),c=s.cy+a(A[1],s.r),C=new n.Text({style:{x:B,y:c,text:e.getData().getName(0),fill:u.getTextColor(),textFont:u.getFont(),textAlign:"center",textVerticalAlign:"middle"}});if("auto"===C.style.fill){var D=+e.get("min"),d=+e.get("max"),f=e.getData().get("value",0);C.setStyle("fill",o(r.linearMap(f,[D,d],[0,1],!0)))}this.group.add(C)}},_renderDetail:function(e,i,o,s,l){var u=e.getModel("detail"),A=+e.get("min"),B=+e.get("max");if(u.get("show")){var c=u.getModel("textStyle"),C=u.get("offsetCenter"),D=l.cx+a(C[0],l.r),d=l.cy+a(C[1],l.r),f=a(u.get("width"),l.r),h=a(u.get("height"),l.r),E=e.getData().get("value",0),p=new n.Rect({shape:{x:D-f/2,y:d-h/2,width:f,height:h},style:{text:t(E,u.get("formatter")),fill:u.get("backgroundColor"),textFill:c.getTextColor(),textFont:c.getFont()}});if("auto"===p.style.textFill)p.setStyle("textFill",s(r.linearMap(E,[A,B],[0,1],!0)));p.setStyle(u.getItemStyle(["color"])),this.group.add(p)}}});return s}),define("echarts/chart/gauge",["require","./gauge/GaugeSeries","./gauge/GaugeView"],function(require){require("./gauge/GaugeSeries"),require("./gauge/GaugeView")}),define("zrender/core/util",["require"],function(require){function e(t){if(null==t||"object"!=typeof t)return t;var i=t,n=K.call(t);if("[object Array]"===n){i=[];for(var r=0,a=t.length;a>r;r++)i[r]=e(t[r])}else if(N[n])i=t.constructor.from(t);else if(!b[n]&&!L(t)&&!H(t)){i={};for(var o in t)if(t.hasOwnProperty(o))i[o]=e(t[o])}return i}function t(i,n,r){if(!m(n)||!m(i))return r?e(n):i;for(var a in n)if(n.hasOwnProperty(a)){var o=i[a],s=n[a];if(!(!m(s)||!m(o)||E(s)||E(o)||H(s)||H(o)||g(s)||g(o)||L(s)||L(o)))t(o,s,r);else if(r||!(a in i))i[a]=e(n[a],!0)}return i}function i(e,i){for(var n=e[0],r=1,a=e.length;a>r;r++)n=t(n,e[r],i);return n}function n(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}function r(e,t,i){for(var n in t)if(t.hasOwnProperty(n)&&(i?null!=t[n]:null==e[n]))e[n]=t[n];return e}function a(){return document.createElement("canvas")}function o(){if(!M)M=R.createCanvas().getContext("2d");return M}function s(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i}return-1}function l(e,t){function i(){}var n=e.prototype;i.prototype=t.prototype,e.prototype=new i;for(var r in n)e.prototype[r]=n[r];e.prototype.constructor=e,e.superClass=t}function u(e,t,i){e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,r(e,t,i)}function A(e){if(e)if("string"==typeof e)return!1;else return"number"==typeof e.length}function B(e,t,i){if(e&&t)if(e.forEach&&e.forEach===P)e.forEach(t,i);else if(e.length===+e.length)for(var n=0,r=e.length;r>n;n++)t.call(i,e[n],n,e);else for(var a in e)if(e.hasOwnProperty(a))t.call(i,e[a],a,e)}function c(e,t,i){if(e&&t)if(e.map&&e.map===T)return e.map(t,i);else{for(var n=[],r=0,a=e.length;a>r;r++)n.push(t.call(i,e[r],r,e));return n}}function C(e,t,i,n){if(e&&t)if(e.reduce&&e.reduce===S)return e.reduce(t,i,n);else{for(var r=0,a=e.length;a>r;r++)i=t.call(n,i,e[r],r,e);return i}}function D(e,t,i){if(e&&t)if(e.filter&&e.filter===_)return e.filter(t,i);else{for(var n=[],r=0,a=e.length;a>r;r++)if(t.call(i,e[r],r,e))n.push(e[r]);return n}}function d(e,t,i){if(e&&t)for(var n=0,r=e.length;r>n;n++)if(t.call(i,e[n],n,e))return e[n]}function f(e,t){var i=O.call(arguments,2);return function(){return e.apply(t,i.concat(O.call(arguments)))}}function h(e){var t=O.call(arguments,1);return function(){return e.apply(this,t.concat(O.call(arguments)))}}function E(e){return"[object Array]"===K.call(e)}function p(e){return"function"==typeof e}function F(e){return"[object String]"===K.call(e)}function m(e){var t=typeof e;return"function"===t||!!e&&"object"==t}function g(e){return!!b[K.call(e)]}function H(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function G(e){return e!==e}function I(e){for(var t=0,i=arguments.length;i>t;t++)if(null!=arguments[t])return arguments[t]}function v(){return Function.call.apply(O,arguments)}function y(e,t){if(!e)throw new Error(t)}function J(e){e[w]=!0}function L(e){return e[w]}var M,b={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},N={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},K=Object.prototype.toString,x=Array.prototype,P=x.forEach,_=x.filter,O=x.slice,T=x.map,S=x.reduce,w="__ec_primitive__",R={inherits:l,mixin:u,clone:e,merge:t,mergeAll:i,extend:n,defaults:r,getContext:o,createCanvas:a,indexOf:s,slice:v,find:d,isArrayLike:A,each:B,map:c,reduce:C,filter:D,bind:f,curry:h,isArray:E,isString:F,isObject:m,isFunction:p,isBuiltInObject:g,isDom:H,eqNaN:G,retrieve:I,assert:y,setAsPrimitive:J,noop:function(){}};return R}),define("echarts/chart/bar/BaseBarSeries",["require","../../model/Series","../helper/createListFromArray"],function(require){"use strict";var e=require("../../model/Series"),t=require("../helper/createListFromArray");return e.extend({type:"series.__base_bar__",getInitialData:function(e,i){if(__DEV__){var n=e.coordinateSystem;if("cartesian2d"!==n)throw new Error("Bar only support cartesian2d coordinateSystem")}return t(e.data,this,i)},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var i=t.dataToPoint(e,!0),n=this.getData(),r=n.getLayout("offset"),a=n.getLayout("size"),o=t.getBaseAxis().isHorizontal()?0:1;return i[o]+=r+a/2,i}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,itemStyle:{normal:{},emphasis:{}}}})}),define("echarts/chart/bar/BarSeries",["require","./BaseBarSeries"],function(require){return require("./BaseBarSeries").extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect"})}),define("echarts/chart/bar/helper",["require","zrender/core/util","../../util/graphic"],function(require){function e(e,t,n,r,a){if(i.setText(e,t,n),e.text=r,"outside"===e.textPosition)e.textPosition=a}var t=require("zrender/core/util"),i=require("../../util/graphic"),n={};return n.setLabel=function(i,n,r,a,o,s,l){var u=r.getModel("label.normal"),A=r.getModel("label.emphasis");if(u.get("show"))e(i,u,a,t.retrieve(o.getFormattedLabel(s,"normal"),o.getRawValue(s)),l);else i.text="";if(A.get("show"))e(n,A,a,t.retrieve(o.getFormattedLabel(s,"emphasis"),o.getRawValue(s)),l);else n.text=""},n}),define("echarts/chart/bar/barItemStyle",["require","../../model/mixin/makeStyleMapper"],function(require){var e=require("../../model/mixin/makeStyleMapper")([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);return{getBarItemStyle:function(t){var i=e.call(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(i.lineDash=n)}return i}}}),define("echarts/chart/bar/BarView",["require","zrender/core/util","../../util/graphic","./helper","../../model/Model","./barItemStyle","../../echarts"],function(require){"use strict";function e(e,t,i,n,r,s,l){var u=new o.Rect({shape:a.extend({},n)});if(s){var A=u.shape,B=r?"height":"width",c={};A[B]=0,c[B]=n[B],o[l?"updateProps":"initProps"](u,{shape:c},s,t)}return u}function t(e,t,i){i.style.text="",o.updateProps(i,{shape:{width:0}},t,e,function(){i.parent&&i.parent.remove(i)})}function i(e,t,i){var n=e.getItemLayout(t),a=r(i,n),o=n.width>0?1:-1,s=n.height>0?1:-1;return{x:n.x+o*a/2,y:n.y+s*a/2,width:n.width-o*a,height:n.height-s*a}}function n(e,t,i,n,r,l,u){var A=t.getItemVisual(i,"color"),B=t.getItemVisual(i,"opacity"),c=n.getModel("itemStyle.normal"),C=n.getModel("itemStyle.emphasis").getBarItemStyle();e.setShape("r",c.get("barBorderRadius")||0),e.useStyle(a.defaults({fill:A,opacity:B},c.getBarItemStyle()));var D=u?r.height>0?"bottom":"top":r.width>0?"left":"right";s.setLabel(e.style,C,n,A,l,i,D),o.setHoverStyle(e,C)}function r(e,t){var i=e.get(l)||0;return Math.min(i,Math.abs(t.width),Math.abs(t.height))}var a=require("zrender/core/util"),o=require("../../util/graphic"),s=require("./helper"),l=["itemStyle","normal","barBorderWidth"];a.extend(require("../../model/Model").prototype,require("./barItemStyle"));var u=require("../../echarts").extendChartView({type:"bar",render:function(e,t,i){var n=e.get("coordinateSystem");if("cartesian2d"===n)this._renderOnCartesian(e,t,i);return this.group},dispose:a.noop,_renderOnCartesian:function(r,a,s){var l=this.group,u=r.getData(),A=this._data,B=r.coordinateSystem,c=B.getBaseAxis(),C=c.isHorizontal(),D=r.isAnimationEnabled()?r:null;u.diff(A).add(function(t){if(u.hasValue(t)){var a=u.getItemModel(t),o=i(u,t,a),s=e(u,t,a,o,C,D);u.setItemGraphicEl(t,s),l.add(s),n(s,u,t,a,o,r,C)}}).update(function(t,a){var s=A.getItemGraphicEl(a);if(!u.hasValue(t))return void l.remove(s);var B=u.getItemModel(t),c=i(u,t,B);if(s)o.updateProps(s,{shape:c},D,t);else s=e(u,t,B,c,C,D,!0);u.setItemGraphicEl(t,s),l.add(s),n(s,u,t,B,c,r,C)}).remove(function(e){var i=A.getItemGraphicEl(e);i&&t(e,D,i)}).execute(),this._data=u},remove:function(e,i){var n=this.group,r=this._data;if(e.get("animation")){if(r)r.eachItemGraphicEl(function(i){t(i.dataIndex,e,i)})}else n.removeAll()}});return u}),define("echarts/layout/barGrid",["require","zrender/core/util","../util/number"],function(require){"use strict";function e(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function t(e){return e.dim+e.index}function i(i,n){var a={};r.each(i,function(i,n){var r=i.getData(),s=i.coordinateSystem,l=s.getBaseAxis(),u=l.getExtent(),A="category"===l.type?l.getBandWidth():Math.abs(u[1]-u[0])/r.count(),B=a[t(l)]||{bandWidth:A,remainedWidth:A,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=B.stacks;a[t(l)]=B;var C=e(i);if(!c[C])B.autoWidthCount++;c[C]=c[C]||{width:0,maxWidth:0};var D=o(i.get("barWidth"),A),d=o(i.get("barMaxWidth"),A),f=i.get("barGap"),h=i.get("barCategoryGap");if(D&&!c[C].width)D=Math.min(B.remainedWidth,D),c[C].width=D,B.remainedWidth-=D;d&&(c[C].maxWidth=d),null!=f&&(B.gap=f),null!=h&&(B.categoryGap=h)});var s={};return r.each(a,function(e,t){s[t]={};var i=e.stacks,n=e.bandWidth,a=o(e.categoryGap,n),l=o(e.gap,1),u=e.remainedWidth,A=e.autoWidthCount,B=(u-a)/(A+(A-1)*l);B=Math.max(B,0),r.each(i,function(e,t){var i=e.maxWidth;if(i&&B>i){if(i=Math.min(i,u),e.width)i=Math.min(i,e.width);u-=i,e.width=i,A--}}),B=(u-a)/(A+(A-1)*l),B=Math.max(B,0);var c,C=0;if(r.each(i,function(e,t){if(!e.width)e.width=B;c=e,C+=e.width*(1+l)}),c)C-=c.width*l;var D=-C/2;r.each(i,function(e,i){s[t][i]=s[t][i]||{offset:D,width:e.width},D+=e.width*(1+l)})}),s}function n(n,a,o){var s=i(r.filter(a.getSeriesByType(n),function(e){return!a.isSeriesFiltered(e)&&e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type})),l={},u={};a.eachSeriesByType(n,function(i){var n=i.getData(),r=i.coordinateSystem,a=r.getBaseAxis(),o=e(i),A=s[t(a)][o],B=A.offset,c=A.width,C=r.getOtherAxis(a),D=i.get("barMinHeight")||0,d=a.onZero?C.toGlobalCoord(C.dataToCoord(0)):C.getGlobalExtent()[0],f=r.dataToPoints(n,!0);l[o]=l[o]||[],u[o]=u[o]||[],n.setLayout({offset:B,size:c}),n.each(C.dim,function(e,t){if(!isNaN(e)){if(!l[o][t])l[o][t]={p:d,n:d},u[o][t]={p:d,n:d};var i,r,a,s,A=e>=0?"p":"n",h=f[t],E=l[o][t][A],p=u[o][t][A];if(C.isHorizontal()){if(i=E,r=h[1]+B,a=h[0]-p,s=c,u[o][t][A]+=a,Math.abs(a)<D)a=(0>a?-1:1)*D;l[o][t][A]+=a}else{if(i=h[0]+B,r=E,a=c,s=h[1]-p,u[o][t][A]+=s,Math.abs(s)<D)s=(0>=s?-1:1)*D;l[o][t][A]+=s}n.setItemLayout(t,{x:i,y:r,width:a,height:s})}},!0)},this)}var r=require("zrender/core/util"),a=require("../util/number"),o=a.parsePercent;return n}),define("echarts/chart/bar",["require","zrender/core/util","../coord/cartesian/Grid","./bar/BarSeries","./bar/BarView","../layout/barGrid","../echarts","../component/gridSimple"],function(require){var e=require("zrender/core/util");require("../coord/cartesian/Grid"),require("./bar/BarSeries"),require("./bar/BarView");var t=require("../layout/barGrid"),i=require("../echarts");i.registerLayout(e.curry(t,"bar")),i.registerVisual(function(e){e.eachSeriesByType("bar",function(e){var t=e.getData();t.setVisual("legendSymbol","roundRect")})}),require("../component/gridSimple")}),define("er/config",[],{mainElement:"main",indexURL:"/",systemName:"",noAuthorityLocation:"/401",notFoundLocation:"/404"}),define("er/locator",["require","./config","./events","mini-event/EventTarget"],function(require){function e(){var e=location.href.indexOf("#"),t=-1===e?"":location.href.slice(e);return t}function t(){var t=e();a.redirect(t)}function i(e){if(window.addEventListener)window.addEventListener("hashchange",t,!1);else if("onhashchange"in window&&document.documentMode>7)window.attachEvent("onhashchange",t);else s=setInterval(t,100);if(e)l=setTimeout(t,0)}function n(){if(s)clearInterval(s),s=null;if(l)clearTimeout(l),l=null;if(window.removeEventListener)window.removeEventListener("hashchange",t,!1);else if("onhashchange"in window&&document.documentMode>7)window.detachEvent("onhashchange",t)}function r(t,r){var a=o!==t;if(a&&e()!==t)if(r.silent)n(),location.hash=t,i(!1);else location.hash=t;return o=t,a}var a={},o="",s=0,l=1;return a.start=function(){i(!0)},a.stop=n,a.resolveURL=function(e){if(e+="",0===e.indexOf("#"))e=e.slice(1);if(!e||"/"===e)e=require("./config").indexURL;return e},a.redirect=function(e,t){t=t||{},e=a.resolveURL(e);var i=o,n=r(e,t),s=n||t.force;if(s){if(!t.silent)a.fire("redirect",{url:e,referrer:i});require("./events").fire("redirect",{url:e,referrer:i})}return s},a.reload=function(){if(o)a.redirect(o,{force:!0})},require("mini-event/EventTarget").enable(a),a}),define("bat-ria/ui/navigator",["require","underscore","er/locator","er/permission","er/URL","esui/lib"],function(require){function e(){}function t(e,t,i){var n=document.createElement("li");return n.className="nav-item",n.innerHTML='<a href="'+i+'" data-nav-index="'+e+'"><span>'+r.escape(t)+"</span></a>",n}function i(e,t){return r.some(t,function(t){if("function"==typeof t.test)return t.test(e);else return t===e})}function n(e){throw{name:"System Error",message:e?e:"Unknow Error"}}var r=require("underscore"),a=require("er/locator"),o=require("er/permission"),s=(require("er/URL"),require("esui/lib"));e.prototype.config=null,e.prototype.activeIndex=null,e.prototype.navItems={},e.prototype.init=function(e,i){if(!i)return void n("Navigator config is null!");var s=document.getElementById(e);if(!s)return void n("Can not find navigator main element!");var l=null;if(this.config=i,"ul"===s.tagName.toLowerCase())l=s;else l=document.createElement("ul"),s.appendChild(l);var u=this;r.each(i,function(e,i){if(!e.auth||o.isAllow(e.auth)){var n=e.externalUrl||"#"+e.url,r=t(i,e.text,n);l.appendChild(r),u.navItems[i]=r}}),a.on("redirect",r.bind(this.handleRedirect,this)),this.handleRedirect({url:location.hash.slice(1)})},e.prototype.handleRedirect=function(e){var t=this;r.some(this.config,function(n,r){var a=n.include||[],o=n.exclude||[];if(!i(e.url,o)&&i(e.url,a))return t.activeTab(r),!0;else return void 0})},e.prototype.activeTab=function(e){var t=this.navItems[e];if(null===this.activeIndex)this.activeIndex=e;else s.removeClass(this.navItems[this.activeIndex],"nav-item-current"),this.activeIndex=e;s.addClass(t,"nav-item-current")};var l=new e;return{init:r.bind(l.init,l)}}),define("esui/painters",["require","underscore","./lib"],function(require){var e=require("underscore"),t=require("./lib"),i={};i.state=function(e){return{name:e,paint:function(e,t){var i=t?"addState":"removeState";e[i](this.name)}}},i.attribute=function(e,t,i){return{name:e,attribute:t||e,value:i,paint:function(e,t){t=null==this.value?t:this.value,e.main.setAttribute(this.attribute,t)}}};var n={width:!0,height:!0,top:!0,right:!0,bottom:!0,left:!0,fontSize:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,margin:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,borderWidth:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0};return i.style=function(e,t){return{name:e,property:t||e,paint:function(e,t){if(null!=t){if(n.hasOwnProperty(this.property))t=0===t?"0":t+"px";e.main.style[this.property]=t}}}},i.html=function(e,t,i){return{name:e,element:t||"",generate:i,paint:function(e,t){var i="function"==typeof this.element?this.element(e):this.element?e.helper.getPart(this.element):e.main;if(i){var n="function"==typeof this.generate?this.generate(e,t):t;i.innerHTML=n||""}}}},i.text=function(t,i,n){return{name:t,element:i||"",generate:n,paint:function(t,i){var n="function"==typeof this.element?this.element(t):this.element?t.helper.getPart(this.element):t.main;if(n){var r="function"==typeof this.generate?this.generate(t,i):i;n.innerHTML=e.escape(r||"")}}}},i.delegate=function(e,t,i){return{name:e,member:this.member,method:this.method,paint:function(e,t){e[this.member][this.method](t)}}},i.createRepaint=function(){var e=[].concat.apply([],[].slice.call(arguments));return function(i,n){for(var r=t.extend({},n),a=0;a<e.length;a++){var o=e[a];if("function"!=typeof o){var s=[].concat(o.name),l=!i;if(!l)for(var u=0;u<s.length;u++){var A=s[u];if(n.hasOwnProperty(A)){l=!0;break}}if(l){for(var B=[this],u=0;u<s.length;u++){var A=s[u];B.push(this[A]),delete r[A]}try{o.paint.apply(o,B)}catch(c){var C='"'+s.join('", "')+'"',D=new Error("Failed to paint ["+C+'] for control "'+(this.id||"anonymous")+'" of type '+this.type+" because: "+c.message);throw D.actualError=D,D}}else;}else o.apply(this,arguments)}var d=[];for(var f in r)if(r.hasOwnProperty(f))d.push(r[f]);return d}},i}),define("esui/Button",["require","underscore","./lib","./painters","./Control","./main"],function(require){function e(e){a.apply(this,arguments)}function t(e){var t={};return t.borderTop=parseInt(n.getComputedStyle(e,"borderTopWidth"),10),t.borderBottom=parseInt(n.getComputedStyle(e,"borderBottomWidth"),10),t}var i=require("underscore"),n=require("./lib"),r=require("./painters"),a=require("./Control");return e.prototype={type:"Button",initOptions:function(e){var t={content:"",disabled:!1};if(i.extend(t,e),t.tagName=this.main.nodeName.toLowerCase(),null==t.text)t.text=n.getText(this.main);var r=this.main.firstChild;if(!t.content&&r&&"div"!==r.nodeName.toLowerCase())t.content=this.main.innerHTML;this.setProperties(t)},createMain:function(){var e=document.createElement("div");return e.innerHTML='<button type="button"></button>',e.firstChild},initEvents:function(){var e=this.main;this.helper.delegateDOMEvent(e,"click"),this.on("click",function(){e.blur()})},repaint:r.createRepaint(a.prototype.repaint,r.style("width"),{name:"height",paint:function(e,i){if(i){var n=e.main;n.style.height=i+"px";var r=i;n.style.lineHeight=r+"px";var a=n.offsetHeight;if(a===i){var o=t(n),s=i+o.borderTop+o.borderBottom;n.style.height=s+"px"}}}},r.html("content"),{name:"disabled",paint:function(e,t){var i=e.main.nodeName.toLowerCase();if("button"===i||"input"===i)e.main.disabled=!!t}}),setContent:function(e){this.setProperties({content:e})}},n.inherits(e,a),require("./main").register(e),e}),define("esui/Dialog",["require","./Button","./Panel","inf-i18n","underscore","./lib","./controlHelper","./Control","./main"],function(require){function e(e){E.apply(this,arguments)}function t(e){var t=e.main;if(t){for(var i,n=f.getChildren(t),r=n.length,a={};r--;)if(i=n[r].getAttribute("data-role"))a[i]=n[r];e.roles=a}}function i(e,t){var i="title",n="close-icon",r='<div class="${clsClass}" id="${clsId}">&nbsp;</div>',a="";if(e.closeButton)a=f.format(r,{clsId:h.getId(e,n),clsClass:h.getPartClasses(e,n).join(" ")});var o='<div id="${titleId}" class="${titleClass}"></div>${closeIcon}',s=[].concat(h.getPartClasses(e,"head")),l={titleId:h.getId(e,i),titleClass:h.getPartClasses(e,i).join(" "),closeIcon:a},u=f.format(o,l);if(t)e.title=t.innerHTML;else if(t=document.createElement("div"),e.main.firstChild)f.insertBefore(t,e.main.firstChild);else e.main.appendChild(t);t.innerHTML=u,f.addClasses(t,s);var A={main:t,renderOptions:e.renderOptions},B=p.create("Panel",A);return B.render(),e.addChild(B,"head"),B}function n(){var e=this.fire("beforeclose");if(e.isDefaultPrevented())return!1;if(this.hide(),this.fire("close"),this.closeOnHide)this.dispose()}function r(){var e=f.page,t=this.main,i=this.left,n=this.top,r=this.right,a=this.bottom;if(void 0===i||null===i)i=(e.getViewWidth()-t.offsetWidth)/2;if(0>i)i=0;if(void 0===n||null===n)n=(e.getViewHeight()-t.offsetHeight)/2;if(n=Math.max(n,0),t.style.left=i+"px",t.style.top=e.getScrollTop()+n+"px",void 0!==r&&null!==r)t.style.right=r+"px";if(void 0!==a&&null!==a)t.style.bottom=a+"px";if("auto"===this.height){var o=e.getViewHeight()-n;t.style.height=o+"px";var s=this.getBody().main,l=this.getHead().main,u=parseInt(f.getStyle(l,"height"),10);s.style.height=o-u+"px"}}function a(e,t){var i=e,n=e.getChild("head").main;if(t===!0)h.removeDOMEvent(i,n,"mousedown",s);else h.addDOMEvent(i,n,"mousedown",s)}function o(e,t,i){if(i)h.addDOMEvent(e,t,"selectstart",function(e){e.preventDefault()});else h.removeDOMEvent(e,t,"selectstart")}function s(e){var t=e.button,i=!1;if(!e.which&&1===t||1===e.which)i=!0;if(i){var n=document;this.addState("dragging"),o(this,this.main,!0),h.addDOMEvent(this,n,"mousemove",l),h.addDOMEvent(this,n,"mouseup",u),f.event.getMousePosition(e),this.dragStartPos={x:e.pageX,y:e.pageY}}}function l(e){var t=this;f.event.getMousePosition(e);var i={x:e.pageX-t.dragStartPos.x,y:e.pageY-t.dragStartPos.y};t.dragStartPos={x:e.pageX,y:e.pageY};var n=t.main,r=f.getOffset(n),a=r.left+i.x,o=r.top+i.y,s=f.page.getWidth(),l=f.page.getHeight(),u=f.getOffset(n);if(0>o)o=0;else if(o>l-u.height)o=l-u.height;if(0>a)a=0;else if(a>s-u.width)a=s-u.width;n.style.left=a+"px",n.style.top=o+"px"}function u(e){h.removeDOMEvent(this,document,"mousemove",l),h.removeDOMEvent(this,document,"mouseup",u),this.removeState("dragging"),o(this,this.main,!1)}function A(e,t){var i=C(e),n=[],r=h.getPartClasses(e,"mask").join(" ");n.push(r),i.className=n.join(" "),i.style.display="block",i.style.zIndex=t}function B(e){var t=C(e);if("undefined"!=typeof t)f.removeNode(t)}function c(e){var t=document.createElement("div");t.id=e,document.body.appendChild(t)}function C(e){var t=h.getId(e),i=F+"-"+t,n=f.g(i);if(!n)c(i);return f.g(i)}require("./Button"),require("./Panel");var D=require("inf-i18n"),d=require("underscore"),f=require("./lib"),h=require("./controlHelper"),E=require("./Control"),p=require("./main"),F="ctrl-mask";return e.OK_TEXT=D("确定"),e.CANCEL_TEXT=D("取消"),e.prototype={constructor:e,type:"Dialog",initOptions:function(i){t(i);var n={closeButton:!0,closeOnHide:!0,draggable:!1,mask:!0,title:"我是标题",content:"<p>我是内容</p>",defaultFoot:'<div class="'+this.helper.getPartClassName("ok-btn")+'" data-ui="type:Button;id:btnFootOk;childName:btnOk;skin:spring;">'+(i.okText||e.OK_TEXT)+'</div><div class="'+this.helper.getPartClassName("cancel-btn")+'" data-ui="type:Button;id:btnFootCancel;childName:btnCancel;">'+(i.cancelText||e.CANCEL_TEXT)+"</div>",needFoot:!0,roles:{}};if("false"===i.closeOnHide)i.closeOnHide=!1;if("false"===i.closeButton)i.closeButton=!1;if("false"===i.mask)i.mask=!1;if("false"===i.needFoot)i.needFoot=!1;if(f.extend(n,i),n.needFoot)if(!n.foot)n.foot=n.defaultFoot;this.setProperties(n)},initStructure:function(){var e=this.main;if(e.parentNode&&"body"!==e.parentNode.nodeName.toLowerCase())document.body.appendChild(e);if(this.addState("hidden"),i(this,this.roles.title),this.createBF("body",this.roles.content),this.needFoot)this.createBF("foot",this.roles.foot)},initEvents:function(){if(this.closeButton){var e=f.g(h.getId(this,"close-icon"));if(e)h.addDOMEvent(this,e,"click",f.curry(n,this))}},createBF:function(e,t){if(t)this.content=t.innerHTML;else if(t=document.createElement("div"),"body"===e){var i=this.getChild("head");if(i)f.insertAfter(t,i.main);else if(this.main.firstChild)f.insertBefore(t,i,this.main.firstChild);else this.main.appendChild(t)}else this.main.appendChild(t);f.addClasses(t,h.getPartClasses(this,e+"-panel"));var n={main:t,renderOptions:this.renderOptions},r=p.create("Panel",n);return r.render(),this.addChild(r,e),r},repaint:h.createRepaint(E.prototype.repaint,{name:"height",paint:function(e,t){if("auto"===t)e.main.style.height="auto";else if(t)e.main.style.height=t+"px";if(e.isShow)r.apply(e)}},{name:"width",paint:function(e,t){if("auto"===t)e.main.style.width="auto";else if(t)e.main.style.width=t+"px";if(e.isShow)r.apply(e)}},{name:"title",paint:function(e,t){var i=h.getId(e,"title");f.g(i).innerHTML=t}},{name:"content",paint:function(e,t){if(t){var i='<div class="${class}" id="${id}">${content}</div>',n=e.getBody(),r=h.getId(e,"body"),a=h.getPartClasses(e,"body"),o={"class":a.join(" "),id:r,content:t};n.setContent(f.format(i,o))}}},{name:"foot",paint:function(e,t){var i='<div class="${class}" id="${id}">${content}</div>',n=h.getId(e,"foot"),r=h.getPartClasses(e,"foot"),a=e.getFoot();if(null==t){if(e.needFoot=!1,a)e.removeChild(a)}else{e.needFoot=!0;var o={"class":r.join(" "),id:n,content:t};if(!a)a=e.createBF("foot");a.setContent(f.format(i,o))}}},{name:"draggable",paint:function(e,t){var i=!1;if(t)e.addState("draggable");else e.removeState("draggable"),i=!0;a(e,i)}}),getBody:function(){return this.getChild("body")},getHead:function(){return this.getChild("head")},getFoot:function(){return this.getChild("foot")},show:function(){var e=this.mask;if(h.isInStage(this,"INITED"))this.render();else if(h.isInStage(this,"DISPOSED"))return;h.addDOMEvent(this,window,"resize",r),this.setWidth(this.width),this.removeState("hidden"),r.apply(this);for(var t=1203,i=document.body.children,n=0,a=0,o=i.length;o>a;a++)if(1===i[a].nodeType)if(f.hasClass(i[a],this.helper.getPrimaryClassName())&&!f.hasClass(i[a],this.helper.getPrimaryClassName("hidden")))n++;if(t+=10*n,this.main.style.zIndex=t,this.main.style.opacity="1",e)A(this,t-1);if(!this.isShow)this.isShow=!0,this.fire("show")},hide:function(){if(this.isShow){if(this.isShow=!1,h.removeDOMEvent(this,window,"resize",r),
this.addState("hidden"),this.mask)B(this);this.fire("hide")}},setTitle:function(e){this.setProperties({title:e})},setContent:function(e){this.setProperties({content:e})},setFoot:function(e){this.setProperties({foot:e})},setHeight:function(e){this.setProperties({height:e})},setWidth:function(e){this.setProperties({width:e})},resize:function(){r.apply(this)},dispose:function(){if(!this.helper.isInStage("DISPOSED")){this.hide();var e=this.main.id;f.removeNode(e),E.prototype.dispose.apply(this,arguments)}}},e.confirm=function(t){function i(e,t){e.fire(t),e.dispose()}var n="dialog-confirm";if(d.defaults(t,{title:"",content:"",okText:t.okText||e.OK_TEXT,cancelText:t.cancelText||e.CANCEL_TEXT,encode:!0}),t.encode)t.title=d.escape(t.title),t.content=d.escape(t.content),t.okText=d.escape(t.okText),t.cancelText=d.escape(t.cancelText);var r={type:"confirm",skin:"confirm",title:""};f.extend(r,t);var a=['<div class="${prefix}-icon ${prefix}-icon-${type}"></div>','<div class="${prefix}-text">${content}</div>'].join("");r.id=h.getGUID(n),r.closeButton=!1,r.mask=!0,r.alwaysTop=!0;var o=r.type;r.type=null;var s=p.create("Dialog",r);s.appendTo(document.body),s.show();var l=s.getFoot().getChild("btnOk"),u=s.getFoot().getChild("btnCancel");if(l.setContent(t.okText),u.setContent(t.cancelText),s.setTitle(t.title),s.setContent(f.format(a,{type:o,content:t.content,prefix:s.helper.getPrimaryClassName()})),r.btnHeight)l.set("height",r.btnHeight),u.set("height",r.btnHeight);if(r.btnWidth)l.set("width",r.btnWidth),u.set("width",r.btnWidth);return l.on("click",f.curry(i,s,"ok")),u.on("click",f.curry(i,s,"cancel")),s},e.alert=function(t){function i(e,t){e.fire("ok"),t.dispose(),e.dispose()}var n="dialog-alert",r="dialog-alert-ok";if(d.defaults(t,{title:"",content:"",okText:t.okText||e.OK_TEXT,encode:!0}),t.encode)t.title=d.escape(t.title),t.content=d.escape(t.content),t.okText=d.escape(t.okText);var a={type:"warning",skin:"alert",title:""};f.extend(a,t);var o=['<div class="${prefix}-icon ${prefix}-icon-${type}"></div>','<div class="${prefix}-text">${content}</div>'].join(""),s=h.getGUID(n);a.id=s,a.closeButton=!1,a.mask=!0,a.alwaysTop=!0;var l=a.type;a.type=null;var u=p.create("Dialog",a);u.appendTo(document.body),u.setTitle(t.title),u.setContent(f.format(o,{type:l,content:t.content,prefix:u.helper.getPrimaryClassName()})),u.setFoot('<div class="'+u.helper.getPartClassName("ok-btn")+'" data-ui="type:Button;childName:okBtn;id:'+s+"-"+r+'; skin:spring;width:50;">'+t.okText+"</div>"),u.show();var A=u.getFoot().getChild("okBtn");if(A.on("click",f.curry(i,u,A)),a.btnHeight)A.set("height",a.btnHeight);if(a.btnwidth)A.set("width",a.btnwidth);return u},f.inherits(e,E),p.register(e),e}),define("bat-ria/ui/loading",["require","underscore","inf-i18n","esui","esui/Dialog"],function(require){function e(e,t){if(n&&clearTimeout(n),!i){var l=require("esui");require("esui/Dialog");var u=document.createElement("div");document.body.appendChild(u);var A={main:u,title:a("系统提示"),disposeOnHide:!1,mask:!0,top:180,width:"auto",needFoot:!1,skin:"loading"};i=l.create("Dialog",A),i.show(),s=!0}var B={content:e||a("正在读取数据，请稍候...")};return B=r.extend(B,t),i.setProperties(B),i.show(),s=!0,o++,i}function t(){if(i)if(o--,0>=o)o=0,n&&clearTimeout(n),n=setTimeout(function(){i.hide(),s=!1},300)}var i,n,r=require("underscore"),a=require("inf-i18n"),o=0,s=!1;return{show:e,hide:t,isShowing:function(){return s}}}),define("bat-ria/ui/extension/WordCount",["require","esui/lib","esui/validator/Validity","esui/Extension","esui"],function(require){function e(e){r.apply(this,arguments)}function t(){var e=this.getMaxLength(),t=this.target.getValue().length,i={max:e,current:t,available:e-t},r=i.available<0?"error":"hint",a=this.getHintMessage(i),o=new n;o.setCustomValidState(r),o.setCustomMessage(a),this.target.showValidity(o)}var i=require("esui/lib"),n=require("esui/validator/Validity"),r=require("esui/Extension");return e.prototype.type="WordCount",e.prototype.initialTemplate="最多可输入${available}个字符",e.prototype.remainingTemplate="还可输入${available}个字符",e.prototype.exceededTemplate="已超出${available}个字符",e.prototype.getHintMessage=function(e){var t;if(!e.current)t=this.initialTemplate;else if(e.available>=0)t=this.remainingTemplate;else t=this.exceededTemplate,e.available=-e.available;return i.format(t,e)},e.prototype.getMaxLength=function(){return this.target.get("maxLength")||this.target.get("length")},e.prototype.activate=function(){var e=this.target,i=e.get("maxLength")||e.get("length");if(i)this.target.on("input",t,this),this.target.on("afterrender",t,this);r.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){this.target.un("input",t,this),this.target.un("afterrender",t,this),r.prototype.inactivate.apply(this,arguments)},i.inherits(e,r),require("esui").registerExtension(e),e}),define("esui/Extension",["require","./lib"],function(require){function e(e){t.extend(this,e)}var t=require("./lib");return e.prototype.target=null,e.prototype.active=!1,e.prototype.isActive=function(){return this.active},e.prototype.activate=function(){this.active=!0},e.prototype.inactivate=function(){this.active=!1},e.prototype.attachTo=function(e){if(this.target&&this.target!==e)if(this.active)this.inactivate();if(this.target=e,!this.active)this.activate()},e.prototype.dispose=function(){if(this.active)this.inactivate();this.target=null},e}),define("bat-ria/ui/extension/TableTip",["require","esui/lib","esui","underscore","esui/Extension","esui/TipLayer"],function(require){function e(){a.apply(this,arguments)}function t(e){return o.exec(e.className)[1]}var i=require("esui/lib"),n=require("esui"),r=require("underscore"),a=require("esui/Extension");require("esui/TipLayer"),e.prototype.type="TableTip";var o=/table-operation-(\w+)/;return e.prototype.createAndAttachTip=function(e,t){var i={id:"table-operation-tip-"+r.escape(t),viewContext:this.target.viewContext,content:e[0].innerHTML,arrow:!0,skin:"table-tip"},a=n.create("TipLayer",i);a.appendTo(document.body),r.each(e,function(e){var t={targetDOM:e,showMode:"over",delayTime:200,positionOpt:{bottom:"bottom",left:"left"}};a.attachTo(t)})},e.prototype.initTips=function(){if(document.querySelectorAll){var e=document.querySelectorAll(".table-operation");r.chain(e).groupBy(t).each(r.bind(this.createAndAttachTip,this))}},e.prototype.activate=function(){a.prototype.activate.apply(this,arguments),this.target.on("afterrender",this.initTips,this)},e.prototype.inactivate=function(){this.target.un("afterrender",this.initTips,this),a.prototype.inactivate.apply(this,arguments)},i.inherits(e,a),n.registerExtension(e),e}),define("esui/main",["require","./lib","./ViewContext","./ControlCollection"],function(require){function e(e,t){if("function"==typeof e){var i=e.prototype.type;if(i in t)throw new Error(i+" is exists!");t[i]=e}}function t(e,t,i){var n=i[e];if(n)return delete t.type,new n(t);else return null}var i=require("./lib"),n={};n.version="3.1.0-beta.6";var r=require("./ViewContext"),a=new r("default");n.getViewContext=function(){return a};var o={uiPrefix:"data-ui",extensionPrefix:"data-ui-extension",customElementPrefix:"esui",instanceAttr:"data-ctrl-id",viewContextAttr:"data-ctrl-view-context",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state"};n.config=function(e){i.extend(o,e)},n.getConfig=function(e){return o[e]},n.parseAttribute=function(e,t){if(!e)return{};for(var n={},r=0,a=0;a<e.length;){for(;a<e.length&&":"!==e.charAt(a);)a++;if(a>=e.length)break;var o=i.trim(e.slice(r,a));for(a++,r=a;a<e.length&&";"!==e.charAt(a);)a++;for(var s=a+1;s<e.length;){var l=e.charAt(s);if(";"===l)a=s;if(":"===l)break;s++}var u=i.trim(e.slice(r,a));n[o]=t?t(u):u,a++,r=a}return n},n.getControlByDOM=function(e){if(!e)return null;var t,i=n.getConfig,a=e.getAttribute(i("instanceAttr")),o=e.getAttribute(i("viewContextAttr"));if(a&&o&&(t=r.get(o)))return t.get(a);else return null};var s={};n.register=function(t){e(t,s)},n.create=function(e,i){return t(e,i,s)},n.get=function(e){return a.get(e)},n.getSafely=function(e){return a.getSafely(e)};var l=require("./ControlCollection");n.wrap=function(){for(var e=new l,t=0;t<arguments.length;t++)e.add(arguments[t]);return e},n.init=function(e,t){function i(e){function t(e){return e.toUpperCase()}for(var i=1,n=e.length;n>i;i++)e[i]=e[i].replace(/^[a-z]/,t);return e.join("")}function r(e,t){for(var i in t)if(!(i in e))e[i]=t[i]}function a(e,t,a){if(0===t.length)r(e,n.parseAttribute(a,s));else e[i(t)]=s(a)}e=e||document.body,t=t||{};for(var s=t.valueReplacer||function(e){return e},l=e.getElementsByTagName("*"),u=[],A=0,B=l.length;B>A;A++)if(1===l[A].nodeType)u.push(l[A]);for(var c=n.getConfig("uiPrefix"),C=n.getConfig("extensionPrefix"),D=n.getConfig("customElementPrefix"),d=c.length,f=C.length,h=t.properties||{},E=[],A=0,B=u.length;B>A;A++){var p=u[A];if(!p.getAttribute(o.instanceAttr)){for(var F=p.attributes,m={},g={},H=0,G=F.length;G>H;H++){var I=F[H],v=I.name,y=I.value;if(0===v.indexOf(C)){var J=v.slice(f+1).split("-"),L=J[0];J.shift();var M=g[L];if(!M)M=g[L]={};a(M,J,y)}else if(0===v.indexOf(c)){var J=v.length===d?[]:v.slice(d+1).split("-");a(m,J,y)}}var b=m.type;if(!b){var N=p.nodeName.toLowerCase(),K=N.indexOf(D);if(0===K){var x;x=N.replace(/-(\S)/g,function(e,t){return t.toUpperCase()}),x=x.slice(D.length),m.type=x,b=x}}if(b){var P=m.id,_=P?h[P]:{};for(var O in _)m[O]=s(_[O]);var T=m.extensions||[];m.extensions=T;for(var O in g){var M=g[O],S=n.createExtension(M.type,M);S&&T.push(S)}m.viewContext=t.viewContext,m.renderOptions=t,m.main=p;var w=n.create(b,m);if(w){if(E.push(w),t.parent)t.parent.addChild(w);try{w.render()}catch(R){var k=new Error('Render control "'+(w.id||"anonymous")+'" of type '+w.type+" failed because: "+R.message);throw k.actualError=R,k}}}}else;}return E};var u={};n.registerExtension=function(t){e(t,u)},n.createExtension=function(e,i){return t(e,i,u)};var A={};n.attachExtension=function(e,t){A[e]=t},n.createGlobalExtensions=function(){var e=[];for(var t in A)if(A.hasOwnProperty(t)){var i=n.createExtension(t,A[t]);i&&e.push(i)}return e};var B=[];return n.registerRule=function(e,t){B.push({type:e,priority:t}),B.sort(function(e,t){return e.priority-t.priority})},n.createRulesByControl=function(e){for(var t=[],i=0;i<B.length;i++){var n=B[i].type;if(null!=e.get(n.prototype.type))t.push(new n)}return t},n}),define("esui",["esui/main"],function(e){return e}),define("bat-ria/ui/extension/AutoSubmit",["require","underscore","esui/lib","esui","esui/Form","esui/Extension"],function(require){function e(e){if(e=e||{},"string"==typeof e.events)e.events=i.map(n.splitTokenList(e.events),n.trim);o.apply(this,arguments)}function t(){var e=this.resolveForm();if(e)e.validateAndSubmit()}var i=require("underscore"),n=require("esui/lib"),r=require("esui"),a=require("esui/Form"),o=require("esui/Extension");return e.prototype.type="AutoSubmit",e.prototype.form=null,e.prototype.events=["click","change","search"],e.prototype.resolveForm=function(){if(this.form)return this.target.viewContext.get(this.form);for(var e=this.target&&this.target.main&&this.target.main.parentNode;e;){var t=r.getControlByDOM(e);if(t&&t instanceof a)return t;e=e.parentNode}return null},e.prototype.activate=function(){i.each(this.events,function(e){this.target.on(e,t,this)},this),o.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){i.each(this.events,function(e){this.target.un(e,t,this)},this),o.prototype.inactivate.apply(this,arguments)},n.inherits(e,o),require("esui").registerExtension(e),e}),define("esui/validator/ValidityState",[],function(){function e(e,t){this.state=e,this.message=t||""}return e.prototype.getMessage=function(){return this.message},e.prototype.getState=function(){return this.state},e.prototype.setMessage=function(e){this.message=e},e.prototype.setState=function(e){this.state=e},e}),define("bat-ria/ui/Uploader",["require","esui/lib","esui/controlHelper","esui/validator/Validity","esui/validator/ValidityState","esui/InputControl","underscore","./Image","esui"],function(require){function e(e){o.apply(this,arguments)}function t(e){this.removeState("busy"),this.fire("complete"),this.addState("complete"),this.addState("uploaded");var t=i.g(n.getId(this,"button"));t.innerHTML=i.encodeHTML(this.overrideText);var a=i.g(n.getId(this,"label"));a.innerHTML=i.encodeHTML(this.getFileName()||e.url);var o=new r;if(this.showValidity(o),this.fire("change"),this.preview)this.showPreview(e);window.up=this}var i=require("esui/lib"),n=require("esui/controlHelper"),r=require("esui/validator/Validity"),a=require("esui/validator/ValidityState"),o=require("esui/InputControl"),s=require("underscore");require("./Image");var l=["auto","image","flash"];e.prototype.type="Uploader",e.defaultProperties={width:80,height:25,fileType:"image",method:"POST",text:"点击上传",overrideText:"重新上传",busyText:"正在上传...",completeText:"上传完成",unloadText:"未选择文件",preview:!0,autoUpload:!0},e.prototype.createMain=function(){return document.createElement("div")},e.prototype.filterAction=function(e){return e},e.prototype.initOptions=function(t){function n(e,t){r[e]=t,r.extraArgs.push({name:e,value:t})}var r={action:""};if(i.extend(r,e.defaultProperties,t),i.isInput(this.main)){if(!t.accept)r.accept=i.getAttribute(this.main,"accept");if(!t.name)r.name=this.main.name}else if("form"===this.main.nodeName.toLowerCase()){if(!t.action)r.action=this.main.action;if(!t.method&&i.hasAttribute(this.main,"method"))r.method=this.main.method}if("string"==typeof r.accept)r.accept=r.accept.split(",");if("false"===r.autoUpload)r.autoUpload=!1;r.extraArgs=[];var a=[];if(r.args)if("string"==typeof r.args)a=r.args.split("&"),s.each(a,function(e){if(e=e.split("="),2===e.length)n(e[0],e[1])});else if("object"==typeof r.args)for(var o in r.args)n(o,r.args[o]);if(!r.hasOwnProperty("title")&&this.main.title)r.title=this.main.title;this.setProperties(r)},e.prototype.initStructure=function(){if("form"!==this.main.nodeName.toLowerCase())n.replaceMain(this);if(this.callbackName=n.getGUID(""),!window.esuiShowUploadResult)window.esuiShowUploadResult={};window.esuiShowUploadResult[this.callbackName]=i.bind(this.showUploadResult,this);var e=n.getStateClasses(this,"input-container").join(" "),t=n.getStateClasses(this,"indicator").join(" "),r=n.getStateClasses(this,"button").join(" "),a=n.getStateClasses(this,"label").join(" "),o=n.getId(this,"iframe"),l=['<div id="'+n.getId(this,"input-container")+'" ','class="'+e+'">','<span id="'+n.getId(this,"button")+'" ','class="'+r+'">',"</span>",'<input type="hidden" name="callback" ',"value=\"parent.esuiShowUploadResult['"+this.callbackName+"']\" ","/>",'<input type="file" ','id="'+n.getId(this,"input")+'" ','size="1" ','name="'+(this.dataKey?this.dataKey:"filedata")+'" ',"/>",'<input type="hidden" name="type" ','value="'+this.typeIndex+'"',"/>"];if(this.extraArgs)s.each(this.extraArgs,function(e){l.push('<input type="hidden" name="'+e.name+'" ','value="'+e.value+'"',"/>")});l.push("</div>",'<div id="'+n.getId(this,"indicator-wrapper")+'"','class="'+t+'">','<span id="'+n.getId(this,"indicator")+'">',"</span>","</div>",'<div id="'+n.getId(this,"label")+'"','class="'+a+'">'+this.unloadText+"</div>",'<iframe id="'+o+'" name="'+o+'"',' src="about:blank"></iframe>'),this.main.innerHTML=l.join("");var u=document.createElement("form");u.className=this.helper.getPartClassName("form"),u.id=n.getId(this,"form"),u.setAttribute("enctype","multipart/form-data"),u.target=o,document.body.appendChild(u);var A=i.g(n.getId(this,"input"));n.addDOMEvent(this,A,"change",function(){if(""!=A.value)this.receiveFile()})},e.prototype.repaint=n.createRepaint(o.prototype.repaint,{name:["method","action"],paint:function(e,t,i){var n=e.helper.getPart("form");n.method=t,n.action=e.filterAction(i)}},{name:["text","overrideText"],paint:function(e,t,r){var a=i.g(n.getId(e,"button")),o=e.hasState("uploaded")?i.encodeHTML(r):i.encodeHTML(t);a.innerHTML=o}},{name:["busyText","completeText"],paint:function(e,t,r){var a=i.g(n.getId(e,"indicator")),o=e.hasState("busy")?i.encodeHTML(t):i.encodeHTML(r);a.innerHTML=o}},{name:"accept",paint:function(e,t){var r=i.g(n.getId(e,"input"));if(t)i.setAttribute(r,"accept",t.join(","));else i.removeAttribute(r,"accept")}},{name:["disabled","readOnly"],paint:function(e,t,r){var a=i.g(n.getId(e,"input"));a.disabled=t,a.readOnly=r}},{name:["width","height"],paint:function(e,t,r){var a=t+"px",o=r+"px";e.main.style.height=o;var s=i.g(n.getId(e,"input-container"));s.style.width=a,s.style.height=o;var l=i.g(n.getId(e,"button"));l.style.lineHeight=o;var u=i.g(n.getId(e,"indicator-wrapper"));u.style.width=a;var A=i.g(n.getId(e,"indicator"));A.style.lineHeight=o;var B=i.g(n.getId(e,"label"));B.style.lineHeight=o}},{name:"rawValue",paint:function(e,i){if(i){var n=e.fileType;e.fileInfo={url:i,type:n},t.call(e,e.fileInfo),e.removeState("complete")}}});var u={image:{".jpg":!0,".jpeg":!0,".gif":!0,".bmp":!0,".tif":!0,".tiff":!0,".png":!0},flash:{".flv":!0,".swf":!0}};return e.prototype.checkFileFormat=function(e){if(this.accept){var t=e.split(".");t="."+t[t.length-1].toLowerCase();for(var i=!1,n=0;n<this.accept.length;n++){var r=this.accept[n].toLowerCase();if(r===t){i=!0;break}if("*"===r.slice(-1)[0]){var a=r.split("/")[0],o=u[a];if(o&&o.hasOwnProperty(t)){i=!0;break}}}if(!i){var s=this.acceptErrorMessage||"仅接受以下文件格式："+this.accept.join(",");this.notifyFail(s)}return i}else return!0},e.prototype.submit=function(){this.showUploading();var e=this.helper.getPart("input-container"),t=this.helper.getPart("form");t.appendChild(e),t.submit(),this.main.insertBefore(e,this.main.firstChild)},e.prototype.receiveFile=function(){var e=i.g(n.getId(this,"input")),t=e.value;if(this.checkFileFormat(t))if(this.fire("receive"),this.autoUpload)this.submit()},e.prototype.showUploading=function(){this.removeState("complete"),this.addState("busy");var e=i.g(n.getId(this,"indicator"));e.innerHTML=i.encodeHTML(this.busyText)},e.prototype.showUploadResult=function(e){var t=e.result;if(e.success===!1||"false"===e.success)this.notifyFail(e.message);else if(t){if(!e.hasOwnProperty("type"))e.result.type=this.fileType;else if("number"==typeof e.type)e.result.type=l[e.result.type];this.fileInfo=t,this.rawValue=t.url||t.previewUrl||"",this.notifyComplete(e.result)}},e.prototype.notifyFail=function(e){this.fire("fail",e),e=e.upload||"上传失败";var t=new r,i=new a(!1,e);t.addState("upload",i),this.showValidity(t),this.removeState("busy"),this.reset()},e.prototype.notifyComplete=function(e){t.call(this,e);var r=i.g(n.getId(this,"indicator"));r.innerHTML=i.encodeHTML(this.completeText),this.timer=setTimeout(i.bind(this.removeState,this,"complete"),1e3)},e.prototype.showPreview=function(e){if(!e)e=this.fileInfo;if(this.previewContainer){var t=this.viewContext.get(this.previewContainer);if(!t)return;var i={imageType:e?e.type:this.fileType||"auto",url:this.getPreviewUrl(),width:e?e.width:null,height:e?e.height:null};t.setProperties(i)}},e.prototype.getRawValueProperty=e.prototype.getRawValue,e.prototype.getFileName=function(e){var t,r=i.g(n.getId(this,"input"));if(e)t=e;else t=r.value;return t.split("\\").pop()||""},e.prototype.getFileWidth=function(){return this.fileInfo?this.fileInfo.width:-1},e.prototype.getFileHeight=function(){return this.fileInfo?this.fileInfo.height:-1},e.prototype.getPreviewUrl=function(){return this.fileInfo?this.fileInfo.previewUrl||this.fileInfo.url:""},e.prototype.getSessionToken=function(){return""},e.prototype.reset=function(){var e=i.g(n.getId(this,"input"));e.value=""},e.prototype.dispose=function(){var e=this.helper.getPart("form");i.removeNode(e),delete window.esuiShowUploadResult[this.callbackName],o.prototype.dispose.apply(this,arguments)},i.inherits(e,o),require("esui").register(e),e}),define("esui/ControlCollection",["require","underscore"],function(require){function e(){this.length=0}var t=require("underscore");return e.prototype.splice=Array.prototype.splice,e.prototype.add=function(e){var i=t.indexOf(this,e);if(0>i)[].push.call(this,e)},e.prototype.remove=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return void[].splice.call(this,t,1)},e.prototype.each=function(e,i){t.each(this,function(t,n){e.call(i||t,t,n,this)})},e.prototype.invoke=function(e){var i=[this];return i.push.apply(i,arguments),t.invoke.apply(t,i)},t.each(["enable","disable","setDisabled","show","hide","toggle","addChild","removeChild","set","setProperties","addState","removeState","toggleState","on","off","fire","dispose","destroy","setViewContext","render","repaint","appendTo","insertBefore"],function(t){e.prototype[t]=function(){var e=[t];e.push.apply(e,arguments);var i=this.invoke.apply(this,e);return i&&i[0]}}),t.each(["isDisabled","isHidden","hasState","get","getCategory","getChild","getChildSafely"],function(t){e.prototype[t]=function(){var e=this[0];return e?e[t].apply(e,arguments):void 0}}),e}),define("esui/ViewContext",["require","./ControlCollection","./lib","./SafeWrapper"],function(require){function e(e){o.apply(this,arguments),this.name=e}function t(e,t){o.prototype.add.call(t,e)}function i(e,t){o.prototype.remove.call(t,e)}function n(e){var t=e.get("group");return t?t.split(/[\t\r\n ]/):[]}function r(){return"vt"+s++}function a(e){if(this.controls={},this.groups={},e=e||r(),l.hasOwnProperty(e)){for(var t=1,i=e+"-";l.hasOwnProperty(i+t);)t++;e=i+t}this.id=e,l[this.id]=this}var o=require("./ControlCollection");require("./lib").inherits(e,o),e.prototype.add=void 0,e.prototype.remove=void 0,e.prototype.disposeGroup=function(){for(var e=0;e<this.length;e++)delete this[e];this.length=0};var s=8587523,l={};a.get=function(e){return l[e]||null},a.prototype.add=function(e){var i=this.controls[e.id];if(i){if(i===e)return;i.setViewContext(null)}this.controls[e.id]=e;for(var r=n(e),a=0;a<r.length;a++){var o=r[a];if(o){var s=this.getGroup(o);t(e,s)}else;}e.setViewContext(this)},a.prototype.remove=function(e){delete this.controls[e.id];for(var t=n(e),r=0;r<t.length;r++){var a=t[r];if(a){var o=this.getGroup(a);i(e,o)}else;}e.setViewContext(null)},a.prototype.get=function(e){return this.controls[e]},a.prototype.getControls=function(){return require("./lib").extend({},this.controls)};var u=require("./SafeWrapper");return a.prototype.getSafely=function(e){var t=this.get(e);if(!t)t=new u,t.id=e,t.viewContext=this;return t},a.prototype.getGroup=function(t){if(!t)throw new Error("name is unspecified");var i=this.groups[t];if(!i)i=this.groups[t]=new e(t);return i},a.prototype.clean=function(){for(var e in this.controls)if(this.controls.hasOwnProperty(e)){var t=this.controls[e];if(t.dispose(),t.viewContext&&t.viewContext===this)this.remove(t)}for(var i in this.groups)if(this.groups.hasOwnProperty(i))this.groups[i].disposeGroup(),this.groups[i]=void 0},a.prototype.dispose=function(){this.clean(),delete l[this.id]},a}),define("esui/main",["require","./lib","./ViewContext","./ControlCollection"],function(require){function e(e,t){if("function"==typeof e){var i=e.prototype.type;if(i in t)throw new Error(i+" is exists!");t[i]=e}}function t(e,t,i){var n=i[e];if(n)return delete t.type,new n(t);else return null}var i=require("./lib"),n={};n.version="3.1.0-beta.6";var r=require("./ViewContext"),a=new r("default");n.getViewContext=function(){return a};var o={uiPrefix:"data-ui",extensionPrefix:"data-ui-extension",customElementPrefix:"esui",instanceAttr:"data-ctrl-id",viewContextAttr:"data-ctrl-view-context",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state"};n.config=function(e){i.extend(o,e)},n.getConfig=function(e){return o[e]},n.parseAttribute=function(e,t){if(!e)return{};for(var n={},r=0,a=0;a<e.length;){for(;a<e.length&&":"!==e.charAt(a);)a++;if(a>=e.length)break;var o=i.trim(e.slice(r,a));for(a++,r=a;a<e.length&&";"!==e.charAt(a);)a++;for(var s=a+1;s<e.length;){var l=e.charAt(s);if(";"===l)a=s;if(":"===l)break;s++}var u=i.trim(e.slice(r,a));n[o]=t?t(u):u,a++,r=a}return n},n.getControlByDOM=function(e){if(!e)return null;var t,i=n.getConfig,a=e.getAttribute(i("instanceAttr")),o=e.getAttribute(i("viewContextAttr"));if(a&&o&&(t=r.get(o)))return t.get(a);else return null};var s={};n.register=function(t){e(t,s)},n.create=function(e,i){return t(e,i,s)},n.get=function(e){return a.get(e)},n.getSafely=function(e){return a.getSafely(e)};var l=require("./ControlCollection");n.wrap=function(){for(var e=new l,t=0;t<arguments.length;t++)e.add(arguments[t]);return e},n.init=function(e,t){function i(e){function t(e){return e.toUpperCase()}for(var i=1,n=e.length;n>i;i++)e[i]=e[i].replace(/^[a-z]/,t);return e.join("")}function r(e,t){for(var i in t)if(!(i in e))e[i]=t[i]}function a(e,t,a){if(0===t.length)r(e,n.parseAttribute(a,s));else e[i(t)]=s(a)}e=e||document.body,t=t||{};for(var s=t.valueReplacer||function(e){return e},l=e.getElementsByTagName("*"),u=[],A=0,B=l.length;B>A;A++)if(1===l[A].nodeType)u.push(l[A]);for(var c=n.getConfig("uiPrefix"),C=n.getConfig("extensionPrefix"),D=n.getConfig("customElementPrefix"),d=c.length,f=C.length,h=t.properties||{},E=[],A=0,B=u.length;B>A;A++){var p=u[A];if(!p.getAttribute(o.instanceAttr)){for(var F=p.attributes,m={},g={},H=0,G=F.length;G>H;H++){var I=F[H],v=I.name,y=I.value;if(0===v.indexOf(C)){var J=v.slice(f+1).split("-"),L=J[0];J.shift();var M=g[L];if(!M)M=g[L]={};a(M,J,y)}else if(0===v.indexOf(c)){var J=v.length===d?[]:v.slice(d+1).split("-");a(m,J,y)}}var b=m.type;if(!b){var N=p.nodeName.toLowerCase(),K=N.indexOf(D);if(0===K){var x;x=N.replace(/-(\S)/g,function(e,t){return t.toUpperCase()}),x=x.slice(D.length),m.type=x,b=x}}if(b){var P=m.id,_=P?h[P]:{};for(var O in _)m[O]=s(_[O]);var T=m.extensions||[];m.extensions=T;for(var O in g){var M=g[O],S=n.createExtension(M.type,M);S&&T.push(S)}m.viewContext=t.viewContext,m.renderOptions=t,m.main=p;var w=n.create(b,m);if(w){if(E.push(w),t.parent)t.parent.addChild(w);try{w.render()}catch(R){var k=new Error('Render control "'+(w.id||"anonymous")+'" of type '+w.type+" failed because: "+R.message);throw k.actualError=R,k}}}}else;}return E};var u={};n.registerExtension=function(t){e(t,u)},n.createExtension=function(e,i){return t(e,i,u)};var A={};n.attachExtension=function(e,t){A[e]=t},n.createGlobalExtensions=function(){var e=[];for(var t in A)if(A.hasOwnProperty(t)){var i=n.createExtension(t,A[t]);i&&e.push(i)}return e};var B=[];return n.registerRule=function(e,t){B.push({type:e,priority:t}),B.sort(function(e,t){return e.priority-t.priority})},n.createRulesByControl=function(e){for(var t=[],i=0;i<B.length;i++){var n=B[i].type;if(null!=e.get(n.prototype.type))t.push(new n)}return t},n}),define("esui/helper/children",["require","underscore","../main"],function(require){var e=require("underscore"),t=require("../main"),i={};return i.initChildren=function(i,n){i=i||this.control.main,n=e.extend({},this.control.renderOptions,n),n.viewContext=this.control.viewContext,n.parent=this.control,t.init(i,n)},i.disposeChildren=function(){var t=this.control.children.slice();e.each(t,function(e){e.dispose()}),this.children=[],this.childrenIndex={}},i.disableChildren=function(){e.each(this.control.children,function(e){e.dispose()})},i.enableChildren=function(){e.each(this.control.children,function(e){e.enable()})},i}),define("esui/Helper",["require","underscore","./helper/children","./helper/dom","./helper/event","./helper/html","./helper/life","./helper/template"],function(require){function e(e){this.control=e}var t=require("underscore");return t.extend(e.prototype,require("./helper/children"),require("./helper/dom"),require("./helper/event"),require("./helper/html"),require("./helper/life"),require("./helper/template")),e}),define("esui/controlHelper",["require","./lib","./Helper","./painters","underscore","./Layer"],function(require){var e=require("./lib"),t=require("./Helper"),i={};i.getGUID=e.getGUID;var n=["initViewContext","initExtensions","isInStage","changeStage","dispose","beforeDispose","afterDispose","getPartClasses","addPartClasses","removePartClasses","getStateClasses","addStateClasses","removeStateClasses","getId","replaceMain","addDOMEvent","removeDOMEvent","clearDOMEvents"];i.createRepaint=require("./painters").createRepaint,require("underscore").each(n,function(e){i[e]=function(i){var n=i.helper||new t(i),r=[].slice.call(arguments,1);return n[e].apply(n,r)}}),i.extractValueFromInput=function(t,i){var n=t.main;if(e.isInput(n)){if(n.value&&!i.value)i.value=n.value;if(n.name&&!i.name)i.name=n.name;if(n.disabled&&(null===i.disabled||void 0===i.disabled))i.disabled=n.disabled;if(n.readOnly&&(null===i.readOnly||void 0===i.readOnly))i.readOnly=n.readonly||n.readOnly}};var r=i.layer={},a=require("./Layer");return r.create=a.create,r.getZIndex=a.getZIndex,r.moveToTop=a.moveToTop,r.moveTo=a.moveTo,r.resize=a.resize,r.attachTo=a.attachTo,r.centerToView=a.centerToView,i}),define("bat-ria/ui/Image",["require","esui/lib","esui/controlHelper","esui/Control","inf-i18n","esui"],function(require){function e(e){n.apply(this,arguments)}var t=require("esui/lib"),i=require("esui/controlHelper"),n=require("esui/Control"),r=require("inf-i18n");e.prototype.type="Image",e.defaultProperties={imageType:"auto"},e.prototype.createMain=function(){return document.createElement("figure")},e.prototype.initOptions=function(i){var n={};t.extend(n,e.defaultProperties,i),this.setProperties(n)},e.prototype.initStructure=function(){var e=[this.helper.getPartHTML("content","div"),this.helper.getPartBeginTag("footer","footer"),this.helper.getPartBeginTag("magnifier","span"),r("放大显示"),this.helper.getPartEndTag("magnifier","span"),this.helper.getPartEndTag("footer","footer")];this.main.innerHTML=e.join(""),this.helper.addDOMEvent("magnifier","click",this.displayFullSize)},e.prototype.repaint=i.createRepaint(n.prototype.repaint,{name:["url","width","height"],paint:function(e,t){if(!t)return void e.restoreInitialState();var i=e.getPreviewHTML();e.helper.getPart("content").innerHTML=i,e.removeState("empty")}}),e.prototype.restoreInitialState=function(){this.url=null,this.width=null,this.height=null;var e=this.helper.getPart("content");e.innerHTML="",this.addState("empty")},e.prototype.getActualImageType=function(){if("auto"!==this.imageType)return this.imageType;var e=/\.\w+$/.exec(this.url);if(!e)return null;var t=[0];if(".swf"===t&&".flv"===t)return"flash";else return"image"};var a=['<img src="${url}" ',"${widthAttribute} ${heightAttribute} />"];a=a.join("");var o=['<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ','align="middle" ',"${widthAttribute} ${heightAttribute}>",'<param name="allowScriptAccess" value="never">','<param name="quality" value="high">','<param name="wmode" value="transparent">','<param name="movie" value="${url}">','<embed wmode="transparent" src="${url}" ','quality="high" align="middle" allowScriptAccess="always" ',"${widthAttribute} ${heightAttribute} ",'type="application/x-shockwave-flash" />',"</object>"];return o=o.join(""),e.prototype.getPreviewHTML=function(){var e=this.getActualImageType();if(!e)return"<strong>"+r("无法预览该格式")+"</strong>";var i={url:this.url,widthAttribute:this.width?'width="'+this.width+'"':"",heightAttribute:this.height?'height="'+this.height+'"':""};if("image"===e)return t.format(a,i);else if("flash"===e)return t.format(o,i);else return"<strong>"+r("无法预览该格式")+"</strong>"},e.prototype.displayFullSize=function(){if(this.url){var e=this.helper.createPart("full-size-mask");document.body.appendChild(e);var t=this.helper.createPart("full-size-content");if(t.innerHTML=this.getPreviewHTML(),this.width&&this.height)t.style.top="50%",t.style.left="50%",t.style.marginLeft=-Math.round(this.width/2)+"px",t.style.marginTop=-Math.round(this.height/2)+"px";document.body.appendChild(t);var i=this.helper.createPart("full-size-close");i.innerHTML="×",document.body.appendChild(i),this.helper.addDOMEvent(e,"click",this.cancelFullSize),this.helper.addDOMEvent(i,"click",this.cancelFullSize)}},e.prototype.cancelFullSize=function(){var e=this.helper.getPart("full-size-mask");t.removeNode(e);var i=this.helper.getPart("full-size-content");t.removeNode(i);var n=this.helper.getPart("full-size-close");this.helper.clearDOMEvents(n),
t.removeNode(n)},t.inherits(e,n),require("esui").register(e),e}),define("er/permission",[],function(){var e={},t={add:function(t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if("object"==typeof n)this.add(n);else e[i]=n}},isAllow:function(t){return!!e[t]}};return t}),define("bat-ria/system/user",["require","underscore","er/permission","./auth"],function(require){var e=require("underscore"),t=require("er/permission"),i=require("./auth"),exports={init:function(i){if(i.visitor)this.visitor=i.visitor;if(i.adOwner)this.ader=i.adOwner;if(!i.visitor&&!i.adOwner)this.visitor=i;var n=this.visitor.auth;if(n)t.add(e.mapObject(n,function(e){return"none"!==e}))},getAuthMap:function(){var e=this.visitor&&this.visitor.auth;return e||null},getAuthType:function(e){return i.get(e,this.getAuthMap())},getAuth:function(e){var t=this.getAuthType(e);return{type:t,id:e,isReadOnly:t===i.AuthType.READONLY,isEditable:t===i.AuthType.EDITABLE,isVisible:t!==i.AuthType.NONE,isNone:t===i.AuthType.NONE}}};return exports}),define("bat-ria/api/system/constants",["require","underscore"],function(require){var e=require("underscore"),t={},i="_MAP",n="_DATASOURCE",exports={get:function(e){return t[e]},set:function(e,i){t[e]=i},remove:function(e){delete t[e]},getMap:function(e){return t[e+i]},getDatasource:function(e){return t[e+n]},init:function(r){e.extend(t,r),e.each(t,function(r,a){if(e.isArray(r)&&!e.contains(e.pluck(r,"v"),void 0)&&!e.contains(e.pluck(r,"l"),void 0)){var o=t[a+i]={},s=t[a+n]=[];e.each(r,function(t){o[t.v]=t.l,s.push(e.mapKey(t,{v:"value",l:"text"}))})}})}};return exports}),define("bat-ria/system/auth",["require","underscore"],function(require){var e=require("underscore"),t={},i={NONE:"none",EDITABLE:"editable",READONLY:"readonly",MIXED:"-"};t.AuthType=i;var n={rtoe:function(e){return e===i.READONLY?i.EDITABLE:e},rton:function(e){return e===i.READONLY?i.NONE:e},eton:function(e){return e===i.EDITABLE?i.NONE:e},ntor:function(e){return e===i.NONE?i.READONLY:e},up:function(e){return e===i.NONE?i.READONLY:i.EDITABLE},max:function(t){var n=i.NONE;return e.each(t,function(e){if(e===i.EDITABLE)return n=e,!1;else if(e===i.READONLY)n=e}),n},min:function(t){var n=i.EDITABLE;return e.each(t,function(e){if(e===i.NONE)return n=e,!1;else if(e===i.READONLY)n=e}),n}};return t.get=function(r,a){var o;if(/^\(.+\)$/.test(r))return t.get(r.substr(1,r.length-2),a);var s=[];if(/^(\w+):/.test(r)){var l=/^(?:(\w+):)(.+)$/,u=l.exec(r);if(!u)throw"Auth error: ["+r+"] is not a valid auth expression.";o=u[1];for(var A=u[2].replace(/^[\s,|]+|[\s,|]+$/g,""),B=[],c=0,C=0;C<A.length;C++){var D=A.charAt(C);if("("===D){if(0===c&&B.length)throw"Auth error: ["+r+"] is not a valid auth expression.";if(1===++c)continue}else if(")"===D){if(--c<=0){var d=B.join("");s.push(t.get(d,a).toUpperCase()),B=[];continue}}else if(0>=c&&(","===D||"|"===D||/\s/.test(D))){if(B.length)s.push(B.join("")),B=[];continue}B.push(D)}if(B.length)s.push(B.join(""));if(c>0)throw"Auth error: ["+r+"] brackets doesn't match."}else s=[e.trim(r)];var f=[];if(e.each(s,function(t){if(e.contains(e.keys(i),t))return f.push(i[t]),!0;var n=t.split(".");do{var r=a[n.join(".")];if(r)return f.push(r),!0;n.pop()}while(n.length);throw"Auth error: ["+t+"] not found."}),o)return n[o].call(null,f.length>1?f:f[0]);else return f[0]},t.permit=function(e,n){return t.get(e,n)!==i.NONE},t.registerFilter=function(e,t){n[e]=t},t}),define("bat-ria/mvc/rule",["require"],function(require){return{maxLength:20,mail:{maxLength:100,pattern:"^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"},description:{maxLength:4e3},mobile:{pattern:"^(1(3|4|5|7|8)\\d{9})?$"},phone:{pattern:"(^((0\\d{2,3})-)(\\d{7,8})(-(\\d{3,}))?$)|(^(1(3|4|5|7|8)\\d{9})?$)"},url:{maxLength:1024,pattern:"^(?:https?|ftp|wap):\\/\\/.+$|^(?!(?:https?|ftp|wap):\\/\\/).+$"},nonNegativeInteger:{pattern:"^\\d+$"},positiveInteger:{pattern:"^[1-9][0-9]*$"},money:{pattern:"^\\d+(\\.\\d{1,2})?$"}}}),define("etpl/main",["require"],function(require){function e(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}function t(){this.raw=[],this.length=0}function i(){return"___"+J++}function n(e,t){var i=new Function;i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function r(e){return L[e]}function a(e){return'"'+e.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function o(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return"\\"+e})}function s(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,i){return t[i-0+1]})}function l(e){return e=e.replace(/^\s*\*/,""),s('gv({0},["{1}"])',a(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return"."+t}).split(".").join('","'))}function u(e,t,i,n,r,a){for(var o=i.length,s=e.split(t),l=0,u=[],A=0,B=s.length;B>A;A++){var c=s[A];if(A){var C=1;for(l++;;){var D=c.indexOf(i);if(0>D){u.push(l>1&&C?t:"",c);break}if(l=n?l-1:0,u.push(l>0&&C?t:"",c.slice(0,D),l>0?i:""),c=c.slice(D+o),C=0,0===l)break}if(0===l)r(u.join("")),a(c),u=[]}else c&&a(c)}if(l>0&&u.length>0)a(t),a(u.join(""))}function A(e,t,i){var n,r=[],o=t.options,s="",B="",c="",C="";if(i)s="ts(",B=")",c=N,C=K,n=o.defaultFilter;return u(e,o.variableOpen,o.variableClose,1,function(e){if(i&&e.indexOf("|")<0&&n)e+="|"+n;var a=e.indexOf("|"),o=(a>0?e.slice(0,a):e).replace(/^\s+/,"").replace(/\s+$/,""),u=a>0?e.slice(a+1):"",D=0===o.indexOf("*"),d=[D?"":s,l(o),D?"":B];if(u){u=A(u,t);for(var f=u.split("|"),h=0,E=f.length;E>h;h++){var p=f[h];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(p)){if(d.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)d.push(",",RegExp.$3);d.push(")")}}}r.push(c,d.join(""),C)},function(e){r.push(c,i?a(e):e,C)}),r.join("")}function B(e,t){this.value=e,this.engine=t}function c(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[]}function C(e,t){var i=e.stack,n=t?i.find(function(e){return e instanceof t}):i.bottom();if(n){for(var r;(r=i.top())!==n;){if(!r.autoClose)throw new Error(r.type+" must be closed manually: "+r.value);r.autoClose(e)}n.close(e)}return n}function D(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.master=RegExp.$3,this.name=RegExp.$1,c.call(this,e,t),this.blocks={}}function d(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,c.call(this,e,t),this.cloneProps=["name"]}function f(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,c.call(this,e,t),this.cloneProps=["name","state","blocks"],this.blocks={}}function h(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.expr=RegExp.$2,c.call(this,e,t),this.cloneProps=["name","expr"]}function E(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,c.call(this,e,t),this.cloneProps=["name","args"]}function p(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,c.call(this,e,t),this.cloneProps=["name","args"]}function F(e,t){var i=new RegExp(s("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",o(t.options.variableOpen),o(t.options.variableClose)),"i");if(!i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,c.call(this,e,t),this.cloneProps=["list","item","index"]}function m(e,t){c.call(this,e,t)}function g(e,t){m.call(this,e,t)}function H(e,t){c.call(this,e,t)}function G(e,t){t.target=e;var i=t.engine,n=e.name;if(i.targets[n])switch(i.options.namingConflict){case"override":i.targets[n]=e,t.targets.push(n);case"ignore":break;default:throw new Error("Target exists: "+n)}else i.targets[n]=e,t.targets.push(n)}function I(e,t){O[e]=t,t.prototype.type=e}function v(t){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(t),this.targets={},this.filters=e({},M)}function y(e,i){function n(){var e;if(D.length>0&&(e=D.join(""))){var t=new B(e,i);if(t.beforeAdd(A),l.top().addChild(t),D=[],i.options.strip&&A.current instanceof c)t.value=e.replace(/^[\x20\t\r]*\n/,"");A.current=t}}var r,a=i.options.commandOpen,o=i.options.commandClose,s=i.options.commandSyntax,l=new t,A={engine:i,targets:[],stack:l,target:null},D=[];return u(e,a,o,0,function(e){var t=s.exec(e);if(t&&(r=O[t[2].toLowerCase()])&&"function"==typeof r){n();var l=A.current;if(i.options.strip&&l instanceof B)l.value=l.value.replace(/\r?\n[\x20\t]*$/,"\n");if(t[1])l=C(A,r);else{if(l=new r(t[3],i),"function"==typeof l.beforeOpen)l.beforeOpen(A);l.open(A)}A.current=l}else if(!/^\s*\/\//.test(e))D.push(a,e,o);r=null},function(e){D.push(e)}),n(),C(A),A.targets}t.prototype={push:function(e){this.raw[this.length++]=e},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(e){for(var t=this.length;t--;){var i=this.raw[t];if(e(i))return i}}};var J=178245,L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},M={html:function(e){return e.replace(/[&<>"']/g,r)},url:encodeURIComponent,raw:function(e){return e}},b='var r="";',N="r+=",K=";",x="return r;";if("undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)b="var r=[],ri=0;",N="r[ri++]=",x='return r.join("");';B.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;if(!e||t.strip&&/^\s*$/.test(e))return"";else return A(e,this.engine,1)},clone:function(){return this}},c.prototype={addChild:function(e){this.children.push(e)},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this)},close:function(e){if(e.stack.top()===this)e.stack.pop()},getRendererBody:function(){for(var e=[],t=this.children,i=0;i<t.length;i++)e.push(t[i].getRendererBody());return e.join("")},clone:function(){for(var e=this.constructor,t=new e(this.value,this.engine),i=0,n=this.children.length;n>i;i++)t.addChild(this.children[i].clone());for(var i=0,n=this.cloneProps.length;n>i;i++){var r=this.cloneProps[i];t[r]=this[r]}return t}};var P='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';n(D,c),n(d,c),n(f,c),n(h,c),n(E,c),n(p,c),n(F,c),n(m,c),n(g,m),n(H,m);var _={READING:1,READED:2,APPLIED:3,READY:4};f.prototype.applyMaster=D.prototype.applyMaster=function(e){function t(e){var n=e.children;if(n instanceof Array)for(var r=0,a=n.length;a>r;r++){var o=n[r];if(o instanceof d&&i[o.name])o=n[r]=i[o.name];t(o)}}if(this.state>=_.APPLIED)return 1;var i=this.blocks,n=this.engine.targets[e];if(n&&n.applyMaster(n.master))return this.children=n.clone().children,t(this),this.state=_.APPLIED,1;else return void 0},D.prototype.isReady=function(){function e(n){for(var r=0,a=n.children.length;a>r;r++){var o=n.children[r];if(o instanceof f){var s=t.targets[o.name];i=i&&s&&s.isReady(t)}else if(o instanceof c)e(o)}}if(this.state>=_.READY)return 1;var t=this.engine,i=1;if(this.applyMaster(this.master))return e(this),i&&(this.state=_.READY),i;else return void 0},D.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function("data","engine",[P,b,this.getRendererBody(),x].join("\n")),t=this.engine;return this.renderer=function(i){return e(i,t)},this.renderer}return null},D.prototype.open=function(e){C(e),c.prototype.open.call(this,e),this.state=_.READING,G(this,e)},h.prototype.open=p.prototype.open=function(e){e.stack.top().addChild(this)},d.prototype.open=function(e){c.prototype.open.call(this,e),e.stack.find(function(e){return e.blocks}).blocks[this.name]=this},g.prototype.open=function(e){var t=new H;t.open(e);var i=C(e,m);i.addChild(this),e.stack.push(this)},H.prototype.open=function(e){var t=C(e,m);t.addChild(this),e.stack.push(this)},f.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,c.prototype.open.call(this,e),this.state=_.READING},p.prototype.close=h.prototype.close=function(){},f.prototype.close=function(e){c.prototype.close.call(this,e),this.state=_.READED},D.prototype.close=function(e){c.prototype.close.call(this,e),this.state=this.master?_.READED:_.APPLIED,e.target=null},f.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var i in this.blocks)this.target.blocks[i]=this.blocks[i];this.blocks={},this.close(e)},p.prototype.beforeOpen=f.prototype.beforeOpen=h.prototype.beforeOpen=F.prototype.beforeOpen=E.prototype.beforeOpen=d.prototype.beforeOpen=m.prototype.beforeOpen=B.prototype.beforeAdd=function(e){if(!e.stack.bottom()){var t=new D(i(),e.engine);t.open(e)}},f.prototype.getRendererBody=function(){return this.applyMaster(this.name),c.prototype.getRendererBody.call(this)},p.prototype.getRendererBody=function(){return s("{0}engine.render({2},{{3}}){1}",N,K,a(this.name),A(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(e,t,i){return(t||"")+a(i)+":"}))},h.prototype.getRendererBody=function(){if(this.expr)return s("v[{0}]={1};",a(this.name),A(this.expr,this.engine));else return""},m.prototype.getRendererBody=function(){return s("if({0}){{1}}",A(this.value,this.engine),c.prototype.getRendererBody.call(this))},H.prototype.getRendererBody=function(){return s("}else{{0}",c.prototype.getRendererBody.call(this))},F.prototype.getRendererBody=function(){return s('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',i(),A(this.list,this.engine),a(this.index||i()),a(this.item),i(),i(),c.prototype.getRendererBody.call(this))},E.prototype.getRendererBody=function(){var e=this.args;return s("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",b,x,N,K,c.prototype.getRendererBody.call(this),a(this.name),e?","+A(e,this.engine):"")};var O={};I("target",D),I("block",d),I("import",f),I("use",p),I("var",h),I("for",F),I("if",m),I("elif",g),I("else",H),I("filter",E),v.prototype.config=function(t){e(this.options,t)},v.prototype.compile=v.prototype.parse=function(e){if(e){var t=y(e,this);if(t.length)return this.targets[t[0]].getRenderer()}return new Function('return ""')},v.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer();else return void 0},v.prototype.render=function(e,t){var i=this.getRenderer(e);if(i)return i(t);else return""},v.prototype.addFilter=function(e,t){if("function"==typeof t)this.filters[e]=t};var T=new v;return T.Engine=v,T}),define("etpl",["etpl/main"],function(e){return e}),define("bat-ria/tpl",["require","er/ajax","etpl"],function(require){function e(e){for(var t=[],i={},n=/data-ui-type="(\w+)"/g,r=n.exec(e);r;){var o=r[1];if(!i[o]){i[o]=!0;var s=(a[o]||"ui")+"/";t.push(s+o)}r=n.exec(e)}return t}function t(e){for(var t=[],i={},n=/data-ui-extension-[^-]+-type="(\w+)"/g,r=n.exec(e);r;){var a=r[1];if(!i[a]){i[a]=!0;var s=(o[a]||"ui/extension")+"/";t.push(s+a)}r=n.exec(e)}return t}var i=require("er/ajax"),n=require("etpl"),r=n,a={BoxGroup:"esui",Button:"esui",Calendar:"esui",CheckBox:"esui",CommandMenu:"esui",Crumb:"esui",Dialog:"esui",Form:"esui",Frame:"esui",Image:"./ui",Label:"esui",Link:"esui",MonthView:"esui",Pager:"esui",Panel:"esui",RangeCalendar:"esui",Region:"esui",RichCalendar:"esui",Schedule:"esui",SearchBox:"esui",Select:"esui",Sidebar:"esui",Tab:"esui",Table:"esui",TextBox:"esui",TextLine:"esui",Tip:"esui",TipLayer:"esui",Tree:"esui",Uploader:"./ui",Validity:"esui",Wizard:"esui",ActionPanel:"ef",ActionDialog:"ef"},o={AutoSort:"esui/extension",Command:"esui/extension",CustomData:"esui/extension",TableEdit:"esui/extension",AutoSubmit:"./ui/extension",TableTip:"./ui/extension",TableSubrow:"esui/extension",WordCount:"./ui/extension"},s={setupTemplateEngine:function(e){r=e||n},load:function(n,a,o){function s(i){r.parse(i);var n=e(i),a=t(i),s=n.concat(a);require(s,function(){o(i)})}if(/\.html?$/.test(n)){var l={method:"GET",url:a.toUrl(n),cache:!0,dataType:"text"};i.request(l).then(s)}else require([n],s)},registerControl:function(e){var t=e.lastIndexOf("/"),i=e.substring(0,t),n=e.substring(t+1);a[n]=i},registerExtension:function(e){var t=e.lastIndexOf("/"),i=e.substring(0,t),n=e.substring(t+1);o[n]=i}};return s}),define("inf-ria/tpl",["exports","module","bat-ria/tpl","babel-runtime/helpers/interop-require-default","./ui/pkg"],function(exports,module,e,t,i){var n=t["default"](e),r=t["default"](i);r["default"].init(),module.exports=n["default"]}),define("bat-ria/mvc/ListView",["require","inf-ria/tpl!common/tpl","./BaseView","underscore","moment","esui/Button","er/util"],function(require){function e(){n.apply(this,arguments)}function t(e){var t=e.target.get("page");this.fire("pagechange",{page:t})}function i(e){var t={action:e.target.getData("type"),selectedItems:this.get("table").getSelectedItems()};this.fire("batchmodify",t)}require("inf-ria/tpl!common/tpl");var n=require("./BaseView"),r=require("underscore"),a=require("moment");return e.prototype.uiProperties={},e.prototype.uiEvents={},e.prototype.submitSearch=function(e){var t=this.getSearchArgs();if("sort"===e.type)t.orderBy=e.field.field,t.order=e.order;this.fire("search",{args:t})},e.prototype.getSearchArgs=function(){var e=this.get("filter"),t=e?e.getData():{};t.order=this.model.get("order"),t.orderBy=this.model.get("orderBy");var i=this.get("keyword");if(i)t.keyword=r.trim(i.getValue());var n=this.get("range");if(n)n=n.getValue().split(","),t.startTime=a(n[0]).format("YYYYMMDDHHmmss"),t.endTime=a(n[1]).format("YYYYMMDDHHmmss");var o=this.get("pager");if(o)t.pageSize=o.get("pageSize");return t},e.prototype.updateBatchButtonStatus=function(){var e=this.getSelectedItems();this.getGroup("batch").set("disabled",r.isEmpty(e)),this.getGroup("batch").set("readOnly",r.isEmpty(e))},e.prototype.getSelectedItems=function(){var e=this.get("table");return e?e.getSelectedItems():[]},e.prototype.bindEvents=function(){var e=this.get("pager");if(e)e.on("pagesizechange",this.submitSearch,this),e.on("pagechange",t,this);var a=this.get("table");if(a)a.on("select",this.updateBatchButtonStatus,this),a.on("sort",this.submitSearch,this);var o=this.get("filter");if(o)o.on("submit",this.submitSearch,this);r.each(this.getGroup("batch"),function(e){if(e instanceof require("esui/Button"))e.on("click",i,this)},this),n.prototype.bindEvents.apply(this,arguments)},e.prototype.enterDocument=function(){n.prototype.enterDocument.apply(this,arguments),this.updateBatchButtonStatus(),this.adjustLayout()},e.prototype.adjustLayout=function(){var e=this.get("table");if(e)e.adjustWidth()},require("er/util").inherits(e,n),e}),define("bat-ria/mvc/ListModel",["require","underscore","er/util","./BaseModel","../util","er/URL"],function(require){function e(e){n.call(this,e)}var t=require("underscore"),i=require("er/util"),n=require("./BaseModel"),r=require("../util");return i.inherits(e,n),e.prototype.listRequester,e.prototype.defaultArgs={},e.prototype.getDefaultArgs=function(){return t.defaults(this.defaultArgs||{},{pageNo:1})},e.prototype.defaultDatasource={listPage:{retrieve:function(e){return e.listRequester(e.getQuery()).then(function(e){var t=e;return t.tableData=t.result,delete t.result,t}).fail(function(){return{pageNo:1,pageSize:10,tableData:[],totalCount:0}})},dump:!0},time:{retrieve:function(e){var t=e.get("startTime"),i=e.get("endTime");if(t&&i)return{time:r.getTimeRange(t,i)};var n=e.defaultTimeRange;if(n)return{time:n};else return{}},dump:!0},urlTemplate:function(e){var i=e.get("url"),n=i.getPath(),r=i.getQuery();delete r.pageNo;var a="#"+require("er/URL").withQuery(n,r),o=t.isEmpty(r)?"~":"&";return a+=o+"pageNo=${page}"}},e.prototype.defaultTimeRange=null,e.prototype.getQuery=function(){var e=this.get("url"),i=e.getQuery(),n=this.defaultTimeRange;if(n)n=r.getTimeRange(n.begin,n.end,{outputFormat:"YYYYMMDDHHmmss",beginKey:"startTime",endKey:"endTime"});else n={};return i=t.chain(i).defaults(this.getDefaultArgs()).defaults(n).extend(this.getExtraQuery()).value(),this.filterQuery(i)},e.prototype.getExtraQuery=function(){return{}},e.prototype.filterQuery=function(e){if("string"==typeof e.pageNo)e.pageNo=parseInt(e.pageNo,10);if("string"==typeof e.pageSize)e.pageSize=parseInt(e.pageSize,10);return e},e}),define("er/URL",["require","./util","eoo"],function(require){var e=require("./util"),exports={};exports.constructor=function(i,n,r){i=i||"/",n=n||"",r=r||"~",this.toString=function(){return n?i+r+n:i},this.getPath=function(){return i},this.getSearch=function(){return n};var a=null;this.getQuery=function(i){if(!a)a=t.parseQuery(n);return i?a[i]:e.mix({},a)}},exports.compare=function(e){if("string"==typeof e)e=t.parse(e);var i={},n=this.getPath(),r=e.getPath();if(n===r)i.path=!1;else i.path={key:"path",self:n,other:r};var a=this.getQuery(),o=e.getQuery(),s={},l=[],u=!1;for(var A in a)if(a.hasOwnProperty(A)){var B=a[A],c=o[A];if(B!==c){u=!0;var C={key:A,self:B,other:c};l.push(C),s[A]=C}}for(var A in o)if(o.hasOwnProperty(A)&&!a.hasOwnProperty(A)){u=!0;var C={key:A,self:void 0,other:o[A]};l.push(C),s[A]=C}return i.queryDifference=l,i.query=u?s:!1,i};var t=require("eoo").create(exports);return t.parse=function(i,n){var r={querySeparator:"~"};n=e.mix(r,n);var a=i.indexOf(n.querySeparator);if(a>=0)return new t(i.slice(0,a),i.slice(a+1),n.querySeparator);else return new t(i,"",n.querySeparator)},t.withQuery=function(i,n,r){i+="";var a={querySeparator:"~"};r=e.mix(a,r);var o=i.indexOf(r.querySeparator)<0?r.querySeparator:"&",s=t.serialize(n),l=i+o+s;return t.parse(l,r)},t.parseQuery=function(e){for(var t=e.split("&"),i={},n=0;n<t.length;n++){var r=t[n];if(r){var a=r.indexOf("="),o=0>a?decodeURIComponent(r):decodeURIComponent(r.slice(0,a)),s=0>a?!0:decodeURIComponent(r.slice(a+1));if(i.hasOwnProperty(o)){if(s!==!0)i[o]=[].concat(i[o],s)}else i[o]=s}else;}return i},t.serialize=function(e){if(!e)return"";var t="";for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n)}return t.slice(1)},t.empty=new t,t}),define("bat-ria/mvc/ListAction",["require","./BaseAction","er/util","underscore","er/URL"],function(require){function e(){n.apply(this,arguments)}function t(e){this.performSearch(e.args)}function i(e){var t=this.fire("pagechange",{page:e.page});if(!t.isDefaultPrevented()){var i=this.getURLForPage(e.page);this.redirect(i)}}var n=require("./BaseAction"),r=require("er/util"),a=require("underscore"),o=require("er/URL");return r.inherits(e,n),e.prototype.performSearch=function(e){var t=this.model.getDefaultArgs(),i=this.model.getExtraQuery();e=a.chain(e).purify(t).extend(i).value();var n=this.fire("search",{args:e});if(!n.isDefaultPrevented())this.redirectForSearch(e)},e.prototype.redirectForSearch=function(e){var t=this.model.get("url").getPath(),i=o.withQuery(t,e);this.redirect(i,{force:!0})},e.prototype.getURLForPage=function(e){var t=this.context.url,i=t.getPath(),n=t.getQuery();if(n.pageNo=e,1===e)n=a.omit(n,"pageNo");return require("er/URL").withQuery(i,n).toString()},e.prototype.initBehavior=function(){n.prototype.initBehavior.apply(this,arguments),this.view.on("search",t,this),this.view.on("pagesizechange",t,this),this.view.on("pagechange",i,this)},e.prototype.adjustLayout=function(){this.view.adjustLayout()},e}),define("esui/validator/Validity",["require","underscore"],function(require){function e(){this.states=[],this.stateIndex={},this.customMessage="",this.customValidState=null}var t=require("underscore");return e.prototype.addState=function(e,t){if(this.stateIndex[e]){if(this.stateIndex[e]===t)return;for(var i=0;i<this.states.length;i++)if(this.states[i]===this.stateIndex[e]){this.states.splice(i,1);break}}this.states.push(t),this.stateIndex[e]=t},e.prototype.getState=function(e){return this.stateIndex[e]||null},e.prototype.getStates=function(){return this.states.slice()},e.prototype.getCustomMessage=function(){return this.customMessage},e.prototype.setCustomMessage=function(e){this.customMessage=e},e.prototype.setCustomValidState=function(e){this.customValidState=e},e.prototype.isValid=function(){return t.all(this.getStates(),function(e){return e.getState()})},e.prototype.getValidState=function(){return this.customValidState||(this.isValid()?"valid":"invalid")},e}),define("bat-ria/mvc/FormView",["require","er/util","./BaseView","underscore","esui/validator/Validity","esui/validator/ValidityState"],function(require){function e(){a.apply(this,arguments)}function t(){this.fire("reset")}function i(){this.fire("cancel")}function n(){this.fire("submit")}var r=require("er/util"),a=require("./BaseView"),o=require("underscore");return r.inherits(e,a),e.prototype.formId="form",e.prototype.getFormData=function(){var e=this.get(this.formId);return o.extend({},e?e.getData():{},this.getExtraFormData())},e.prototype.getExtraFormData=function(){return{}},e.prototype.rollbackFormData=function(){this.setFormData(this.model.getDefaultData())},e.prototype.setFormData=function(e){var t=this.get(this.formId),i=t.getInputControls();o.each(i,function(t,i){var n=t.name;if(e)if(o.has(e,n))t.setValue(e[n])}),this.setExtraFormData(e)},e.prototype.setExtraFormData=function(e){},e.prototype.notifyErrors=function(e){if("object"==typeof e){var t=require("esui/validator/Validity"),i=require("esui/validator/ValidityState"),n=this.get(this.formId);o.each(e,function(e,r){var a=new i(!1,e),o=new t;o.addState("invalid",a);var s=n.getInputControls(r)[0];if(s&&"function"==typeof s.showValidity)s.showValidity(o)})}},e.prototype.bindEvents=function(){var e=this,r=e.get(e.formId);if(r){r.on("submit",n,e);var s=r.getInputControls();o.each(s,function(t){t.on("beforevalidate",e.enableSubmit,e),t.on("invalid",e.disableSubmit,e)}),r.on("invalid",e.disableSubmit,e)}var l=e.get("reset");if(l)l.on("click",t,e);var u=e.get("cancel");if(u)u.on("click",i,e);a.prototype.bindEvents.apply(e,arguments)},e.prototype.disableSubmit=function(){if(this.viewContext)this.getGroup("submit").disable()},e.prototype.enableSubmit=function(){if(this.viewContext)this.getGroup("submit").enable()},e}),define("eoo/oo",["require"],function(require){function e(){return e.create.apply(e,arguments)}function t(t){var i=function(){return i.prototype.constructor.apply(this,arguments)};a.prototype=t.prototype;var n=i.prototype=new a;if(n.$self=i,!("$super"in n))n.$super=e.prototype.$super;return i.$superClass=t,i}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e,t){for(var n in e)i(e,n)&&t(e[n],n,e);if(l)for(var r=u.length-1;r>-1;--r){var a=u[r];i(e,a)&&t(e[a],a,e)}}function r(){return this.prototype.constructor.toString()}var a=function(){},o="__eooName__",s="__eooOwner__";e.create=function(i,a){if(a=a||{},i=i||e,"object"==typeof i)a=i,i=e;var l=t(i),u=l.prototype;return n(a,function(e,t){if("function"==typeof e)e[o]=t,e[s]=l;u[t]=e}),l.toString=r,l},e["static"]="function"==typeof Object.create?Object.create:function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return a.prototype=e,new a},e.toString=function(){return"function Class() { [native code] }"},e.prototype={constructor:function(){},$self:e,$superClass:Object,$super:function(e){var t=this.$super.caller,i=t[o],n=t[s].$superClass,r=n.prototype[i];if("function"!=typeof r)throw new TypeError("Call the super class's "+i+", but it is not a function!");return r.apply(this,e)}};var l=!{toString:1}.propertyIsEnumerable("toString"),u=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];return e}),define("eoo/main",["require","./oo","./defineAccessor"],function(require){var e=require("./oo");return e.defineAccessor=require("./defineAccessor"),e}),define("eoo",["eoo/main"],function(e){return e}),define("er/ajax",["require","./assert","./util","./Deferred","eoo","mini-event/EventTarget"],function(require){function e(e,t){for(var i=e?encodeURIComponent(e):"",n=[],r=0;r<t.length;r++){var a=t[r];n[r]=this.serializeData("",a)}return i?i+"="+n.join(","):n.join(",")}function t(e,t){if(1===arguments.length)t=e,e="";if(null==t)t="";var i=this.serializeData.getKey,n=e?encodeURIComponent(e):"",r=Object.prototype.toString.call(t);switch(r){case"[object Array]":return this.serializeArray(e,t);case"[object Object]":var a=[];for(var o in t){var s=i(o,e),l=this.serializeData(s,t[o]);a.push(l)}return a.join("&");default:return n?n+"="+encodeURIComponent(t):encodeURIComponent(t)}}var i="_";t.getKey=function(e,t){return t?t+"."+e:e};var exports={};exports.constructor=function(){this.hooks={serializeData:t,serializeArray:e},this.config={cache:!1,timeout:0,charset:""}},exports.request=function(e){if("function"==typeof this.hooks.beforeExecute)this.hooks.beforeExecute(e);var t=require("./assert");t.hasProperty(e,"url","url property is required");var n={method:"POST",data:{},startTime:(new Date).getTime(),cache:this.config.cache,timeout:this.config.timeout,charset:this.config.charset},r=require("./util");e=r.mix(n,e);var a=require("./Deferred"),o=new a;if("function"==typeof this.hooks.beforeCreate){var s=this.hooks.beforeCreate(e,o);if(s===!0){var l=o.promise;return l.abort=function(){},l.setRequestHeader=function(){},l}}var u=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");r.mix(u,e.xhrFields);var l=o.promise,A={abort:function(){u.onreadystatechange=null;try{u.abort()}catch(e){}if(!l.status)l.status=0;l.readyState=u.readyState,l.responseText="",l.responseXML="",o.reject(l)},setRequestHeader:function(e,t){u.setRequestHeader(e,t)},getAllResponseHeaders:function(){return u.getAllResponseHeaders()},getResponseHeader:function(e){return u.getResponseHeader(e)},getRequestOption:function(t){return e[t]}};r.mix(l,A);var B={xhr:l,options:e};l.then(r.bind(this.fire,this,"done",B),r.bind(this.fire,this,"fail",B));var c=function(){if(4===u.readyState){var t=l.status||u.status;if(1223===t)t=204;if(l.status=l.status||t,l.readyState=u.readyState,l.responseText=u.responseText,l.responseXML=u.responseXML,"function"==typeof this.hooks.afterReceive)this.hooks.afterReceive(l,e);if(200>t||t>=300&&304!==t)return void o.reject(l);var i=u.responseText;if("json"===e.dataType)try{i=r.parseJSON(i)}catch(n){return l.error=n,void o.reject(l)}if("function"==typeof this.hooks.afterParse)try{i=this.hooks.afterParse(i,l,e)}catch(n){return l.error=n,void o.reject(l)}o.resolve(i)}};u.onreadystatechange=r.bind(c,this);var C=e.method.toUpperCase(),D={};if("GET"===C)r.mix(D,e.data);if(e.cache===!1)D[i]=+new Date;var d=this.hooks.serializeData("",D,"application/x-www-form-urlencoded"),f=e.url;if(d){var h=f.indexOf("?")>=0?"&":"?";f+=h+d}if(u.open(C,f,!0),"function"==typeof this.hooks.beforeSend)this.hooks.beforeSend(l,e);if("GET"===C)u.send();else{var E=e.contentType||"application/x-www-form-urlencoded",d=this.hooks.serializeData("",e.data,E,l);if(e.charset)E+=";charset="+e.charset;u.setRequestHeader("Content-Type",E),u.send(d)}if(e.timeout>0){var p=function(){this.fire("timeout",{xhr:l,options:e}),l.status=408,l.abort()},F=setTimeout(r.bind(p,this),e.timeout);l.ensure(function(){clearTimeout(F)})}return l},exports.get=function(e,t,i){var n={method:"GET",url:e,data:t,cache:i||this.config.cache};return this.request(n)},exports.getJSON=function(e,t,i){var n={method:"GET",url:e,data:t,dataType:"json",cache:i||this.config.cache};return this.request(n)},exports.post=function(e,t,i){var n={method:"POST",url:e,
data:t,dataType:i||"json"};return this.request(n)},exports.log=function(e,t){var i=new Image,n=window.ER_LOG_POOL||(window.ER_LOG_POOL={}),r=+new Date;n[r]=i,i.onload=i.onerror=i.onabort=function(){i.onload=i.onerror=i.onabort=null,n[r]=null,i=null};var a=this.hooks.serializeData("",t,"application/x-www-form-urlencoded");if(a){var o=e.indexOf("?")>=0?":":"?";e+=o+a}i.src=e};var n=require("eoo").create(require("mini-event/EventTarget"),exports),r=new n;return r.Ajax=n,r}),define("er/datasource",["require","./util","./ajax","./permission"],function(require){var e={};return e.constant=function(e){return function(){return e}},e.remote=function(e,t){return function(i){if(t=require("./util").mix({url:e,dataType:"json"},t),"function"==typeof t.data)t.data=t.data(i);var n=require("./ajax");return n.request(t)}},e.permission=function(e){return function(){var t=require("./permission");return t.isAllow(e)}},e.defaultValue=function(e,t){return function(i,n){if(!n.name&&!t)throw new Error("No property name specified to determine whether value exists in this model");var r=t||n.name;return i.hasValue(r)?i.get(r):e}},e.convertTo=function(e,t){return function(i,n){if(!n.name&&!t)throw new Error("No property name specified to convert");var r=t||n.name,a=i.get(r);switch(e){case"number":return parseInt(a,10);case"string":return a+"";case"boolean":return!!a;default:return a}}},e}),define("bat-ria/mvc/FormModel",["require","./BaseModel","underscore","er/util","er/datasource","./rule"],function(require){function e(){t.apply(this,arguments)}var t=require("./BaseModel"),i=require("underscore"),n=require("er/util"),r=require("er/datasource");return n.inherits(e,t),e.prototype.formRequester=null,e.prototype.submitRequester=null,e.prototype.defaultArgs={},e.prototype.getDefaultArgs=function(){return this.defaultArgs},e.prototype.defaultDatasource={rule:r.constant(require("./rule")),formData:{retrieve:function(e){if(e.get("formData"))return e.get("formData");else if(e.formRequester)return e.formRequester(e.getDefaultArgs());else return{}},dump:!1}},e.prototype.getDefaultData=function(){return this.get("formData")},e.prototype.getSubmitData=function(e){var t=i.extend(e,this.getExtraData());return t=this.filterData(t)},e.prototype.getExtraData=function(){return{}},e.prototype.filterData=function(e){return e},e.prototype.isFormDataChanged=function(e){return!1},e.prototype.validateSubmitData=function(e){return!0},e}),define("bat-ria/mvc/FormAction",["require","er/util","underscore","er/Deferred","./BaseAction","inf-i18n"],function(require){function e(){r.apply(this,arguments)}var t=require("er/util"),i=require("underscore"),n=require("er/Deferred"),r=require("./BaseAction"),a=require("inf-i18n");return t.inherits(e,r),e.prototype.toastMessage="",e.prototype.getToastMessage=function(e){var t=this.toastMessage;if(null==t)return"";if(t)return i.template(t,e||{});else return a("保存成功")},e.prototype.handleSubmitResult=function(e){var t=this.getToastMessage(e);if(t)this.view.showToast(t,{messageType:"normal"});var i=this.fire("aftersubmit");if(!i.isDefaultPrevented()&&"function"==typeof this.redirectAfterSubmit)this.redirectAfterSubmit(e)},e.prototype.backLocation=null,e.prototype.redirectAfterSubmit=function(e){this.back(this.backLocation,!0)},e.prototype.handleSubmitError=function(e){if(e&&e.field)this.view.notifyErrors(e.field);this.view.showToast("保存失败",{messageType:"error"})},e.prototype.handleLocalValidationErrors=function(e){if("object"==typeof e)return this.view.notifyErrors(e),e;else return void 0},e.prototype.reset=function(){var e=this.fire("reset");if(!e.isDefaultPrevented())this.view.rollbackFormData()},e.prototype.cancelConfirmTitle="确认取消编辑",e.prototype.getCancelConfirmTitle=function(){return this.cancelConfirmTitle},e.prototype.cancelConfirmMessage="取消编辑将不保留已经填写的数据，确定继续吗？",e.prototype.getCancelConfirmMessage=function(){return this.cancelConfirmMessage},e.prototype.cancel=function(){var e=this.fire("submitcancel"),t=this.fire("aftercancel");if(!t.isDefaultPrevented()&&!e.isDefaultPrevented())this.redirectAfterCancel()},e.prototype.cancelEdit=function(){var e=this.view.getFormData();if(this.model.isFormDataChanged(e)){var t={title:this.getCancelConfirmTitle(),content:this.getCancelConfirmMessage()};this.view.waitConfirm(t).then(i.bind(this.cancel,this))}else this.cancel()},e.prototype.redirectAfterCancel=function(){this.back(this.backLocation,!0)},e.prototype.submit=function(e){var t=this.model.validateSubmitData(e);if(t!==!0){var r=this.handleLocalValidationErrors(t);return n.rejected(r)}var a=this.fire("beforesubmit");if(!a.isDefaultPrevented())try{return this.model.submitRequester(e).then(i.bind(this.handleSubmitResult,this),i.bind(this.handleSubmitError,this))}catch(o){return n.rejected(o)}},e.prototype.submitEdit=function(){this.view.disableSubmit();var e=this.view.getFormData(),t=this.model.getSubmitData(e),i=this;require("er/Deferred").when(this.submit(t)).ensure(function(){if(i.view&&"function"==typeof i.view.enableSubmit)i.view.enableSubmit()})},e.prototype.initBehavior=function(){r.prototype.initBehavior.apply(this,arguments),this.view.on("submit",this.submitEdit,this),this.view.on("cancel",this.cancelEdit,this),this.view.on("reset",this.reset,this)},e}),define("promise/util",["require"],function(require){var e={},t=Function.prototype.bind;if("function"==typeof t)e.bind=function(e){return t.apply(e,[].slice.call(arguments,1))};else e.bind=function(e,t){var i=[].slice.call(arguments,2);return function(){var n=i.concat([].slice.call(arguments));return e.apply(t,n)}};return e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.getThen=function(e){return e&&("object"==typeof e||"function"==typeof e)&&e.then},e}),define("promise/Promise",["require","./util","./PromiseCapacity"],function(require){function e(n){if("function"!=typeof n)throw new TypeError("Promise resolver undefined is not a function");if(!(this instanceof e))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var r=new i(this);this.then=t.bind(r.then,r),n(t.bind(r.resolve,r),t.bind(r.reject,r))}var t=require("./util"),i=require("./PromiseCapacity");return e.prototype.then=function(e,t){},e.prototype["catch"]=function(e){return this.then(null,e)},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,i){i(t)})},e.all=function(e){var i=this;if(!t.isArray(e))throw new TypeError("You must pass an array to all.");return new i(function(i,n){function r(e){return function(t){a(e,t)}}function a(e,t){if(o[e]=t,0===--s)i(o)}var o=[],s=e.length,l=null;if(0===s)i([]);for(var u=0,A=e.length;A>u;u++){l=e[u];var B=t.getThen(l);if("function"==typeof B)l.then(r(u),n);else a(u,l)}})},e.race=function(e){var i=this;if(!t.isArray(e))throw new TypeError("You must pass an array to race.");return new i(function(i,n){for(var r=0,a=e.length;a>r;r++){var o=e[r],s=t.getThen(o);if("function"==typeof s)s.call(o,i,n);else i(o)}})},e}),define("promise/main",["require","./Promise","./enhance","./then","./hook"],function(require){var e=require("./Promise"),t=require("./enhance"),i=require("./then"),n=require("./hook");return n(i(t(e)))}),define("promise",["promise/main"],function(e){return e}),define("inf-i18n/main",["exports","module","underscore","babel-runtime/helpers/interop-require-default","promise","./util","./config","./requester"],function(exports,module,e,t,i,n,r,a){function o(e){if("object"==typeof CONSOLE_LOCALE)return CONSOLE_LOCALE[e]||e;var t=o.getDatasource()||{};return t[e]||e}var s=t["default"](e),l=t["default"](i),u=t["default"](n),A=t["default"](r),B=t["default"](a),c=navigator.languages&&navigator.languages[0]?navigator.languages[0]:navigator.language||navigator.userLanguage,C=c?u["default"].determineLanguage(c.toLowerCase()):A["default"].defaultLanguage;o.activate=function(){var e=arguments.length<=0||void 0===arguments[0]?C:arguments[0];return o.setLanguage(e)},o.setLanguage=function(e){var t=e.toLowerCase();if(C=u["default"].determineLanguage(t)||C,"object"==typeof CONSOLE_LOCALE)return l["default"].resolve();else return o.load().then(function(e){return o.setDatasource(e)})},o.getLanguage=function(){return C},o.load=function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(C===A["default"].defaultLanguage)return l["default"].resolve();var t=o.getDatasource();if(!e&&t)return l["default"].resolve(t);var i=B["default"][A["default"].sourceType];return i?i(u["default"].format(A["default"].url,C)):l["default"].resolve()};var D={};o.setDatasource=function(e){D[C]=s["default"].extend({},D[C],e)},o.getDatasource=function(){return D[C]},module.exports=o}),define("inf-i18n",["inf-i18n/main"],function(e){return e}),define("bat-ria/mvc/BaseView",["require","er/util","inf-i18n","underscore","ef/UIView","er/View","er/Deferred","esui/Dialog","../etpl","esui/Toast","esui","mini-event/Event"],function(require){function e(){r.apply(this,arguments)}var t=require("er/util"),i=require("inf-i18n"),n=require("underscore"),r=require("ef/UIView"),a=require("er/View"),o=require("er/Deferred"),s=require("esui/Dialog"),l=require("../etpl");t.inherits(e,r),e.prototype.getTemplateName=function(){var e=r.prototype.getTemplateName.apply(this,arguments);if(this.model&&this.model.get("isChildAction"))e+="_child";return e};var u;return e.prototype.showToast=function(e,t){if(e){if(!u){var i=require("esui/Toast"),r={disposeOnHide:!1,autoShow:!1};u=new i(r),u.render()}var a={content:e};a=n.extend(a,t);var o=new RegExp("(ui-toast-alert|ui-toast-error)","g");return u.main.className=u.main.className.replace(o,""),u.messageType="",u.setProperties(a),u.show(),u}},e.prototype.popDialog=function(e){var t=document.createElement("div");document.body.appendChild(t);var i={width:600,needFoot:!0,draggable:!0,closeOnHide:!1,autoClose:!0,main:t,viewContext:this.viewContext};e=n.defaults({},e,i);var r=require("esui"),a=r.create("Dialog",e);if(a.render(),e.needFoot){var o=a.getFoot().getChild("btnOk"),l=a.getFoot().getChild("btnCancel"),u=n.escape(e.okText||""),A=n.escape(e.cancelText||"");o.setContent(u||s.OK_TEXT),l.setContent(A||s.CANCEL_TEXT)}return a.show(),a},e.prototype.waitDialog=function(e,t){function i(e,t,i){e.fire(t),e.hide()}if(!(e instanceof s))t=e,e=this.popDialog.call(this,t);else if(!e.isShow)e.show();if(t.needFoot||e.getFoot()){var r=e.getFoot().getChild("btnOk"),a=e.getFoot().getChild("btnCancel"),l=n.escape(t.okText||""),u=n.escape(t.cancelText||"");r.setContent(l||s.OK_TEXT),a.setContent(u||s.CANCEL_TEXT),r.un("click"),a.un("click"),r.on("click",n.partial(i,e,"ok")),a.on("click",n.partial(i,e,"cancel"))}var A=new o;return e.un("ok"),e.un("cancel"),e.on("ok",A.resolver.resolve),e.on("cancel",A.resolver.reject),A.promise},e.prototype.showDialog=function(e,t){function i(e,t,i){e.fire(t)}function r(t){if(!(t===!1||t instanceof require("mini-event/Event")&&t.isDefaultPrevented()))e&&e.hide()}if(!(e instanceof s))t=e,e=this.popDialog.call(this,t);else if(!e.isShow)e.show();if(t=t||{},t.needFoot||e.getFoot()){var a=e.getFoot().getChild("btnOk"),l=e.getFoot().getChild("btnCancel"),u=n.escape(t.okText||""),A=n.escape(t.cancelText||"");a.setContent(u||s.OK_TEXT),l.setContent(A||s.CANCEL_TEXT),a.un("click"),l.un("click"),a.on("click",n.partial(i,e,"ok")),l.on("click",n.partial(i,e,"cancel"))}var B=function(){},c=n.bind(t.onOk||B,e),C=n.bind(t.onCancel||B,e);return e.un("ok"),e.un("cancel"),e.on("ok",function(){o.when(c()).then(r,n.partial(r,!1))}),e.on("cancel",function(){o.when(C()).then(r,n.partial(r,!1))}),e},e.prototype.waitAlert=function(){var e=this.alert.apply(this,arguments),t=new o;return e.on("ok",t.resolver.resolve),t.promise},e.prototype.waitAlertExt=function(){var e=this.alert.apply(this,arguments),t=new o,i=arguments[0];if(i)e.setContent(i.content||"");return e.on("ok",t.resolver.resolve),t.promise},e.prototype.waitConfirm=function(){var e=this.confirm.apply(this,arguments),t=new o;return e.on("ok",t.resolver.resolve),e.on("cancel",t.resolver.reject),t.promise},e.prototype.waitActionDialog=function(){var e=this.popActionDialog.apply(this,arguments),t=new o;return e.on("actionloaded",t.resolver.resolve),e.on("actionloadfail",t.resolver.reject),e.on("actionloadabort",t.resolver.reject),e.on("actionloaded",function(){e.resize(),e.main.style.visibility="visible",e.main.style.opacity="1"}),t.promise},e.prototype.waitActionDialogExt=function(){return this.waitActionDialog.apply(this,arguments).then(function(e){var t=e.target,i=t.getAction(),n=null,r=null,a=i.view.get("form");if(a)a.on("aftervalidate",function(e){!e.isValid&&n&&n.enable()}),a.on("aftermanualvalidate",function(e){!e.isValid&&n&&n.enable()});var o=t.getChild("foot");if(o){if(n=o.getChild("btnOk"),r=o.getChild("btnCancel"),n)n.on("click",function(){a&&a.validateAndSubmit()});if(r)r.on("click",function(){t.fire("cancel"),t.dispose()})}return e}).fail(function(e){var t=e.target;if(t)t.hide();return e})},e.prototype.getTemplateData=function(){var e=a.prototype.getTemplateData.apply(this,arguments),t=e.get;return e.get=function(e){if(/^i18n\./g.test(e))return i(e.substr(5));else return t(e)},e},e.prototype.templateRender=function(e,t){return l.render(e,t)},e}),define("er/assert",[],function(){if(window.DEBUG){var e=function(e,t){if(!e)throw new Error(t)};return e.has=function(t,i){e(null!=t,i)},e.equals=function(t,i,n){e(t===i,n)},e.hasProperty=function(t,i,n){e(null!=t[i],n)},e.lessThan=function(t,i,n){e(i>t,n)},e.greaterThan=function(t,i,n){e(t>i,n)},e.lessThanOrEquals=function(t,i,n){e(i>=t,n)},e.greaterThanOrEquals=function(t,i,n){e(t>=i,n)},e}else{var e=function(){};return e.has=e,e.equals=e,e.hasProperty=e,e.lessThan=e,e.greaterThan=e,e.lessThanOrEquals=e,e.greaterThanOrEquals=e,e}}),define("er/Deferred",["require","./util","./assert","eoo","mini-event/EventTarget"],function(require){function e(e){function t(){for(var t=0;t<i.length;t++){var n=i[t];try{n.apply(e.promise,e._args)}catch(r){}}}if("pending"!==e.state){var i="resolved"===e.state?e._doneCallbacks.slice():e._failCallbacks.slice();if(e.syncModeEnabled)t();else r(t);e._doneCallbacks=[],e._failCallbacks=[]}}function t(e,t,i,n){return function(){if("function"==typeof i){var r=t.resolver;try{var o=i.apply(e.promise,arguments);if(a.isPromise(o))o.then(r.resolve,r.reject);else r.resolve(o)}catch(s){a.fire("exception",{deferred:e,args:[s],reason:s}),r.reject(s)}}else t[n].apply(t,e._args)}}var i=require("./util"),n=require("./assert"),r="function"==typeof window.setImmediate?function(e){window.setImmediate(e)}:function(e){window.setTimeout(e,0)},exports={};exports.constructor=function(){this.state="pending",this._args=null,this._doneCallbacks=[],this._failCallbacks=[],this.promise={done:i.bind(this.done,this),fail:i.bind(this.fail,this),ensure:i.bind(this.ensure,this),then:i.bind(this.then,this)},this.promise.promise=this.promise,this.resolver={resolve:i.bind(this.resolve,this),reject:i.bind(this.reject,this)}},exports.syncModeEnabled=!1,exports.resolve=function(){if("pending"===this.state)this.state="resolved",this._args=[].slice.call(arguments),a.fire("resolve",{deferred:this,args:this._args,reason:this._args[0]}),e(this)},exports.reject=function(){if("pending"===this.state)this.state="rejected",this._args=[].slice.call(arguments),a.fire("reject",{deferred:this,args:this._args,reason:this._args[0]}),e(this)},exports.done=function(e){return this.then(e)},exports.fail=function(e){return this.then(null,e)},exports.ensure=function(e){return this.then(e,e)},exports.then=function(i,n){var r=new a;return r.syncModeEnabled=this.syncModeEnabled,this._doneCallbacks.push(t(this,r,i,"resolve")),this._failCallbacks.push(t(this,r,n,"reject")),e(this),r.promise};var a=require("eoo").create(exports);return require("mini-event/EventTarget").enable(a),a.isPromise=function(e){return e&&"function"==typeof e.then},a.all=function(){function e(e){o--,n.greaterThanOrEquals(o,0,"workingCount should be positive");var t=[].slice.call(arguments,1);if(t.length<=1)t=t[0];if(l[e]=t,0===o)u[s].apply(u,l)}function t(){s="reject",e.apply(this,arguments)}var r=[].concat.apply([],arguments),o=r.length;if(!o)return a.resolved();for(var s="resolve",l=[],u=new a,A=0;A<r.length;A++){var B=r[A];B.then(i.bind(e,B,A),i.bind(t,B,A))}return u.promise},a.resolved=function(){var e=new a;return e.resolve.apply(e,arguments),e.promise},a.rejected=function(){var e=new a;return e.reject.apply(e,arguments),e.promise},a.when=function(e){if(a.isPromise(e))return e;var t=new a;return t.syncModeEnabled=!0,t.resolve(e),t.promise},a.require=function(e){var t=new a;return window.require(e,t.resolver.resolve),t.promise.abort=t.resolver.reject,t.promise},a}),define("er/Model",["require","./util","./Deferred","eoo","mini-event/EventTarget"],function(require){function e(e,t){function i(i){if(t.dump)e.fill(i,u);else e.set(t.name,i,u);return{success:!0,name:t.name,options:t,value:i}}function n(e){return{success:!1,name:t.name,options:t,error:e}}try{var r=t.retrieve(e,t);if(l.isPromise(r)){if("function"==typeof r.abort)e.addPendingWorker(r);return r.then(i,function(t){t=n(t);try{var r=e.handleError(t);return i(r)}catch(a){if(a.success===!1)throw a;else throw n(a)}})}else{var a=i(r);return l.resolved(a)}}catch(o){var s=n(o);return l.rejected(s)}}function t(e,t){for(var i=l.resolved(),r=0;r<t.length;r++){var a=t[r],o=s.bind(n,null,e,a);i=i.then(o)}return i}function i(e,t){var i=[];for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];if("function"==typeof a)a={retrieve:a,name:r};else if("function"==typeof a.retrieve)a=s.mix({name:r},a);i.push(n(e,a))}return l.all(i)}function n(n,r){if(!r)return l.resolved();if("function"==typeof r){var a={retrieve:r,dump:!0};return e(n,a)}if(r instanceof Array)return t(n,r);if("function"==typeof r.retrieve)return e(n,r);else return i(n,r)}function r(e,t){for(var i=0;i<e.pendingWorkers.length;i++)if(e.pendingWorkers[i]===t)return void e.pendingWorkers.splice(i,1)}function a(){function e(e){var t={success:!1,name:"$prepare",options:{},error:e};throw t}try{var t=this.prepare();if(l.isPromise(t))return t.fail(e);else return t}catch(i){e(i)}}function o(e,t,i){var n=e.store.hasOwnProperty(t)?"change":"add",r=e.store[t];if(e.store[t]=i,r!==i)return{type:n,name:t,oldValue:r,newValue:i};else return null}var s=require("./util"),l=require("./Deferred"),u={silent:!0},exports={};exports.constructor=function(e){if(this.store={},this.pendingWorkers=[],e)this.fill(e,u);this.initialize()},exports.initialize=s.noop,exports.addPendingWorker=function(e){this.pendingWorkers.push(e),e.ensure(s.bind(r,null,this,e))},exports.datasource=null,exports.getDatasource=function(){return this.datasource},exports.load=function(){try{var e=this.getDatasource(),t=n(this,e);return t.then(s.bind(a,this))}catch(i){return l.rejected(i)}},exports.prepare=s.noop,exports.get=function(e){return this.store[e]},exports.set=function(e,t,i){i=i||{};var n=o(this,e,t);if(n&&!i.silent){var r={changes:[n]};this.fire("change",r)}return t},exports.fill=function(e,t){t=t||{};var i=[];for(var n in e)if(e.hasOwnProperty(n)){var r=o(this,n,e[n]);if(r)i.push(r)}if(i.length&&!t.silent){var a={changes:i};this.fire("change",a)}return e},exports.remove=function(e,t){if(this.store.hasOwnProperty(e)){t=t||{};var i=this.store[e];if(delete this.store[e],!t.silent){var n={changes:[{type:"remove",name:e,oldValue:i,newValue:void 0}]};this.fire("change",n)}return i}},exports.getAsModel=function(e){var t=this.get(e);if(!t||"[object Object]"!=={}.toString.call(t))return new A;else return new A(t)},exports.dump=function(){return s.mix({},this.store)},exports.has=function(e){return this.store.hasOwnProperty(e)},exports.hasValue=function(e){return this.has(e)&&null!=this.store[e]},exports.hasReadableValue=function(e){return this.hasValue(e)&&""!==this.store[e]},exports.valueOf=function(){return this.dump()},exports.clone=function(){return new A(this.store)},exports.handleError=function(e){throw e},exports.dispose=function(){if(this.pendingWorkers){for(var e=0;e<this.pendingWorkers.length;e++){var t=this.pendingWorkers[e];if("function"==typeof t.abort)try{t.abort()}catch(i){}}this.pendingWorkers=null}};var A=require("eoo").create(require("mini-event/EventTarget"),exports);return A}),define("ef/UIModel",["require","er/Model","eoo"],function(require){function e(e){return e+="",1===e.length?"0"+e:e}var t=require("er/Model"),exports={},i={date:function(t){return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())},dateRange:function(e){return i.date(e.begin)+","+i.date(e.end)},time:function(t){return i.date(t)+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},timeRange:function(e){return i.time(e.begin)+","+i.time(e.end)}};exports.formatters={},exports.set=function(e,t,i){if(this.formatters.hasOwnProperty(e))t=this.formatters[e](t);this.$super([e,t,i])},exports.fill=function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&this.formatters.hasOwnProperty(i)){var n=this.formatters[i],r=e[i];e[i]=n(r)}this.$super(arguments)},exports.getPart=function(e){if("[object Array]"!==Object.prototype.toString.call(e))e=[].slice.call(arguments);for(var t={},i=0;i<e.length;i++){var n=e[i];t[n]=this.get(n)}return t};var n=require("eoo").create(t,n);return n.formatters=i,n}),define("bat-ria/mvc/BaseModel",["require","underscore","er/util","ef/UIModel"],function(require){function e(e){n.call(this,e)}var t=require("underscore"),i=require("er/util"),n=require("ef/UIModel");return i.inherits(e,n),e.prototype.mergeDefaultDatasource=function(){if(!this.datasource)return void(this.datasource=this.defaultDatasource);var e=t.deepClone(this.datasource)||{},i=t.deepClone(this.defaultDatasource);if(t.isArray(i))if(t.isArray(e))e=i.concat(e);else e=i.push(e);else if(t.isArray(e)){if(!t.contains(e,i))e.unshift(i)}else t.defaults(e,i);this.datasource=e},e.prototype.load=function(){return this.mergeDefaultDatasource(),n.prototype.load.apply(this,arguments)},e}),define("er/util",[],function(){var e=+new Date,t={};t.guid=function(){return"er"+e++},t.mix=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i){for(var n in i)if(i.hasOwnProperty(n))e[n]=i[n]}else;}return e};var i=Function.prototype.bind;t.bind=i?function(e){return i.apply(e,[].slice.call(arguments,1))}:function(e,t){var i=[].slice.call(arguments,2);return function(){var n=i.concat([].slice.call(arguments));return e.apply(t,n)}},t.noop=function(){};var n=!{toString:1}.propertyIsEnumerable("toString");t.inherits=function(e,t){var i=function(){};i.prototype=t.prototype;var r=new i,a=e.prototype;e.prototype=r;for(var o in a)r[o]=a[o];if(n){if(a.hasOwnProperty("toString"))r.toString=a.toString;if(a.hasOwnProperty("valueOf"))r.valueOf=a.valueOf}return e.prototype.constructor=e,e},t.parseJSON=function(e){if(!e)return void 0;if(window.JSON&&"function"==typeof JSON.parse)return JSON.parse(e);else return new Function("return ("+e+");")()};var r=/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g;return t.trim=function(e){return e.replace(r,"")},t.encodeHTML=function(e){return e+="",e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},t.getElement=function(e){if("string"==typeof e)e=document.getElementById(e);return e},t}),define("bat-ria/mvc/BaseAction",["require","er/util","underscore","er/Action","er/Model","er/events","./BaseModel","./Performance"],function(require){function e(){n.apply(this,arguments)}var t=require("er/util"),i=require("underscore"),n=require("er/Action"),r=require("er/Model"),a=require("er/events"),o=require("./BaseModel"),s=require("./Performance");return t.inherits(e,n),e.prototype.initialize=function(){function e(e){i.mark("t_"+e.type)}function t(t){e(t),i.measure("ACTION_MODEL_LOADED_TIME","t_beforemodelload","t_modelloaded"),i.measure("ACTION_DOM_RENDER_TIME","t_beforerender","t_rendered"),i.measure("ACTION_EVENT_BIND_TIME","t_rendered","t_entercomplete");var n=i.getEntriesByType("measure");a.fire("afterenteraction",{measures:n,context:this.context}),i.clearMarks(),i.clearMeasures()}var i=new s;this.once("beforemodelload",e),this.once("modelloaded",e),this.once("beforerender",e),this.once("rendered",e),this.once("entercomplete",t)},e.prototype.createModel=function(e){var t=n.prototype.createModel.apply(this,arguments);if(!(t instanceof r)&&i.isEmpty(t))t=new o(e);return t},e.prototype.initBehavior=function(){n.prototype.initBehavior.apply(this,arguments),this.model.on("change",this.syncModelToView,this)},e.prototype.syncModelToView=function(e){if(!this.disposed)i.some(e.changes,function(e){return this.syncModelToViewIterator(e)},this)},e.prototype.syncModelToViewIterator=i.noop,e.prototype.back=function(e,t){if("boolean"==typeof arguments[0])t=e,e=null;else e=e||"";var i=this.context&&this.context.referrer,n=i||e;if(n)this.redirect(n);else if(t)window.history.back()},e}),define("moment/moment",["require","exports","module"],function(require,exports,module){(function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e,t){function i(){if(Be.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn)console.warn("Deprecation warning: "+e)}var n=!0;return u(function(){if(n)i(),n=!1;return t.apply(this,arguments)},t)}function r(e,t){return function(i){return c(e.call(this,i),t)}}function a(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function o(){}function s(e){I(e),u(this,e)}function l(e){var t=E(e),i=t.year||0,n=t.quarter||0,r=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,A=t.millisecond||0;this._milliseconds=+A+1e3*u+6e4*l+36e5*s,this._days=+o+7*a,this._months=+r+3*n+12*i,this._data={},this._bubble()}function u(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];if(t.hasOwnProperty("toString"))e.toString=t.toString;if(t.hasOwnProperty("valueOf"))e.valueOf=t.valueOf;return e}function A(e){var t,i={};for(t in e)if(e.hasOwnProperty(t)&&He.hasOwnProperty(t))i[t]=e[t];return i}function B(e){if(0>e)return Math.ceil(e);else return Math.floor(e)}function c(e,t,i){for(var n=""+Math.abs(e),r=e>=0;n.length<t;)n="0"+n;return(r?i?"+":"":"-")+n}function C(e,t,i,n){var r=t._milliseconds,a=t._days,o=t._months;if(n=null==n?!0:n,r)e._d.setTime(+e._d+r*i);if(a)se(e,"Date",oe(e,"Date")+a*i);if(o)ae(e,oe(e,"Month")+o*i);if(n)Be.updateOffset(e,a||o)}function D(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function f(e,t,i){var n,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;r>n;n++)if(i&&e[n]!==t[n]||!i&&F(e[n])!==F(t[n]))o++;return o+a}function h(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=qe[e]||$e[t]||t}return e}function E(e){var t,i,n={};for(i in e)if(e.hasOwnProperty(i))if(t=h(i))n[t]=e[i];return n}function p(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else if(0===t.indexOf("month"))i=12,n="month";else return;Be[t]=function(r,a){var o,s,l=Be.fn._lang[t],u=[];if("number"==typeof r)a=r,r=e;if(s=function(e){var t=Be().utc().set(n,e);return l.call(Be.fn._lang,t,r||"")},null!=a)return s(a);else{for(o=0;i>o;o++)u.push(s(o));return u}}}function F(e){var t=+e,i=0;if(0!==t&&isFinite(t))if(t>=0)i=Math.floor(t);else i=Math.ceil(t);return i}function m(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function g(e,t,i){return te(Be([e,11,31+t-i]),t,i).week}function H(e){return G(e)?366:365}function G(e){return e%4===0&&e%100!==0||e%400===0}function I(e){var t;if(e._a&&-2===e._pf.overflow){if(t=e._a[fe]<0||e._a[fe]>11?fe:e._a[he]<1||e._a[he]>m(e._a[de],e._a[fe])?he:e._a[Ee]<0||e._a[Ee]>23?Ee:e._a[pe]<0||e._a[pe]>59?pe:e._a[Fe]<0||e._a[Fe]>59?Fe:e._a[me]<0||e._a[me]>999?me:-1,e._pf._overflowDayOfYear&&(de>t||t>he))t=he;e._pf.overflow=t}}function v(e){if(null==e._isValid)if(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict)e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length;return e._isValid}function y(e){return e?e.toLowerCase().replace("_","-"):e}function J(e,t){return t._isUTC?Be(e).zone(t._offset||0):Be(e).local()}function L(e,t){if(t.abbr=e,!ge[e])ge[e]=new o;return ge[e].set(t),ge[e]}function M(e){delete ge[e]}function b(e){var t,i,n,r,a=0,o=function(e){if(!ge[e]&&Ge)try{require("./lang/"+e)}catch(t){}return ge[e]};if(!e)return Be.fn._lang;if(!D(e)){if(i=o(e))return i;e=[e]}for(;a<e.length;){for(r=y(e[a]).split("-"),t=r.length,n=y(e[a+1]),n=n?n.split("-"):null;t>0;){if(i=o(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&f(r,n,!0)>=t-1)break;t--}a++}return Be.fn._lang}function N(e){if(e.match(/\[[\s\S]/))return e.replace(/^\[|\]$/g,"");else return e.replace(/\\/g,"")}function K(e){var t,i,n=e.match(Je);for(t=0,i=n.length;i>t;t++)if(rt[n[t]])n[t]=rt[n[t]];else n[t]=N(n[t]);return function(r){var a="";for(t=0;i>t;t++)a+=n[t]instanceof Function?n[t].call(r,e):n[t];return a}}function x(e,t){if(!e.isValid())return e.lang().invalidDate();if(t=P(t,e.lang()),!et[t])et[t]=K(t);return et[t](e)}function P(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Le.lastIndex=0;n>=0&&Le.test(e);)e=e.replace(Le,i),Le.lastIndex=0,n-=1;return e}function _(e,t){var i,n=t._strict;switch(e){case"Q":return we;case"DDDD":return ke;case"YYYY":case"GGGG":case"gggg":return n?Qe:Ne;case"Y":case"G":case"g":return Ue;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Ve:Ke;case"S":if(n)return we;case"SS":if(n)return Re;case"SSS":if(n)return ke;case"DDD":return be;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Pe;case"a":case"A":return b(t._l)._meridiemParse;case"X":return Te;case"Z":case"ZZ":return _e;case"T":return Oe;case"SSSS":return xe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Re:Me;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Me;case"Do":return Se;default:return i=new RegExp(U(V(e.replace("\\","")),"i"))}}function O(e){e=e||"";var t=e.match(_e)||[],i=t[t.length-1]||[],n=(i+"").match(je)||["-",0,0],r=+(60*n[1])+F(n[2]);return"+"===n[0]?-r:r}function T(e,t,i){var n,r=i._a;switch(e){case"Q":if(null!=t)r[fe]=3*(F(t)-1);break;case"M":case"MM":if(null!=t)r[fe]=F(t)-1;break;case"MMM":case"MMMM":if(n=b(i._l).monthsParse(t),null!=n)r[fe]=n;else i._pf.invalidMonth=t;break;case"D":case"DD":if(null!=t)r[he]=F(t);break;case"Do":if(null!=t)r[he]=F(parseInt(t,10));break;case"DDD":case"DDDD":if(null!=t)i._dayOfYear=F(t);break;case"YY":r[de]=Be.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[de]=F(t);break;case"a":case"A":i._isPm=b(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[Ee]=F(t);break;case"m":case"mm":r[pe]=F(t);break;case"s":case"ss":r[Fe]=F(t);break;case"S":case"SS":case"SSS":case"SSSS":r[me]=F(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=O(t);break;case"dd":case"ddd":case"dddd":if(n=b(i._l).weekdaysParse(t),null!=n)i._w=i._w||{},i._w.d=n;else i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":if(e=e.substr(0,2),t)i._w=i._w||{},i._w[e]=F(t);break;case"gg":case"GG":i._w=i._w||{},i._w[e]=Be.parseTwoDigitYear(t)}}function S(e){var i,n,r,a,o,s,l,u;if(i=e._w,null!=i.GG||null!=i.W||null!=i.E)o=1,s=4,n=t(i.GG,e._a[de],te(Be(),1,4).year),r=t(i.W,1),a=t(i.E,1);else if(u=b(e._l),o=u._week.dow,s=u._week.doy,n=t(i.gg,e._a[de],te(Be(),o,s).year),r=t(i.w,1),null!=i.d){if(a=i.d,o>a)++r}else if(null!=i.e)a=i.e+o;else a=o;l=ie(n,r,a,s,o),e._a[de]=l.year,e._dayOfYear=l.dayOfYear}function w(e){var i,n,r,a,o=[];if(!e._d){
if(r=k(e),e._w&&null==e._a[he]&&null==e._a[fe])S(e);if(e._dayOfYear){if(a=t(e._a[de],r[de]),e._dayOfYear>H(a))e._pf._overflowDayOfYear=!0;n=Z(a,0,e._dayOfYear),e._a[fe]=n.getUTCMonth(),e._a[he]=n.getUTCDate()}for(i=0;3>i&&null==e._a[i];++i)e._a[i]=o[i]=r[i];for(;7>i;i++)e._a[i]=o[i]=null==e._a[i]?2===i?1:0:e._a[i];if(e._d=(e._useUTC?Z:j).apply(null,o),null!=e._tzm)e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function R(e){var t;if(!e._d)t=E(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],w(e)}function k(e){var t=new Date;if(e._useUTC)return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()];else return[t.getFullYear(),t.getMonth(),t.getDate()]}function Q(e){if(e._f===Be.ISO_8601)return void z(e);e._a=[],e._pf.empty=!0;var t,i,n,r,a,o=b(e._l),s=""+e._i,l=s.length,u=0;for(n=P(e._f,o).match(Je)||[],t=0;t<n.length;t++){if(r=n[t],i=(s.match(_(r,e))||[])[0]){if(a=s.substr(0,s.indexOf(i)),a.length>0)e._pf.unusedInput.push(a);s=s.slice(s.indexOf(i)+i.length),u+=i.length}if(rt[r]){if(i)e._pf.empty=!1;else e._pf.unusedTokens.push(r);T(r,i,e)}else if(e._strict&&!i)e._pf.unusedTokens.push(r)}if(e._pf.charsLeftOver=l-u,s.length>0)e._pf.unusedInput.push(s);if(e._isPm&&e._a[Ee]<12)e._a[Ee]+=12;if(e._isPm===!1&&12===e._a[Ee])e._a[Ee]=0;w(e),I(e)}function V(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r})}function U(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(e){var t,n,r,a,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)if(o=0,t=u({},e),t._pf=i(),t._f=e._f[a],Q(t),v(t)){if(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,null==r||r>o)r=o,n=t}else;u(e,n||t)}function z(e){var t,i,n=e._i,r=We.exec(n);if(r){for(e._pf.iso=!0,t=0,i=Ye.length;i>t;t++)if(Ye[t][1].exec(n)){e._f=Ye[t][0]+(r[6]||" ");break}for(t=0,i=Xe.length;i>t;t++)if(Xe[t][1].exec(n)){e._f+=Xe[t][0];break}if(n.match(_e))e._f+="Z";Q(e)}else e._isValid=!1}function Y(e){if(z(e),e._isValid===!1)delete e._isValid,Be.createFromInputFallback(e)}function X(t){var i=t._i,n=Ie.exec(i);if(i===e)t._d=new Date;else if(n)t._d=new Date(+n[1]);else if("string"==typeof i)Y(t);else if(D(i))t._a=i.slice(0),w(t);else if(d(i))t._d=new Date(+i);else if("object"==typeof i)R(t);else if("number"==typeof i)t._d=new Date(i);else Be.createFromInputFallback(t)}function j(e,t,i,n,r,a,o){var s=new Date(e,t,i,n,r,a,o);if(1970>e)s.setFullYear(e);return s}function Z(e){var t=new Date(Date.UTC.apply(null,arguments));if(1970>e)t.setUTCFullYear(e);return t}function q(e,t){if("string"==typeof e)if(!isNaN(e))e=parseInt(e,10);else if(e=t.weekdaysParse(e),"number"!=typeof e)return null;return e}function $(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function ee(e,t,i){var n=De(Math.abs(e)/1e3),r=De(n/60),a=De(r/60),o=De(a/24),s=De(o/365),l=n<tt.s&&["s",n]||1===r&&["m"]||r<tt.m&&["mm",r]||1===a&&["h"]||a<tt.h&&["hh",a]||1===o&&["d"]||o<=tt.dd&&["dd",o]||o<=tt.dm&&["M"]||o<tt.dy&&["MM",De(o/30)]||1===s&&["y"]||["yy",s];return l[2]=t,l[3]=e>0,l[4]=i,$.apply({},l)}function te(e,t,i){var n,r=i-t,a=i-e.day();if(a>r)a-=7;if(r-7>a)a+=7;return n=Be(e).add("d",a),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ie(e,t,i,n,r){var a,o,s=Z(e,0,1).getUTCDay();return s=0===s?7:s,i=null!=i?i:r,a=r-s+(s>n?7:0)-(r>s?7:0),o=7*(t-1)+(i-r)+a+1,{year:o>0?e:e-1,dayOfYear:o>0?o:H(e-1)+o}}function ne(t){var i=t._i,n=t._f;if(null===i||n===e&&""===i)return Be.invalid({nullInput:!0});if("string"==typeof i)t._i=i=b().preparse(i);if(Be.isMoment(i))t=A(i),t._d=new Date(+i._d);else if(n)if(D(n))W(t);else Q(t);else X(t);return new s(t)}function re(e,t){var i,n;if(1===t.length&&D(t[0]))t=t[0];if(!t.length)return Be();for(i=t[0],n=1;n<t.length;++n)if(t[n][e](i))i=t[n];return i}function ae(e,t){var i;if("string"==typeof t)if(t=e.lang().monthsParse(t),"number"!=typeof t)return e;return i=Math.min(e.date(),m(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function oe(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function se(e,t,i){if("Month"===t)return ae(e,i);else return e._d["set"+(e._isUTC?"UTC":"")+t](i)}function le(e,t){return function(i){if(null!=i)return se(this,e,i),Be.updateOffset(this,t),this;else return oe(this,e)}}function ue(e){Be.duration.fn[e]=function(){return this._data[e]}}function Ae(e,t){Be.duration.fn["as"+e]=function(){return+this/t}}for(var Be,ce,Ce="2.7.0",De=("undefined"!=typeof global?global:this,Math.round),de=0,fe=1,he=2,Ee=3,pe=4,Fe=5,me=6,ge={},He={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Ge="undefined"!=typeof module&&module.exports,Ie=/^\/?Date\((\-?\d+)/i,ve=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ye=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Je=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Le=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Me=/\d\d?/,be=/\d{1,3}/,Ne=/\d{1,4}/,Ke=/[+\-]?\d{1,6}/,xe=/\d+/,Pe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_e=/Z|[\+\-]\d\d:?\d\d/gi,Oe=/T/i,Te=/[\+\-]?\d+(\.\d{1,3})?/,Se=/\d{1,2}/,we=/\d/,Re=/\d\d/,ke=/\d{3}/,Qe=/\d{4}/,Ve=/[+-]?\d{6}/,Ue=/[+-]?\d+/,We=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ze="YYYY-MM-DDTHH:mm:ssZ",Ye=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Xe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],je=/([\+\-]|\d\d)/gi,Ze=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),qe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$e={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},et={},tt={s:45,m:45,h:22,dd:25,dm:45,dy:345},it="DDD w W M D d".split(" "),nt="M D H h m s w W".split(" "),rt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+c(Math.abs(e),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return F(this.milliseconds()/100)},SS:function(){return c(F(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";if(0>e)e=-e,t="-";return t+c(F(e/60),2)+":"+c(F(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";if(0>e)e=-e,t="-";return t+c(F(e/60),2)+c(F(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},at=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];it.length;)ce=it.pop(),rt[ce+"o"]=a(rt[ce],ce);for(;nt.length;)ce=nt.pop(),rt[ce+ce]=r(rt[ce],2);for(rt.DDDD=r(rt.DDD,3),u(o.prototype,{set:function(e){var t,i;for(i in e)if(t=e[i],"function"==typeof t)this[i]=t;else this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;if(!this._monthsParse)this._monthsParse=[];for(t=0;12>t;t++){if(!this._monthsParse[t])i=Be.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i");if(this._monthsParse[t].test(e))return t}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;if(!this._weekdaysParse)this._weekdaysParse=[];for(t=0;7>t;t++){if(!this._weekdaysParse[t])i=Be([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i");if(this._weekdaysParse[t].test(e))return t}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];if(!t&&this._longDateFormat[e.toUpperCase()])t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t;return t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){if(e>11)return i?"pm":"PM";else return i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(e,t,i,n):r.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return te(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),Be=function(t,n,r,a){var o;if("boolean"==typeof r)a=r,r=e;return o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=r,o._strict=a,o._isUTC=!1,o._pf=i(),ne(o)},Be.suppressDeprecationWarnings=!1,Be.createFromInputFallback=n("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),Be.min=function(){var e=[].slice.call(arguments,0);return re("isBefore",e)},Be.max=function(){var e=[].slice.call(arguments,0);return re("isAfter",e)},Be.utc=function(t,n,r,a){var o;if("boolean"==typeof r)a=r,r=e;return o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=r,o._i=t,o._f=n,o._strict=a,o._pf=i(),ne(o).utc()},Be.unix=function(e){return Be(1e3*e)},Be.duration=function(e,t){var i,n,r,a=e,o=null;if(Be.isDuration(e))a={ms:e._milliseconds,d:e._days,M:e._months};else if("number"==typeof e)if(a={},t)a[t]=e;else a.milliseconds=e;else if(o=ve.exec(e))i="-"===o[1]?-1:1,a={y:0,d:F(o[he])*i,h:F(o[Ee])*i,m:F(o[pe])*i,s:F(o[Fe])*i,ms:F(o[me])*i};else if(o=ye.exec(e))i="-"===o[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},a={y:r(o[2]),M:r(o[3]),d:r(o[4]),h:r(o[5]),m:r(o[6]),s:r(o[7]),w:r(o[8])};if(n=new l(a),Be.isDuration(e)&&e.hasOwnProperty("_lang"))n._lang=e._lang;return n},Be.version=Ce,Be.defaultFormat=ze,Be.ISO_8601=function(){},Be.momentProperties=He,Be.updateOffset=function(){},Be.relativeTimeThreshold=function(t,i){if(tt[t]===e)return!1;else return tt[t]=i,!0},Be.lang=function(e,t){var i;if(!e)return Be.fn._lang._abbr;if(t)L(y(e),t);else if(null===t)M(e),e="en";else if(!ge[e])b(e);return i=Be.duration.fn._lang=Be.fn._lang=b(e),i._abbr},Be.langData=function(e){if(e&&e._lang&&e._lang._abbr)e=e._lang._abbr;return b(e)},Be.isMoment=function(e){return e instanceof s||null!=e&&e.hasOwnProperty("_isAMomentObject")},Be.isDuration=function(e){return e instanceof l},ce=at.length-1;ce>=0;--ce)p(at[ce]);Be.normalizeUnits=function(e){return h(e)},Be.invalid=function(e){var t=Be.utc(NaN);if(null!=e)u(t._pf,e);else t._pf.userInvalidated=!0;return t},Be.parseZone=function(){return Be.apply(null,arguments).parseZone()},Be.parseTwoDigitYear=function(e){return F(e)+(F(e)>68?1900:2e3)},u(Be.fn=s.prototype,{clone:function(){return Be(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=Be(this).utc();if(0<e.year()&&e.year()<=9999)return x(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]");else return x(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return v(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&f(this._a,(this._isUTC?Be.utc(this._a):Be(this._a)).toArray())>0;else return!1},parsingFlags:function(){return u({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=x(this,e||Be.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;if("string"==typeof e&&"string"==typeof t)i=Be.duration(isNaN(+t)?+e:+t,isNaN(+t)?t:e);else if("string"==typeof e)i=Be.duration(+t,e);else i=Be.duration(e,t);return C(this,i,1),this},subtract:function(e,t){var i;if("string"==typeof e&&"string"==typeof t)i=Be.duration(isNaN(+t)?+e:+t,isNaN(+t)?t:e);else if("string"==typeof e)i=Be.duration(+t,e);else i=Be.duration(e,t);return C(this,i,-1),this},diff:function(e,t,i){var n,r,a=J(e,this),o=6e4*(this.zone()-a.zone());if(t=h(t),"year"===t||"month"===t){if(n=432e5*(this.daysInMonth()+a.daysInMonth()),r=12*(this.year()-a.year())+(this.month()-a.month()),r+=(this-Be(this).startOf("month")-(a-Be(a).startOf("month")))/n,r-=6e4*(this.zone()-Be(this).startOf("month").zone()-(a.zone()-Be(a).startOf("month").zone()))/n,"year"===t)r/=12}else n=this-a,r="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-o)/864e5:"week"===t?(n-o)/6048e5:n;return i?r:B(r)},from:function(e,t){return Be.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(Be(),e)},calendar:function(e){var t=e||Be(),i=J(t,this).startOf("day"),n=this.diff(i,"days",!0),r=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.lang().calendar(r,this))},isLeapYear:function(){return G(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=e)return e=q(e,this.lang()),this.add({d:e-t});else return t},month:le("Month",!0),startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===e)this.weekday(0);else if("isoWeek"===e)this.isoWeekday(1);if("quarter"===e)this.month(3*Math.floor(this.month()/3));return this},endOf:function(e){return e=h(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+Be(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+Be(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+J(e,this).startOf(t)},min:n("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=Be.apply(null,arguments),this>e?this:e}),max:n("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=Be.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i=this._offset||0;if(null!=e){if("string"==typeof e)e=O(e);if(Math.abs(e)<16)e=60*e;if(this._offset=e,this._isUTC=!0,i!==e)if(!t||this._changeInProgress)C(this,Be.duration(i-e,"m"),1,!1);else if(!this._changeInProgress)this._changeInProgress=!0,Be.updateOffset(this,!0),this._changeInProgress=null}else return this._isUTC?i:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm)this.zone(this._tzm);else if("string"==typeof this._i)this.zone(this._i);return this},hasAlignedHourOffset:function(e){if(!e)e=0;else e=Be(e).zone();return(this.zone()-e)%60===0},daysInMonth:function(){return m(this.year(),this.month())},dayOfYear:function(e){var t=De((Be(this).startOf("day")-Be(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=te(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=te(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=te(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return g(this.year(),1,4)},weeksInYear:function(){var e=this._lang._week;return g(this.year(),e.dow,e.doy)},get:function(e){return e=h(e),this[e]()},set:function(e,t){if(e=h(e),"function"==typeof this[e])this[e](t);return this},lang:function(t){if(t===e)return this._lang;else return this._lang=b(t),this}}),Be.fn.millisecond=Be.fn.milliseconds=le("Milliseconds",!1),Be.fn.second=Be.fn.seconds=le("Seconds",!1),Be.fn.minute=Be.fn.minutes=le("Minutes",!1),Be.fn.hour=Be.fn.hours=le("Hours",!0),Be.fn.date=le("Date",!0),Be.fn.dates=n("dates accessor is deprecated. Use date instead.",le("Date",!0)),Be.fn.year=le("FullYear",!0),Be.fn.years=n("years accessor is deprecated. Use year instead.",le("FullYear",!0)),Be.fn.days=Be.fn.day,Be.fn.months=Be.fn.month,Be.fn.weeks=Be.fn.week,Be.fn.isoWeeks=Be.fn.isoWeek,Be.fn.quarters=Be.fn.quarter,Be.fn.toJSON=Be.fn.toISOString,u(Be.duration.fn=l.prototype,{_bubble:function(){var e,t,i,n,r=this._milliseconds,a=this._days,o=this._months,s=this._data;s.milliseconds=r%1e3,e=B(r/1e3),s.seconds=e%60,t=B(e/60),s.minutes=t%60,i=B(t/60),s.hours=i%24,a+=B(i/24),s.days=a%30,o+=B(a/30),s.months=o%12,n=B(o/12),s.years=n},weeks:function(){return B(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*F(this._months/12)},humanize:function(e){var t=+this,i=ee(t,!e,this.lang());if(e)i=this.lang().pastFuture(t,i);return this.lang().postformat(i)},add:function(e,t){var i=Be.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=Be.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:Be.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds())return"P0D";else return(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||r||a?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(a?a+"S":"")}});for(ce in Ze)if(Ze.hasOwnProperty(ce))Ae(ce,Ze[ce]),ue(ce.toLowerCase());if(Ae("Weeks",6048e5),Be.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},Be.lang("en",{ordinal:function(e){var t=e%10,i=1===F(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Ge)module.exports=Be}).call(this)}),define("moment",["moment/moment"],function(e){return e}),define("bat-ria/util",["require","underscore","moment","./io/serverIO","urijs","./system/user","etpl"],function(require){var e=require("underscore"),t=require("moment"),i=require("./io/serverIO"),n={};return n.genRequesters=function(t){if(e.isString(t))return function(e,n){return i.post(t,e,n)};else if(e.isObject(t)){var n=e.clone(t);return e.each(n,function(t,r){if(e.isString(t))n[r]=function(e,n){return i.post(t,e,n)}}),n}},n.getTimeRange=function(i,n,r){if(1===arguments.length)r=i;var a={inputFormat:"YYYYMMDDHHmmss",outputFormat:"Date"};if(r=e.defaults({},r,a),i&&n)i=e.isString(i)?t(i,r.inputFormat):t(i),n=e.isString(n)?t(n,r.inputFormat):t(n);else{var o=t().startOf("day");i=o.clone().subtract("days",7),n=o.clone().subtract("day",1).endOf("day")}if("date"===r.outputFormat.toLowerCase())i=i.toDate(),n=n.toDate();else i=i.format(r.outputFormat),n=n.format(r.outputFormat);var s={begin:r.beginKey||"begin",end:r.endKey||"end"};return e.mapKey({begin:i,end:n},{begin:s.begin,end:s.end})},n.toMap=function(t,i,n){var r,a,o,s={},n=n;for(r=t.length;r--;)if(a=t[r],o=a[i],null!=o)if(e.isFunction(n)){var l=n(a);s[l.key]=l.value}else if(e.isString(n))s[o]=a[n];else s[o]=a;return s},n.genListLink=function(t){var i={className:"list-operation"};t=e.defaults(t,i);var n={href:t.url,"class":t.className};if(t.target&&"_self"!==t.target.toLowerCase())n.target=t.target;return n=e.map(n,function(t,i){return i+'="'+e.escape(t)+'"'}),"<a "+n.join(" ")+">"+e.escape(t.text)+"</a>"},n.genListCommand=function(t){var i={tagName:"span",className:"list-operation"};t=e.defaults(t,i);var n={"class":t.className,"data-command":t.type};if(null!=t.args)n["data-command-args"]=t.args;n=e.map(n,function(t,i){return i+'="'+e.escape(t)+'"'});var r=e.escape(t.tagName);return"<"+r+" "+n.join(" ")+">"+e.escape(t.text)+"</"+r+">"},n.genListOperations=function(t,i){i=i||{};var r=e.map(t,function(e){if(e.url)return n.genListLink(e);else return n.genListCommand(e)});return r.join(i.separator||'<span class="list-operation-separator">|</span>')},n.download=function(e){function t(){var t=require("urijs"),i=require("./system/user"),n=i.ader&&i.ader.id||t.parseQuery(document.location.search).aderId,r=n?{aderId:n}:{};return t(e).addQuery(r).toString()}function i(){var e=document.getElementById(n);if(!e)e=document.createElement("div"),e.id=n,e.style.display="none",document.body.appendChild(e);return e}var n="__DownloadContainer__",r="__DownloadForm__",a="__DownloadIframe__",o=['<form action="${url}" method="post" id="${formId}" ','name="${formId}" target="${iframeId}"></form>','<iframe src="about:blank" id="${iframeId}" name="${iframeId}">',"</iframe>"].join(""),s=i(),l=require("etpl").compile(o);s.innerHTML=l({url:t(e),formId:r,iframeId:a}),document.getElementById(r).submit()},n}),define("bat-ria/main",["require","underscore","./util","er/config","er/Deferred","er","./extension/underscore","./extension/hooks","./extension/ui"],function(require){function e(){var e=s.filterObject(o.api,o.isRequester||function(e){return!/\/(?:up|down)load$/.test(e)});o.api=s.extend(o.api,l.genRequesters(e))}function t(){var e=require("er/config");e.indexURL=o.index,e.systemName=o.systemName}function i(){var e=require("er/Deferred");return e.all(o.api.user(),o.api.constants())}function n(e,t){}function r(){t(),require("er").start()}function a(t){return o=t,require("./extension/underscore").activate(),require("./extension/hooks").activate(o.hooks),require("./extension/ui").activate(),e(),t.initData&&(n=t.initData),i().then(n).then(r)}var o,s=require("underscore"),l=require("./util");return{start:a}}),define("bat-ria",["bat-ria/main"],function(e){return e}),define("bat-ria/extension/underscore",["require","underscore"],function(require){function e(){t.mixin(i)}var t=require("underscore"),i={};return i.purify=function n(e,i,r){i=i||{};var a={};return t.each(e,function(e,t){var o=null==e||""===e,s=i.hasOwnProperty(t)&&i[t]===e;if(!o&&!s)if(r&&"object"==typeof e)a[t]=n(e,i[t],r);else a[t]=e}),a},i.filterObject=function(e,i,n){var r={};if(null==e)return results;else return t.each(e,function(t,a){if(i.call(n,t,a,e))r[a]=t}),r},i.mapObject=function(e,i,n){var r={};if(null==e)return r;else return t.each(e,function(e,t){r[t]=i.call(n,e)}),r},i.mapKey=function(e,i){var n={};if(null==e)return n;else return t.each(e,function(e,t){if(i[t])n[i[t]]=e;else n[t]=e}),n},i.trim=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},i.pascalize=function(e){if(e+="",/^[A-Z\-_]+$/.test(e))e=e.toLowerCase();return e=e.replace(/[\s-_]+(.)/g,function(e,t){return t.toUpperCase()}),e=e.charAt(0).toUpperCase()+e.slice(1)},i.camelize=function(e){return e=i.pascalize(e),e.charAt(0).toLowerCase()+e.slice(1)},i.dasherize=function(e){if(e=i.pascalize(e),e=e.replace(/[A-Z]{2,}/g,function(e){return e.charAt(0)+e.slice(1,-1).toLowerCase()+e.charAt(e.length-1)}),e=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),"-"===e.charAt(0))e=e.substring(1);return e},i.constanize=function(e){return e=i.pascalize(e),e.toUpperCase()},i.pluralize=function(e){return e.replace(/y$/,"ie")+"s"},i.formatNumber=function(e,t,i,n){if("number"!=typeof arguments[1])n=arguments[2],i=arguments[1],t=0;if(n=n||"",i=i||"",null==e||isNaN(e))return n+i;e=parseFloat(e).toFixed(t);var r=e.split("."),a=r[0],o=r[1];a=a.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,");var s=n+a;if(o)s+="."+o;return s},i.pad=function(e,t,i){e+="";var n=i-e.length;if(n>0){var r=new Array(n+1).join(t);return r+e}else return e},i.padRight=function(){s+="";var e=length-s.length;if(e>0){var t=new Array(e+1).join(padding);return s+t}else return s},i.deepClone=function(e){if(!t.isObject(e)||t.isFunction(e))return e;if(t.isArray(e))return t.map(e,i.deepClone);var n={};return t.each(e,function(e,t){n[t]=i.deepClone(e)}),n},i.sprintf=function(e){var t=[].slice.call(arguments,1),i=0;return e.replace(/%s/g,function(e){return t[i++]})},{activate:t.once(e)}}),define("esui/lib/string",["require","underscore"],function(require){var e=require("underscore"),t={},i=/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g;return t.trim=function(e){if(!e)return"";else return String(e).replace(i,"")},t.format=function(e,t){if(!e)return"";if(null==t)return e;else return e.replace(/\$\{(.+?)\}/g,function(e,i){var n=t[i];if("function"==typeof n)n=n(i);return null==n?"":n})},t.camelize=function(e){if(!e)return"";else return e.replace(/-([a-z])/g,function(e){return e.toUpperCase()})},t.pascalize=function(e){if(!e)return"";else return e.charAt(0).toUpperCase()+t.camelize(e.slice(1))},t.splitTokenList=function(i){if(!i)return[];if(!e.isArray(i))return e.chain(i.split(/[,\s]/)).map(t.trim).compact().value()},t}),define("esui/lib/dom",["require","underscore","./string"],function(require){var e=require("underscore"),t=require("./string"),i={};return i.g=function(e){if(!e)return null;else return"string"==typeof e?document.getElementById(e):e},i.isInput=function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"textarea"===t},i.removeNode=function(e){if("string"==typeof e)e=i.g(e);if(e){var t=e.parentNode;if(t)t.removeChild(e)}},i.insertAfter=function(e,t){var i=t.parentNode;if(i)i.insertBefore(e,t.nextSibling);return e},i.insertBefore=function(e,t){var i=t.parentNode;if(i)i.insertBefore(e,t);return e},i.getChildren=function(t){return e.filter(t.children,function(e){return 1===e.nodeType})},i.getComputedStyle=function(e,t){if(!e)return"";var i=9===e.nodeType?e:e.ownerDocument||e.document;if(i.defaultView&&i.defaultView.getComputedStyle){var n=i.defaultView.getComputedStyle(e,null);if(n)return n[t]||n.getPropertyValue(t)}else if(e&&e.currentStyle)return e.currentStyle[t];return""},i.getStyle=function(e,n){return n=t.camelize(n),e.style[n]||(e.currentStyle?e.currentStyle[n]:"")||i.getComputedStyle(e,n)},i.getOffset=function(e){if(!e)return{top:0,right:0,bottom:0,left:0,width:0,height:0};var t=e.getBoundingClientRect(),i={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top},n=document.documentElement.clientTop||document.body.clientTop||0,r=document.documentElement.clientLeft||document.body.clientLeft||0,a=window.pageYOffset||document.documentElement.scrollTop,o=window.pageXOffset||document.documentElement.scrollLeft;return i.top=i.top+a-n,i.bottom=i.bottom+a-n,i.left=i.left+o-r,i.right=i.right+o-r,i},i.getText=function(t){var n="";if(3===t.nodeType||4===t.nodeType)n+=t.nodeValue;else if(8!==t.nodeType)e.each(t.childNodes,function(e){n+=i.getText(e)});return n},i.dom={},i.dom.first=function(e){if(e=i.g(e),e.firstElementChild)return e.firstElementChild;for(var t=e.firstChild;t;t=t.nextSibling)if(1===t.nodeType)return t;return null},i.dom.last=function(e){if(e=i.g(e),e.lastElementChild)return e.lastElementChild;for(var t=e.lastChild;t;t=t.previousSibling)if(1===t.nodeType)return t;return null},i.dom.next=function(e){if(e=i.g(e),e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;t;t=t.nextSibling)if(1===t.nodeType)return t;return null},i.dom.contains=function(e,t){return e=i.g(e),t=i.g(t),e.contains?e!==t&&e.contains(t):!!(16&e.compareDocumentPosition(t))},i}),define("esui/lib/attribute",["require","./dom"],function(require){var e=require("./dom"),t={};t.hasAttribute=function(e,t){if(!e)return!1;if(e.hasAttribute)return e.hasAttribute(t);else return e.attributes&&e.attributes[t]&&e.attributes[t].specified};var i=function(){var e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"},t=document.createElement("div");t.innerHTML='<label for="test" class="test"></label>';var i=t.getElementsByTagName("label")[0];if("test"===i.getAttribute("className"))e["class"]="className";else e.className="class";if("test"===i.getAttribute("for"))e.htmlFor="for";else e["for"]="htmlFor";return e}();return t.setAttribute=function(t,n,r){if(t=e.g(t),!t)return null;if("style"===n)t.style.cssText=r;else n=i[n]||n,t.setAttribute(n,r);return t},t.getAttribute=function(t,n){if(t=e.g(t),!t)return null;if("style"===n)return t.style.cssText;else return n=i[n]||n,t.getAttribute(n)},t.removeAttribute=function(t,n){if(t=e.g(t))n=i[n]||n,t.removeAttribute(n)},t}),define("esui/lib",["require","underscore","./lib/attribute","./lib/class","./lib/date","./lib/dom","./lib/event","./lib/lang","./lib/page","./lib/string"],function(require){
var e={},t=require("underscore");if(/msie (\d+\.\d+)/i.test(navigator.userAgent))e.ie=document.documentMode||+RegExp.$1;return t.extend(e,require("./lib/attribute"),require("./lib/class"),require("./lib/date"),require("./lib/dom"),require("./lib/event"),require("./lib/lang"),require("./lib/page"),require("./lib/string")),e}),define("bat-ria/extension/ui",["require","underscore","esui/lib","esui/validator/MaxLengthRule","esui/validator/MinLengthRule","esui/validator/RequiredRule","esui/validator/PatternRule","esui/validator/MaxRule","esui/validator/MinRule","esui/validator/Rule","esui/CommandMenu","esui/Tab","esui","esui/Panel"],function(require){function e(){function e(e){var t=e.get("min"),i=e.get("max"),n=e.get("pattern")+"";if(null!=t&&null!=i&&A.hasOwnProperty(n)){var a=/\B(?=(\d{3})+(?!\d))/g,o=(t+"").replace(a,","),s=(i+"").replace(a,",");if(l.hasOwnProperty(n))return r.escape(e.get("title"))+"请填写≥"+o+"且≤"+s+"的整数";else return r.escape(e.get("title"))+"请填写≥"+o+"且≤"+s+"的数字，最多可保存至小数点后两位"}else return null}var t=require("esui/validator/MaxLengthRule"),i=require("esui/validator/MinLengthRule"),n=require("esui/validator/RequiredRule"),a=require("esui/validator/PatternRule"),o=require("esui/validator/MaxRule"),s=require("esui/validator/MinRule");n.prototype.errorMessage="请填写${title}";var l={"^\\d+$":!0,"/^\\d+$/":!0},u={"^\\d+(\\.\\d{1,2})?$":!0,"/^\\d+(\\.\\d{1,2})?$/":!0},A=r.extend({},l,u),B=require("esui/validator/Rule");t.prototype.getErrorMessage=function(t){if(t.get("maxErrorMessage")){var i=B.prototype.getErrorMessage;i.apply(this,arguments)}var n=e(t);if(n)return n;else return B.prototype.getErrorMessage.apply(this,arguments)},i.prototype.getErrorMessage=function(t){if(t.get("maxErrorMessage")){var i=B.prototype.getErrorMessage;i.apply(this,arguments)}var n=e(t);if(n)return n;else return B.prototype.getErrorMessage.apply(this,arguments)},o.prototype.getErrorMessage=function(t){if(t.get("maxErrorMessage")){var i=B.prototype.getErrorMessage;i.apply(this,arguments)}var n=e(t);if(n)return n;else return B.prototype.getErrorMessage.apply(this,arguments)},s.prototype.getErrorMessage=function(t){if(t.get("maxErrorMessage")){var i=B.prototype.getErrorMessage;i.apply(this,arguments)}var n=e(t);if(n)return n;else return B.prototype.getErrorMessage.apply(this,arguments)},a.prototype.getErrorMessage=function(t){var i=t.get("pattern")+"";if(t.get("patternErrorMessage")||!A.hasOwnProperty(i)){var n=B.prototype.getErrorMessage;n.apply(this,arguments)}var r=e(t);if(r)return r;else return B.prototype.getErrorMessage.apply(this,arguments)}}function t(){var e=require("esui/CommandMenu");e.prototype.linkTemplate='<a target="${target}" href="${href}">${text}</a>',e.prototype.getItemHTML=function(e){var t={text:a.encodeHTML(e.text),href:e.href&&a.encodeHTML(e.href),target:e.target||"_self"},i=e.href?this.linkTemplate:this.itemTemplate;return a.format(i,t)};var t=require("esui/Tab");t.prototype.linkTemplate='<a href="${href}">${title}</a>',t.prototype.getContentHTML=function(e){var t={title:a.encodeHTML(e.title),href:e.href&&a.encodeHTML(e.href)},i=e.href?this.linkTemplate:this.contentTemplate;return a.format(i,t)}}function i(){var e=require("esui"),t=require("esui/Panel");t.prototype.appendContent=function(t){var i=this,n=document.createElement("div");n.innerHTML=t;for(var a=n.childNodes,o=[],s=0;s<a.length;s++)o.push(a[s]);var l=r.extend({},i.renderOptions,{viewContext:i.viewContext,parent:i});r.each(o,function(t){i.main.appendChild(t),e.init(i.main,l)})}}function n(){e(),t(),i()}var r=require("underscore"),a=require("esui/lib");return{activate:r.once(n)}}),define("underscore/underscore",["require","exports","module"],function(require,exports,module){(function(){var e=this,t=e._,i={},n=Array.prototype,r=Object.prototype,a=Function.prototype,o=n.push,s=n.slice,l=n.concat,u=r.toString,A=r.hasOwnProperty,B=Array.isArray,c=Object.keys,C=a.bind,D=function(e){if(e instanceof D)return e;if(!(this instanceof D))return new D(e);else return void(this._wrapped=e)};if("undefined"!=typeof exports){if("undefined"!=typeof module&&module.exports)exports=module.exports=D;exports._=D}else e._=D;D.VERSION="1.6.0";var d=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)};case 4:return function(i,n,r,a){return e.call(t,i,n,r,a)}}return function(){return e.apply(t,arguments)}},f=function(e,t,i){if(null==e)return D.identity;if(D.isFunction(e))return d(e,t,i);if(D.isObject(e))return D.matches(e);else return D.property(e)};D.each=D.forEach=function(e,t,n){var r,a;if(null==e)return e;if(t=d(t,n),e.length===+e.length)for(r=0,a=e.length;a>r&&t(e[r],r,e)!==i;r++);else{var o=D.keys(e);for(r=0,a=o.length;a>r&&t(e[o[r]],o[r],e)!==i;r++);}return e},D.map=D.collect=function(e,t,i){var n=[];if(null==e)return n;else return t=f(t,i),D.each(e,function(e,i,r){n.push(t(e,i,r))}),n};var h="Reduce of empty array with no initial value";D.reduce=D.foldl=D.inject=function(e,t,i,n){var r=arguments.length>2;if(null==e)e=[];if(t=d(t,n,4),D.each(e,function(e,n,a){if(!r)i=e,r=!0;else i=t(i,e,n,a)}),!r)throw TypeError(h);return i},D.reduceRight=D.foldr=function(e,t,i,n){var r=arguments.length>2;if(null==e)e=[];var a=e.length;if(t=d(t,n,4),a!==+a){var o=D.keys(e);a=o.length}if(D.each(e,function(n,s,l){if(s=o?o[--a]:--a,!r)i=e[s],r=!0;else i=t(i,e[s],s,l)}),!r)throw TypeError(h);return i},D.find=D.detect=function(e,t,i){var n;return t=f(t,i),D.some(e,function(e,i,r){if(t(e,i,r))return n=e,!0;else return void 0}),n},D.filter=D.select=function(e,t,i){var n=[];if(null==e)return n;else return t=f(t,i),D.each(e,function(e,i,r){if(t(e,i,r))n.push(e)}),n},D.reject=function(e,t,i){return D.filter(e,D.negate(f(t)),i)},D.every=D.all=function(e,t,n){var r=!0;if(null==e)return r;else return t=f(t,n),D.each(e,function(e,n,a){if(r=t(e,n,a),!r)return i;else return void 0}),!!r},D.some=D.any=function(e,t,n){var r=!1;if(null==e)return r;else return t=f(t,n),D.each(e,function(e,n,a){if(r=t(e,n,a))return i;else return void 0}),!!r},D.contains=D.include=function(e,t){if(null==e)return!1;if(e.length===+e.length)return D.indexOf(e,t)>=0;else return D.some(e,function(e){return e===t})},D.invoke=function(e,t){var i=s.call(arguments,2),n=D.isFunction(t);return D.map(e,function(e){return(n?t:e[t]).apply(e,i)})},D.pluck=function(e,t){return D.map(e,D.property(t))},D.where=function(e,t){return D.filter(e,D.matches(t))},D.findWhere=function(e,t){return D.find(e,D.matches(t))},D.max=function(e,t,i){var n,r,a=-(1/0),o=-(1/0);if(!t&&D.isArray(e)){for(var s=0,l=e.length;l>s;s++)if(n=e[s],n>a)a=n}else t=f(t,i),D.each(e,function(e,i,n){if(r=t(e,i,n),r>o||r===-(1/0)&&a===-(1/0))a=e,o=r});return a},D.min=function(e,t,i){var n,r,a=1/0,o=1/0;if(!t&&D.isArray(e)){for(var s=0,l=e.length;l>s;s++)if(n=e[s],a>n)a=n}else t=f(t,i),D.each(e,function(e,i,n){if(r=t(e,i,n),o>r||r===1/0&&a===1/0)a=e,o=r});return a},D.shuffle=function(e){var t,i=0,n=[];return D.each(e,function(e){t=D.random(i++),n[i-1]=n[t],n[t]=e}),n},D.sample=function(e,t,i){if(null==t||i){if(e.length!==+e.length)e=D.values(e);return e[D.random(e.length-1)]}return D.shuffle(e).slice(0,Math.max(0,t))},D.sortBy=function(e,t,i){return t=f(t,i),D.pluck(D.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,i,n){var r={};return i=f(i,n),D.each(t,function(n,a){var o=i(n,a,t);e(r,n,o)}),r}};D.groupBy=E(function(e,t,i){if(D.has(e,i))e[i].push(t);else e[i]=[t]}),D.indexBy=E(function(e,t,i){e[i]=t}),D.countBy=E(function(e,t,i){if(D.has(e,i))e[i]++;else e[i]=1}),D.sortedIndex=function(e,t,i,n){i=f(i,n,1);for(var r=i(t),a=0,o=e.length;o>a;){var s=a+o>>>1;if(i(e[s])<r)a=s+1;else o=s}return a},D.toArray=function(e){if(!e)return[];if(D.isArray(e))return s.call(e);if(e.length===+e.length)return D.map(e,D.identity);else return D.values(e)},D.size=function(e){if(null==e)return 0;else return e.length===+e.length?e.length:D.keys(e).length},D.partition=function(e,t,i){t=f(t,i);var n=[],r=[];return D.each(e,function(e,i,a){(t(e,i,a)?n:r).push(e)}),[n,r]},D.first=D.head=D.take=function(e,t,i){if(null==e)return void 0;if(null==t||i)return e[0];if(0>t)return[];else return s.call(e,0,t)},D.initial=function(e,t,i){return s.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},D.last=function(e,t,i){if(null==e)return void 0;if(null==t||i)return e[e.length-1];else return s.call(e,Math.max(e.length-t,0))},D.rest=D.tail=D.drop=function(e,t,i){return s.call(e,null==t||i?1:t)},D.compact=function(e){return D.filter(e,D.identity)};var p=function(e,t,i,n){if(t&&D.every(e,D.isArray))return l.apply(n,e);for(var r=0,a=e.length;a>r;r++){var s=e[r];if(!D.isArray(s)&&!D.isArguments(s)){if(!i)n.push(s)}else if(t)o.apply(n,s);else p(s,t,i,n)}return n};D.flatten=function(e,t){return p(e,t,!1,[])},D.without=function(e){return D.difference(e,s.call(arguments,1))},D.uniq=D.unique=function(e,t,i,n){if(null==e)return[];if(D.isFunction(t))n=i,i=t,t=!1;if(i)i=f(i,n);for(var r=[],a=[],o=0,s=e.length;s>o;o++){var l=e[o];if(i)l=i(l,o,e);if(t?!o||a!==l:!D.contains(a,l)){if(t)a=l;else a.push(l);r.push(e[o])}}return r},D.union=function(){return D.uniq(p(arguments,!0,!0,[]))},D.intersection=function(e){if(null==e)return[];for(var t=[],i=arguments.length,n=0,r=e.length;r>n;n++){var a=e[n];if(!D.contains(t,a)){for(var o=1;i>o&&D.contains(arguments[o],a);o++);if(o===i)t.push(a)}else;}return t},D.difference=function(e){var t=p(s.call(arguments,1),!0,!0,[]);return D.filter(e,function(e){return!D.contains(t,e)})},D.zip=function(e){if(null==e)return[];for(var t=D.max(arguments,"length").length,i=Array(t),n=0;t>n;n++)i[n]=D.pluck(arguments,n);return i},D.object=function(e,t){if(null==e)return{};for(var i={},n=0,r=e.length;r>n;n++)if(t)i[e[n]]=t[n];else i[e[n][0]]=e[n][1];return i},D.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i)if("number"==typeof i)n=0>i?Math.max(0,r+i):i;else return n=D.sortedIndex(e,t),e[n]===t?n:-1;for(;r>n;n++)if(e[n]===t)return n;return-1},D.lastIndexOf=function(e,t,i){if(null==e)return-1;for(var n=null==i?e.length:i;n--;)if(e[n]===t)return n;return-1},D.range=function(e,t,i){if(arguments.length<=1)t=e||0,e=0;i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=0,a=Array(n);n>r;)a[r++]=e,e+=i;return a};var F=function(){};D.bind=function(e,t){var i,n;if(C&&e.bind===C)return C.apply(e,s.call(arguments,1));if(!D.isFunction(e))throw TypeError("Bind must be called on a function");return i=s.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(s.call(arguments)));F.prototype=e.prototype;var r=new F;F.prototype=null;var a=e.apply(r,i.concat(s.call(arguments)));if(Object(a)===a)return a;else return r}},D.partial=function(e){var t=s.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,a=n.length;a>r;r++)if(n[r]===D)n[r]=arguments[i++];for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},D.bindAll=function(e){var t,i=1,n=arguments.length;if(1>=n)throw Error("bindAll must be passed function names");for(;n>i;i++)t=arguments[i],e[t]=d(e[t],e,1/0);return e},D.memoize=function(e,t){var i=function(n){var r=i.cache,a=t?t.apply(this,arguments):n;if(!D.has(r,a))r[a]=e.apply(this,arguments);return r[n]};return i.cache={},i},D.delay=function(e,t){var i=s.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},D.defer=function(e){return D.delay.apply(D,[e,1].concat(s.call(arguments,1)))},D.throttle=function(e,t,i){var n,r,a,o=null,s=0;if(!i)i={};var l=function(){if(s=i.leading===!1?0:D.now(),o=null,a=e.apply(n,r),!o)n=r=null};return function(){var u=D.now();if(!s&&i.leading===!1)s=u;var A=t-(u-s);if(n=this,r=arguments,0>=A||A>t){if(clearTimeout(o),o=null,s=u,a=e.apply(n,r),!o)n=r=null}else if(!o&&i.trailing!==!1)o=setTimeout(l,A);return a}},D.debounce=function(e,t,i){var n,r,a,o,s,l=function(){var u=D.now()-o;if(t>u&&u>0)n=setTimeout(l,t-u);else if(n=null,!i)if(s=e.apply(a,r),!n)a=r=null};return function(){a=this,r=arguments,o=D.now();var u=i&&!n;if(!n)n=setTimeout(l,t);if(u)s=e.apply(a,r),a=r=null;return s}},D.once=function(e){var t,i=!1;return function(){if(i)return t;else return i=!0,t=e.apply(this,arguments),e=null,t}},D.wrap=function(e,t){return D.partial(t,e)},D.negate=function(e){return function(){return!e.apply(this,arguments)}},D.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},D.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments);else return void 0}},D.keys=function(e){if(!D.isObject(e))return[];if(c)return c(e);var t=[];for(var i in e)if(D.has(e,i))t.push(i);return t},D.values=function(e){for(var t=D.keys(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n},D.pairs=function(e){for(var t=D.keys(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n},D.invert=function(e){for(var t={},i=D.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},D.functions=D.methods=function(e){var t=[];for(var i in e)if(D.isFunction(e[i]))t.push(i);return t.sort()},D.extend=function(e){if(!D.isObject(e))return e;for(var t,i,n=1,r=arguments.length;r>n;n++){t=arguments[n];for(i in t)e[i]=t[i]}return e},D.pick=function(e,t,i){var n,r={};if(D.isFunction(t))for(n in e){var a=e[n];if(t.call(i,a,n,e))r[n]=a}else for(var o=l.apply([],s.call(arguments,1)),u=0,A=o.length;A>u;u++)if(n=o[u],n in e)r[n]=e[n];return r},D.omit=function(e,t,i){if(D.isFunction(t))t=D.negate(t);else{var n=D.map(l.apply([],s.call(arguments,1)),String);t=function(e,t){return!D.contains(n,t)}}return D.pick(e,t,i)},D.defaults=function(e){if(!D.isObject(e))return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];for(var r in n)if(void 0===e[r])e[r]=n[r]}return e},D.clone=function(e){if(!D.isObject(e))return e;else return D.isArray(e)?e.slice():D.extend({},e)},D.tap=function(e,t){return t(e),e};var m=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;if(e instanceof D)e=e._wrapped;if(t instanceof D)t=t._wrapped;var r=u.call(e);if(r!==u.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(e!=+e)return t!=+t;else return 0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=i.length;a--;)if(i[a]===e)return n[a]===t;var o=e.constructor,s=t.constructor;if(o!==s&&"constructor"in e&&"constructor"in t&&!(D.isFunction(o)&&o instanceof o&&D.isFunction(s)&&s instanceof s))return!1;i.push(e),n.push(t);var l,A;if("[object Array]"===r){if(l=e.length,A=l===t.length)for(;l--&&(A=m(e[l],t[l],i,n)););}else{var B,c=D.keys(e);if(l=c.length,A=D.keys(t).length==l)for(;l--&&(B=c[l],A=D.has(t,B)&&m(e[B],t[B],i,n)););}return i.pop(),n.pop(),A};if(D.isEqual=function(e,t){return m(e,t,[],[])},D.isEmpty=function(e){if(null==e)return!0;if(D.isArray(e)||D.isString(e)||D.isArguments(e))return 0===e.length;for(var t in e)if(D.has(e,t))return!1;return!0},D.isElement=function(e){return!(!e||1!==e.nodeType)},D.isArray=B||function(e){return"[object Array]"===u.call(e)},D.isObject=function(e){return e===Object(e)},D.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){D["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),!D.isArguments(arguments))D.isArguments=function(e){return D.has(e,"callee")};if("function"!=typeof/./)D.isFunction=function(e){return"function"==typeof e};D.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},D.isNaN=function(e){return D.isNumber(e)&&e!==+e},D.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},D.isNull=function(e){return null===e},D.isUndefined=function(e){return void 0===e},D.has=function(e,t){return null!=e&&A.call(e,t)},D.noConflict=function(){return e._=t,this},D.identity=function(e){return e},D.constant=function(e){return function(){return e}},D.noop=function(){},D.property=function(e){return function(t){return t[e]}},D.matches=function(e){return function(t){if(null==t)return D.isEmpty(e);if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},D.times=function(e,t,i){var n=Array(Math.max(0,e));t=d(t,i,1);for(var r=0;e>r;r++)n[r]=t(r);return n},D.random=function(e,t){if(null==t)t=e,e=0;return e+Math.floor(Math.random()*(t-e+1))},D.now=Date.now||function(){return(new Date).getTime()};var g={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};g.unescape=D.invert(g.escape);var H={escape:RegExp("["+D.keys(g.escape).join("")+"]","g"),unescape:RegExp("("+D.keys(g.unescape).join("|")+")","g")};D.each(["escape","unescape"],function(e){D[e]=function(t){if(null==t)return"";else return(""+t).replace(H[e],function(t){return g[e][t]})}}),D.result=function(e,t){if(null==e)return void 0;var i=e[t];return D.isFunction(i)?e[t]():i};var G=0;D.uniqueId=function(e){var t=++G+"";return e?e+t:t},D.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,v={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},y=/\\|'|\r|\n|\u2028|\u2029/g,J=function(e){return"\\"+v[e]};D.template=function(e,t,i){i=D.defaults({},i,D.templateSettings);var n=RegExp([(i.escape||I).source,(i.interpolate||I).source,(i.evaluate||I).source].join("|")+"|$","g"),r=0,a="__p+='";if(e.replace(n,function(t,i,n,o,s){if(a+=e.slice(r,s).replace(y,J),r=s+t.length,i)a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'";else if(n)a+="'+\n((__t=("+n+"))==null?'':__t)+\n'";else if(o)a+="';\n"+o+"\n__p+='";return t}),a+="';\n",!i.variable)a="with(obj||{}){\n"+a+"}\n";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=Function(i.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return o(t,D);var l=function(e){return o.call(this,e,D)},u=i.variable||"obj";return l.source="function("+u+"){\n"+a+"}",l},D.chain=function(e){var t=D(e);return t._chain=!0,t};var L=function(e){return this._chain?D(e).chain():e};D.mixin=function(e){D.each(D.functions(e),function(t){var i=D[t]=e[t];D.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),L.call(this,i.apply(D,e))}})},D.mixin(D),D.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];D.prototype[e]=function(){var i=this._wrapped;if(t.apply(i,arguments),("shift"===e||"splice"===e)&&0===i.length)delete i[0];return L.call(this,i)}}),D.each(["concat","join","slice"],function(e){var t=n[e];D.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),D.prototype.value=function(){return this._wrapped}}).call(this)}),define("underscore",["underscore/underscore"],function(e){return e}),define("bat-ria/extension/hooks",["require","underscore","urijs","../ui/loading","../io/tracing","../system/user","../io/serverIO","bat-ria/ui/Uploader","er/ajax"],function(require){function e(){var e=require("../system/user"),t=e.ader&&e.ader.id||n.parseQuery(document.location.search).aderId||e.visitor&&e.visitor.id;return t?{aderId:t}:{}}function t(t){t=i.defaults(t||{},{SHOW_LOADING:!0,ADD_ADER_ID:!0,ADD_ER_REQUEST_HEADER:!0});var s=require("../io/serverIO");if(t.ADD_ADER_ID){s.hooks.filterIndexUrl=function(t){return n(t).addQuery(e()).toString()};var l=require("bat-ria/ui/Uploader");l.prototype.filterAction=function(t){var i=e();if(i)t=n(t).addQuery(i).toString();return t}}if(s.hooks.beforeRequest=function(i){if(t.ADD_ADER_ID){var s=i.url,l=e();if(l)i.url=n(s).addQuery(l).toString()}if(i["X-silence"]=i["X-silence"]||i["x-silent"],t.SHOW_LOADING&&!i["X-silence"])r.isShowing()?r.show():o[i.xhrId]=setTimeout(function(){r.show(),a.loadingIndicator(),delete o[i.xhrId]},400)},t.SHOW_LOADING)s.hooks.afterComplete=function(e,t){if(!t.getRequestOption("X-silence")){var i=t.getRequestOption("xhrId");void 0===o[i]?r.hide():clearTimeout(o[i])}};if(t.ADD_ADER_ID){var u=require("er/ajax");u.hooks.beforeSend=function(e){e.setRequestHeader("X-Request-By","ERApplication")}}}var i=require("underscore"),n=require("urijs"),r=require("../ui/loading"),a=require("../io/tracing"),o={};return{activate:i.once(t)}}),define("babel-runtime/helpers/interop-require",["require"],function(require){var exports={};return exports["default"]=function(e){return e},exports}),define("babel-runtime/helpers/interop-require-default",["require"],function(require){var exports={};return exports["default"]=function(e){return{"default":e}},exports}),define("babel-runtime/helpers/inherits",["require"],function(require){var exports={},e=!{toString:1}.propertyIsEnumerable("toString");return exports["default"]=function(t,i){var n=function(){};n.prototype=i.prototype;var r=new n,a=t.prototype;t.prototype=r;for(var o in a)r[o]=a[o];if(e){if(a.hasOwnProperty("toString"))r.toString=a.toString;if(a.hasOwnProperty("valueOf"))r.valueOf=a.valueOf}if(t.prototype.constructor=t,!("__proto__"in t.prototype))t.prototype.__proto__=i.prototype;return t},exports}),define("babel-runtime/helpers/get",["require"],function(require){var exports={};return exports["default"]=function(e,t,i){return e[t]},exports}),define("babel-runtime/helpers/create-decorated-class",["require","./create-class"],function(require){return require("./create-class")}),define("babel-runtime/helpers/create-class",["require"],function(require){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.decorators,a=n.key;if(delete n.key,delete n.decorators,r)for(var o=0;o<r.length;o++){var s=r[o];if("function"==typeof s)n=s(e,a,n)||n;else throw new TypeError("The decorator for method "+a+" is of the invalid type "+typeof s)}if("function"==typeof n.get)e[a]=n.get();else if("function"==typeof n.value)e[a]=n.value}}var exports={};return exports["default"]=function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t},exports}),define("babel-runtime/helpers/class-call-check",["require"],function(require){var exports={};return exports["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},exports}),define("babel-runtime/core-js/symbol",["require"],function(require){var exports={},e=(new Date).getTime().toString(36),t=0;return exports["default"]=function(i){if(i)return i;else return e+"_"+(t++).toString(36)},exports}),define("babel-runtime/core-js/object/define-property",["require"],function(require){var exports={};return exports["default"]=function(e,t,i){e[t]=i},exports}),define("common/dep",["exports"],function(exports){});
